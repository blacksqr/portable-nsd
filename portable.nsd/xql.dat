dbqd.acs-admin.lib.service-parameters-oracle.services_select {dbqd.acs-admin.lib.service-parameters-oracle.services_select {
                    select package_id,
                           ap.package_key,
                           acs_object.name(package_id) as instance_name,
                           apm_package_type.num_parameters(ap.package_key) as parameter_count
                    from apm_packages ap,
                         apm_package_types
                    where ap.package_key = apm_package_types.package_key
                    and package_type = 'apm_service'
                    and (
                            acs_permission.permission_p(package_id, :user_id, 'read') = 't'
                         or acs_permission.permission_p(package_id, acs.magic_object_id('the_public'), 'read') = 't'
                        )
                    and   (ap.package_key != 'acs-subsite' or (select parent_id from site_nodes where object_id = package_id) is null)
                    order by instance_name
        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-admin/lib/service-parameters-oracle.xql}
dbqd.acs-admin.lib.service-parameters.services_select {dbqd.acs-admin.lib.service-parameters.services_select {
                    select package_id,
                           ap.package_key,
                           acs_object__name(package_id) as instance_name,
                           apm_package_type__num_parameters(ap.package_key) as parameter_count
                    from apm_packages ap,
                         apm_package_types
                    where ap.package_key = apm_package_types.package_key
                    and package_type = 'apm_service'
                    and (
                            acs_permission__permission_p(package_id, :user_id, 'read') = 't'
                         or acs_permission__permission_p(package_id, acs__magic_object_id('the_public'), 'read') = 't'
                        )
                    and   (ap.package_key != 'acs-subsite' or (select parent_id from site_nodes where object_id = package_id) is null)
                    order by instance_name
        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-admin/lib/service-parameters-postgresql.xql}
dbqd.acs-admin.tcl.apm-admin-procs-oracle.apm_higher_version_installed_p.apm_higher_version_installed_p {dbqd.acs-admin.tcl.apm-admin-procs-oracle.apm_higher_version_installed_p.apm_higher_version_installed_p {
      
		select apm_package_version.version_name_greater(:version_name, highest.version_name)
                from (select version_name 
		      from apm_package_versions
                      where version_id = apm_package.highest_version(:package_key)
                     ) highest
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-admin/tcl/apm-admin-procs-oracle.xql}
dbqd.acs-admin.tcl.apm-admin-procs.apm_higher_version_installed_p.apm_higher_version_installed_p {dbqd.acs-admin.tcl.apm-admin-procs.apm_higher_version_installed_p.apm_higher_version_installed_p {

		select apm_package_version__version_name_greater(:version_name, highest.version_name)
                from (select version_name
		      from apm_package_versions
                      where version_id = apm_package__highest_version(:package_key)
                     ) highest
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-admin/tcl/apm-admin-procs-postgresql.xql}
dbqd.acs-admin.tcl.apm-admin-procs.apm_parameter_section_slider.apm_parameter_sections {dbqd.acs-admin.tcl.apm-admin-procs.apm_parameter_section_slider.apm_parameter_sections {
      
	select distinct(section_name) 
	from apm_parameters
	where package_key = :package_key
    
      } {} {} {} c:/web/openacs/packages/acs-admin/tcl/apm-admin-procs.xql}
dbqd.acs-admin.www.apm.bulk-intall.version_select {dbqd.acs-admin.www.apm.bulk-intall.version_select {
      
	select pretty_name, version_name, package_key
	from apm_package_version_info i
	where version_id = :version_id
    
      } {} {} {} c:/web/openacs/packages/acs-admin/www/apm/bulk-intall.xql}
dbqd.acs-admin.www.apm.cvs-status.email_by_user_id {dbqd.acs-admin.www.apm.cvs-status.email_by_user_id {
      select email from parties where party_id = [ad_get_user_id]
      } {} {} {} c:/web/openacs/packages/acs-admin/www/apm/cvs-status.xql}
dbqd.acs-admin.www.apm.cvs-status.all_packages_owned_by_email {dbqd.acs-admin.www.apm.cvs-status.all_packages_owned_by_email {
      
    select v.package_key, v.version_id, v.package_name, v.version_name
    from   apm_package_version_info v, apm_package_owners o
    where  o.owner_url = :email
    and    v.version_id = o.version_id
    and    v.installed_p = 't'
    order by upper(package_name)
      } {} {} {} c:/web/openacs/packages/acs-admin/www/apm/cvs-status.xql}
dbqd.acs-admin.www.apm.cvs-status.apm_file_path {dbqd.acs-admin.www.apm.cvs-status.apm_file_path {
      
	    select path from apm_package_files where version_id = :version_id
	
      } {} {} {} c:/web/openacs/packages/acs-admin/www/apm/cvs-status.xql}
dbqd.acs-admin.www.apm.index-oracle.email_by_user_id {dbqd.acs-admin.www.apm.index-oracle.email_by_user_id {
      
    select email  from parties where party_id = :user_id

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-admin/www/apm/index-oracle.xql}
dbqd.acs-admin.www.apm.index-oracle.apm_table {dbqd.acs-admin.www.apm.index-oracle.apm_table {

        select   v.version_id, v.package_key, t.pretty_name, v.version_name, v.enabled_p,
                 v.installed_p, v.distribution_uri,
            (select count(*) from apm_package_versions v2
             where v2.package_key = v.package_key
             and   v2.installed_p = 't'
             and   apm_package_version.sortable_version_name(v2.version_name) > apm_package_version.sortable_version_name(v.version_name)) as  superseded_p,
             case
               when content_item.get_latest_revision(item_id) is null
               then 0
               else 1
             end as tarball_p
        from    apm_package_versions v, apm_package_types t
        where  t.package_key = v.package_key
        [ad_dimensional_sql $dimensional_list where and]
        [ad_order_by_from_sort_spec $orderby $table_def]

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-admin/www/apm/index-oracle.xql}
dbqd.acs-admin.www.apm.index-oracle.latest {dbqd.acs-admin.www.apm.index-oracle.latest {
      (installed_p = 't' or enabled_p = 't' or not exists (
         select 1 from apm_package_versions v2
         where v2.package_key = v.package_key
           and (v2.installed_p = 't' or v2.enabled_p = 't')
           and apm_package_version.sortable_version_name(v2.version_name) > apm_package_version.sortable_version_name(v.version_name)))
   } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-admin/www/apm/index-oracle.xql}
dbqd.acs-admin.www.apm.index.apm_table {dbqd.acs-admin.www.apm.index.apm_table {

        select   v.version_id, v.package_key, t.pretty_name, v.version_name, v.enabled_p,
                 v.installed_p, v.distribution_uri,
            (select count(*) from apm_package_versions v2
             where v2.package_key = v.package_key
             and   v2.installed_p
             and   apm_package_version__sortable_version_name(v2.version_name) >
                   apm_package_version__sortable_version_name(v.version_name)) as  superseded_p,
             case
               when content_item__get_latest_revision(item_id) is null
               then 0
               else 1
             end as tarball_p
        from    apm_package_versions v, apm_package_types t
        where  t.package_key = v.package_key
        [ad_dimensional_sql $dimensional_list where and]
        [ad_order_by_from_sort_spec $orderby $table_def]

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-admin/www/apm/index-postgresql.xql}
dbqd.acs-admin.www.apm.index.latest {dbqd.acs-admin.www.apm.index.latest {
     (installed_p = 't' or enabled_p = 't' or not exists (
        select 1 from apm_package_versions v2
        where v2.package_key = v.package_key
          and (v2.installed_p = 't' or v2.enabled_p = 't')
         and apm_package_version__sortable_version_name(v2.version_name) >
             apm_package_version__sortable_version_name(v.version_name)))
   } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-admin/www/apm/index-postgresql.xql}
dbqd.acs-admin.www.apm.index.email_by_user_id {dbqd.acs-admin.www.apm.index.email_by_user_id {
      select email  
      from parties 
      where party_id = :user_id
    } {} {} {} c:/web/openacs/packages/acs-admin/www/apm/index.xql}
dbqd.acs-admin.www.apm.index.apm_application {dbqd.acs-admin.www.apm.index.apm_application {
      t.package_type = 'apm_application'
    } {} {} {} c:/web/openacs/packages/acs-admin/www/apm/index.xql}
dbqd.acs-admin.www.apm.index.everyone {dbqd.acs-admin.www.apm.index.everyone {
      exists (select 1 from apm_package_owners o where o.version_id = v.version_id and owner_uri='mailto:$my_email')
    } {} {} {} c:/web/openacs/packages/acs-admin/www/apm/index.xql}
dbqd.acs-admin.www.apm.package-add-2.apm_pretty_plural_unique_ck {dbqd.acs-admin.www.apm.package-add-2.apm_pretty_plural_unique_ck {
	    select case when count(*) = 0 then 0 else 1 end from apm_package_types 
	    where pretty_plural = :pretty_plural
	
      } {} {} {} c:/web/openacs/packages/acs-admin/www/apm/package-add-2.xql}
dbqd.acs-admin.www.apm.package-add-2.apm_name_unique_ck {dbqd.acs-admin.www.apm.package-add-2.apm_name_unique_ck {
	    select case when count(*) = 0 then 0 else 1 end from apm_package_types 
	    where pretty_name = :pretty_name
	
      } {} {} {} c:/web/openacs/packages/acs-admin/www/apm/package-add-2.xql}
dbqd.acs-admin.www.apm.package-add-2.apm_uri_unique_ck {dbqd.acs-admin.www.apm.package-add-2.apm_uri_unique_ck {
	    select case when count(*) = 0 then 0 else 1 end from apm_package_types 
	    where package_uri = :package_uri
	
      } {} {} {} c:/web/openacs/packages/acs-admin/www/apm/package-add-2.xql}
dbqd.acs-admin.www.apm.package-add-2.apm_version_uri_unique_ck {dbqd.acs-admin.www.apm.package-add-2.apm_version_uri_unique_ck {
	    select case when count(*) =  0 then 0 else 1 end from apm_package_versions 
	    where version_uri = :version_uri
	
      } {} {} {} c:/web/openacs/packages/acs-admin/www/apm/package-add-2.xql}
dbqd.acs-admin.www.apm.package-add-2.apm_package_add_doubleclick {dbqd.acs-admin.www.apm.package-add-2.apm_package_add_doubleclick {
	select case when count(*) = 0 then 0 else 1 end from apm_package_versions
	where version_id = :version_id
    
      } {} {} {} c:/web/openacs/packages/acs-admin/www/apm/package-add-2.xql}
dbqd.acs-admin.www.apm.package-add.apm_get_name {dbqd.acs-admin.www.apm.package-add.apm_get_name {
       
    select first_names || ' ' || last_name as user_name, email from cc_users where user_id = :user_id

      } {} {} {} c:/web/openacs/packages/acs-admin/www/apm/package-add.xql}
dbqd.acs-admin.www.apm.packages.index-oracle.apm_archive_exist_p {dbqd.acs-admin.www.apm.packages.index-oracle.apm_archive_exist_p {

 select count(*) 
   from cr_revisions 
  where revision_id = (select content_item.get_latest_revision(item_id) 
                         from apm_package_versions
                  	where version_id = :version_id)

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-admin/www/apm/packages/index-oracle.xql}
dbqd.acs-admin.www.apm.packages.index-oracle.apm_archive_serve {dbqd.acs-admin.www.apm.packages.index-oracle.apm_archive_serve {

 
 select '[cr_fs_path]' || filename as content, 
        '[set storage_type file]' as storage_type
   from cr_revisions 
  where revision_id = (select content_item.get_latest_revision(item_id) 
                         from apm_package_versions
                  	where version_id = $version_id)

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-admin/www/apm/packages/index-oracle.xql}
dbqd.acs-admin.www.apm.packages.index.apm_archive_exist_p {dbqd.acs-admin.www.apm.packages.index.apm_archive_exist_p {

 select count(*) 
   from cr_revisions 
  where revision_id = (select content_item__get_latest_revision(item_id) 
                         from apm_package_versions
                  	where version_id = :version_id)

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-admin/www/apm/packages/index-postgresql.xql}
dbqd.acs-admin.www.apm.packages.index.apm_archive_serve {dbqd.acs-admin.www.apm.packages.index.apm_archive_serve {

 select '[cr_fs_path]' || r.content as content, i.storage_type
   from cr_revisions r, cr_items i
  where r.item_id = i.item_id 
    and r.revision_id = (select content_item__get_latest_revision(item_id) 
                         from apm_package_versions
                  	where version_id = :version_id)

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-admin/www/apm/packages/index-postgresql.xql}
dbqd.acs-admin.www.apm.packages-install-3-oracle.apm_package_upgrade_from {dbqd.acs-admin.www.apm.packages-install-3-oracle.apm_package_upgrade_from {
      
	    select version_name from apm_package_versions
	    where package_key = :package_key
	    and version_id = apm_package.highest_version(:package_key)
	
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-admin/www/apm/packages-install-3-oracle.xql}
dbqd.acs-admin.www.apm.packages-install-3.apm_package_upgrade_from {dbqd.acs-admin.www.apm.packages-install-3.apm_package_upgrade_from {
      
	    select version_name from apm_package_versions
	    where package_key = :package_key
	    and version_id = apm_package__highest_version(:package_key)
	
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-admin/www/apm/packages-install-3-postgresql.xql}
dbqd.acs-admin.www.apm.parameter-add-2.param_name_unique_ck {dbqd.acs-admin.www.apm.parameter-add-2.param_name_unique_ck {
	    select case when count(*) = 0 then 0 else 1 end
	    from apm_parameters
	    where parameter_name = :parameter_name and
              package_key = :package_key
      } {} {} {} c:/web/openacs/packages/acs-admin/www/apm/parameter-add-2.xql}
dbqd.acs-admin.www.apm.parameter-add-2.apm_parameter_register_doubleclick_p {dbqd.acs-admin.www.apm.parameter-add-2.apm_parameter_register_doubleclick_p {
      
	select 1 from apm_parameters where parameter_id = :parameter_id
    
      } {} {} {} c:/web/openacs/packages/acs-admin/www/apm/parameter-add-2.xql}
dbqd.acs-admin.www.apm.parameter-add.apm_get_name {dbqd.acs-admin.www.apm.parameter-add.apm_get_name {
       
    select package_key, pretty_name, version_name, acs_object_id_seq.nextval as parameter_id
      from apm_package_version_info
     where version_id = :version_id

      } {} {} {} c:/web/openacs/packages/acs-admin/www/apm/parameter-add.xql}
dbqd.acs-admin.www.apm.parameter-edit.param_info {dbqd.acs-admin.www.apm.parameter-edit.param_info {
       
    select parameter_name, datatype, description, default_value, min_n_values, max_n_values, parameter_id, 
    section_name, default_value
      from apm_parameters
     where parameter_id = :parameter_id

      } {} {} {} c:/web/openacs/packages/acs-admin/www/apm/parameter-edit.xql}
dbqd.acs-admin.www.apm.parameter-edit.apm_get_name {dbqd.acs-admin.www.apm.parameter-edit.apm_get_name {
       
    select pretty_name, version_name, package_key
      from apm_package_version_info
     where version_id = :version_id

      } {} {} {} c:/web/openacs/packages/acs-admin/www/apm/parameter-edit.xql}
dbqd.acs-admin.www.apm.version-dependencies-oracle.apm_package_info_by_version_id {dbqd.acs-admin.www.apm.version-dependencies-oracle.apm_package_info_by_version_id {
      
    select package_key, pretty_name, version_name, installed_p 
    from apm_package_version_info 
    where version_id = :version_id

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-admin/www/apm/version-dependencies-oracle.xql}
dbqd.acs-admin.www.apm.version-dependencies-oracle.apm_all_dependencies {dbqd.acs-admin.www.apm.version-dependencies-oracle.apm_all_dependencies {
      
	select dependency_id, service_uri, service_version
	from   apm_package_dependencies
	where  version_id = :version_id
	and    dependency_type = :dependency_type_prep
	order by service_uri
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-admin/www/apm/version-dependencies-oracle.xql}
dbqd.acs-admin.www.apm.version-dependencies-oracle.apm_specific_version_dependencies {dbqd.acs-admin.www.apm.version-dependencies-oracle.apm_specific_version_dependencies {
select t.pretty_name dep_pretty_name, v.version_name dep_version_name, v.version_id dep_version_id
from apm_package_versions v, apm_package_dependencies d, apm_package_types t
where d.service_uri = :service_uri
and d.dependency_type = :other_dependency_type_prep
and d.version_id = v.version_id
and t.package_key = v.package_key 
and apm_package_version.sortable_version_name(d.service_version) $sign apm_package_version.sortable_version_name(:service_version)
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-admin/www/apm/version-dependencies-oracle.xql}
dbqd.acs-admin.www.apm.version-dependencies.apm_package_info_by_version_id {dbqd.acs-admin.www.apm.version-dependencies.apm_package_info_by_version_id {
      
    select package_key, pretty_name, version_name, installed_p 
    from apm_package_version_info 
    where version_id = :version_id

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-admin/www/apm/version-dependencies-postgresql.xql}
dbqd.acs-admin.www.apm.version-dependencies.apm_all_dependencies {dbqd.acs-admin.www.apm.version-dependencies.apm_all_dependencies {
      
	select dependency_id, service_uri, service_version
	from   apm_package_dependencies
	where  version_id = :version_id
	and    dependency_type = :dependency_type_prep
	order by service_uri
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-admin/www/apm/version-dependencies-postgresql.xql}
dbqd.acs-admin.www.apm.version-dependencies.apm_specific_version_dependencies {dbqd.acs-admin.www.apm.version-dependencies.apm_specific_version_dependencies {
        select t.pretty_name as dep_pretty_name, v.version_name as dep_version_name,
               v.version_id as dep_version_id
        from apm_package_versions v, apm_package_dependencies d, apm_package_types t
        where d.service_uri = :service_uri
           and d.dependency_type = :other_dependency_type_prep
           and d.version_id = v.version_id
           and t.package_key = v.package_key 
           and apm_package_version__sortable_version_name(d.service_version) $sign
               apm_package_version__sortable_version_name(:service_version)
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-admin/www/apm/version-dependencies-postgresql.xql}
dbqd.acs-admin.www.apm.version-dependencies.apm_package_info_by_version_id {dbqd.acs-admin.www.apm.version-dependencies.apm_package_info_by_version_id {
      
    select package_key, pretty_name, version_name, installed_p 
    from apm_package_version_info 
    where version_id = :version_id

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-admin/www/apm/version-dependencies-postgresql.xql}
dbqd.acs-admin.www.apm.version-dependencies.apm_all_dependencies {dbqd.acs-admin.www.apm.version-dependencies.apm_all_dependencies {
      
	select dependency_id, service_uri, service_version
	from   apm_package_dependencies
	where  version_id = :version_id
	and    dependency_type = :dependency_type_prep
	order by service_uri
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-admin/www/apm/version-dependencies-postgresql.xql}
dbqd.acs-admin.www.apm.version-dependency-add-2.apm_dependency_doubleclick_check {dbqd.acs-admin.www.apm.version-dependency-add-2.apm_dependency_doubleclick_check {
      
	select count(*) from apm_package_dependencies
	where dependency_id = :dependency_id
    
      } {} {} {} c:/web/openacs/packages/acs-admin/www/apm/version-dependency-add-2.xql}
dbqd.acs-admin.www.apm.version-dependency-add-oracle.apm_all_service_uri {dbqd.acs-admin.www.apm.version-dependency-add-oracle.apm_all_service_uri {
    select distinct service_uri, service_version
    from   apm_package_dependencies
    order by service_uri, apm_package_version.sortable_version_name(service_version)

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-admin/www/apm/version-dependency-add-oracle.xql}
dbqd.acs-admin.www.apm.version-dependency-add.apm_all_service_uri {dbqd.acs-admin.www.apm.version-dependency-add.apm_all_service_uri {
    select distinct service_uri, service_version,
        apm_package_version__sortable_version_name(service_version)
    from apm_package_dependencies
    order by service_uri, apm_package_version__sortable_version_name(service_version)

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-admin/www/apm/version-dependency-add-postgresql.xql}
dbqd.acs-admin.www.apm.version-dependency-add.apm_package_info_by_version_id_and_package {dbqd.acs-admin.www.apm.version-dependency-add.apm_package_info_by_version_id_and_package {
      
    select p.package_key, p.package_uri, 
    p.pretty_name, v.version_name
    from   apm_package_types p, apm_package_versions v
    where  v.version_id = :version_id
    and    v.package_key = p.package_key

      } {} {} {} c:/web/openacs/packages/acs-admin/www/apm/version-dependency-add.xql}
dbqd.acs-admin.www.apm.version-edit-2.apm_version_uri_unique_ck {dbqd.acs-admin.www.apm.version-edit-2.apm_version_uri_unique_ck {
	    select case when count(*) = 0 then 0 else 1 end from apm_package_versions 
	    where version_uri = :version_uri
	
      } {} {} {} c:/web/openacs/packages/acs-admin/www/apm/version-edit-2.xql}
dbqd.acs-admin.www.apm.version-edit-2.old_version_name {dbqd.acs-admin.www.apm.version-edit-2.old_version_name {
      
	    select version_name as old_version_name, version_uri as old_version_uri 
	    from apm_package_versions
	    where version_id = $version_id
	
      } {} {} {} c:/web/openacs/packages/acs-admin/www/apm/version-edit-2.xql}
dbqd.acs-admin.www.apm.version-edit.apm_all_version_info {dbqd.acs-admin.www.apm.version-edit.apm_all_version_info {
      
    select version_id, package_key, package_uri, pretty_name, version_name, version_uri, auto_mount,
    summary, description_format, description, release_date, vendor, vendor_uri,
    enabled_p, installed_p, tagged_p, imported_p, data_model_loaded_p, activation_date, tarball_length, 
    deactivation_date, distribution_uri, distribution_date, singleton_p, initial_install_p
    from apm_package_version_info where version_id = :version_id

      } {} {} {} c:/web/openacs/packages/acs-admin/www/apm/version-edit.xql}
dbqd.acs-admin.www.apm.version-edit.apm_all_owners {dbqd.acs-admin.www.apm.version-edit.apm_all_owners {
      
    select owner_name, owner_uri from apm_package_owners where version_id = :version_id

      } {} {} {} c:/web/openacs/packages/acs-admin/www/apm/version-edit.xql}
dbqd.acs-admin.www.apm.version-fs-scan.apm_package_info {dbqd.acs-admin.www.apm.version-fs-scan.apm_package_info {
      
    select p.package_key, p.package_url, v.package_name, v.version_name, v.package_id
    from   apm_packages p, apm_package_versions v
    where  v.version_id = :version_id
    and    v.package_id = p.package_id

      } {} {} {} c:/web/openacs/packages/acs-admin/www/apm/version-fs-scan.xql}
dbqd.acs-admin.www.apm.version-generate-diffs.apm_package_by_version_id {dbqd.acs-admin.www.apm.version-generate-diffs.apm_package_by_version_id {
      
    select package_name, version_name, package_id from apm_package_version_info where version_id = :version_id

      } {} {} {} c:/web/openacs/packages/acs-admin/www/apm/version-generate-diffs.xql}
dbqd.acs-admin.www.apm.version-parameter-values.apm_package_by_version_id {dbqd.acs-admin.www.apm.version-parameter-values.apm_package_by_version_id {
      
    select package_name, version_name, package_id from apm_package_version_info where version_id = :version_id

      } {} {} {} c:/web/openacs/packages/acs-admin/www/apm/version-parameter-values.xql}
dbqd.acs-admin.www.apm.version-parameter-values.apm_all_elements {dbqd.acs-admin.www.apm.version-parameter-values.apm_all_elements {
      
select element_id, element_name, description
from   ad_parameter_elements
where  version_id = :version_id
order by element_name

      } {} {} {} c:/web/openacs/packages/acs-admin/www/apm/version-parameter-values.xql}
dbqd.acs-admin.www.apm.version-parameter-values.apm_value {dbqd.acs-admin.www.apm.version-parameter-values.apm_value {
      
	select value from ad_parameter_values where element_id = :element_id
    
      } {} {} {} c:/web/openacs/packages/acs-admin/www/apm/version-parameter-values.xql}
dbqd.acs-admin.www.apm.version-parameters-oracle.parameter_table {dbqd.acs-admin.www.apm.version-parameters-oracle.parameter_table {

            select parameter_name, nvl(description, 'No Description') description, datatype, 
                default_value, parameter_id, nvl(section_name, 'No Section') section_name
            from apm_parameters
            where package_key = :package_key
            $sql_clauses
       } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-admin/www/apm/version-parameters-oracle.xql}
dbqd.acs-admin.www.apm.version-parameters.parameter_table {dbqd.acs-admin.www.apm.version-parameters.parameter_table {

            select parameter_name, coalesce(description, 'No Description') as description, datatype, 
                default_value, parameter_id, coalesce(section_name, 'No Section') as section_name
            from apm_parameters
            where package_key = :package_key
            $sql_clauses

       } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-admin/www/apm/version-parameters-postgresql.xql}
dbqd.acs-admin.www.apm.version-parameters.apm_package_by_version_id {dbqd.acs-admin.www.apm.version-parameters.apm_package_by_version_id {
      
    select pretty_name, version_name, package_key
      from apm_package_version_info 
     where version_id = :version_id

      } {} {} {} c:/web/openacs/packages/acs-admin/www/apm/version-parameters.xql}
dbqd.acs-admin.www.apm.version-tag.apm_package_by_version_id {dbqd.acs-admin.www.apm.version-tag.apm_package_by_version_id {
      
    select package_name, version_name, package_id 
    from apm_package_version_info where version_id = :version_id

      } {} {} {} c:/web/openacs/packages/acs-admin/www/apm/version-tag.xql}
dbqd.acs-admin.www.apm.version-tag.apm_all_paths {dbqd.acs-admin.www.apm.version-tag.apm_all_paths {
      
	select path from apm_package_files where version_id = :version_id order by path

      } {} {} {} c:/web/openacs/packages/acs-admin/www/apm/version-tag.xql}
dbqd.acs-admin.www.apm.version-tag.apm_all_files_untag {dbqd.acs-admin.www.apm.version-tag.apm_all_files_untag {
      
	update apm_package_versions 
	set    tagged_p   = 'f' 
	where  version_id = :version_id
    
      } {} {} {} c:/web/openacs/packages/acs-admin/www/apm/version-tag.xql}
dbqd.acs-admin.www.apm.version-tag.apm_all_files_tag {dbqd.acs-admin.www.apm.version-tag.apm_all_files_tag {
      
	update apm_package_versions 
	set    tagged_p   = 't' 
	where  version_id = :version_id
    
      } {} {} {} c:/web/openacs/packages/acs-admin/www/apm/version-tag.xql}
dbqd.acs-admin.www.apm.version-view-oracle.apm_enabled_version_info {dbqd.acs-admin.www.apm.version-view-oracle.apm_enabled_version_info {
    select version_id as installed_version_id, version_name as installed_version_name,
           enabled_p as installed_enabled_p,
           apm_package_version.version_name_greater(version_name, :version_name) as version_name_greater
    from   apm_package_versions
    where  package_key = :package_key
    and    installed_p = 't'
    and rownum = 1

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-admin/www/apm/version-view-oracle.xql}
dbqd.acs-admin.www.apm.version-view-oracle.apm_data_model_install_version {dbqd.acs-admin.www.apm.version-view-oracle.apm_data_model_install_version {
    select data_model_installed_version from (
        select version_name as data_model_installed_version
        from   apm_package_versions
        where  package_key = :package_key
        and    data_model_loaded_p = 't'
        order by apm_package_version.sortable_version_name(version_name) desc
    )
    where rownum = 1

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-admin/www/apm/version-view-oracle.xql}
dbqd.acs-admin.www.apm.version-view.apm_enabled_version_info {dbqd.acs-admin.www.apm.version-view.apm_enabled_version_info {
    select version_id as installed_version_id, version_name as installed_version_name,
           enabled_p as installed_enabled_p,
           apm_package_version__version_name_greater(version_name, :version_name) as version_name_greater
    from   apm_package_versions
    where  package_key = :package_key
    and    installed_p = 't'
    limit 1
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-admin/www/apm/version-view-postgresql.xql}
dbqd.acs-admin.www.apm.version-view.apm_data_model_install_version {dbqd.acs-admin.www.apm.version-view.apm_data_model_install_version {
    select data_model_installed_version from (
        select version_name as data_model_installed_version
        from   apm_package_versions
        where  package_key = :package_key
        and    data_model_loaded_p = 't'
        order by apm_package_version__sortable_version_name(version_name) desc
    ) as bad_postgres_needs_this
    limit 1

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-admin/www/apm/version-view-postgresql.xql}
dbqd.acs-admin.www.apm.version-view.apm_all_version_info {dbqd.acs-admin.www.apm.version-view.apm_all_version_info {
      
    select version_id, package_key, package_uri, pretty_name, version_name, version_uri,
    summary, description_format, description, singleton_p, initial_install_p,
    to_char(release_date, 'Month DD, YYYY') as release_date , vendor, vendor_uri, auto_mount,
    enabled_p, installed_p, tagged_p, imported_p, data_model_loaded_p, 
    to_char(activation_date, 'Month DD, YYYY') as activation_date,
    tarball_length, distribution_uri,
    to_char(deactivation_date, 'Month DD, YYYY') as deactivation_date,
    to_char(distribution_date, 'Month DD, YYYY') as distribution_date
 from apm_package_version_info 
 where version_id = :version_id

      } {} {} {} c:/web/openacs/packages/acs-admin/www/apm/version-view.xql}
dbqd.acs-admin.www.apm.version-view.supported_databases {dbqd.acs-admin.www.apm.version-view.supported_databases {
      
    select pretty_db_name
    from apm_package_db_types
    where exists (select 1
                  from apm_package_files
                  where version_id = :version_id
                  and   db_type = db_type_key)

      } {} {} {} c:/web/openacs/packages/acs-admin/www/apm/version-view.xql}
dbqd.acs-admin.www.apm.version-view.apm_all_owners {dbqd.acs-admin.www.apm.version-view.apm_all_owners {
      
    select owner_uri, owner_name from apm_package_owners where version_id = :version_id

      } {} {} {} c:/web/openacs/packages/acs-admin/www/apm/version-view.xql}
dbqd.acs-admin.www.apm.write-all-specs.apm_get_all_packages {dbqd.acs-admin.www.apm.write-all-specs.apm_get_all_packages {
      
    select version_id, version_name, pretty_name, distribution_uri, v.package_key
    from   apm_package_versions v, apm_package_types t
    where  installed_p = 't'
    and v.package_key = t.package_key
    order by upper(pretty_name)

      } {} {} {} c:/web/openacs/packages/acs-admin/www/apm/write-all-specs.xql}
dbqd.acs-admin.www.auth.authority-oracle.select_batch_jobs {dbqd.acs-admin.www.auth.authority-oracle.select_batch_jobs {
      
        select job_id,
               to_char(job_start_time, 'YYYY-MM-DD HH24:MI:SS') as start_time_ansi,
               to_char(job_end_time, 'YYYY-MM-DD HH24:MI:SS') as end_time_ansi,
               snapshot_p,
               (select count(e1.entry_id)
                from   auth_batch_job_entries e1
                where  e1.job_id = auth_batch_jobs.job_id) as num_actions,
                (select count(e2.entry_id)
                 from   auth_batch_job_entries e2
                 where  e2.job_id = auth_batch_jobs.job_id
                 and    e2.success_p = 'f') as num_problems,
               interactive_p,
               message,
               round((nvl(job_end_time, sysdate) - job_start_time) * 24*60*60) as run_time_seconds
        from   auth_batch_jobs
        where  authority_id = :authority_id
	
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-admin/www/auth/authority-oracle.xql}
dbqd.acs-admin.www.auth.authority.select_batch_jobs {dbqd.acs-admin.www.auth.authority.select_batch_jobs {
      
        select job_id,
               to_char(job_start_time, 'YYYY-MM-DD HH24:MI:SS') as start_time_ansi,
               to_char(job_end_time, 'YYYY-MM-DD HH24:MI:SS') as end_time_ansi,
               snapshot_p,
               (select count(e1.entry_id)
                from   auth_batch_job_entries e1
                where  e1.job_id = auth_batch_jobs.job_id) as num_actions,
                (select count(e2.entry_id)
                 from   auth_batch_job_entries e2
                 where  e2.job_id = auth_batch_jobs.job_id
                 and    e2.success_p = 'f') as num_problems,
               interactive_p,
               message,
               trunc(extract(epoch from (coalesce(job_end_time, current_timestamp) - job_start_time))) as run_time_seconds
        from   auth_batch_jobs
        where  authority_id = :authority_id
	
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-admin/www/auth/authority-postgresql.xql}
dbqd.acs-admin.www.auth.batch-job.pagination {dbqd.acs-admin.www.auth.batch-job.pagination {
      
    select entry_id
    from   auth_batch_job_entries
    where  job_id = :job_id
    [template::list::filter_where_clauses -and -name batch_actions]
    order  by entry_id
	
      } {} {} {} c:/web/openacs/packages/acs-admin/www/auth/batch-job.xql}
dbqd.acs-admin.www.index-oracle.subsite_admin_urls {dbqd.acs-admin.www.index-oracle.subsite_admin_urls {
      
    select site_node.url(node_id) || 'admin/' as admin_url, instance_name
    from site_nodes s, apm_packages p
    where s.object_id = p.package_id
    and p.package_key = 'acs-subsite'
    order by upper(instance_name), instance_name

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-admin/www/index-oracle.xql}
dbqd.acs-admin.www.index.subsite_admin_urls {dbqd.acs-admin.www.index.subsite_admin_urls {
      
    select site_node__url(node_id) || 'admin/' as admin_url, instance_name
    from site_nodes s, apm_packages p
    where s.object_id = p.package_id
    and p.package_key = 'acs-subsite'
    order by upper(instance_name), instance_name

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-admin/www/index-postgresql.xql}
dbqd.acs-admin.www.index.installed_packages {dbqd.acs-admin.www.index.installed_packages {
      select package_key,
             pretty_name as pretty_name
      from   apm_package_types
      order  by upper(pretty_name), pretty_name
    } {} {} {} c:/web/openacs/packages/acs-admin/www/index.xql}
dbqd.acs-admin.www.test.signed-cookies-test-2.get_token_value {dbqd.acs-admin.www.test.signed-cookies-test-2.get_token_value {
      
    select token from secret_tokens
    where token_id = :token_id

      } {} {} {} c:/web/openacs/packages/acs-admin/www/test/signed-cookies-test-2.xql}
dbqd.acs-admin.www.users.become.password {dbqd.acs-admin.www.users.become.password {
      select password from users where user_id=$user_id
      } {} {} {} c:/web/openacs/packages/acs-admin/www/users/become.xql}
dbqd.acs-admin.www.users.complex-search-oracle.registration_before_days {dbqd.acs-admin.www.users.complex-search-oracle.registration_before_days {

        creation_date < sysdate - :registration_before_days

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-admin/www/users/complex-search-oracle.xql}
dbqd.acs-admin.www.users.complex-search-oracle.registration_after_days {dbqd.acs-admin.www.users.complex-search-oracle.registration_after_days {

        creation_date >= sysdate - :registration_after_days

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-admin/www/users/complex-search-oracle.xql}
dbqd.acs-admin.www.users.complex-search-oracle.last_visit_before_days {dbqd.acs-admin.www.users.complex-search-oracle.last_visit_before_days {

        last_visit < sysdate - :last_visit_before_days

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-admin/www/users/complex-search-oracle.xql}
dbqd.acs-admin.www.users.complex-search-oracle.last_visit_after_days {dbqd.acs-admin.www.users.complex-search-oracle.last_visit_after_days {

        last_visit >= sysdate - :last_visit_after_days

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-admin/www/users/complex-search-oracle.xql}
dbqd.acs-admin.www.users.complex-search.registration_before_days {dbqd.acs-admin.www.users.complex-search.registration_before_days {

        creation_date < now() - (:registration_before_days || ' days')::interval

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-admin/www/users/complex-search-postgresql.xql}
dbqd.acs-admin.www.users.complex-search.registration_after_days {dbqd.acs-admin.www.users.complex-search.registration_after_days {

        creation_date >= now() - (:registration_after_days || ' days')::interval

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-admin/www/users/complex-search-postgresql.xql}
dbqd.acs-admin.www.users.complex-search.last_visit_before_days {dbqd.acs-admin.www.users.complex-search.last_visit_before_days {

        last_visit < now() - (:last_visit_before_days || ' days')::interval

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-admin/www/users/complex-search-postgresql.xql}
dbqd.acs-admin.www.users.complex-search.last_visit_after_days {dbqd.acs-admin.www.users.complex-search.last_visit_after_days {

        last_visit >= now() - (:last_visit_after_days || ' days')::interval

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-admin/www/users/complex-search-postgresql.xql}
dbqd.acs-admin.www.users.complex-search.user_group_name_from_id {dbqd.acs-admin.www.users.complex-search.user_group_name_from_id {
      select group_name from groups where group_id = :limit_to_users_in_group_id
      } {} {} {} c:/web/openacs/packages/acs-admin/www/users/complex-search.xql}
dbqd.acs-admin.www.users.index.users_n_users {dbqd.acs-admin.www.users.index.users_n_users {
          select count(user_id) as n_users, 
                 max(creation_date) as last_registration
          from   users u,
                 acs_objects o
          where  o.object_id = u.user_id
      } {} {} {} c:/web/openacs/packages/acs-admin/www/users/index.xql}
dbqd.acs-admin.www.users.index.users_deleted_users {dbqd.acs-admin.www.users.index.users_deleted_users {

      select count(user_id) as n_deleted_users
      from   users u,
             group_member_map m,
             membership_rels mr,
             acs_magic_objects amo
      where  u.user_id = m.member_id
      and    amo.name = 'registered_users'
      and    m.group_id = amo.object_id
      and    m.container_id = m.group_id
      and    mr.rel_id = m.rel_id
      and    mr.member_state = 'deleted'

      } {} {} {} c:/web/openacs/packages/acs-admin/www/users/index.xql}
dbqd.acs-admin.www.users.index.groups_select {dbqd.acs-admin.www.users.index.groups_select {
      
select groups.group_id, 
       groups.group_name, 
       m.num as n_members, 
       c.num as n_components 
from groups, 
     (select group_id, count(*) as num 
      from group_member_map group by group_id) m, 
     (select group_id, count(*) as num 
      from group_component_map group by group_id) c 
where groups.group_id=m.group_id 
  and groups.group_id = c.group_id
order by group_name

      } {} {} {} c:/web/openacs/packages/acs-admin/www/users/index.xql}
dbqd.acs-admin.www.users.member-state-change-oracle.get_states {dbqd.acs-admin.www.users.member-state-change-oracle.get_states {
            select email_verified_p as email_verified_p_old,
                   member_state as member_state_old,
                   first_names || ' ' || last_name as name,
                   email,
                   rel_id,
                   rownum as row_id
            from cc_users
            where user_id = :user_id
        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-admin/www/users/member-state-change-oracle.xql}
dbqd.acs-admin.www.users.member-state-change-oracle.member_approve {dbqd.acs-admin.www.users.member-state-change-oracle.member_approve {

                        begin membership_rel.approve( rel_id => :rel_id ); end;
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-admin/www/users/member-state-change-oracle.xql}
dbqd.acs-admin.www.users.member-state-change-oracle.member_ban {dbqd.acs-admin.www.users.member-state-change-oracle.member_ban {

                       begin membership_rel.ban( rel_id => :rel_id ); end;
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-admin/www/users/member-state-change-oracle.xql}
dbqd.acs-admin.www.users.member-state-change-oracle.member_reject {dbqd.acs-admin.www.users.member-state-change-oracle.member_reject {

                       begin membership_rel.reject( rel_id => :rel_id ); end;
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-admin/www/users/member-state-change-oracle.xql}
dbqd.acs-admin.www.users.member-state-change-oracle.member_deleted {dbqd.acs-admin.www.users.member-state-change-oracle.member_deleted {

                       begin membership_rel.del( rel_id => :rel_id ); end;
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-admin/www/users/member-state-change-oracle.xql}
dbqd.acs-admin.www.users.member-state-change-oracle.member_unapprove {dbqd.acs-admin.www.users.member-state-change-oracle.member_unapprove {

                       begin membership_rel.unapprove( rel_id => :rel_id ); end;
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-admin/www/users/member-state-change-oracle.xql}
dbqd.acs-admin.www.users.member-state-change-oracle.approve_email {dbqd.acs-admin.www.users.member-state-change-oracle.approve_email {

                       begin acs_user.approve_email ( user_id => :user_id ); end;
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-admin/www/users/member-state-change-oracle.xql}
dbqd.acs-admin.www.users.member-state-change-oracle.unapprove_email {dbqd.acs-admin.www.users.member-state-change-oracle.unapprove_email {

                       begin acs_user.unapprove_email ( user_id => :user_id ); end;
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-admin/www/users/member-state-change-oracle.xql}
dbqd.acs-admin.www.users.member-state-change.get_states {dbqd.acs-admin.www.users.member-state-change.get_states {
      select u.email_verified_p as email_verified_p_old,
          mr.member_state as member_state_old,
          per.first_names || ' ' || per.last_name as name,
          part.email, mr.rel_id, u.oid as row_id
      from users u
      JOIN parties part on (part.party_id = u.user_id)
        JOIN persons per on (per.person_id = u.user_id)
      LEFT JOIN membership_rels mr on (mr.rel_id = u.user_id)
      where u.user_id = :user_id
      
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-admin/www/users/member-state-change-postgresql.xql}
dbqd.acs-admin.www.users.member-state-change.approve_email {dbqd.acs-admin.www.users.member-state-change.approve_email {
	select acs_user__approve_email (:user_id);
	} {} {} {postgresql 7.1} c:/web/openacs/packages/acs-admin/www/users/member-state-change-postgresql.xql}
dbqd.acs-admin.www.users.member-state-change.unapprove_email {dbqd.acs-admin.www.users.member-state-change.unapprove_email {
	select acs_user__unapprove_email (:user_id);
	} {} {} {postgresql 7.1} c:/web/openacs/packages/acs-admin/www/users/member-state-change-postgresql.xql}
dbqd.acs-admin.www.users.member-state-change.admin_email {dbqd.acs-admin.www.users.member-state-change.admin_email {
      select email from parties where party_id = :admin_user_id
      } {} {} {} c:/web/openacs/packages/acs-admin/www/users/member-state-change.xql}
dbqd.acs-admin.www.users.modify-admin-privileges-oracle.grant_admin {dbqd.acs-admin.www.users.modify-admin-privileges-oracle.grant_admin {
select acs_permission.grant_permission(
	acs.magic_object_id('security_context_root'), 
	:user_id, 
	'admin')
} {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-admin/www/users/modify-admin-privileges-oracle.xql}
dbqd.acs-admin.www.users.modify-admin-privileges-oracle.revoke_admin {dbqd.acs-admin.www.users.modify-admin-privileges-oracle.revoke_admin {
select acs_permission.revoke_permission(
        acs.magic_object_id('security_context_root'),
        :user_id,
        'admin')
} {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-admin/www/users/modify-admin-privileges-oracle.xql}
dbqd.acs-admin.www.users.modify-admin-privileges.grant_admin {dbqd.acs-admin.www.users.modify-admin-privileges.grant_admin {
select acs_permission__grant_permission(
	acs__magic_object_id('security_context_root'), 
	:user_id, 
	'admin')
} {} {} {postgresql 7.1} c:/web/openacs/packages/acs-admin/www/users/modify-admin-privileges-postgresql.xql}
dbqd.acs-admin.www.users.modify-admin-privileges.revoke_admin {dbqd.acs-admin.www.users.modify-admin-privileges.revoke_admin {
select acs_permission__revoke_permission(
        acs__magic_object_id('security_context_root'),
        :user_id,
        'admin')
} {} {} {postgresql 7.1} c:/web/openacs/packages/acs-admin/www/users/modify-admin-privileges-postgresql.xql}
dbqd.acs-admin.www.users.one-oracle.user_info {dbqd.acs-admin.www.users.one-oracle.user_info {
      select first_names, 
             last_name, 
             username, 
             email,
             nvl(screen_name,'&lt; none set up &gt;') as screen_name,
             creation_date, 
             creation_ip, 
             to_char(last_visit, 'YYYY-MM-DD HH24:MI:SS') as last_visit_ansi, 
             member_state,
             email_verified_p, 
             url
      from   cc_users
      where  user_id = :user_id
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-admin/www/users/one-oracle.xql}
dbqd.acs-admin.www.users.one-oracle.get_item_id {dbqd.acs-admin.www.users.one-oracle.get_item_id {
      select live_revision as revision_id, nvl(title,'view this portrait') portrait_title
from acs_rels a, cr_items c, cr_revisions cr 
where a.object_id_two = c.item_id
and c.live_revision = cr.revision_id
and a.object_id_one = :user_id
and a.rel_type = 'user_portrait_rel'
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-admin/www/users/one-oracle.xql}
dbqd.acs-admin.www.users.one-oracle.user_contributions {dbqd.acs-admin.www.users.one-oracle.user_contributions {
      select at.pretty_name, at.pretty_plural, a.creation_date, acs_object.name(a.object_id) object_name
from acs_objects a, acs_object_types at
where a.object_type = at.object_type
and a.creation_user = :user_id
order by object_name, creation_date
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-admin/www/users/one-oracle.xql}
dbqd.acs-admin.www.users.one.user_contributions {dbqd.acs-admin.www.users.one.user_contributions {
      select at.pretty_name, at.pretty_plural, a.creation_date,
          acs_object__name(a.object_id) as object_name
      from acs_objects a, acs_object_types at
      where a.object_type = at.object_type
          and a.creation_user = :user_id
      order by object_name, creation_date
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-admin/www/users/one-postgresql.xql}
dbqd.acs-admin.www.users.one.user_is_admin {dbqd.acs-admin.www.users.one.user_is_admin {
      select privilege
      from acs_permissions
      where object_id = :sec_context_root
            and grantee_id = :user_id
            and privilege = 'admin'
      } {} {} {} c:/web/openacs/packages/acs-admin/www/users/one.xql}
dbqd.acs-admin.www.users.one.get_item_id {dbqd.acs-admin.www.users.one.get_item_id {
      select live_revision as revision_id,
          coalesce(title,'view this portrait') as portrait_title
      from acs_rels a, cr_items c, cr_revisions cr 
      where a.object_id_two = c.item_id
         and c.live_revision = cr.revision_id
         and a.object_id_one = :user_id
         and a.rel_type = 'user_portrait_rel'
      } {} {} {} c:/web/openacs/packages/acs-admin/www/users/one.xql}
dbqd.acs-admin.www.users.one.all_group_membership {dbqd.acs-admin.www.users.one.all_group_membership {
    select distinct lower(groups.group_name) as group_name
      from groups, group_member_map gm
     where groups.group_id = gm.group_id and gm.member_id=:user_id
  order by lower(groups.group_name)
  } {} {} {} c:/web/openacs/packages/acs-admin/www/users/one.xql}
dbqd.acs-admin.www.users.one.direct_group_membership {dbqd.acs-admin.www.users.one.direct_group_membership {
  select group_id, rel_id, party_names.party_name as group_name
    from (select /*+ ORDERED */ DISTINCT rels.rel_id, object_id_one as group_id, 
                 object_id_two
            from acs_rels rels
           where rels.rel_type = 'membership_rel'
                 and rels.object_id_two = :user_id) r, 
         party_names 
   where r.group_id = party_names.party_id
order by lower(party_names.party_name)
  } {} {} {} c:/web/openacs/packages/acs-admin/www/users/one.xql}
dbqd.acs-admin.www.users.registration-history-oracle.user_rows {dbqd.acs-admin.www.users.registration-history-oracle.user_rows {
      select to_char(creation_date,'YYYYMM') as sort_key, rtrim(to_char(creation_date,'Month')) as pretty_month, to_char(creation_date,'YYYY') as pretty_year, count(*) as n_new
from users, acs_objects
where users.user_id = acs_objects.object_id
and creation_date is not null
group by to_char(creation_date,'YYYYMM'), to_char(creation_date,'Month'), to_char(creation_date,'YYYY')
order by 1
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-admin/www/users/registration-history-oracle.xql}
dbqd.acs-admin.www.users.registration-history.user_rows {dbqd.acs-admin.www.users.registration-history.user_rows {
      select to_char(creation_date,'YYYYMM') as sort_key, rtrim(to_char(creation_date,'Month')) as pretty_month, to_char(creation_date,'YYYY') as pretty_year, count(*) as n_new
from users, acs_objects
where users.user_id = acs_objects.object_id
and creation_date is not null
group by to_char(creation_date,'YYYYMM'), to_char(creation_date,'Month'), to_char(creation_date,'YYYY')
order by 1
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-admin/www/users/registration-history-postgresql.xql}
dbqd.acs-admin.www.users.search.user_group_name_from_id {dbqd.acs-admin.www.users.search.user_group_name_from_id {
      select group_name from user_groups where group_id = :limit_to_users_in_group_id
      } {} {} {} c:/web/openacs/packages/acs-admin/www/users/search.xql}
dbqd.acs-admin.www.users.user-add-2.admin_name {dbqd.acs-admin.www.users.user-add-2.admin_name {
      select first_names || ' ' || last_name
      from persons
      where person_id = :admin_user_id
   } {} {} {} c:/web/openacs/packages/acs-admin/www/users/user-add-2.xql}
dbqd.acs-admin.www.users.user-add-2.double_click {dbqd.acs-admin.www.users.user-add-2.double_click {
      select count(user_id) from users where user_id = :user_id
   } {} {} {} c:/web/openacs/packages/acs-admin/www/users/user-add-2.xql}
dbqd.acs-admin.www.users.user-add-3.unused {dbqd.acs-admin.www.users.user-add-3.unused {
      select email from 
parties where party_id = :admin_user_id
      } {} {} {} c:/web/openacs/packages/acs-admin/www/users/user-add-3.xql}
dbqd.acs-api-browser.www.plsql-subprogram-one-oracle.source_text {dbqd.acs-api-browser.www.plsql-subprogram-one-oracle.source_text {

	select text
	from user_source
	where name = upper(:name)
	and type = upper(:type)
	order by line
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-api-browser/www/plsql-subprogram-one-oracle.xql}
dbqd.acs-api-browser.www.plsql-subprogram-one.source_text {dbqd.acs-api-browser.www.plsql-subprogram-one.source_text {

	select definition as text 
	from acs_func_defs 
	where lower(fname)=lower(:name)
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-api-browser/www/plsql-subprogram-one-postgresql.xql}
dbqd.acs-api-browser.www.plsql-subprograms-all-oracle.all_subprograms {dbqd.acs-api-browser.www.plsql-subprograms-all-oracle.all_subprograms {

    select object_type as type, object_name as name
    from user_objects
    where object_type in ('PACKAGE', 'PROCEDURE', 'FUNCTION')
    order by
    decode(object_type, 'PACKAGE', 0, 'PROCEDURE', 1, 'FUNCTION', 2) asc
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-api-browser/www/plsql-subprograms-all-oracle.xql}
dbqd.acs-api-browser.www.plsql-subprograms-all.all_subprograms {dbqd.acs-api-browser.www.plsql-subprograms-all.all_subprograms {

	select proname as name, 'FUNCTION' as type 
	from pg_proc 
	where proowner=(select usesysid from pg_user
	                where usename = current_user) 
	order by proname
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-api-browser/www/plsql-subprograms-all-postgresql.xql}
dbqd.acs-authentication.tcl.authentication-procs-oracle.auth::get_user_secret_token.select_secret_token {dbqd.acs-authentication.tcl.authentication-procs-oracle.auth::get_user_secret_token.select_secret_token {
             select rowid from users where user_id = :user_id
        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-authentication/tcl/authentication-procs-oracle.xql}
dbqd.acs-authentication.tcl.authentication-procs.auth::get_user_secret_token.select_secret_token {dbqd.acs-authentication.tcl.authentication-procs.auth::get_user_secret_token.select_secret_token {
             select oid from users where user_id = :user_id
        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-authentication/tcl/authentication-procs-postgresql.xql}
dbqd.acs-authentication.tcl.authority-procs-oracle.auth::authority::create.create_authority {dbqd.acs-authentication.tcl.authority-procs-oracle.auth::authority::create.create_authority {
            begin
            :1 := authority.new(
                authority_id => :authority_id,
                short_name => :short_name,
                pretty_name => :pretty_name,
                enabled_p => :enabled_p,
                sort_order => :sort_order,
                auth_impl_id => :auth_impl_id,
                pwd_impl_id => :pwd_impl_id,
                forgotten_pwd_url => :forgotten_pwd_url,
                change_pwd_url => :change_pwd_url,
                register_impl_id => :register_impl_id,
                register_url => :register_url,
                help_contact_text => :help_contact_text,
                creation_user => :creation_user,
                creation_ip => :creation_ip,
                context_id => :context_id
            );   
            end;                 
        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-authentication/tcl/authority-procs-oracle.xql}
dbqd.acs-authentication.tcl.authority-procs-oracle.auth::authority::delete.delete_authority {dbqd.acs-authentication.tcl.authority-procs-oracle.auth::authority::delete.delete_authority {
            begin
                :1 := authority.del(
                    delete_authority_id => :authority_id
                );
            end;
        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-authentication/tcl/authority-procs-oracle.xql}
dbqd.acs-authentication.tcl.authority-procs.auth::authority::create.create_authority {dbqd.acs-authentication.tcl.authority-procs.auth::authority::create.create_authority {
            select authority__new(
                :authority_id,
                null, -- object_type
                :short_name,
                :pretty_name,
                :enabled_p,
                :sort_order,
                :auth_impl_id,
                :pwd_impl_id,
                :forgotten_pwd_url,
                :change_pwd_url,
                :register_impl_id,
                :register_url,
                :help_contact_text,
                :creation_user,
                :creation_ip,
                :context_id
            );                    
        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-authentication/tcl/authority-procs-postgresql.xql}
dbqd.acs-authentication.tcl.authority-procs.auth::authority::delete.delete_authority {dbqd.acs-authentication.tcl.authority-procs.auth::authority::delete.delete_authority {
            select authority__del(
                :authority_id
            );
        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-authentication/tcl/authority-procs-postgresql.xql}
dbqd.acs-authentication.tcl.authority-procs.auth::authority::get_authority_options.select_authorities {dbqd.acs-authentication.tcl.authority-procs.auth::authority::get_authority_options.select_authorities {
          select pretty_name, authority_id
          from   auth_authorities
          where  enabled_p = 't'
          and    auth_impl_id is not null
          order  by sort_order
      } {} {} {} c:/web/openacs/packages/acs-authentication/tcl/authority-procs.xql}
dbqd.acs-authentication.tcl.authority-procs.auth::authority::get_id_not_cached.select_authority_id {dbqd.acs-authentication.tcl.authority-procs.auth::authority::get_id_not_cached.select_authority_id {
          select authority_id 
          from   auth_authorities 
          where  short_name = :short_name 
      } {} {} {} c:/web/openacs/packages/acs-authentication/tcl/authority-procs.xql}
dbqd.acs-authentication.tcl.driver-procs-oracle.auth::driver::set_parameter_value.update_parameter {dbqd.acs-authentication.tcl.driver-procs-oracle.auth::driver::set_parameter_value.update_parameter {            
            update auth_driver_params
            set    value = empty_clob()
            where  authority_id = :authority_id
            and    impl_id = :impl_id
            and    key = :parameter
            returning value into :1
        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-authentication/tcl/driver-procs-oracle.xql}
dbqd.acs-authentication.tcl.driver-procs-oracle.auth::driver::set_parameter_value.insert_parameter {dbqd.acs-authentication.tcl.driver-procs-oracle.auth::driver::set_parameter_value.insert_parameter {            
            insert into auth_driver_params (authority_id, impl_id, key, value)
            values (:authority_id, :impl_id, :parameter, empty_clob())
            returning value into :1
        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-authentication/tcl/driver-procs-oracle.xql}
dbqd.acs-authentication.tcl.driver-procs.auth::driver::set_parameter_value.update_parameter {dbqd.acs-authentication.tcl.driver-procs.auth::driver::set_parameter_value.update_parameter {            
            update auth_driver_params
            set    value = :value
            where  authority_id = :authority_id
            and    impl_id = :impl_id
            and    key = :parameter
        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-authentication/tcl/driver-procs-postgresql.xql}
dbqd.acs-authentication.tcl.driver-procs.auth::driver::set_parameter_value.insert_parameter {dbqd.acs-authentication.tcl.driver-procs.auth::driver::set_parameter_value.insert_parameter {            
            insert into auth_driver_params (authority_id, impl_id, key, value)
            values (:authority_id, :impl_id, :parameter, :value)
        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-authentication/tcl/driver-procs-postgresql.xql}
dbqd.acs-authentication.tcl.driver-procs.auth::driver::set_parameter_value.param_exists_p {dbqd.acs-authentication.tcl.driver-procs.auth::driver::set_parameter_value.param_exists_p {
            select count(*) 
            from   auth_driver_params
            where  impl_id = :impl_id
            and    authority_id = :authority_id
            and    key = :parameter
        } {} {} {} c:/web/openacs/packages/acs-authentication/tcl/driver-procs.xql}
dbqd.acs-authentication.tcl.sync-procs-oracle.auth::sync::job::get.select_job {dbqd.acs-authentication.tcl.sync-procs-oracle.auth::sync::job::get.select_job {
            select job_id,
                   to_char(job_start_time, 'YYYY-MM-DD HH24:MI:SS') as job_start_time,
                   to_char(job_end_time, 'YYYY-MM-DD HH24:MI:SS') as job_end_time,
                   interactive_p,
                   snapshot_p,
                   authority_id,
                   (select aa.pretty_name from auth_authorities aa where aa.authority_id = j.authority_id) as authority_pretty_name,
                   message,
                   creation_user,
                   to_char(doc_start_time, 'YYYY-MM-DD HH24:MI:SS') as doc_start_time,
                   to_char(doc_end_time, 'YYYY-MM-DD HH24:MI:SS') as doc_end_time,
                   doc_status,
                   doc_message,
                   round((j.job_end_time - j.job_start_time) * 24*60*60) as run_time_seconds,
                   (select count(e1.entry_id)
                    from   auth_batch_job_entries e1
                    where  e1.job_id = j.job_id) as num_actions,
                   (select count(e2.entry_id)
                    from   auth_batch_job_entries e2
                    where  e2.job_id = j.job_id
                    and    e2.success_p = 'f') as num_problems
            from    auth_batch_jobs j
            where  j.job_id = :job_id
        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-authentication/tcl/sync-procs-oracle.xql}
dbqd.acs-authentication.tcl.sync-procs-oracle.auth::sync::job::start_get_document.update_doc_start_time {dbqd.acs-authentication.tcl.sync-procs-oracle.auth::sync::job::start_get_document.update_doc_start_time {
            update auth_batch_jobs
            set    doc_start_time = sysdate
            where  job_id = :job_id
        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-authentication/tcl/sync-procs-oracle.xql}
dbqd.acs-authentication.tcl.sync-procs-oracle.auth::sync::job::end_get_document.update_doc_end {dbqd.acs-authentication.tcl.sync-procs-oracle.auth::sync::job::end_get_document.update_doc_end {
            update auth_batch_jobs
            set    doc_end_time = sysdate,
                   doc_status = :doc_status,
                   doc_message = :doc_message,
                   document = empty_clob(),
                   snapshot_p = :snapshot_p 
            where  job_id = :job_id
            returning document into :1
        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-authentication/tcl/sync-procs-oracle.xql}
dbqd.acs-authentication.tcl.sync-procs-oracle.auth::sync::job::end.update_job_end {dbqd.acs-authentication.tcl.sync-procs-oracle.auth::sync::job::end.update_job_end {

            update auth_batch_jobs
            set    job_end_time = sysdate,
                   message = :message
            where  job_id = :job_id

        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-authentication/tcl/sync-procs-oracle.xql}
dbqd.acs-authentication.tcl.sync-procs-oracle.auth::sync::job::create_entry.insert_entry {dbqd.acs-authentication.tcl.sync-procs-oracle.auth::sync::job::create_entry.insert_entry {

            insert into auth_batch_job_entries
            (entry_id, job_id, operation, username, user_id, success_p, message, element_messages)
            values
            (:entry_id, :job_id, :operation, :username, :user_id, :success_p_db, :message, empty_clob())
            returning element_messages into :1

        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-authentication/tcl/sync-procs-oracle.xql}
dbqd.acs-authentication.tcl.sync-procs-oracle.auth::sync::purge_jobs.purge_jobs {dbqd.acs-authentication.tcl.sync-procs-oracle.auth::sync::purge_jobs.purge_jobs {

            delete from auth_batch_jobs
            where  job_end_time < sysdate - :num_days

        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-authentication/tcl/sync-procs-oracle.xql}
dbqd.acs-authentication.tcl.sync-procs.auth::sync::job::get.select_job {dbqd.acs-authentication.tcl.sync-procs.auth::sync::job::get.select_job {
            select job_id,
                   to_char(job_start_time, 'YYYY-MM-DD HH24:MI:SS') as job_start_time,
                   to_char(job_end_time, 'YYYY-MM-DD HH24:MI:SS') as job_end_time,
                   interactive_p,
                   snapshot_p,
                   authority_id,
                   (select aa.pretty_name from auth_authorities aa where aa.authority_id = j.authority_id) as authority_pretty_name,
                   message,
                   creation_user,
                   to_char(doc_start_time, 'YYYY-MM-DD HH24:MI:SS') as doc_start_time,
                   to_char(doc_end_time, 'YYYY-MM-DD HH24:MI:SS') as doc_end_time,
                   doc_status,
                   doc_message,
                   trunc(extract(epoch from (j.job_end_time - j.job_start_time))) as run_time_seconds,
                   (select count(e1.entry_id)
                    from   auth_batch_job_entries e1
                    where  e1.job_id = j.job_id) as num_actions,
                   (select count(e2.entry_id)
                    from   auth_batch_job_entries e2
                    where  e2.job_id = j.job_id
                    and    e2.success_p = 'f') as num_problems
            from    auth_batch_jobs j
            where  j.job_id = :job_id
        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-authentication/tcl/sync-procs-postgresql.xql}
dbqd.acs-authentication.tcl.sync-procs.auth::sync::job::start_get_document.update_doc_start_time {dbqd.acs-authentication.tcl.sync-procs.auth::sync::job::start_get_document.update_doc_start_time {
            update auth_batch_jobs
            set    doc_start_time = current_timestamp
            where  job_id = :job_id
        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-authentication/tcl/sync-procs-postgresql.xql}
dbqd.acs-authentication.tcl.sync-procs.auth::sync::job::end_get_document.update_doc_end {dbqd.acs-authentication.tcl.sync-procs.auth::sync::job::end_get_document.update_doc_end {
            update auth_batch_jobs
            set    doc_end_time = current_timestamp,
                   doc_status = :doc_status,
                   doc_message = :doc_message,
                   document = :document,
                   snapshot_p = :snapshot_p 
            where  job_id = :job_id
        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-authentication/tcl/sync-procs-postgresql.xql}
dbqd.acs-authentication.tcl.sync-procs.auth::sync::job::end.update_job_end {dbqd.acs-authentication.tcl.sync-procs.auth::sync::job::end.update_job_end {

            update auth_batch_jobs
            set    job_end_time = current_timestamp,
                   message = :message
            where  job_id = :job_id

        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-authentication/tcl/sync-procs-postgresql.xql}
dbqd.acs-authentication.tcl.sync-procs.auth::sync::job::create_entry.insert_entry {dbqd.acs-authentication.tcl.sync-procs.auth::sync::job::create_entry.insert_entry {

            insert into auth_batch_job_entries
            (entry_id, job_id, operation, username, user_id, success_p, message, element_messages)
            values
            (:entry_id, :job_id, :operation, :username, :user_id, :success_p_db, :message, :element_messages)

        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-authentication/tcl/sync-procs-postgresql.xql}
dbqd.acs-authentication.tcl.sync-procs.auth::sync::purge_jobs.purge_jobs {dbqd.acs-authentication.tcl.sync-procs.auth::sync::purge_jobs.purge_jobs {

            delete from auth_batch_jobs
            where  job_end_time < current_timestamp - interval '$num_days days'

        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-authentication/tcl/sync-procs-postgresql.xql}
dbqd.acs-authentication.tcl.sync-procs.auth::sync::entry::get.select_entry {dbqd.acs-authentication.tcl.sync-procs.auth::sync::entry::get.select_entry {
            select e.entry_id,
                   to_char(e.entry_time, 'YYYY-MM-DD HH24:MI:SS') as entry_time,
                   e.operation,
                   a.authority_id,
                   a.pretty_name as authority_pretty_name,
                   e.job_id,
                   e.username,
                   e.user_id,
                   e.success_p,
                   e.message,
                   e.element_messages
            from auth_batch_job_entries e,
                 auth_authorities a,
                 auth_batch_jobs j
            where e.entry_id = :entry_id
              and e.job_id = j.job_id
              and j.authority_id = a.authority_id
        } {} {} {} c:/web/openacs/packages/acs-authentication/tcl/sync-procs.xql}
dbqd.acs-authentication.tcl.test.acs-authentication-procs-oracle.auth::test::get_admin_user_id.select_user_id {dbqd.acs-authentication.tcl.test.acs-authentication-procs-oracle.auth::test::get_admin_user_id.select_user_id {
            select q.user_id from
            (select user_id
            from users
            where acs_permission.permission_p(:context_root_id, user_id, 'admin') = 't') q where rownum = 1
        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-authentication/tcl/test/acs-authentication-procs-oracle.xql}
dbqd.acs-authentication.tcl.test.acs-authentication-procs-oracle.auth::test::get_password_vars.select_vars {dbqd.acs-authentication.tcl.test.acs-authentication-procs-oracle.auth::test::get_password_vars.select_vars {
            select q.* from
            (select u.user_id,
                    aa.authority_id,
                    u.username 
            from users u,
                       auth_authorities aa
            where u.authority_id = aa.authority_id
            and aa.short_name = 'local') q where rownum = 1
        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-authentication/tcl/test/acs-authentication-procs-oracle.xql}
dbqd.acs-authentication.tcl.test.acs-authentication-procs.auth::test::get_admin_user_id.select_user_id {dbqd.acs-authentication.tcl.test.acs-authentication-procs.auth::test::get_admin_user_id.select_user_id {
            select user_id
            from users
            where acs_permission__permission_p(:context_root_id, user_id, 'admin') = 't'
            limit 1  
        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-authentication/tcl/test/acs-authentication-procs-postgresql.xql}
dbqd.acs-authentication.tcl.test.acs-authentication-procs.auth::test::get_password_vars.select_vars {dbqd.acs-authentication.tcl.test.acs-authentication-procs.auth::test::get_password_vars.select_vars {
            select u.user_id,
                   aa.authority_id,
                   u.username 
            from users u,
                       auth_authorities aa
            where u.authority_id = aa.authority_id
            and aa.short_name = 'local'
            limit 1
        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-authentication/tcl/test/acs-authentication-procs-postgresql.xql}
dbqd.acs-automated-testing.tcl.aa-test-procs-oracle.aa_run_testcase.delete_testcase_results_sql {dbqd.acs-automated-testing.tcl.aa-test-procs-oracle.aa_run_testcase.delete_testcase_results_sql {
    delete from aa_test_results
    where testcase_id = :testcase_id
  } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-automated-testing/tcl/aa-test-procs-oracle.xql}
dbqd.acs-automated-testing.tcl.aa-test-procs-oracle.aa_run_testcase.delete_testcase_final_results_sql {dbqd.acs-automated-testing.tcl.aa-test-procs-oracle.aa_run_testcase.delete_testcase_final_results_sql {
     delete from aa_test_final_results
     where testcase_id = :testcase_id
  } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-automated-testing/tcl/aa-test-procs-oracle.xql}
dbqd.acs-automated-testing.tcl.aa-test-procs-oracle.aa_log_result.test_result_insert {dbqd.acs-automated-testing.tcl.aa-test-procs-oracle.aa_log_result.test_result_insert {
     insert into aa_test_results
                      (testcase_id, package_key, test_id, timestamp, result,
                       notes)
              values (:aa_testcase_id, :aa_package_key, :aa_testcase_test_id,
                      sysdate, :test_result, :test_notes)
  } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-automated-testing/tcl/aa-test-procs-oracle.xql}
dbqd.acs-automated-testing.tcl.aa-test-procs-oracle.aa_log_final.testcase_result_insert {dbqd.acs-automated-testing.tcl.aa-test-procs-oracle.aa_log_final.testcase_result_insert {
    insert into aa_test_final_results
                    (testcase_id, package_key, timestamp, passes, fails)
    values (:aa_testcase_id, :aa_package_key, sysdate, :test_passes, :test_fails)
  } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-automated-testing/tcl/aa-test-procs-oracle.xql}
dbqd.acs-automated-testing.tcl.aa-test-procs.aa_run_testcase.delete_testcase_results_sql {dbqd.acs-automated-testing.tcl.aa-test-procs.aa_run_testcase.delete_testcase_results_sql {
    delete from aa_test_results
    where testcase_id = :testcase_id
  } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-automated-testing/tcl/aa-test-procs-postgresql.xql}
dbqd.acs-automated-testing.tcl.aa-test-procs.aa_run_testcase.delete_testcase_final_results_sql {dbqd.acs-automated-testing.tcl.aa-test-procs.aa_run_testcase.delete_testcase_final_results_sql {
     delete from aa_test_final_results
     where testcase_id = :testcase_id
  } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-automated-testing/tcl/aa-test-procs-postgresql.xql}
dbqd.acs-automated-testing.tcl.aa-test-procs.aa_log_result.test_result_insert {dbqd.acs-automated-testing.tcl.aa-test-procs.aa_log_result.test_result_insert {
     insert into aa_test_results
                      (testcase_id, package_key, test_id, timestamp,
                       result, notes)
              values (:aa_testcase_id, :aa_package_key, :aa_testcase_test_id,
                      current_timestamp, :test_result, :test_notes)
  } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-automated-testing/tcl/aa-test-procs-postgresql.xql}
dbqd.acs-automated-testing.tcl.aa-test-procs.aa_log_final.testcase_result_insert {dbqd.acs-automated-testing.tcl.aa-test-procs.aa_log_final.testcase_result_insert {
    insert into aa_test_final_results
                    (testcase_id, package_key, timestamp, passes, fails)
    values (:aa_testcase_id, :aa_package_key, current_timestamp, :test_passes, :test_fails)
  } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-automated-testing/tcl/aa-test-procs-postgresql.xql}
dbqd.acs-automated-testing.www.admin.index-oracle.acs-automated-testing.results_query {dbqd.acs-automated-testing.www.admin.index-oracle.acs-automated-testing.results_query {
    select testcase_id, package_key,
           to_char(timestamp,'MM/DD/YYYY HH:MI:SS') timestamp,
           passes, fails
    from aa_test_final_results
  } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-automated-testing/www/admin/index-oracle.xql}
dbqd.acs-automated-testing.www.admin.index.acs-automated-testing.results_query {dbqd.acs-automated-testing.www.admin.index.acs-automated-testing.results_query {
    select testcase_id, package_key,
           timestamp,
           passes, fails
    from aa_test_final_results
  } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-automated-testing/www/admin/index-postgresql.xql}
dbqd.acs-automated-testing.www.admin.testcase-oracle.acs-automated-testing.testcase_query {dbqd.acs-automated-testing.www.admin.testcase-oracle.acs-automated-testing.testcase_query {
    select to_char(timestamp,'DD/MM/YYYY HH:MI:SS') timestamp, result, notes
      from aa_test_results
      where testcase_id = :testcase_id and
            package_key = :package_key
      order by test_id
  } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-automated-testing/www/admin/testcase-oracle.xql}
dbqd.acs-automated-testing.www.admin.testcase-oracle.acs-automated-testing.get_testcase_fails_count {dbqd.acs-automated-testing.www.admin.testcase-oracle.acs-automated-testing.get_testcase_fails_count {
    select fails
    from aa_test_final_results
    where testcase_id = :testcase_id
  } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-automated-testing/www/admin/testcase-oracle.xql}
dbqd.acs-automated-testing.www.admin.testcase.acs-automated-testing.testcase_query {dbqd.acs-automated-testing.www.admin.testcase.acs-automated-testing.testcase_query {
    select timestamp, result, notes
      from aa_test_results
      where testcase_id = :testcase_id and
            package_key = :package_key
      order by test_id
  } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-automated-testing/www/admin/testcase-postgresql.xql}
dbqd.acs-automated-testing.www.admin.testcase.acs-automated-testing.get_testcase_fails_count {dbqd.acs-automated-testing.www.admin.testcase.acs-automated-testing.get_testcase_fails_count {
    select fails
    from aa_test_final_results
    where testcase_id = :testcase_id
  } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-automated-testing/www/admin/testcase-postgresql.xql}
dbqd.acs-content-repository.tcl.acs-content-repository-init-oracle.acs_cr_scheduled_release_exec.schedule_releases {dbqd.acs-content-repository.tcl.acs-content-repository-init-oracle.acs_cr_scheduled_release_exec.schedule_releases {

        begin
                cr_scheduled_release_exec;
        end;

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-content-repository/tcl/acs-content-repository-init-oracle.xql}
dbqd.acs-content-repository.tcl.acs-content-repository-init.acs_cr_scheduled_release_exec.schedule_releases {dbqd.acs-content-repository.tcl.acs-content-repository-init.acs_cr_scheduled_release_exec.schedule_releases {

         select cr_scheduled_release_exec();

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-content-repository/tcl/acs-content-repository-init-postgresql.xql}
dbqd.acs-content-repository.tcl.acs-content-repository-procs-oracle.cr_delete_scheduled_files.fetch_paths {dbqd.acs-content-repository.tcl.acs-content-repository-procs-oracle.cr_delete_scheduled_files.fetch_paths {

select distinct crftd.path, crftd.storage_area_key
          from cr_files_to_delete crftd
           where not exists (select 1 
                             from cr_revisions r 
                            where r.filename = crftd.path) 
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-content-repository/tcl/acs-content-repository-procs-oracle.xql}
dbqd.acs-content-repository.tcl.acs-content-repository-procs.cr_delete_scheduled_files.fetch_paths {dbqd.acs-content-repository.tcl.acs-content-repository-procs.cr_delete_scheduled_files.fetch_paths {
 SELECT distinct crftd.path, crftd.storage_area_key
   FROM cr_files_to_delete crftd
  WHERE not exists (SELECT 1
                      FROM cr_revisions r
                     WHERE r.content = crftd.path)
      } {} {} {} c:/web/openacs/packages/acs-content-repository/tcl/acs-content-repository-procs.xql}
dbqd.acs-content-repository.tcl.acs-content-repository-procs.cr_delete_scheduled_files.delete_files {dbqd.acs-content-repository.tcl.acs-content-repository-procs.cr_delete_scheduled_files.delete_files {
      delete from cr_files_to_delete
      } {} {} {} c:/web/openacs/packages/acs-content-repository/tcl/acs-content-repository-procs.xql}
dbqd.acs-content-repository.tcl.acs-content-repository-procs.cr_scan_mime_types.insert_mime_type {dbqd.acs-content-repository.tcl.acs-content-repository-procs.cr_scan_mime_types.insert_mime_type {
	    insert into cr_mime_types
	    (mime_type, file_extension)
	    select
	    :mime_type, :extension
	    from dual
	    where not exists (select 1 from cr_mime_types where mime_type = :mime_type)
      } {} {} {} c:/web/openacs/packages/acs-content-repository/tcl/acs-content-repository-procs.xql}
dbqd.acs-content-repository.tcl.doc-procs-oracle.doc::package_info.get_info {dbqd.acs-content-repository.tcl.doc-procs-oracle.doc::package_info.get_info {

        select doc.get_package_header(:package_name) from dual

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-content-repository/tcl/doc-procs-oracle.xql}
dbqd.acs-content-repository.tcl.doc-procs-oracle.doc::package_info.get_header {dbqd.acs-content-repository.tcl.doc-procs-oracle.doc::package_info.get_header {

        select doc.get_proc_header(:proc_name, :package_name) from dual
      
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-content-repository/tcl/doc-procs-oracle.xql}
dbqd.acs-content-repository.tcl.doc-procs-oracle.doc::package_list.get_packages {dbqd.acs-content-repository.tcl.doc-procs-oracle.doc::package_list.get_packages {

       select distinct 
        lower(name) as label,  
        lower(name) as value 
      from 
        user_source
      where 
        type='PACKAGE'
      and
        line=1
      order by label
     
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-content-repository/tcl/doc-procs-oracle.xql}
dbqd.acs-content-repository.tcl.doc-procs-oracle.doc::func_list.get_funcs {dbqd.acs-content-repository.tcl.doc-procs-oracle.doc::func_list.get_funcs {

       select distinct 
        lower(text) as line_header 
      from 
        user_source
      where 
        type='PACKAGE'
      and
        lower(name) = lower(:package_name)
      and (
          lower(text) like '%procedure%'
        or
          lower(text) like '%function%'
      )
      order by line_header
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-content-repository/tcl/doc-procs-oracle.xql}
dbqd.acs-content-repository.tcl.doc-procs-oracle.doc::func_multirow.get_functions {dbqd.acs-content-repository.tcl.doc-procs-oracle.doc::func_multirow.get_functions {

      select distinct 
        lower(text) as line_header 
      from 
        user_source
      where 
        type='PACKAGE'
      and
        lower(name) = lower(:package_name)
      and (
          lower(text) like '%procedure%'
        or
          lower(text) like '%function%'
      )
      order by line_header

    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-content-repository/tcl/doc-procs-oracle.xql}
dbqd.acs-content-repository.tcl.doc-procs.doc::package_info.get_info {dbqd.acs-content-repository.tcl.doc-procs.doc::package_info.get_info {

        select doc__get_package_header(:package_name) from dual

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-content-repository/tcl/doc-procs-postgresql.xql}
dbqd.acs-content-repository.tcl.doc-procs.doc::get_proc_header.get_header {dbqd.acs-content-repository.tcl.doc-procs.doc::get_proc_header.get_header {

        select doc__get_proc_header(:proc_name, :package_name) from dual
      
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-content-repository/tcl/doc-procs-postgresql.xql}
dbqd.acs-content-repository.tcl.doc-procs.doc::package_list.get_packages {dbqd.acs-content-repository.tcl.doc-procs.doc::package_list.get_packages {

        select distinct 
          substr(proname,1,position('__' in proname)-1)  as label,
          substr(proname,1,position('__' in proname)-1)  as value        
        from 
          pg_proc 
        where 
          proname like '%\\\_\\\_%' 
        order by 
          label

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-content-repository/tcl/doc-procs-postgresql.xql}
dbqd.acs-content-repository.tcl.doc-procs.doc::func_list.get_funcs {dbqd.acs-content-repository.tcl.doc-procs.doc::func_list.get_funcs {

        select 
          'function ' || proname as line_header
        from 
          pg_proc 
        where 
          proname like lower(:package_name) || '\\\_\\\_%' 
        order by 
          line_header
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-content-repository/tcl/doc-procs-postgresql.xql}
dbqd.acs-content-repository.tcl.doc-procs.doc::func_multirow.get_functions {dbqd.acs-content-repository.tcl.doc-procs.doc::func_multirow.get_functions {

        select 
          'function ' || substr(proname,length(:package_name)+3) as line_header
        from 
          pg_proc 
        where 
          proname like lower(:package_name) || '\\\_\\\_%' 
        order by 
          line_header
  
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-content-repository/tcl/doc-procs-postgresql.xql}
dbqd.acs-content-repository.tcl.extlink-procs-oracle.content_extlink::new.extlink_new {dbqd.acs-content-repository.tcl.extlink-procs-oracle.content_extlink::new.extlink_new {

        begin
          :1 := content_extlink.new (
                  name => :name,
                  url => :url,
                  label => :label,
                  description => :description,
                  parent_id => :parent_id,
                  extlink_id => :extlink_id,
                  creation_user => :creation_user,
                  creation_ip => :creation_ip
                );
        end;

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-content-repository/tcl/extlink-procs-oracle.xql}
dbqd.acs-content-repository.tcl.extlink-procs-oracle.content_extlink::edit.extlink_update_object {dbqd.acs-content-repository.tcl.extlink-procs-oracle.content_extlink::edit.extlink_update_object {

        update acs_objects
        set last_modified = sysdate,
          modifying_user = :modifying_user,
          modifying_ip = :modifying_ip
        where object_id = :extlink_id

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-content-repository/tcl/extlink-procs-oracle.xql}
dbqd.acs-content-repository.tcl.extlink-procs-oracle.content_extlink::delete.extlink_delete {dbqd.acs-content-repository.tcl.extlink-procs-oracle.content_extlink::delete.extlink_delete {

          begin
            content_extlink.del (
              extlink_id => :extlink_id
            );
          end;

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-content-repository/tcl/extlink-procs-oracle.xql}
dbqd.acs-content-repository.tcl.extlink-procs-oracle.content_extlink::extlink_p.extlink_check {dbqd.acs-content-repository.tcl.extlink-procs-oracle.content_extlink::extlink_p.extlink_check {

        select content_extlink.is_extlink (:item_id)
        from dual

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-content-repository/tcl/extlink-procs-oracle.xql}
dbqd.acs-content-repository.tcl.extlink-procs.content_extlink::new.extlink_new {dbqd.acs-content-repository.tcl.extlink-procs.content_extlink::new.extlink_new {

        select content_extlink__new (
          :name,
          :url,
          :label,
          :description,
          :parent_id,
          :extlink_id,
          current_timestamp,
          :creation_user,
          :creation_ip
        );

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-content-repository/tcl/extlink-procs-postgresql.xql}
dbqd.acs-content-repository.tcl.extlink-procs.content_extlink::edit.extlink_update_object {dbqd.acs-content-repository.tcl.extlink-procs.content_extlink::edit.extlink_update_object {

        update acs_objects
        set last_modified = current_timestamp,
          modifying_user = :modifying_user,
          modifying_ip = :modifying_ip
        where object_id = :extlink_id

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-content-repository/tcl/extlink-procs-postgresql.xql}
dbqd.acs-content-repository.tcl.extlink-procs.content_extlink::delete.extlink_delete {dbqd.acs-content-repository.tcl.extlink-procs.content_extlink::delete.extlink_delete {

        select content_extlink__delete (
          :extlink_id
        );

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-content-repository/tcl/extlink-procs-postgresql.xql}
dbqd.acs-content-repository.tcl.extlink-procs.content_extlink::extlink_p.extlink_check {dbqd.acs-content-repository.tcl.extlink-procs.content_extlink::extlink_p.extlink_check {

        select content_extlink__is_extlink (
          :item_id
        );

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-content-repository/tcl/extlink-procs-postgresql.xql}
dbqd.acs-content-repository.tcl.extlink-procs.content_extlink::edit.extlink_update_extlink {dbqd.acs-content-repository.tcl.extlink-procs.content_extlink::edit.extlink_update_extlink {

        update cr_extlinks
        set url = :url,
          label = :label,
          description = :description
        where extlink_id = :extlink_id

      } {} {} {} c:/web/openacs/packages/acs-content-repository/tcl/extlink-procs.xql}
dbqd.acs-content-repository.tcl.extlink-procs.content_extlink::extlink_name.extlink_name {dbqd.acs-content-repository.tcl.extlink-procs.content_extlink::extlink_name.extlink_name {
          select label
          from cr_extlinks
          where extlink_id = :item_id
      } {} {} {} c:/web/openacs/packages/acs-content-repository/tcl/extlink-procs.xql}
dbqd.acs-content-repository.tcl.filter-procs-oracle.content::get_folder_labels.get_url {dbqd.acs-content-repository.tcl.filter-procs-oracle.content::get_folder_labels.get_url {

    select
      0 as tree_level, '' as name , 'Home' as title
    from
      dual
    UNION
    select
      t.tree_level, i.name, content_item.get_title(t.context_id) as title
    from (
      select 
        context_id, level as tree_level
      from 
        acs_objects
      where
        context_id <> content_item.get_root_folder
      connect by
        prior context_id = object_id
      start with
        object_id = :item_id
      ) t, cr_items i
    where
      i.item_id = t.context_id
    order by
      tree_level

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-content-repository/tcl/filter-procs-oracle.xql}
dbqd.acs-content-repository.tcl.filter-procs-oracle.content::get_content_value.gcv_get_revision_id {dbqd.acs-content-repository.tcl.filter-procs-oracle.content::get_content_value.gcv_get_revision_id {

	  begin
	    content_revision.to_temporary_clob(:revision_id);
	  end;

	} {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-content-repository/tcl/filter-procs-oracle.xql}
dbqd.acs-content-repository.tcl.filter-procs-oracle.content::get_content_value.gcv_get_previous_content {dbqd.acs-content-repository.tcl.filter-procs-oracle.content::get_content_value.gcv_get_previous_content {

    select 
      content
    from 
      cr_content_text
    where 
      revision_id = :revision_id

	} {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-content-repository/tcl/filter-procs-oracle.xql}
dbqd.acs-content-repository.tcl.filter-procs-oracle.content::init.get_item_info {dbqd.acs-content-repository.tcl.filter-procs-oracle.content::init.get_item_info {

    select 
      item_id, content_type
    from 
      cr_items
    where
      item_id = content_item.get_id(:url, :content_root)

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-content-repository/tcl/filter-procs-oracle.xql}
dbqd.acs-content-repository.tcl.filter-procs-oracle.content::init.get_template_info {dbqd.acs-content-repository.tcl.filter-procs-oracle.content::init.get_template_info {

    select 
      item_id, content_type
    from 
      cr_items
    where
      item_id = content_item.get_id(:url, :template_root)

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-content-repository/tcl/filter-procs-oracle.xql}
dbqd.acs-content-repository.tcl.filter-procs-oracle.content::init.get_template_url {dbqd.acs-content-repository.tcl.filter-procs-oracle.content::init.get_template_url {

        select 
          content_item.get_live_revision(content_item.get_template(:item_id, :context)) as template_id,
          content_template.get_path(content_item.get_template(:item_id, :context), :template_root) as template_url 
        from 
          dual

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-content-repository/tcl/filter-procs-oracle.xql}
dbqd.acs-content-repository.tcl.filter-procs.content::get_folder_labels.get_url {dbqd.acs-content-repository.tcl.filter-procs.content::get_folder_labels.get_url {

    select 0 as tree_level, '' as name , 'Home' as title
    UNION
    select t.tree_level, i.name, content_item.get_title(t.context_id) as title
    from (select o2.context_id, tree_level(o2.tree_sortkey) as tree_level
          from (select * from acs_objects where object_id = :item_id) o1, acs_objects o2
          where context_id <> content_item__get_root_folder()
            and o1.tree_sortkey between o2.tree_sortkey and tree_right(o2.tree_sortkey)) t,
      cr_items i
    where i.item_id = t.context_id
    order by tree_level

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-content-repository/tcl/filter-procs-postgresql.xql}
dbqd.acs-content-repository.tcl.filter-procs.content::get_content_value.gcv_get_revision_id {dbqd.acs-content-repository.tcl.filter-procs.content::get_content_value.gcv_get_revision_id {

        select 1

	} {} {} {postgresql 7.1} c:/web/openacs/packages/acs-content-repository/tcl/filter-procs-postgresql.xql}
dbqd.acs-content-repository.tcl.filter-procs.content::get_content_value.gcv_get_previous_content {dbqd.acs-content-repository.tcl.filter-procs.content::get_content_value.gcv_get_previous_content {
      
    select 
      content
    from 
      cr_revisions
    where 
      revision_id = :revision_id
  
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-content-repository/tcl/filter-procs-postgresql.xql}
dbqd.acs-content-repository.tcl.filter-procs.content::init.get_item_info {dbqd.acs-content-repository.tcl.filter-procs.content::init.get_item_info {

    select 
      item_id, content_type
    from 
      cr_items
    where
      item_id = content_item__get_id(:url, :content_root, 'f')

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-content-repository/tcl/filter-procs-postgresql.xql}
dbqd.acs-content-repository.tcl.filter-procs.content::init.get_template_info {dbqd.acs-content-repository.tcl.filter-procs.content::init.get_template_info {

    select 
      item_id, content_type
    from 
      cr_items
    where
      item_id = content_item__get_id(:url, :template_root, 'f')

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-content-repository/tcl/filter-procs-postgresql.xql}
dbqd.acs-content-repository.tcl.filter-procs.content::init.get_template_url {dbqd.acs-content-repository.tcl.filter-procs.content::init.get_template_url {

        select 
          content_item__get_live_revision(content_item__get_template(:item_id, :context)) as template_id,
          content_template__get_path(content_item__get_template(:item_id, :context),:template_root) as template_url 
        from 
          dual


      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-content-repository/tcl/filter-procs-postgresql.xql}
dbqd.acs-content-repository.tcl.filter-procs.content::init_all.get_template_url {dbqd.acs-content-repository.tcl.filter-procs.content::init_all.get_template_url {

        select 
          content_template__get_path(
          content_item__get_template(:item_id, :context),:template_root) as template_url 
        from 
          dual

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-content-repository/tcl/filter-procs-postgresql.xql}
dbqd.acs-content-repository.tcl.filter-procs.content::get_content.get_revision {dbqd.acs-content-repository.tcl.filter-procs.content::get_content.get_revision {

        select live_revision from cr_items where item_id = :item_id

      } {} {} {} c:/web/openacs/packages/acs-content-repository/tcl/filter-procs.xql}
dbqd.acs-content-repository.tcl.filter-procs.content::get_content.get_mime_type {dbqd.acs-content-repository.tcl.filter-procs.content::get_content.get_mime_type {

        select mime_type from cr_revisions 
        where revision_id = :revision_id

      } {} {} {} c:/web/openacs/packages/acs-content-repository/tcl/filter-procs.xql}
dbqd.acs-content-repository.tcl.filter-procs.content::get_content.get_content_type {dbqd.acs-content-repository.tcl.filter-procs.content::get_content.get_content_type {

        select content_type from cr_items 
        where item_id = :item_id

      } {} {} {} c:/web/openacs/packages/acs-content-repository/tcl/filter-procs.xql}
dbqd.acs-content-repository.tcl.filter-procs.content::get_content.get_table_name {dbqd.acs-content-repository.tcl.filter-procs.content::get_content.get_table_name {

        select table_name from acs_object_types 
        where object_type = :content_type

      } {} {} {} c:/web/openacs/packages/acs-content-repository/tcl/filter-procs.xql}
dbqd.acs-content-repository.tcl.filter-procs.content::get_content.content_as_text {dbqd.acs-content-repository.tcl.filter-procs.content::get_content.content_as_text {

	, content as text

	} {} {} {} c:/web/openacs/packages/acs-content-repository/tcl/filter-procs.xql}
dbqd.acs-content-repository.tcl.filter-procs.content::get_content.get_content {dbqd.acs-content-repository.tcl.filter-procs.content::get_content.get_content {

        select 
           x.*, 
          :content_type as content_type
          $text_sql
        from
          cr_revisions r, ${table_name}x x
        where
          r.revision_id = :revision_id
        and 
          x.revision_id = r.revision_id

      } {} {} {} c:/web/openacs/packages/acs-content-repository/tcl/filter-procs.xql}
dbqd.acs-content-repository.tcl.filter-procs.content::init.get_live_revision {dbqd.acs-content-repository.tcl.filter-procs.content::init.get_live_revision {

    select live_revision from cr_items where item_id = :item_id

      } {} {} {} c:/web/openacs/packages/acs-content-repository/tcl/filter-procs.xql}
dbqd.acs-content-repository.tcl.filter-procs.content::init_all.get_live_revision {dbqd.acs-content-repository.tcl.filter-procs.content::init_all.get_live_revision {

    select live_revision from cr_items where item_id = :item_id

      } {} {} {} c:/web/openacs/packages/acs-content-repository/tcl/filter-procs.xql}
dbqd.acs-content-repository.tcl.item-procs-oracle.item::get_title.gt_get_title {dbqd.acs-content-repository.tcl.item-procs-oracle.item::get_title.gt_get_title {
      
    select content_item.get_title(:item_id) from dual
  
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-content-repository/tcl/item-procs-oracle.xql}
dbqd.acs-content-repository.tcl.item-procs-oracle.item::is_publishable.ip_is_publishable_p {dbqd.acs-content-repository.tcl.item-procs-oracle.item::is_publishable.ip_is_publishable_p {
      
    select content_item.is_publishable(:item_id) from dual
  
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-content-repository/tcl/item-procs-oracle.xql}
dbqd.acs-content-repository.tcl.item-procs-oracle.item::get_revision_content.grc_get_all_content_1 {dbqd.acs-content-repository.tcl.item-procs-oracle.item::get_revision_content.grc_get_all_content_1 {

	, content.blob_to_string(content) as text

	} {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-content-repository/tcl/item-procs-oracle.xql}
dbqd.acs-content-repository.tcl.item-procs-oracle.item::get_id.id_get_item_id {dbqd.acs-content-repository.tcl.item-procs-oracle.item::get_id.id_get_item_id {
      select content_item__get_id(:url $root_sql) from dual
  
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-content-repository/tcl/item-procs-oracle.xql}
dbqd.acs-content-repository.tcl.item-procs-oracle.item::content_is_null.cin_get_content {dbqd.acs-content-repository.tcl.item-procs-oracle.item::content_is_null.cin_get_content {
      
    select 't' from cr_revisions r, cr_items i
      where r.revision_id = :revision_id
        and i.item_id = r.item_id
        and ((r.content is not null and i.storage_type in ('lob','text')) or
             (r.filename is not null and i.storage_type = 'file'))
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-content-repository/tcl/item-procs-oracle.xql}
dbqd.acs-content-repository.tcl.item-procs-oracle.item::get_template_id.gti_get_template_id {dbqd.acs-content-repository.tcl.item-procs-oracle.item::get_template_id.gti_get_template_id {

    select content_item.get_template(:item_id, :context) as template_id
    from dual

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-content-repository/tcl/item-procs-oracle.xql}
dbqd.acs-content-repository.tcl.item-procs-oracle.item::get_url.gu_get_path {dbqd.acs-content-repository.tcl.item-procs-oracle.item::get_url.gu_get_path {
      
    select content_item.get_path(:item_id, $root_folder_id) from dual
  
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-content-repository/tcl/item-procs-oracle.xql}
dbqd.acs-content-repository.tcl.item-procs-oracle.item::get_best_revision.gbr_get_best_revision {dbqd.acs-content-repository.tcl.item-procs-oracle.item::get_best_revision.gbr_get_best_revision {
      
    select content_item.get_best_revision(:item_id) from dual
  
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-content-repository/tcl/item-procs-oracle.xql}
dbqd.acs-content-repository.tcl.item-procs-oracle.item::copy.copy_item {dbqd.acs-content-repository.tcl.item-procs-oracle.item::copy.copy_item {
      
        begin
          content_item.copy(
            item_id => :item_id,
            target_folder_id => :target_folder_id,
            creation_user => :creation_user,
            creation_ip => :creation_ip
          );
        end; 
  
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-content-repository/tcl/item-procs-oracle.xql}
dbqd.acs-content-repository.tcl.item-procs.item::get_title.gt_get_title {dbqd.acs-content-repository.tcl.item-procs.item::get_title.gt_get_title {
      
    select content_item__get_title(:item_id, 'f') 
  
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-content-repository/tcl/item-procs-postgresql.xql}
dbqd.acs-content-repository.tcl.item-procs.item::is_publishable.ip_is_publishable_p {dbqd.acs-content-repository.tcl.item-procs.item::is_publishable.ip_is_publishable_p {
      
    select content_item__is_publishable(:item_id) 
  
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-content-repository/tcl/item-procs-postgresql.xql}
dbqd.acs-content-repository.tcl.item-procs.item::get_revision_content.grc_get_all_content_1 {dbqd.acs-content-repository.tcl.item-procs.item::get_revision_content.grc_get_all_content_1 {

	, content as text

	} {} {} {postgresql 7.1} c:/web/openacs/packages/acs-content-repository/tcl/item-procs-postgresql.xql}
dbqd.acs-content-repository.tcl.item-procs.item::get_id.id_get_item_id {dbqd.acs-content-repository.tcl.item-procs.item::get_id.id_get_item_id {

      select content_item__get_id(:url $root_sql) 
  
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-content-repository/tcl/item-procs-postgresql.xql}
dbqd.acs-content-repository.tcl.item-procs.item::content_is_null.cin_get_content {dbqd.acs-content-repository.tcl.item-procs.item::content_is_null.cin_get_content {
      
    select 't' from cr_revisions r, cr_items i
      where r.revision_id = :revision_id
        and i.item_id = r.item_id
        and ((r.content is not null and i.storage_type in ('text','file')) or
             (r.lob is not null and i.storage_type = 'lob'))

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-content-repository/tcl/item-procs-postgresql.xql}
dbqd.acs-content-repository.tcl.item-procs.item::get_template_id.gti_get_template_id {dbqd.acs-content-repository.tcl.item-procs.item::get_template_id.gti_get_template_id {

    select content_item__get_template(:item_id, :context) as template_id
    from dual

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-content-repository/tcl/item-procs-postgresql.xql}
dbqd.acs-content-repository.tcl.item-procs.item::get_url.gu_get_path {dbqd.acs-content-repository.tcl.item-procs.item::get_url.gu_get_path {
      
    select content_item__get_path(:item_id, $root_folder_id) 
  
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-content-repository/tcl/item-procs-postgresql.xql}
dbqd.acs-content-repository.tcl.item-procs.item::get_best_revision.gbr_get_best_revision {dbqd.acs-content-repository.tcl.item-procs.item::get_best_revision.gbr_get_best_revision {
      
    select content_item__get_best_revision(:item_id) 
  
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-content-repository/tcl/item-procs-postgresql.xql}
dbqd.acs-content-repository.tcl.item-procs.item::copy.copy_item {dbqd.acs-content-repository.tcl.item-procs.item::copy.copy_item {
      
         select content_item__copy(
                  :item_id,
                  :target_folder_id,
                  :creation_user,
                  :creation_ip
                )
  
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-content-repository/tcl/item-procs-postgresql.xql}
dbqd.acs-content-repository.tcl.item-procs.item::get_publish_status.gps_get_publish_status {dbqd.acs-content-repository.tcl.item-procs.item::get_publish_status.gps_get_publish_status {
      
    select publish_status from cr_items where item_id = :item_id
  
      } {} {} {} c:/web/openacs/packages/acs-content-repository/tcl/item-procs.xql}
dbqd.acs-content-repository.tcl.item-procs.item::get_revision_content.grc_get_table_names {dbqd.acs-content-repository.tcl.item-procs.item::get_revision_content.grc_get_table_names {
      
    select table_name from acs_object_types 
    where object_type = :content_type
  
      } {} {} {} c:/web/openacs/packages/acs-content-repository/tcl/item-procs.xql}
dbqd.acs-content-repository.tcl.item-procs.item::get_revision_content.grc_get_all_content {dbqd.acs-content-repository.tcl.item-procs.item::get_revision_content.grc_get_all_content {
      select 
    x.*, 
    :item_id as item_id $text_sql, 
    :content_type as content_type
  from
    cr_revisions r, ${table_name}x x
  where
    r.revision_id = :revision_id
  and 
    x.revision_id = r.revision_id
  
      } {} {} {} c:/web/openacs/packages/acs-content-repository/tcl/item-procs.xql}
dbqd.acs-content-repository.tcl.item-procs.item::content_methods_by_type.cmbt_get_content_mime_types {dbqd.acs-content-repository.tcl.item-procs.item::content_methods_by_type.cmbt_get_content_mime_types {
      
    select mime_type from cr_content_mime_type_map
      where content_type = :content_type
      and lower(mime_type) like 'text/%'
  
      } {} {} {} c:/web/openacs/packages/acs-content-repository/tcl/item-procs.xql}
dbqd.acs-content-repository.tcl.item-procs.item::get_content_type.gct_get_content_type {dbqd.acs-content-repository.tcl.item-procs.item::get_content_type.gct_get_content_type {
      
    select content_type from cr_items where
      item_id = :item_id
  
      } {} {} {} c:/web/openacs/packages/acs-content-repository/tcl/item-procs.xql}
dbqd.acs-content-repository.tcl.item-procs.item::get_item_from_revision.gifr_get_one_revision {dbqd.acs-content-repository.tcl.item-procs.item::get_item_from_revision.gifr_get_one_revision {
      
    select item_id from cr_revisions where revision_id = :revision_id
  
      } {} {} {} c:/web/openacs/packages/acs-content-repository/tcl/item-procs.xql}
dbqd.acs-content-repository.tcl.item-procs.item::get_type.get_content_type {dbqd.acs-content-repository.tcl.item-procs.item::get_type.get_content_type {
    select content_type from cr_items
    where item_id = :item_id
  } {} {} {} c:/web/openacs/packages/acs-content-repository/tcl/item-procs.xql}
dbqd.acs-content-repository.tcl.item-procs.item::get_live_revision.glr_get_live_revision {dbqd.acs-content-repository.tcl.item-procs.item::get_live_revision.glr_get_live_revision {
      
    select live_revision from cr_items
      where item_id = :item_id

      } {} {} {} c:/web/openacs/packages/acs-content-repository/tcl/item-procs.xql}
dbqd.acs-content-repository.tcl.item-procs.item::get_mime_info.gmi_get_mime_info {dbqd.acs-content-repository.tcl.item-procs.item::get_mime_info.gmi_get_mime_info {
      
    select 
      m.mime_type, m.file_extension
    from
      cr_mime_types m, cr_revisions r
    where
      r.mime_type = m.mime_type
    and
      r.revision_id = $revision_id
  
      } {} {} {} c:/web/openacs/packages/acs-content-repository/tcl/item-procs.xql}
dbqd.acs-content-repository.tcl.keyword-procs-oracle.cr::keyword::new.content_keyword_new {dbqd.acs-content-repository.tcl.keyword-procs-oracle.cr::keyword::new.content_keyword_new {
            begin
              :1 := content_keyword.new (
                :heading,    
                :description,
                :parent_id,  
                :keyword_id, 
                sysdate(),
                :user_id,      
                :creation_ip,  
                :object_type  
              );
            end;
        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-content-repository/tcl/keyword-procs-oracle.xql}
dbqd.acs-content-repository.tcl.keyword-procs-oracle.cr::keyword::delete.delete_keyword {dbqd.acs-content-repository.tcl.keyword-procs-oracle.cr::keyword::delete.delete_keyword {
            begin
                content_keyword.del(:keyword_id);
            end;
        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-content-repository/tcl/keyword-procs-oracle.xql}
dbqd.acs-content-repository.tcl.keyword-procs-oracle.cr::keyword::set_heading.set_heading {dbqd.acs-content-repository.tcl.keyword-procs-oracle.cr::keyword::set_heading.set_heading {
            begin
                content_keyword.set_heading(:keyword_id, :heading);
            end;
        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-content-repository/tcl/keyword-procs-oracle.xql}
dbqd.acs-content-repository.tcl.keyword-procs-oracle.cr::keyword::item_unassign.item_unassign {dbqd.acs-content-repository.tcl.keyword-procs-oracle.cr::keyword::item_unassign.item_unassign {
            begin
                 content_keyword.item_unassign(:item_id, :keyword_id);
            end;
        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-content-repository/tcl/keyword-procs-oracle.xql}
dbqd.acs-content-repository.tcl.keyword-procs-oracle.cr::keyword::item_assign.keyword_assign {dbqd.acs-content-repository.tcl.keyword-procs-oracle.cr::keyword::item_assign.keyword_assign {
            begin
              content_keyword.item_assign(
                :item_id,
                :keyword,
                null,
                null,
                null
              );
            end;
        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-content-repository/tcl/keyword-procs-oracle.xql}
dbqd.acs-content-repository.tcl.keyword-procs.cr::keyword::new.content_keyword_new {dbqd.acs-content-repository.tcl.keyword-procs.cr::keyword::new.content_keyword_new {
            select content_keyword__new (
                :heading,    
                :description,
                :parent_id,  
                :keyword_id, 
                current_timestamp,
                :user_id,      
                :creation_ip,  
                :object_type  
            )
        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-content-repository/tcl/keyword-procs-postgresql.xql}
dbqd.acs-content-repository.tcl.keyword-procs.cr::keyword::delete.delete_keyword {dbqd.acs-content-repository.tcl.keyword-procs.cr::keyword::delete.delete_keyword {
                select content_keyword__delete (:keyword_id)
        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-content-repository/tcl/keyword-procs-postgresql.xql}
dbqd.acs-content-repository.tcl.keyword-procs.cr::keyword::set_heading.set_heading {dbqd.acs-content-repository.tcl.keyword-procs.cr::keyword::set_heading.set_heading {
            select content_keyword__set_heading(:keyword_id, :heading)
        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-content-repository/tcl/keyword-procs-postgresql.xql}
dbqd.acs-content-repository.tcl.keyword-procs.cr::keyword::item_unassign.item_unassign {dbqd.acs-content-repository.tcl.keyword-procs.cr::keyword::item_unassign.item_unassign {
            select content_keyword__item_unassign(:item_id, :keyword_id)
        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-content-repository/tcl/keyword-procs-postgresql.xql}
dbqd.acs-content-repository.tcl.keyword-procs.cr::keyword::item_assign.keyword_assign {dbqd.acs-content-repository.tcl.keyword-procs.cr::keyword::item_assign.keyword_assign {
            select content_keyword__item_assign(
                :item_id,
                :keyword,
                null,
                null,
                null
            )
        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-content-repository/tcl/keyword-procs-postgresql.xql}
dbqd.acs-content-repository.tcl.keyword-procs.cr::keyword::get_keyword_id.select_keyword_id {dbqd.acs-content-repository.tcl.keyword-procs.cr::keyword::get_keyword_id.select_keyword_id {
            select keyword_id 
            from   cr_keywords
            where  parent_id = :parent_id
            and    heading = :heading
        } {} {} {} c:/web/openacs/packages/acs-content-repository/tcl/keyword-procs.xql}
dbqd.acs-content-repository.tcl.keyword-procs.cr::keyword::item_unassign_children.item_unassign_children {dbqd.acs-content-repository.tcl.keyword-procs.cr::keyword::item_unassign_children.item_unassign_children {
            delete from cr_item_keyword_map
            where item_id = :item_id
            and   keyword_id in (select p.keyword_id
                                   from   cr_keywords p
                                   where  p.parent_id = :parent_id)
        } {} {} {} c:/web/openacs/packages/acs-content-repository/tcl/keyword-procs.xql}
dbqd.acs-content-repository.tcl.keyword-procs.cr::keyword::item_assign.get_parent_id {dbqd.acs-content-repository.tcl.keyword-procs.cr::keyword::item_assign.get_parent_id {
            select parent_id
            from cr_keywords
            where keyword_id = :keyword
        } {} {} {} c:/web/openacs/packages/acs-content-repository/tcl/keyword-procs.xql}
dbqd.acs-content-repository.tcl.keyword-procs.cr::keyword::item_get_assigned.get_keywords {dbqd.acs-content-repository.tcl.keyword-procs.cr::keyword::item_get_assigned.get_keywords {
            select keyword_id from cr_item_keyword_map
            where item_id = :item_id
        } {} {} {} c:/web/openacs/packages/acs-content-repository/tcl/keyword-procs.xql}
dbqd.acs-content-repository.tcl.keyword-procs.cr::keyword::item_get_assigned.get_child_keywords {dbqd.acs-content-repository.tcl.keyword-procs.cr::keyword::item_get_assigned.get_child_keywords {
            select km.keyword_id
            from cr_item_keyword_map km,
                 cr_keywords kw
            where km.item_id = :item_id
            and   kw.parent_id = :parent_id
            and   kw.keyword_id = km.keyword_id
        } {} {} {} c:/web/openacs/packages/acs-content-repository/tcl/keyword-procs.xql}
dbqd.acs-content-repository.tcl.keyword-procs.cr::keyword::get_options_flat.select_keyword_options {dbqd.acs-content-repository.tcl.keyword-procs.cr::keyword::get_options_flat.select_keyword_options {
            select heading,
                   keyword_id
            from   cr_keywords
            where  [ad_decode $parent_id "" "parent_id is null" "parent_id = :parent_id"]
            order  by lower(heading)
        } {} {} {} c:/web/openacs/packages/acs-content-repository/tcl/keyword-procs.xql}
dbqd.acs-content-repository.tcl.publish-procs-oracle.publish::handle::text.get_revision_id {dbqd.acs-content-repository.tcl.publish-procs-oracle.publish::handle::text.get_revision_id {

                begin
                content_revision.to_temporary_clob(:revision_id);
                end;
        
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-content-repository/tcl/publish-procs-oracle.xql}
dbqd.acs-content-repository.tcl.publish-procs-oracle.publish::handle::text.get_previous_content {dbqd.acs-content-repository.tcl.publish-procs-oracle.publish::handle::text.get_previous_content {

                       select 
                         content
                       from 
                         cr_content_text
                       where 
                         revision_id = :revision_id

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-content-repository/tcl/publish-procs-oracle.xql}
dbqd.acs-content-repository.tcl.publish-procs-oracle.publish::write_multiple_blobs.wmb_get_blob_file {dbqd.acs-content-repository.tcl.publish-procs-oracle.publish::write_multiple_blobs.wmb_get_blob_file {
      
      select [ad_decode $storage_type file "'[cr_fs_path]' || filename" content] from cr_revisions where revision_id = $revision_id
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-content-repository/tcl/publish-procs-oracle.xql}
dbqd.acs-content-repository.tcl.publish-procs-oracle.publish::write_content.get_revision_id {dbqd.acs-content-repository.tcl.publish-procs-oracle.publish::write_content.get_revision_id {

                begin
                content_revision.to_temporary_clob(:revision_id);
                end;

	} {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-content-repository/tcl/publish-procs-oracle.xql}
dbqd.acs-content-repository.tcl.publish-procs-oracle.publish::write_content.get_previous_content {dbqd.acs-content-repository.tcl.publish-procs-oracle.publish::write_content.get_previous_content {
      
                       select 
                         content
                       from 
                         cr_content_text
                       where 
                         revision_id = :revision_id
  
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-content-repository/tcl/publish-procs-oracle.xql}
dbqd.acs-content-repository.tcl.publish-procs.publish::handle::text.get_revision_id {dbqd.acs-content-repository.tcl.publish-procs.publish::handle::text.get_revision_id {

        select 1

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-content-repository/tcl/publish-procs-postgresql.xql}
dbqd.acs-content-repository.tcl.publish-procs.publish::handle::text.get_previous_content {dbqd.acs-content-repository.tcl.publish-procs.publish::handle::text.get_previous_content {

                       select 
                         content
                       from 
                         cr_revisions
                       where 
                         revision_id = :revision_id

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-content-repository/tcl/publish-procs-postgresql.xql}
dbqd.acs-content-repository.tcl.publish-procs.publish::write_multiple_blobs.wmb_get_blob_file {dbqd.acs-content-repository.tcl.publish-procs.publish::write_multiple_blobs.wmb_get_blob_file {

      select case when i.storage_type = 'file' 
                       then '[cr_fs_path]' || r.content
                  when i.storage_type = 'lob'
                       then lob::text 
                       else r.content end as content, i.storage_type 
      from cr_revisions r, cr_items i 
      where r.item_id = i.item_id and r.revision_id = $revision_id

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-content-repository/tcl/publish-procs-postgresql.xql}
dbqd.acs-content-repository.tcl.publish-procs.publish::write_content.get_revision_id {dbqd.acs-content-repository.tcl.publish-procs.publish::write_content.get_revision_id {

        select 1

	} {} {} {postgresql 7.1} c:/web/openacs/packages/acs-content-repository/tcl/publish-procs-postgresql.xql}
dbqd.acs-content-repository.tcl.publish-procs.publish::write_content.get_previous_content {dbqd.acs-content-repository.tcl.publish-procs.publish::write_content.get_previous_content {
      
    select 
      content
    from 
      cr_revisions
    where 
      revision_id = :revision_id
  
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-content-repository/tcl/publish-procs-postgresql.xql}
dbqd.acs-content-repository.tcl.publish-procs.publish::handle::image.i_get_image_info {dbqd.acs-content-repository.tcl.publish-procs.publish::handle::image.i_get_image_info {
      
    select 
      im.width, im.height, r.title as image_alt
    from 
      images im, cr_revisions r
    where 
      im.image_id = :revision_id
    and
      r.revision_id = :revision_id
  
      } {} {} {} c:/web/openacs/packages/acs-content-repository/tcl/publish-procs.xql}
dbqd.acs-content-repository.tcl.publish-procs.publish::render_subitem.rs_get_subitems {dbqd.acs-content-repository.tcl.publish-procs.publish::render_subitem.rs_get_subitems {

      select 
        child_id
      from 
        cr_child_rels r, cr_items i
      where 
        r.parent_id = :main_item_id
      and 
        r.relation_tag = :relation_tag
      and
        i.item_id = r.child_id
      order by 
        order_n

      } {} {} {} c:/web/openacs/packages/acs-content-repository/tcl/publish-procs.xql}
dbqd.acs-content-repository.tcl.publish-procs.publish::render_subitem.cs_get_subitems_related {dbqd.acs-content-repository.tcl.publish-procs.publish::render_subitem.cs_get_subitems_related {

      select 
        related_object_id
      from 
        cr_item_rels r, cr_items i
      where 
        r.item_id = :main_item_id
      and 
        r.relation_tag = :relation_tag
      and
        i.item_id = r.related_object_id 
      order by 
        r.order_n

      } {} {} {} c:/web/openacs/packages/acs-content-repository/tcl/publish-procs.xql}
dbqd.acs-content-repository.tcl.publish-procs.publish::write_multiple_blobs.get_storage_type {dbqd.acs-content-repository.tcl.publish-procs.publish::write_multiple_blobs.get_storage_type {

           select storage_type 
             from cr_items 
            where item_id = (select item_id 
                               from cr_revisions 
                              where revision_id = :revision_id)

      } {} {} {} c:/web/openacs/packages/acs-content-repository/tcl/publish-procs.xql}
dbqd.acs-content-repository.tcl.publish-procs.publish::write_content.get_one_revision {dbqd.acs-content-repository.tcl.publish-procs.publish::write_content.get_one_revision {

             select item_id from cr_revisions where revision_id = :revision_id

      } {} {} {} c:/web/openacs/packages/acs-content-repository/tcl/publish-procs.xql}
dbqd.acs-content-repository.tcl.revision-procs-oracle.cr_write_content.get_item_info {dbqd.acs-content-repository.tcl.revision-procs-oracle.cr_write_content.get_item_info {
          select r.mime_type, i.storage_type, i.storage_area_key, r.revision_id
            from cr_revisions r, cr_items i
          where i.item_id = r.item_id and
              r.revision_id = content_item.get_live_revision(:item_id)
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-content-repository/tcl/revision-procs-oracle.xql}
dbqd.acs-content-repository.tcl.revision-procs-oracle.cr_write_content.write_file_content {dbqd.acs-content-repository.tcl.revision-procs-oracle.cr_write_content.write_file_content {
          select :path || filename
          from cr_revisions
          where revision_id = :revision_id
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-content-repository/tcl/revision-procs-oracle.xql}
dbqd.acs-content-repository.tcl.revision-procs-oracle.cr_write_content.write_lob_content {dbqd.acs-content-repository.tcl.revision-procs-oracle.cr_write_content.write_lob_content {
          select content
          from cr_revisions
          where revision_id = $revision_id
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-content-repository/tcl/revision-procs-oracle.xql}
dbqd.acs-content-repository.tcl.revision-procs-oracle.cr_import_content.mime_type_register {dbqd.acs-content-repository.tcl.revision-procs-oracle.cr_import_content.mime_type_register {
          begin
            content_type.register_mime_type('content_revision', :mime_type);
          end;
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-content-repository/tcl/revision-procs-oracle.xql}
dbqd.acs-content-repository.tcl.revision-procs-oracle.cr_import_content.image_subclass {dbqd.acs-content-repository.tcl.revision-procs-oracle.cr_import_content.image_subclass {
         select content_item.is_subclass(:image_type, 'image') from dual
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-content-repository/tcl/revision-procs-oracle.xql}
dbqd.acs-content-repository.tcl.revision-procs-oracle.cr_import_content.content_revision_subclass {dbqd.acs-content-repository.tcl.revision-procs-oracle.cr_import_content.content_revision_subclass {
         select content_item.is_subclass(:other_type, 'content_revision') from dual
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-content-repository/tcl/revision-procs-oracle.xql}
dbqd.acs-content-repository.tcl.revision-procs-oracle.cr_import_content.image_new {dbqd.acs-content-repository.tcl.revision-procs-oracle.cr_import_content.image_new {
          begin
            :1 := image.new(
               name          =>  :object_name,
               parent_id     =>  :parent_id,
               item_id       =>  :item_id,
               revision_id   =>  :revision_id,
               mime_type     =>  :mime_type,
               creation_user =>  :creation_user,
               creation_ip   =>  :creation_ip,
               title         =>  :title,
               content_type  =>  :image_type,
               storage_type  =>  :storage_type,
               height        =>  :original_height,
               width         =>  :original_width
            );
          end;
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-content-repository/tcl/revision-procs-oracle.xql}
dbqd.acs-content-repository.tcl.revision-procs-oracle.cr_import_content.image_revision_new {dbqd.acs-content-repository.tcl.revision-procs-oracle.cr_import_content.image_revision_new {
         begin
           :1 := image.new_revision (
             item_id       => :item_id,
             revision_id   => :revision_id,
             title         => :title,
             description   => :description,
             mime_type     => :mime_type,
             creation_user => :creation_user,
             creation_ip   => :creation_ip,
             height        => :original_height,
             width         => :original_width
           );
         end;
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-content-repository/tcl/revision-procs-oracle.xql}
dbqd.acs-content-repository.tcl.revision-procs-oracle.cr_import_content.content_item_new {dbqd.acs-content-repository.tcl.revision-procs-oracle.cr_import_content.content_item_new {
          begin
            :1 := content_item.new(
               name          =>  :object_name,
               item_id       =>  :item_id,
               parent_id     =>  :parent_id,
               context_id    =>  :parent_id,
               creation_user =>  :creation_user,
               creation_ip   =>  :creation_ip,
               content_type  =>  :other_type,
               storage_type  =>  :storage_type
            );
          end;
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-content-repository/tcl/revision-procs-oracle.xql}
dbqd.acs-content-repository.tcl.revision-procs-oracle.cr_import_content.content_revision_new {dbqd.acs-content-repository.tcl.revision-procs-oracle.cr_import_content.content_revision_new {
         begin
           :1 := content_revision.new (
             title         => :title,
             description   => :description,
             mime_type     => :mime_type,
             item_id       => :item_id,
             revision_id   => :revision_id,
             creation_user => :creation_user,
             creation_ip   => :creation_ip
           );
         end;
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-content-repository/tcl/revision-procs-oracle.xql}
dbqd.acs-content-repository.tcl.revision-procs-oracle.cr_import_content.set_lob_content {dbqd.acs-content-repository.tcl.revision-procs-oracle.cr_import_content.set_lob_content {
      
        update cr_revisions
        set mime_type = :mime_type,
        content = empty_blob()
        where revision_id = :revision_id
        returning content into :1
	   
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-content-repository/tcl/revision-procs-oracle.xql}
dbqd.acs-content-repository.tcl.revision-procs-oracle.cr_import_content.set_lob_size {dbqd.acs-content-repository.tcl.revision-procs-oracle.cr_import_content.set_lob_size {

         update cr_revisions
         set content_length = dbms_lob.getlength(content)
         where revision_id = :revision_id

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-content-repository/tcl/revision-procs-oracle.xql}
dbqd.acs-content-repository.tcl.revision-procs-oracle.cr_set_imported_content_live.set_live {dbqd.acs-content-repository.tcl.revision-procs-oracle.cr_set_imported_content_live.set_live {
         begin content_item.set_live_revision (revision_id => :revision_id);
         end;
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-content-repository/tcl/revision-procs-oracle.xql}
dbqd.acs-content-repository.tcl.revision-procs-oracle.cr_import_content.set_file_content {dbqd.acs-content-repository.tcl.revision-procs-oracle.cr_import_content.set_file_content {
          update cr_revisions
          set filename = :filename,
              mime_type = :mime_type,
              content_length = :tmp_size
          where revision_id = :revision_id
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-content-repository/tcl/revision-procs-oracle.xql}
dbqd.acs-content-repository.tcl.revision-procs.cr_write_content.get_item_info {dbqd.acs-content-repository.tcl.revision-procs.cr_write_content.get_item_info {
          select i.storage_type, i.storage_area_key, r.mime_type, r.revision_id
          from cr_items i, cr_revisions r
          where r.revision_id = content_item__get_live_revision(:item_id) and i.item_id = r.item_id
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-content-repository/tcl/revision-procs-postgresql.xql}
dbqd.acs-content-repository.tcl.revision-procs.cr_write_content.write_file_content {dbqd.acs-content-repository.tcl.revision-procs.cr_write_content.write_file_content {
          select :path || content
          from cr_revisions
          where revision_id = :revision_id
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-content-repository/tcl/revision-procs-postgresql.xql}
dbqd.acs-content-repository.tcl.revision-procs.cr_write_content.write_lob_content {dbqd.acs-content-repository.tcl.revision-procs.cr_write_content.write_lob_content {
          select lob as content
          from cr_revisions
          where revision_id = :revision_id
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-content-repository/tcl/revision-procs-postgresql.xql}
dbqd.acs-content-repository.tcl.revision-procs.cr_import_content.mime_type_register {dbqd.acs-content-repository.tcl.revision-procs.cr_import_content.mime_type_register {
          select content_type__register_mime_type('content_revision', :mime_type)
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-content-repository/tcl/revision-procs-postgresql.xql}
dbqd.acs-content-repository.tcl.revision-procs.cr_import_content.image_subclass {dbqd.acs-content-repository.tcl.revision-procs.cr_import_content.image_subclass {
         select content_item__is_subclass(:image_type, 'image')
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-content-repository/tcl/revision-procs-postgresql.xql}
dbqd.acs-content-repository.tcl.revision-procs.cr_import_content.content_revision_subclass {dbqd.acs-content-repository.tcl.revision-procs.cr_import_content.content_revision_subclass {
         select content_item__is_subclass(:other_type, 'content_revision')
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-content-repository/tcl/revision-procs-postgresql.xql}
dbqd.acs-content-repository.tcl.revision-procs.cr_import_content.image_new {dbqd.acs-content-repository.tcl.revision-procs.cr_import_content.image_new {
         select image__new(
            /* name          => */ :object_name,
            /* parent_id     => */ :parent_id,
            /* item_id       => */ :item_id,
            /* revision_id   => */ :revision_id,
            /* mime_type     => */ :mime_type,
            /* creation_user => */ :creation_user,
            /* creation_ip   => */ :creation_ip,
            /* title         => */ :title,
            /* description   => */ :description,
            /* storage_type  => */ :storage_type,
            /* content_type  => */ :image_type,
            /* nls_language  => */ null,
            /* publish_date  => */ current_timestamp,
            /* height        => */ :original_height,
            /* width         => */ :original_width
         );
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-content-repository/tcl/revision-procs-postgresql.xql}
dbqd.acs-content-repository.tcl.revision-procs.cr_import_content.image_revision_new {dbqd.acs-content-repository.tcl.revision-procs.cr_import_content.image_revision_new {
         select image__new_revision (
            /* item_id       => */ :item_id,
            /* revision_id   => */ :revision_id,
            /* title         => */ :title,
            /* description   => */ :description,
            /* publish_date  => */ current_timestamp,
            /* mime_type     => */ :mime_type,
            /* nls_language  => */ null,
            /* creation_user => */ :creation_user,
            /* creation_ip   => */ :creation_ip,
            /* height        => */ :original_height,
            /* width         => */ :original_width
    );
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-content-repository/tcl/revision-procs-postgresql.xql}
dbqd.acs-content-repository.tcl.revision-procs.cr_import_content.content_item_new {dbqd.acs-content-repository.tcl.revision-procs.cr_import_content.content_item_new {
         select content_item__new (
            /* name          => */ varchar :object_name,
            /* parent_id     => */ :parent_id,
            /* item_id       => */ :item_id,
            /* new_locale    => */ null,
            /* creation_date => */ current_timestamp,
            /* creation_user => */ :creation_user,
            /* context_id    => */ :parent_id,
            /* creation_ip   => */ :creation_ip,
            /* item_subtype  => */ 'content_item',
            /* content_type  => */ :other_type,
            /* title         => */ null,
            /* description   => */ null,
            /* mime_type     => */ null,
            /* nls_language  => */ null,
            /* text          => */ null,
            /* storage_type  => */ :storage_type
    );
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-content-repository/tcl/revision-procs-postgresql.xql}
dbqd.acs-content-repository.tcl.revision-procs.cr_import_content.content_revision_new {dbqd.acs-content-repository.tcl.revision-procs.cr_import_content.content_revision_new {
         select content_revision__new (
            /* title         => */ :title,
            /* description   => */ :description,
            /* publish_date  => */ current_timestamp,
            /* mime_type     => */ :mime_type,
            /* nls_language  => */ null,
            /* data          => */ null,
            /* item_id       => */ :item_id,
            /* revision_id   => */ :revision_id,
            /* creation_date => */ current_timestamp,
            /* creation_user => */ :creation_user,
            /* creation_ip   => */ :creation_ip
    );
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-content-repository/tcl/revision-procs-postgresql.xql}
dbqd.acs-content-repository.tcl.revision-procs.cr_import_content.set_lob_content {dbqd.acs-content-repository.tcl.revision-procs.cr_import_content.set_lob_content {

	update cr_revisions
	set mime_type = :mime_type,
 	   lob = [set __lob_id [db_string get_lob_id "select empty_lob()"]]
	where revision_id = :revision_id
	   
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-content-repository/tcl/revision-procs-postgresql.xql}
dbqd.acs-content-repository.tcl.revision-procs.cr_import_content.set_lob_size {dbqd.acs-content-repository.tcl.revision-procs.cr_import_content.set_lob_size {

         update cr_revisions
         set content_length = lob_length(lob)
         where revision_id = :revision_id

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-content-repository/tcl/revision-procs-postgresql.xql}
dbqd.acs-content-repository.tcl.revision-procs.cr_set_imported_content_live.set_live {dbqd.acs-content-repository.tcl.revision-procs.cr_set_imported_content_live.set_live {
          select content_item__set_live_revision(:revision_id)
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-content-repository/tcl/revision-procs-postgresql.xql}
dbqd.acs-content-repository.tcl.revision-procs.cr_import_content.set_file_content {dbqd.acs-content-repository.tcl.revision-procs.cr_import_content.set_file_content {
          update cr_revisions
          set content = :filename,
              mime_type = :mime_type,
              content_length = :tmp_size
          where revision_id = :revision_id
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-content-repository/tcl/revision-procs-postgresql.xql}
dbqd.acs-content-repository.tcl.revision-procs.cr_write_content.get_revision_info {dbqd.acs-content-repository.tcl.revision-procs.cr_write_content.get_revision_info {
          select i.storage_type, i.storage_area_key, r.mime_type, i.item_id
          from cr_items i, cr_revisions r
          where r.revision_id = :revision_id and i.item_id = r.item_id
      } {} {} {} c:/web/openacs/packages/acs-content-repository/tcl/revision-procs.xql}
dbqd.acs-content-repository.tcl.revision-procs.cr_write_content.write_text_content {dbqd.acs-content-repository.tcl.revision-procs.cr_write_content.write_text_content {
          select content
          from cr_revisions
          where revision_id = :revision_id
      } {} {} {} c:/web/openacs/packages/acs-content-repository/tcl/revision-procs.xql}
dbqd.acs-content-repository.tcl.revision-procs.cr_import_content.mime_type_insert {dbqd.acs-content-repository.tcl.revision-procs.cr_import_content.mime_type_insert {
            insert into cr_mime_types (mime_type) 
    	    select :mime_type
    	    from dual
    	    where not exists (select 1 from cr_mime_types where mime_type = :mime_type)
      } {} {} {} c:/web/openacs/packages/acs-content-repository/tcl/revision-procs.xql}
dbqd.acs-content-repository.tcl.revision-procs.cr_registered_type_for_mime_type.registered_type_for_mime_type {dbqd.acs-content-repository.tcl.revision-procs.cr_registered_type_for_mime_type.registered_type_for_mime_type {
          select content_type
          from cr_content_mime_type_map
          where mime_type = :mime_type
      } {} {} {} c:/web/openacs/packages/acs-content-repository/tcl/revision-procs.xql}
dbqd.acs-content-repository.www.index-oracle.content_root {dbqd.acs-content-repository.www.index-oracle.content_root {
      
      select content_item.get_root_folder from dual

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-content-repository/www/index-oracle.xql}
dbqd.acs-content-repository.www.index-oracle.template_root {dbqd.acs-content-repository.www.index-oracle.template_root {

      select content_template.get_root_folder from dual

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-content-repository/www/index-oracle.xql}
dbqd.acs-content-repository.www.index.content_root {dbqd.acs-content-repository.www.index.content_root {
      
      select content_item__get_root_folder(null)

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-content-repository/www/index-postgresql.xql}
dbqd.acs-content-repository.www.index.template_root {dbqd.acs-content-repository.www.index.template_root {

      select content_template__get_root_folder()

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-content-repository/www/index-postgresql.xql}
dbqd.acs-content-repository.www.index.get_name {dbqd.acs-content-repository.www.index.get_name {
      
  select 
    first_names || ' ' || last_name 
  from 
    persons 
  where 
    person_id = :user_id

      } {} {} {} c:/web/openacs/packages/acs-content-repository/www/index.xql}
dbqd.acs-lang.tcl.lang-audit-procs-oracle.lang::audit::changed_message.lang_message_audit {dbqd.acs-lang.tcl.lang-audit-procs-oracle.lang::audit::changed_message.lang_message_audit {
          insert into lang_messages_audit (package_key, message_key, locale, old_message, comment_text, overwrite_user) 
            values (:package_key, :message_key, :locale, empty_clob(), empty_clob(), :overwrite_user) 
          returning old_message, comment_text into :1, :2
    } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-lang/tcl/lang-audit-procs-oracle.xql}
dbqd.acs-lang.tcl.lang-audit-procs.lang::audit::changed_message.lang_message_audit {dbqd.acs-lang.tcl.lang-audit-procs.lang::audit::changed_message.lang_message_audit {
          insert into lang_messages_audit (package_key, message_key, locale, old_message, comment_text, overwrite_user) 
            values (:package_key, :message_key, :locale, :old_message, :comment, :overwrite_user) 
    } {} {} {postgresql 7.2} c:/web/openacs/packages/acs-lang/tcl/lang-audit-procs-postgresql.xql}
dbqd.acs-lang.tcl.lang-catalog-procs-oracle.lang::catalog::system_package_version_name.get_version_name {dbqd.acs-lang.tcl.lang-catalog-procs-oracle.lang::catalog::system_package_version_name.get_version_name {
           select version_name
           from apm_package_version_info
           where version_id = apm_package.highest_version(:package_key)
    } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-lang/tcl/lang-catalog-procs-oracle.xql}
dbqd.acs-lang.tcl.lang-catalog-procs.lang::catalog::system_package_version_name.get_version_name {dbqd.acs-lang.tcl.lang-catalog-procs.lang::catalog::system_package_version_name.get_version_name {
           select version_name
           from apm_package_version_info
           where version_id = apm_package__highest_version(:package_key)
    } {} {} {postgresql 7.2} c:/web/openacs/packages/acs-lang/tcl/lang-catalog-procs-postgresql.xql}
dbqd.acs-lang.tcl.lang-catalog-procs.lang::catalog::import.select_uninitialized {dbqd.acs-lang.tcl.lang-catalog-procs.lang::catalog::import.select_uninitialized {
      select package_key
      from   apm_package_types
      where  exists (select 1 
                     from   apm_package_versions
                     where  package_key = apm_package_types.package_key
                        and installed_p = 't'
                        and enabled_p = 't')
       and not exists (select 1
                       from lang_message_keys
                       where package_key = apm_package_types.package_key)
    } {} {} {} c:/web/openacs/packages/acs-lang/tcl/lang-catalog-procs.xql}
dbqd.acs-lang.tcl.lang-catalog-procs.lang::catalog::export.get_locales_for_package {dbqd.acs-lang.tcl.lang-catalog-procs.lang::catalog::export.get_locales_for_package {
        select distinct locale
        from lang_messages
        where package_key = :package_key
    } {} {} {} c:/web/openacs/packages/acs-lang/tcl/lang-catalog-procs.xql}
dbqd.acs-lang.tcl.lang-catalog-procs.lang::catalog::all_messages_for_package_and_locale.get_messages {dbqd.acs-lang.tcl.lang-catalog-procs.lang::catalog::all_messages_for_package_and_locale.get_messages {
        select lm.message_key, 
               lm.message, 
               lmk.description
        from   lang_messages lm,
               lang_message_keys lmk
        where  lm.message_key = lmk.message_key
        and    lm.package_key = lmk.package_key
        and    lm.package_key = :package_key
        and    lm.locale = :locale
        and    lmk.upgrade_status != 'deleted'
    } {} {} {} c:/web/openacs/packages/acs-lang/tcl/lang-catalog-procs.xql}
dbqd.acs-lang.tcl.lang-catalog-procs.lang::catalog::translate.get_untranslated_messages {dbqd.acs-lang.tcl.lang-catalog-procs.lang::catalog::translate.get_untranslated_messages {
      select message_key,
             package_key,
             message 
      from   lang_messages lm1 
      where  locale = :default_locale
      and    not exists (select message_key, package_key
                         from   lang_messages lm2 
                         where  locale != :default_locale
                         and    lm1.message_key = lm2.message_key
                         and    lm1.package_key = lm2.package_key)
    } {} {} {} c:/web/openacs/packages/acs-lang/tcl/lang-catalog-procs.xql}
dbqd.acs-lang.tcl.lang-catalog-procs.lang::catalog::reset_upgrade_status_message_keys.reset_status {dbqd.acs-lang.tcl.lang-catalog-procs.lang::catalog::reset_upgrade_status_message_keys.reset_status {
        update lang_message_keys
              set upgrade_status = 'no_upgrade'
              where package_key = :package_key
    } {} {} {} c:/web/openacs/packages/acs-lang/tcl/lang-catalog-procs.xql}
dbqd.acs-lang.tcl.lang-catalog-procs.lang::catalog::import_from_file.reset_upgrade_status_messages {dbqd.acs-lang.tcl.lang-catalog-procs.lang::catalog::import_from_file.reset_upgrade_status_messages {
        update lang_messages
                set upgrade_status = 'no_upgrade'
                where package_key = :package_key
                  and locale = :locale      
    } {} {} {} c:/web/openacs/packages/acs-lang/tcl/lang-catalog-procs.xql}
dbqd.acs-lang.tcl.lang-catalog-procs.lang::catalog::import_from_file.mark_message_as_deleted {dbqd.acs-lang.tcl.lang-catalog-procs.lang::catalog::import_from_file.mark_message_as_deleted {
        update lang_messages
           set upgrade_status = 'deleted'
           where package_key = :package_key
             and message_key = :message_key
             and locale = :locale
    } {} {} {} c:/web/openacs/packages/acs-lang/tcl/lang-catalog-procs.xql}
dbqd.acs-lang.tcl.lang-catalog-procs.lang::catalog::import_from_file.mark_message_key_as_deleted {dbqd.acs-lang.tcl.lang-catalog-procs.lang::catalog::import_from_file.mark_message_key_as_deleted {
        update lang_message_keys
           set upgrade_status = 'deleted'
           where package_key = :package_key
             and message_key = :message_key
    } {} {} {} c:/web/openacs/packages/acs-lang/tcl/lang-catalog-procs.xql}
dbqd.acs-lang.tcl.lang-message-procs-oracle.lang::message::register.lang_message_update {dbqd.acs-lang.tcl.lang-message-procs-oracle.lang::message::register.lang_message_update {
      update lang_messages
      set    message = empty_clob(),
             upgrade_status = :message_upgrade_status
      where  locale = :locale 
      and    message_key = :message_key
      and    package_key = :package_key
      returning message into :1
    } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-lang/tcl/lang-message-procs-oracle.xql}
dbqd.acs-lang.tcl.lang-message-procs-oracle.lang::message::register.lang_message_insert {dbqd.acs-lang.tcl.lang-message-procs-oracle.lang::message::register.lang_message_insert {
      insert into lang_messages (package_key, message_key, locale, message, upgrade_status, creation_user) 
      values (:package_key, :message_key, :locale, empty_clob(), :message_upgrade_status, :creation_user) 
      returning message into :1
    } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-lang/tcl/lang-message-procs-oracle.xql}
dbqd.acs-lang.tcl.lang-message-procs-oracle.lang::message::update_description.update_description {dbqd.acs-lang.tcl.lang-message-procs-oracle.lang::message::update_description.update_description {
      update lang_message_keys
      set    description = empty_clob()
      where  message_key = :message_key
      and    package_key = :package_key
      returning description into :1
    } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-lang/tcl/lang-message-procs-oracle.xql}
dbqd.acs-lang.tcl.lang-message-procs.lang::message::register.lang_message_insert {dbqd.acs-lang.tcl.lang-message-procs.lang::message::register.lang_message_insert {
      insert into lang_messages (package_key, message_key, locale, message, upgrade_status, creation_user) 
      values (:package_key, :message_key, :locale, :message, :message_upgrade_status, :creation_user) 
    } {} {} {postgresql 7.2} c:/web/openacs/packages/acs-lang/tcl/lang-message-procs-postgresql.xql}
dbqd.acs-lang.tcl.lang-message-procs.lang::message::register.lang_message_update {dbqd.acs-lang.tcl.lang-message-procs.lang::message::register.lang_message_update {
       update lang_messages
       set    message = :message,
              upgrade_status = :message_upgrade_status
       where  locale = :locale
       and    message_key = :message_key
       and    package_key = :package_key
     } {} {} {postgresql 7.2} c:/web/openacs/packages/acs-lang/tcl/lang-message-procs-postgresql.xql}
dbqd.acs-lang.tcl.lang-message-procs.lang::message::update_description.update_description {dbqd.acs-lang.tcl.lang-message-procs.lang::message::update_description.update_description {
      update lang_message_keys
      set    description = :description
      where  message_key = :message_key
      and    package_key = :package_key
    } {} {} {postgresql 7.2} c:/web/openacs/packages/acs-lang/tcl/lang-message-procs-postgresql.xql}
dbqd.acs-lang.tcl.lang-message-procs.lang::message::register.message_key_exists_p {dbqd.acs-lang.tcl.lang-message-procs.lang::message::register.message_key_exists_p {
       select count(*) 
       from lang_message_keys
       where package_key = :package_key
         and message_key = :message_key  
    } {} {} {} c:/web/openacs/packages/acs-lang/tcl/lang-message-procs.xql}
dbqd.acs-lang.tcl.lang-message-procs.lang::message::register.message_exists_p {dbqd.acs-lang.tcl.lang-message-procs.lang::message::register.message_exists_p {
       select count(*) 
       from lang_messages
       where package_key = :package_key
         and message_key = :message_key  
    } {} {} {} c:/web/openacs/packages/acs-lang/tcl/lang-message-procs.xql}
dbqd.acs-lang.tcl.lang-message-procs.lang::message::register.insert_message_key {dbqd.acs-lang.tcl.lang-message-procs.lang::message::register.insert_message_key { 
        insert into lang_message_keys
            (message_key, package_key, upgrade_status)
          values
            (:message_key, :package_key, :key_upgrade_status)
    } {} {} {} c:/web/openacs/packages/acs-lang/tcl/lang-message-procs.xql}
dbqd.acs-lang.tcl.lang-message-procs.lang::message::register.lang_message_null_update {dbqd.acs-lang.tcl.lang-message-procs.lang::message::register.lang_message_null_update {
      update lang_messages 
      set    message = null,
             upgrade_status = :message_upgrade_status
      where  locale = :locale 
      and    package_key = :package_key
      and    message_key = :message_key
    } {} {} {} c:/web/openacs/packages/acs-lang/tcl/lang-message-procs.xql}
dbqd.acs-lang.tcl.lang-message-procs.lang::message::cache.select_locale_keys {dbqd.acs-lang.tcl.lang-message-procs.lang::message::cache.select_locale_keys {
      select locale, package_key, message_key, message 
      from   lang_messages
      $package_where_clause
    } {} {} {} c:/web/openacs/packages/acs-lang/tcl/lang-message-procs.xql}
dbqd.acs-lang.tcl.lang-message-procs.lang::message::register.lang_message_insert_null_msg {dbqd.acs-lang.tcl.lang-message-procs.lang::message::register.lang_message_insert_null_msg {
      insert into lang_messages (package_key, message_key, locale, message, upgrade_status) 
      values (:package_key, :message_key, :locale, null, :message_upgrade_status) 
    } {} {} {} c:/web/openacs/packages/acs-lang/tcl/lang-message-procs.xql}
dbqd.acs-lang.tcl.lang-message-procs.lang::message::update_description.update_description_insert_null {dbqd.acs-lang.tcl.lang-message-procs.lang::message::update_description.update_description_insert_null {
      update lang_message_keys
      set    description = null
      where  message_key = :message_key
      and    package_key = :package_key
    } {} {} {} c:/web/openacs/packages/acs-lang/tcl/lang-message-procs.xql}
dbqd.acs-lang.tcl.lang-util-procs-oracle.lang::util::nls_language_from_language.nls_language_from_language {dbqd.acs-lang.tcl.lang-util-procs-oracle.lang::util::nls_language_from_language.nls_language_from_language {
      
        select nls_language
        from   ad_locales 
        where  language = :language
        and    rownum = 1
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-lang/tcl/lang-util-procs-oracle.xql}
dbqd.acs-lang.tcl.lang-util-procs.lang::util::nls_language_from_language.nls_language_from_language {dbqd.acs-lang.tcl.lang-util-procs.lang::util::nls_language_from_language.nls_language_from_language {
      
        select nls_language
        from   ad_locales 
        where  language = :language
        limit  1
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-lang/tcl/lang-util-procs-postgresql.xql}
dbqd.acs-lang.tcl.lang-util-procs.lang::util::charset_for_locale.charset_for_locale {dbqd.acs-lang.tcl.lang-util-procs.lang::util::charset_for_locale.charset_for_locale {
      
        select mime_charset
        from   ad_locales 
        where  locale = :locale
    
      } {} {} {} c:/web/openacs/packages/acs-lang/tcl/lang-util-procs.xql}
dbqd.acs-lang.tcl.lang-util-procs.lang::util::default_locale_from_lang_not_cached.default_locale_from_lang {dbqd.acs-lang.tcl.lang-util-procs.lang::util::default_locale_from_lang_not_cached.default_locale_from_lang {
        select locale
        from   ad_locales
        where  language = '[db_quote $language]'
        and    enabled_p = 't'
        and    (default_p = 't' or
                (select count(*)
                from ad_locales
                where language = '[db_quote $language]') = 1
                    )
      } {} {} {} c:/web/openacs/packages/acs-lang/tcl/lang-util-procs.xql}
dbqd.acs-lang.tcl.locale-procs-oracle.lang::system::timezone_utc_offset.system_utc_offset {dbqd.acs-lang.tcl.locale-procs-oracle.lang::system::timezone_utc_offset.system_utc_offset {
      
	select ( (sysdate - timezone.local_to_utc (timezone.get_id(:system_timezone), sysdate)) * 24 ) from dual
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-lang/tcl/locale-procs-oracle.xql}
dbqd.acs-lang.tcl.locale-procs.lang::system::timezone_utc_offset.system_utc_offset {dbqd.acs-lang.tcl.locale-procs.lang::system::timezone_utc_offset.system_utc_offset {
      
        select (extract(epoch from current_timestamp
                          + timezone__get_offset (timezone__get_id(:system_timezone), current_timestamp)
                         )
                - extract(epoch from current_timestamp)
               ) / 60/60;
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-lang/tcl/locale-procs-postgresql.xql}
dbqd.acs-lang.tcl.locale-procs.lang::system::package_level_locale_not_cached.get_system_locale {dbqd.acs-lang.tcl.locale-procs.lang::system::package_level_locale_not_cached.get_system_locale {
        select default_locale
        from   apm_packages
        where  package_id = :package_id
      } {} {} {} c:/web/openacs/packages/acs-lang/tcl/locale-procs.xql}
dbqd.acs-lang.tcl.locale-procs.lang::system::set_locale.update_system_locale {dbqd.acs-lang.tcl.locale-procs.lang::system::set_locale.update_system_locale {
        update apm_packages
        set    default_locale = :locale 
        where  package_id = :package_id
      } {} {} {} c:/web/openacs/packages/acs-lang/tcl/locale-procs.xql}
dbqd.acs-lang.tcl.locale-procs.lang::user::package_level_locale_not_cached.get_user_locale {dbqd.acs-lang.tcl.locale-procs.lang::user::package_level_locale_not_cached.get_user_locale {
        select locale
        from   ad_locale_user_prefs
        where  user_id = :user_id
        and    package_id = :package_id
      } {} {} {} c:/web/openacs/packages/acs-lang/tcl/locale-procs.xql}
dbqd.acs-lang.tcl.locale-procs.lang::user::site_wide_locale_not_cached.get_user_site_wide_locale {dbqd.acs-lang.tcl.locale-procs.lang::user::site_wide_locale_not_cached.get_user_site_wide_locale {
        select locale
        from   user_preferences
        where  user_id = :user_id
      } {} {} {} c:/web/openacs/packages/acs-lang/tcl/locale-procs.xql}
dbqd.acs-lang.tcl.locale-procs.lang::user::set_locale.set_user_site_wide_locale {dbqd.acs-lang.tcl.locale-procs.lang::user::set_locale.set_user_site_wide_locale {
        update user_preferences
        set    locale = :locale
        where  user_id = :user_id
      } {} {} {} c:/web/openacs/packages/acs-lang/tcl/locale-procs.xql}
dbqd.acs-lang.tcl.locale-procs.lang::user::set_locale.user_locale_exists_p {dbqd.acs-lang.tcl.locale-procs.lang::user::set_locale.user_locale_exists_p {
        select count(*) 
        from   ad_locale_user_prefs 
        where  user_id = :user_id
        and    package_id = :package_id
      } {} {} {} c:/web/openacs/packages/acs-lang/tcl/locale-procs.xql}
dbqd.acs-lang.tcl.locale-procs.lang::user::set_locale.update_user_locale {dbqd.acs-lang.tcl.locale-procs.lang::user::set_locale.update_user_locale {
        update ad_locale_user_prefs 
        set    locale = :locale 
        where  user_id = :user_id 
        and    package_id = :package_id
      } {} {} {} c:/web/openacs/packages/acs-lang/tcl/locale-procs.xql}
dbqd.acs-lang.tcl.locale-procs.lang::user::set_locale.insert_user_locale {dbqd.acs-lang.tcl.locale-procs.lang::user::set_locale.insert_user_locale {
         insert into ad_locale_user_prefs (user_id, package_id, locale) 
        values (:user_id, :package_id, :locale)
      } {} {} {} c:/web/openacs/packages/acs-lang/tcl/locale-procs.xql}
dbqd.acs-lang.tcl.locale-procs.lang::user::set_locale.delete_user_locale {dbqd.acs-lang.tcl.locale-procs.lang::user::set_locale.delete_user_locale {
        delete 
        from   ad_locale_user_prefs 
        where  user_id = :user_id 
        and    package_id = :package_id
      } {} {} {} c:/web/openacs/packages/acs-lang/tcl/locale-procs.xql}
dbqd.acs-lang.tcl.locale-procs.lang::user::set_timezone.set_user_timezone {dbqd.acs-lang.tcl.locale-procs.lang::user::set_timezone.set_user_timezone {
        update user_preferences
        set    timezone = :timezone
        where  user_id = :user_id
      } {} {} {} c:/web/openacs/packages/acs-lang/tcl/locale-procs.xql}
dbqd.acs-lang.tcl.locale-procs.lang::user::timezone_no_cache.select_user_timezone {dbqd.acs-lang.tcl.locale-procs.lang::user::timezone_no_cache.select_user_timezone {
        select timezone
        from   user_preferences
        where  user_id = :user_id
      } {} {} {} c:/web/openacs/packages/acs-lang/tcl/locale-procs.xql}
dbqd.acs-lang.tcl.localization-procs-oracle.lc_time_utc_to_local.utc_to_local {dbqd.acs-lang.tcl.localization-procs-oracle.lc_time_utc_to_local.utc_to_local {
      
	    begin
	    :1 := to_char(timezone.utc_to_local(timezone.get_id(:tz), to_date(:time_value, 'YYYY-MM-DD HH24:MI:SS')), 'YYYY-MM-DD HH24:MI:SS');
	    end;
	
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-lang/tcl/localization-procs-oracle.xql}
dbqd.acs-lang.tcl.localization-procs-oracle.lc_time_local_to_utc.local_to_utc {dbqd.acs-lang.tcl.localization-procs-oracle.lc_time_local_to_utc.local_to_utc {
      
	    begin
	    :1 := to_char(timezone.local_to_utc(timezone.get_id(:tz), to_date(:time_value, 'YYYY-MM-DD HH24:MI:SS')), 'YYYY-MM-DD HH24:MI:SS');
	    end;
	
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-lang/tcl/localization-procs-oracle.xql}
dbqd.acs-lang.tcl.localization-procs-oracle.lc_time_tz_convert.convert {dbqd.acs-lang.tcl.localization-procs-oracle.lc_time_tz_convert.convert {
      
        begin
            :1 := to_char(
                          timezone.utc_to_local(timezone.get_id(:to), 
                                                timezone.local_to_utc(timezone.get_id(:from), to_date(:time_value, 'YYYY-MM-DD HH24:MI:SS'))
                                                ), 'YYYY-MM-DD HH24:MI:SS');
        end;
	
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-lang/tcl/localization-procs-oracle.xql}
dbqd.acs-lang.tcl.localization-procs.lc_time_utc_to_local.utc_to_local {dbqd.acs-lang.tcl.localization-procs.lc_time_utc_to_local.utc_to_local {

	    select to_char(timezone__convert_to_local(timezone__get_id(:tz), :time_value), 'YYYY-MM-DD HH24:MI:SS')
	
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-lang/tcl/localization-procs-postgresql.xql}
dbqd.acs-lang.tcl.localization-procs.lc_time_local_to_utc.local_to_utc {dbqd.acs-lang.tcl.localization-procs.lc_time_local_to_utc.local_to_utc {

	    select  to_char(timezone__convert_to_utc(timezone__get_id(:tz), :time_value), 'YYYY-MM-DD HH24:MI:SS')
	
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-lang/tcl/localization-procs-postgresql.xql}
dbqd.acs-lang.tcl.localization-procs.lc_time_tz_convert.convert {dbqd.acs-lang.tcl.localization-procs.lc_time_tz_convert.convert {
      

           select to_char(     
                          timezone__convert_to_local(timezone__get_id(:to), 
                                                to_char(timezone__convert_to_utc(timezone__get_id(:from), :time_value), 'YYYY-MM-DD HH24:MI:SS')
                                                ), 'YYYY-MM-DD HH24:MI:SS')
	
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-lang/tcl/localization-procs-postgresql.xql}
dbqd.acs-lang.tcl.localization-procs.lc_monetary_currency.lc_currency_select {dbqd.acs-lang.tcl.localization-procs.lc_monetary_currency.lc_currency_select {
      
	select fractional_digits,
               html_entity 
        from   currency_codes 
        where  iso = :currency
    
      } {} {} {} c:/web/openacs/packages/acs-lang/tcl/localization-procs.xql}
dbqd.acs-lang.tcl.localization-procs.lc_list_all_timezones.all_timezones {dbqd.acs-lang.tcl.localization-procs.lc_list_all_timezones.all_timezones {
      select distinct tz, gmt_offset from timezones order by tz
      } {} {} {} c:/web/openacs/packages/acs-lang/tcl/localization-procs.xql}
dbqd.acs-lang.www.admin.batch-editor-oracle.get_messages {dbqd.acs-lang.www.admin.batch-editor-oracle.get_messages {

    select q2.*
    from   (select rownum as inner_rownum, q.* 
            from   (select lm1.message_key,
                           lm1.package_key,
                           lm1.message as default_message,
                           lm2.message as translated_message,
                           lmk.description
                    from   lang_messages lm1,
                           lang_messages lm2,
                           lang_message_keys lmk
                    where  lm1.locale = :default_locale
                    and    lm2.locale (+) = :locale 
                    and    lm2.message_key (+) = lm1.message_key
                    and    lm2.package_key (+) = lm1.package_key
                    and    lm1.message_key = lmk.message_key
                    and    lm1.package_key = lmk.package_key
                    and    lm1.package_key = :package_key
                    $where_clause
                    order  by upper(lm1.message_key), lm1.message_key
                   ) q
            ) q2
    where  inner_rownum between :page_start + 1 and :page_start + 10
    order  by inner_rownum

    } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-lang/www/admin/batch-editor-oracle.xql}
dbqd.acs-lang.www.admin.batch-editor.get_messages {dbqd.acs-lang.www.admin.batch-editor.get_messages {

    select lm1.message_key,
           lm1.package_key,
           lm1.message as default_message,
           lm2.message as translated_message,
           lmk.description
    from   lang_messages lm1 left outer join 
           lang_messages lm2 on (lm2.locale = :locale and lm2.message_key = lm1.message_key and lm2.package_key = lm1.package_key),
           lang_message_keys lmk
    where  lm1.locale = :default_locale
    and    lm1.package_key = :package_key
    and    lm1.message_key = lmk.message_key
    and    lm1.package_key = lmk.package_key
    $where_clause
    order  by upper(lm1.message_key), lm1.message_key
    offset $page_start
    limit  10

    } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-lang/www/admin/batch-editor-postgresql.xql}
dbqd.acs-lang.www.admin.edit-description.select_description {dbqd.acs-lang.www.admin.edit-description.select_description {
        select lmk.description,
               (select lm.message as message
                from   lang_messages lm
                where    lm.package_key= :package_key
                and    lm.message_key = :message_key
                and    locale = :default_locale) as org_message
        from   lang_message_keys lmk
        where  lmk.package_key = :package_key 
        and    lmk.message_key = :message_key
    } {} {} {} c:/web/openacs/packages/acs-lang/www/admin/edit-description.xql}
dbqd.acs-lang.www.admin.message-list-oracle.select_messages {dbqd.acs-lang.www.admin.message-list-oracle.select_messages {

    select lmk.message_key,
           lm1.message as default_message,
           lm2.message as translated_message,
           lmk.description
    from   lang_messages lm1,
           lang_messages lm2,
           lang_message_keys lmk
    where  lmk.package_key = :package_key
    and    lm1.locale = :default_locale
    and    lm1.message_key = lmk.message_key
    and    lm1.package_key = lmk.package_key
    and    lm2.locale (+) = :locale
    and    lm2.message_key (+) = lmk.message_key
    and    lm2.package_key (+) = lmk.package_key
    $where_clause
    order  by upper(lm1.message_key), lm1.message_key

    } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-lang/www/admin/message-list-oracle.xql}
dbqd.acs-lang.www.admin.message-list.select_messages {dbqd.acs-lang.www.admin.message-list.select_messages {

    select lm1.message_key,
           lm1.message as default_message,
           lm2.message as translated_message,
           lmk.description
    from   lang_messages lm1 left outer join 
           lang_messages lm2 on (lm2.locale = :locale and lm2.message_key = lm1.message_key and lm2.package_key = lm1.package_key),
           lang_message_keys lmk
    where  lm1.locale = :default_locale
    and    lm1.package_key = :package_key
    and    lm1.message_key = lmk.message_key
    and    lm1.package_key = lmk.package_key
    $where_clause
    order  by upper(lm1.message_key), lm1.message_key


    } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-lang/www/admin/message-list-postgresql.xql}
dbqd.acs-lang.www.admin.message-search-oracle.select_messages {dbqd.acs-lang.www.admin.message-search-oracle.select_messages {

        select lm1.message_key,
               lm1.package_key,
               lm1.message as default_message,
               lm2.message as translated_message
        from   lang_messages lm1,
               lang_messages lm2
        where  lm1.locale = :default_locale
        and    lm2.locale (+) = :locale
        and    lm2.message_key (+) = lm1.message_key
        and    lm2.package_key (+) = lm1.package_key
        and    exists (select 1
                       from   lang_messages lm3
                       where  lm3.locale = :search_locale
                       and    lm3.message_key = lm1.message_key
                       and    lm3.package_key = lm1.package_key
                       and    upper(dbms_lob.substr(lm3.message)) like upper(:search_string))
        order by upper(lm1.message_key)

    } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-lang/www/admin/message-search-oracle.xql}
dbqd.acs-lang.www.admin.message-search.select_messages {dbqd.acs-lang.www.admin.message-search.select_messages {

        select lm1.message_key,
               lm1.package_key,
               lm1.message as default_message,
               coalesce(lm2.message, 'TRANSLATION MISSING') as translated_message
        from   lang_messages lm1 left outer join 
               lang_messages lm2 on (lm2.locale = :locale and lm2.message_key = lm1.message_key and lm2.package_key = lm1.package_key)
        where  lm1.locale = :default_locale
        and    exists (select 1
                       from   lang_messages lm3
                       where  lm3.locale = :search_locale
                       and    lm3.message_key = lm1.message_key
                       and    lm3.package_key = lm1.package_key
                       and    lm3.message ilike :search_string)
        order by upper(lm1.message_key)

    } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-lang/www/admin/message-search-postgresql.xql}
dbqd.acs-lang.www.admin.set-system-timezone-oracle.sysdate {dbqd.acs-lang.www.admin.set-system-timezone-oracle.sysdate {
      select to_char(sysdate, 'YYYY-MM-DD HH24:MI:SS') from dual 
    } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-lang/www/admin/set-system-timezone-oracle.xql}
dbqd.acs-lang.www.admin.set-system-timezone-oracle.sysdate_utc {dbqd.acs-lang.www.admin.set-system-timezone-oracle.sysdate_utc {
      select to_char(timezone.local_to_utc(timezone.get_id(:system_timezone), sysdate), 'YYYY-MM-DD HH24:MI:SS') from dual
    } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-lang/www/admin/set-system-timezone-oracle.xql}
dbqd.acs-lang.www.admin.set-system-timezone.sysdate {dbqd.acs-lang.www.admin.set-system-timezone.sysdate {
	select to_char(current_timestamp, 'YYYY-MM-DD HH24:MI:SS')
    } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-lang/www/admin/set-system-timezone-postgresql.xql}
dbqd.acs-lang.www.admin.set-system-timezone.sysdate_utc {dbqd.acs-lang.www.admin.set-system-timezone.sysdate_utc {
      select to_char(timezone__convert_to_utc(timezone__get_id(:system_timezone), to_char(current_timestamp, 'YYYY-MM-DD HH24:MI:SS')), 'YYYY-MM-DD HH24:MI:SS')
    } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-lang/www/admin/set-system-timezone-postgresql.xql}
dbqd.acs-lang.www.admin.test.format-test-oracle.lang_system_time_select {dbqd.acs-lang.www.admin.test.format-test-oracle.lang_system_time_select {
      SELECT to_char(sysdate, 'YYYY-MM-DD HH24:MI:SS') AS system_time FROM dual
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-lang/www/admin/test/format-test-oracle.xql}
dbqd.acs-lang.www.admin.test.format-test.lang_system_time_select {dbqd.acs-lang.www.admin.test.format-test.lang_system_time_select {
	SELECT to_char(current_time, 'YYYY-MM-DD HH24:MI:SS') AS system_time
    } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-lang/www/admin/test/format-test-postgresql.xql}
dbqd.acs-lang.www.admin.test.test-oracle.lang_system_time_select {dbqd.acs-lang.www.admin.test.test-oracle.lang_system_time_select {
      SELECT to_char(sysdate, 'YYYY-MM-DD HH24:MI:SS') AS system_time FROM dual
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-lang/www/admin/test/test-oracle.xql}
dbqd.acs-lang.www.admin.test.test.lang_system_time_select {dbqd.acs-lang.www.admin.test.test.lang_system_time_select {
      SELECT to_char(current_time, 'YYYY-MM-DD HH24:MI:SS') AS system_time
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-lang/www/admin/test/test-postgresql.xql}
dbqd.acs-lang.www.admin.test.timezone-oracle.lang_system_time_select {dbqd.acs-lang.www.admin.test.timezone-oracle.lang_system_time_select {
      SELECT to_char(sysdate, 'YYYY-MM-DD HH24:MI:SS') AS system_time FROM dual
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-lang/www/admin/test/timezone-oracle.xql}
dbqd.acs-lang.www.admin.test.timezone.lang_system_time_select {dbqd.acs-lang.www.admin.test.timezone.lang_system_time_select {
	select to_char(current_time, 'YYYY-MM-DD HH24:MI:SS') AS system_time
    } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-lang/www/admin/test/timezone-postgresql.xql}
dbqd.acs-lang.www.change-locale-include.all_timezones {dbqd.acs-lang.www.change-locale-include.all_timezones {
        select tz || ' ' || gmt_offset as tz,
               tz
        from   timezones
    } {} {} {} c:/web/openacs/packages/acs-lang/www/change-locale-include.xql}
dbqd.acs-mail.tcl.acs-mail-procs-oracle.acs_mail_set_content.insert_new_content {dbqd.acs-mail.tcl.acs-mail-procs-oracle.acs_mail_set_content.insert_new_content {

begin
	:1 := content_item.new (
	    name          => 'acs-mail message $body_id',
	    creation_user => :creation_user,
		creation_ip   => :creation_ip,
		title         => :header_subject,
		nls_language  => :nls_language,
		text		  => :content,
		storage_type  => 'lob'
    );
end;
    
} {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-mail/tcl/acs-mail-procs-oracle.xql}
dbqd.acs-mail.tcl.acs-mail-procs-oracle.acs_mail_set_content.get_latest_revision {dbqd.acs-mail.tcl.acs-mail-procs-oracle.acs_mail_set_content.get_latest_revision {
      
begin
  :1 := content_item.get_latest_revision ( :item_id );
end;
    
} {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-mail/tcl/acs-mail-procs-oracle.xql}
dbqd.acs-mail.tcl.acs-mail-procs-oracle.acs_mail_set_content.set_live_revision {dbqd.acs-mail.tcl.acs-mail-procs-oracle.acs_mail_set_content.set_live_revision {

begin
	content_item.set_live_revision(:revision_id);
end;
    
} {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-mail/tcl/acs-mail-procs-oracle.xql}
dbqd.acs-mail.tcl.acs-mail-procs-oracle.acs_mail_set_content_file.insert_new_content {dbqd.acs-mail.tcl.acs-mail-procs-oracle.acs_mail_set_content_file.insert_new_content {
      
begin
	:1 := content_item.new (
		name => 'acs-mail message $body_id',
		creation_user => :creation_user,
		creation_ip   => :creation_ip,
		title		  => :header_subject,
		nls_language  => :nls_language,
		storage_type  => 'file'
    );
end;

} {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-mail/tcl/acs-mail-procs-oracle.xql}
dbqd.acs-mail.tcl.acs-mail-procs-oracle.acs_mail_set_content_file.get_latest_revision {dbqd.acs-mail.tcl.acs-mail-procs-oracle.acs_mail_set_content_file.get_latest_revision {
      
begin
  :1 := content_item.get_latest_revision ( :item_id );
end;"
    
} {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-mail/tcl/acs-mail-procs-oracle.xql}
dbqd.acs-mail.tcl.acs-mail-procs-oracle.acs_mail_set_content_file.set_live_revision {dbqd.acs-mail.tcl.acs-mail-procs-oracle.acs_mail_set_content_file.set_live_revision {

begin
	content_item.set_live_revision(:revision_id);
end;
    
} {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-mail/tcl/acs-mail-procs-oracle.xql}
dbqd.acs-mail.tcl.acs-mail-procs-oracle.acs_mail_set_content_file.update_content {dbqd.acs-mail.tcl.acs-mail-procs-oracle.acs_mail_set_content_file.update_content {
      
update cr_revisions
  set content = empty_blob()
  where revision_id = :revision_id
  returning content into :1
    
} {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-mail/tcl/acs-mail-procs-oracle.xql}
dbqd.acs-mail.tcl.acs-mail-procs-oracle.acs_mail_encode_content.get_latest_revision {dbqd.acs-mail.tcl.acs-mail-procs-oracle.acs_mail_encode_content.get_latest_revision {
      
begin
    :1 := content_item.get_latest_revision ( :content_item_id );
end;
    
} {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-mail/tcl/acs-mail-procs-oracle.xql}
dbqd.acs-mail.tcl.acs-mail-procs-oracle.acs_mail_encode_content.copy_blob_to_file {dbqd.acs-mail.tcl.acs-mail-procs-oracle.acs_mail_encode_content.copy_blob_to_file {
      
select r.content, i.storage_type 
from cr_revisions r, cr_items i 
where r.revision_id = $revision_id and
      r.item_id = i.item_id
        
} {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-mail/tcl/acs-mail-procs-oracle.xql}
dbqd.acs-mail.tcl.acs-mail-procs-oracle.acs_mail_body_new.acs_mail_body_new {dbqd.acs-mail.tcl.acs-mail-procs-oracle.acs_mail_body_new.acs_mail_body_new {
      
begin
    :1 := acs_mail_body.new (
        body_id => :body_id,
        body_reply_to => :body_reply_to,
        body_from => :body_from,
        body_date => :body_date,
        header_message_id => :header_message_id,
        header_reply_to => :header_reply_to,
        header_subject => :header_subject,
        header_from => :header_from,
        header_to => :header_to,
        content_item_id => :content_item_id,
        creation_user => :creation_user,
        creation_ip => :creation_ip
    );
end;
    
} {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-mail/tcl/acs-mail-procs-oracle.xql}
dbqd.acs-mail.tcl.acs-mail-procs-oracle.acs_mail_body_p.acs_mail_body_p {dbqd.acs-mail.tcl.acs-mail-procs-oracle.acs_mail_body_p.acs_mail_body_p {
      
        begin
            :1 := acs_mail_body.body_p (:object_id);
        end;
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-mail/tcl/acs-mail-procs-oracle.xql}
dbqd.acs-mail.tcl.acs-mail-procs-oracle.acs_mail_body_clone.acs_mail_body_clone {dbqd.acs-mail.tcl.acs-mail-procs-oracle.acs_mail_body_clone.acs_mail_body_clone {
      
        begin
            :1 := acs_mail_body.clone (
                old_body_id => :old_body_id,
                body_id => :body_id,
                creation_user => :creation_user,
                creation_ip => :creation_ip
            );
        end;
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-mail/tcl/acs-mail-procs-oracle.xql}
dbqd.acs-mail.tcl.acs-mail-procs-oracle.acs_mail_body_set_content_object.acs_mail_body_set_content_object {dbqd.acs-mail.tcl.acs-mail-procs-oracle.acs_mail_body_set_content_object.acs_mail_body_set_content_object {
      
begin
    acs_mail_body.set_content_object (
        body_id => :body_id,
        content_item_id => :content_item_id
    );
end;
    
} {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-mail/tcl/acs-mail-procs-oracle.xql}
dbqd.acs-mail.tcl.acs-mail-procs-oracle.acs_mail_multipart_new.acs_mail_multipart_new {dbqd.acs-mail.tcl.acs-mail-procs-oracle.acs_mail_multipart_new.acs_mail_multipart_new {
      
        begin
            :1 := acs_mail_multipart.new (
                multipart_id => :multipart_id,
                multipart_kind => :multipart_kind,
                creation_user => :creation_user,
                creation_ip => :creation_ip
            );
        end;
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-mail/tcl/acs-mail-procs-oracle.xql}
dbqd.acs-mail.tcl.acs-mail-procs-oracle.acs_mail_multipart_p.acs_mail_multipart_p {dbqd.acs-mail.tcl.acs-mail-procs-oracle.acs_mail_multipart_p.acs_mail_multipart_p {
      
        begin
            :1 := acs_mail_multipart.multipart_p (:object_id);
        end;
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-mail/tcl/acs-mail-procs-oracle.xql}
dbqd.acs-mail.tcl.acs-mail-procs-oracle.acs_mail_multipart_add_content.acs_mail_multipart_add_content {dbqd.acs-mail.tcl.acs-mail-procs-oracle.acs_mail_multipart_add_content.acs_mail_multipart_add_content {
      
begin
    :1 := acs_mail_multipart.add_content (
        multipart_id => :multipart_id,
        content_item_id => :content_item_id
    );
end;
    
} {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-mail/tcl/acs-mail-procs-oracle.xql}
dbqd.acs-mail.tcl.acs-mail-procs-oracle.acs_mail_link_new.acs_mail_link_new {dbqd.acs-mail.tcl.acs-mail-procs-oracle.acs_mail_link_new.acs_mail_link_new {
      
        begin
            :1 := acs_mail_link.new (
                mail_link_id => :mail_link_id,
                body_id => :body_id,
                context_id => :context_id,
                creation_user => :creation_user,
                creation_ip => :creation_ip
            );
        end;
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-mail/tcl/acs-mail-procs-oracle.xql}
dbqd.acs-mail.tcl.acs-mail-procs-oracle.acs_mail_link_p.acs_mail_link_p {dbqd.acs-mail.tcl.acs-mail-procs-oracle.acs_mail_link_p.acs_mail_link_p {
      
        begin
            :1 := acs_mail_link.link_p (:object_id);
        end;
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-mail/tcl/acs-mail-procs-oracle.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_set_content.insert_new_content {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_set_content.insert_new_content {

select content_item__new(
    'acs-mail message $body_id'::varchar, -- new__name
    null::integer,                     -- new__parent_id
    null::integer,                     -- new__item_id
    null::varchar,                     -- new__locale
    current_timestamp,                    -- new__creation_date
    :creation_user::integer,           -- new__creation_user
    null::integer,                     -- new__context_id
    :creation_ip::varchar,             -- new__creation_ip
    'content_item'::varchar,           -- new__item_subtype
    'content_revision'::varchar,       -- new__content_type
    :header_subject::varchar,          -- new__title
    null::varchar,                     -- new__description
    :content_type,            -- new__mime_type
    :nls_language,            -- new__nls_language
    :content,                 -- new__text
    'text'                    -- new__storage_type
  )
    
} {} {} {postgresql 7.1} c:/web/openacs/packages/acs-mail/tcl/acs-mail-procs-postgresql.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_set_content.get_latest_revision {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_set_content.get_latest_revision {

begin
  return content_item__get_latest_revision ( :item_id );
end;

} {} {} {postgresql 7.1} c:/web/openacs/packages/acs-mail/tcl/acs-mail-procs-postgresql.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_set_content.set_live_revision {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_set_content.set_live_revision {

select content_item__set_live_revision(:revision_id);

} {} {} {postgresql 7.1} c:/web/openacs/packages/acs-mail/tcl/acs-mail-procs-postgresql.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_set_content_file.insert_new_content {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_set_content_file.insert_new_content {

begin
  return content_item__new(
    varchar 'acs-mail message $body_id', -- new__name
    null,                     -- new__parent_id
    null,                     -- new__item_id
    null,                     -- new__locale
    now(),                    -- new__creation_date
    :creation_user,           -- new__creation_user
    null,                     -- new__context_id
    :creation_ip,             -- new__creation_ip
    'content_item',           -- new__item_subtype
    'content_revision',       -- new__content_type
    :header_subject,          -- new__title
    null,                     -- new__description
    :content_type,            -- new__mime_type
    :nls_language,            -- new__nls_language
    null,                     -- new__text
    'file'                    -- new__storage_type
  );
end;

} {} {} {postgresql 7.1} c:/web/openacs/packages/acs-mail/tcl/acs-mail-procs-postgresql.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_set_content_file.get_latest_revision {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_set_content_file.get_latest_revision {

begin
  return content_item__get_latest_revision ( :item_id );
end;

} {} {} {postgresql 7.1} c:/web/openacs/packages/acs-mail/tcl/acs-mail-procs-postgresql.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_set_content_file.set_live_revision {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_set_content_file.set_live_revision {

select content_item__set_live_revision(:revision_id)

} {} {} {postgresql 7.1} c:/web/openacs/packages/acs-mail/tcl/acs-mail-procs-postgresql.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_set_content_file.update_content {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_set_content_file.update_content {

update cr_revisions
  set content = '[cr_create_content_file $item_id $revision_id $content_file]'
  where revision_id = :revision_id

} {} {} {postgresql 7.1} c:/web/openacs/packages/acs-mail/tcl/acs-mail-procs-postgresql.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_encode_content.get_latest_revision {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_encode_content.get_latest_revision {

begin
  return content_item__get_latest_revision ( :content_item_id );
end;

} {} {} {postgresql 7.1} c:/web/openacs/packages/acs-mail/tcl/acs-mail-procs-postgresql.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_encode_content.copy_blob_to_file {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_encode_content.copy_blob_to_file {
      
select r.lob as content, i.storage_type 
from cr_revisions r, cr_items i 
where r.revision_id = $revision_id and
      r.item_id = i.item_id
        
} {} {} {postgresql 7.1} c:/web/openacs/packages/acs-mail/tcl/acs-mail-procs-postgresql.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_content_new.acs_mail_content_new {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_content_new.acs_mail_content_new {

select acs_mail_gc_object__new (
  :object_id,				-- gc_object_id 
  'acs_mail_gc_object',		-- object_type
  now(),					-- creation_date
  :creation_user,			-- creation_user 
  :creation_ip,				-- creation_ip 
  null						-- context_id
);

} {} {} {postgresql 7.1} c:/web/openacs/packages/acs-mail/tcl/acs-mail-procs-postgresql.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_body_new.acs_mail_body_new {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_body_new.acs_mail_body_new {

select acs_mail_body__new (
  :body_id,				-- body_id 
  :body_reply_to,		-- body_reply_to 
  :body_from,			-- body_from 
  :body_date,			-- body_date 
  :header_message_id,	-- header_message_id 
  :header_reply_to,		-- header_reply_to 
  :header_subject,      -- header_subject 
  :header_from,			-- header_from 
  :header_to,			-- header_to 
  :content_item_id,		-- content_item_id 
  'acs_mail_body',		-- object_type
  now(),				-- creation_date
  :creation_user,		-- creation_user 
  :creation_ip,			-- creation_ip 
  null					-- context_id
);

} {} {} {postgresql 7.1} c:/web/openacs/packages/acs-mail/tcl/acs-mail-procs-postgresql.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_body_p.acs_mail_body_p {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_body_p.acs_mail_body_p {

select acs_mail_body__body_p (:object_id);

} {} {} {postgresql 7.1} c:/web/openacs/packages/acs-mail/tcl/acs-mail-procs-postgresql.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_body_clone.acs_mail_body_clone {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_body_clone.acs_mail_body_clone {

select acs_mail_body__clone (
  :old_body_id,		-- old_body_id 
  :body_id,			-- body_id 
  :creation_user,	-- creation_user 
  :creation_ip		-- creation_ip 
);

} {} {} {postgresql 7.1} c:/web/openacs/packages/acs-mail/tcl/acs-mail-procs-postgresql.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_body_set_content_object.acs_mail_body_set_content_object {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_body_set_content_object.acs_mail_body_set_content_object {

select acs_mail_body__set_content_object (
  :body_id,				-- body_id 
  :content_item_id		-- content_item_id 
);

} {} {} {postgresql 7.1} c:/web/openacs/packages/acs-mail/tcl/acs-mail-procs-postgresql.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_multipart_new.acs_mail_multipart_new {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_multipart_new.acs_mail_multipart_new {

select acs_mail_multipart__new (
  :multipart_id,	    -- multipart_id 
  :multipart_kind,	    -- multipart_kind 
  'acs_mail_multipart', -- object_type
  now(),                -- creation_date
  :creation_user,	    -- creation_user 
  :creation_ip,		    -- creation_ip 
  null                  -- context_id
);

} {} {} {postgresql 7.1} c:/web/openacs/packages/acs-mail/tcl/acs-mail-procs-postgresql.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_multipart_p.acs_mail_multipart_p {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_multipart_p.acs_mail_multipart_p {

select acs_mail_multipart__multipart_p (:object_id);

} {} {} {postgresql 7.1} c:/web/openacs/packages/acs-mail/tcl/acs-mail-procs-postgresql.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_multipart_add_content.acs_mail_multipart_add_content {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_multipart_add_content.acs_mail_multipart_add_content {

select acs_mail_multipart__add_content (
  :multipart_id,		-- multipart_id 
  :content_item_id		-- content_item_id 
);

} {} {} {postgresql 7.1} c:/web/openacs/packages/acs-mail/tcl/acs-mail-procs-postgresql.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_link_new.acs_mail_link_new {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_link_new.acs_mail_link_new {

select acs_mail_link__new (
  :mail_link_id,	-- mail_link_id 
  :body_id,			-- body_id 
  :context_id,		-- context_id 
  :creation_user,	-- creation_user 
  :creation_ip		-- creation_ip 
);

} {} {} {postgresql 7.1} c:/web/openacs/packages/acs-mail/tcl/acs-mail-procs-postgresql.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_link_p.acs_mail_link_p {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_link_p.acs_mail_link_p {

select acs_mail_link__link_p (:object_id);

} {} {} {postgresql 7.1} c:/web/openacs/packages/acs-mail/tcl/acs-mail-procs-postgresql.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_encode_content.get_storage_type {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_encode_content.get_storage_type {

select storage_type from cr_items 
where item_id = :content_item_id

} {} {} {} c:/web/openacs/packages/acs-mail/tcl/acs-mail-procs.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_encode_content.acs_mail_body_to_mime_get_content_simple {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_encode_content.acs_mail_body_to_mime_get_content_simple {
      
select content, mime_type as v_content_type
	from cr_revisions
	where revision_id = :revision_id
        
} {} {} {} c:/web/openacs/packages/acs-mail/tcl/acs-mail-procs.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_encode_content.acs_mail_body_to_mime_get_contents {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_encode_content.acs_mail_body_to_mime_get_contents {
      
select mime_filename, mime_disposition, content_item_id as ci_id
  from acs_mail_multipart_parts
  where multipart_id = :content_item_id
  order by sequence_number
        
} {} {} {} c:/web/openacs/packages/acs-mail/tcl/acs-mail-procs.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_body_to_output_format.acs_mail_body_to_mime_get_body {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_body_to_output_format.acs_mail_body_to_mime_get_body {
      
select body_id from acs_mail_links where mail_link_id = :link_id
        
} {} {} {} c:/web/openacs/packages/acs-mail/tcl/acs-mail-procs.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_body_to_output_format.acs_mail_body_to_mime_data {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_body_to_output_format.acs_mail_body_to_mime_data {
      
select header_message_id, header_reply_to, header_subject,
       header_from, header_to, content_item_id
  from acs_mail_bodies
  where body_id = :body_id
    
} {} {} {} c:/web/openacs/packages/acs-mail/tcl/acs-mail-procs.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_body_to_output_format.acs_mail_body_to_mime_headers {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_body_to_output_format.acs_mail_body_to_mime_headers {
      
select header_name, header_content from acs_mail_body_headers
  where body_id = :body_id
    
} {} {} {} c:/web/openacs/packages/acs-mail/tcl/acs-mail-procs.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_process_queue.acs_message_send {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_process_queue.acs_message_send {
      
select message_id, envelope_from, envelope_to from acs_mail_queue_outgoing
    
} {} {} {} c:/web/openacs/packages/acs-mail/tcl/acs-mail-procs.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_process_queue.acs_message_delete_sent {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_process_queue.acs_message_delete_sent {
      
delete from acs_mail_queue_outgoing
  where message_id = :message_id
    and envelope_from = :envelope_from
    and envelope_to = :envelope_to
            
} {} {} {} c:/web/openacs/packages/acs-mail/tcl/acs-mail-procs.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_process_queue.acs_message_cleanup_queue {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_process_queue.acs_message_cleanup_queue {
      
delete from acs_mail_queue_messages
  where message_id not in
  (select message_id from acs_mail_queue_outgoing)
  and message_id not in
  (select message_id from acs_mail_queue_incoming)
    
} {} {} {} c:/web/openacs/packages/acs-mail/tcl/acs-mail-procs.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_multipart_type.acs_mail_multipart_type {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_multipart_type.acs_mail_multipart_type {
      
select multipart_kind from acs_mail_multiparts
  where multipart_id = :object_id
    
} {} {} {} c:/web/openacs/packages/acs-mail/tcl/acs-mail-procs.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_link_get_body_id.acs_mail_link_get_body_id {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_link_get_body_id.acs_mail_link_get_body_id {
      
select body_id from acs_mail_links where mail_link_id = :link_id
    
} {} {} {} c:/web/openacs/packages/acs-mail/tcl/acs-mail-procs.xql}
dbqd.acs-messaging.tcl.acs-messaging-procs-oracle.acs_messaging_send_query.insert_messaging_by_query {dbqd.acs-messaging.tcl.acs-messaging-procs-oracle.acs_messaging_send_query.insert_messaging_by_query {
      
        insert into acs_messages_outgoing
            (message_id, to_address, grouping_id, wait_until)
        select :m__message_id, p.email, q.grouping_id,
               nvl(q.wait_until, SYSDATE) as wait_until
            from ($query) q, parties p
            where not exists (select 1 from acs_messages_outgoing o
                                  where o.message_id = :m__message_id
                                    and p.email = o.to_address)
              and p.party_id = q.recipient_id
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-messaging/tcl/acs-messaging-procs-oracle.xql}
dbqd.acs-messaging.tcl.acs-messaging-procs-oracle.acs_message_p.acs_message_p {dbqd.acs-messaging.tcl.acs-messaging-procs-oracle.acs_message_p.acs_message_p {
      
	begin
	    :1 := acs_message.message_p(:message_id);
	end;
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-messaging/tcl/acs-messaging-procs-oracle.xql}
dbqd.acs-messaging.tcl.acs-messaging-procs-oracle.acs_messaging_first_ancestor.acs_message_first_ancestor {dbqd.acs-messaging.tcl.acs-messaging-procs-oracle.acs_messaging_first_ancestor.acs_message_first_ancestor {
      
	select acs_message.first_ancestor(:message_id) as ancestor_id from dual
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-messaging/tcl/acs-messaging-procs-oracle.xql}
dbqd.acs-messaging.tcl.acs-messaging-procs-oracle.acs_messaging_send_query.insert_messaging_by_query {dbqd.acs-messaging.tcl.acs-messaging-procs-oracle.acs_messaging_send_query.insert_messaging_by_query {
      
        insert into acs_messages_outgoing
            (message_id, to_address, grouping_id, wait_until)
        select :m__message_id, p.email, q.grouping_id,
               nvl(q.wait_until, SYSDATE) as wait_until
            from ($query) q, parties p
            where not exists (select 1 from acs_messages_outgoing o
                                  where o.message_id = :m__message_id
                                    and p.email = o.to_address)
              and p.party_id = q.recipient_id
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-messaging/tcl/acs-messaging-procs-oracle.xql}
dbqd.acs-messaging.tcl.acs-messaging-procs-oracle.acs_messaging_process_queue.acs_message_send {dbqd.acs-messaging.tcl.acs-messaging-procs-oracle.acs_messaging_process_queue.acs_message_send {
      
        select o.message_id as sending_message_id,
               o.to_address as recip_email,
               p.email as sender_email,
               to_char(m.sent_date, 'Dy, DD Mon YYYY HH24:MI:SS') as sent_date,
               m.rfc822_id,
               m.title,
               m.mime_type,
               m.content,
               m2.rfc822_id as in_reply_to
            from acs_messages_outgoing o,
                 acs_messages_all m,
                 acs_messages_all m2,
                 parties p
            where o.message_id = m.message_id
                and m2.message_id(+) = m.reply_to
                and p.party_id = m.sender
                and wait_until <= sysdate
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-messaging/tcl/acs-messaging-procs-oracle.xql}
dbqd.acs-messaging.tcl.acs-messaging-procs.acs_messaging_send_query.insert_messaging_by_query {dbqd.acs-messaging.tcl.acs-messaging-procs.acs_messaging_send_query.insert_messaging_by_query {
      
        insert into acs_messages_outgoing
            (message_id, to_address, grouping_id, wait_until)
        select :m__message_id, p.email, q.grouping_id,
               coalesce(q.wait_until, current_timestamp) as wait_until
            from ($query) q, parties p
            where not exists (select 1 from acs_messages_outgoing o
                                  where o.message_id = :m__message_id
                                    and p.email = o.to_address)
              and p.party_id = q.recipient_id
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-messaging/tcl/acs-messaging-procs-postgresql.xql}
dbqd.acs-messaging.tcl.acs-messaging-procs.acs_message_p.acs_message_p {dbqd.acs-messaging.tcl.acs-messaging-procs.acs_message_p.acs_message_p {
	    select acs_message__message_p(:message_id);
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-messaging/tcl/acs-messaging-procs-postgresql.xql}
dbqd.acs-messaging.tcl.acs-messaging-procs.acs_messaging_first_ancestor.acs_message_first_ancestor {dbqd.acs-messaging.tcl.acs-messaging-procs.acs_messaging_first_ancestor.acs_message_first_ancestor {
        select acs_message__first_ancestor(:message_id) as ancestor_id 
    } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-messaging/tcl/acs-messaging-procs-postgresql.xql}
dbqd.acs-messaging.tcl.acs-messaging-procs.acs_messaging_process_queue.acs_message_send {dbqd.acs-messaging.tcl.acs-messaging-procs.acs_messaging_process_queue.acs_message_send {
        select o.message_id as sending_message_id,
               o.to_address as recip_email,
               p.email as sender_email,
               to_char(m.sent_date, 'Dy, DD Mon YYYY HH24:MI:SS') as sent_date,
               m.rfc822_id,
               m.title,
               m.mime_type,
               m.content,
               m2.rfc822_id as in_reply_to
            from acs_messages_outgoing o,
                 acs_messages_all m left outer join acs_messages_all m2 on (m2.message_id = m.reply_to),
                 parties p
            where o.message_id = m.message_id
                and p.party_id = m.sender
                and wait_until <= current_timestamp
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-messaging/tcl/acs-messaging-procs-postgresql.xql}
dbqd.acs-messaging.tcl.acs-messaging-procs.acs_messaging_process_queue.acs_message_remove_from_queue {dbqd.acs-messaging.tcl.acs-messaging-procs.acs_messaging_process_queue.acs_message_remove_from_queue {
      
                delete from acs_messages_outgoing
                    where message_id = :sending_message_id
                        and to_address = :recip_email
            
      } {} {} {} c:/web/openacs/packages/acs-messaging/tcl/acs-messaging-procs.xql}
dbqd.acs-reference.www.reference-data-list-oracle.data_select {dbqd.acs-reference.www.reference-data-list-oracle.data_select {
       
select repository_id,
  table_name,
  internal_data_p,
  package_name,
  to_char(last_update,'MM-DD-YYYY') updated,
  source,
  source_url,
  effective_date,
  expiry_date
from  acs_reference_repositories a
order by table_name

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-reference/www/reference-data-list-oracle.xql}
dbqd.acs-reference.www.reference-data-list.data_select {dbqd.acs-reference.www.reference-data-list.data_select {
       
select repository_id,
  table_name,
  internal_data_p,
  package_name,
  to_char(last_update,'MM-DD-YYYY') as updated,
  source,
  source_url,
  effective_date,
  expiry_date
from  acs_reference_repositories a
order by table_name

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-reference/www/reference-data-list-postgresql.xql}
dbqd.acs-service-contract.tcl.acs-service-contract-init-oracle.binding_exists_p {dbqd.acs-service-contract.tcl.acs-service-contract-init-oracle.binding_exists_p {
select acs_sc_binding.exists_p(:impl_contract_name,:impl_name) from dual
} {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-service-contract/tcl/acs-service-contract-init-oracle.xql}
dbqd.acs-service-contract.tcl.acs-service-contract-procs-oracle.acs_sc_binding_exists_p.binding_exists_p {dbqd.acs-service-contract.tcl.acs-service-contract-procs-oracle.acs_sc_binding_exists_p.binding_exists_p {
select acs_sc_binding.exists_p(:contract,:impl) from dual
} {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-service-contract/tcl/acs-service-contract-procs-oracle.xql}
dbqd.acs-service-contract.tcl.acs-service-contract-procs-oracle.acs_sc_proc.operation_inputtype_element {dbqd.acs-service-contract.tcl.acs-service-contract-procs-oracle.acs_sc_proc.operation_inputtype_element {
	select 
	    element_name, 
	    acs_sc_msg_type.get_name(element_msg_type_id) as element_msg_type_name,
	    element_msg_type_isset_p,
	    element_pos
	from acs_sc_msg_type_elements
	where msg_type_id = :operation_inputtype_id
	order by element_pos asc
} {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-service-contract/tcl/acs-service-contract-procs-oracle.xql}
dbqd.acs-service-contract.tcl.acs-service-contract-procs-oracle.acs_sc_proc.operation_outputtype_element {dbqd.acs-service-contract.tcl.acs-service-contract-procs-oracle.acs_sc_proc.operation_outputtype_element {
	select 
	    element_name, 
	    acs_sc_msg_type.get_name(element_msg_type_id) as element_msg_type_name,
	    element_msg_type_isset_p,
	    element_pos
	from acs_sc_msg_type_elements
	where msg_type_id = :operation_outputtype_id
	order by element_pos asc
} {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-service-contract/tcl/acs-service-contract-procs-oracle.xql}
dbqd.acs-service-contract.tcl.contract-procs-oracle.acs_sc::contract::new.insert_sc_contract {dbqd.acs-service-contract.tcl.contract-procs-oracle.acs_sc::contract::new.insert_sc_contract {
        begin
            :1 := acs_sc_contract.new(
                :name, 
                :description
            );
        end;
    } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-service-contract/tcl/contract-procs-oracle.xql}
dbqd.acs-service-contract.tcl.contract-procs-oracle.acs_sc::contract::delete.get_name_by_id {dbqd.acs-service-contract.tcl.contract-procs-oracle.acs_sc::contract::delete.get_name_by_id {
         acs_sc_contract.get_name(
            :contract_id
        ) from dual 	
    } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-service-contract/tcl/contract-procs-oracle.xql}
dbqd.acs-service-contract.tcl.contract-procs-oracle.acs_sc::contract::delete.get_id_by_name {dbqd.acs-service-contract.tcl.contract-procs-oracle.acs_sc::contract::delete.get_id_by_name {
        select acs_sc_contract.get_id(
            :name
        ) from dual 	
    } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-service-contract/tcl/contract-procs-oracle.xql}
dbqd.acs-service-contract.tcl.contract-procs-oracle.acs_sc::contract::delete.select_operations {dbqd.acs-service-contract.tcl.contract-procs-oracle.acs_sc::contract::delete.select_operations {
        select operation_id,
               operation_inputtype_id,
               operation_outputtype_id
        from   acs_sc_operations
        where  contract_id = :contract_id
    } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-service-contract/tcl/contract-procs-oracle.xql}
dbqd.acs-service-contract.tcl.contract-procs-oracle.acs_sc::contract::delete.delete_by_name {dbqd.acs-service-contract.tcl.contract-procs-oracle.acs_sc::contract::delete.delete_by_name {
      begin
        acs_sc_contract.del(
            contract_name => :name
        );
      end;
    } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-service-contract/tcl/contract-procs-oracle.xql}
dbqd.acs-service-contract.tcl.contract-procs-oracle.acs_sc::contract::operation::new.insert_operation {dbqd.acs-service-contract.tcl.contract-procs-oracle.acs_sc::contract::operation::new.insert_operation {
        begin
            :1 := acs_sc_operation.new(
                :contract_name,
                :operation, 
                :description, 
                :is_cachable_p, 
                :nargs, 
                :input_type_name, 
                :output_type_name
            );
        end;
    } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-service-contract/tcl/contract-procs-oracle.xql}
dbqd.acs-service-contract.tcl.contract-procs-oracle.acs_sc::contract::operation::delete.select_names {dbqd.acs-service-contract.tcl.contract-procs-oracle.acs_sc::contract::operation::delete.select_names {
        select contract_name,
               operation_name
        from   acs_sc_operations
        where  operation_id = :operation_id
    } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-service-contract/tcl/contract-procs-oracle.xql}
dbqd.acs-service-contract.tcl.contract-procs-oracle.acs_sc::contract::operation::delete.delete_by_name {dbqd.acs-service-contract.tcl.contract-procs-oracle.acs_sc::contract::operation::delete.delete_by_name {
        begin
          acs_sc_operation.del(
            contract_name => :contract_name, 
            operation_name => :operation_name
          );
        end;
    } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-service-contract/tcl/contract-procs-oracle.xql}
dbqd.acs-service-contract.tcl.contract-procs.acs_sc::contract::new.insert_sc_contract {dbqd.acs-service-contract.tcl.contract-procs.acs_sc::contract::new.insert_sc_contract {
        select acs_sc_contract__new(
            :name, 
            :description
        ); 	
    } {} {} {postgresql 7.2} c:/web/openacs/packages/acs-service-contract/tcl/contract-procs-postgresql.xql}
dbqd.acs-service-contract.tcl.contract-procs.acs_sc::contract::delete.get_name_by_id {dbqd.acs-service-contract.tcl.contract-procs.acs_sc::contract::delete.get_name_by_id {
        select acs_sc_contract__get_name(:contract_id); 	
    } {} {} {postgresql 7.2} c:/web/openacs/packages/acs-service-contract/tcl/contract-procs-postgresql.xql}
dbqd.acs-service-contract.tcl.contract-procs.acs_sc::contract::delete.get_id_by_name {dbqd.acs-service-contract.tcl.contract-procs.acs_sc::contract::delete.get_id_by_name {
        select acs_sc_contract__get_id(:name); 	
    } {} {} {postgresql 7.2} c:/web/openacs/packages/acs-service-contract/tcl/contract-procs-postgresql.xql}
dbqd.acs-service-contract.tcl.contract-procs.acs_sc::contract::delete.select_operations {dbqd.acs-service-contract.tcl.contract-procs.acs_sc::contract::delete.select_operations {
        select operation_id,
               operation_inputtype_id,
               operation_outputtype_id
        from   acs_sc_operations
        where  contract_id = :contract_id
    } {} {} {postgresql 7.2} c:/web/openacs/packages/acs-service-contract/tcl/contract-procs-postgresql.xql}
dbqd.acs-service-contract.tcl.contract-procs.acs_sc::contract::delete.delete_by_name {dbqd.acs-service-contract.tcl.contract-procs.acs_sc::contract::delete.delete_by_name {
        select acs_sc_contract__delete(:name); 	
    } {} {} {postgresql 7.2} c:/web/openacs/packages/acs-service-contract/tcl/contract-procs-postgresql.xql}
dbqd.acs-service-contract.tcl.contract-procs.acs_sc::contract::operation::new.insert_operation {dbqd.acs-service-contract.tcl.contract-procs.acs_sc::contract::operation::new.insert_operation {
        select acs_sc_operation__new(
            :contract_name,
            :operation, 
            :description, 
            :is_cachable_p, 
            :nargs, 
            :input_type_name, 
            :output_type_name
        ); 	
    } {} {} {postgresql 7.2} c:/web/openacs/packages/acs-service-contract/tcl/contract-procs-postgresql.xql}
dbqd.acs-service-contract.tcl.contract-procs.acs_sc::contract::operation::delete.select_names {dbqd.acs-service-contract.tcl.contract-procs.acs_sc::contract::operation::delete.select_names {
        select contract_name,
               operation_name
        from   acs_sc_operations
        where  operation_id = :operation_id
    } {} {} {postgresql 7.2} c:/web/openacs/packages/acs-service-contract/tcl/contract-procs-postgresql.xql}
dbqd.acs-service-contract.tcl.contract-procs.acs_sc::contract::operation::delete.delete_by_name {dbqd.acs-service-contract.tcl.contract-procs.acs_sc::contract::operation::delete.delete_by_name {
        select acs_sc_operation__delete(:contract_name, :operation_name); 	
    } {} {} {postgresql 7.2} c:/web/openacs/packages/acs-service-contract/tcl/contract-procs-postgresql.xql}
dbqd.acs-service-contract.tcl.implementation-procs-oracle.acs_sc::impl::new.impl_new {dbqd.acs-service-contract.tcl.implementation-procs-oracle.acs_sc::impl::new.impl_new {
            begin
                :1 := acs_sc_impl.new(
                       :contract_name, 
                       :name,
                       :pretty_name,
                       :owner
                   );
            end;
        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-service-contract/tcl/implementation-procs-oracle.xql}
dbqd.acs-service-contract.tcl.implementation-procs-oracle.acs_sc::impl::alias::new.alias_new {dbqd.acs-service-contract.tcl.implementation-procs-oracle.acs_sc::impl::alias::new.alias_new {
            begin
                :1 := acs_sc_impl_alias.new(
                       :contract_name, 
                       :impl_name,
                       :operation,
                       :alias,
                       :language
                   );
            end;
        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-service-contract/tcl/implementation-procs-oracle.xql}
dbqd.acs-service-contract.tcl.implementation-procs-oracle.acs_sc::impl::binding::new.binding_new {dbqd.acs-service-contract.tcl.implementation-procs-oracle.acs_sc::impl::binding::new.binding_new {
            begin
                acs_sc_binding.new(
                       contract_name => :contract_name, 
                       impl_name => :impl_name
                   );
            end;
        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-service-contract/tcl/implementation-procs-oracle.xql}
dbqd.acs-service-contract.tcl.implementation-procs-oracle.acs_sc::impl::delete.delete_impl {dbqd.acs-service-contract.tcl.implementation-procs-oracle.acs_sc::impl::delete.delete_impl {
            begin
                acs_sc_impl.del(
                       impl_contract_name => :contract_name, 
                       impl_name => :impl_name
                   );
            end;
        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-service-contract/tcl/implementation-procs-oracle.xql}
dbqd.acs-service-contract.tcl.implementation-procs.acs_sc::impl::new.impl_new {dbqd.acs-service-contract.tcl.implementation-procs.acs_sc::impl::new.impl_new {
            select acs_sc_impl__new(
                       :contract_name, 
                       :name,
                       :pretty_name,
                       :owner
                   ); 	
        } {} {} {postgresql 7.2} c:/web/openacs/packages/acs-service-contract/tcl/implementation-procs-postgresql.xql}
dbqd.acs-service-contract.tcl.implementation-procs.acs_sc::impl::alias::new.alias_new {dbqd.acs-service-contract.tcl.implementation-procs.acs_sc::impl::alias::new.alias_new {
            select acs_sc_impl_alias__new(
                       :contract_name, 
                       :impl_name,
                       :operation,
                       :alias,
                       :language
                   ); 	
        } {} {} {postgresql 7.2} c:/web/openacs/packages/acs-service-contract/tcl/implementation-procs-postgresql.xql}
dbqd.acs-service-contract.tcl.implementation-procs.acs_sc::impl::binding::new.binding_new {dbqd.acs-service-contract.tcl.implementation-procs.acs_sc::impl::binding::new.binding_new {
            select acs_sc_binding__new(
                       :contract_name, 
                       :impl_name
                   ); 	
        } {} {} {postgresql 7.2} c:/web/openacs/packages/acs-service-contract/tcl/implementation-procs-postgresql.xql}
dbqd.acs-service-contract.tcl.implementation-procs.acs_sc::impl::delete.delete_impl {dbqd.acs-service-contract.tcl.implementation-procs.acs_sc::impl::delete.delete_impl {
            select acs_sc_impl__delete(
                       :contract_name, 
                       :impl_name
                   ); 	
        } {} {} {postgresql 7.2} c:/web/openacs/packages/acs-service-contract/tcl/implementation-procs-postgresql.xql}
dbqd.acs-service-contract.tcl.implementation-procs.acs_sc::impl::get_id.select_impl_id {dbqd.acs-service-contract.tcl.implementation-procs.acs_sc::impl::get_id.select_impl_id {
        select impl_id
        from   acs_sc_impls
        where  impl_owner_name = :owner
        and    impl_name = :name
    } {} {} {} c:/web/openacs/packages/acs-service-contract/tcl/implementation-procs.xql}
dbqd.acs-service-contract.tcl.implementation-procs.acs_sc::impl::get.select_impl {dbqd.acs-service-contract.tcl.implementation-procs.acs_sc::impl::get.select_impl {
        select impl_name,
               impl_pretty_name,
               impl_owner_name, 
               impl_contract_name
        from   acs_sc_impls
        where  impl_id = :impl_id
    } {} {} {} c:/web/openacs/packages/acs-service-contract/tcl/implementation-procs.xql}
dbqd.acs-service-contract.tcl.msg-type-procs-oracle.acs_sc::msg_type::new.insert_msg_type {dbqd.acs-service-contract.tcl.msg-type-procs-oracle.acs_sc::msg_type::new.insert_msg_type {
        begin
            :1 := acs_sc_msg_type.new(
                :name, 
                :specification
            );
        end;
    } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-service-contract/tcl/msg-type-procs-oracle.xql}
dbqd.acs-service-contract.tcl.msg-type-procs-oracle.acs_sc::msg_type::delete.delete_by_id {dbqd.acs-service-contract.tcl.msg-type-procs-oracle.acs_sc::msg_type::delete.delete_by_id {
        begin
            acs_sc_msg_type.del(
                msg_type_id => :msg_type_id
            );
        end;
    } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-service-contract/tcl/msg-type-procs-oracle.xql}
dbqd.acs-service-contract.tcl.msg-type-procs-oracle.acs_sc::msg_type::delete.delete_by_name {dbqd.acs-service-contract.tcl.msg-type-procs-oracle.acs_sc::msg_type::delete.delete_by_name {
        begin
            acs_sc_msg_type.del(
                msg_type_name => :name
            );
        end;
    } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-service-contract/tcl/msg-type-procs-oracle.xql}
dbqd.acs-service-contract.tcl.msg-type-procs-oracle.acs_sc::msg_type::element::new.insert_msg_type_element {dbqd.acs-service-contract.tcl.msg-type-procs-oracle.acs_sc::msg_type::element::new.insert_msg_type_element {
        begin
            :1 := acs_sc_msg_type.new_element(
                :msg_type_name,
                :element_name,
                :element_msg_type_name,
                :element_msg_type_isset_p,
                :element_pos
            );
        end;
    } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-service-contract/tcl/msg-type-procs-oracle.xql}
dbqd.acs-service-contract.tcl.msg-type-procs.acs_sc::msg_type::new.insert_msg_type {dbqd.acs-service-contract.tcl.msg-type-procs.acs_sc::msg_type::new.insert_msg_type {
        select acs_sc_msg_type__new(
            :name, 
            :specification); 	
    } {} {} {postgresql 7.2} c:/web/openacs/packages/acs-service-contract/tcl/msg-type-procs-postgresql.xql}
dbqd.acs-service-contract.tcl.msg-type-procs.acs_sc::msg_type::delete.delete_by_name {dbqd.acs-service-contract.tcl.msg-type-procs.acs_sc::msg_type::delete.delete_by_name {
        select acs_sc_msg_type__delete(:name); 	
    } {} {} {postgresql 7.2} c:/web/openacs/packages/acs-service-contract/tcl/msg-type-procs-postgresql.xql}
dbqd.acs-service-contract.tcl.msg-type-procs.acs_sc::msg_type::element::new.insert_msg_type_element {dbqd.acs-service-contract.tcl.msg-type-procs.acs_sc::msg_type::element::new.insert_msg_type_element {
        select acs_sc_msg_type__new_element(
            :msg_type_name,
            :element_name,
            :element_msg_type_name,
            :element_msg_type_isset_p,
            :element_pos
        );
    } {} {} {postgresql 7.2} c:/web/openacs/packages/acs-service-contract/tcl/msg-type-procs-postgresql.xql}
dbqd.acs-service-contract.tcl.msg-type-procs.acs_sc::msg_type::delete.select_name {dbqd.acs-service-contract.tcl.msg-type-procs.acs_sc::msg_type::delete.select_name {
        select msg_type_name as name
        from   acs_sc_msg_types 
        where  msg_type_id = :msg_type_id
    } {} {} {} c:/web/openacs/packages/acs-service-contract/tcl/msg-type-procs.xql}
dbqd.acs-service-contract.www.binding-install-oracle.binding_install {dbqd.acs-service-contract.www.binding-install-oracle.binding_install {
         begin
           acs_sc_binding.new(
             contract_id => :contract_id,
             impl_id => :impl_id);
         end;
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-service-contract/www/binding-install-oracle.xql}
dbqd.acs-service-contract.www.binding-install.binding_install {dbqd.acs-service-contract.www.binding-install.binding_install {
         select acs_sc_binding__new(cast(:contract_id as integer), cast(:impl_id as integer))
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-service-contract/www/binding-install-postgresql.xql}
dbqd.acs-service-contract.www.binding-uninstall-oracle.binding_uninstall {dbqd.acs-service-contract.www.binding-uninstall-oracle.binding_uninstall {
         begin
           select acs_sc_binding.del(:contract_id,:impl_id)
         end;
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-service-contract/www/binding-uninstall-oracle.xql}
dbqd.acs-service-contract.www.binding-uninstall.file_select {dbqd.acs-service-contract.www.binding-uninstall.file_select {
         select acs_sc_binding__delete(:contract_id,:impl_id)
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-service-contract/www/binding-uninstall-postgresql.xql}
dbqd.acs-service-contract.www.contract-display-oracle.valid_installed_binding {dbqd.acs-service-contract.www.contract-display-oracle.valid_installed_binding {
        select 
            b.contract_id,
            b.impl_id,
            acs_sc_impl.get_name(b.impl_id) as impl_name,
            impl.impl_owner_name,
            impl.impl_pretty_name
        from
            acs_sc_bindings b, 
            acs_sc_impls impl
        where
            b.contract_id = :id
        and impl.impl_id = b.impl_id
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-service-contract/www/contract-display-oracle.xql}
dbqd.acs-service-contract.www.contract-display.valid_installed_binding {dbqd.acs-service-contract.www.contract-display.valid_installed_binding {
        select 
            b.contract_id,
            b.impl_id,
            acs_sc_impl__get_name(b.impl_id) as impl_name,
            impl.impl_owner_name,
            impl.impl_pretty_name
        from
            acs_sc_bindings b, 
            acs_sc_impls impl
        where
            b.contract_id = :id
        and impl.impl_id = b.impl_id
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-service-contract/www/contract-display-postgresql.xql}
dbqd.acs-service-contract.www.index-oracle.valid_installed_binding {dbqd.acs-service-contract.www.index-oracle.valid_installed_binding {
        select q.* 
        from (select 
                  b.contract_id,
                  b.impl_id,
                  acs_sc_contract.get_name(contract_id) as contract_name,
                  acs_sc_impl.get_name(b.impl_id) as impl_name,
                  impl.impl_owner_name,
                  impl.impl_pretty_name
              from
                  acs_sc_bindings b, 
                  acs_sc_impls impl
              where
                  impl.impl_id = b.impl_id) q
        order  by upper(contract_name), contract_name, upper(impl_name), impl_name
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-service-contract/www/index-oracle.xql}
dbqd.acs-service-contract.www.index.valid_installed_binding {dbqd.acs-service-contract.www.index.valid_installed_binding {
        select q.* 
        from (select 
                  b.contract_id,
                  b.impl_id,
                  acs_sc_contract__get_name(contract_id) as contract_name,
                  acs_sc_impl__get_name(b.impl_id) as impl_name,
                  impl.impl_owner_name,
                  impl.impl_pretty_name
              from
                  acs_sc_bindings b, 
                  acs_sc_impls impl
              where
                  impl.impl_id = b.impl_id) q
        order  by upper(contract_name), contract_name, upper(impl_name), impl_name
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-service-contract/www/index-postgresql.xql}
dbqd.acs-service-contract.www.index.valid_uninstalled_binding {dbqd.acs-service-contract.www.index.valid_uninstalled_binding {
     select contract_id, contract_name, impl_name, impl_owner_name, impl_pretty_name, impl_id 
     from   valid_uninstalled_bindings
     order  by upper(contract_name), contract_name, upper(impl_name), impl_name
   } {} {} {} c:/web/openacs/packages/acs-service-contract/www/index.xql}
dbqd.acs-service-contract.www.index.invalid_uninstalled_binding {dbqd.acs-service-contract.www.index.invalid_uninstalled_binding {
      select contract_id, contract_name, impl_name, impl_owner_name, impl_pretty_name, impl_id 
      from   invalid_uninstalled_bindings
      order  by upper(contract_name), contract_name, upper(impl_name), impl_name
   } {} {} {} c:/web/openacs/packages/acs-service-contract/www/index.xql}
dbqd.acs-service-contract.www.index.orphan_implementation {dbqd.acs-service-contract.www.index.orphan_implementation {
      select impl_id, impl_name, impl_pretty_name, impl_contract_name  
      from   orphan_implementations
      order  by upper(impl_name), impl_name
   } {} {} {} c:/web/openacs/packages/acs-service-contract/www/index.xql}
dbqd.acs-subsite.tcl.application-group-procs-oracle.application_group::contains_party_p.app_group_contains_party_p {dbqd.acs-subsite.tcl.application-group-procs-oracle.application_group::contains_party_p.app_group_contains_party_p {
      
	    select case when exists (
	        select 1
	        from application_group_element_map
	        where package_id = :package_id
	          and element_id = :party_id
	      union all
	        select 1
	        from application_groups
	        where package_id = :package_id
	          and group_id = :party_id
	    ) then 1 else 0 end
            from dual
	
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/application-group-procs-oracle.xql}
dbqd.acs-subsite.tcl.application-group-procs-oracle.application_group::contains_party_p.app_group_contains_party_p {dbqd.acs-subsite.tcl.application-group-procs-oracle.application_group::contains_party_p.app_group_contains_party_p {
      
	    select case when exists (
	        select 1
	        from application_group_element_map
	        where package_id = :package_id
	          and element_id = :party_id
	      union all
	        select 1
	        from application_groups
	        where package_id = :package_id
	          and group_id = :party_id
	    ) then 1 else 0 end
            from dual
	
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/application-group-procs-oracle.xql}
dbqd.acs-subsite.tcl.application-group-procs-oracle.application_group::contains_relation_p.app_group_contains_rel_p {dbqd.acs-subsite.tcl.application-group-procs-oracle.application_group::contains_relation_p.app_group_contains_rel_p {
      
	    select case when exists (
	        select 1
	        from application_group_element_map
	        where package_id = :package_id
	          and rel_id = :rel_id
	    ) then 1 else 0 end
            from dual
	
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/application-group-procs-oracle.xql}
dbqd.acs-subsite.tcl.application-group-procs-oracle.application_group::contains_segment_p.app_group_contains_segment_p {dbqd.acs-subsite.tcl.application-group-procs-oracle.application_group::contains_segment_p.app_group_contains_segment_p {
      
	    select case when exists (
	        select 1
	        from application_group_segments
	        where package_id = :package_id
	          and segment_id = :segment_id
	    ) then 1 else 0 end
            from dual
	
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/application-group-procs-oracle.xql}
dbqd.acs-subsite.tcl.application-group-procs-oracle.application_group::group_id_from_package_id.application_group_from_package_id_query {dbqd.acs-subsite.tcl.application-group-procs-oracle.application_group::group_id_from_package_id.application_group_from_package_id_query {
      
	    begin
	    :1 := application_group.group_id_from_package_id (
	        package_id => :package_id,
	        no_complain_p => :no_complain_p
	    );
	    end;
	
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/application-group-procs-oracle.xql}
dbqd.acs-subsite.tcl.application-group-procs-oracle.application_group::new.add_group {dbqd.acs-subsite.tcl.application-group-procs-oracle.application_group::new.add_group {
      
		begin
		:1 := application_group.new (
	            group_id      => :group_id,
	            object_type    => :group_type,
	            group_name    => :group_name,
                    package_id    => :package_id,
	            context_id    => :package_id,
	            creation_user => :creation_user,
	            creation_ip   => :creation_ip,
		    email         => :email,
		    url           => :url
		);
		end;
	    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/application-group-procs-oracle.xql}
dbqd.acs-subsite.tcl.application-group-procs-oracle.application_group::delete.delete {dbqd.acs-subsite.tcl.application-group-procs-oracle.application_group::delete.delete {
      
		begin
		:1 := application_group.del (
	                group_id      => :group_id,
		);
		end;
	    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/application-group-procs-oracle.xql}
dbqd.acs-subsite.tcl.application-group-procs.application_group::contains_party_p.app_group_contains_party_p {dbqd.acs-subsite.tcl.application-group-procs.application_group::contains_party_p.app_group_contains_party_p {
      
	    select case when exists (
	        select 1
	        from application_group_element_map
	        where package_id = :package_id
	          and element_id = :party_id
	      union all
	        select 1
	        from application_groups
	        where package_id = :package_id
	          and group_id = :party_id
	    ) then 1 else 0 end
            
	
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/application-group-procs-postgresql.xql}
dbqd.acs-subsite.tcl.application-group-procs.application_group::contains_party_p.app_group_contains_party_p {dbqd.acs-subsite.tcl.application-group-procs.application_group::contains_party_p.app_group_contains_party_p {
      
	    select case when exists (
	        select 1
	        from application_group_element_map
	        where package_id = :package_id
	          and element_id = :party_id
	      union all
	        select 1
	        from application_groups
	        where package_id = :package_id
	          and group_id = :party_id
	    ) then 1 else 0 end
            
	
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/application-group-procs-postgresql.xql}
dbqd.acs-subsite.tcl.application-group-procs.application_group::contains_relation_p.app_group_contains_rel_p {dbqd.acs-subsite.tcl.application-group-procs.application_group::contains_relation_p.app_group_contains_rel_p {
      
	    select case when exists (
	        select 1
	        from application_group_element_map
	        where package_id = :package_id
	          and rel_id = :rel_id
	    ) then 1 else 0 end
            
	
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/application-group-procs-postgresql.xql}
dbqd.acs-subsite.tcl.application-group-procs.application_group::contains_segment_p.app_group_contains_segment_p {dbqd.acs-subsite.tcl.application-group-procs.application_group::contains_segment_p.app_group_contains_segment_p {
      
	    select case when exists (
	        select 1
	        from application_group_segments
	        where package_id = :package_id
	          and segment_id = :segment_id
	    ) then 1 else 0 end
            
	
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/application-group-procs-postgresql.xql}
dbqd.acs-subsite.tcl.application-group-procs.application_group::group_id_from_package_id.application_group_from_package_id_query {dbqd.acs-subsite.tcl.application-group-procs.application_group::group_id_from_package_id.application_group_from_package_id_query {

	    select application_group__group_id_from_package_id (
	        :package_id,
	        :no_complain_p
	    )
	
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/application-group-procs-postgresql.xql}
dbqd.acs-subsite.tcl.application-group-procs.application_group::new.add_group {dbqd.acs-subsite.tcl.application-group-procs.application_group::new.add_group {

		select application_group__new (
	            :group_id,
	            :group_type,
		    now(),
	            :creation_user,
	            :creation_ip,
		    :email,
		    :url,
	            :group_name,
                    :package_id,
	            :package_id
		)
	    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/application-group-procs-postgresql.xql}
dbqd.acs-subsite.tcl.application-group-procs.application_group::delete.delete {dbqd.acs-subsite.tcl.application-group-procs.application_group::delete.delete {

		select application_group__delete (
	            :group_id
		)
	    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/application-group-procs-postgresql.xql}
dbqd.acs-subsite.tcl.application-group-procs.application_group::new.group_name_query {dbqd.acs-subsite.tcl.application-group-procs.application_group::new.group_name_query {
      
		select substr(instance_name, 1, 90)
		from apm_packages
		where package_id = :package_id
	    
      } {} {} {} c:/web/openacs/packages/acs-subsite/tcl/application-group-procs.xql}
dbqd.acs-subsite.tcl.application-group-procs.application_group::delete.delete_perms {dbqd.acs-subsite.tcl.application-group-procs.application_group::delete.delete_perms {
    
            delete from acs_permissions
            where  grantee_id = :group_id
            or     grantee_id in (select segment_id from rel_segments where group_id = :group_id)
            or     grantee_id in (select rel_id from acs_rels where object_id_one = :group_id or object_id_two = :group_id)

      } {} {} {} c:/web/openacs/packages/acs-subsite/tcl/application-group-procs.xql}
dbqd.acs-subsite.tcl.approval-expiration-procs-oracle.subsite::sweep_expired_approvals.select_expired_user_ids {dbqd.acs-subsite.tcl.approval-expiration-procs-oracle.subsite::sweep_expired_approvals.select_expired_user_ids {
      
        select u.user_id 
        from   cc_users u, 
               acs_objects relo
        where  relo.object_id = u.rel_id
        and    last_visit < sysdate - :days
        and    relo.last_modified < sysdate - :days
        and    u.member_state = 'approved'
        
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/approval-expiration-procs-oracle.xql}
dbqd.acs-subsite.tcl.approval-expiration-procs.subsite::sweep_expired_approvals.select_expired_user_ids {dbqd.acs-subsite.tcl.approval-expiration-procs.subsite::sweep_expired_approvals.select_expired_user_ids {
      
        select u.user_id 
        from   cc_users u, 
               acs_objects relo
        where  relo.object_id = u.rel_id
        and    age(u.last_visit) > interval '$days days'
        and    age(relo.last_modified) > interval '$days days'
        and    u.member_state = 'approved'
        
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/approval-expiration-procs-postgresql.xql}
dbqd.acs-subsite.tcl.attribute-procs-oracle.attribute_for_dynamic_object_p {dbqd.acs-subsite.tcl.attribute-procs-oracle.attribute_for_dynamic_object_p {
      
	select case when exists (select 1 
                                   from acs_attributes a, acs_object_types t
                                  where t.dynamic_p = 't'
                                    and a.object_type = t.object_type
                                    and a.attribute_id = :value)
	            then 1 else 0 end
	  from dual
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/attribute-procs-oracle.xql}
dbqd.acs-subsite.tcl.attribute-procs-oracle.exists_p.attr_exists_p {dbqd.acs-subsite.tcl.attribute-procs-oracle.exists_p.attr_exists_p {
      
	select case when exists (select 1 
                                   from acs_attributes a
                                  where (a.attribute_name = :attribute
                                         or a.column_name = :attribute)
                                    and a.object_type = :object_type)
                    then 1
                    else 0
                    end
          from dual
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/attribute-procs-oracle.xql}
dbqd.acs-subsite.tcl.attribute-procs-oracle.delete.select_attr_info {dbqd.acs-subsite.tcl.attribute-procs-oracle.delete.select_attr_info {
      
        select a.object_type, a.attribute_name, 
               case when a.storage = 'type_specific' then t.table_name else a.table_name end as table_name,
	       nvl(a.column_name, a.attribute_name) as column_name
          from acs_attributes a, acs_object_types t
         where a.attribute_id = :attribute_id
           and t.object_type = a.object_type
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/attribute-procs-oracle.xql}
dbqd.acs-subsite.tcl.attribute-procs-oracle.array_for_type.select_attributes {dbqd.acs-subsite.tcl.attribute-procs-oracle.array_for_type.select_attributes {
      
	select nvl(a.column_name, a.attribute_name) as name, 
               a.pretty_name, a.attribute_id, a.datatype, 
               v.enum_value, v.pretty_name as value_pretty_name
	from acs_object_type_attributes a,
               acs_enum_values v,
               (select t.object_type, level as type_level
                  from acs_object_types t
                 start with t.object_type = :start_with
               connect by prior t.object_type = t.supertype) t 
         where a.object_type = :object_type
           and a.attribute_id = v.attribute_id(+)
           and t.object_type = a.ancestor_type $storage_clause
        order by type_level, a.sort_order
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/attribute-procs-oracle.xql}
dbqd.acs-subsite.tcl.attribute-procs-oracle.attribute::add.drop_attribute {dbqd.acs-subsite.tcl.attribute-procs-oracle.attribute::add.drop_attribute {
begin acs_attribute.drop_attribute(:object_type, :attribute_name); end;
} {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/attribute-procs-oracle.xql}
dbqd.acs-subsite.tcl.attribute-procs-oracle.attribute::add.create_attribute {dbqd.acs-subsite.tcl.attribute-procs-oracle.attribute::add.create_attribute {
declare
  attr_id     acs_attributes.attribute_id%TYPE;
begin
  attr_id := acs_attribute.create_attribute (	
	object_type => '$object_type',
	attribute_name => '$attribute_name',
	min_n_values => '$min_n_values',
	max_n_values => '$max_n_values',
	default_value => '$default_value',
	datatype => '$datatype',
	pretty_name => '$pretty_name',
	pretty_plural => '$pretty_plural'
  );
end;
} {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/attribute-procs-oracle.xql}
dbqd.acs-subsite.tcl.attribute-procs-oracle.attribute::add.drop_attr_column {dbqd.acs-subsite.tcl.attribute-procs-oracle.attribute::add.drop_attr_column {
alter table $table_name drop column $attribute_name
} {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/attribute-procs-oracle.xql}
dbqd.acs-subsite.tcl.attribute-procs-oracle.attribute::add.add_column {dbqd.acs-subsite.tcl.attribute-procs-oracle.attribute::add.add_column {
alter table $table_name add $attribute_name $sql_type
} {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/attribute-procs-oracle.xql}
dbqd.acs-subsite.tcl.attribute-procs-oracle.attribute::delete.drop_attribute {dbqd.acs-subsite.tcl.attribute-procs-oracle.attribute::delete.drop_attribute {
begin acs_attribute.drop_attribute(:object_type, :attribute_name); end;
} {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/attribute-procs-oracle.xql}
dbqd.acs-subsite.tcl.attribute-procs-oracle.attribute::delete.drop_attr_column {dbqd.acs-subsite.tcl.attribute-procs-oracle.attribute::delete.drop_attr_column {
alter table $table_name drop column $column_name
} {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/attribute-procs-oracle.xql}
dbqd.acs-subsite.tcl.attribute-procs.attribute_for_dynamic_object_p {dbqd.acs-subsite.tcl.attribute-procs.attribute_for_dynamic_object_p {
      
	select case when exists (select 1 
                                   from acs_attributes a, acs_object_types t
                                  where t.dynamic_p = 't'
                                    and a.object_type = t.object_type
                                    and a.attribute_id = :value)
	            then 1 else 0 end
	  
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/attribute-procs-postgresql.xql}
dbqd.acs-subsite.tcl.attribute-procs.attribute::exists_p.attr_exists_p {dbqd.acs-subsite.tcl.attribute-procs.attribute::exists_p.attr_exists_p {
      
	select case when exists (select 1 
                                   from acs_attributes a
                                  where (a.attribute_name = :attribute
                                         or a.column_name = :attribute)
                                    and a.object_type = :object_type)
                    then 1
                    else 0
                    end
          
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/attribute-procs-postgresql.xql}
dbqd.acs-subsite.tcl.attribute-procs.attribute::array_for_type.select_attributes {dbqd.acs-subsite.tcl.attribute-procs.attribute::array_for_type.select_attributes {

	select coalesce(a.column_name, a.attribute_name) as name, 
               a.pretty_name, a.attribute_id, a.datatype, 
               v.enum_value, v.pretty_name as value_pretty_name
	from acs_object_type_attributes a left outer join
               acs_enum_values v using (attribute_id),
               (select t.object_type, tree_level(t.tree_sortkey) - tree_level(t2.tree_sortkey) as type_level
                from acs_object_types t, acs_object_types t2
		where t2.object_type = :start_with
                  and t.tree_sortkey between t2.tree_sortkey and tree_right(t2.tree_sortkey)) t
         where a.object_type = :object_type
           and t.object_type = a.ancestor_type $storage_clause
        order by type_level, a.sort_order
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/attribute-procs-postgresql.xql}
dbqd.acs-subsite.tcl.attribute-procs.attribute::multirow.attribute_select {dbqd.acs-subsite.tcl.attribute-procs.attribute::multirow.attribute_select {	

	select *
	  from ($package_object_view) dummy
	 where object_id = :object_id

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/attribute-procs-postgresql.xql}
dbqd.acs-subsite.tcl.attribute-procs.attribute::add.drop_attribute {dbqd.acs-subsite.tcl.attribute-procs.attribute::add.drop_attribute {
select acs_attribute__drop_attribute(:object_type, :attribute_name)
} {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/attribute-procs-postgresql.xql}
dbqd.acs-subsite.tcl.attribute-procs.attribute::add.create_attribute {dbqd.acs-subsite.tcl.attribute-procs.attribute::add.create_attribute {
select acs_attribute__create_attribute (	
	'$object_type',
	'$attribute_name',
	'$datatype',
	'$pretty_name',
	'$pretty_plural',
	NULL,
	NULL,
	'$default_value',
	'$min_n_values',
	'$max_n_values',
	NULL,
	'type_specific',
	'f'
);
} {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/attribute-procs-postgresql.xql}
dbqd.acs-subsite.tcl.attribute-procs.attribute::add.drop_attr_column {dbqd.acs-subsite.tcl.attribute-procs.attribute::add.drop_attr_column {
alter table $table_name drop column $attribute_name
} {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/attribute-procs-postgresql.xql}
dbqd.acs-subsite.tcl.attribute-procs.attribute::add.add_column {dbqd.acs-subsite.tcl.attribute-procs.attribute::add.add_column {
alter table $table_name add $attribute_name $sql_type
} {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/attribute-procs-postgresql.xql}
dbqd.acs-subsite.tcl.attribute-procs.attribute::delete.drop_attribute {dbqd.acs-subsite.tcl.attribute-procs.attribute::delete.drop_attribute {
select acs_attribute__drop_attribute(:object_type, :attribute_name)
} {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/attribute-procs-postgresql.xql}
dbqd.acs-subsite.tcl.attribute-procs.attribute::delete.drop_attr_column {dbqd.acs-subsite.tcl.attribute-procs.attribute::delete.drop_attr_column {
alter table $table_name rename column $column_name to __DELETED__$column_name
} {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/attribute-procs-postgresql.xql}
dbqd.acs-subsite.tcl.attribute-procs.attribute::add.select_table {dbqd.acs-subsite.tcl.attribute-procs.attribute::add.select_table {
      
        select t.table_name
          from acs_object_types t
         where t.object_type = :object_type
    
      } {} {} {} c:/web/openacs/packages/acs-subsite/tcl/attribute-procs.xql}
dbqd.acs-subsite.tcl.attribute-procs.attribute::add.select_attribute_id {dbqd.acs-subsite.tcl.attribute-procs.attribute::add.select_attribute_id {
      
        select a.attribute_id
          from acs_attributes a
         where a.object_type = :object_type
           and a.attribute_name = :attribute_name
    
      } {} {} {} c:/web/openacs/packages/acs-subsite/tcl/attribute-procs.xql}
dbqd.acs-subsite.tcl.attribute-procs.attribute::delete.select_attr_info {dbqd.acs-subsite.tcl.attribute-procs.attribute::delete.select_attr_info {
      
        select a.object_type, a.attribute_name, 
               case when a.storage = 'type_specific' then t.table_name else a.table_name end as table_name,
	       coalesce(a.column_name, a.attribute_name) as column_name
          from acs_attributes a, acs_object_types t
         where a.attribute_id = :attribute_id
           and t.object_type = a.object_type
    
      } {} {} {} c:/web/openacs/packages/acs-subsite/tcl/attribute-procs.xql}
dbqd.acs-subsite.tcl.attribute-procs.attribute::value_delete.select_last_sort_order {dbqd.acs-subsite.tcl.attribute-procs.attribute::value_delete.select_last_sort_order {
      
        select v.sort_order as old_sort_order
          from acs_enum_values v
         where v.attribute_id = :attribute_id
           and v.enum_value = :enum_value
    
      } {} {} {} c:/web/openacs/packages/acs-subsite/tcl/attribute-procs.xql}
dbqd.acs-subsite.tcl.attribute-procs.attribute::value_delete.delete_enum_value {dbqd.acs-subsite.tcl.attribute-procs.attribute::value_delete.delete_enum_value {
      
        delete from acs_enum_values v
        where v.attribute_id = :attribute_id
        and v.enum_value = :enum_value
    
      } {} {} {} c:/web/openacs/packages/acs-subsite/tcl/attribute-procs.xql}
dbqd.acs-subsite.tcl.attribute-procs.attribute::value_delete.update_sort_order {dbqd.acs-subsite.tcl.attribute-procs.attribute::value_delete.update_sort_order {
      
            update acs_enum_values v
               set v.sort_order = v.sort_order - 1
             where v.attribute_id = :attribute_id
               and v.sort_order > :old_sort_order
        
      } {} {} {} c:/web/openacs/packages/acs-subsite/tcl/attribute-procs.xql}
dbqd.acs-subsite.tcl.attribute-procs.attribute::multirow.object_type_query {dbqd.acs-subsite.tcl.attribute-procs.attribute::multirow.object_type_query {
      
	    select object_type from acs_objects where object_id = :object_id
	
      } {} {} {} c:/web/openacs/packages/acs-subsite/tcl/attribute-procs.xql}
dbqd.acs-subsite.tcl.attribute-procs.attribute::multirow.attribute_select {dbqd.acs-subsite.tcl.attribute-procs.attribute::multirow.attribute_select {	

	select *
	  from ($package_object_view) dummy
	 where object_id = :object_id

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/attribute-procs-postgresql.xql}
dbqd.acs-subsite.tcl.attribute-procs.attribute::add_form_elements.select_enum_values {dbqd.acs-subsite.tcl.attribute-procs.attribute::add_form_elements.select_enum_values {
      
		select enum.pretty_name, enum.enum_value
		from acs_enum_values enum
		where enum.attribute_id = :attribute_id 
		order by enum.sort_order
	    
      } {} {} {} c:/web/openacs/packages/acs-subsite/tcl/attribute-procs.xql}
dbqd.acs-subsite.tcl.attribute-procs.attribute::value_add.insert_enum_value {dbqd.acs-subsite.tcl.attribute-procs.attribute::value_add.insert_enum_value {
	insert into acs_enum_values
	(attribute_id, sort_order, enum_value, pretty_name)
	select :attribute_id, :sort_order, :enum_value, :enum_value
	from dual
	where not exists (select 1 
	from acs_enum_values v2
	where v2.pretty_name = :enum_value
	and v2.attribute_id = :attribute_id)
} {} {} {} c:/web/openacs/packages/acs-subsite/tcl/attribute-procs.xql}
dbqd.acs-subsite.tcl.group-procs-oracle.delete.delete_group {dbqd.acs-subsite.tcl.group-procs-oracle.delete.delete_group {
      
	  BEGIN 
            -- the acs_group package takes care of segments referred
  	    -- to by rel_constraints.rel_segment. We delete the ones
	    -- references by rel_constraints.required_rel_segment here.

	    for row in (select cons.constraint_id
                          from rel_constraints cons, rel_segments segs
                         where segs.segment_id = cons.required_rel_segment
                           and segs.group_id = :group_id) loop

                rel_segment.del(row.constraint_id);

            end loop;

	    -- delete the actual group
	    ${package_name}.del(:group_id); 
	  END;
        
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/group-procs-oracle.xql}
dbqd.acs-subsite.tcl.group-procs-oracle.member_p.user_is_member {dbqd.acs-subsite.tcl.group-procs-oracle.member_p.user_is_member {
	  select acs_group.member_p(:user_id,:group_id, :cascade) from dual
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/group-procs-oracle.xql}
dbqd.acs-subsite.tcl.group-procs-oracle.group::get_rel_types_options.select_rel_types {dbqd.acs-subsite.tcl.group-procs-oracle.group::get_rel_types_options.select_rel_types {
    select role.pretty_name,
           gr.rel_type
    from   group_rels gr,
           acs_rel_types rt,
           acs_rel_roles role
    where  gr.group_id = :group_id
    and    rt.rel_type = gr.rel_type
    and    role.role = rt.role_two
    and    rt.object_type_two = :object_type
    order  by decode(gr.rel_type, 'membership_rel', 0, 1)||role.pretty_name

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/group-procs-oracle.xql}
dbqd.acs-subsite.tcl.group-procs.group::delete.delete_group {dbqd.acs-subsite.tcl.group-procs.group::delete.delete_group {
	  DECLARE
	    row record;
	  BEGIN 
            -- the acs_group package takes care of segments referred
  	    -- to by rel_constraints.rel_segment. We delete the ones
	    -- references by rel_constraints.required_rel_segment here.

	    for row in select cons.constraint_id
                          from rel_constraints cons, rel_segments segs
                         where segs.segment_id = cons.required_rel_segment
                           and segs.group_id = :group_id loop

                perform rel_segment__delete(row.constraint_id);

            end loop;

	    -- delete the actual group
	    perform ${package_name}__delete(:group_id);

	    return 1;
	  END;
        
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/group-procs-postgresql.xql}
dbqd.acs-subsite.tcl.group-procs.group::member_p.user_is_member {dbqd.acs-subsite.tcl.group-procs.group::member_p.user_is_member {
	  select acs_group__member_p(:user_id,:group_id, :cascade)
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/group-procs-postgresql.xql}
dbqd.acs-subsite.tcl.group-procs.group::get_rel_types_options.select_rel_types {dbqd.acs-subsite.tcl.group-procs.group::get_rel_types_options.select_rel_types {

    select role.pretty_name,
           gr.rel_type
    from   group_rels gr,
           acs_rel_types rt,
           acs_rel_roles role
    where  gr.group_id = :group_id
    and    rt.rel_type = gr.rel_type
    and    role.role = rt.role_two
    and    rt.object_type_two = :object_type
    order  by (case when gr.rel_type = 'membership_rel' then 0 else 1 end)||role.pretty_name

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/group-procs-postgresql.xql}
dbqd.acs-subsite.tcl.group-procs.new.package_select {dbqd.acs-subsite.tcl.group-procs.new.package_select {
      
	    select t.package_name, lower(t.id_column) as id_column
	      from acs_object_types t
	     where t.object_type = :group_type
	
      } {} {} {} c:/web/openacs/packages/acs-subsite/tcl/group-procs.xql}
dbqd.acs-subsite.tcl.group-procs.new.package_select {dbqd.acs-subsite.tcl.group-procs.new.package_select {
      
	    select t.package_name, lower(t.id_column) as id_column
	      from acs_object_types t
	     where t.object_type = :group_type
	
      } {} {} {} c:/web/openacs/packages/acs-subsite/tcl/group-procs.xql}
dbqd.acs-subsite.tcl.group-procs.join_policy.select_join_policy {dbqd.acs-subsite.tcl.group-procs.join_policy.select_join_policy {
      
	    select join_policy from groups where group_id = :group_id
	
      } {} {} {} c:/web/openacs/packages/acs-subsite/tcl/group-procs.xql}
dbqd.acs-subsite.tcl.group-procs.member_p.group_id_from_name {dbqd.acs-subsite.tcl.group-procs.member_p.group_id_from_name {
	  select group_id 
          from   groups 
          where  group_name = :group_name
      } {} {} {} c:/web/openacs/packages/acs-subsite/tcl/group-procs.xql}
dbqd.acs-subsite.tcl.group-type-procs-oracle.drop_all_groups_p.group_exists_p {dbqd.acs-subsite.tcl.group-type-procs-oracle.drop_all_groups_p.group_exists_p {
      
	    select case when exists (select 1 
                                       from acs_objects o
                                      where acs_permission.permission_p(o.object_id, :user_id, 'delete') = 'f'
                                        and o.object_type = :group_type)
                        then 0 else 1 end
              from dual
	
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/group-type-procs-oracle.xql}
dbqd.acs-subsite.tcl.group-type-procs-oracle.group_type::new.drop_type {dbqd.acs-subsite.tcl.group-type-procs-oracle.group_type::new.drop_type {

begin acs_object_type.drop_type('$group_type'); end;
      
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/group-type-procs-oracle.xql}
dbqd.acs-subsite.tcl.group-type-procs-oracle.group_type::new.create_type {dbqd.acs-subsite.tcl.group-type-procs-oracle.group_type::new.create_type {

BEGIN
 acs_object_type.create_type (
   supertype     => :supertype,
   object_type   => :group_type,
   pretty_name   => :pretty_name,
   pretty_plural => :pretty_plural,
   table_name    => :table_name,
   id_column     => :id_column,
   package_name  => :package_name
 );
END;      

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/group-type-procs-oracle.xql}
dbqd.acs-subsite.tcl.group-type-procs-oracle.group_type::new.update_type {dbqd.acs-subsite.tcl.group-type-procs-oracle.group_type::new.update_type {

update acs_object_types set dynamic_p='t' where object_type = :group_type

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/group-type-procs-oracle.xql}
dbqd.acs-subsite.tcl.group-type-procs-oracle.group_type::new.copy_rel_types {dbqd.acs-subsite.tcl.group-type-procs-oracle.group_type::new.copy_rel_types {

	insert into group_type_rels 
	(group_rel_type_id, rel_type, group_type)
	select acs_object_id_seq.nextval, r.rel_type, :group_type
	  from group_type_rels r
	 where r.group_type = :supertype

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/group-type-procs-oracle.xql}
dbqd.acs-subsite.tcl.group-type-procs.group_type::drop_all_groups_p.group_exists_p {dbqd.acs-subsite.tcl.group-type-procs.group_type::drop_all_groups_p.group_exists_p {
      
	    select case when exists (select 1 
                                       from acs_objects o
                                      where acs_permission__permission_p(o.object_id, :user_id, 'delete') = 'f'
                                        and o.object_type = :group_type)
                        then 0 else 1 end
              
	
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/group-type-procs-postgresql.xql}
dbqd.acs-subsite.tcl.group-type-procs.group_type::new.drop_type {dbqd.acs-subsite.tcl.group-type-procs.group_type::new.drop_type {

	  select acs_object_type__drop_type('$group_type', 'f');
      
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/group-type-procs-postgresql.xql}
dbqd.acs-subsite.tcl.group-type-procs.group_type::new.create_type {dbqd.acs-subsite.tcl.group-type-procs.group_type::new.create_type {

 select acs_object_type__create_type (
   :group_type,
   :pretty_name,
   :pretty_plural,
   :supertype,
   :table_name,
   :id_column,
   :package_name,
   'f',
   null,
   null
 )
      
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/group-type-procs-postgresql.xql}
dbqd.acs-subsite.tcl.group-type-procs.group_type::new.update_type {dbqd.acs-subsite.tcl.group-type-procs.group_type::new.update_type {
      
      begin
        update acs_object_types set dynamic_p='t' where object_type = :group_type;
	return null;
      end;

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/group-type-procs-postgresql.xql}
dbqd.acs-subsite.tcl.group-type-procs.group_type::new.copy_rel_types {dbqd.acs-subsite.tcl.group-type-procs.group_type::new.copy_rel_types {
      
      begin
        insert into group_type_rels 
	       (group_rel_type_id, rel_type, group_type)
	       select nextval('t_acs_object_id_seq'), r.rel_type, :group_type
	         from group_type_rels r
	        where r.group_type = :supertype;
        return null;
      end;

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/group-type-procs-postgresql.xql}
dbqd.acs-subsite.tcl.group-type-procs.group_type::new.create_table {dbqd.acs-subsite.tcl.group-type-procs.group_type::new.create_table {

begin      
  create table $table_name ( 
    $id_column   integer 
                 constraint $constraint(pk) primary key
                 constraint $constraint(fk) 
                   references $references_table ($references_column)
  );
  return null;
end;

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/group-type-procs-postgresql.xql}
dbqd.acs-subsite.tcl.group-type-procs.group_type::new.select_group_id_column {dbqd.acs-subsite.tcl.group-type-procs.group_type::new.select_group_id_column {
      
	    select upper(id_column) from acs_object_types where object_type='group'
	
      } {} {} {} c:/web/openacs/packages/acs-subsite/tcl/group-type-procs.xql}
dbqd.acs-subsite.tcl.group-type-procs.group_type::new.supertype_table_column {dbqd.acs-subsite.tcl.group-type-procs.group_type::new.supertype_table_column {
      
	    select t.table_name as references_table,
                   t.id_column as references_column
  	      from acs_object_types t
	     where t.object_type = :supertype
	
      } {} {} {} c:/web/openacs/packages/acs-subsite/tcl/group-type-procs.xql}
dbqd.acs-subsite.tcl.group-type-procs.group_type::new.insert_group_type {dbqd.acs-subsite.tcl.group-type-procs.group_type::new.insert_group_type {
		insert into group_types (group_type) values (:group_type)
	} {} {} {} c:/web/openacs/packages/acs-subsite/tcl/group-type-procs.xql}
dbqd.acs-subsite.tcl.package-procs-oracle.package_type_dynamic_p.object_type_dynamic_p {dbqd.acs-subsite.tcl.package-procs-oracle.package_type_dynamic_p.object_type_dynamic_p {
      
	select case when exists (select 1 
                                   from acs_object_types t
                                  where t.dynamic_p = 't'
                                    and t.object_type = :object_type)
	            then 1 else 0 end
	  from dual
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/package-procs-oracle.xql}
dbqd.acs-subsite.tcl.package-procs-oracle.package_create_attribute_list.select_all_attributes {dbqd.acs-subsite.tcl.package-procs-oracle.package_create_attribute_list.select_all_attributes {
      
	select upper(nvl(attr.table_name,t.table_name)) as attr_table_name, 
	       upper(nvl(attr.column_name, attr.attribute_name)) as attr_column_name, 
	       attr.ancestor_type, attr.min_n_values, attr.default_value
	  from acs_object_type_attributes attr, 
	       (select t.object_type, t.table_name, level as type_level
	          from acs_object_types t
	         start with t.object_type = :object_type
	       connect by prior t.supertype = t.object_type) t
         where attr.ancestor_type = t.object_type
           and attr.object_type = :object_type
        order by t.type_level 
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/package-procs-oracle.xql}
dbqd.acs-subsite.tcl.package-procs-oracle.package_recreate_hierarchy.select_object_types {dbqd.acs-subsite.tcl.package-procs-oracle.package_recreate_hierarchy.select_object_types {
      
	select t.object_type
	  from acs_object_types t
	 where t.dynamic_p = 't'
	 start with t.object_type = :object_type
       connect by prior t.object_type = t.supertype
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/package-procs-oracle.xql}
dbqd.acs-subsite.tcl.package-procs-oracle.package_create.package_valid_p {dbqd.acs-subsite.tcl.package-procs-oracle.package_create.package_valid_p {
      
	    select case when exists (select 1 
                                       from user_objects 
                                      where status = 'INVALID'
                                        and object_name = upper(:package_name)
                                        and object_type = upper(:type))
                        then 0 else 1 end
	      from dual
	
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/package-procs-oracle.xql}
dbqd.acs-subsite.tcl.package-procs-oracle.package_object_view_reset.select_ancestor_types {dbqd.acs-subsite.tcl.package-procs-oracle.package_object_view_reset.select_ancestor_types {
      
	select t.object_type as ancestor_type
	  from acs_object_types t 
	 start with t.object_type = :object_type 
       connect by prior t.supertype = t.object_type
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/package-procs-oracle.xql}
dbqd.acs-subsite.tcl.package-procs-oracle.package_object_view_reset.select_sub_types {dbqd.acs-subsite.tcl.package-procs-oracle.package_object_view_reset.select_sub_types {
      
	select t.object_type as sub_type
	  from acs_object_types t 
	 start with t.object_type = :object_type 
       connect by prior t.object_type = t.supertype
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/package-procs-oracle.xql}
dbqd.acs-subsite.tcl.package-procs-oracle.package_insert_default_comment.select_comments {dbqd.acs-subsite.tcl.package-procs-oracle.package_insert_default_comment.select_comments {
      
	    select acs_object.name(:user_id) as author,
	           sysdate as creation_date
	      from dual
	
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/package-procs-oracle.xql}
dbqd.acs-subsite.tcl.package-procs-oracle.package_insert_default_comment.select_comments {dbqd.acs-subsite.tcl.package-procs-oracle.package_insert_default_comment.select_comments {
      
	    select acs_object.name(:user_id) as author,
	           sysdate as creation_date
	      from dual
	
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/package-procs-oracle.xql}
dbqd.acs-subsite.tcl.package-procs-oracle.package_object_attribute_list.attributes_select {dbqd.acs-subsite.tcl.package-procs-oracle.package_object_attribute_list.attributes_select {
      
	select a.attribute_id, 
	       nvl(a.table_name, t.table_name) as table_name,
	       nvl(a.column_name, a.attribute_name) as attribute_name, 
	       a.pretty_name, 
	       a.datatype, 
	       case when a.min_n_values = 0 then 'f' else 't' end as required_p, 
               a.default_value, 
               t.table_name as object_type_table_name, 
               t.id_column as object_type_id_column
          from acs_object_type_attributes a, 
               (select t.object_type, t.table_name, t.id_column, level as type_level
                  from acs_object_types t
                 start with t.object_type=:start_with
               connect by prior t.object_type = t.supertype) t 
         where a.object_type = :object_type
           and t.object_type = a.ancestor_type $storage_clause
         order by type_level
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/package-procs-oracle.xql}
dbqd.acs-subsite.tcl.package-procs-oracle.package_table_columns_for_type.select_object_type_param_list {dbqd.acs-subsite.tcl.package-procs-oracle.package_table_columns_for_type.select_object_type_param_list {
      
	select cols.table_name, cols.column_name
	  from user_tab_columns cols, 
	       (select upper(t.table_name) as table_name
	          from acs_object_types t
                 start with t.object_type = :object_type
               connect by prior t.supertype = t.object_type) t
	 where cols.column_name in
	          (select args.argument_name
                     from user_arguments args
                    where args.position > 0
	              and args.object_name = upper(:object_name)
	              and args.package_name = upper(:package_name))
	   and cols.table_name = t.table_name
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/package-procs-oracle.xql}
dbqd.acs-subsite.tcl.package-procs-oracle.package_instantiate_object.create_object {dbqd.acs-subsite.tcl.package-procs-oracle.package_instantiate_object.create_object \n\ \ \ \ \ \ \n\ \ \ \ BEGIN\n\ \ \ \ \ \ :1\ :=\ \$\{package_name\}.new(\[plsql_utility::generate_attribute_parameter_call\ \\\n\t\ \ \ \ \ \ -prepend\ \":\"\ \\\n\t\ \ \ \ \ \ -indent\ \[expr\ \[string\ length\ \$package_name\]\ +\ 29\]\ \\\n\t\ \ \ \ \ \ \$pieces\]\n\ \ \ \ \ \ )\;\n\ \ \ \ END\;\ \n\ \ \ \ \n\ \ \ \ \ \  {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/package-procs-oracle.xql}
dbqd.acs-subsite.tcl.package-procs-oracle.package_generate_body.body {dbqd.acs-subsite.tcl.package-procs-oracle.package_generate_body.body \n\ncreate\ or\ replace\ package\ body\ \$\{package_name\}\nas\n\[package_insert_default_comment\]\n\ \ function\ new\ (\ \n\ \ \ \ \ \ \ \ \ \[plsql_utility::generate_attribute_parameters\ \$attribute_list\]\n\ \ )\ return\ \$\{table_name\}.\$\{id_column\}%TYPE\n\ \ is\n\ \ \ \ v_\$id_column\ \$\{table_name\}.\$\{id_column\}%TYPE\;\n\ \ begin\n\n\ \ \ \ v_\$id_column\ :=\ \$\{supertype_package_name\}.new\ (\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \[plsql_utility::generate_attribute_parameter_call_from_attributes\ \\\n\t\t\t\ \ \ \ \ -prepend\ \"new.\"\ \\\n\t\t\t\ \ \ \ \ -indent\ 21\ \\\n\t\t\t\ \ \ \ \ \$supertype_attr_list\]\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ )\;\n\n\ \ \ \ insert\ into\ \$\{table_name\}\ \n\ \ \ \ (\$id_column\[plsql_utility::generate_attribute_dml\ -ignore\ \[list\ \$id_column\]\ \$table_name\ \$attribute_list\])\ \n\ \ \ \ values\ \n\ \ \ \ (v_\$id_column\[plsql_utility::generate_attribute_dml\ -prepend\ \"new.\"\ -ignore\ \[list\ \$id_column\]\ \$table_name\ \$attribute_list\])\;\n\n\ \ \ \ return\ v_\$id_column\;\n\n\ \ end\ new\;\n\n\ \ procedure\ del\ (\n\ \ \ \ \$id_column\ \ \ \ \ \ in\ \$\{table_name\}.\$\{id_column\}%TYPE\n\ \ )\n\ \ is\ \n\ \ begin\n\n\ \ \ \ \$\{supertype_package_name\}.del(\ \$package_name.del.\$id_column\ )\;\n\n\ \ end\ del\;\n\nend\ \$\{package_name\}\;\n\ \ \ \ \n\ \ \ \ \ \  {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/package-procs-oracle.xql}
dbqd.acs-subsite.tcl.package-procs-oracle.package_generate_spec.spec {dbqd.acs-subsite.tcl.package-procs-oracle.package_generate_spec.spec \n\ncreate\ or\ replace\ package\ \$package_name\ as\n\[package_insert_default_comment\]\n\ \ function\ new\ (\n\ \ \ \ \ \ \ \ \ \[plsql_utility::generate_attribute_parameters\ \[package_create_attribute_list\ \\\n\t\t\ -supertype\ \$supertype\ \\\n\t\t\ -object_name\ \"NEW\"\ \\\n\t\t\ -table\ \$table_name\ \\\n\t\t\ -column\ \$id_column\ \\\n\t\t\ \$object_type\]\]\n\ )\ return\ \$\{table_name\}.\$\{id_column\}%TYPE\;\n\n\ \ procedure\ del\ (\n\ \ \ \ \$id_column\ \ \ \ \ \ in\ \$\{table_name\}.\$\{id_column\}%TYPE\n\ \ )\;\nEND\ \$\{package_name\}\;\n\ \ \ \ \n\ \ \ \ \ \  {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/package-procs-oracle.xql}
dbqd.acs-subsite.tcl.package-procs-oracle.package_attribute_default.creation_date {dbqd.acs-subsite.tcl.package-procs-oracle.package_attribute_default.creation_date sysdate {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/package-procs-oracle.xql}
dbqd.acs-subsite.tcl.package-procs-oracle.package_attribute_default.last_modified {dbqd.acs-subsite.tcl.package-procs-oracle.package_attribute_default.last_modified sysdate {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/package-procs-oracle.xql}
dbqd.acs-subsite.tcl.package-procs.package_type_dynamic_p.object_type_dynamic_p {dbqd.acs-subsite.tcl.package-procs.package_type_dynamic_p.object_type_dynamic_p {
      
	select case when exists (select 1 
                                   from acs_object_types t
                                  where t.dynamic_p = 't'
                                    and t.object_type = :object_type)
	            then 1 else 0 end
	  
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/package-procs-postgresql.xql}
dbqd.acs-subsite.tcl.package-procs.package_create_attribute_list.select_all_attributes {dbqd.acs-subsite.tcl.package-procs.package_create_attribute_list.select_all_attributes {

	select upper(coalesce(attr.table_name,t.table_name)) as attr_table_name, 
	       upper(coalesce(attr.column_name, attr.attribute_name)) as attr_column_name, 
	       attr.ancestor_type, attr.min_n_values, attr.default_value
	  from acs_object_type_attributes attr, 
	       (select t2.object_type, t2.table_name, (tree_level(t1.tree_sortkey) - tree_level(t2.tree_sortkey)) + 1 as type_level
	          from acs_object_types t1, acs_object_types t2
		 where t1.tree_sortkey between t2.tree_sortkey and tree_right(t2.tree_sortkey)
		   and t1.object_type = :object_type) t
         where attr.ancestor_type = t.object_type
           and attr.object_type = :object_type
        order by t.type_level 
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/package-procs-postgresql.xql}
dbqd.acs-subsite.tcl.package-procs.package_recreate_hierarchy.select_object_types {dbqd.acs-subsite.tcl.package-procs.package_recreate_hierarchy.select_object_types {

	select t2.object_type
	  from acs_object_types t1, acs_object_types t2
	 where t2.dynamic_p = 't'
	   and t2.tree_sortkey between t1.tree_sortkey and tree_right(t1.tree_sortkey)
	   and t1.object_type = :object_type
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/package-procs-postgresql.xql}
dbqd.acs-subsite.tcl.package-procs.package_create.package_valid_p {dbqd.acs-subsite.tcl.package-procs.package_create.package_valid_p {
      
	    select case when exists (select 1 
                                       from user_objects 
                                      where status = 'INVALID'
                                        and object_name = upper(:package_name)
                                        and object_type = upper(:type))
                        then 0 else 1 end
	      
	
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/package-procs-postgresql.xql}
dbqd.acs-subsite.tcl.package-procs.package_object_view_reset.select_ancestor_types {dbqd.acs-subsite.tcl.package-procs.package_object_view_reset.select_ancestor_types {

	select t2.object_type as ancestor_type
	  from acs_object_types t1, acs_object_types t2
	 where t1.tree_sortkey between t2.tree_sortkey and tree_right(t2.tree_sortkey)
	   and t1.object_type = :object_type
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/package-procs-postgresql.xql}
dbqd.acs-subsite.tcl.package-procs.package_object_view_reset.select_sub_types {dbqd.acs-subsite.tcl.package-procs.package_object_view_reset.select_sub_types {

	select t2.object_type as sub_type
	  from acs_object_types t1, acs_object_types t2
	 where t2.tree_sortkey between t1.tree_sortkey and tree_right(t1.tree_sortkey)
	   and t1.object_type = :object_type 
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/package-procs-postgresql.xql}
dbqd.acs-subsite.tcl.package-procs.package_insert_default_comment.select_comments {dbqd.acs-subsite.tcl.package-procs.package_insert_default_comment.select_comments {
      
	    select acs_object__name(:user_id) as author,
	           current_timestamp as creation_date
	      
	
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/package-procs-postgresql.xql}
dbqd.acs-subsite.tcl.package-procs.package_insert_default_comment.select_comments {dbqd.acs-subsite.tcl.package-procs.package_insert_default_comment.select_comments {
      
	    select acs_object__name(:user_id) as author,
	           current_timestamp as creation_date
	      
	
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/package-procs-postgresql.xql}
dbqd.acs-subsite.tcl.package-procs.package_object_attribute_list.attributes_select {dbqd.acs-subsite.tcl.package-procs.package_object_attribute_list.attributes_select {

	select a.attribute_id, 
	       coalesce(a.table_name, t.table_name) as table_name,
	       coalesce(a.column_name, a.attribute_name) as attribute_name, 
	       a.pretty_name, 
	       a.datatype, 
	       case when a.min_n_values = 0 then 'f' else 't' end as required_p, 
               a.default_value, 
               t.table_name as object_type_table_name, 
               t.id_column as object_type_id_column
          from acs_object_type_attributes a, 
               (select t.object_type, t.table_name, t.id_column, tree_level(t.tree_sortkey) as type_level
                from acs_object_types t, acs_object_types t2
		where t.tree_sortkey between t2.tree_sortkey and tree_right(t2.tree_sortkey)
		  and t2.object_type = :start_with) t
         where a.object_type = :object_type
           and t.object_type = a.ancestor_type $storage_clause
         order by type_level, attribute_id
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/package-procs-postgresql.xql}
dbqd.acs-subsite.tcl.package-procs.package_table_columns_for_type.select_object_type_param_list {dbqd.acs-subsite.tcl.package-procs.package_table_columns_for_type.select_object_type_param_list {

	select cols.table_name, cols.column_name
	  from user_tab_columns cols, 
	       (select upper(t2.table_name) as table_name
	          from acs_object_types t1, acs_object_types t2
		 where t1.tree_sortkey between t2.tree_sortkey and tree_right(t2.tree_sortkey)
		   and t1.object_type = :object_type) t
	 where cols.column_name in
	          (select args.arg_name
                     from acs_function_args args
                    where args.function = upper(:package_name) || '__' || upper(:object_name))
	   and cols.table_name = t.table_name
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/package-procs-postgresql.xql}
dbqd.acs-subsite.tcl.package-procs.package_plsql_args.select_object_type_param_list {dbqd.acs-subsite.tcl.package-procs.package_plsql_args.select_object_type_param_list {
	select args.arg_name
        from acs_function_args args
        where args.function = upper(:package_name) || '__' || upper(:function_name)
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/package-procs-postgresql.xql}
dbqd.acs-subsite.tcl.package-procs.package_create.package_valid_p {dbqd.acs-subsite.tcl.package-procs.package_create.package_valid_p {

select 1
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/package-procs-postgresql.xql}
dbqd.acs-subsite.tcl.package-procs.package_instantiate_object.create_object {dbqd.acs-subsite.tcl.package-procs.package_instantiate_object.create_object \n\n\tselect\ \$\{package_name\}__new(\[plpgsql_utility::generate_attribute_parameter_call\ \\\n\t\t-prepend\ \":\"\ \\\n\t\t\$\{package_name\}__new\ \\\n\t\t\$pieces\])\n\n\ \ \ \ \ \  {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/package-procs-postgresql.xql}
dbqd.acs-subsite.tcl.package-procs.package_generate_body.select_supertype_function_params {dbqd.acs-subsite.tcl.package-procs.package_generate_body.select_supertype_function_params {
      
	select args.arg_name
	  from acs_function_args args
         where args.function =upper(:supertype_package_name) || '__NEW'
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/package-procs-postgresql.xql}
dbqd.acs-subsite.tcl.package-procs.package_generate_body.body {dbqd.acs-subsite.tcl.package-procs.package_generate_body.body \n\nbegin\n\nperform\ drop_package('\$\{package_name\}')\;\n\nperform\ define_function_args('\$\{package_name\}__new','\[plpgsql_utility::define_function_args\ \$attribute_list\]')\;\n\ncreate\ function\ \$\{package_name\}__new(\[plpgsql_utility::generate_function_signature\ \$attribute_list\])\nreturns\ \[plpgsql_utility::table_column_type\ \$\{table_name\}\ \$\{id_column\}\]\ as\ '\ndeclare\n\ \ \ \ \[plpgsql_utility::generate_attribute_parameters\ \$attribute_list\]\;\n\ \ \ \ v_\$id_column\ \$\{table_name\}.\$\{id_column\}%TYPE\;\nbegin\n\n\ \ \ \ v_\$id_column\ :=\ \$\{supertype_package_name\}__new\ (\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \[plpgsql_utility::generate_attribute_parameter_call_from_attributes\ \\\n\t\t\t\ \ \ \ \ -prepend\ \"p_\"\ \\\n\t\t\t\ \ \ \ \ \"\$\{supertype_package_name\}__new\"\ \\\n\t\t\t\ \ \ \ \ \$supertype_attr_list\]\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ )\;\n\n\ \ \ \ insert\ into\ \$\{table_name\}\ \n\ \ \ \ (\$id_column\[plsql_utility::generate_attribute_dml\ -ignore\ \[list\ \$id_column\]\ \$table_name\ \$attribute_list\])\ \n\ \ \ \ values\ \n\ \ \ \ (v_\$id_column\[plsql_utility::generate_attribute_dml\ -prepend\ \"p_\"\ -ignore\ \[list\ \$id_column\]\ \$table_name\ \$attribute_list\])\;\n\n\ \ \ \ return\ v_\$id_column\;\n\nend\;'\ language\ 'plpgsql'\;\n\ncreate\ function\ \$\{package_name\}__delete\ (\[plpgsql_utility::table_column_type\ \$\{table_name\}\ \$\{id_column\}\])\nreturns\ integer\ as\ '\ndeclare\n\ \ \ \ p_\$\{id_column\}\ \ \ \ \ \ alias\ for\ \[plpgsql_utility::dollar\]1\;\nbegin\n\n\ \ \ \ perform\ \$\{supertype_package_name\}__delete(\ p_\$\{id_column\}\ )\;\n\ \ \ \ return\ 1\;\n\nend\;'\ language\ 'plpgsql'\;\n\nreturn\ null\;\nend\;\n\ \ \ \ \n\ \ \ \ \ \  {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/package-procs-postgresql.xql}
dbqd.acs-subsite.tcl.package-procs.package_generate_spec.spec {dbqd.acs-subsite.tcl.package-procs.package_generate_spec.spec {

select 1;
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/package-procs-postgresql.xql}
dbqd.acs-subsite.tcl.package-procs.package_attribute_default.creation_date {dbqd.acs-subsite.tcl.package-procs.package_attribute_default.creation_date now() {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/package-procs-postgresql.xql}
dbqd.acs-subsite.tcl.package-procs.package_attribute_default.last_modified {dbqd.acs-subsite.tcl.package-procs.package_attribute_default.last_modified now() {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/package-procs-postgresql.xql}
dbqd.acs-subsite.tcl.package-procs.package_create_attribute_list.select_type_info {dbqd.acs-subsite.tcl.package-procs.package_create_attribute_list.select_type_info {
      
      select t.table_name as table, t.id_column as column
      from acs_object_types t
      where t.object_type = :object_type
      
    } {} {} {} c:/web/openacs/packages/acs-subsite/tcl/package-procs.xql}
dbqd.acs-subsite.tcl.package-procs.package_create.select_package_name {dbqd.acs-subsite.tcl.package-procs.package_create.select_package_name {
      
      select t.package_name
      from acs_object_types t
      where t.object_type = :object_type
      
    } {} {} {} c:/web/openacs/packages/acs-subsite/tcl/package-procs.xql}
dbqd.acs-subsite.tcl.package-procs.package_create_attribute_list.select_type_info {dbqd.acs-subsite.tcl.package-procs.package_create_attribute_list.select_type_info {
      
      select t.table_name, t.id_column, lower(t.package_name) as package_name, t.supertype
      from acs_object_types t
      where t.object_type = :object_type
      
    } {} {} {} c:/web/openacs/packages/acs-subsite/tcl/package-procs.xql}
dbqd.acs-subsite.tcl.package-procs.package_create_attribute_list.select_type_info {dbqd.acs-subsite.tcl.package-procs.package_create_attribute_list.select_type_info {
      
      select t.table_name, t.id_column, lower(t.package_name) as package_name, t.supertype
      from acs_object_types t
      where t.object_type = :object_type
      
    } {} {} {} c:/web/openacs/packages/acs-subsite/tcl/package-procs.xql}
dbqd.acs-subsite.tcl.package-procs.package_create_attribute_list.select_type_info {dbqd.acs-subsite.tcl.package-procs.package_create_attribute_list.select_type_info {
      
      select t.table_name, t.id_column, lower(t.package_name) as package_name, t.supertype
      from acs_object_types t
      where t.object_type = :object_type
      
    } {} {} {} c:/web/openacs/packages/acs-subsite/tcl/package-procs.xql}
dbqd.acs-subsite.tcl.package-procs.package_create_attribute_list.select_type_info {dbqd.acs-subsite.tcl.package-procs.package_create_attribute_list.select_type_info {
      
      select t.table_name, t.id_column, lower(t.package_name) as package_name, t.supertype
      from acs_object_types t
      where t.object_type = :object_type
      
    } {} {} {} c:/web/openacs/packages/acs-subsite/tcl/package-procs.xql}
dbqd.acs-subsite.tcl.package-procs.package_create_attribute_list.select_type_info {dbqd.acs-subsite.tcl.package-procs.package_create_attribute_list.select_type_info {
      
      select t.table_name, t.id_column, lower(t.package_name) as package_name, t.supertype
      from acs_object_types t
      where t.object_type = :object_type
      
    } {} {} {} c:/web/openacs/packages/acs-subsite/tcl/package-procs.xql}
dbqd.acs-subsite.tcl.package-procs.package_instantiate_object.package_select {dbqd.acs-subsite.tcl.package-procs.package_instantiate_object.package_select {
      
      select t.package_name
      from acs_object_types t
      where t.object_type = :object_type
      
    } {} {} {} c:/web/openacs/packages/acs-subsite/tcl/package-procs.xql}
dbqd.acs-subsite.tcl.package-procs.package_object_view_helper.select_type_info {dbqd.acs-subsite.tcl.package-procs.package_object_view_helper.select_type_info {

      select t.table_name, t.id_column
      from acs_object_types t
      where t.object_type = :object_type
      
    } {} {} {} c:/web/openacs/packages/acs-subsite/tcl/package-procs.xql}
{dbqd.acs-subsite.tcl.package-procs.package_plsql_args.select_type_info } {{dbqd.acs-subsite.tcl.package-procs.package_plsql_args.select_type_info } {
      select t.package_name
      from acs_object_types t 
      where t.object_type = :object_type
    } {} {} {} c:/web/openacs/packages/acs-subsite/tcl/package-procs.xql}
dbqd.acs-subsite.tcl.party-procs-oracle.party::types_valid_for_rel_type_multirow.start_with_clause_party {dbqd.acs-subsite.tcl.party-procs-oracle.party::types_valid_for_rel_type_multirow.start_with_clause_party {
        (object_type = 'group' or object_type = 'person')
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/party-procs-oracle.xql}
dbqd.acs-subsite.tcl.party-procs-oracle.party::types_valid_for_rel_type_multirow.start_with_clause {dbqd.acs-subsite.tcl.party-procs-oracle.party::types_valid_for_rel_type_multirow.start_with_clause {
        object_type = :start_with
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/party-procs-oracle.xql}
dbqd.acs-subsite.tcl.party-procs-oracle.party::types_valid_for_rel_type_multirow.select_sub_rel_types {dbqd.acs-subsite.tcl.party-procs-oracle.party::types_valid_for_rel_type_multirow.select_sub_rel_types {
      
	select 
	    types.pretty_name, 
	    types.object_type, 
	    types.tree_level, 
	    types.indent,
	    case when valid_types.object_type = null then 0 else 1 end as valid_p
	from 
	    (select
	        t.pretty_name, t.object_type, level as tree_level,
	        replace(lpad(' ', (level - 1) * 4), 
	                ' ', '&nbsp;') as indent,
	        rownum as tree_rownum
	     from 
	        acs_object_types t
	     connect by 
	        prior t.object_type = t.supertype
	     start with 
	        $start_with_clause ) types,
	    (select 
	        object_type 
	     from 
	        rel_types_valid_obj_two_types
	     where 
	        rel_type = :rel_type ) valid_types
	where 
	    types.object_type = valid_types.object_type(+)
	order by tree_rownum
	
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/party-procs-oracle.xql}
dbqd.acs-subsite.tcl.party-procs.party::types_valid_for_rel_type_multirow.start_with_clause_party {dbqd.acs-subsite.tcl.party-procs.party::types_valid_for_rel_type_multirow.start_with_clause_party {
        (t1.object_type = 'group' or t1.object_type = 'person')
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/party-procs-postgresql.xql}
dbqd.acs-subsite.tcl.party-procs.party::types_valid_for_rel_type_multirow.start_with_clause {dbqd.acs-subsite.tcl.party-procs.party::types_valid_for_rel_type_multirow.start_with_clause {
        t1.object_type = :start_with
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/party-procs-postgresql.xql}
dbqd.acs-subsite.tcl.party-procs.party::types_valid_for_rel_type_multirow.select_sub_rel_types {dbqd.acs-subsite.tcl.party-procs.party::types_valid_for_rel_type_multirow.select_sub_rel_types {

	select types.pretty_name, 
	       types.object_type, 
	       types.tree_level, 
	       types.indent,
	       case when valid_types.object_type = null then 0 else 1 end as valid_p
	  from (select t2.pretty_name,
		       t2.object_type,
		       tree_level(t2.tree_sortkey) - tree_level(t1.tree_sortkey) as tree_level,
		       repeat('&nbsp;', (tree_level(t2.tree_sortkey) - tree_level(t1.tree_sortkey)) * 4) as indent,
		       t2.tree_sortkey
		  from acs_object_types t1,
		       acs_object_types t2
		 where t2.tree_sortkey between t1.tree_sortkey and tree_right(t1.tree_sortkey)
	           and $start_with_clause ) types
                  left outer join
	            (select object_type 
		       from rel_types_valid_obj_two_types
		      where rel_type = :rel_type ) valid_types
		    using (object_type)
         order by types.tree_sortkey
	
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/party-procs-postgresql.xql}
dbqd.acs-subsite.tcl.party-procs.new.package_select {dbqd.acs-subsite.tcl.party-procs.new.package_select {
      
	    select t.package_name, lower(t.id_column) as id_column
	      from acs_object_types t
	     where t.object_type = :party_type
	
      } {} {} {} c:/web/openacs/packages/acs-subsite/tcl/party-procs.xql}
dbqd.acs-subsite.tcl.plpgsql-utility-procs.plpgsql_utility::get_function_args.get_function_args {dbqd.acs-subsite.tcl.plpgsql-utility-procs.plpgsql_utility::get_function_args.get_function_args {
      select arg_name, arg_default
      from acs_function_args
      where function = upper(:function_name)
      order by arg_seq
    } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/plpgsql-utility-procs-postgresql.xql}
dbqd.acs-subsite.tcl.plpgsql-utility-procs.plpgsql_utility::table_column_type.fetch_type {dbqd.acs-subsite.tcl.plpgsql-utility-procs.plpgsql_utility::table_column_type.fetch_type {
      select data_type
      from user_tab_columns
      where table_name = upper(:table)
      and column_name = upper(:column)
    } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/plpgsql-utility-procs-postgresql.xql}
dbqd.acs-subsite.tcl.plsql-utility-procs-oracle.object_type_exists_p.object_type_exists_p {dbqd.acs-subsite.tcl.plsql-utility-procs-oracle.object_type_exists_p.object_type_exists_p {
      
	    select case when exists (select 1 from acs_object_types where object_type=:object_type)
                        then 1
                        else 0
                   end
              from dual
	
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/plsql-utility-procs-oracle.xql}
dbqd.acs-subsite.tcl.plsql-utility-procs.object_type_exists_p.object_type_exists_p {dbqd.acs-subsite.tcl.plsql-utility-procs.object_type_exists_p.object_type_exists_p {
      
	    select case when exists (select 1 from acs_object_types where object_type=:object_type)
                        then 1
                        else 0
                   end
              
	
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/plsql-utility-procs-postgresql.xql}
dbqd.acs-subsite.tcl.rel-segments-procs-oracle.rel_segments_new.create_rel_segment {dbqd.acs-subsite.tcl.rel-segments-procs-oracle.rel_segments_new.create_rel_segment {
      
      declare
      begin 
	:1 := rel_segment.new(segment_name => :segment_name,
                                  group_id => :group_id,
                                  context_id => :context_id,
                                  rel_type => :rel_type,
                                  creation_user => :creation_user,
                                  creation_ip => :creation_ip
                                 );
      end;
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/rel-segments-procs-oracle.xql}
dbqd.acs-subsite.tcl.rel-segments-procs-oracle.rel_segments_delete.constraint_delete {dbqd.acs-subsite.tcl.rel-segments-procs-oracle.rel_segments_delete.constraint_delete {
      
	    begin rel_constraint.del(:constraint_id); end;
	
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/rel-segments-procs-oracle.xql}
dbqd.acs-subsite.tcl.rel-segments-procs-oracle.rel_segments_delete.rel_segment_delete {dbqd.acs-subsite.tcl.rel-segments-procs-oracle.rel_segments_delete.rel_segment_delete {
      
	begin rel_segment.del(:segment_id); end;
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/rel-segments-procs-oracle.xql}
dbqd.acs-subsite.tcl.rel-segments-procs.rel_segments_new.create_rel_segment {dbqd.acs-subsite.tcl.rel-segments-procs.rel_segments_new.create_rel_segment {

	select rel_segment__new(
		null,
		'rel_segment',
		now(),
		:creation_user,
		:creation_ip,
		null,
		null,
		:segment_name,
		:group_id,
		:rel_type,
		:context_id
)
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/rel-segments-procs-postgresql.xql}
dbqd.acs-subsite.tcl.rel-segments-procs.rel_segments_delete.constraint_delete {dbqd.acs-subsite.tcl.rel-segments-procs.rel_segments_delete.constraint_delete {

	    select rel_constraint__delete(:constraint_id)
	
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/rel-segments-procs-postgresql.xql}
dbqd.acs-subsite.tcl.rel-segments-procs.rel_segments_delete.rel_segment_delete {dbqd.acs-subsite.tcl.rel-segments-procs.rel_segments_delete.rel_segment_delete {

	select rel_segment__delete(:segment_id)
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/rel-segments-procs-postgresql.xql}
dbqd.acs-subsite.tcl.rel-segments-procs.rel_segments_delete.select_dependant_constraints {dbqd.acs-subsite.tcl.rel-segments-procs.rel_segments_delete.select_dependant_constraints {
      
	select c.constraint_id
	  from rel_constraints c
	 where c.required_rel_segment = :segment_id
    
      } {} {} {} c:/web/openacs/packages/acs-subsite/tcl/rel-segments-procs.xql}
dbqd.acs-subsite.tcl.rel-types-procs-oracle.rel_type_dynamic_p {dbqd.acs-subsite.tcl.rel-types-procs-oracle.rel_type_dynamic_p {
      
	select case when exists (select 1 
                                   from acs_object_types t
                                  where t.dynamic_p = 't'
                                    and t.object_type = :value)
	            then 1 else 0 end
	  from dual
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/rel-types-procs-oracle.xql}
dbqd.acs-subsite.tcl.rel-types-procs-oracle.rel_types::new.drop_type {dbqd.acs-subsite.tcl.rel-types-procs-oracle.rel_types::new.drop_type {
begin acs_rel_type.drop_type(:rel_type); end;
} {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/rel-types-procs-oracle.xql}
dbqd.acs-subsite.tcl.rel-types-procs-oracle.rel_types::new.create_type {dbqd.acs-subsite.tcl.rel-types-procs-oracle.rel_types::new.create_type {
	    begin
	    acs_rel_type.create_type (	
            rel_type          => :rel_type,
            supertype         => :supertype,
            pretty_name       => :pretty_name,
            pretty_plural     => :pretty_plural,
            table_name        => :table_name,
            id_column         => 'rel_id',
            package_name      => :package_name,
            object_type_one   => :object_type_one, 
            role_one          => :role_one,
            min_n_rels_one    => :min_n_rels_one,
            max_n_rels_one    => :max_n_rels_one,
            object_type_two   => :object_type_two, 
            role_two          => :role_two,
            min_n_rels_two    => :min_n_rels_two,
            max_n_rels_two    => :max_n_rels_two
	    );
	    end;
} {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/rel-types-procs-oracle.xql}
dbqd.acs-subsite.tcl.rel-types-procs.rel_type_dynamic_p {dbqd.acs-subsite.tcl.rel-types-procs.rel_type_dynamic_p {
      
	select case when exists (select 1 
                                   from acs_object_types t
                                  where t.dynamic_p = 't'
                                    and t.object_type = :value)
	            then 1 else 0 end
	  
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/rel-types-procs-postgresql.xql}
dbqd.acs-subsite.tcl.rel-types-procs.rel_types::additional_rel_types_group_type_p.group_rel_type_exists {dbqd.acs-subsite.tcl.rel-types-procs.rel_types::additional_rel_types_group_type_p.group_rel_type_exists {

             select case when exists (select 1
                                      from acs_object_types t1, acs_object_types t2, group_type_rels g
                                      where g.group_type = :group_type
                                        and t2.object_type <> g.rel_type
				        and t1.object_type in ('membership_rel','composition_rel')
				        and t2.tree_sortkey between t1.tree_sortkey and tree_right(t1.tree_sortkey))
                    then 1 else 0 end
      
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/rel-types-procs-postgresql.xql}
dbqd.acs-subsite.tcl.rel-types-procs.rel_types::new.drop_type {dbqd.acs-subsite.tcl.rel-types-procs.rel_types::new.drop_type {
	select acs_rel_type__drop_type(:rel_type, 'f')
} {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/rel-types-procs-postgresql.xql}
dbqd.acs-subsite.tcl.rel-types-procs.rel_types::new.create_type {dbqd.acs-subsite.tcl.rel-types-procs.rel_types::new.create_type {
select acs_rel_type__create_type (	
	:rel_type,
	:pretty_name,
	:pretty_plural,
	:supertype,
	:table_name,
	'rel_id',
	:package_name,
	:object_type_one,
	:role_one,
	:min_n_rels_one,
	:max_n_rels_one,
	:object_type_two,
	:role_two,
	:min_n_rels_two,
	:max_n_rels_two
);
} {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/rel-types-procs-postgresql.xql}
dbqd.acs-subsite.tcl.rel-types-procs.rel_types::new.create_table {dbqd.acs-subsite.tcl.rel-types-procs.rel_types::new.create_table {
	create table $table_name (
            rel_id integer constraint $fk_constraint_name
                   references $references_table ($references_column)
                   constraint $pk_constraint_name primary key
	);
} {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/rel-types-procs-postgresql.xql}
dbqd.acs-subsite.tcl.rel-types-procs.new.parent_rel_type {dbqd.acs-subsite.tcl.rel-types-procs.new.parent_rel_type {
      
	    select table_name as references_table,
	           id_column as references_column
	      from acs_object_types
	     where object_type=:supertype
	
      } {} {} {} c:/web/openacs/packages/acs-subsite/tcl/rel-types-procs.xql}
dbqd.acs-subsite.tcl.rel-types-procs.rel_types::new.update_type {dbqd.acs-subsite.tcl.rel-types-procs.rel_types::new.update_type {
update acs_object_types set dynamic_p='t' where object_type = :rel_type
} {} {} {} c:/web/openacs/packages/acs-subsite/tcl/rel-types-procs.xql}
dbqd.acs-subsite.tcl.rel-types-procs.rel_types::add_permissible.insert_rel_type {dbqd.acs-subsite.tcl.rel-types-procs.rel_types::add_permissible.insert_rel_type {
insert into group_type_rels
(group_rel_type_id, group_type, rel_type)
values
(acs_object_id_seq.nextval, :group_type, :rel_type)
} {} {} {} c:/web/openacs/packages/acs-subsite/tcl/rel-types-procs.xql}
dbqd.acs-subsite.tcl.rel-types-procs.rel_types::remove_permissible.delete_rel_type {dbqd.acs-subsite.tcl.rel-types-procs.rel_types::remove_permissible.delete_rel_type {
delete from group_type_rels
where group_type= :group_type
and rel_type= :rel_type
} {} {} {} c:/web/openacs/packages/acs-subsite/tcl/rel-types-procs.xql}
dbqd.acs-subsite.tcl.relation-procs-oracle.relation_add.select_rel_violation {dbqd.acs-subsite.tcl.relation-procs-oracle.relation_add.select_rel_violation {
      
	    select rel_constraint.violation(:rel_id) from dual
	
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/relation-procs-oracle.xql}
dbqd.acs-subsite.tcl.relation-procs-oracle.relation_remove.select_rel_info {dbqd.acs-subsite.tcl.relation-procs-oracle.relation_remove.select_rel_info {
      
	select s.segment_id, r.object_id_two as party_id, t.package_name
	  from rel_segments s, acs_rels r, acs_object_types t
	 where r.object_id_one = s.group_id(+)
	  and r.rel_type = s.rel_type(+)
	  and r.rel_type = t.object_type
	  and r.rel_id = :rel_id
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/relation-procs-oracle.xql}
dbqd.acs-subsite.tcl.relation-procs-oracle.relation_remove.relation_delete {dbqd.acs-subsite.tcl.relation-procs-oracle.relation_remove.relation_delete {
      begin ${package_name}.del(:rel_id); end;
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/relation-procs-oracle.xql}
dbqd.acs-subsite.tcl.relation-procs-oracle.relation_remove.select_rel_info {dbqd.acs-subsite.tcl.relation-procs-oracle.relation_remove.select_rel_info {
      
	select s.segment_id, r.object_id_two as party_id, t.package_name
	  from rel_segments s, acs_rels r, acs_object_types t
	 where r.object_id_one = s.group_id(+)
	  and r.rel_type = s.rel_type(+)
	  and r.rel_type = t.object_type
	  and r.rel_id = :rel_id
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/relation-procs-oracle.xql}
dbqd.acs-subsite.tcl.relation-procs-oracle.relation_segment_has_dependant.others_depend_p {dbqd.acs-subsite.tcl.relation-procs-oracle.relation_segment_has_dependant.others_depend_p {
      
	    select case when exists
	             (select 1 from rc_violations_by_removing_rel r where r.rel_id = :rel_id)
	           then 1 else 0 end
	      from dual
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/relation-procs-oracle.xql}
dbqd.acs-subsite.tcl.relation-procs-oracle.relation_type_is_valid_to_group_p.rel_type_valid_p {dbqd.acs-subsite.tcl.relation-procs-oracle.relation_type_is_valid_to_group_p.rel_type_valid_p {
      
	    select case when exists
	             (select 1 from rc_valid_rel_types r 
                      where r.group_id = :group_id 
                        and r.rel_type = :rel_type)
	           then 1 else 0 end
	      from dual
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/relation-procs-oracle.xql}
dbqd.acs-subsite.tcl.relation-procs-oracle.relation_types_valid_to_group_multirow.select_sub_rel_types {dbqd.acs-subsite.tcl.relation-procs-oracle.relation_types_valid_to_group_multirow.select_sub_rel_types {
      
	select 
	    pretty_name, object_type, level, indent,
	    case when valid_types.rel_type = null then 0 else 1 end as valid_p
	from 
	    (select
	        t.pretty_name, t.object_type, level,
	        replace(lpad(' ', (level - 1) * 4), 
	                ' ', '&nbsp;') as indent,
	        rownum as tree_rownum
	     from 
	        acs_object_types t
	     connect by 
	        prior t.object_type = t.supertype
	     start with 
	        t.object_type = :start_with ) types,
	    (select 
	        rel_type 
	     from 
	        rc_valid_rel_types
	     where 
	        group_id = :group_id ) valid_types
	where 
	    types.object_type = valid_types.rel_type(+)
	order by tree_rownum
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/relation-procs-oracle.xql}
dbqd.acs-subsite.tcl.relation-procs-oracle.relation_required_segments_multirow.select_required_rel_segments {dbqd.acs-subsite.tcl.relation-procs-oracle.relation_required_segments_multirow.select_required_rel_segments {
      
	select distinct s.segment_id, s.group_id, s.rel_type,
	       g.group_name, g.join_policy, t.pretty_name as rel_type_pretty_name,
               nvl(dl.dependency_level, 0)
	from rc_all_constraints c, 
             (select rel_segment, required_rel_segment
              from rc_segment_required_seg_map
	      where rel_side = 'two'
	      UNION ALL
	      select segment_id, segment_id
	      from rel_segments) map,
             rel_segments s, 
             rc_segment_dependency_levels dl,
	     groups g, acs_object_types t
	where c.group_id = :group_id
	  and c.rel_type = :rel_type
	  and c.required_rel_segment = map.rel_segment
          and map.required_rel_segment = s.segment_id
          and s.segment_id = dl.segment_id(+)
	  and g.group_id = s.group_id
	  and t.object_type = s.rel_type
        order by nvl(dl.dependency_level, 0)
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/relation-procs-oracle.xql}
dbqd.acs-subsite.tcl.relation-procs.relation_add.select_rel_violation {dbqd.acs-subsite.tcl.relation-procs.relation_add.select_rel_violation {
      
	    select rel_constraint__violation(:rel_id) 
	
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/relation-procs-postgresql.xql}
dbqd.acs-subsite.tcl.relation-procs.relation_remove.relation_delete {dbqd.acs-subsite.tcl.relation-procs.relation_remove.relation_delete {
      begin perform ${package_name}__delete(:rel_id); return null; end;
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/relation-procs-postgresql.xql}
dbqd.acs-subsite.tcl.relation-procs.relation_segment_has_dependant.others_depend_p {dbqd.acs-subsite.tcl.relation-procs.relation_segment_has_dependant.others_depend_p {
      
	    select case when exists
	             (select 1 from rc_violations_by_removing_rel r where r.rel_id = :rel_id)
	           then 1 else 0 end
	      
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/relation-procs-postgresql.xql}
dbqd.acs-subsite.tcl.relation-procs.relation_type_is_valid_to_group_p.rel_type_valid_p {dbqd.acs-subsite.tcl.relation-procs.relation_type_is_valid_to_group_p.rel_type_valid_p {
      
	    select case when exists
	             (select 1 from rc_valid_rel_types r 
                      where r.group_id = :group_id 
                        and r.rel_type = :rel_type)
	           then 1 else 0 end
	      
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/relation-procs-postgresql.xql}
dbqd.acs-subsite.tcl.relation-procs.relation_types_valid_to_group_multirow.select_sub_rel_types {dbqd.acs-subsite.tcl.relation-procs.relation_types_valid_to_group_multirow.select_sub_rel_types {    
	select
		pretty_name, object_type, level, indent,
		case when valid_types.rel_type = null then 0 else 1 end as valid_p
	from 
		(select
			t2.pretty_name, t2.object_type, tree_level(t2.tree_sortkey) - tree_level(t1.tree_sortkey) as level,
		        repeat('&nbsp;', (tree_level(t2.tree_sortkey) - tree_level(t1.tree_sortkey)) * 4) as indent,
	        	t2.tree_sortkey as sortkey
		from
			acs_object_types t1,
			acs_object_types t2
		where	t2.tree_sortkey between t1.tree_sortkey and tree_right(t1.tree_sortkey)
		  and   t1.object_type = :start_with) types left join
		(select
			rel_type
		from
			rc_valid_rel_types
		where
			group_id= :group_id) valid_types
	on (types.object_type = valid_types.rel_type)
	order by sortkey
		

	
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/relation-procs-postgresql.xql}
dbqd.acs-subsite.tcl.relation-procs.relation_remove.select_rel_info {dbqd.acs-subsite.tcl.relation-procs.relation_remove.select_rel_info {

	select s.segment_id, r.object_id_two as party_id, t.package_name
	  from acs_rels r
	         left outer join rel_segments s
		   on (r.object_id_one = s.group_id and r.rel_type = s.rel_type), 
	       acs_object_types t
	 where r.rel_type = t.object_type
	  and r.rel_id = :rel_id
    
      } {} {} {} c:/web/openacs/packages/acs-subsite/tcl/relation-procs.xql}
dbqd.acs-subsite.tcl.relation-procs.relation_segment_has_dependant.select_rel_info {dbqd.acs-subsite.tcl.relation-procs.relation_segment_has_dependant.select_rel_info {
	    select s.segment_id, r.object_id_two as party_id
  	      from rel_segments s, acs_rels r
	     where r.object_id_one = s.group_id
	       and r.rel_type = s.rel_type
	       and r.rel_id = :rel_id
      } {} {} {} c:/web/openacs/packages/acs-subsite/tcl/relation-procs.xql}
dbqd.acs-subsite.tcl.relation-procs.relation_required_segments_multirow.select_required_rel_segments {dbqd.acs-subsite.tcl.relation-procs.relation_required_segments_multirow.select_required_rel_segments {

	select distinct s.segment_id, s.group_id, s.rel_type,
	       g.group_name, g.join_policy, t.pretty_name as rel_type_pretty_name,
               coalesce(dl.dependency_level, 0)
	from rc_all_constraints c, 
             (select rel_segment, required_rel_segment
              from rc_segment_required_seg_map
	      where rel_side = 'two'
	      UNION ALL
	      select segment_id, segment_id
	      from rel_segments) map,
             rel_segments s left outer join rc_segment_dependency_levels dl using (segment_id),
	     groups g, acs_object_types t
	where c.group_id = :group_id
	  and c.rel_type = :rel_type
	  and c.required_rel_segment = map.rel_segment
          and map.required_rel_segment = s.segment_id
	  and g.group_id = s.group_id
	  and t.object_type = s.rel_type
        order by coalesce(dl.dependency_level, 0)
    
      } {} {} {} c:/web/openacs/packages/acs-subsite/tcl/relation-procs.xql}
dbqd.acs-subsite.tcl.relation-procs.relation::get_id.select_rel_id {dbqd.acs-subsite.tcl.relation-procs.relation::get_id.select_rel_id {

          select rel_id 
          from   acs_rels 
          where  rel_type = :rel_type
          and    object_id_one = :object_id_one
          and    object_id_two = :object_id_two

      } {} {} {} c:/web/openacs/packages/acs-subsite/tcl/relation-procs.xql}
dbqd.acs-subsite.tcl.subsite-callback-procs-oracle.subsite_callback.select_callbacks {dbqd.acs-subsite.tcl.subsite-callback-procs-oracle.subsite_callback.select_callbacks {
      
	select distinct callback, callback_type
	  from subsite_callbacks
	 where object_type in (select t.object_type
	                        from acs_object_types t
	                     connect by prior t.supertype = t.object_type
	                       start with t.object_type = :object_type)
	   and event_type = :event_type
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/subsite-callback-procs-oracle.xql}
dbqd.acs-subsite.tcl.subsite-callback-procs.subsite_callback.select_callbacks {dbqd.acs-subsite.tcl.subsite-callback-procs.subsite_callback.select_callbacks {

	select distinct callback, callback_type
	  from subsite_callbacks
	 where object_type in (select t2.object_type
	                         from acs_object_types t1, acs_object_types t2
	                        where t2.tree_sortkey <= t1.tree_sortkey
				  and t1.tree_sortkey between t2.tree_sortkey and tree_right(t2.tree_sortkey)
				  and t1.object_type = :object_type)
	   and event_type = :event_type
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/subsite-callback-procs-postgresql.xql}
dbqd.acs-subsite.tcl.subsite-callback-procs.subsite_callback.select_object_type {dbqd.acs-subsite.tcl.subsite-callback-procs.subsite_callback.select_object_type {
      
	    select object_type
	      from acs_objects 
	     where object_id = :object_id
	
      } {} {} {} c:/web/openacs/packages/acs-subsite/tcl/subsite-callback-procs.xql}
dbqd.acs-subsite.tcl.subsite-procs-oracle.subsite::after_mount.add_constraint {dbqd.acs-subsite.tcl.subsite-procs-oracle.subsite::after_mount.add_constraint {
      
		    BEGIN
			:1 := rel_constraint.new(
			constraint_name => :constraint_name,
			rel_segment => :segment_id,
			rel_side => 'two',
			required_rel_segment => rel_segment.get(:supersite_group_id, 'membership_rel'),
			creation_user => :user_id,
			creation_ip => :creation_ip
			);
		    END;
		
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/subsite-procs-oracle.xql}
dbqd.acs-subsite.tcl.subsite-procs-oracle.subsite::auto_mount_application.select_package_object_names {dbqd.acs-subsite.tcl.subsite-procs-oracle.subsite::auto_mount_application.select_package_object_names {
      
	    select t.pretty_name as package_name, acs_object.name(s.object_id) as object_name
	      from site_nodes s, apm_package_types t
	     where s.node_id = :node_id
	       and t.package_key = :package_key
	
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/subsite-procs-oracle.xql}
dbqd.acs-subsite.tcl.subsite-procs-oracle.subsite::util::sub_type_exists_p.sub_type_exists_p {dbqd.acs-subsite.tcl.subsite-procs-oracle.subsite::util::sub_type_exists_p.sub_type_exists_p {
      
	select case 
                 when exists (select 1 from acs_object_types 
                              where supertype = :object_type)
                 then 1 
                 else 0 
               end
        from dual
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/subsite-procs-oracle.xql}
dbqd.acs-subsite.tcl.subsite-procs-oracle.subsite::util::object_type_path_list.select_object_type_path {dbqd.acs-subsite.tcl.subsite-procs-oracle.subsite::util::object_type_path_list.select_object_type_path {
      
	select object_type
	from acs_object_types
	start with object_type = :object_type
	connect by object_type = prior supertype
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/tcl/subsite-procs-oracle.xql}
dbqd.acs-subsite.tcl.subsite-procs.subsite::after_mount.add_constraint {dbqd.acs-subsite.tcl.subsite-procs.subsite::after_mount.add_constraint {

	select rel_constraint__new(
	  null,
	  'rel_constraint',
	  :constraint_name,
	  :segment_id,
	  'two',
	  rel_segment__get(:supersite_group_id, 'membership_rel'),
	  null,
	  :user_id,
	  :creation_ip
	);
		
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/subsite-procs-postgresql.xql}
dbqd.acs-subsite.tcl.subsite-procs.subsite::auto_mount_application.select_package_object_names {dbqd.acs-subsite.tcl.subsite-procs.subsite::auto_mount_application.select_package_object_names {
      
	    select t.pretty_name as package_name, acs_object__name(s.object_id) as object_name
	      from site_nodes s, apm_package_types t
	     where s.node_id = :node_id
	       and t.package_key = :package_key
	
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/subsite-procs-postgresql.xql}
dbqd.acs-subsite.tcl.subsite-procs.subsite::util::sub_type_exists_p.sub_type_exists_p {dbqd.acs-subsite.tcl.subsite-procs.subsite::util::sub_type_exists_p.sub_type_exists_p {
      
	select case 
                 when exists (select 1 from acs_object_types 
                              where supertype = :object_type)
                 then 1 
                 else 0 
               end
        
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/subsite-procs-postgresql.xql}
dbqd.acs-subsite.tcl.subsite-procs.subsite::util::object_type_path_list.select_object_type_path {dbqd.acs-subsite.tcl.subsite-procs.subsite::util::object_type_path_list.select_object_type_path {

	select t2.object_type
	  from acs_object_types t1, acs_object_types t2
	 where t1.object_type = :object_type
	   and t1.tree_sortkey between t2.tree_sortkey and tree_right(t2.tree_sortkey)
	 order by t2.tree_sortkey desc
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/tcl/subsite-procs-postgresql.xql}
dbqd.acs-subsite.tcl.subsite-procs.subsite::after_mount.group_exists {dbqd.acs-subsite.tcl.subsite-procs.subsite::after_mount.group_exists {
      
	    select 1
            from dual
            where exists (select 1
                          from application_groups
                          where package_id = :package_id)
	
      } {} {} {} c:/web/openacs/packages/acs-subsite/tcl/subsite-procs.xql}
dbqd.acs-subsite.tcl.subsite-procs.subsite::after_mount.subsite_name_query {dbqd.acs-subsite.tcl.subsite-procs.subsite::after_mount.subsite_name_query {
      
	    select instance_name
	    from apm_packages
	    where package_id = :package_id
	
      } {} {} {} c:/web/openacs/packages/acs-subsite/tcl/subsite-procs.xql}
dbqd.acs-subsite.tcl.subsite-procs.subsite::after_mount.parent_subsite_query {dbqd.acs-subsite.tcl.subsite-procs.subsite::after_mount.parent_subsite_query {
      
         select m.group_id as supersite_group_id, p.instance_name as supersite_name
         from application_groups m, apm_packages p, site_nodes s1, site_nodes s2
         where s1.node_id = :node_id
           and s2.node_id = s1.parent_id
           and p.package_id = s2.object_id
	   and m.package_id = s2.object_id 

      } {} {} {} c:/web/openacs/packages/acs-subsite/tcl/subsite-procs.xql}
dbqd.acs-subsite.tcl.subsite-procs.subsite::instance_name_exists_p.select_name_exists_p {dbqd.acs-subsite.tcl.subsite-procs.subsite::instance_name_exists_p.select_name_exists_p {
      
	select count(*) 
	  from site_nodes
	 where parent_id = :node_id
	   and name = :instance_name
    
      } {} {} {} c:/web/openacs/packages/acs-subsite/tcl/subsite-procs.xql}
dbqd.acs-subsite.tcl.subsite-procs.subsite::util::object_type_pretty_name.select_pretty_name {dbqd.acs-subsite.tcl.subsite-procs.subsite::util::object_type_pretty_name.select_pretty_name {
      
	select pretty_name from acs_object_types 
	where object_type = :object_type
    
      } {} {} {} c:/web/openacs/packages/acs-subsite/tcl/subsite-procs.xql}
dbqd.acs-subsite.www.admin.applications.application-add-oracle.package_types {dbqd.acs-subsite.www.admin.applications.application-add-oracle.package_types {

    select pretty_name, package_key
    from   apm_package_types
    where  not (apm_package.singleton_p(package_key) = 1 and
                apm_package.num_instances(package_key) >= 1)
    and    package_key != 'acs-subsite'
    order  by upper(pretty_name)

        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/applications/application-add-oracle.xql}
dbqd.acs-subsite.www.admin.applications.application-add.package_types {dbqd.acs-subsite.www.admin.applications.application-add.package_types {

    select pretty_name, package_key
    from   apm_package_types
    where  not (apm_package__singleton_p(package_key) = 1 and
                apm_package__num_instances(package_key) >= 1)
    and    package_key != 'acs-subsite'
    order  by upper(pretty_name)

        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/applications/application-add-postgresql.xql}
dbqd.acs-subsite.www.admin.attributes.add.object_pretty_name {dbqd.acs-subsite.www.admin.attributes.add.object_pretty_name {
      
    select t.pretty_name 
      from acs_object_types t
     where t.object_type = :object_type

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/attributes/add.xql}
dbqd.acs-subsite.www.admin.attributes.add.select_datatypes {dbqd.acs-subsite.www.admin.attributes.add.select_datatypes {
      
    select d.datatype
      from acs_datatypes d
     order by lower(d.datatype)

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/attributes/add.xql}
dbqd.acs-subsite.www.admin.attributes.delete-2.select_object_type {dbqd.acs-subsite.www.admin.attributes.delete-2.select_object_type {
      
	    select attr.object_type 
	      from acs_attributes attr
	     where attr.attribute_id = :attribute_id
	
      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/attributes/delete-2.xql}
dbqd.acs-subsite.www.admin.attributes.delete.select_object_type {dbqd.acs-subsite.www.admin.attributes.delete.select_object_type {
      
    select a.object_type, a.pretty_name as attribute_pretty_name
      from acs_attributes a  
     where a.attribute_id = :attribute_id

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/attributes/delete.xql}
dbqd.acs-subsite.www.admin.attributes.edit-one-oracle.attribute_properties {dbqd.acs-subsite.www.admin.attributes.edit-one-oracle.attribute_properties {
      
    select a.pretty_name as attribute_pretty_name, a.datatype, a.attribute_id,
           nvl(a.column_name,a.attribute_name) as attribute_column,
           t.id_column as type_column, t.table_name as type_table, t.object_type,
           a.min_n_values
      from acs_attributes a, acs_object_types t
     where a.attribute_id = :attribute_id
       and a.object_type = t.object_type

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/attributes/edit-one-oracle.xql}
dbqd.acs-subsite.www.admin.attributes.edit-one.attribute_properties {dbqd.acs-subsite.www.admin.attributes.edit-one.attribute_properties {
      
    select a.pretty_name as attribute_pretty_name, a.datatype, a.attribute_id,
           coalesce(a.column_name,a.attribute_name) as attribute_column,
           t.id_column as type_column, t.table_name as type_table, t.object_type,
           a.min_n_values
      from acs_attributes a, acs_object_types t
     where a.attribute_id = :attribute_id
       and a.object_type = t.object_type

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/attributes/edit-one.xql}
dbqd.acs-subsite.www.admin.attributes.edit-one.select_value {dbqd.acs-subsite.www.admin.attributes.edit-one.select_value {
      
    select my_view.$attribute_column as current_value
      from ([package_object_view $object_type]) my_view
     where my_view.object_id = :id_column

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/attributes/edit-one.xql}
dbqd.acs-subsite.www.admin.attributes.edit-one.select_enum_values {dbqd.acs-subsite.www.admin.attributes.edit-one.select_enum_values {
      
	select enum.pretty_name, enum.enum_value
	  from acs_enum_values enum
	 where enum.attribute_id = :attribute_id 
	 order by enum.sort_order
    
      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/attributes/edit-one.xql}
dbqd.acs-subsite.www.admin.attributes.edit-one.attribute_update {dbqd.acs-subsite.www.admin.attributes.edit-one.attribute_update {
      update $type_table 
                set $attribute_column = :attribute_value 
              where $type_column = :id_column
      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/attributes/edit-one.xql}
dbqd.acs-subsite.www.admin.attributes.enum-add-2-oracle.select_max_sort_order {dbqd.acs-subsite.www.admin.attributes.enum-add-2-oracle.select_max_sort_order {
      
    select nvl(max(v.sort_order),0)
      from acs_enum_values v
     where v.attribute_id = :attribute_id

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/attributes/enum-add-2-oracle.xql}
dbqd.acs-subsite.www.admin.attributes.enum-add-2-oracle.insert_enum_value {dbqd.acs-subsite.www.admin.attributes.enum-add-2-oracle.insert_enum_value {
      
		    insert into acs_enum_values v
		    (attribute_id, sort_order, enum_value, pretty_name)
		    select :attribute_id, :sort_order, :pretty_name, :pretty_name
		    from dual
		    where not exists (select 1 
                                        from acs_enum_values v2
                                       where v2.pretty_name = :pretty_name
                                         and v2.attribute_id = :attribute_id)
		
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/attributes/enum-add-2-oracle.xql}
dbqd.acs-subsite.www.admin.attributes.enum-add-2.insert_enum_value {dbqd.acs-subsite.www.admin.attributes.enum-add-2.insert_enum_value {
      
		    insert into acs_enum_values
		    (attribute_id, sort_order, enum_value, pretty_name)
		    select :attribute_id, :sort_order, :pretty_name, :pretty_name
		    
		    where not exists (select 1 
                                        from acs_enum_values v2
                                       where v2.pretty_name = :pretty_name
                                         and v2.attribute_id = :attribute_id)
		
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/attributes/enum-add-2-postgresql.xql}
dbqd.acs-subsite.www.admin.attributes.enum-add-2.select_max_sort_order {dbqd.acs-subsite.www.admin.attributes.enum-add-2.select_max_sort_order {
      
    select coalesce(max(v.sort_order),0)
      from acs_enum_values v
     where v.attribute_id = :attribute_id

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/attributes/enum-add-2.xql}
dbqd.acs-subsite.www.admin.attributes.enum-add-2.delete_enum_value {dbqd.acs-subsite.www.admin.attributes.enum-add-2.delete_enum_value {
      
		delete from acs_enum_values 
		 where attribute_id = :attribute_id 
		   and sort_order = :sort_order
	    
      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/attributes/enum-add-2.xql}
dbqd.acs-subsite.www.admin.attributes.enum-add-2.update_enum_value {dbqd.acs-subsite.www.admin.attributes.enum-add-2.update_enum_value {
      
		update acs_enum_values
		   set pretty_name = :pretty_name
		 where attribute_id = :attribute_id
		   and sort_order = :sort_order
	    
      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/attributes/enum-add-2.xql}
dbqd.acs-subsite.www.admin.attributes.enum-add.number_values {dbqd.acs-subsite.www.admin.attributes.enum-add.number_values {
      
    select count(*) 
      from acs_enum_values v
     where v.attribute_id = :attribute_id

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/attributes/enum-add.xql}
dbqd.acs-subsite.www.admin.attributes.enum-add.select_current_values {dbqd.acs-subsite.www.admin.attributes.enum-add.select_current_values {
      
    select v.enum_value
      from acs_enum_values v
     where v.attribute_id = :attribute_id
     order by v.sort_order

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/attributes/enum-add.xql}
dbqd.acs-subsite.www.admin.attributes.enum-add.select_attr_name {dbqd.acs-subsite.www.admin.attributes.enum-add.select_attr_name {
      
    select a.pretty_name as attribute_pretty_name
      from acs_attributes a
     where a.attribute_id = :attribute_id

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/attributes/enum-add.xql}
dbqd.acs-subsite.www.admin.attributes.one.select_attribute_info {dbqd.acs-subsite.www.admin.attributes.one.select_attribute_info {
      
    select a.attribute_id, a.object_type, a.table_name, a.attribute_name, 
           a.pretty_name, a.pretty_plural, a.sort_order, a.datatype, 
           a.default_value, a.min_n_values, a.max_n_values, a.storage, 
           a.static_p, a.column_name, t.dynamic_p
     from acs_attributes a, acs_object_types t
    where a.object_type = t.object_type
      and a.attribute_id = :attribute_id

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/attributes/one.xql}
dbqd.acs-subsite.www.admin.attributes.one.enum_values {dbqd.acs-subsite.www.admin.attributes.one.enum_values {
      
	select v.enum_value, v.pretty_name
	  from acs_enum_values v
	 where v.attribute_id = :attribute_id
	 order by v.sort_order
    
      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/attributes/one.xql}
dbqd.acs-subsite.www.admin.attributes.value-delete.select_pretty_name {dbqd.acs-subsite.www.admin.attributes.value-delete.select_pretty_name {
      
    select v.pretty_name
      from acs_enum_values v
     where v.attribute_id = :attribute_id
       and v.enum_value = :enum_value

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/attributes/value-delete.xql}
dbqd.acs-subsite.www.admin.group-types.change-join-policy-2-oracle.select_pretty_name {dbqd.acs-subsite.www.admin.group-types.change-join-policy-2-oracle.select_pretty_name {
      
    select t.dynamic_p,
           case when gt.group_type = null then 0 else 1 end as group_type_exists_p
      from acs_object_types t, group_types gt
     where t.object_type = :group_type
       and t.object_type = gt.group_type(+)

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/group-types/change-join-policy-2-oracle.xql}
dbqd.acs-subsite.www.admin.group-types.change-join-policy-2.select_pretty_name {dbqd.acs-subsite.www.admin.group-types.change-join-policy-2.select_pretty_name {

    select t.dynamic_p,
           case when gt.group_type = null then 0 else 1 end as group_type_exists_p
      from acs_object_types t left outer join group_types gt on (t.object_type = gt.group_type)
     where t.object_type = :group_type

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/group-types/change-join-policy-2.xql}
dbqd.acs-subsite.www.admin.group-types.change-join-policy-2.set_default_join_policy {dbqd.acs-subsite.www.admin.group-types.change-join-policy-2.set_default_join_policy {
      
	insert into group_types
	(group_type, default_join_policy)
	values
	(:group_type, :default_join_policy)
    
      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/group-types/change-join-policy-2.xql}
dbqd.acs-subsite.www.admin.group-types.change-join-policy-2.update_join_policy {dbqd.acs-subsite.www.admin.group-types.change-join-policy-2.update_join_policy {
      
	update group_types
	set default_join_policy = :default_join_policy
	where group_type = :group_type
    
      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/group-types/change-join-policy-2.xql}
dbqd.acs-subsite.www.admin.group-types.change-join-policy-oracle.select_pretty_name {dbqd.acs-subsite.www.admin.group-types.change-join-policy-oracle.select_pretty_name {
      
    select t.pretty_name as group_type_pretty_name, t.dynamic_p,
           nvl(gt.default_join_policy, 'open') as default_join_policy
      from acs_object_types t, group_types gt
     where t.object_type = :group_type
       and t.object_type = gt.group_type(+)

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/group-types/change-join-policy-oracle.xql}
dbqd.acs-subsite.www.admin.group-types.change-join-policy.select_pretty_name {dbqd.acs-subsite.www.admin.group-types.change-join-policy.select_pretty_name {

    select t.pretty_name as group_type_pretty_name, t.dynamic_p,
           coalesce(gt.default_join_policy, 'open') as default_join_policy
      from acs_object_types t left outer join group_types gt on (t.object_type = gt.group_type)
     where t.object_type = :group_type

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/group-types/change-join-policy.xql}
dbqd.acs-subsite.www.admin.group-types.delete-2-oracle.package_exists {dbqd.acs-subsite.www.admin.group-types.delete-2-oracle.package_exists {
      
    select case when exists (select 1 
                               from user_objects o
                              where o.object_type='PACKAGE' 
                                and o.object_name = upper(:package_name))
           then 1 else 0 end
      from dual

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/group-types/delete-2-oracle.xql}
dbqd.acs-subsite.www.admin.group-types.delete-2-oracle.type_exists {dbqd.acs-subsite.www.admin.group-types.delete-2-oracle.type_exists {
      
    select case when exists (select 1 from acs_object_types t where t.object_type = :group_type)
                then 1
                else 0
           end
      from dual

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/group-types/delete-2-oracle.xql}
dbqd.acs-subsite.www.admin.group-types.delete-2-oracle.package_drop {dbqd.acs-subsite.www.admin.group-types.delete-2-oracle.package_drop {
    drop package [DoubleApos $group_type]
  } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/group-types/delete-2-oracle.xql}
dbqd.acs-subsite.www.admin.group-types.delete-2-oracle.delete_rel_types {dbqd.acs-subsite.www.admin.group-types.delete-2-oracle.delete_rel_types {
delete from group_type_rels where group_type = :group_type
  } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/group-types/delete-2-oracle.xql}
dbqd.acs-subsite.www.admin.group-types.delete-2-oracle.drop_type {dbqd.acs-subsite.www.admin.group-types.delete-2-oracle.drop_type {
begin acs_object_type.drop_type(:group_type); end;
  } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/group-types/delete-2-oracle.xql}
dbqd.acs-subsite.www.admin.group-types.delete-2-oracle.drop_table {dbqd.acs-subsite.www.admin.group-types.delete-2-oracle.drop_table {
drop table $table_name
  } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/group-types/delete-2-oracle.xql}
dbqd.acs-subsite.www.admin.group-types.delete-2-oracle.delete_group_type {dbqd.acs-subsite.www.admin.group-types.delete-2-oracle.delete_group_type {
begin
delete from group_types where group_type=:group_type;
end;
} {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/group-types/delete-2-oracle.xql}
dbqd.acs-subsite.www.admin.group-types.delete-2.package_exists {dbqd.acs-subsite.www.admin.group-types.delete-2.package_exists {
      
    select case when exists (select 1 
                               from pg_proc
                              where proname like :package_name || '%')
           then 1 else 0 end
      

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/group-types/delete-2-postgresql.xql}
dbqd.acs-subsite.www.admin.group-types.delete-2.type_exists {dbqd.acs-subsite.www.admin.group-types.delete-2.type_exists {
      
    select case when exists (select 1 from acs_object_types t where t.object_type = :group_type)
                then 1
                else 0
           end
      

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/group-types/delete-2-postgresql.xql}
dbqd.acs-subsite.www.admin.group-types.delete-2.package_drop {dbqd.acs-subsite.www.admin.group-types.delete-2.package_drop {
    select drop_package('[DoubleApos $group_type]')
  } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/group-types/delete-2-postgresql.xql}
dbqd.acs-subsite.www.admin.group-types.delete-2.delete_rel_types {dbqd.acs-subsite.www.admin.group-types.delete-2.delete_rel_types {
begin
  delete from group_type_rels where group_type = :group_type;
  return 1;
end;
  } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/group-types/delete-2-postgresql.xql}
dbqd.acs-subsite.www.admin.group-types.delete-2.drop_type {dbqd.acs-subsite.www.admin.group-types.delete-2.drop_type {
select acs_object_type__drop_type(:group_type, 'f')
  } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/group-types/delete-2-postgresql.xql}
dbqd.acs-subsite.www.admin.group-types.delete-2.drop_table {dbqd.acs-subsite.www.admin.group-types.delete-2.drop_table {
begin
  drop table $table_name;
  return 1;
end;
  } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/group-types/delete-2-postgresql.xql}
dbqd.acs-subsite.www.admin.group-types.delete-2.delete_group_type {dbqd.acs-subsite.www.admin.group-types.delete-2.delete_group_type {
begin
delete from group_types where group_type=:group_type;
return 1;
end;
} {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/group-types/delete-2-postgresql.xql}
dbqd.acs-subsite.www.admin.group-types.delete-2.select_type_info {dbqd.acs-subsite.www.admin.group-types.delete-2.select_type_info {
      
    select t.table_name, t.package_name
      from acs_object_types t
     where t.object_type=:group_type

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/group-types/delete-2.xql}
dbqd.acs-subsite.www.admin.group-types.delete-2.select_group_ids {dbqd.acs-subsite.www.admin.group-types.delete-2.select_group_ids {
      
	    select distinct o.object_id
	    from acs_objects o, all_object_party_privilege_map perm
	    where perm.object_id = o.object_id
              and perm.party_id = :user_id
              and perm.privilege = 'delete'
	      and o.object_type = :group_type
	
      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/group-types/delete-2.xql}
dbqd.acs-subsite.www.admin.group-types.delete-oracle.number_subtypes {dbqd.acs-subsite.www.admin.group-types.delete-oracle.number_subtypes {
      
    select case when exists (select 1 
                               from acs_object_types t
                              where t.supertype = :group_type) 
                then 1 else 0 end
      from dual

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/group-types/delete-oracle.xql}
dbqd.acs-subsite.www.admin.group-types.delete-oracle.rel_type_exists_p {dbqd.acs-subsite.www.admin.group-types.delete-oracle.rel_type_exists_p {
      
    select case when exists (select 1 
                               from acs_rel_types t
                              where t.object_type_one = :group_type
                                 or t.object_type_two = :group_type)
                then 1 else 0 end
      from dual

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/group-types/delete-oracle.xql}
dbqd.acs-subsite.www.admin.group-types.delete.number_subtypes {dbqd.acs-subsite.www.admin.group-types.delete.number_subtypes {
      
    select case when exists (select 1 
                               from acs_object_types t
                              where t.supertype = :group_type) 
                then 1 else 0 end
      

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/group-types/delete-postgresql.xql}
dbqd.acs-subsite.www.admin.group-types.delete.rel_type_exists_p {dbqd.acs-subsite.www.admin.group-types.delete.rel_type_exists_p {
      
    select case when exists (select 1 
                               from acs_rel_types t
                              where t.object_type_one = :group_type
                                 or t.object_type_two = :group_type)
                then 1 else 0 end
      

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/group-types/delete-postgresql.xql}
dbqd.acs-subsite.www.admin.group-types.delete.select_pretty_name {dbqd.acs-subsite.www.admin.group-types.delete.select_pretty_name {
      
    select t.pretty_name as group_type_pretty_name
      from acs_object_types t
     where t.object_type = :group_type

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/group-types/delete.xql}
dbqd.acs-subsite.www.admin.group-types.delete.select_subtypes {dbqd.acs-subsite.www.admin.group-types.delete.select_subtypes {
      
	select t.object_type as group_type, t.pretty_name
          from acs_object_types t
         where t.supertype = :group_type
    
      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/group-types/delete.xql}
dbqd.acs-subsite.www.admin.group-types.delete.select_rel_types {dbqd.acs-subsite.www.admin.group-types.delete.select_rel_types {
      
	select rel.rel_type, t.pretty_name
          from acs_rel_types rel, acs_object_types t
         where (rel.object_type_one = :group_type 
                or rel.object_type_two = :group_type)
	   and rel.rel_type = t.object_type
    
      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/group-types/delete.xql}
dbqd.acs-subsite.www.admin.group-types.delete.groups_of_this_type {dbqd.acs-subsite.www.admin.group-types.delete.groups_of_this_type {
      
    select count(o.object_id) 
      from acs_objects o
     where o.object_type = :group_type

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/group-types/delete.xql}
dbqd.acs-subsite.www.admin.group-types.delete.relations_to_this_type {dbqd.acs-subsite.www.admin.group-types.delete.relations_to_this_type {
      
    select count(r.rel_id)
      from acs_rels r
     where r.rel_type in (select t.rel_type
                            from acs_rel_types t
                           where t.object_type_one = :group_type
                              or t.object_type_two = :group_type)

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/group-types/delete.xql}
dbqd.acs-subsite.www.admin.group-types.groups-display.select_type_info {dbqd.acs-subsite.www.admin.group-types.groups-display.select_type_info {
      
    select t.pretty_name as group_type_pretty_name
      from acs_object_types t
     where t.object_type = :group_type

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/group-types/groups-display.xql}
dbqd.acs-subsite.www.admin.group-types.groups-list.select_groups {dbqd.acs-subsite.www.admin.group-types.groups-list.select_groups {
      
  select g.group_id, g.group_name from (
    select distinct g.group_id, g.group_name
      from (select group_id, group_name
              from groups g, acs_objects o
             where g.group_id = o.object_id
		and o.object_type = :group_type) g,
           (select object_id
            from all_object_party_privilege_map
            where party_id = :user_id and privilege = 'read') perm,
           application_group_element_map m
     where perm.object_id = g.group_id
	and m.package_id = :package_id
	and m.element_id = g.group_id
     order by g.group_id, g.group_name) g
   order by lower(g.group_name)

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/group-types/groups-list-postgresql.xql}
dbqd.acs-subsite.www.admin.group-types.groups-list.select_groups {dbqd.acs-subsite.www.admin.group-types.groups-list.select_groups {
      
  select g.group_id, g.group_name from (
    select distinct g.group_id, g.group_name
      from (select group_id, group_name
              from groups g, acs_objects o
             where g.group_id = o.object_id
		and o.object_type = :group_type) g,
           (select object_id
            from all_object_party_privilege_map
            where party_id = :user_id and privilege = 'read') perm,
           application_group_element_map m
     where perm.object_id = g.group_id
	and m.package_id = :package_id
	and m.element_id = g.group_id
     order by g.group_id, g.group_name) g
   order by lower(g.group_name)

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/group-types/groups-list-postgresql.xql}
dbqd.acs-subsite.www.admin.group-types.index-oracle.select_group_types {dbqd.acs-subsite.www.admin.group-types.index-oracle.select_group_types {
      
    select t.object_type as group_type, t.pretty_plural, 
           nvl(num.number_groups,0) as number_groups, t.indent
      from (select t.object_type, t.pretty_plural, rownum as inner_rownum,
                   replace(lpad(' ', (level - 1) * 4), ' ', '&nbsp;') as indent
              from acs_object_types t
           connect by prior t.object_type = t.supertype
             start with t.object_type = 'group'
             order by lower(t.pretty_plural)) t, 
           (select o.object_type, count(*) number_groups
              from groups g, acs_objects o,  
                   acs_object_party_privilege_map perm,
                   application_group_element_map app_group
             where perm.object_id = g.group_id
               and perm.party_id = :user_id
               and perm.privilege = 'read'
               and o.object_id = g.group_id
               and app_group.package_id = :package_id
               and app_group.element_id = g.group_id
             group by o.object_type) num
     where t.object_type = num.object_type(+)
     order by t.inner_rownum

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/group-types/index-oracle.xql}
dbqd.acs-subsite.www.admin.group-types.index.select_group_types {dbqd.acs-subsite.www.admin.group-types.index.select_group_types {

    select t.object_type as group_type, t.pretty_plural, 
	   coalesce(num.number_groups,0) as number_groups, 
	   repeat('&nbsp;', t.type_level * 4) as indent
      from (select t2.object_type, t2.pretty_plural, t2.tree_sortkey,
		   tree_level(t2.tree_sortkey) - tree_level(t1.tree_sortkey) as type_level
	      from acs_object_types t1,
		   acs_object_types t2
	     where t1.object_type = 'group'
	       and t2.tree_sortkey between t1.tree_sortkey and tree_right(t1.tree_sortkey)) t
                   left outer join
           (select o.object_type, count(*) as number_groups
              from groups g, acs_objects o,  
                   application_group_element_map app_group
             where acs_permission__permission_p(g.group_id, :user_id, 'read')
               and o.object_id = g.group_id
               and app_group.package_id = :package_id
               and app_group.element_id = g.group_id
             group by o.object_type) num
             using (object_type)
     order by t.tree_sortkey

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/group-types/index-postgresql.xql}
dbqd.acs-subsite.www.admin.group-types.new-oracle.pretty_name_unique {dbqd.acs-subsite.www.admin.group-types.new-oracle.pretty_name_unique {
      
	    select case when exists (select 1 from acs_object_types t where t.pretty_name = :pretty_name)
                    then 1 else 0 end
	  from dual
	
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/group-types/new-oracle.xql}
dbqd.acs-subsite.www.admin.group-types.new-oracle.pretty_name_unique {dbqd.acs-subsite.www.admin.group-types.new-oracle.pretty_name_unique {
      
	    select case when exists (select 1 from acs_object_types t where t.pretty_name = :pretty_name)
                    then 1 else 0 end
	  from dual
	
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/group-types/new-oracle.xql}
dbqd.acs-subsite.www.admin.group-types.new.pretty_name_unique {dbqd.acs-subsite.www.admin.group-types.new.pretty_name_unique {
      
	    select case when exists (select 1 from acs_object_types t where t.pretty_name = :pretty_name)
                    then 1 else 0 end
	  
	
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/group-types/new-postgresql.xql}
dbqd.acs-subsite.www.admin.group-types.new.select_group_supertypes {dbqd.acs-subsite.www.admin.group-types.new.select_group_supertypes {
      
      select repeat('&nbsp;', (tree_level(t2.tree_sortkey) - tree_level(t1.tree_sortkey)) * 4) || t2.pretty_name, t2.object_type
        from acs_object_types t1, acs_object_types t2
       where t2.tree_sortkey between t1.tree_sortkey and tree_right(t1.tree_sortkey)
         and t1.object_type = 'group'
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/group-types/new-postgresql.xql}
dbqd.acs-subsite.www.admin.group-types.one-oracle.select_pretty_name {dbqd.acs-subsite.www.admin.group-types.one-oracle.select_pretty_name {
      
    select t.pretty_name as group_type_pretty_name, t.dynamic_p,
           nvl(gt.default_join_policy, 'open') as default_join_policy
      from acs_object_types t, group_types gt
     where t.object_type = :group_type
       and t.object_type = gt.group_type(+)

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/group-types/one-oracle.xql}
dbqd.acs-subsite.www.admin.group-types.one-oracle.groups_select {dbqd.acs-subsite.www.admin.group-types.one-oracle.groups_select {
      
    select my_view.group_name, my_view.group_id
    from (select /*+ ORDERED */ DISTINCT  g.group_name, g.group_id
           from acs_objects o, groups g,
                application_group_element_map app_group, 
                all_object_party_privilege_map perm
          where perm.object_id = g.group_id
            and perm.party_id = :user_id
            and perm.privilege = 'read'
            and g.group_id = o.object_id
            and o.object_type = :group_type
            and app_group.package_id = :package_id
            and app_group.element_id = g.group_id
          order by lower(g.group_name)) my_view 
    where rownum <= 26

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/group-types/one-oracle.xql}
dbqd.acs-subsite.www.admin.group-types.one-oracle.attributes_select {dbqd.acs-subsite.www.admin.group-types.one-oracle.attributes_select {
      
    select a.attribute_id, a.pretty_name, 
           a.ancestor_type, t.pretty_name as ancestor_pretty_name
      from acs_object_type_attributes a,
           (select t.object_type, t.pretty_name, level as type_level
              from acs_object_types t
             start with t.object_type='group'
           connect by prior t.object_type = t.supertype) t 
     where a.object_type = :group_type
       and t.object_type = a.ancestor_type
    order by type_level 

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/group-types/one-oracle.xql}
dbqd.acs-subsite.www.admin.group-types.one.groups_select {dbqd.acs-subsite.www.admin.group-types.one.groups_select {

    select my_view.group_name, my_view.group_id
    from (select DISTINCT g.group_name, g.group_id
           from acs_objects o, groups g,
                application_group_element_map app_group, 
                all_object_party_privilege_map perm
          where perm.object_id = g.group_id
            and perm.party_id = :user_id
            and perm.privilege = 'read'
            and g.group_id = o.object_id
            and o.object_type = :group_type
            and app_group.package_id = :package_id
            and app_group.element_id = g.group_id
          order by g.group_name, g.group_id) my_view 
    limit 26

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/group-types/one-postgresql.xql}
dbqd.acs-subsite.www.admin.group-types.one.attributes_select {dbqd.acs-subsite.www.admin.group-types.one.attributes_select {

    select a.attribute_id, a.pretty_name, 
           a.ancestor_type, t.pretty_name as ancestor_pretty_name
      from acs_object_type_attributes a,
           (select t2.object_type, t2.pretty_name,
		   tree_level(t2.tree_sortkey) - tree_level(t1.tree_sortkey) + 1 as type_level		   	
              from acs_object_types t1, acs_object_types t2
	     where t1.object_type = 'group'
	       and t2.tree_sortkey between t1.tree_sortkey and tree_right(t1.tree_sortkey)) t
     where a.object_type = :group_type
       and t.object_type = a.ancestor_type
    order by type_level 

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/group-types/one-postgresql.xql}
dbqd.acs-subsite.www.admin.group-types.one.select_pretty_name {dbqd.acs-subsite.www.admin.group-types.one.select_pretty_name {

    select t.pretty_name as group_type_pretty_name, t.dynamic_p,
           coalesce(gt.default_join_policy, 'open') as default_join_policy
      from acs_object_types t
	     left outer join group_types gt
               on (t.object_type = gt.group_type)
     where t.object_type = :group_type

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/group-types/one.xql}
dbqd.acs-subsite.www.admin.group-types.one.relations_select {dbqd.acs-subsite.www.admin.group-types.one.relations_select {
      
    select t.pretty_name, g.rel_type, g.group_rel_type_id
      from acs_object_types t, group_type_rels g
     where t.object_type = g.rel_type
       and g.group_type = :group_type
     order by lower(t.pretty_name)

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/group-types/one.xql}
dbqd.acs-subsite.www.admin.group-types.rel-type-add-2-oracle.types_match_p {dbqd.acs-subsite.www.admin.group-types.rel-type-add-2-oracle.types_match_p {
      
	    select count(*)
	      from acs_rel_types t
	     where (t.object_type_one = :group_type 
                    or acs_object_type.is_subtype_p(t.object_type_one, :group_type) = 't')
               and t.rel_type = :rel_type
	
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/group-types/rel-type-add-2-oracle.xql}
dbqd.acs-subsite.www.admin.group-types.rel-type-add-2.types_match_p {dbqd.acs-subsite.www.admin.group-types.rel-type-add-2.types_match_p {
      
	    select count(*)
	      from acs_rel_types t
	     where (t.object_type_one = :group_type 
                    or acs_object_type__is_subtype_p(t.object_type_one, :group_type) = 't')
               and t.rel_type = :rel_type
	
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/group-types/rel-type-add-2-postgresql.xql}
dbqd.acs-subsite.www.admin.group-types.rel-type-add-2.exists_p {dbqd.acs-subsite.www.admin.group-types.rel-type-add-2.exists_p {
      select count(*) from group_type_rels where group_type = :group_type and rel_type = :rel_type
      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/group-types/rel-type-add-2.xql}
dbqd.acs-subsite.www.admin.group-types.rel-type-add-oracle.select_primary_relations {dbqd.acs-subsite.www.admin.group-types.rel-type-add-oracle.select_primary_relations {
      
    select replace(lpad(' ', (t.type_level - 1) * 4), ' ', '&nbsp;') as indent,
           t.pretty_name, t.rel_type
      from (select t.pretty_name, t.object_type as rel_type, level as type_level
              from acs_object_types t
             where t.object_type not in (select g.rel_type 
                                           from group_type_rels g 
                                          where g.group_type = :group_type)
           connect by prior t.object_type = t.supertype
             start with t.object_type in ('membership_rel', 'composition_rel')) t,
           acs_rel_types rel_type
     where t.rel_type = rel_type.rel_type
       and (rel_type.object_type_one = :group_type 
            or acs_object_type.is_subtype_p(rel_type.object_type_one, :group_type) = 't')

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/group-types/rel-type-add-oracle.xql}
dbqd.acs-subsite.www.admin.group-types.rel-type-add.select_primary_relations {dbqd.acs-subsite.www.admin.group-types.rel-type-add.select_primary_relations {

    select repeat('&nbsp;', (t.type_level - 1) * 4) as indent,
           t.pretty_name, t.rel_type
      from (select t2.pretty_name, t2.object_type as rel_type, tree_level(t2.tree_sortkey) - tree_level(t1.tree_sortkey) + 1  as type_level
              from acs_object_types t1,
		   acs_object_types t2
             where t2.tree_sortkey between t1.tree_sortkey and tree_right(t1.tree_sortkey)
	       and t2.object_type not in (select g.rel_type 
                                            from group_type_rels g 
                                           where g.group_type = :group_type)
	       and t1.object_type in ('membership_rel', 'composition_rel')) t,
	    acs_rel_types rel_type
       where t.rel_type = rel_type.rel_type
       and (rel_type.object_type_one = :group_type 
            or acs_object_type__is_subtype_p(rel_type.object_type_one, :group_type) = 't')

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/group-types/rel-type-add-postgresql.xql}
dbqd.acs-subsite.www.admin.group-types.rel-type-remove-2.select_group_type {dbqd.acs-subsite.www.admin.group-types.rel-type-remove-2.select_group_type {
      
	select g.group_type
	from group_type_rels g 
	where g.group_rel_type_id = :group_rel_type_id
    
      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/group-types/rel-type-remove-2.xql}
dbqd.acs-subsite.www.admin.group-types.rel-type-remove-2.remove_relation {dbqd.acs-subsite.www.admin.group-types.rel-type-remove-2.remove_relation {
      
	    delete from group_type_rels where group_rel_type_id = :group_rel_type_id
	
      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/group-types/rel-type-remove-2.xql}
dbqd.acs-subsite.www.admin.group-types.rel-type-remove.select_info {dbqd.acs-subsite.www.admin.group-types.rel-type-remove.select_info {
      
    select g.rel_type, g.group_type, 
           t.pretty_name as rel_pretty_name, t2.pretty_name as group_type_pretty_name
      from acs_object_types t, acs_object_types t2, group_type_rels g
     where g.group_rel_type_id = :group_rel_type_id
       and t.object_type = g.rel_type
       and t2.object_type = g.group_type

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/group-types/rel-type-remove.xql}
dbqd.acs-subsite.www.admin.groups.change-join-policy-2.update_join_policy {dbqd.acs-subsite.www.admin.groups.change-join-policy-2.update_join_policy {
      
    update groups
    set join_policy = :join_policy
    where group_id = :group_id

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/groups/change-join-policy-2.xql}
dbqd.acs-subsite.www.admin.groups.change-join-policy.group_info {dbqd.acs-subsite.www.admin.groups.change-join-policy.group_info {
      
    select g.group_name, g.join_policy
      from groups g
     where g.group_id = :group_id

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/groups/change-join-policy.xql}
dbqd.acs-subsite.www.admin.groups.constraints-create-oracle.select_props {dbqd.acs-subsite.www.admin.groups.constraints-create-oracle.select_props {
      
    select acs_group.name(:group_id) as group_name,
           t.pretty_name as rel_type_pretty_name
      from acs_object_types t
     where t.object_type = :rel_type

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/groups/constraints-create-oracle.xql}
dbqd.acs-subsite.www.admin.groups.constraints-create.select_props {dbqd.acs-subsite.www.admin.groups.constraints-create.select_props {
      
    select acs_group__name(:group_id) as group_name,
           t.pretty_name as rel_type_pretty_name
      from acs_object_types t
     where t.object_type = :rel_type

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/groups/constraints-create-postgresql.xql}
dbqd.acs-subsite.www.admin.groups.delete-oracle.object_name {dbqd.acs-subsite.www.admin.groups.delete-oracle.object_name {
      select acs_object.name(:group_id) from dual
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/groups/delete-oracle.xql}
dbqd.acs-subsite.www.admin.groups.delete-oracle.select_counts {dbqd.acs-subsite.www.admin.groups.delete-oracle.select_counts {
      
    select (select count(*) from group_element_map where group_id = :group_id) as elements,
           (select count(*) from rel_segments where group_id = :group_id) as segments,
           (select count(*) 
              from rel_constraints cons, rel_segments segs
             where segs.segment_id in (cons.rel_segment,cons.required_rel_segment)
               and segs.group_id = :group_id) as constraints
      from dual

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/groups/delete-oracle.xql}
dbqd.acs-subsite.www.admin.groups.delete.object_name {dbqd.acs-subsite.www.admin.groups.delete.object_name {
      select acs_object__name(:group_id) 
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/groups/delete-postgresql.xql}
dbqd.acs-subsite.www.admin.groups.delete.select_counts {dbqd.acs-subsite.www.admin.groups.delete.select_counts {
      
    select (select count(*) from group_element_map where group_id = :group_id) as elements,
           (select count(*) from rel_segments where group_id = :group_id) as segments,
           (select count(*) 
              from rel_constraints cons, rel_segments segs
             where segs.segment_id in (cons.rel_segment,cons.required_rel_segment)
               and segs.group_id = :group_id) as constraints
      

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/groups/delete-postgresql.xql}
dbqd.acs-subsite.www.admin.groups.elements-by-group-type-oracle.select_group_types {dbqd.acs-subsite.www.admin.groups.elements-by-group-type-oracle.select_group_types {
      
    select /*+ ORDERED */ 
           t.object_type, t.pretty_name, count(g.group_id) as number_groups
      from groups g, acs_objects o, acs_object_types t,
           application_group_element_map app_group
     where o.object_id = g.group_id
       and o.object_type = t.object_type
       and app_group.package_id = :package_id
       and app_group.element_id = g.group_id
     group by t.object_type, t.pretty_name
     order by lower(t.pretty_name)

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/groups/elements-by-group-type-oracle.xql}
dbqd.acs-subsite.www.admin.groups.elements-by-group-type.select_group_types {dbqd.acs-subsite.www.admin.groups.elements-by-group-type.select_group_types {

    select
           t.object_type, t.pretty_name, count(g.group_id) as number_groups
      from groups g, acs_objects o, acs_object_types t,
           application_group_element_map app_group
     where o.object_id = g.group_id
       and o.object_type = t.object_type
       and app_group.package_id = :package_id
       and app_group.element_id = g.group_id
     group by t.object_type, t.pretty_name
     order by lower(t.pretty_name)

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/groups/elements-by-group-type-postgresql.xql}
dbqd.acs-subsite.www.admin.groups.elements-by-group-type.select_group_types {dbqd.acs-subsite.www.admin.groups.elements-by-group-type.select_group_types {

    select
           t.object_type, t.pretty_name, count(g.group_id) as number_groups
      from groups g, acs_objects o, acs_object_types t,
           application_group_element_map app_group
     where o.object_id = g.group_id
       and o.object_type = t.object_type
       and app_group.package_id = :package_id
       and app_group.element_id = g.group_id
     group by t.object_type, t.pretty_name
     order by lower(t.pretty_name)

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/groups/elements-by-group-type-postgresql.xql}
dbqd.acs-subsite.www.admin.groups.elements-by-rel-type-oracle.relations_query {dbqd.acs-subsite.www.admin.groups.elements-by-rel-type-oracle.relations_query {
       
    select g.rel_type, g.group_rel_id,
           acs_object_type.pretty_name(g.rel_type) as rel_type_pretty_name,
           s.segment_id, s.segment_name, 
           acs_rel_type.role_pretty_plural(rel_types.role_two) as role_pretty_plural,
           acs_rel_type.role_pretty_name(rel_types.role_two) as role_pretty_name,
           rels.num_rels,
           case when valid_types.group_id = null then 0 else 1 end as rel_type_valid_p
      from group_rels g, 
           rel_segments s, 
           acs_rel_types rel_types,
           (select rel_type, count(*) as num_rels
              from group_component_map
             where group_id = :group_id
               and group_id = container_id
           group by rel_type
           UNION ALL
           select rel_type, count(*) as num_rels
             from group_approved_member_map
             where group_id = :group_id
               and group_id = container_id
           group by rel_type) rels,
           rc_valid_rel_types valid_types
     where g.group_id = s.group_id(+)
       and g.rel_type = s.rel_type(+)
       and g.rel_type = rels.rel_type(+)
       and g.rel_type = rel_types.rel_type
       and g.group_id = :group_id
       and g.group_id = valid_types.group_id(+)
       and g.rel_type = valid_types.rel_type(+)
     order by lower(g.rel_type)

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/groups/elements-by-rel-type-oracle.xql}
dbqd.acs-subsite.www.admin.groups.elements-by-rel-type.relations_query {dbqd.acs-subsite.www.admin.groups.elements-by-rel-type.relations_query {

    select g.rel_type, g.group_rel_id,
           acs_object_type__pretty_name(g.rel_type) as rel_type_pretty_name,
           s.segment_id, s.segment_name, 
           acs_rel_type__role_pretty_plural(rel_types.role_two) as role_pretty_plural,
           acs_rel_type__role_pretty_name(rel_types.role_two) as role_pretty_name,
           rels.num_rels,
           case when valid_types.group_id = null then 0 else 1 end as rel_type_valid_p
      from group_rels g
	     left outer join rel_segments s using (group_id, rel_type)
	     left outer join rc_valid_rel_types valid_types using (group_id, rel_type)
	     left outer join
	       (select rel_type, count(*) as num_rels
	          from group_component_map
		 where group_id = :group_id
		   and group_id = container_id
	      group by rel_type
	      UNION ALL
	        select rel_type, count(*) as num_rels
		  from group_approved_member_map
		 where group_id = :group_id
		   and group_id = container_id
	      group by rel_type) rels using (rel_type),
	   acs_rel_types rel_types
     where g.rel_type = rel_types.rel_type
       and g.group_id = :group_id
  order by lower(g.rel_type)

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/groups/elements-by-rel-type-postgresql.xql}
dbqd.acs-subsite.www.admin.groups.elements-display-list-oracle.rel_type_info {dbqd.acs-subsite.www.admin.groups.elements-display-list-oracle.rel_type_info {
      
    select object_type as ancestor_rel_type
      from acs_object_types
     where supertype = 'relationship'
       and object_type in (
               select object_type from acs_object_types
               start with object_type = :rel_type
               connect by object_type = prior supertype
           )

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/groups/elements-display-list-oracle.xql}
dbqd.acs-subsite.www.admin.groups.elements-display-list-oracle.relations_query {dbqd.acs-subsite.www.admin.groups.elements-display-list-oracle.relations_query {
      
select r.rel_id, 
       party_names.party_name as element_name
from (select /*+ ORDERED */ DISTINCT rels.rel_id, object_id_two
      from $extra_tables acs_rels rels, all_object_party_privilege_map perm
      where perm.object_id = rels.rel_id
        and perm.party_id = :user_id
        and perm.privilege = 'read'
        and rels.rel_type = :rel_type
        and rels.object_id_one = :group_id $extra_where_clauses) r, 
     party_names 
where r.object_id_two = party_names.party_id
order by lower(element_name)

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/groups/elements-display-list-oracle.xql}
dbqd.acs-subsite.www.admin.groups.elements-display-list.rel_type_info {dbqd.acs-subsite.www.admin.groups.elements-display-list.rel_type_info {

    select object_type as ancestor_rel_type
      from acs_object_types
     where supertype = 'relationship'
       and object_type in (
               select t2.object_type
	         from acs_object_types t1, acs_object_types t2
		where t1.tree_sortkey between t2.tree_sortkey and tree_right(t2.tree_sortkey)
		  and t1.object_type = :rel_type
	   )

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/groups/elements-display-list-postgresql.xql}
dbqd.acs-subsite.www.admin.groups.elements-display-list.relations_query {dbqd.acs-subsite.www.admin.groups.elements-display-list.relations_query {

select r.rel_id, 
       party_names.party_name as element_name
from (select DISTINCT rels.rel_id, object_id_two
      from $extra_tables acs_rels rels, all_object_party_privilege_map perm
      where perm.object_id = rels.rel_id
        and perm.party_id = :user_id
        and perm.privilege = 'read'
        and rels.rel_type = :rel_type
        and rels.object_id_one = :group_id $extra_where_clauses) r, 
     party_names 
where r.object_id_two = party_names.party_id
order by element_name

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/groups/elements-display-list.xql}
dbqd.acs-subsite.www.admin.groups.elements-display-oracle.group_and_rel_info {dbqd.acs-subsite.www.admin.groups.elements-display-oracle.group_and_rel_info {
      
    select acs_group.name(:group_id) as group_name,
           acs_object_type.pretty_name(:rel_type) as rel_type_pretty_name,
           acs_rel_type.role_pretty_plural(rel_types.role_two) as role_pretty_plural,
           acs_rel_type.role_pretty_name(rel_types.role_two) as role_pretty_name
      from acs_rel_types rel_types
     where rel_types.rel_type = :rel_type

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/groups/elements-display-oracle.xql}
dbqd.acs-subsite.www.admin.groups.elements-display.group_and_rel_info {dbqd.acs-subsite.www.admin.groups.elements-display.group_and_rel_info {
      
    select acs_group__name(:group_id) as group_name,
           acs_object_type__pretty_name(:rel_type) as rel_type_pretty_name,
           acs_rel_type__role_pretty_plural(rel_types.role_two) as role_pretty_plural,
           acs_rel_type__role_pretty_name(rel_types.role_two) as role_pretty_name
      from acs_rel_types rel_types
     where rel_types.rel_type = :rel_type

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/groups/elements-display-postgresql.xql}
dbqd.acs-subsite.www.admin.groups.index.subsite_info {dbqd.acs-subsite.www.admin.groups.index.subsite_info {
      
    select ag.group_id as subsite_group_id, ap.instance_name
    from application_groups ag, apm_packages ap
    where ag.package_id = ap.package_id
      and ag.package_id = :package_id

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/groups/index.xql}
dbqd.acs-subsite.www.admin.groups.new-oracle.rel_type_info {dbqd.acs-subsite.www.admin.groups.new-oracle.rel_type_info {
      
    select object_type as ancestor_rel_type
      from acs_object_types
     where supertype = 'relationship'
       and object_type in (
               select object_type from acs_object_types
               start with object_type = :add_with_rel_type
               connect by object_type = prior supertype
           )

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/groups/new-oracle.xql}
dbqd.acs-subsite.www.admin.groups.new.rel_type_info {dbqd.acs-subsite.www.admin.groups.new.rel_type_info {

    select object_type as ancestor_rel_type
      from acs_object_types
     where supertype = 'relationship'
       and object_type in (
               select t2.object_type
		 from acs_object_types t1, acs_object_types t2
		where t1.object_type = :add_with_rel_type
		  and t1.tree_sortkey between t2.tree_sortkey and tree_right(t2.tree_sortkey)
           )

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/groups/new-postgresql.xql}
dbqd.acs-subsite.www.admin.groups.new.group_exists_p {dbqd.acs-subsite.www.admin.groups.new.group_exists_p {
      
	    select count(*) from groups where group_id = :group_id
	
      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/groups/new.xql}
dbqd.acs-subsite.www.admin.groups.new.group_info {dbqd.acs-subsite.www.admin.groups.new.group_info {
      
    select group_name as add_to_group_name, 
           join_policy as add_to_group_join_policy
    from groups
    where group_id = :add_to_group_id

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/groups/new.xql}
dbqd.acs-subsite.www.admin.groups.new.select_type_info {dbqd.acs-subsite.www.admin.groups.new.select_type_info {
      
    select t.pretty_name as group_type_pretty_name,
           t.table_name
      from acs_object_types t
     where t.object_type = :group_type

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/groups/new.xql}
dbqd.acs-subsite.www.admin.groups.one.group_info {dbqd.acs-subsite.www.admin.groups.one.group_info {
      
    select g.group_name, g.join_policy,
           o.object_type as group_type
      from groups g, acs_objects o, acs_object_types t
     where g.group_id = o.object_id
       and o.object_type = t.object_type
       and g.group_id = :group_id

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/groups/one.xql}
dbqd.acs-subsite.www.admin.groups.rel-type-add-2-oracle.types_match_p {dbqd.acs-subsite.www.admin.groups.rel-type-add-2-oracle.types_match_p {
      
	    select count(*)
	      from acs_rel_types t
	     where (t.object_type_one = :group_type 
                    or acs_object_type.is_subtype_p(t.object_type_one, :group_type) = 't')
               and t.rel_type = :rel_type
	
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/groups/rel-type-add-2-oracle.xql}
dbqd.acs-subsite.www.admin.groups.rel-type-add-2-oracle.exists_p {dbqd.acs-subsite.www.admin.groups.rel-type-add-2-oracle.exists_p {
      
	select case when exists (select 1 
                                   from group_rels 
                                  where group_id = :group_id
                                    and rel_type = :rel_type)
                    then 1 else 0 end
	  from dual
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/groups/rel-type-add-2-oracle.xql}
dbqd.acs-subsite.www.admin.groups.rel-type-add-2-oracle.segment_exists_p {dbqd.acs-subsite.www.admin.groups.rel-type-add-2-oracle.segment_exists_p {
      
    select case when exists (select 1 
                               from rel_segments s 
                              where s.group_id = :group_id
                                and s.rel_type = :rel_type)
                then 1 else 0 end
      from dual

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/groups/rel-type-add-2-oracle.xql}
dbqd.acs-subsite.www.admin.groups.rel-type-add-2.types_match_p {dbqd.acs-subsite.www.admin.groups.rel-type-add-2.types_match_p {
      
	    select count(*)
	      from acs_rel_types t
	     where (t.object_type_one = :group_type 
                    or acs_object_type__is_subtype_p(t.object_type_one, :group_type) = 't')
               and t.rel_type = :rel_type
	
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/groups/rel-type-add-2-postgresql.xql}
dbqd.acs-subsite.www.admin.groups.rel-type-add-2.exists_p {dbqd.acs-subsite.www.admin.groups.rel-type-add-2.exists_p {
      
	select case when exists (select 1 
                                   from group_rels 
                                  where group_id = :group_id
                                    and rel_type = :rel_type)
                    then 1 else 0 end
	  
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/groups/rel-type-add-2-postgresql.xql}
dbqd.acs-subsite.www.admin.groups.rel-type-add-2.segment_exists_p {dbqd.acs-subsite.www.admin.groups.rel-type-add-2.segment_exists_p {
      
    select case when exists (select 1 
                               from rel_segments s 
                              where s.group_id = :group_id
                                and s.rel_type = :rel_type)
                then 1 else 0 end
      

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/groups/rel-type-add-2-postgresql.xql}
dbqd.acs-subsite.www.admin.groups.rel-type-add-2.select_group_type {dbqd.acs-subsite.www.admin.groups.rel-type-add-2.select_group_type {
      
	    select o.object_type as group_type
	      from acs_objects o
	     where o.object_id = :group_id
	
      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/groups/rel-type-add-2.xql}
dbqd.acs-subsite.www.admin.groups.rel-type-add-oracle.select_primary_relations {dbqd.acs-subsite.www.admin.groups.rel-type-add-oracle.select_primary_relations {
      
    select replace(lpad(' ', (t.type_level - 1) * 4), ' ', '&nbsp;') as indent,
           t.pretty_name, t.rel_type
      from (select t.pretty_name, t.object_type as rel_type, level as type_level
              from acs_object_types t
             where t.object_type not in (select g.rel_type 
                                           from group_rels g 
                                          where g.group_id = :group_id)
           connect by prior t.object_type = t.supertype
             start with t.object_type in ('membership_rel', 'composition_rel')) t,
           acs_rel_types rel_type
     where t.rel_type = rel_type.rel_type
       and (rel_type.object_type_one = :group_type 
            or acs_object_type.is_subtype_p(rel_type.object_type_one, :group_type) = 't')

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/groups/rel-type-add-oracle.xql}
dbqd.acs-subsite.www.admin.groups.rel-type-add.select_primary_relations {dbqd.acs-subsite.www.admin.groups.rel-type-add.select_primary_relations {

    select repeat('&nbsp;', (t.type_level - 1) * 4) as indent,
           t.pretty_name, t.rel_type
      from (select t2.pretty_name, t2.object_type as rel_type, tree_level(t2.tree_sortkey) - tree_level(t1.tree_sortkey) + 1  as type_level
              from acs_object_types t1,
		   acs_object_types t2
             where t2.tree_sortkey between t1.tree_sortkey and tree_right(t1.tree_sortkey)
	       and t2.object_type  not in (select g.rel_type from group_rels g where g.group_id = :group_id)
	       and t1.object_type in ('membership_rel', 'composition_rel')) t,
	    acs_rel_types rel_type
       where t.rel_type = rel_type.rel_type
       and (rel_type.object_type_one = :group_type 
            or acs_object_type__is_subtype_p(rel_type.object_type_one, :group_type) = 't')

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/groups/rel-type-add-postgresql.xql}
dbqd.acs-subsite.www.admin.groups.rel-type-add.select_group_type {dbqd.acs-subsite.www.admin.groups.rel-type-add.select_group_type {
      
    select o.object_type as group_type
      from acs_objects o
     where o.object_id = :group_id

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/groups/rel-type-add.xql}
dbqd.acs-subsite.www.admin.groups.rel-type-remove-2.select_group_id {dbqd.acs-subsite.www.admin.groups.rel-type-remove-2.select_group_id {
      
    select g.group_id, g.rel_type
      from group_rels g, acs_object_types t
     where g.rel_type = t.object_type
       and g.group_rel_id = :group_rel_id

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/groups/rel-type-remove-2.xql}
dbqd.acs-subsite.www.admin.groups.rel-type-remove-2.select_rel_ids {dbqd.acs-subsite.www.admin.groups.rel-type-remove-2.select_rel_ids {
      
	select r.rel_id 
          from acs_rels r
	 where r.rel_type = :rel_type
	   and r.object_id_one = :group_id
    
      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/groups/rel-type-remove-2.xql}
dbqd.acs-subsite.www.admin.groups.rel-type-remove-2.select_segments {dbqd.acs-subsite.www.admin.groups.rel-type-remove-2.select_segments {
      
	    select segment_id
	      from rel_segments 
	     where group_id = :group_id
	       and rel_type = :rel_type
	
      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/groups/rel-type-remove-2.xql}
dbqd.acs-subsite.www.admin.groups.rel-type-remove-2.remove_relationship_type {dbqd.acs-subsite.www.admin.groups.rel-type-remove-2.remove_relationship_type {
      
	    delete from group_rels where group_rel_id = :group_rel_id
	
      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/groups/rel-type-remove-2.xql}
dbqd.acs-subsite.www.admin.groups.rel-type-remove-oracle.select_info {dbqd.acs-subsite.www.admin.groups.rel-type-remove-oracle.select_info {
      
    select g.rel_type, g.group_id, acs_object.name(g.group_id) as group_name,
           t.pretty_name as rel_pretty_name
      from acs_object_types t, group_rels g
     where g.group_rel_id = :group_rel_id
       and t.object_type = g.rel_type

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/groups/rel-type-remove-oracle.xql}
dbqd.acs-subsite.www.admin.groups.rel-type-remove.select_info {dbqd.acs-subsite.www.admin.groups.rel-type-remove.select_info {
      
    select g.rel_type, g.group_id, acs_object__name(g.group_id) as group_name,
           t.pretty_name as rel_pretty_name
      from acs_object_types t, group_rels g
     where g.group_rel_id = :group_rel_id
       and t.object_type = g.rel_type

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/groups/rel-type-remove-postgresql.xql}
dbqd.acs-subsite.www.admin.host-node-map.add.host_node_insert {dbqd.acs-subsite.www.admin.host-node-map.add.host_node_insert {


    insert into host_node_map 
    (host, node_id)
    values 
    (:host, :root)

    } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/host-node-map/add.xql}
dbqd.acs-subsite.www.admin.host-node-map.delete.host_node_delete {dbqd.acs-subsite.www.admin.host-node-map.delete.host_node_delete {

    delete from host_node_map 
    where host = :host
    and node_id = :node_id

    } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/host-node-map/delete.xql}
dbqd.acs-subsite.www.admin.host-node-map.index-oracle.root_id {dbqd.acs-subsite.www.admin.host-node-map.index-oracle.root_id {
      
      select site_node.node_id('/') from dual
      
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/host-node-map/index-oracle.xql}
dbqd.acs-subsite.www.admin.host-node-map.index-oracle.host_node_pair {dbqd.acs-subsite.www.admin.host-node-map.index-oracle.host_node_pair {

    select host, node_id, site_node.url(node_id) as url 
    from host_node_map
      
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/host-node-map/index-oracle.xql}
dbqd.acs-subsite.www.admin.host-node-map.index.root_id {dbqd.acs-subsite.www.admin.host-node-map.index.root_id {
      
      select site_node__node_id('/', null)
      
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/host-node-map/index-postgresql.xql}
dbqd.acs-subsite.www.admin.host-node-map.index.host_node_pair {dbqd.acs-subsite.www.admin.host-node-map.index.host_node_pair {

    select host, node_id, site_node__url(node_id) as url 
    from host_node_map
      
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/host-node-map/index-postgresql.xql}
dbqd.acs-subsite.www.admin.host-node-map.index.node_list {dbqd.acs-subsite.www.admin.host-node-map.index.node_list {
          select node_id from site_nodes
      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/host-node-map/index.xql}
dbqd.acs-subsite.www.admin.index-oracle.acs_admin_url_get {dbqd.acs-subsite.www.admin.index-oracle.acs_admin_url_get {
      
    select site_node.url(node_id) acs_admin_url, instance_name
    from site_nodes s, apm_packages p
    where s.object_id = p.package_id
    and p.package_key = 'acs-admin'
    and rownum = 1

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/index-oracle.xql}
dbqd.acs-subsite.www.admin.index.acs_admin_url_get {dbqd.acs-subsite.www.admin.index.acs_admin_url_get {

    select site_node__url(node_id) as acs_admin_url, instance_name
    from site_nodes s, apm_packages p
    where s.object_id = p.package_id
    and p.package_key = 'acs-admin'
    limit 1

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/index-postgresql.xql}
dbqd.acs-subsite.www.admin.index.subsite_name {dbqd.acs-subsite.www.admin.index.subsite_name {
      
    select p.instance_name 
      from apm_packages p
     where p.package_id = :package_id

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/index.xql}
dbqd.acs-subsite.www.admin.object-types.alphabetical-index.object_type_in_alphabetical_order {dbqd.acs-subsite.www.admin.object-types.alphabetical-index.object_type_in_alphabetical_order {
      
    select object_type,
           pretty_name
      from acs_object_types
     order by lower(pretty_name)

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/object-types/alphabetical-index.xql}
dbqd.acs-subsite.www.admin.object-types.one-oracle.attribute_comment {dbqd.acs-subsite.www.admin.object-types.one-oracle.attribute_comment {
      
	select utc.column_name,
	       utc.data_type,
               ucc.comments
	  from user_tab_columns utc,
               user_col_comments ucc
	 where utc.table_name = '[string toupper $table_name]'
           and utc.table_name = ucc.table_name(+)
           and utc.column_name = ucc.column_name(+)
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/object-types/one-oracle.xql}
dbqd.acs-subsite.www.admin.object-types.one.package_index {dbqd.acs-subsite.www.admin.object-types.one.package_index {

	select definition || '\n' as text
	  from acs_func_defs
	 where fname ilike :package_name || '__%'
	 order by fname
      
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/object-types/one-postgresql.xql}
dbqd.acs-subsite.www.admin.object-types.one.object_type {dbqd.acs-subsite.www.admin.object-types.one.object_type {
      
    select supertype,
           abstract_p,
           pretty_name,
           pretty_plural,
           table_name,
           id_column,
           name_method,
           type_extension_table,
           package_name,
           dynamic_p
      from acs_object_types
     where object_type = :object_type

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/object-types/one.xql}
dbqd.acs-subsite.www.admin.object-types.one.attribute {dbqd.acs-subsite.www.admin.object-types.one.attribute {
      
    select attribute_name,
           pretty_name,
           pretty_plural,
           datatype,
           default_value,
           min_n_values,
           max_n_values,
           storage,
           table_name as attr_table_name,
           column_name
      from acs_attributes
     where object_type = :object_type

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/object-types/one.xql}
dbqd.acs-subsite.www.admin.object-types.one.table_comment {dbqd.acs-subsite.www.admin.object-types.one.table_comment {
      select comments from user_tab_comments where table_name = '[string toupper $table_name]'
      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/object-types/one.xql}
dbqd.acs-subsite.www.admin.object-types.one.attribute_comment {dbqd.acs-subsite.www.admin.object-types.one.attribute_comment {

	select utc.column_name,
	       utc.data_type,
               ucc.comments
	  from user_tab_columns utc left join
               user_col_comments ucc on (utc.table_name= ucc.table_name and utc.column_name = ucc.column_name)
	 where utc.table_name = '[string toupper $table_name]'
    
      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/object-types/one.xql}
dbqd.acs-subsite.www.admin.object-types.one.package_index {dbqd.acs-subsite.www.admin.object-types.one.package_index {

	select definition || '\n' as text
	  from acs_func_defs
	 where fname ilike :package_name || '__%'
	 order by fname
      
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/object-types/one-postgresql.xql}
dbqd.acs-subsite.www.admin.parties.new-oracle.rel_type_info {dbqd.acs-subsite.www.admin.parties.new-oracle.rel_type_info {
      
    select object_type as ancestor_rel_type
      from acs_object_types
     where supertype = 'relationship'
       and object_type in (
               select object_type from acs_object_types
               start with object_type = :add_with_rel_type
               connect by object_type = prior supertype
           )

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/parties/new-oracle.xql}
dbqd.acs-subsite.www.admin.parties.new.rel_type_info {dbqd.acs-subsite.www.admin.parties.new.rel_type_info {

         select t2.object_type as ancestor_rel_type
         from acs_object_types t1, acs_object_types t2
         where t1.object_type = :add_with_rel_type
           and t1.tree_sortkey between t2.tree_sortkey and tree_right(t2.tree_sortkey)
           and t2.supertype = 'relationship'

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/parties/new-postgresql.xql}
dbqd.acs-subsite.www.admin.parties.new.group_info {dbqd.acs-subsite.www.admin.parties.new.group_info {
      
    select group_name as add_to_group_name, 
           join_policy as add_to_group_join_policy
    from groups
    where group_id = :add_to_group_id

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/parties/new.xql}
dbqd.acs-subsite.www.admin.parties.new.select_type_info {dbqd.acs-subsite.www.admin.parties.new.select_type_info {
      
    select t.pretty_name as party_type_pretty_name,
           t.table_name
      from acs_object_types t
     where t.object_type = :party_type

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/parties/new.xql}
dbqd.acs-subsite.www.admin.parties.one-oracle.party_info {dbqd.acs-subsite.www.admin.parties.one-oracle.party_info {
      
    select acs_object.name(:party_id) as party_name,
           object_type as party_type
      from acs_objects
     where object_id = :party_id

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/parties/one-oracle.xql}
dbqd.acs-subsite.www.admin.parties.one.party_info {dbqd.acs-subsite.www.admin.parties.one.party_info {
      
    select acs_object__name(:party_id) as party_name,
           object_type as party_type
      from acs_objects
     where object_id = :party_id

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/parties/one-postgresql.xql}
dbqd.acs-subsite.www.admin.rel-segments.constraints.delete-2-oracle.delete_constraint {dbqd.acs-subsite.www.admin.rel-segments.constraints.delete-2-oracle.delete_constraint {
      
	begin rel_constraint.del(constraint_id => :constraint_id); end;
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/rel-segments/constraints/delete-2-oracle.xql}
dbqd.acs-subsite.www.admin.rel-segments.constraints.delete-2.delete_constraint {dbqd.acs-subsite.www.admin.rel-segments.constraints.delete-2.delete_constraint {

	begin perform rel_constraint__delete(:constraint_id); return null; end;
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/rel-segments/constraints/delete-2-postgresql.xql}
dbqd.acs-subsite.www.admin.rel-segments.constraints.delete-2.select_segment_id {dbqd.acs-subsite.www.admin.rel-segments.constraints.delete-2.select_segment_id {
      
	    select c.rel_segment as segment_id from rel_constraints c where c.constraint_id = :constraint_id
	
      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/rel-segments/constraints/delete-2.xql}
dbqd.acs-subsite.www.admin.rel-segments.constraints.delete-2.select_constraint_props {dbqd.acs-subsite.www.admin.rel-segments.constraints.delete-2.select_constraint_props {
      
	select 1
        from rel_constraints c, application_group_segments s,
             application_group_segments s2
	where c.rel_segment = s.segment_id
          and c.constraint_id = :constraint_id
          and s.package_id = :package_id
          and s2.segment_id = c.required_rel_segment
          and s2.package_id = :package_id
    
      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/rel-segments/constraints/delete-2.xql}
dbqd.acs-subsite.www.admin.rel-segments.constraints.delete.select_constraint_props {dbqd.acs-subsite.www.admin.rel-segments.constraints.delete.select_constraint_props {
      
    select c.constraint_name, s.segment_name
      from rel_constraints c, application_group_segments s,
           application_group_segments s2
     where c.rel_segment = s.segment_id
       and c.constraint_id = :constraint_id
       and s.package_id = :package_id
       and s2.segment_id = c.required_rel_segment
       and s2.package_id = :package_id

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/rel-segments/constraints/delete.xql}
dbqd.acs-subsite.www.admin.rel-segments.constraints.index.select_rel_constraints {dbqd.acs-subsite.www.admin.rel-segments.constraints.index.select_rel_constraints {
      
    select c.constraint_id, c.constraint_name
      from rel_constraints c
           application_group_segments s1, application_group_segments s2
     where s1.segment_id = c.rel_segment
       and s1.package_id = :package_id
       and s2.segment_id = c.required_rel_segment
       and s2.package_id = :package_id
       and exists (select 1
                   from all_object_party_privilege_map perm
                   where perm.object_id = c.constraint_id
                     and perm.party_id = :user_id
                     and perm.privilege = 'read')
     order by lower(c.constraint_name)

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/rel-segments/constraints/index.xql}
dbqd.acs-subsite.www.admin.rel-segments.constraints.new-oracle.select_rel_properties {dbqd.acs-subsite.www.admin.rel-segments.constraints.new-oracle.select_rel_properties {
      
    select s.segment_name, 
           acs_rel_type.role_pretty_name(t.role_one) as role_one_name,
           acs_rel_type.role_pretty_name(t.role_two) as role_two_name
      from rel_segments s, acs_rel_types t
     where s.rel_type = t.rel_type
       and s.segment_id = :rel_segment

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/rel-segments/constraints/new-oracle.xql}
dbqd.acs-subsite.www.admin.rel-segments.constraints.new-oracle.add_constraint {dbqd.acs-subsite.www.admin.rel-segments.constraints.new-oracle.add_constraint {
      
	 BEGIN
	  :1 := rel_constraint.new(constraint_name => :constraint_name,
                                   rel_segment => :rel_segment,
                                   rel_side => :rel_side,
                                   required_rel_segment => :required_rel_segment,
                                   creation_user => :creation_user,
                                   creation_ip => :creation_ip
                                  );
	 END;
	
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/rel-segments/constraints/new-oracle.xql}
dbqd.acs-subsite.www.admin.rel-segments.constraints.new-oracle.select_violated_rels {dbqd.acs-subsite.www.admin.rel-segments.constraints.new-oracle.select_violated_rels {
      
	    select viol.rel_id, acs_object.name(viol.party_id) as name
	      from rel_constraints_violated_one viol
	     where viol.constraint_id = :constraint_id
	    UNION ALL
	    select viol.rel_id, acs_object.name(viol.party_id) as name
	      from rel_constraints_violated_two viol
	     where viol.constraint_id = :constraint_id
	
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/rel-segments/constraints/new-oracle.xql}
dbqd.acs-subsite.www.admin.rel-segments.constraints.new.select_rel_properties {dbqd.acs-subsite.www.admin.rel-segments.constraints.new.select_rel_properties {
      
    select s.segment_name, 
           acs_rel_type__role_pretty_name(t.role_one) as role_one_name,
           acs_rel_type__role_pretty_name(t.role_two) as role_two_name
      from rel_segments s, acs_rel_types t
     where s.rel_type = t.rel_type
       and s.segment_id = :rel_segment

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/rel-segments/constraints/new-postgresql.xql}
dbqd.acs-subsite.www.admin.rel-segments.constraints.new.add_constraint {dbqd.acs-subsite.www.admin.rel-segments.constraints.new.add_constraint {

	  select rel_constraint__new(
	    null,
	    'rel_constraint',
	    :constraint_name,
	    :rel_segment,
	    :rel_side,
	    :required_rel_segment,
	    null,
	    :creation_user,
	    :creation_ip
	  );
	
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/rel-segments/constraints/new-postgresql.xql}
dbqd.acs-subsite.www.admin.rel-segments.constraints.new.select_violated_rels {dbqd.acs-subsite.www.admin.rel-segments.constraints.new.select_violated_rels {
      
	    select viol.rel_id, acs_object__name(viol.party_id) as name
	      from rel_constraints_violated_one viol
	     where viol.constraint_id = :constraint_id
	    UNION ALL
	    select viol.rel_id, acs_object__name(viol.party_id) as name
	      from rel_constraints_violated_two viol
	     where viol.constraint_id = :constraint_id
	
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/rel-segments/constraints/new-postgresql.xql}
dbqd.acs-subsite.www.admin.rel-segments.constraints.new.select_segments {dbqd.acs-subsite.www.admin.rel-segments.constraints.new.select_segments {
      
    select s.segment_name, s.segment_id
      from application_group_segments s
     where s.segment_id <> :rel_segment
       and s.package_id = :package_id

     order by lower(s.segment_name)

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/rel-segments/constraints/new.xql}
dbqd.acs-subsite.www.admin.rel-segments.constraints.one-oracle.select_constraint_properties {dbqd.acs-subsite.www.admin.rel-segments.constraints.one-oracle.select_constraint_properties {
      
    select c.constraint_id, c.constraint_name, c.rel_side, 
           s.segment_id, s.segment_name, s.rel_type, acs_group.name(s.group_id) as group_name,
           s2.segment_id as req_segment_id, s2.segment_name as req_segment_name, 
           s2.rel_type as req_rel_type, acs_group.name(s2.group_id) as req_group_name
      from application_group_segments s, application_group_segments s2,
           rel_constraints c
     where s.segment_id = c.rel_segment
       and s2.segment_id = c.required_rel_segment
       and c.constraint_id = :constraint_id
       and s.package_id = :package_id

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/rel-segments/constraints/one-oracle.xql}
dbqd.acs-subsite.www.admin.rel-segments.constraints.one-oracle.select_rel_type_info {dbqd.acs-subsite.www.admin.rel-segments.constraints.one-oracle.select_rel_type_info {
      
    select role1.role as role_one, 
           nvl(role1.pretty_name,'Object on side one') as role_one_pretty_name,
           nvl(role1.pretty_plural,'Objects on side one') as role_one_pretty_plural,
           role2.role as role_two, 
           nvl(role2.pretty_name,'Object on side two') as role_two_pretty_name,
           nvl(role2.pretty_plural,'Objects on side two') as role_two_pretty_plural,
           acs_object_type.pretty_name(rel.rel_type) as rel_type_pretty_name
      from acs_rel_types rel, acs_rel_roles role1, acs_rel_roles role2
     where rel.rel_type = :rel_type
       and rel.role_one = role1.role(+)
       and rel.role_two = role2.role(+)

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/rel-segments/constraints/one-oracle.xql}
dbqd.acs-subsite.www.admin.rel-segments.constraints.one.select_constraint_properties {dbqd.acs-subsite.www.admin.rel-segments.constraints.one.select_constraint_properties {
      
    select c.constraint_id, c.constraint_name, c.rel_side, 
           s.segment_id, s.segment_name, s.rel_type, acs_group__name(s.group_id) as group_name,
           s2.segment_id as req_segment_id, s2.segment_name as req_segment_name, 
           s2.rel_type as req_rel_type, acs_group__name(s2.group_id) as req_group_name
      from application_group_segments s, application_group_segments s2,
           rel_constraints c
     where s.segment_id = c.rel_segment
       and s2.segment_id = c.required_rel_segment
       and c.constraint_id = :constraint_id
       and s.package_id = :package_id

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/rel-segments/constraints/one-postgresql.xql}
dbqd.acs-subsite.www.admin.rel-segments.constraints.one.select_rel_type_info {dbqd.acs-subsite.www.admin.rel-segments.constraints.one.select_rel_type_info {

    select role1.role as role_one, 
           coalesce(role1.pretty_name,'Object on side one') as role_one_pretty_name,
           coalesce(role1.pretty_plural,'Objects on side one') as role_one_pretty_plural,
           role2.role as role_two, 
           coalesce(role2.pretty_name,'Object on side two') as role_two_pretty_name,
           coalesce(role2.pretty_plural,'Objects on side two') as role_two_pretty_plural,
           acs_object_type__pretty_name(rel.rel_type) as rel_type_pretty_name
      from acs_rel_types rel
	     left outer join  acs_rel_roles role1 on (rel.role_one = role1.role)
	     left outer join  acs_rel_roles role2 on (rel.role_two = role2.role)
     where rel.rel_type = :rel_type

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/rel-segments/constraints/one-postgresql.xql}
dbqd.acs-subsite.www.admin.rel-segments.delete-2.select_group_id {dbqd.acs-subsite.www.admin.rel-segments.delete-2.select_group_id {
      
	    select s.group_id from rel_segments s where s.segment_id = :segment_id
	
      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/rel-segments/delete-2.xql}
dbqd.acs-subsite.www.admin.rel-segments.delete.select_segment_info {dbqd.acs-subsite.www.admin.rel-segments.delete.select_segment_info {
      
    select s.segment_name 
      from rel_segments s
     where s.segment_id = :segment_id

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/rel-segments/delete.xql}
dbqd.acs-subsite.www.admin.rel-segments.elements-display-oracle.elements_select {dbqd.acs-subsite.www.admin.rel-segments.elements-display-oracle.elements_select {
    select acs_object.name(map.party_id) as name, map.rel_id, 
           decode(map.container_id, :group_id, 1, 0) as direct_p,
           acs_object.name(map.container_id) as container_name
      from rel_segment_party_map map
     where acs_permission.permission_p(map.party_id, :user_id, 'read') = 't'
       and map.segment_id = :segment_id
     order by lower(name)
} {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/rel-segments/elements-display-oracle.xql}
dbqd.acs-subsite.www.admin.rel-segments.elements-display.elements_select {dbqd.acs-subsite.www.admin.rel-segments.elements-display.elements_select {
    select acs_object__name(map.party_id) as name, map.rel_id, 
           case when map.container_id = :group_id then 1 else 0 end as direct_p,
           acs_object__name(map.container_id) as container_name
      from rel_segment_party_map map
     where acs_permission__permission_p(map.party_id, :user_id, 'read') = 't'
       and map.segment_id = :segment_id
     order by name
} {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/rel-segments/elements-display-postgresql.xql}
dbqd.acs-subsite.www.admin.rel-segments.elements-oracle.select_segment_info {dbqd.acs-subsite.www.admin.rel-segments.elements-oracle.select_segment_info {
      
    select s.segment_name, s.group_id,
           acs_rel_type.role_pretty_plural(r.role_two) as role_pretty_plural
      from rel_segments s, acs_rel_types r
     where s.segment_id = :segment_id
       and s.rel_type = r.rel_type

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/rel-segments/elements-oracle.xql}
dbqd.acs-subsite.www.admin.rel-segments.elements.select_segment_info {dbqd.acs-subsite.www.admin.rel-segments.elements.select_segment_info {
      
    select s.segment_name, s.group_id,
           acs_rel_type__role_pretty_plural(r.role_two) as role_pretty_plural
      from rel_segments s, acs_rel_types r
     where s.segment_id = :segment_id
       and s.rel_type = r.rel_type

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/rel-segments/elements-postgresql.xql}
dbqd.acs-subsite.www.admin.rel-segments.index-oracle.select_rel_segments {dbqd.acs-subsite.www.admin.rel-segments.index-oracle.select_rel_segments {
      
    select s.segment_id, s.segment_name, s.group_id, acs_object.name(s.group_id) as group_name, 
           s.rel_type, t.pretty_name as rel_type_pretty_name
      from acs_object_types t, 
           rel_segments s, 
           acs_object_party_privilege_map perm,
           application_group_segments ags
     where perm.object_id = s.segment_id
       and perm.party_id = :user_id
       and perm.privilege = 'read'
       and t.object_type = s.rel_type
       and s.segment_id = ags.segment_id
       and ags.package_id = :package_id
     order by lower(s.segment_name)

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/rel-segments/index-oracle.xql}
dbqd.acs-subsite.www.admin.rel-segments.index.select_rel_segments {dbqd.acs-subsite.www.admin.rel-segments.index.select_rel_segments {
      
    select s.segment_id, s.segment_name, s.group_id, acs_object__name(s.group_id) as group_name, 
           s.rel_type, t.pretty_name as rel_type_pretty_name
      from acs_object_types t, 
           rel_segments s, 
           application_group_segments ags
     where acs_permission__permission_p(s.segment_id, :user_id, 'read')
       and t.object_type = s.rel_type
       and s.segment_id = ags.segment_id
       and ags.package_id = :package_id
     order by lower(s.segment_name)

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/rel-segments/index-postgresql.xql}
dbqd.acs-subsite.www.admin.rel-segments.new-2-oracle.select_basic_info {dbqd.acs-subsite.www.admin.rel-segments.new-2-oracle.select_basic_info {
      
    select acs_group.name(:group_id) as group_name,
    nvl(acs_rel_type.role_pretty_plural(t.role_two),'Elements') as role_pretty_plural
      from acs_rel_types t
     where t.rel_type = :rel_type

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/rel-segments/new-2-oracle.xql}
dbqd.acs-subsite.www.admin.rel-segments.new-2.select_basic_info {dbqd.acs-subsite.www.admin.rel-segments.new-2.select_basic_info {
      
    select acs_group__name(:group_id) as group_name,
    coalesce(acs_rel_type__role_pretty_plural(t.role_two),'Elements') as role_pretty_plural
      from acs_rel_types t
     where t.rel_type = :rel_type

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/rel-segments/new-2-postgresql.xql}
dbqd.acs-subsite.www.admin.rel-segments.new-3-oracle.segments_exists_p {dbqd.acs-subsite.www.admin.rel-segments.new-3-oracle.segments_exists_p {
      
    select case when exists 
                   (select 1 from rel_segments s where s.segment_id <> :segment_id)
           then 1 else 0 end
      from dual

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/rel-segments/new-3-oracle.xql}
dbqd.acs-subsite.www.admin.rel-segments.new-3.segments_exists_p {dbqd.acs-subsite.www.admin.rel-segments.new-3.segments_exists_p {
      
    select case when exists 
                   (select 1 from rel_segments s where s.segment_id <> :segment_id)
           then 1 else 0 end
      

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/rel-segments/new-3-postgresql.xql}
dbqd.acs-subsite.www.admin.rel-segments.new-3.select_segment_id {dbqd.acs-subsite.www.admin.rel-segments.new-3.select_segment_id {
      
	select s.segment_id
	  from rel_segments s
	 where s.group_id = :group_id
	   and s.rel_type = :rel_type
    
      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/rel-segments/new-3.xql}
dbqd.acs-subsite.www.admin.rel-segments.new-oracle.select_relation_types {dbqd.acs-subsite.www.admin.rel-segments.new-oracle.select_relation_types {
      
    select t.pretty_name, t.object_type as rel_type,
    replace(lpad(' ', (level - 1) * 4), ' ', '&nbsp;') as indent
    from acs_object_types t
    where t.object_type not in (select s.rel_type from rel_segments s where s.group_id = :group_id)
    connect by prior t.object_type = t.supertype
    start with t.object_type in ('membership_rel', 'composition_rel')
    order by lower(t.pretty_name) desc

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/rel-segments/new-oracle.xql}
dbqd.acs-subsite.www.admin.rel-segments.new-oracle.select_basic_info {dbqd.acs-subsite.www.admin.rel-segments.new-oracle.select_basic_info {
      
    select acs_group.name(:group_id) as group_name
      from dual

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/rel-segments/new-oracle.xql}
dbqd.acs-subsite.www.admin.rel-segments.new.select_relation_types {dbqd.acs-subsite.www.admin.rel-segments.new.select_relation_types {
    select t2.pretty_name, t2.object_type as rel_type,
	   repeat('&nbsp;', (tree_level(t2.tree_sortkey) - tree_level(t1.tree_sortkey)) * 4) as indent
      from acs_object_types t1,
	   acs_object_types t2,
           rel_segments s
     where t2.tree_sortkey between t1.tree_sortkey and tree_right(t1.tree_sortkey)
       and t1.object_type in ('membership_rel', 'composition_rel')
       and t2.object_type <> s.rel_type
       and s.group_id = :group_id
    order by lower(t2.pretty_name) desc

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/rel-segments/new-postgresql.xql}
dbqd.acs-subsite.www.admin.rel-segments.new.select_basic_info {dbqd.acs-subsite.www.admin.rel-segments.new.select_basic_info {
      
    select acs_group__name(:group_id) as group_name
      

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/rel-segments/new-postgresql.xql}
dbqd.acs-subsite.www.admin.rel-segments.one-oracle.select_segment_properties {dbqd.acs-subsite.www.admin.rel-segments.one-oracle.select_segment_properties {
      
    select s.segment_id, s.segment_name, s.group_id, acs_object.name(s.group_id) as group_name,
           s.rel_type, acs_object_type.pretty_name(r.rel_type) as rel_type_pretty_name,
           acs_rel_type.role_pretty_plural(r.role_two) as role_pretty_plural
      from rel_segments s, acs_rel_types r
     where s.segment_id = :segment_id
       and s.rel_type = r.rel_type

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/rel-segments/one-oracle.xql}
dbqd.acs-subsite.www.admin.rel-segments.one.select_segment_properties {dbqd.acs-subsite.www.admin.rel-segments.one.select_segment_properties {
      
    select s.segment_id, s.segment_name, s.group_id, acs_object__name(s.group_id) as group_name,
           s.rel_type, acs_object_type__pretty_name(r.rel_type) as rel_type_pretty_name,
           acs_rel_type__role_pretty_plural(r.role_two) as role_pretty_plural
      from rel_segments s, acs_rel_types r
     where s.segment_id = :segment_id
       and s.rel_type = r.rel_type

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/rel-segments/one-postgresql.xql}
dbqd.acs-subsite.www.admin.rel-segments.one.constraints_select {dbqd.acs-subsite.www.admin.rel-segments.one.constraints_select {
      
    select c.constraint_id, c.constraint_name, c.rel_side
      from rel_constraints c
     where c.rel_segment = :segment_id

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/rel-segments/one.xql}
dbqd.acs-subsite.www.admin.rel-segments.one.select_segment_info {dbqd.acs-subsite.www.admin.rel-segments.one.select_segment_info {
      
         select count(*) as number_elements
           from rel_segment_party_map map
         where map.segment_id = :segment_id
           and exists (select 1
                       from acs_object_party_privilege_map perm
                       where perm.object_id = map.party_id
                         and perm.party_id = :user_id
                         and perm.privilege = 'read')

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/rel-segments/one.xql}
dbqd.acs-subsite.www.admin.rel-types.add-2.update_rel_type_mapping {dbqd.acs-subsite.www.admin.rel-types.add-2.update_rel_type_mapping {
      
    insert into group_type_allowed_rels
    (constraint_id, group_type, rel_type)
    values
    (:constraint_id, :object_type, :rel_type)

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/add-2.xql}
dbqd.acs-subsite.www.admin.rel-types.add.select_primary_relations {dbqd.acs-subsite.www.admin.rel-types.add.select_primary_relations {
      
    select o.object_type as rel_type, o.pretty_name
      from acs_object_types o
     where o.object_type in ('composition_rel','membership_rel')
       and o.object_type not in (select g.rel_type from group_type_allowed_rels g where g.group_type = :object_type)

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/add.xql}
dbqd.acs-subsite.www.admin.rel-types.delete-2-oracle.drop_relationship_type {dbqd.acs-subsite.www.admin.rel-types.delete-2-oracle.drop_relationship_type {
      
	    BEGIN
	      acs_rel_type.drop_type( rel_type  => :rel_type,
                                      cascade_p => 't' );
	    END;
	
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/delete-2-oracle.xql}
dbqd.acs-subsite.www.admin.rel-types.delete-2-oracle.drop_type_table {dbqd.acs-subsite.www.admin.rel-types.delete-2-oracle.drop_type_table {
      drop table $table_name
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/delete-2-oracle.xql}
dbqd.acs-subsite.www.admin.rel-types.delete-2.drop_relationship_type {dbqd.acs-subsite.www.admin.rel-types.delete-2.drop_relationship_type {
	      select acs_rel_type__drop_type(:rel_type,'t')
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/delete-2-postgresql.xql}
dbqd.acs-subsite.www.admin.rel-types.delete-2.drop_type_table {dbqd.acs-subsite.www.admin.rel-types.delete-2.drop_type_table {
drop table $table_name
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/delete-2-postgresql.xql}
dbqd.acs-subsite.www.admin.rel-types.delete-2.select_rel_ids {dbqd.acs-subsite.www.admin.rel-types.delete-2.select_rel_ids {
      
	select r.rel_id
	  from acs_rels r
	 where acs_permission__permission_p(r.rel_id, :user_id, 'delete')
	  and r.rel_type = :rel_type
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/delete-2-postgresql.xql}
dbqd.acs-subsite.www.admin.rel-types.delete-2.select_segment_id {dbqd.acs-subsite.www.admin.rel-types.delete-2.select_segment_id {
      
	select s.segment_id
	  from rel_segments s
	 where acs_permission__permission_p(s.segment_id, :user_id, 'delete')
	   and s.rel_type = :rel_type
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/delete-2-postgresql.xql}
dbqd.acs-subsite.www.admin.rel-types.delete-2.select_type_info {dbqd.acs-subsite.www.admin.rel-types.delete-2.select_type_info {
      
	select t.table_name 
	  from acs_object_types t
	 where t.object_type = :rel_type
    
      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/delete-2.xql}
dbqd.acs-subsite.www.admin.rel-types.delete-2.select_rel_ids {dbqd.acs-subsite.www.admin.rel-types.delete-2.select_rel_ids {
      
	select r.rel_id
	  from acs_rels r
	 where acs_permission__permission_p(r.rel_id, :user_id, 'delete')
	  and r.rel_type = :rel_type
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/delete-2-postgresql.xql}
dbqd.acs-subsite.www.admin.rel-types.delete-2.select_segment_id {dbqd.acs-subsite.www.admin.rel-types.delete-2.select_segment_id {
      
	select s.segment_id
	  from rel_segments s
	 where acs_permission__permission_p(s.segment_id, :user_id, 'delete')
	   and s.rel_type = :rel_type
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/delete-2-postgresql.xql}
dbqd.acs-subsite.www.admin.rel-types.delete-oracle.number_subtypes {dbqd.acs-subsite.www.admin.rel-types.delete-oracle.number_subtypes {
      
    select case when exists (select 1 
                               from acs_object_types t
                              where t.supertype = :rel_type) 
                then 1 else 0 end
      from dual

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/delete-oracle.xql}
dbqd.acs-subsite.www.admin.rel-types.delete-oracle.select_counts {dbqd.acs-subsite.www.admin.rel-types.delete-oracle.select_counts {
      
    select (select count(*) from rel_segments where rel_type = :rel_type) as segments,
           (select count(*) from acs_rels where rel_type = :rel_type) as rels
      from dual

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/delete-oracle.xql}
dbqd.acs-subsite.www.admin.rel-types.delete.number_subtypes {dbqd.acs-subsite.www.admin.rel-types.delete.number_subtypes {
      
    select case when exists (select 1 
                               from acs_object_types t
                              where t.supertype = :rel_type) 
                then 1 else 0 end
      

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/delete-postgresql.xql}
dbqd.acs-subsite.www.admin.rel-types.delete.select_counts {dbqd.acs-subsite.www.admin.rel-types.delete.select_counts {
      
    select (select count(*) from rel_segments where rel_type = :rel_type) as segments,
           (select count(*) from acs_rels where rel_type = :rel_type) as rels
      

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/delete-postgresql.xql}
dbqd.acs-subsite.www.admin.rel-types.delete.select_pretty_name {dbqd.acs-subsite.www.admin.rel-types.delete.select_pretty_name {
      
    select t.pretty_name
      from acs_object_types t
     where t.object_type = :rel_type

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/delete.xql}
dbqd.acs-subsite.www.admin.rel-types.delete.select_subtypes {dbqd.acs-subsite.www.admin.rel-types.delete.select_subtypes {
      
	select t.object_type as rel_type, t.pretty_name
          from acs_object_types t
         where t.supertype = :rel_type
    
      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/delete.xql}
dbqd.acs-subsite.www.admin.rel-types.index-oracle.select_relation_types {dbqd.acs-subsite.www.admin.rel-types.index-oracle.select_relation_types {
      
    select t.object_type as rel_type, t.pretty_name, t.indent, 
           nvl(num.number_relationships,0) as number_relationships
      from (select t.pretty_name, t.object_type, rownum as inner_rownum,
                   replace(lpad(' ', (level - 1) * 4), ' ', '&nbsp;') as indent
              from acs_object_types t
           connect by prior t.object_type = t.supertype
             start with t.object_type in ('membership_rel','composition_rel')
             order by lower(t.pretty_name)) t,
           (select r.rel_type, count(*) as number_relationships
              from acs_objects o, acs_rel_types r, 
                   app_group_distinct_rel_map m
             where r.rel_type = o.object_type
               and o.object_id = m.rel_id
               and m.package_id = :package_id
             group by r.rel_type) num
     where t.object_type = num.rel_type(+)
    order by t.inner_rownum

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/index-oracle.xql}
dbqd.acs-subsite.www.admin.rel-types.index.select_relation_types {dbqd.acs-subsite.www.admin.rel-types.index.select_relation_types {
    select t.object_type as rel_type, t.pretty_name, t.indent, 
           coalesce(num.number_relationships,0) as number_relationships
      from (select t2.pretty_name, t2.object_type, t2.tree_sortkey as inner_sortkey,
                   repeat('&nbsp;', (tree_level(t2.tree_sortkey) - tree_level(t1.tree_sortkey)) * 4) as indent
              from acs_object_types t1,
		   acs_object_types t2
	     where t2.tree_sortkey between t1.tree_sortkey and tree_right(t1.tree_sortkey)
	       and t1.object_type in ('membership_rel', 'composition_rel')) t left join
           (select r.rel_type, count(*) as number_relationships
              from acs_objects o, acs_rel_types r, 
                   app_group_distinct_rel_map m
             where r.rel_type = o.object_type
               and o.object_id = m.rel_id
               and m.package_id = :package_id
             group by r.rel_type) num
	on (t.object_type = num.rel_type)
    order by t.inner_sortkey

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/index-postgresql.xql}
dbqd.acs-subsite.www.admin.rel-types.mapping-remove-2.delete_group_rel_mapping {dbqd.acs-subsite.www.admin.rel-types.mapping-remove-2.delete_group_rel_mapping {
      
	delete from group_rels 
	 where group_rel_id = :group_rel_id
    
      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/mapping-remove-2.xql}
dbqd.acs-subsite.www.admin.rel-types.mapping-remove-2.delete_group_type_rel_mapping {dbqd.acs-subsite.www.admin.rel-types.mapping-remove-2.delete_group_type_rel_mapping {
      
	delete from group_type_rels 
	 where group_type_rel_id = :group_type_rel_id
    
      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/mapping-remove-2.xql}
dbqd.acs-subsite.www.admin.rel-types.mapping-remove.select_info {dbqd.acs-subsite.www.admin.rel-types.mapping-remove.select_info {
      
    select g.rel_type, g.group_type, 
           t.pretty_name as rel_pretty_name, t2.pretty_name as group_type_pretty_name
      from acs_object_types t, acs_object_types t2, group_type_rels g
     where g.group_rel_type_id = :group_rel_type_id
       and t.object_type = g.rel_type
       and t2.object_type = g.group_type

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/mapping-remove.xql}
dbqd.acs-subsite.www.admin.rel-types.new-2-oracle.select_object_types_one {dbqd.acs-subsite.www.admin.rel-types.new-2-oracle.select_object_types_one {
      
    select replace(lpad(' ', (level - 1) * 4), ' ', '&nbsp;') || t.pretty_name, 
           t.object_type as rel_type
      from acs_object_types t
   connect by prior t.object_type = t.supertype
     start with t.object_type=:max_object_type_one

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/new-2-oracle.xql}
dbqd.acs-subsite.www.admin.rel-types.new-2-oracle.select_object_types_two {dbqd.acs-subsite.www.admin.rel-types.new-2-oracle.select_object_types_two {
      
    select replace(lpad(' ', (level - 1) * 4), ' ', '&nbsp;') || t.pretty_name, 
           t.object_type as rel_type
      from acs_object_types t
   connect by prior t.object_type = t.supertype
     start with t.object_type=:max_object_type_two

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/new-2-oracle.xql}
dbqd.acs-subsite.www.admin.rel-types.new-2-oracle.pretty_name_unique {dbqd.acs-subsite.www.admin.rel-types.new-2-oracle.pretty_name_unique {
      
	    select case when exists (select 1 from acs_object_types t where t.pretty_name = :pretty_name)
                    then 1 else 0 end
	      from dual
	
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/new-2-oracle.xql}
dbqd.acs-subsite.www.admin.rel-types.new-2-oracle.pretty_plural_unique {dbqd.acs-subsite.www.admin.rel-types.new-2-oracle.pretty_plural_unique {
      
	    select case when exists (select 1 from acs_object_types t where t.pretty_plural = :pretty_plural)
                    then 1 else 0 end
	      from dual
	
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/new-2-oracle.xql}
dbqd.acs-subsite.www.admin.rel-types.new-2.select_object_types_one {dbqd.acs-subsite.www.admin.rel-types.new-2.select_object_types_one {

    select repeat('&nbsp;', ((tree_level(t2.tree_sortkey) - tree_level(t1.tree_sortkey)) * 4)) || t2.pretty_name, 
           t2.object_type as rel_type
      from acs_object_types t1,
	   acs_object_types t2
     where t2.tree_sortkey between t1.tree_sortkey and tree_right(t1.tree_sortkey)
       and t1.object_type = :max_object_type_one

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/new-2-postgresql.xql}
dbqd.acs-subsite.www.admin.rel-types.new-2.select_object_types_two {dbqd.acs-subsite.www.admin.rel-types.new-2.select_object_types_two {

    select repeat('&nbsp;', ((tree_level(t2.tree_sortkey) - tree_level(t1.tree_sortkey)) * 4)) || t2.pretty_name, 
           t2.object_type as rel_type
      from acs_object_types t1,
	   acs_object_types t2
     where t2.tree_sortkey between t1.tree_sortkey and tree_right(t1.tree_sortkey)
       and t1.object_type = :max_object_type_two

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/new-2-postgresql.xql}
dbqd.acs-subsite.www.admin.rel-types.new-2.pretty_name_unique {dbqd.acs-subsite.www.admin.rel-types.new-2.pretty_name_unique {
      
	    select case when exists (select 1 from acs_object_types t where t.pretty_name = :pretty_name)
                    then 1 else 0 end
	      
	
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/new-2-postgresql.xql}
dbqd.acs-subsite.www.admin.rel-types.new-2.pretty_plural_unique {dbqd.acs-subsite.www.admin.rel-types.new-2.pretty_plural_unique {
      
	    select case when exists (select 1 from acs_object_types t where t.pretty_plural = :pretty_plural)
                    then 1 else 0 end
	      
	
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/new-2-postgresql.xql}
dbqd.acs-subsite.www.admin.rel-types.new-2.select_object_types {dbqd.acs-subsite.www.admin.rel-types.new-2.select_object_types {
      
    select r.object_type_one as max_object_type_one, 
           r.object_type_two as max_object_type_two,
           t.pretty_name as supertype_pretty_name,
           r.role_one as supertype_role_one, r.role_two as supertype_role_two,
           r.min_n_rels_one as supertype_min_n_rels_one,
           r.max_n_rels_one as supertype_max_n_rels_one,
           r.min_n_rels_two as supertype_min_n_rels_two,
           r.max_n_rels_two as supertype_max_n_rels_two
      from acs_object_types t, acs_rel_types r
     where r.rel_type = :supertype
       and r.rel_type = t.object_type

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/new-2.xql}
dbqd.acs-subsite.www.admin.rel-types.new-2.select_roles {dbqd.acs-subsite.www.admin.rel-types.new-2.select_roles {
      
    select r.pretty_name, r.role
      from acs_rel_roles r
     order by lower(r.role)

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/new-2.xql}
dbqd.acs-subsite.www.admin.rel-types.new-oracle.select_supertypes {dbqd.acs-subsite.www.admin.rel-types.new-oracle.select_supertypes {
      
    select replace(lpad(' ', (level - 1) * 4), ' ', '&nbsp;') || t.pretty_name as name,
           t.object_type
      from acs_object_types t
   connect by prior t.object_type = t.supertype
     start with t.object_type in ('membership_rel','composition_rel')

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/new-oracle.xql}
dbqd.acs-subsite.www.admin.rel-types.new.select_supertypes {dbqd.acs-subsite.www.admin.rel-types.new.select_supertypes {

    select repeat('&nbsp;', (tree_level(t2.tree_sortkey) - tree_level(t1.tree_sortkey)) * 4) || t2.pretty_name as name,
           t2.object_type
      from acs_object_types t1,
	   acs_object_types t2
     where t2.tree_sortkey between t1.tree_sortkey and tree_right(t1.tree_sortkey)
       and t1.object_type in ('membership_rel', 'composition_rel')

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/new-postgresql.xql}
dbqd.acs-subsite.www.admin.rel-types.one-oracle.select_rel_type_properties {dbqd.acs-subsite.www.admin.rel-types.one-oracle.select_rel_type_properties {
      
    select t1.pretty_name as object_type_one_pretty_name, 
           r.object_type_one, acs_rel_type.role_pretty_name(r.role_one) as role_one_pretty_name, 
           r.role_one, r.min_n_rels_one, r.max_n_rels_one,
           t2.pretty_name as object_type_two_pretty_name, 
           r.object_type_two, acs_rel_type.role_pretty_name(r.role_two) as role_two_pretty_name, 
           r.role_two, r.min_n_rels_two, r.max_n_rels_two
      from acs_rel_types r, acs_object_types t1, acs_object_types t2
     where r.rel_type = :rel_type
       and r.object_type_one = t1.object_type
       and r.object_type_two = t2.object_type

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/one-oracle.xql}
dbqd.acs-subsite.www.admin.rel-types.one-oracle.rels_select {dbqd.acs-subsite.www.admin.rel-types.one-oracle.rels_select {
      
    select inner.* 
      from (select r.rel_id, acs_object.name(r.object_id_one) || ' and ' || acs_object.name(r.object_id_two) as name
              from acs_rels r, acs_object_party_privilege_map perm,
                   app_group_distinct_rel_map m
             where perm.object_id = r.rel_id
               and perm.party_id = :user_id
               and perm.privilege = 'read'
               and r.rel_type = :rel_type
               and m.rel_id = r.rel_id
               and m.package_id = :package_id
             order by lower(acs_object.name(r.object_id_one)), lower(acs_object.name(r.object_id_two))) inner
    where rownum <= 26

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/one-oracle.xql}
dbqd.acs-subsite.www.admin.rel-types.one.select_rel_type_properties {dbqd.acs-subsite.www.admin.rel-types.one.select_rel_type_properties {
      
    select t1.pretty_name as object_type_one_pretty_name, 
           r.object_type_one, acs_rel_type__role_pretty_name(r.role_one) as role_one_pretty_name, 
           r.role_one, r.min_n_rels_one, r.max_n_rels_one,
           t2.pretty_name as object_type_two_pretty_name, 
           r.object_type_two, acs_rel_type__role_pretty_name(r.role_two) as role_two_pretty_name, 
           r.role_two, r.min_n_rels_two, r.max_n_rels_two
      from acs_rel_types r, acs_object_types t1, acs_object_types t2
     where r.rel_type = :rel_type
       and r.object_type_one = t1.object_type
       and r.object_type_two = t2.object_type

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/one-postgresql.xql}
dbqd.acs-subsite.www.admin.rel-types.one.rels_select {dbqd.acs-subsite.www.admin.rel-types.one.rels_select {

    select v_inner.* 
      from (select r.rel_id, acs_object__name(r.object_id_one) || ' and ' || acs_object__name(r.object_id_two) as name
              from acs_rels r, app_group_distinct_rel_map m
             where acs_permission__permission_p(r.rel_id, :user_id, 'read')
               and r.rel_type = :rel_type
               and m.rel_id = r.rel_id
               and m.package_id = :package_id
             order by lower(acs_object__name(r.object_id_one)), lower(acs_object__name(r.object_id_two))) v_inner
	limit 26

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/one-postgresql.xql}
dbqd.acs-subsite.www.admin.rel-types.one.select_pretty_name {dbqd.acs-subsite.www.admin.rel-types.one.select_pretty_name {
      
    select t.pretty_name as rel_type_pretty_name, t.table_name, t.id_column, t.dynamic_p
      from acs_object_types t
     where t.object_type = :rel_type

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/one.xql}
dbqd.acs-subsite.www.admin.rel-types.one.attributes_select {dbqd.acs-subsite.www.admin.rel-types.one.attributes_select {
      
    select a.attribute_id, a.pretty_name
      from acs_attributes a
     where a.object_type = :rel_type

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/one.xql}
dbqd.acs-subsite.www.admin.rel-types.rels-list-oracle.rels_select {dbqd.acs-subsite.www.admin.rel-types.rels-list-oracle.rels_select {
      
    select r.rel_id, acs_object.name(r.object_id_one) || ' and ' || acs_object.name(r.object_id_two) as name
      from acs_rels r, acs_object_party_privilege_map perm,
           app_group_distinct_rel_map m
     where perm.object_id = r.rel_id
       and perm.party_id = :user_id
       and perm.privilege = 'read'
       and r.rel_type = :rel_type
       and m.rel_id = r.rel_id
       and m.package_id = :package_id
     order by lower(name)

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/rels-list-oracle.xql}
dbqd.acs-subsite.www.admin.rel-types.rels-list.rels_select {dbqd.acs-subsite.www.admin.rel-types.rels-list.rels_select {
      
    select r.rel_id, acs_object__name(r.object_id_one) || ' and ' || acs_object__name(r.object_id_two) as name
      from acs_rels r, acs_object_party_privilege_map perm,
           app_group_distinct_rel_map m
     where perm.object_id = r.rel_id
       and perm.party_id = :user_id
       and perm.privilege = 'read'
       and r.rel_type = :rel_type
       and m.rel_id = r.rel_id
       and m.package_id = :package_id
     order by lower(acs_object__name(r.object_id_one) || ' and ' || acs_object__name(r.object_id_two))

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/rels-list-postgresql.xql}
dbqd.acs-subsite.www.admin.rel-types.rels-list.select_pretty_name {dbqd.acs-subsite.www.admin.rel-types.rels-list.select_pretty_name {
      
    select t.pretty_name as rel_type_pretty_name
      from acs_object_types t
     where t.object_type = :rel_type

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/rels-list.xql}
dbqd.acs-subsite.www.admin.rel-types.roles.delete-2-oracle.drop_role {dbqd.acs-subsite.www.admin.rel-types.roles.delete-2-oracle.drop_role {
begin acs_rel_type.drop_role(:role);end;
} {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/roles/delete-2-oracle.xql}
dbqd.acs-subsite.www.admin.rel-types.roles.delete-2-oracle.role_used_p {dbqd.acs-subsite.www.admin.rel-types.roles.delete-2-oracle.role_used_p {
      
		select case when exists (select 1 from acs_rel_types where role_one = :role or role_two = :role) then 1 else 0 end
		from dual
	    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/roles/delete-2-oracle.xql}
dbqd.acs-subsite.www.admin.rel-types.roles.delete-2.drop_role {dbqd.acs-subsite.www.admin.rel-types.roles.delete-2.drop_role {
select acs_rel_type__drop_role(:role)
} {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/roles/delete-2-postgresql.xql}
dbqd.acs-subsite.www.admin.rel-types.roles.delete-2.role_used_p {dbqd.acs-subsite.www.admin.rel-types.roles.delete-2.role_used_p {
      
		select case when exists (select 1 from acs_rel_types where role_one = :role or role_two = :role) then 1 else 0 end
		
	    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/roles/delete-2-postgresql.xql}
dbqd.acs-subsite.www.admin.rel-types.roles.delete.select_role_pretty_name {dbqd.acs-subsite.www.admin.rel-types.roles.delete.select_role_pretty_name {
      
    select r.pretty_name from acs_rel_roles r where r.role = :role

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/roles/delete.xql}
dbqd.acs-subsite.www.admin.rel-types.roles.edit.select_role_props {dbqd.acs-subsite.www.admin.rel-types.roles.edit.select_role_props {
      
    select r.pretty_name, r.pretty_plural
      from acs_rel_roles r 
     where r.role = :role

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/roles/edit.xql}
dbqd.acs-subsite.www.admin.rel-types.roles.edit.update_role {dbqd.acs-subsite.www.admin.rel-types.roles.edit.update_role {
      
	update acs_rel_roles
	   set pretty_name = :pretty_name,
	       pretty_plural = :pretty_plural
	 where role = :role
    
      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/roles/edit.xql}
dbqd.acs-subsite.www.admin.rel-types.roles.index-oracle.select_roles {dbqd.acs-subsite.www.admin.rel-types.roles.index-oracle.select_roles {
      
    select r.role, r.pretty_name, nvl(num1.number_rels,0) + nvl(num2.number_rels,0) as number_rel_types
      from (select t.role_one as role, count(*) as number_rels
             from acs_rel_types t
            group by t.role_one) num1,
           (select t.role_two as role, count(*) as number_rels
             from acs_rel_types t
            group by t.role_two) num2,
           acs_rel_roles r
     where r.role = num1.role(+)
       and r.role = num2.role(+)
     order by lower(r.role)

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/roles/index-oracle.xql}
dbqd.acs-subsite.www.admin.rel-types.roles.index.select_roles {dbqd.acs-subsite.www.admin.rel-types.roles.index.select_roles {
    select r.role, r.pretty_name, coalesce(num1.number_rels,0) + coalesce(num2.number_rels,0) as number_rel_types
      from acs_rel_roles r left join
	(select t.role_one as role, count(*) as number_rels
             from acs_rel_types t
            group by t.role_one) num1 on r.role=num1.role left join
           (select t.role_two as role, count(*) as number_rels
             from acs_rel_types t
            group by t.role_two) num2 on r.role=num2.role
     order by lower(r.role)

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/roles/index.xql}
dbqd.acs-subsite.www.admin.rel-types.roles.new-oracle.create_role {dbqd.acs-subsite.www.admin.rel-types.roles.new-oracle.create_role {
      
	    begin acs_rel_type.create_role(role => :role, pretty_name => :pretty_name, pretty_plural => :pretty_plural); end;
	
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/roles/new-oracle.xql}
dbqd.acs-subsite.www.admin.rel-types.roles.new.create_role {dbqd.acs-subsite.www.admin.rel-types.roles.new.create_role {
	    select acs_rel_type__create_role(:role, :pretty_name, :pretty_plural)
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/roles/new-postgresql.xql}
dbqd.acs-subsite.www.admin.rel-types.roles.new.role_exists_p {dbqd.acs-subsite.www.admin.rel-types.roles.new.role_exists_p {
      
	select count(r.role) from acs_rel_roles r where r.role = :role
    
      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/roles/new.xql}
dbqd.acs-subsite.www.admin.rel-types.roles.one.select_role_props {dbqd.acs-subsite.www.admin.rel-types.roles.one.select_role_props {
      
    select r.pretty_name, r.pretty_plural
      from acs_rel_roles r 
     where r.role = :role

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/roles/one.xql}
dbqd.acs-subsite.www.admin.rel-types.roles.one.select_rel_types_one {dbqd.acs-subsite.www.admin.rel-types.roles.one.select_rel_types_one {
      
    select r.rel_type as role, t.pretty_name, r.rel_type,
           case when r.role_one = :role then 'Side one' else 'Side two' end as side
      from acs_object_types t, acs_rel_types r
     where t.object_type = r.rel_type
       and (r.role_one = :role or r.role_two = :role)
     order by side, t.pretty_name

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/rel-types/roles/one.xql}
dbqd.acs-subsite.www.admin.relations.add-oracle.rel_type_info {dbqd.acs-subsite.www.admin.relations.add-oracle.rel_type_info {
      
    select t.object_type_two, t.role_two as role, 
           acs_rel_type.role_pretty_name(t.role_two) as role_pretty_name,
           acs_object_type.pretty_name(t.object_type_two) as object_type_two_name,
           ancestor_rel_types.object_type as ancestor_rel_type
      from acs_rel_types t, acs_object_types obj_types, 
           acs_object_types ancestor_rel_types
     where t.rel_type = :rel_type
       and t.rel_type = obj_types.object_type
       and ancestor_rel_types.supertype = 'relationship'
       and ancestor_rel_types.object_type in (
               select object_type from acs_object_types
               start with object_type = :rel_type
               connect by object_type = prior supertype
           )

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/relations/add-oracle.xql}
dbqd.acs-subsite.www.admin.relations.add-oracle.select_parties_scope_query {dbqd.acs-subsite.www.admin.relations.add-oracle.select_parties_scope_query {
, (select element_id from application_group_element_map
   where package_id = :package_id) app_elements
} {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/relations/add-oracle.xql}
dbqd.acs-subsite.www.admin.relations.add-oracle.select_parties {dbqd.acs-subsite.www.admin.relations.add-oracle.select_parties {
      
            select DISTINCT
                   decode(groups.group_id,
                          null, case when persons.person_id = null then 'INVALID' else persons.first_names || ' ' || persons.last_name end,
                          groups.group_name) as party_name,
                   p.party_id
            from (select o.object_id as party_id
                  from acs_objects o,
                       (select object_type from acs_object_types ot
                        start with $start_with
                        connect by prior ot.object_type = ot.supertype) t
                  where o.object_type = t.object_type) p,
                 (select element_id
                  from group_element_map
                  where group_id = :group_id and rel_type = :rel_type
                  UNION ALL
                  select to_number(:group_id) from dual) m,
                 (select object_id
                  from all_object_party_privilege_map
                  where party_id = :user_id and privilege = 'read') perm,
                 (select party_id
                  from rc_parties_in_required_segs
                  where group_id = :group_id 
                    and rel_type = :rel_type) pirs $scope_query,
                 groups,
                 persons
            where p.party_id = m.element_id(+)
              and m.element_id is null
              and p.party_id = perm.object_id
              and p.party_id = pirs.party_id $scope_clause
              and p.party_id = groups.group_id(+)
              and p.party_id = persons.person_id(+)
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/relations/add-oracle.xql}
dbqd.acs-subsite.www.admin.relations.add.rel_type_info {dbqd.acs-subsite.www.admin.relations.add.rel_type_info {
    select t.object_type_two, t.role_two as role, 
           acs_rel_type__role_pretty_name(t.role_two) as role_pretty_name,
           acs_object_type__pretty_name(t.object_type_two) as object_type_two_name,
           ancestor_rel_types.object_type as ancestor_rel_type
      from acs_rel_types t, acs_object_types obj_types, 
           acs_object_types ancestor_rel_types
     where t.rel_type = :rel_type
       and t.rel_type = obj_types.object_type
       and ancestor_rel_types.supertype = 'relationship'
       and ancestor_rel_types.object_type in (
	      	select t2.object_type from 
		acs_object_types t1, acs_object_types t2
		where t1.object_type= :rel_type
		and t1.tree_sortkey between t2.tree_sortkey and tree_right(t2.tree_sortkey)
	)

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/relations/add-postgresql.xql}
dbqd.acs-subsite.www.admin.relations.add.select_parties_scope_query {dbqd.acs-subsite.www.admin.relations.add.select_parties_scope_query {
cross join (select element_id from application_group_element_map
   where package_id = :package_id) app_elements
} {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/relations/add-postgresql.xql}
dbqd.acs-subsite.www.admin.relations.add.select_parties {dbqd.acs-subsite.www.admin.relations.add.select_parties {
            select DISTINCT
                   case when groups.group_id is null then
                          case when persons.person_id is null then 'INVALID' 
				else persons.first_names || ' ' || persons.last_name 
			  end else
                   groups.group_name end as party_name,
                   p.party_id
            from (select o.object_id as party_id
                  from acs_objects o,
                       (select ot2.object_type from acs_object_types ot, acs_object_types ot2
                        where ot2.tree_sortkey between ot.tree_sortkey and tree_right(ot.tree_sortkey)
                          and $start_with) t
                  where o.object_type = t.object_type) p left join
                 (select element_id
                  from group_element_map
                  where group_id = :group_id and rel_type = :rel_type
                  UNION ALL
                  select :group_id::integer ) m on (p.party_id = m.element_id) cross join
                 (select object_id
                  from all_object_party_privilege_map
                  where party_id = :user_id and privilege = 'read') perm cross join
                 (select party_id
                  from rc_parties_in_required_segs
                  where group_id = :group_id 
                    and rel_type = :rel_type) pirs $scope_query left join
                 groups on (p.party_id = groups.group_id) 
		left join persons on (p.party_id = persons.person_id)
            where 
              m.element_id is null
              and p.party_id = perm.object_id
              and p.party_id = pirs.party_id $scope_clause
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/relations/add-postgresql.xql}
dbqd.acs-subsite.www.admin.relations.add.group_info {dbqd.acs-subsite.www.admin.relations.add.group_info {
      
    select group_name, join_policy
    from groups
    where group_id = :group_id

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/relations/add.xql}
dbqd.acs-subsite.www.admin.relations.change-member-state.update_member_state {dbqd.acs-subsite.www.admin.relations.change-member-state.update_member_state {
      
    update membership_rels
    set member_state = :member_state
    where rel_id = :rel_id

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/relations/change-member-state.xql}
dbqd.acs-subsite.www.admin.relations.one-oracle.select_rel_info {dbqd.acs-subsite.www.admin.relations.one-oracle.select_rel_info {
      
    select r.rel_type, acs_object_type.pretty_name(t.rel_type) as rel_type_pretty_name,
           acs_rel_type.role_pretty_name(t.role_one) as role_one_pretty_name,
           acs_rel_type.role_pretty_name(t.role_two) as role_two_pretty_name,
           t.object_type_two as object_type_two,
           acs_object.name(r.object_id_one) as object_id_one_name,
           r.object_id_one,
           acs_object.name(r.object_id_two) as object_id_two_name,
           r.object_id_two
      from acs_rels r, acs_rel_types t
     where r.rel_id = :rel_id
       and r.rel_type = t.rel_type
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/relations/one-oracle.xql}
dbqd.acs-subsite.www.admin.relations.one.select_rel_info {dbqd.acs-subsite.www.admin.relations.one.select_rel_info {
      
    select r.rel_type, acs_object_type__pretty_name(t.rel_type) as rel_type_pretty_name,
           acs_rel_type__role_pretty_name(t.role_one) as role_one_pretty_name,
           acs_rel_type__role_pretty_name(t.role_two) as role_two_pretty_name,
           t.object_type_two as object_type_two,
           acs_object__name(r.object_id_one) as object_id_one_name,
           r.object_id_one,
           acs_object__name(r.object_id_two) as object_id_two_name,
           r.object_id_two
      from acs_rels r, acs_rel_types t
     where r.rel_id = :rel_id
       and r.rel_type = t.rel_type
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/relations/one-postgresql.xql}
dbqd.acs-subsite.www.admin.relations.one.select_member_state {dbqd.acs-subsite.www.admin.relations.one.select_member_state {
      
    select member_state from membership_rels
    where rel_id = :rel_id

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/relations/one.xql}
dbqd.acs-subsite.www.admin.relations.remove-oracle.select_rel_info {dbqd.acs-subsite.www.admin.relations.remove-oracle.select_rel_info {
      
    select acs_object_type.pretty_name(r.rel_type) as rel_type_pretty_name,
           acs_object.name(r.object_id_one) as object_id_one_name,
           acs_object.name(r.object_id_two) as object_id_two_name,
           r.object_id_two
      from acs_rels r
     where r.rel_id = :rel_id
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/relations/remove-oracle.xql}
dbqd.acs-subsite.www.admin.relations.remove-oracle.select_dependants {dbqd.acs-subsite.www.admin.relations.remove-oracle.select_dependants {
      
	select r.viol_rel_id as rel_id,
	       acs_object_type.pretty_name(r.viol_rel_type) as rel_type_pretty_name,
	       acs_object.name(r.viol_object_id_one) as object_id_one_name, 
	       acs_object.name(r.viol_object_id_two) as object_id_two_name
	  from rc_violations_by_removing_rel r
	 where r.rel_id = :rel_id
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/relations/remove-oracle.xql}
dbqd.acs-subsite.www.admin.relations.remove.select_rel_info {dbqd.acs-subsite.www.admin.relations.remove.select_rel_info {
      
    select acs_object_type__pretty_name(r.rel_type) as rel_type_pretty_name,
           acs_object__name(r.object_id_one) as object_id_one_name,
           acs_object__name(r.object_id_two) as object_id_two_name,
           r.object_id_two
      from acs_rels r
     where r.rel_id = :rel_id
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/relations/remove-postgresql.xql}
dbqd.acs-subsite.www.admin.relations.remove.select_dependants {dbqd.acs-subsite.www.admin.relations.remove.select_dependants {
      
	select r.viol_rel_id as rel_id,
	       acs_object_type__pretty_name(r.viol_rel_type) as rel_type_pretty_name,
	       acs_object__name(r.viol_object_id_one) as object_id_one_name, 
	       acs_object__name(r.viol_object_id_two) as object_id_two_name
	  from rc_violations_by_removing_rel r
	 where r.rel_id = :rel_id
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/relations/remove-postgresql.xql}
dbqd.acs-subsite.www.admin.site-map.application-new-oracle.package_types {dbqd.acs-subsite.www.admin.site-map.application-new-oracle.package_types {

    select pretty_name, package_key
    from   apm_package_types
    where  not (apm_package.singleton_p(package_key) = 1 and
                apm_package.num_instances(package_key) >= 1)
    order  by upper(pretty_name)

        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/site-map/application-new-oracle.xql}
dbqd.acs-subsite.www.admin.site-map.application-new.package_types {dbqd.acs-subsite.www.admin.site-map.application-new.package_types {

    select pretty_name, package_key
    from   apm_package_types
    where  not (apm_package__singleton_p(package_key) = 1 and
                apm_package__num_instances(package_key) >= 1)
    order  by upper(pretty_name)

        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/site-map/application-new-postgresql.xql}
dbqd.acs-subsite.www.admin.site-map.index-oracle.path_select {dbqd.acs-subsite.www.admin.site-map.index-oracle.path_select {
            select node_id,
                   name,
                   directory_p,
                   level,
                   acs_object.name(object_id) as obj_name,
                   acs_permission.permission_p(object_id, :user_id, 'admin') as admin_p
            from site_nodes
            start with node_id = :root_id
            connect by node_id = prior parent_id
            order by level desc
        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/site-map/index-oracle.xql}
dbqd.acs-subsite.www.admin.site-map.index-oracle.nodes_select {dbqd.acs-subsite.www.admin.site-map.index-oracle.nodes_select {
            select package_id,
                   package_key,
                   (select pretty_name from apm_package_types where package_key = p.package_key) as package_pretty_name,
                   apm_package_type.num_parameters(package_key) parameter_count,
                   node_id,
                   url,
                   parent_url,
                   name,
                   root_p,
                   mylevel - 1 as mylevel,
                   object_id,
                   object_name,
                   directory_p,
                   parent_id,
                   n_children,
                   decode(acs_permission.permission_p(object_id, :user_id, 'admin'), 't', 1, 0) object_admin_p
            from apm_packages p,
                 (select node_id,
                         site_node.url(node_id) as url,
                         site_node.url(parent_id) as parent_url,
                         name,
                         (select count(*)
                          from site_nodes
                          where parent_id = n.node_id) as n_children,
                         decode(node_id, site_node.node_id('/'), 1, 0) as root_p,
                         level as mylevel,
                         object_id,
                         acs_object.name(object_id) as object_name,
                         directory_p,
                         parent_id
                  from site_nodes n
                  where (object_id is null
                  or acs_permission.permission_p(object_id, :user_id, 'read') = 't')
            start with node_id = nvl(:root_id, site_node.node_id('/'))
            connect by prior node_id = parent_id and parent_id in ([join $expand ", "])) site_map
            where site_map.object_id = p.package_id (+)
            order by url
        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/site-map/index-oracle.xql}
dbqd.acs-subsite.www.admin.site-map.index-oracle.services_select {dbqd.acs-subsite.www.admin.site-map.index-oracle.services_select {
            select package_id,
                   ap.package_key,
                   acs_object.name(package_id) as instance_name,
                   apm_package_type.num_parameters(ap.package_key) as parameter_count
            from apm_packages ap,
                 apm_package_types
            where ap.package_key = apm_package_types.package_key
            and package_type = 'apm_service'
            and (
                    acs_permission.permission_p(package_id, :user_id, 'read') = 't'
                 or acs_permission.permission_p(package_id, acs.magic_object_id('the_public'), 'read') = 't'
                )
            order by instance_name
        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/site-map/index-oracle.xql}
dbqd.acs-subsite.www.admin.site-map.index.path_select {dbqd.acs-subsite.www.admin.site-map.index.path_select {
            select s2.node_id,
                   s2.name,
                   s2.directory_p,
                   tree_level(s2.tree_sortkey) as level,
                   acs_object__name(s2.object_id) as obj_name,
                   acs_permission__permission_p(s2.object_id, :user_id, 'admin') as admin_p
            from (select tree_ancestor_keys(site_node_get_tree_sortkey(:root_id)) as tree_sortkey) parents,
                 site_nodes s2
            where s2.tree_sortkey = parents.tree_sortkey
            order by level
        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/site-map/index-postgresql.xql}
dbqd.acs-subsite.www.admin.site-map.index.nodes_select {dbqd.acs-subsite.www.admin.site-map.index.nodes_select {
            select package_id,
                   package_key,
                   pretty_name as package_pretty_name,
                   apm_package_type__num_parameters(package_key) as parameter_count,
                   node_id, url, parent_url, name, root_p, mylevel, object_id,
                   object_name, directory_p, parent_id, n_children,
                   (select case when acs_permission__permission_p(object_id, :user_id, 'admin') = 't' then 1 else 0 end) as object_admin_p
            from apm_packages p join apm_package_types using (package_key) right outer join
                 (select n.node_id,
                         site_node__url(n.node_id) as url,
                         site_node__url(n.parent_id) as parent_url,
                         n.name,
                         (select count(*)
                          from site_nodes
                          where parent_id = n.node_id) as n_children,
                         case when n.node_id = site_node__node_id('/', null) then 1 else 0 end as root_p,
                         (select tree_level(n.tree_sortkey) - tree_level(n2.tree_sortkey)
                          from site_nodes n2
                          where n2.node_id = coalesce(:root_id, site_node__node_id('/', null))) as mylevel,
                         n.object_id,
                         acs_object__name(n.object_id) as object_name,
                         n.directory_p,
                         n.parent_id
                  from site_nodes n, site_nodes n2
                  where (n.object_id is null or acs_permission__permission_p(n.object_id, :user_id, 'read'))
                  and n2.node_id = coalesce(:root_id, site_node__node_id('/', null))
                  and n.tree_sortkey between n2.tree_sortkey and tree_right(n2.tree_sortkey)
                  and (n.parent_id is null or n.parent_id in ([join $expand ", "]))) site_map
            on site_map.object_id = p.package_id
            order by url
        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/site-map/index-postgresql.xql}
dbqd.acs-subsite.www.admin.site-map.index.services_select {dbqd.acs-subsite.www.admin.site-map.index.services_select {
            select package_id,
                   ap.package_key,
                   acs_object__name(package_id) as instance_name,
                   apm_package_type__num_parameters(ap.package_key) as parameter_count
            from apm_packages ap,
                 apm_package_types
            where ap.package_key = apm_package_types.package_key
            and package_type = 'apm_service'
            and (
                    acs_permission__permission_p(package_id, :user_id, 'read') = 't'
                 or acs_permission__permission_p(package_id, acs__magic_object_id('the_public'), 'read') = 't'
                )
            order by instance_name
        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/site-map/index-postgresql.xql}
dbqd.acs-subsite.www.admin.site-map.instance-delete.package_mounted_p {dbqd.acs-subsite.www.admin.site-map.instance-delete.package_mounted_p {
	    select case when count(*) = 0 then 0 else 1 end
	    from apm_packages p, site_nodes s
	    where package_id = :package_id
	    and p.package_id = s.object_id
        } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/site-map/instance-delete.xql}
dbqd.acs-subsite.www.admin.site-map.instance-delete.instance_delete_doubleclick_ck {dbqd.acs-subsite.www.admin.site-map.instance-delete.instance_delete_doubleclick_ck {
            select case when count(*) = 0 then 0 else 1 end
            from apm_packages
            where package_id = :package_id
        } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/site-map/instance-delete.xql}
dbqd.acs-subsite.www.admin.site-map.mount-oracle.packages_unmounted_select {dbqd.acs-subsite.www.admin.site-map.mount-oracle.packages_unmounted_select {
            select p.package_id, 
                   acs_object.name(p.package_id) as name,
                   pt.pretty_name as package_pretty_name
            from   apm_packages p,
                   apm_package_types pt,
                   apm_package_versions v
            where  pt.package_key = p.package_key
            and    v.package_key = pt.package_key
            and    (v.installed_p = 't' or v.enabled_p = 't' or not exists (
                    select 1 from apm_package_versions v2
                    where v2.package_key = v.package_key
                      and (v2.installed_p = 't' or v2.enabled_p = 't')
                     and apm_package_version.sortable_version_name(v2.version_name) >
                         apm_package_version.sortable_version_name(v.version_name)))
            and    (
                       acs_permission.permission_p(package_id, :user_id, 'read') = 't'
                    or acs_permission.permission_p(package_id, acs.magic_object_id('the_public'), 'read') = 't'
                   )
            and    (apm_package.singleton_p(p.package_key) = 0 or v.auto_mount is not null)
            and    not exists (select 1
                               from site_nodes
                               where object_id = p.package_id)
            order by name
        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/site-map/mount-oracle.xql}
dbqd.acs-subsite.www.admin.site-map.mount-oracle.packages_mounted_select {dbqd.acs-subsite.www.admin.site-map.mount-oracle.packages_mounted_select {
            select p.package_id, 
                   acs_object.name(p.package_id) as name,
                   pt.pretty_name as package_pretty_name
            from   apm_packages p,
                   apm_package_types pt
            where  pt.package_key = p.package_key
            and    (
                       acs_permission.permission_p(package_id, :user_id, 'read') = 't'
                    or acs_permission.permission_p(package_id, acs.magic_object_id('the_public'), 'read') = 't'
                   )
            and    exists (select 1
                           from site_nodes
                           where object_id = p.package_id)
            order by name
        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/site-map/mount-oracle.xql}
dbqd.acs-subsite.www.admin.site-map.mount-oracle.packages_singleton_select {dbqd.acs-subsite.www.admin.site-map.mount-oracle.packages_singleton_select {
            select p.package_id, 
                   acs_object.name(p.package_id) as name,
                   pt.pretty_name as package_pretty_name
            from   apm_packages p,
                   apm_package_types pt,
                   apm_package_versions v
            where  pt.package_key = p.package_key
            and    v.package_key = pt.package_key
            and    (v.installed_p = 't' or v.enabled_p = 't' or not exists (
                    select 1 from apm_package_versions v2
                    where v2.package_key = v.package_key
                      and (v2.installed_p = 't' or v2.enabled_p = 't')
                     and apm_package_version.sortable_version_name(v2.version_name) >
                         apm_package_version.sortable_version_name(v.version_name)))
            and    (
                       acs_permission.permission_p(package_id, :user_id, 'read') = 't'
                    or acs_permission.permission_p(package_id, acs.magic_object_id('the_public'), 'read') = 't'
                   )
            and    (apm_package.singleton_p(p.package_key) = 1 and v.auto_mount is null)
            and    not exists (select 1
                               from site_nodes
                               where object_id = p.package_id)
            order by name
        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/site-map/mount-oracle.xql}
dbqd.acs-subsite.www.admin.site-map.mount.packages_unmounted_select {dbqd.acs-subsite.www.admin.site-map.mount.packages_unmounted_select {
            select p.package_id, 
                   acs_object__name(p.package_id) as name,
                   pt.pretty_name as package_pretty_name
            from   apm_packages p,
                   apm_package_types pt,
                   apm_package_versions v
            where  pt.package_key = p.package_key
            and    v.package_key = pt.package_key
            and    (v.installed_p = 't' or v.enabled_p = 't' or not exists (
                    select 1 from apm_package_versions v2
                    where v2.package_key = v.package_key
                      and (v2.installed_p = 't' or v2.enabled_p = 't')
                     and apm_package_version__sortable_version_name(v2.version_name) >
                         apm_package_version__sortable_version_name(v.version_name)))
            and    (
                       acs_permission__permission_p(p.package_id, :user_id, 'read') = 't'
                    or acs_permission__permission_p(p.package_id, acs__magic_object_id('the_public'), 'read') = 't'
                   )
            and    (apm_package__singleton_p(p.package_key) = 0 or coalesce(v.auto_mount,'') != '')
            and    not exists (select 1
                               from site_nodes
                               where object_id = p.package_id)

            order  by name
        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/site-map/mount-postgresql.xql}
dbqd.acs-subsite.www.admin.site-map.mount.packages_mounted_select {dbqd.acs-subsite.www.admin.site-map.mount.packages_mounted_select {
            select p.package_id, 
                   acs_object__name(p.package_id) as name,
                   pt.pretty_name as package_pretty_name
            from   apm_packages p,
                   apm_package_types pt
            where  pt.package_key = p.package_key
            and    (
                       acs_permission__permission_p(p.package_id, :user_id, 'read') = 't'
                    or acs_permission__permission_p(p.package_id, acs__magic_object_id('the_public'), 'read') = 't'
                   )
            and    exists (select 1
                           from site_nodes
                           where object_id = p.package_id)
            order  by name
        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/site-map/mount-postgresql.xql}
dbqd.acs-subsite.www.admin.site-map.mount.packages_singleton_select {dbqd.acs-subsite.www.admin.site-map.mount.packages_singleton_select {
            select p.package_id, 
                   acs_object__name(p.package_id) as name,
                   pt.pretty_name as package_pretty_name
            from   apm_packages p,
                   apm_package_types pt,
                   apm_package_versions v
            where  pt.package_key = p.package_key
            and    v.package_key = pt.package_key
            and    (v.installed_p = 't' or v.enabled_p = 't' or not exists (
                    select 1 from apm_package_versions v2
                    where v2.package_key = v.package_key
                      and (v2.installed_p = 't' or v2.enabled_p = 't')
                     and apm_package_version__sortable_version_name(v2.version_name) >
                         apm_package_version__sortable_version_name(v.version_name)))
            and    (
                       acs_permission__permission_p(p.package_id, :user_id, 'read') = 't'
                    or acs_permission__permission_p(p.package_id, acs__magic_object_id('the_public'), 'read') = 't'
                   )
            and    (apm_package__singleton_p(p.package_key) = 1 and coalesce(v.auto_mount,'') = '')
            and    apm_package__singleton_p(p.package_key) = 1
            and    not exists (select 1
                               from site_nodes
                               where object_id = p.package_id)
            order by name
        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/site-map/mount-postgresql.xql}
dbqd.acs-subsite.www.admin.site-map.new.site_node_duplicate_name_root_ck {dbqd.acs-subsite.www.admin.site-map.new.site_node_duplicate_name_root_ck {
            select case when count(*) = 0 then 0 else 1 end
            from site_nodes
            where name = :name
            and parent_id = :parent_id
        } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/site-map/new.xql}
dbqd.acs-subsite.www.admin.site-map.package-new.package_new_doubleclick_ck {dbqd.acs-subsite.www.admin.site-map.package-new.package_new_doubleclick_ck {
            select case when count(*) = 0 then 0 else 1 end
            from apm_packages
            where package_id = :new_package_id
        } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/site-map/package-new.xql}
dbqd.acs-subsite.www.admin.site-map.parameter-set-2.apm_parameters_set {dbqd.acs-subsite.www.admin.site-map.parameter-set-2.apm_parameters_set {
            select parameter_id,
                   parameter_name
            from apm_parameters
            where package_key = :package_key
        } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/site-map/parameter-set-2.xql}
dbqd.acs-subsite.www.admin.site-map.parameter-set-oracle.package_info {dbqd.acs-subsite.www.admin.site-map.parameter-set-oracle.package_info {
            select package_key,
                   acs_object.name(package_id) instance_name
            from apm_packages
            where package_id = :package_id
        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/site-map/parameter-set-oracle.xql}
dbqd.acs-subsite.www.admin.site-map.parameter-set-oracle.parameter_table {dbqd.acs-subsite.www.admin.site-map.parameter-set-oracle.parameter_table {
            select p.parameter_id,
                   p.parameter_name,
                   p.package_key,
                   nvl(p.description, 'No Description') description,
                   v.attr_value,
                   nvl(p.section_name, 'No Section Name') section_name
            from apm_parameters p,
                 (select v.parameter_id,
                         v.attr_value
                  from apm_parameter_values v
                  where v.package_id = :package_id) v
            where p.parameter_id = v.parameter_id(+)
            and p.package_key = (select package_key from apm_packages where package_id = :package_id)
            $additional_sql
        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/site-map/parameter-set-oracle.xql}
dbqd.acs-subsite.www.admin.site-map.parameter-set.package_info {dbqd.acs-subsite.www.admin.site-map.parameter-set.package_info {
            select package_key,
                   acs_object__name(package_id) as instance_name
            from apm_packages
            where package_id = :package_id
        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/site-map/parameter-set-postgresql.xql}
dbqd.acs-subsite.www.admin.site-map.parameter-set.parameter_table {dbqd.acs-subsite.www.admin.site-map.parameter-set.parameter_table {
            select p.parameter_id,
                   p.parameter_name,
                   p.package_key,
                   coalesce(p.description, 'No Description') as description,
                   v.attr_value,
                   coalesce(p.section_name, 'No Section Name') as section_name
            from apm_parameters p left outer join
                 (select v.parameter_id,
                         v.attr_value
                  from apm_parameter_values v
                  where v.package_id = :package_id) v
            on p.parameter_id = v.parameter_id
            where p.package_key = (select package_key from apm_packages where package_id = :package_id)
            $additional_sql
        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/site-map/parameter-set-postgresql.xql}
dbqd.acs-subsite.www.admin.site-map.unmounted-oracle.packages_normal_select {dbqd.acs-subsite.www.admin.site-map.unmounted-oracle.packages_normal_select {
            select package_id, acs_object.name(package_id) as name
            from apm_packages
            where (acs_permission.permission_p(package_id, :user_id, 'read') = 't' or
                    acs_permission.permission_p(package_id, acs.magic_object_id('the_public'), 'read') = 't')
            and apm_package.singleton_p(package_key) = 0
            and not exists (select 1
                            from site_nodes
                            where object_id = package_id)
            order by name
        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/site-map/unmounted-oracle.xql}
dbqd.acs-subsite.www.admin.site-map.unmounted-oracle.packages_singleton_select {dbqd.acs-subsite.www.admin.site-map.unmounted-oracle.packages_singleton_select {
            select package_id, acs_object.name(package_id) as name
            from apm_packages
            where (acs_permission.permission_p(package_id, :user_id, 'read') = 't' or
                    acs_permission.permission_p(package_id, acs.magic_object_id('the_public'), 'read') = 't')
            and apm_package.singleton_p(package_key) = 1
            and not exists (select 1
                            from site_nodes
                            where object_id = package_id)
            order by name
        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/site-map/unmounted-oracle.xql}
dbqd.acs-subsite.www.admin.site-map.unmounted.packages_normal_select {dbqd.acs-subsite.www.admin.site-map.unmounted.packages_normal_select {
            select package_id, acs_object__name(package_id) as name
            from apm_packages
            where (acs_permission__permission_p(package_id, :user_id, 'read') = 't' or
                    acs_permission__permission_p(package_id, acs__magic_object_id('the_public'), 'read') = 't')
            and apm_package__singleton_p(package_key) = 0
            and not exists (select 1
                            from site_nodes
                            where object_id = package_id)
            order by name
        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/site-map/unmounted-postgresql.xql}
dbqd.acs-subsite.www.admin.site-map.unmounted.packages_singleton_select {dbqd.acs-subsite.www.admin.site-map.unmounted.packages_singleton_select {
            select package_id, acs_object__name(package_id) as name
            from apm_packages
            where (acs_permission__permission_p(package_id, :user_id, 'read') = 't' or
                    acs_permission__permission_p(package_id, acs__magic_object_id('the_public'), 'read') = 't')
            and apm_package__singleton_p(package_key) = 1
            and not exists (select 1
                            from site_nodes
                            where object_id = package_id)
            order by name
        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/site-map/unmounted-postgresql.xql}
dbqd.acs-subsite.www.admin.users.new-oracle.rel_type_info {dbqd.acs-subsite.www.admin.users.new-oracle.rel_type_info {
      
    select object_type as ancestor_rel_type
      from acs_object_types
     where supertype = 'relationship'
       and object_type in (
               select object_type from acs_object_types
               start with object_type = :add_with_rel_type
               connect by object_type = prior supertype
           )

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/users/new-oracle.xql}
dbqd.acs-subsite.www.admin.users.new-oracle.user_exists {dbqd.acs-subsite.www.admin.users.new-oracle.user_exists {
      
	select case when exists
	                 (select 1 from users where user_id = :user_id)
	       then 1 else 0 end
	from dual
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/users/new-oracle.xql}
dbqd.acs-subsite.www.admin.users.new-oracle.user_new_2_rowid_for_email {dbqd.acs-subsite.www.admin.users.new-oracle.user_new_2_rowid_for_email {
      select rowid from users where user_id = :user_id
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/admin/users/new-oracle.xql}
dbqd.acs-subsite.www.admin.users.new.rel_type_info {dbqd.acs-subsite.www.admin.users.new.rel_type_info {

    select object_type as ancestor_rel_type
      from acs_object_types
     where supertype = 'relationship'
       and object_type in (
               select t1.object_type
	         from acs_object_types t1, acs_object_types t2
		where t2.tree_sortkey between t1.tree_sortkey and tree_right(t1.tree_sortkey)
		  and t2.object_type = :add_with_rel_type
	   )

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/users/new-postgresql.xql}
dbqd.acs-subsite.www.admin.users.new.user_exists {dbqd.acs-subsite.www.admin.users.new.user_exists {
      
	select case when exists
	                 (select 1 from users where user_id = :user_id)
	       then 1 else 0 end
	
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/users/new-postgresql.xql}
dbqd.acs-subsite.www.admin.users.new.user_new_2_rowid_for_email {dbqd.acs-subsite.www.admin.users.new.user_new_2_rowid_for_email {
      select oid as rowid from users where user_id = :user_id
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/admin/users/new-postgresql.xql}
dbqd.acs-subsite.www.admin.users.new.group_info {dbqd.acs-subsite.www.admin.users.new.group_info {
      
    select group_name as add_to_group_name, 
           join_policy as add_to_group_join_policy
    from groups
    where group_id = :add_to_group_id

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/users/new.xql}
dbqd.acs-subsite.www.admin.users.new.select_type_info {dbqd.acs-subsite.www.admin.users.new.select_type_info {
      
    select t.pretty_name as user_type_pretty_name,
           t.table_name
      from acs_object_types t
     where t.object_type = :user_type

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/users/new.xql}
dbqd.acs-subsite.www.admin.users.new.creation_name_query {dbqd.acs-subsite.www.admin.users.new.creation_name_query {
      
	    select p.first_names || ' ' || p.last_name 
	              || ' (' || pa.email || ')'
            from persons p, parties pa
            where p.person_id = pa.party_id and p.person_id = :creation_user
	    
      } {} {} {} c:/web/openacs/packages/acs-subsite/www/admin/users/new.xql}
dbqd.acs-subsite.www.members.index.members_pagination {dbqd.acs-subsite.www.members.index.members_pagination {
      
    select r.rel_id, 
           u.first_names || ' ' || u.last_name as name
    from   acs_rels r,
           membership_rels mr,
           cc_users u
    where  r.object_id_one = :group_id
    and    mr.rel_id = r.rel_id
    and    u.user_id = r.object_id_two
    [template::list::filter_where_clauses -and -name "members"]
    [template::list::orderby_clause -orderby -name "members"]
	
      } {} {} {} c:/web/openacs/packages/acs-subsite/www/members/index.xql}
dbqd.acs-subsite.www.members.index.members_select {dbqd.acs-subsite.www.members.index.members_select {

    select r.rel_id, 
           u.user_id,
           u.first_names || ' ' || u.last_name as name,
           u.email,
           r.rel_type,
           rt.role_two as rel_role,
           role.pretty_name as rel_role_pretty,
           mr.member_state
    from   acs_rels r,
           membership_rels mr,
           cc_users u,
           acs_rel_types rt,
           acs_rel_roles role
    where  r.object_id_one = :group_id
    and    mr.rel_id = r.rel_id
    and    u.user_id = r.object_id_two
    and    rt.rel_type = r.rel_type
    and    role.role = rt.role_two
    [template::list::filter_where_clauses -and -name "members"]
    [template::list::page_where_clause -and -name "members" -key "r.rel_id"]
    [template::list::orderby_clause -orderby -name "members"]


      } {} {} {} c:/web/openacs/packages/acs-subsite/www/members/index.xql}
dbqd.acs-subsite.www.members.member-invite-oracle.user_search {dbqd.acs-subsite.www.members.member-invite-oracle.user_search {

      select distinct u.first_names || ' ' || u.last_name || ' (' || u.email || ')' as name, u.user_id
      from   cc_users u
      where  upper(nvl(u.first_names || ' ', '')  ||
             nvl(u.last_name || ' ', '') ||
             u.email || ' ' ||
             nvl(u.screen_name, '')) like upper('%'||:value||'%')
      and    not exists (select 1 from acs_rels where object_id_one = $group_id and object_id_two = u.user_id)
      order  by name

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/members/member-invite-oracle.xql}
dbqd.acs-subsite.www.members.member-invite.user_search {dbqd.acs-subsite.www.members.member-invite.user_search {
            select distinct u.first_names || ' ' || u.last_name || ' (' || u.email || ')' as name, u.user_id
            from   cc_users u
            where  upper(coalesce(u.first_names || ' ', '')  ||
                   coalesce(u.last_name || ' ', '') ||
                   u.email || ' ' ||
                   coalesce(u.screen_name, '')) like upper('%'||:value||'%')
            and    not exists (select 1 from acs_rels where object_id_one = $group_id and object_id_two = u.user_id)
            order  by name

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/members/member-invite-postgresql.xql}
dbqd.acs-subsite.www.permissions.grant.select_privileges_hierarchy {dbqd.acs-subsite.www.permissions.grant.select_privileges_hierarchy {
          select privilege, child_privilege
          from acs_privilege_hierarchy
          order by privilege desc, child_privilege desc
      } {} {} {} c:/web/openacs/packages/acs-subsite/www/permissions/grant.xql}
dbqd.acs-subsite.www.permissions.grant.select_privileges_list {dbqd.acs-subsite.www.permissions.grant.select_privileges_list {
      
  select privilege
  from acs_privileges
  order by privilege

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/permissions/grant.xql}
dbqd.acs-subsite.www.permissions.index-oracle.adminable_objects {dbqd.acs-subsite.www.permissions.index-oracle.adminable_objects {
 select o.object_id, acs_object.name(o.object_id) as name, context_id, object_type,
    (case when o.object_id = :root then 0 else 1 end) as child
  from acs_objects o
  where exists (
    SELECT 1 
      FROM all_object_party_privilege_map map
     WHERE map.object_id = o.object_id
       and map.party_id = :user_id
       and map.privilege = 'admin')
    and (o.object_id = :root or o.context_id = :root)
    order by child, object_type, name      
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/permissions/index-oracle.xql}
dbqd.acs-subsite.www.permissions.index.adminable_objects {dbqd.acs-subsite.www.permissions.index.adminable_objects {
 select o.object_id, acs_object__name(o.object_id) as name, context_id, object_type,
    (case when o.object_id = :root then 0 else 1 end) as child
  from acs_objects o
  where exists ( SELECT 1 
                   FROM acs_permissions_all map 
                  WHERE map.object_id = o.object_id
                    and map.grantee_id = :user_id
                    and map.privilege = 'admin')
    and (o.object_id = :root or o.context_id = :root)
    order by child, object_type, name
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/permissions/index-postgresql.xql}
dbqd.acs-subsite.www.permissions.one-oracle.name {dbqd.acs-subsite.www.permissions.one-oracle.name {
      select acs_object.name(:object_id) from dual
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/permissions/one-oracle.xql}
dbqd.acs-subsite.www.permissions.one-oracle.inherited_permissions {dbqd.acs-subsite.www.permissions.one-oracle.inherited_permissions {
      
  select grantee_id, grantee_name, privilege
  from (select grantee_id, acs_object.name(grantee_id) as grantee_name,
               privilege, 1 as counter
        from acs_permissions_all
        where object_id = :object_id
        union all
        select grantee_id, acs_object.name(grantee_id) as grantee_name,
               privilege, -1 as counter
        from acs_permissions
        where object_id = :object_id )
  group by grantee_id, grantee_name, privilege
  having sum(counter) > 0

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/permissions/one-oracle.xql}
dbqd.acs-subsite.www.permissions.one-oracle.acl {dbqd.acs-subsite.www.permissions.one-oracle.acl {
      
  select grantee_id, acs_object.name(grantee_id) as grantee_name,
         privilege
  from acs_permissions
  where object_id = :object_id
	$extra_where_clause

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/permissions/one-oracle.xql}
dbqd.acs-subsite.www.permissions.one-oracle.context {dbqd.acs-subsite.www.permissions.one-oracle.context {
      
SELECT acs_object.name(context_id) as context_name, context_id, security_inherit_p
  FROM acs_objects
 WHERE object_id = :object_id

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/permissions/one-oracle.xql}
dbqd.acs-subsite.www.permissions.one-oracle.children {dbqd.acs-subsite.www.permissions.one-oracle.children {
      
	select object_id as c_object_id,acs_object.name(object_id) as c_name, object_type as c_type
	from acs_objects o
	where context_id = :object_id
              and exists (select 1
                          from all_object_party_privilege_map
                          where object_id = o.object_id
                          and party_id = :user_id
                          and privilege = 'admin')    
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/permissions/one-oracle.xql}
dbqd.acs-subsite.www.permissions.one-oracle.children_count {dbqd.acs-subsite.www.permissions.one-oracle.children_count {

	select count(*) as num_children
	from acs_objects o
	where context_id = :object_id and
            acs_permission.permission_p(o.object_id, :user_id, 'admin') = 't'

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/permissions/one-oracle.xql}
dbqd.acs-subsite.www.permissions.one.name {dbqd.acs-subsite.www.permissions.one.name {
      select acs_object__name(:object_id) 
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/permissions/one-postgresql.xql}
dbqd.acs-subsite.www.permissions.one.inherited_permissions {dbqd.acs-subsite.www.permissions.one.inherited_permissions {
      
  select grantee_id, grantee_name, privilege
  from (select grantee_id, acs_object__name(grantee_id) as grantee_name,
               privilege, 1 as counter
        from acs_permissions_all
        where object_id = :object_id
        union all
        select grantee_id, acs_object__name(grantee_id) as grantee_name,
               privilege, -1 as counter
        from acs_permissions
        where object_id = :object_id ) dummy
  group by grantee_id, grantee_name, privilege
  having sum(counter) > 0

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/permissions/one-postgresql.xql}
dbqd.acs-subsite.www.permissions.one.acl {dbqd.acs-subsite.www.permissions.one.acl {
      
  select grantee_id, acs_object__name(grantee_id) as grantee_name,
         privilege
  from acs_permissions
  where object_id = :object_id
	$extra_where_clause

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/permissions/one-postgresql.xql}
dbqd.acs-subsite.www.permissions.one.context {dbqd.acs-subsite.www.permissions.one.context {

SELECT acs_object__name(context_id) as context_name, context_id, security_inherit_p
  FROM acs_objects
 WHERE object_id = :object_id

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/permissions/one-postgresql.xql}
dbqd.acs-subsite.www.permissions.one.children {dbqd.acs-subsite.www.permissions.one.children {
      
	select object_id as c_object_id,acs_object__name(object_id) as c_name, object_type as c_type
	from acs_objects o
	where context_id = :object_id
              and exists (select 1
                          from acs_permissions_all
                          where object_id = o.object_id
                          and grantee_id = :user_id
                          and privilege = 'admin')    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/permissions/one-postgresql.xql}
dbqd.acs-subsite.www.permissions.one.children_count {dbqd.acs-subsite.www.permissions.one.children_count {
      
	select count(*) as num_children
	from acs_objects o
	where context_id = :object_id and
            acs_permission__permission_p(o.object_id, :user_id, 'admin') = 't'

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/permissions/one-postgresql.xql}
dbqd.acs-subsite.www.permissions.one.security_inherit_p {dbqd.acs-subsite.www.permissions.one.security_inherit_p {
      
    select security_inherit_p
    from acs_objects
    where object_id = :object_id
  
      } {} {} {} c:/web/openacs/packages/acs-subsite/www/permissions/one.xql}
dbqd.acs-subsite.www.permissions.perm-include-oracle.object_info {dbqd.acs-subsite.www.permissions.perm-include-oracle.object_info {
    select acs_object.name(object_id) as object_name,
           acs_object.name(context_id) as parent_object_name,
           context_id
    from   acs_objects
    where  object_id = :object_id

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/permissions/perm-include-oracle.xql}
dbqd.acs-subsite.www.permissions.perm-include-oracle.permissions {dbqd.acs-subsite.www.permissions.perm-include-oracle.permissions {
    select ptab.grantee_id,
           acs_object.name(ptab.grantee_id) as grantee_name,
           o.object_type,
           [join $select_clauses ", "],
           sum([join $privs "_p + "]_p) as any_perm_p_
    from   (select grantee_id,
                   [join $from_all_clauses ", "]
            from   acs_permissions_all
            where  object_id = :object_id
            union all
            select grantee_id,
                   [join $from_direct_clauses ", "]
            from   acs_permissions
            where  object_id = :object_id
            union all
            select -1 as grantee_id,
                   [join $from_dummy_clauses ", "]
            from  dual
            union all
            select -2 as grantee_id,
                   [join $from_dummy_clauses ", "] 
            from  dual
            union all
            select component_id as grantee_id,
                   [join $from_dummy_clauses ", "] 
            from   group_component_map
            where  group_id = :application_group_id
            union all
            select segment_id as grantee_id,
                   [join $from_dummy_clauses ", "] 
            from   rel_segments rel_seg
            where  rel_seg.group_id = :application_group_id
            union all
            select segment_id as grantee_id,
                   [join $from_dummy_clauses ", "] 
            from   rel_segments rel_seg,
                   group_component_map gcm
            where  gcm.group_id = :application_group_id
            and    rel_seg.group_id = gcm.group_id
           ) ptab,
           acs_objects o
    where  o.object_id = ptab.grantee_id
    and    acs_permission.permission_p(0, ptab.grantee_id, 'admin') = 'f'
    group  by ptab.grantee_id, acs_object.name(ptab.grantee_id), o.object_type
    order  by object_type desc, grantee_name
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/permissions/perm-include-oracle.xql}
dbqd.acs-subsite.www.permissions.perm-include.object_info {dbqd.acs-subsite.www.permissions.perm-include.object_info {
    select acs_object__name(object_id) as object_name,
           acs_object__name(context_id) as parent_object_name,
           context_id
    from   acs_objects
    where  object_id = :object_id

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/permissions/perm-include-postgresql.xql}
dbqd.acs-subsite.www.permissions.perm-include.permissions {dbqd.acs-subsite.www.permissions.perm-include.permissions {
    select ptab.grantee_id,
           acs_object__name(ptab.grantee_id) as grantee_name,
           o.object_type,
           [join $select_clauses ", "],
           sum([join $privs "_p + "]_p) as any_perm_p_
    from   (select grantee_id,
                   [join $from_all_clauses ", "]
            from   acs_permissions_all
            where  object_id = :object_id
            union all
            select grantee_id,
                   [join $from_direct_clauses ", "]
            from   acs_permissions
            where  object_id = :object_id
            union all
            select -1 as grantee_id,
                   [join $from_dummy_clauses ", "]
            union all
            select -2 as grantee_id,
                   [join $from_dummy_clauses ", "] 
            union all
            select component_id as grantee_id,
                   [join $from_dummy_clauses ", "] 
            from   group_component_map
            where  group_id = :application_group_id
            union all
            select segment_id as grantee_id,
                   [join $from_dummy_clauses ", "] 
            from   rel_segments rel_seg
            where  rel_seg.group_id = :application_group_id
            union all
            select segment_id as grantee_id,
                   [join $from_dummy_clauses ", "] 
            from   rel_segments rel_seg,
                   group_component_map gcm
            where  gcm.group_id = :application_group_id
            and    rel_seg.group_id = gcm.group_id
           ) ptab,
           acs_objects o
    where  o.object_id = ptab.grantee_id
    and    acs_permission__permission_p(0, ptab.grantee_id, 'admin') = 'f'
    group  by ptab.grantee_id, grantee_name, object_type
    order  by object_type desc, grantee_name
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/permissions/perm-include-postgresql.xql}
dbqd.acs-subsite.www.permissions.perm-modify-oracle.remove {dbqd.acs-subsite.www.permissions.perm-modify-oracle.remove {
      
          begin
              acs_permission.revoke_permission(
                  object_id => :object_id, 
                  grantee_id => :party_id,
                  privilege => :privilege
              );
          end;
  
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/permissions/perm-modify-oracle.xql}
dbqd.acs-subsite.www.permissions.perm-modify-oracle.add {dbqd.acs-subsite.www.permissions.perm-modify-oracle.add {
      
          begin
              acs_permission.grant_permission(
                  object_id => :object_id, 
                  grantee_id => :party_id,
                  privilege => :privilege
              );
          end;
  
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/permissions/perm-modify-oracle.xql}
dbqd.acs-subsite.www.permissions.perm-modify.remove {dbqd.acs-subsite.www.permissions.perm-modify.remove {
      
          select acs_permission__revoke_permission(:object_id, :party_id, :privilege) 
  
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/permissions/perm-modify-postgresql.xql}
dbqd.acs-subsite.www.permissions.perm-modify.add {dbqd.acs-subsite.www.permissions.perm-modify.add {
      
          select acs_permission__grant_permission(:object_id, :party_id, :privilege) 
  
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/permissions/perm-modify-postgresql.xql}
dbqd.acs-subsite.www.permissions.perm-modify.permissions_in_db {dbqd.acs-subsite.www.permissions.perm-modify.permissions_in_db {

        select grantee_id, privilege
        from   acs_permissions
        where  object_id = :object_id
        and    privilege in ('[join $privs "', '"]')

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/permissions/perm-modify.xql}
dbqd.acs-subsite.www.permissions.perm-user-add-2-oracle.add_user {dbqd.acs-subsite.www.permissions.perm-user-add-2-oracle.add_user {

          begin
              acs_permission.grant_permission(
                  object_id => :object_id, 
                  grantee_id => :one_user_id,
                  privilege => 'read'
              );
          end;

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/permissions/perm-user-add-2-oracle.xql}
dbqd.acs-subsite.www.permissions.perm-user-add-2.add_user {dbqd.acs-subsite.www.permissions.perm-user-add-2.add_user {

            select acs_permission__grant_permission(:object_id, :one_user_id, 'read')

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/permissions/perm-user-add-2-postgresql.xql}
dbqd.acs-subsite.www.permissions.perm-user-add-include-oracle.users_who_dont_have_any_permissions {dbqd.acs-subsite.www.permissions.perm-user-add-include-oracle.users_who_dont_have_any_permissions {

    select u.user_id,
           person.name(u.user_id) as name,
           u.email
    from   cc_users u
    where  u.user_id not in (select grantee_id from acs_permissions_all where object_id = :object_id)
    order  by name


      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/permissions/perm-user-add-include-oracle.xql}
dbqd.acs-subsite.www.permissions.perm-user-add-include.users_who_dont_have_any_permissions {dbqd.acs-subsite.www.permissions.perm-user-add-include.users_who_dont_have_any_permissions {

    select u.user_id,
           person__name(u.user_id) as name,
           u.email
    from   cc_users u
    where  u.user_id not in (select grantee_id from acs_permissions_all where object_id = :object_id)
    order  by name


      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/permissions/perm-user-add-include-postgresql.xql}
dbqd.acs-subsite.www.permissions.revoke-oracle.name {dbqd.acs-subsite.www.permissions.revoke-oracle.name {
      select acs_object.name(:object_id)
from dual
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/permissions/revoke-oracle.xql}
dbqd.acs-subsite.www.permissions.revoke-oracle.party_name {dbqd.acs-subsite.www.permissions.revoke-oracle.party_name {
      select acs_object.name(:party_id) from dual
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/permissions/revoke-oracle.xql}
dbqd.acs-subsite.www.permissions.revoke.name {dbqd.acs-subsite.www.permissions.revoke.name {
      select acs_object__name(:object_id)

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/permissions/revoke-postgresql.xql}
dbqd.acs-subsite.www.permissions.revoke.party_name {dbqd.acs-subsite.www.permissions.revoke.party_name {
      select acs_object__name(:party_id) 
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/permissions/revoke-postgresql.xql}
dbqd.acs-subsite.www.pvt.alerts-oracle.alerts_list {dbqd.acs-subsite.www.pvt.alerts-oracle.alerts_list {
      
    select bea.valid_p, bea.frequency, bea.keywords, bt.topic, bea.rowid
    from bboard_email_alerts bea, bboard_topics bt
    where bea.user_id = :user_id
    and bea.topic_id = bt.topic_id
    order by bea.frequency
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/pvt/alerts-oracle.xql}
dbqd.acs-subsite.www.pvt.alerts-oracle.alerts_list_2 {dbqd.acs-subsite.www.pvt.alerts-oracle.alerts_list_2 {
      
    select cea.valid_p,
           ad.domain,
           cea.alert_id,
           cea.expires,
           cea.frequency,
           cea.alert_type,
           cea.category,
           cea.keywords
    from   classified_email_alerts cea, ad_domains ad
    where  user_id = :user_id
    and    ad.domain_id = cea.domain_id
    and    sysdate <= expires
    order by expires desc
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/pvt/alerts-oracle.xql}
dbqd.acs-subsite.www.pvt.alerts.alerts_list {dbqd.acs-subsite.www.pvt.alerts.alerts_list {
      
    select bea.valid_p, bea.frequency, bea.keywords, bt.topic, bea.oid as rowid
    from bboard_email_alerts bea, bboard_topics bt
    where bea.user_id = :user_id
    and bea.topic_id = bt.topic_id
    order by bea.frequency
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/pvt/alerts-postgresql.xql}
dbqd.acs-subsite.www.pvt.alerts.alerts_list_2 {dbqd.acs-subsite.www.pvt.alerts.alerts_list_2 {
      
    select cea.valid_p,
           ad.domain,
           cea.alert_id,
           cea.expires,
           cea.frequency,
           cea.alert_type,
           cea.category,
           cea.keywords
    from   classified_email_alerts cea, ad_domains ad
    where  user_id = :user_id
    and    ad.domain_id = cea.domain_id
    and    current_timestamp <= expires
    order by expires desc
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/pvt/alerts-postgresql.xql}
dbqd.acs-subsite.www.pvt.alerts.name_get {dbqd.acs-subsite.www.pvt.alerts.name_get {
      select first_names, last_name, email, url from persons, parties where persons.person_id = parties.party_id and party_id =:user_id
      } {} {} {} c:/web/openacs/packages/acs-subsite/www/pvt/alerts.xql}
dbqd.acs-subsite.www.pvt.home.pvt_home_user_info {dbqd.acs-subsite.www.pvt.home.pvt_home_user_info {
      
    select first_names, last_name, email, url, screen_name
    from cc_users 
    where user_id=:user_id

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/pvt/home.xql}
dbqd.acs-subsite.www.pvt.home.biography {dbqd.acs-subsite.www.pvt.home.biography {
      
select attr_value
from acs_attribute_values
where object_id = :user_id
and attribute_id =
   (select attribute_id
    from acs_attributes
    where object_type = 'person'
    and attribute_name = 'bio')
      } {} {} {} c:/web/openacs/packages/acs-subsite/www/pvt/home.xql}
dbqd.acs-subsite.www.pvt.home.get_portrait_info {dbqd.acs-subsite.www.pvt.home.get_portrait_info {
      
    select cr.publish_date, cr.title as portrait_title
    from cr_revisions cr, cr_items ci, acs_rels a
    where cr.revision_id = ci.live_revision
    and  ci.item_id = a.object_id_two
    and a.object_id_one = :user_id
    and a.rel_type = 'user_portrait_rel'
    
      } {} {} {} c:/web/openacs/packages/acs-subsite/www/pvt/home.xql}
dbqd.acs-subsite.www.pvt.set-on-vacation-to-null.no_alerts_until {dbqd.acs-subsite.www.pvt.set-on-vacation-to-null.no_alerts_until {
      
    select no_alerts_until from users where user_id = :user_id

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/pvt/set-on-vacation-to-null.xql}
dbqd.acs-subsite.www.pvt.set-on-vacation-to-null.pvt_unset_no_alerts_until {dbqd.acs-subsite.www.pvt.set-on-vacation-to-null.pvt_unset_no_alerts_until {
      
	    update users 
	    set no_alerts_until = :clear
	    where user_id = :user_id
    
      } {} {} {} c:/web/openacs/packages/acs-subsite/www/pvt/set-on-vacation-to-null.xql}
dbqd.acs-subsite.www.pvt.set-on-vacation-until.pvt_set_vacation_update {dbqd.acs-subsite.www.pvt.set-on-vacation-until.pvt_set_vacation_update {
      update users set no_alerts_until = :on_vacation_until where user_id = :user_id
      } {} {} {} c:/web/openacs/packages/acs-subsite/www/pvt/set-on-vacation-until.xql}
dbqd.acs-subsite.www.pvt.toggle-dont-spam-me-p-oracle.unused {dbqd.acs-subsite.www.pvt.toggle-dont-spam-me-p-oracle.unused {
      update user_preferences set dont_spam_me_p = util.logical_negation(dont_spam_me_p) where user_id = :user_id
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/pvt/toggle-dont-spam-me-p-oracle.xql}
dbqd.acs-subsite.www.pvt.toggle-dont-spam-me-p.unused {dbqd.acs-subsite.www.pvt.toggle-dont-spam-me-p.unused {
      update user_preferences set dont_spam_me_p = util__logical_negation(dont_spam_me_p) where user_id = :user_id
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/pvt/toggle-dont-spam-me-p-postgresql.xql}
dbqd.acs-subsite.www.pvt.unsubscribe-2-oracle.rel_id {dbqd.acs-subsite.www.pvt.unsubscribe-2-oracle.rel_id {
      select rel_id
from group_member_map
where group_id = acs.magic_object_id('registered_users')
  and member_id = :user_id
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/pvt/unsubscribe-2-oracle.xql}
dbqd.acs-subsite.www.pvt.unsubscribe-2-oracle.unused {dbqd.acs-subsite.www.pvt.unsubscribe-2-oracle.unused {
      
begin
  membership_rel.del( rel_id => :rel_id );
end;
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/pvt/unsubscribe-2-oracle.xql}
dbqd.acs-subsite.www.pvt.unsubscribe-2.rel_id {dbqd.acs-subsite.www.pvt.unsubscribe-2.rel_id {
      select rel_id
from group_member_map
where group_id = acs__magic_object_id('registered_users')
  and member_id = :user_id
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/pvt/unsubscribe-2-postgresql.xql}
dbqd.acs-subsite.www.pvt.unsubscribe-2.unused {dbqd.acs-subsite.www.pvt.unsubscribe-2.unused {
        begin return membership_rel__deleted(:rel_id); end;
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/pvt/unsubscribe-2-postgresql.xql}
dbqd.acs-subsite.www.pvt.unsubscribe-oracle.vacation_time {dbqd.acs-subsite.www.pvt.unsubscribe-oracle.vacation_time {
      select no_alerts_until, acs_user.receives_alerts_p(:user_id) as on_vacation_p 
from users
where user_id = :user_id
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/pvt/unsubscribe-oracle.xql}
dbqd.acs-subsite.www.pvt.unsubscribe.vacation_time {dbqd.acs-subsite.www.pvt.unsubscribe.vacation_time {
      select no_alerts_until, acs_user__receives_alerts_p(:user_id) as on_vacation_p 
from users
where user_id = :user_id
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/pvt/unsubscribe-postgresql.xql}
dbqd.acs-subsite.www.pvt.unsubscribe.nospam {dbqd.acs-subsite.www.pvt.unsubscribe.nospam {
      select dont_spam_me_p
from user_preferences
where user_id = :user_id
      } {} {} {} c:/web/openacs/packages/acs-subsite/www/pvt/unsubscribe.xql}
dbqd.acs-subsite.www.register.user-join.group_info {dbqd.acs-subsite.www.register.user-join.group_info {
      
    select group_name, join_policy
    from groups
    where group_id = :group_id

      } {} {} {} c:/web/openacs/packages/acs-subsite/www/register/user-join.xql}
dbqd.acs-subsite.www.register.user-new.find_person {dbqd.acs-subsite.www.register.user-new.find_person {
      select parties.party_id as user_id, persons.first_names, persons.last_name
      from parties, persons
      where parties.party_id = persons.person_id
        and parties.email = lower(:email)
   } {} {} {} c:/web/openacs/packages/acs-subsite/www/register/user-new.xql}
dbqd.acs-subsite.www.shared.community-member.user_contributions {dbqd.acs-subsite.www.shared.community-member.user_contributions {
select at.pretty_name, at.pretty_plural, a.creation_date, acs_object__name(a.object_id) as object_name
from acs_objects a, acs_object_types at
where a.object_type = at.object_type
and a.creation_user = :user_id
order by at.pretty_name, creation_date desc
  } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/shared/community-member-postgresql.xql}
dbqd.acs-subsite.www.shared.parameters-oracle.select_params {dbqd.acs-subsite.www.shared.parameters-oracle.select_params {

    select p.parameter_name,
           nvl(p.description, 'No Description') as description,
           v.attr_value,
           nvl(p.section_name, '') as section_name
    from   apm_parameters p,
           (select v.parameter_id,
                   v.attr_value
            from apm_parameter_values v
            where v.package_id = :package_id
           ) v
    where  p.package_key = (select package_key from apm_packages where package_id = :package_id)
    and    p.parameter_id = v.parameter_id
    $section_where_clause
    order  by section_name, parameter_name

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/shared/parameters-oracle.xql}
dbqd.acs-subsite.www.shared.parameters-oracle.select_params_set {dbqd.acs-subsite.www.shared.parameters-oracle.select_params_set {

        select p.parameter_name as c__parameter_name
        from   apm_parameters p,
               (select v.parameter_id,
                       v.attr_value
                from apm_parameter_values v
                where v.package_id = :package_id
               ) v
        where  p.package_key = (select package_key from apm_packages where package_id = :package_id)
        and    p.parameter_id = v.parameter_id
    $section_where_clause
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/shared/parameters-oracle.xql}
dbqd.acs-subsite.www.shared.parameters.select_params {dbqd.acs-subsite.www.shared.parameters.select_params {

    select p.parameter_name,
           coalesce(p.description, 'No Description') as description,
           v.attr_value,
           coalesce(p.section_name, '') as section_name
    from   apm_parameters p left outer join
           (select v.parameter_id,
                   v.attr_value
            from apm_parameter_values v
            where v.package_id = :package_id
           ) v on p.parameter_id = v.parameter_id
    where  p.package_key = (select package_key from apm_packages where package_id = :package_id)
	$section_where_clause
    order  by section_name, parameter_name

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/shared/parameters-postgresql.xql}
dbqd.acs-subsite.www.shared.parameters.select_params_set {dbqd.acs-subsite.www.shared.parameters.select_params_set {

        select p.parameter_name as c__parameter_name
        from   apm_parameters p left outer join
               (select v.parameter_id,
                       v.attr_value
                from apm_parameter_values v
                where v.package_id = :package_id
               ) v on p.parameter_id = v.parameter_id
        where  p.package_key = (select package_key from apm_packages where package_id = :package_id)
	$section_where_clause
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/shared/parameters-postgresql.xql}
dbqd.acs-subsite.www.shared.parameters.section_where_clause {dbqd.acs-subsite.www.shared.parameters.section_where_clause {
      and section_name=:section
    } {} {} {} c:/web/openacs/packages/acs-subsite/www/shared/parameters.xql}
dbqd.acs-subsite.www.shared.portrait-bits-oracle.output_portrait {dbqd.acs-subsite.www.shared.portrait-bits-oracle.output_portrait {

        select r.content
        from cr_revisions r
        where r.revision_id = $revision_id

        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/shared/portrait-bits-oracle.xql}
dbqd.acs-subsite.www.shared.portrait-bits.output_portrait {dbqd.acs-subsite.www.shared.portrait-bits.output_portrait {

        select r.lob, i.storage_type
        from cr_revisions r, cr_items i
        where r.item_id = i.item_id 
          and r.revision_id = :revision_id

        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/shared/portrait-bits-postgresql.xql}
dbqd.acs-subsite.www.shared.portrait-bits.get_item_id {dbqd.acs-subsite.www.shared.portrait-bits.get_item_id {
         select c.item_id
         from acs_rels a, cr_items c
         where a.object_id_two = c.item_id
           and a.object_id_one = :user_id
           and a.rel_type = 'user_portrait_rel'
      } {} {} {} c:/web/openacs/packages/acs-subsite/www/shared/portrait-bits.xql}
dbqd.acs-subsite.www.user.basic-info-update-2.screen_name_unique_count {dbqd.acs-subsite.www.user.basic-info-update-2.screen_name_unique_count {
      
    select count(*) from users where screen_name = :screen_name and user_id != :user_id
      } {} {} {} c:/web/openacs/packages/acs-subsite/www/user/basic-info-update-2.xql}
dbqd.acs-subsite.www.user.basic-info-update-2.email_unique_count {dbqd.acs-subsite.www.user.basic-info-update-2.email_unique_count {
      select count(party_id) from parties where email = lower(:email) and party_id <> :user_id
      } {} {} {} c:/web/openacs/packages/acs-subsite/www/user/basic-info-update-2.xql}
dbqd.acs-subsite.www.user.basic-info-update-2.grab_bio {dbqd.acs-subsite.www.user.basic-info-update-2.grab_bio {
      select attr_value as bio_old
    from acs_attribute_values
    where object_id = :user_id
    and attribute_id =
      (select attribute_id
      from acs_attributes
      where object_type = 'person'
      and attribute_name = 'bio')
      } {} {} {} c:/web/openacs/packages/acs-subsite/www/user/basic-info-update-2.xql}
dbqd.acs-subsite.www.user.basic-info-update-2.update_parties {dbqd.acs-subsite.www.user.basic-info-update-2.update_parties {
      update parties
      set email = :email,
      url = :url
      where party_id = :user_id
      } {} {} {} c:/web/openacs/packages/acs-subsite/www/user/basic-info-update-2.xql}
dbqd.acs-subsite.www.user.basic-info-update-2.update_persons {dbqd.acs-subsite.www.user.basic-info-update-2.update_persons {
      update persons
      set first_names = :first_names,
      last_name = :last_name
      where person_id = :user_id
      } {} {} {} c:/web/openacs/packages/acs-subsite/www/user/basic-info-update-2.xql}
dbqd.acs-subsite.www.user.basic-info-update-2.update_users {dbqd.acs-subsite.www.user.basic-info-update-2.update_users {
      update users
      set screen_name=:screen_name
      where user_id = :user_id
      } {} {} {} c:/web/openacs/packages/acs-subsite/www/user/basic-info-update-2.xql}
dbqd.acs-subsite.www.user.basic-info-update-2.insert_bio {dbqd.acs-subsite.www.user.basic-info-update-2.insert_bio {
      insert into acs_attribute_values
	(object_id, attribute_id, attr_value)
	values 
	(:user_id, (select attribute_id
          from acs_attributes
          where object_type = 'person'
          and attribute_name = 'bio'), :bio)
      } {} {} {} c:/web/openacs/packages/acs-subsite/www/user/basic-info-update-2.xql}
dbqd.acs-subsite.www.user.basic-info-update-2.update_bio {dbqd.acs-subsite.www.user.basic-info-update-2.update_bio {
      update acs_attribute_values
	set attr_value = :bio
	where object_id = :user_id
	and attribute_id =
          (select attribute_id
          from acs_attributes
          where object_type = 'person'
          and attribute_name = 'bio')
      } {} {} {} c:/web/openacs/packages/acs-subsite/www/user/basic-info-update-2.xql}
dbqd.acs-subsite.www.user.basic-info-update-oracle.get_portrait_info {dbqd.acs-subsite.www.user.basic-info-update-oracle.get_portrait_info {
    
    select cr.publish_date, nvl(cr.title,'your portrait') as portrait_title
    from cr_revisions cr, cr_items ci, acs_rels a
    where cr.revision_id = ci.live_revision
    and  ci.item_id = a.object_id_two
    and a.object_id_one = :user_id
    and a.rel_type = 'user_portrait_rel'
      
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/user/basic-info-update-oracle.xql}
dbqd.acs-subsite.www.user.basic-info-update.get_portrait_info {dbqd.acs-subsite.www.user.basic-info-update.get_portrait_info {
    
    select cr.publish_date, coalesce(cr.title,'your portrait') as portrait_title
    from cr_revisions cr, cr_items ci, acs_rels a
    where cr.revision_id = ci.live_revision
    and  ci.item_id = a.object_id_two
    and a.object_id_one = :user_id
    and a.rel_type = 'user_portrait_rel'
      
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/user/basic-info-update-postgresql.xql}
dbqd.acs-subsite.www.user.basic-info-update.general_info {dbqd.acs-subsite.www.user.basic-info-update.general_info {
      select first_names, last_name, email, 
      case when url is null then 'http://' else url end as url,
      screen_name
      from cc_users 
      where user_id=:user_id
      } {} {} {} c:/web/openacs/packages/acs-subsite/www/user/basic-info-update.xql}
dbqd.acs-subsite.www.user.basic-info-update.biography {dbqd.acs-subsite.www.user.basic-info-update.biography {
      
select attr_value
from acs_attribute_values
where object_id = :user_id
and attribute_id =
   (select attribute_id
    from acs_attributes
    where object_type = 'person'
    and attribute_name = 'bio')
      } {} {} {} c:/web/openacs/packages/acs-subsite/www/user/basic-info-update.xql}
dbqd.acs-subsite.www.user.portrait.upload-2-oracle.create_item {dbqd.acs-subsite.www.user.portrait.upload-2-oracle.create_item {

        begin
          :1 := content_item.new(
                 name => :name,
                 creation_ip => :creation_ip);
        end;

        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/user/portrait/upload-2-oracle.xql}
dbqd.acs-subsite.www.user.portrait.upload-2-oracle.create_rel {dbqd.acs-subsite.www.user.portrait.upload-2-oracle.create_rel {

        begin
          :1 := acs_rel.new (
                 rel_type => 'user_portrait_rel',
                 object_id_one => :user_id,
                 object_id_two => :item_id);
        end;

        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/user/portrait/upload-2-oracle.xql}
dbqd.acs-subsite.www.user.portrait.upload-2-oracle.create_revision {dbqd.acs-subsite.www.user.portrait.upload-2-oracle.create_revision {

        begin
          :1 := content_revision.new(
             title => :title,
             description => :portrait_comment,
             text => 'not_important',
             mime_type => :guessed_file_type,
             item_id => :item_id,
             creation_user => :user_id,
             creation_ip => :creation_ip
          );

          update cr_items
          set live_revision = :1
          where item_id = :item_id;
        end;

        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/user/portrait/upload-2-oracle.xql}
dbqd.acs-subsite.www.user.portrait.upload-2-oracle.update_photo {dbqd.acs-subsite.www.user.portrait.upload-2-oracle.update_photo {

        update cr_revisions
        set content = empty_blob()
        where revision_id = :revision_id
        returning content into :1

        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/user/portrait/upload-2-oracle.xql}
dbqd.acs-subsite.www.user.portrait.upload-2-oracle.update_photo_info {dbqd.acs-subsite.www.user.portrait.upload-2-oracle.update_photo_info {

	update cr_revisions
	set description = :portrait_comment,
	    publish_date = sysdate,
	    mime_type = :guessed_file_type,
	    title = :title
	where revision_id = :revision_id
 
        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-subsite/www/user/portrait/upload-2-oracle.xql}
dbqd.acs-subsite.www.user.portrait.upload-2.create_item {dbqd.acs-subsite.www.user.portrait.upload-2.create_item {

  select content_item__new(
         varchar :name,
         null,
         null,
         null,
         now(),
         null,
         null,
         :creation_ip,
         'content_item',
         'content_revision',
         null,
         null,
         'text/plain',
         null,
         null
         )


        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/user/portrait/upload-2-postgresql.xql}
dbqd.acs-subsite.www.user.portrait.upload-2.create_rel {dbqd.acs-subsite.www.user.portrait.upload-2.create_rel {

        select acs_rel__new (
         null,
         'user_portrait_rel',
         :user_id,
         :item_id,
         null,
         null,
         null
        )


        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/user/portrait/upload-2-postgresql.xql}
dbqd.acs-subsite.www.user.portrait.upload-2.create_revision {dbqd.acs-subsite.www.user.portrait.upload-2.create_revision {

  declare
        v_revision_id      integer;
  begin

  v_revision_id := content_revision__new(
                                       :title,
                                       :portrait_comment,
                                       now(),
                                       :guessed_file_type,
                                       null,
                                       null,
                                       :item_id,
                                       null,
                                       now(),
                                       :user_id,
                                       :creation_ip
                                       );

  update cr_items
  set live_revision = v_revision_id
  where item_id = :item_id;

  return v_revision_id;

  end;

        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/user/portrait/upload-2-postgresql.xql}
dbqd.acs-subsite.www.user.portrait.upload-2.update_photo {dbqd.acs-subsite.www.user.portrait.upload-2.update_photo {

        update cr_revisions
        set lob = [set __lob_id [db_string get_lob_id "select empty_lob()"]]
        where revision_id = :revision_id

        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/user/portrait/upload-2-postgresql.xql}
dbqd.acs-subsite.www.user.portrait.upload-2.update_photo_info {dbqd.acs-subsite.www.user.portrait.upload-2.update_photo_info {

	update cr_revisions
	set description = :portrait_comment,
	    publish_date = now(),
	    mime_type = :guessed_file_type,
	    title = :title
	where revision_id = :revision_id
 
        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-subsite/www/user/portrait/upload-2-postgresql.xql}
dbqd.acs-subsite.www.user.portrait.upload-2.get_item_id {dbqd.acs-subsite.www.user.portrait.upload-2.get_item_id {

        select object_id_two as item_id
        from acs_rels
        where object_id_one = :user_id
        and rel_type = 'user_portrait_rel'

        } {} {} {} c:/web/openacs/packages/acs-subsite/www/user/portrait/upload-2.xql}
dbqd.acs-subsite.www.user.portrait.upload-2.upload_image_info {dbqd.acs-subsite.www.user.portrait.upload-2.upload_image_info {

                insert into images
                (image_id, width, height)
                values
                (:revision_id, :original_width, :original_height)

        } {} {} {} c:/web/openacs/packages/acs-subsite/www/user/portrait/upload-2.xql}
dbqd.acs-subsite.www.user.portrait.upload-2.get_revision_id {dbqd.acs-subsite.www.user.portrait.upload-2.get_revision_id {

        select live_revision as revision_id
        from cr_items
        where item_id = :item_id

        } {} {} {} c:/web/openacs/packages/acs-subsite/www/user/portrait/upload-2.xql}
dbqd.acs-subsite.www.user.portrait.upload-2.update_image_info {dbqd.acs-subsite.www.user.portrait.upload-2.update_image_info {

	update images
	set width = :original_width, height = :original_height
	where image_id = :revision_id

        } {} {} {} c:/web/openacs/packages/acs-subsite/www/user/portrait/upload-2.xql}
dbqd.acs-tcl.tcl.00-database-procs-postgresql.db_nextval.nextval_sequence {dbqd.acs-tcl.tcl.00-database-procs-postgresql.db_nextval.nextval_sequence {
      select nextval(:sequence) as nextval
      where (select relkind 
             from pg_class 
             where relname = :sequence) = 'S'
    } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/00-database-procs-postgresql-postgresql.xql}
dbqd.acs-tcl.tcl.00-database-procs-postgresql.db_nextval.nextval_view {dbqd.acs-tcl.tcl.00-database-procs-postgresql.db_nextval.nextval_view {
      select nextval 
      from ${sequence}
    } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/00-database-procs-postgresql-postgresql.xql}
dbqd.acs-tcl.tcl.acs-kernel-procs.ad_acs_administrator_exists_p.admin_exists_p {dbqd.acs-tcl.tcl.acs-kernel-procs.ad_acs_administrator_exists_p.admin_exists_p {
      
        select 1 as admin_exists_p
        from dual
        where exists (select 1
                      from all_object_party_privilege_map m, users u, acs_magic_objects amo
                      where m.object_id = amo.object_id
                        and amo.name = 'security_context_root'
                        and m.party_id = u.user_id
                        and m.privilege = 'admin')
    
      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/acs-kernel-procs.xql}
dbqd.acs-tcl.tcl.acs-kernel-procs.ad_acs_admin_node.acs_admin_node_p {dbqd.acs-tcl.tcl.acs-kernel-procs.ad_acs_admin_node.acs_admin_node_p {
      
        select case when count(object_id) = 0 then 0 else 1 end
        from site_nodes
        where object_id = (select package_id 
                           from apm_packages 
                           where package_key = 'acs-admin')
    
      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/acs-kernel-procs.xql}
dbqd.acs-tcl.tcl.acs-permissions-procs-oracle.permission::grant.grant_permission {dbqd.acs-tcl.tcl.acs-permissions-procs-oracle.permission::grant.grant_permission {
            declare
            begin
                acs_permission.grant_permission(
                    object_id => :object_id,
                    grantee_id => :party_id,
                    privilege => :privilege
                );
            end;
        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/acs-permissions-procs-oracle.xql}
dbqd.acs-tcl.tcl.acs-permissions-procs-oracle.permission::revoke.revoke_permission {dbqd.acs-tcl.tcl.acs-permissions-procs-oracle.permission::revoke.revoke_permission {
            declare
            begin
                acs_permission.revoke_permission(
                    object_id => :object_id,
                    grantee_id => :party_id,
                    privilege => :privilege
                );
            end;
        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/acs-permissions-procs-oracle.xql}
dbqd.acs-tcl.tcl.acs-permissions-procs-oracle.permission::permission_p_not_cached.select_permission_p {dbqd.acs-tcl.tcl.acs-permissions-procs-oracle.permission::permission_p_not_cached.select_permission_p {
            select 1
            from dual
            where 't' = acs_permission.permission_p(:object_id, :party_id, :privilege)
        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/acs-permissions-procs-oracle.xql}
dbqd.acs-tcl.tcl.acs-permissions-procs-oracle.permission::require_permission.name {dbqd.acs-tcl.tcl.acs-permissions-procs-oracle.permission::require_permission.name {
            select acs_object.name(:object_id)
            from dual
        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/acs-permissions-procs-oracle.xql}
dbqd.acs-tcl.tcl.acs-permissions-procs-oracle.permission::toggle_inherit.toggle_inherit {dbqd.acs-tcl.tcl.acs-permissions-procs-oracle.permission::toggle_inherit.toggle_inherit {
            update acs_objects
            set security_inherit_p = case when security_inherit_p = 't'
                                          then 'f'
                                          else 't'
                                     end
            where object_id = :object_id
        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/acs-permissions-procs-oracle.xql}
dbqd.acs-tcl.tcl.acs-permissions-procs.permission::grant.grant_permission {dbqd.acs-tcl.tcl.acs-permissions-procs.permission::grant.grant_permission {
                select acs_permission__grant_permission(
                    :object_id,
                    :party_id,
                    :privilege
                );
        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/acs-permissions-procs-postgresql.xql}
dbqd.acs-tcl.tcl.acs-permissions-procs.permission::revoke.revoke_permission {dbqd.acs-tcl.tcl.acs-permissions-procs.permission::revoke.revoke_permission {
             select acs_permission__revoke_permission(
                    :object_id,
                    :party_id,
                    :privilege
                );
        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/acs-permissions-procs-postgresql.xql}
dbqd.acs-tcl.tcl.acs-permissions-procs.permission::permission_p_not_cached.select_permission_p {dbqd.acs-tcl.tcl.acs-permissions-procs.permission::permission_p_not_cached.select_permission_p {
            select 1
            where 't' = acs_permission__permission_p(:object_id, :party_id, :privilege)
        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/acs-permissions-procs-postgresql.xql}
dbqd.acs-tcl.tcl.acs-permissions-procs.permission::require_permission.name {dbqd.acs-tcl.tcl.acs-permissions-procs.permission::require_permission.name {
            select acs_object__name(:object_id)
            from dual
        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/acs-permissions-procs-postgresql.xql}
dbqd.acs-tcl.tcl.acs-permissions-procs.permission::toggle_inherit.toggle_inherit {dbqd.acs-tcl.tcl.acs-permissions-procs.permission::toggle_inherit.toggle_inherit {
            update acs_objects
            set security_inherit_p = not security_inherit_p
            where object_id = :object_id
        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/acs-permissions-procs-postgresql.xql}
dbqd.acs-tcl.tcl.acs-permissions-procs.ad_permission_p.n_privs {dbqd.acs-tcl.tcl.acs-permissions-procs.ad_permission_p.n_privs {
            select count(*)
            from acs_privileges
            where privilege = :privilege
        } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/acs-permissions-procs.xql}
dbqd.acs-tcl.tcl.acs-permissions-procs.permission::inherit_p.select_inherit_p {dbqd.acs-tcl.tcl.acs-permissions-procs.permission::inherit_p.select_inherit_p {
            select case when security_inherit_p = 't' then 1 else 0 end
            from acs_objects
            where object_id = :object_id
        } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/acs-permissions-procs.xql}
dbqd.acs-tcl.tcl.acs-permissions-procs.permission::set_inherit.set_inherit {dbqd.acs-tcl.tcl.acs-permissions-procs.permission::set_inherit.set_inherit {
            update acs_objects
            set security_inherit_p = 't'
            where object_id = :object_id
        } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/acs-permissions-procs.xql}
dbqd.acs-tcl.tcl.acs-permissions-procs.permission::set_not_inherit.set_not_inherit {dbqd.acs-tcl.tcl.acs-permissions-procs.permission::set_not_inherit.set_not_inherit {
            update acs_objects
            set security_inherit_p = 'f'
            where object_id = :object_id
        } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/acs-permissions-procs.xql}
dbqd.acs-tcl.tcl.admin-init-oracle.path_select {dbqd.acs-tcl.tcl.admin-init-oracle.path_select {
      
	select package_id, site_node.url(node_id) as url from apm_packages p, site_nodes n
	where p.package_id = n.object_id
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/admin-init-oracle.xql}
dbqd.acs-tcl.tcl.admin-init.path_select {dbqd.acs-tcl.tcl.admin-init.path_select {
      
	select package_id, site_node__url(node_id) as url from apm_packages p, site_nodes n
	where p.package_id = n.object_id
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/admin-init-postgresql.xql}
dbqd.acs-tcl.tcl.admin-procs.ad_user_class_query.sql_post_select_for_user_class {dbqd.acs-tcl.tcl.admin-procs.ad_user_class_query.sql_post_select_for_user_class {
      
	    select sql_post_select
	    from user_classes 
            where user_class_id = [ns_dbquotevalue $user_class_id]
	
      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/admin-procs.xql}
dbqd.acs-tcl.tcl.admin-procs.ad_user_class_description.category_id {dbqd.acs-tcl.tcl.admin-procs.ad_user_class_description.category_id {
        select category from categories where category_id = :category_id

      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/admin-procs.xql}
dbqd.acs-tcl.tcl.admin-procs.ad_user_class_description.country_code {dbqd.acs-tcl.tcl.admin-procs.ad_user_class_description.country_code {

        select country_name from country_codes where iso = :country_code

      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/admin-procs.xql}
dbqd.acs-tcl.tcl.admin-procs.ad_user_class_description.usps_abbrev {dbqd.acs-tcl.tcl.admin-procs.ad_user_class_description.usps_abbrev {

        select state_name from states where usps_abbrev = :usps_abbrev

      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/admin-procs.xql}
dbqd.acs-tcl.tcl.admin-procs.ad_user_class_description.group_id {dbqd.acs-tcl.tcl.admin-procs.ad_user_class_description.group_id {

        select group_name from groups where group_id = :group_id

      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/admin-procs.xql}
dbqd.acs-tcl.tcl.admin-procs.ad_user_class_description.registration_during_month {dbqd.acs-tcl.tcl.admin-procs.ad_user_class_description.registration_during_month {

        select to_char(to_date(:registration_during_month,'YYYYMM'),'fmMonth YYYY') from dual

      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/admin-procs.xql}
dbqd.acs-tcl.tcl.admin-procs.ad_user_class_description.user_class_id {dbqd.acs-tcl.tcl.admin-procs.ad_user_class_description.user_class_id {

        select name from user_classes where user_class_id = :user_class_id

      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/admin-procs.xql}
dbqd.acs-tcl.tcl.apm-file-procs-oracle.apm_generate_tarball.create_item {dbqd.acs-tcl.tcl.apm-file-procs-oracle.apm_generate_tarball.create_item {

begin
 :1 := content_item.new(name => :name,
                        creation_ip => :creation_ip,
                        storage_type => 'file'
                        );
end;

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/apm-file-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-file-procs-oracle.apm_generate_tarball.create_revision {dbqd.acs-tcl.tcl.apm-file-procs-oracle.apm_generate_tarball.create_revision {

        begin
          :1 := content_revision.new(title => :title,
                                   description => 'gzipped tarfile',
                                   text => 'not_important',
                                   mime_type => 'text/plain',
                                   item_id => :item_id,
                                   creation_user => :user_id,
                                   creation_ip => :creation_ip
                );

          update cr_items
          set live_revision = :1
          where item_id = :item_id;
        end;

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/apm-file-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-file-procs-oracle.apm_generate_tarball.update_tarball {dbqd.acs-tcl.tcl.apm-file-procs-oracle.apm_generate_tarball.update_tarball {

                update cr_revisions
                set filename = '[set content_file [cr_create_content_file $item_id $revision_id $tmpfile]]'
                where revision_id = :revision_id

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/apm-file-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-file-procs-oracle.apm_generate_tarball.update_content_length {dbqd.acs-tcl.tcl.apm-file-procs-oracle.apm_generate_tarball.update_content_length {

                update apm_package_versions
                   set content_length = [cr_file_size $content_file]
                 where version_id = :version_id

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/apm-file-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-file-procs-oracle.apm_extract_tarball.distribution_tar_ball_select {dbqd.acs-tcl.tcl.apm-file-procs-oracle.apm_extract_tarball.distribution_tar_ball_select {

   select  '[cr_fs_path]' || r.filename as content, i.storage_type
     from cr_revisions r, cr_items i
    where r.item_id = i.item_id
      and r.revision_id = (select content_item.get_latest_revision(item_id)
                           from apm_package_versions 
                          where version_id = :version_id)

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/apm-file-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-file-procs-oracle.apm_file_add.apm_file_add {dbqd.acs-tcl.tcl.apm-file-procs-oracle.apm_file_add.apm_file_add {
      
	begin
	:1 := apm_package_version.add_file(
		file_id => :file_id,
		version_id => :version_id,
		path => :path,
		file_type => :file_type,
                db_type => :db_type
		);
	end;
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/apm-file-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-file-procs-oracle.apm_file_remove.apm_file_remove {dbqd.acs-tcl.tcl.apm-file-procs-oracle.apm_file_remove.apm_file_remove {
      
	begin
	apm_package_version.remove_file(
				path => :path,
				version_id => :version_id
				);
	end;
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/apm-file-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-file-procs.apm_generate_tarball.create_item {dbqd.acs-tcl.tcl.apm-file-procs.apm_generate_tarball.create_item {

select content_item__new(
         varchar :name,
         null,
         null,
         null,
         now(),
         null,
         null,
         :creation_ip,
         'content_item',
         'content_revision',
         null,
         null,
         'text/plain',
         null,
         null,
         'file'
         )

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/apm-file-procs-postgresql.xql}
dbqd.acs-tcl.tcl.apm-file-procs.apm_generate_tarball.create_revision {dbqd.acs-tcl.tcl.apm-file-procs.apm_generate_tarball.create_revision {

  declare
        v_revision_id      integer;
  begin

  v_revision_id := content_revision__new(
                                       :title,
                                       'gzipped tarfile',
                                       now(),
                                       'text/plain',
                                       null,
                                       'not_important',
                                       :item_id,
                                       null,
                                       now(),
                                       :user_id,
                                       :creation_ip
                                       );

  update cr_items
  set live_revision = v_revision_id
  where item_id = :item_id;

  return v_revision_id;

  end;

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/apm-file-procs-postgresql.xql}
dbqd.acs-tcl.tcl.apm-file-procs.apm_generate_tarball.update_tarball {dbqd.acs-tcl.tcl.apm-file-procs.apm_generate_tarball.update_tarball {

    update cr_revisions
    set content = '[set content_file [cr_create_content_file $item_id $revision_id $tmpfile]]'
    where revision_id = :revision_id

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/apm-file-procs-postgresql.xql}
dbqd.acs-tcl.tcl.apm-file-procs.apm_generate_tarball.update_content_length {dbqd.acs-tcl.tcl.apm-file-procs.apm_generate_tarball.update_content_length {

                update apm_package_versions
                set content_length = [cr_file_size $content_file]
                where version_id = :version_id

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/apm-file-procs-postgresql.xql}
dbqd.acs-tcl.tcl.apm-file-procs.apm_extract_tarball.distribution_tar_ball_select {dbqd.acs-tcl.tcl.apm-file-procs.apm_extract_tarball.distribution_tar_ball_select {

   select '[cr_fs_path]' || r.content as content, i.storage_type
     from cr_revisions r, cr_items i
    where r.item_id = i.item_id
      and r.revision_id = (select content_item__get_latest_revision(item_id)
                             from apm_package_versions 
                            where version_id = :version_id)

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/apm-file-procs-postgresql.xql}
dbqd.acs-tcl.tcl.apm-file-procs.apm_file_add.apm_file_add {dbqd.acs-tcl.tcl.apm-file-procs.apm_file_add.apm_file_add {

	select apm_package_version__add_file(
		:file_id,
		:version_id,
		:path,
		:file_type,
                :db_type
		)
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/apm-file-procs-postgresql.xql}
dbqd.acs-tcl.tcl.apm-file-procs.apm_file_remove.apm_file_remove {dbqd.acs-tcl.tcl.apm-file-procs.apm_file_remove.apm_file_remove {

	select apm_package_version__remove_file(
				:version_id,
				:path
				)
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/apm-file-procs-postgresql.xql}
dbqd.acs-tcl.tcl.apm-file-procs.apm_generate_tarball.item_exists_p {dbqd.acs-tcl.tcl.apm-file-procs.apm_generate_tarball.item_exists_p {

        select case when item_id is null then 0 else item_id end as item_id
          from apm_package_versions 
         where version_id = :version_id

      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/apm-file-procs.xql}
dbqd.acs-tcl.tcl.apm-file-procs.apm_generate_tarball.set_item_id {dbqd.acs-tcl.tcl.apm-file-procs.apm_generate_tarball.set_item_id {

        update apm_package_versions 
        set item_id = :item_id 
        where version_id = :version_id

      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/apm-file-procs.xql}
dbqd.acs-tcl.tcl.apm-file-procs.apm_generate_tarball.get_revision_id {dbqd.acs-tcl.tcl.apm-file-procs.apm_generate_tarball.get_revision_id {

        select live_revision as revision_id
          from cr_items
         where item_id = :item_id

      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/apm-file-procs.xql}
dbqd.acs-tcl.tcl.apm-file-procs.apm_db_type_keys.db_type_keys {dbqd.acs-tcl.tcl.apm-file-procs.apm_db_type_keys.db_type_keys {
      select db_type_key from apm_package_db_types
      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/apm-file-procs.xql}
dbqd.acs-tcl.tcl.apm-file-procs.apm_generate_tarball.package_key_select {dbqd.acs-tcl.tcl.apm-file-procs.apm_generate_tarball.package_key_select {
      select package_key from apm_package_version_info where version_id = :version_id
      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/apm-file-procs.xql}
dbqd.acs-tcl.tcl.apm-install-procs-oracle.apm_package_install_version.version_insert {dbqd.acs-tcl.tcl.apm-install-procs-oracle.apm_package_install_version.version_insert {
      
		begin
		:1 := apm_package_version.new(
			version_id => :version_id,
			package_key => :package_key,
			version_name => :version_name,
			version_uri => :version_uri,
			summary => :summary,
			description_format => :description_format,
			description => :description,
			release_date => :release_date,
			vendor => :vendor,
			vendor_uri => :vendor_uri,
                        auto_mount => :auto_mount,
			installed_p => 't',
			data_model_loaded_p => 't'
	              );
		end;
	    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/apm-install-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-install-procs-oracle.apm_package_install_version.version_insert_4.6.1 {dbqd.acs-tcl.tcl.apm-install-procs-oracle.apm_package_install_version.version_insert_4.6.1 {
      
		begin
		:1 := apm_package_version.new(
			version_id => :version_id,
			package_key => :package_key,
			version_name => :version_name,
			version_uri => :version_uri,
			summary => :summary,
			description_format => :description_format,
			description => :description,
			release_date => :release_date,
			vendor => :vendor,
			vendor_uri => :vendor_uri,
                        auto_mount => :auto_mount,
			installed_p => 't',
			data_model_loaded_p => 't'
	              );
		end;
	    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/apm-install-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-install-procs-oracle.apm_package_delete.apm_package_delete {dbqd.acs-tcl.tcl.apm-install-procs-oracle.apm_package_delete.apm_package_delete {
      
	begin
	    apm_package_type.drop_type(
	        package_key => :package_key,
	        cascade_p => 't'
            );
	end;
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/apm-install-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-install-procs-oracle.apm_package_version_delete.apm_version_delete {dbqd.acs-tcl.tcl.apm-install-procs-oracle.apm_package_version_delete.apm_version_delete {
      
	begin
	 apm_package_version.del(version_id => :version_id);	 
	end;
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/apm-install-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-install-procs-oracle.apm_package_install_spec.version_mark_installed {dbqd.acs-tcl.tcl.apm-install-procs-oracle.apm_package_install_spec.version_mark_installed {
      
            update apm_package_versions
            set    installed_p = decode(version_id, :version_id, 't', 'f')
            where  package_key = :package_key
        
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/apm-install-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-install-procs-oracle.apm_version_enable.apm_package_version_enable {dbqd.acs-tcl.tcl.apm-install-procs-oracle.apm_version_enable.apm_package_version_enable {
      
	begin
	  apm_package_version.enable(
            version_id => :version_id
	  );
	end;
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/apm-install-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-install-procs-oracle.apm_version_disable.apm_package_version_disable {dbqd.acs-tcl.tcl.apm-install-procs-oracle.apm_version_disable.apm_package_version_disable {
      
	begin
	  apm_package_version.disable(
            version_id => :version_id
	  );
	end;
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/apm-install-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-install-procs-oracle.apm_package_register.application_register {dbqd.acs-tcl.tcl.apm-install-procs-oracle.apm_package_register.application_register {
      
	    begin
	    apm.register_application (
		        package_key => :package_key,
			package_uri => :package_uri,
			pretty_name => :pretty_name,
			pretty_plural => :pretty_plural,
			initial_install_p => :initial_install_p,
			singleton_p => :singleton_p,
			spec_file_path => :spec_file_path,
			spec_file_mtime => :spec_file_mtime
          		);
	    end;					  
	
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/apm-install-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-install-procs-oracle.apm_package_register.service_register {dbqd.acs-tcl.tcl.apm-install-procs-oracle.apm_package_register.service_register {
      
	    begin
	    apm.register_service (
			package_key => :package_key,
			package_uri => :package_uri,
			pretty_name => :pretty_name,
			pretty_plural => :pretty_plural,
			initial_install_p => :initial_install_p,
			singleton_p => :singleton_p,
			spec_file_path => :spec_file_path,
			spec_file_mtime => :spec_file_mtime
			);
	    end;					  
	
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/apm-install-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-install-procs-oracle.apm_version_update.apm_version_update {dbqd.acs-tcl.tcl.apm-install-procs-oracle.apm_version_update.apm_version_update {
      
	begin
	:1 := apm_package_version.edit(
				 version_id => :version_id, 
				 version_name => :version_name, 
				 version_uri => :version_uri,
				 summary => :summary,
				 description_format => :description_format,
				 description => :description,
				 release_date => :release_date,
				 vendor => :vendor,
				 vendor_uri => :vendor_uri,
                                 auto_mount => :auto_mount,
				 installed_p => 't',
				 data_model_loaded_p => 't'				 
				 );
	end;
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/apm-install-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-install-procs-oracle.apm_version_upgrade.apm_version_upgrade {dbqd.acs-tcl.tcl.apm-install-procs-oracle.apm_version_upgrade.apm_version_upgrade {
      
	begin
	    apm_package_version.upgrade(version_id => :version_id);
	end;

    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/apm-install-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-install-procs-oracle.apm_upgrade_for_version_p.apm_upgrade_for_version_p {dbqd.acs-tcl.tcl.apm-install-procs-oracle.apm_upgrade_for_version_p.apm_upgrade_for_version_p {
      
	begin
	    :1 := apm_package_version.upgrade_p(
	              path => :path,
	              initial_version_name => :initial_version_name,
	              final_version_name => :final_version_name
	          );
	end;
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/apm-install-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-install-procs-oracle.apm_upgrade_script_compare.test_f1 {dbqd.acs-tcl.tcl.apm-install-procs-oracle.apm_upgrade_script_compare.test_f1 {
      
	    begin
	    :1 := apm_package_version.sortable_version_name('$f1_version_from');
	    end;
	
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/apm-install-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-install-procs-oracle.apm_upgrade_script_compare.test_f2 {dbqd.acs-tcl.tcl.apm-install-procs-oracle.apm_upgrade_script_compare.test_f2 {
      
	    begin
	    :1 := apm_package_version.sortable_version_name('$f2_version_from');
	    end;
	
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/apm-install-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-install-procs-oracle.apm_dependency_provided_p.apm_dependency_check {dbqd.acs-tcl.tcl.apm-install-procs-oracle.apm_dependency_provided_p.apm_dependency_check {
      
	select apm_package_version.version_name_greater(service_version, :dependency_version) as version_p
	from apm_package_dependencies d, apm_package_types a, apm_package_versions v
	where d.dependency_type = 'provides'
	and d.version_id = v.version_id
	and d.service_uri = :dependency_uri
	and v.installed_p = 't'
	and a.package_key = v.package_key
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/apm-install-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-install-procs-oracle.apm_dependency_provided_p.version_greater_p {dbqd.acs-tcl.tcl.apm-install-procs-oracle.apm_dependency_provided_p.version_greater_p {
        select apm_package_version.version_name_greater(:provided_version, :dependency_version) from dual
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/apm-install-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-install-procs-oracle.apm_package_install.version_exists_p {dbqd.acs-tcl.tcl.apm-install-procs-oracle.apm_package_install.version_exists_p {
      
	    select version_id 
	    from apm_package_versions 
	    where package_key = :package_key
	    and version_id = apm_package.highest_version(:package_key)
	
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/apm-install-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-install-procs-oracle.apm_package_upgrade_p.apm_package_upgrade_p {dbqd.acs-tcl.tcl.apm-install-procs-oracle.apm_package_upgrade_p.apm_package_upgrade_p {
      
	select apm_package_version.version_name_greater(:version_name, version_name) upgrade_p
	from apm_package_versions
	where package_key = :package_key
	and version_id = apm_package.highest_version (:package_key)
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/apm-install-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-install-procs-oracle.apm_package_upgrade_from.apm_package_upgrade_from {dbqd.acs-tcl.tcl.apm-install-procs-oracle.apm_package_upgrade_from.apm_package_upgrade_from {
      
	    select version_name from apm_package_versions
	    where package_key = :package_key
	    and version_id = apm_package.highest_version(:package_key)
	
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/apm-install-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-install-procs-oracle.apm_version_names_compare.select_sortable_versions {dbqd.acs-tcl.tcl.apm-install-procs-oracle.apm_version_names_compare.select_sortable_versions {
      
	    select apm_package_version.sortable_version_name(:version_name_1) as sortable_version_1,
                   apm_package_version.sortable_version_name(:version_name_2) as sortable_version_2
            from   dual
	
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/apm-install-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_package_install_version.version_insert {dbqd.acs-tcl.tcl.apm-install-procs.apm_package_install_version.version_insert {
		select apm_package_version__new(
			:version_id,
			:package_key,
			:version_name,
			:version_uri,
			:summary,
			:description_format,
			:description,
			:release_date,
			:vendor,
			:vendor_uri,
                        :auto_mount,
			't',
			't'
	              );
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/apm-install-procs-postgresql.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_package_delete.apm_package_delete {dbqd.acs-tcl.tcl.apm-install-procs.apm_package_delete.apm_package_delete {

	    select apm_package_type__drop_type(
	        :package_key,
	        't'
            );
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/apm-install-procs-postgresql.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_package_version_delete.apm_version_delete {dbqd.acs-tcl.tcl.apm-install-procs.apm_package_version_delete.apm_version_delete {

	 select apm_package_version__delete(:version_id);	 
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/apm-install-procs-postgresql.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_package_install_spec.version_mark_installed {dbqd.acs-tcl.tcl.apm-install-procs.apm_package_install_spec.version_mark_installed {

            update apm_package_versions
            set    installed_p = (version_id = :version_id)
            where  package_key = :package_key
        
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/apm-install-procs-postgresql.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_version_disable.apm_package_version_disable {dbqd.acs-tcl.tcl.apm-install-procs.apm_version_disable.apm_package_version_disable {

	  select apm_package_version__disable(
            :version_id
	  );
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/apm-install-procs-postgresql.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_package_register.application_register {dbqd.acs-tcl.tcl.apm-install-procs.apm_package_register.application_register {

	    select apm__register_application (
		        :package_key,
			:pretty_name,
			:pretty_plural,
			:package_uri,
			:initial_install_p,
			:singleton_p,
			:spec_file_path,
			:spec_file_mtime
          		);
	
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/apm-install-procs-postgresql.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_package_register.service_register {dbqd.acs-tcl.tcl.apm-install-procs.apm_package_register.service_register {

	    select apm__register_service (
			:package_key,
			:pretty_name,
			:pretty_plural,
			:package_uri,
			:initial_install_p,
			:singleton_p,
			:spec_file_path,
			:spec_file_mtime
			);
	
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/apm-install-procs-postgresql.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_version_update.apm_version_update {dbqd.acs-tcl.tcl.apm-install-procs.apm_version_update.apm_version_update {

	select apm_package_version__edit(
                                 null,
				 :version_id, 
				 :version_name, 
				 :version_uri,
				 :summary,
				 :description_format,
				 :description,
				 :release_date,
				 :vendor,
				 :vendor_uri,
                                 :auto_mount,
				 't',
				 't'				 
				 );
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/apm-install-procs-postgresql.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_version_upgrade.apm_version_upgrade {dbqd.acs-tcl.tcl.apm-install-procs.apm_version_upgrade.apm_version_upgrade {

	    select apm_package_version__upgrade(:version_id);
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/apm-install-procs-postgresql.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_upgrade_for_version_p.apm_upgrade_for_version_p {dbqd.acs-tcl.tcl.apm-install-procs.apm_upgrade_for_version_p.apm_upgrade_for_version_p {

	    select apm_package_version__upgrade_p(
	              :path,
	              :initial_version_name,
	              :final_version_name
	          );
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/apm-install-procs-postgresql.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_upgrade_script_compare.test_f1 {dbqd.acs-tcl.tcl.apm-install-procs.apm_upgrade_script_compare.test_f1 {

	    select apm_package_version__sortable_version_name('$f1_version_from');
	
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/apm-install-procs-postgresql.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_upgrade_script_compare.test_f2 {dbqd.acs-tcl.tcl.apm-install-procs.apm_upgrade_script_compare.test_f2 {

	    select apm_package_version__sortable_version_name('$f2_version_from');
	
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/apm-install-procs-postgresql.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_dependency_provided_p.apm_dependency_check {dbqd.acs-tcl.tcl.apm-install-procs.apm_dependency_provided_p.apm_dependency_check {
      
	select apm_package_version__version_name_greater(service_version, :dependency_version) as version_p
	from apm_package_dependencies d, apm_package_types a, apm_package_versions v
	where d.dependency_type = 'provides'
	and d.version_id = v.version_id
	and d.service_uri = :dependency_uri
	and v.installed_p = 't'
	and a.package_key = v.package_key
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/apm-install-procs-postgresql.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_dependency_provided_p.version_greater_p {dbqd.acs-tcl.tcl.apm-install-procs.apm_dependency_provided_p.version_greater_p {
        select apm_package_version__version_name_greater(:provided_version, :dependency_version)
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/apm-install-procs-postgresql.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_package_install.version_exists_p {dbqd.acs-tcl.tcl.apm-install-procs.apm_package_install.version_exists_p {
      
	    select version_id 
	    from apm_package_versions 
	    where package_key = :package_key
	    and version_id = apm_package__highest_version(:package_key)
	
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/apm-install-procs-postgresql.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_package_upgrade_p.apm_package_upgrade_p {dbqd.acs-tcl.tcl.apm-install-procs.apm_package_upgrade_p.apm_package_upgrade_p {
      
	select apm_package_version__version_name_greater(:version_name, version_name) as upgrade_p
	from apm_package_versions
	where package_key = :package_key
	and version_id = apm_package__highest_version (:package_key)
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/apm-install-procs-postgresql.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_version_enable.apm_package_version_enable {dbqd.acs-tcl.tcl.apm-install-procs.apm_version_enable.apm_package_version_enable {

	  select apm_package_version__enable(
            :version_id
	  );
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/apm-install-procs-postgresql.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_package_upgrade_from.apm_package_upgrade_from {dbqd.acs-tcl.tcl.apm-install-procs.apm_package_upgrade_from.apm_package_upgrade_from {
      
	    select version_name from apm_package_versions
	    where package_key = :package_key
	    and version_id = apm_package__highest_version(:package_key)
	
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/apm-install-procs-postgresql.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_version_names_compare.select_sortable_versions {dbqd.acs-tcl.tcl.apm-install-procs.apm_version_names_compare.select_sortable_versions {
      
	    select apm_package_version__sortable_version_name(:version_name_1) as sortable_version_1,
                   apm_package_version__sortable_version_name(:version_name_2) as sortable_version_2
            from   dual

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/apm-install-procs-postgresql.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_package_deinstall.apm_uninstall_record {dbqd.acs-tcl.tcl.apm-install-procs.apm_package_deinstall.apm_uninstall_record {
      
	update apm_package_versions
	set    installed_p = 'f', enabled_p = 'f'
	where package_key = :package_key
    
      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/apm-install-procs.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_package_version_count.apm_package_version_count {dbqd.acs-tcl.tcl.apm-install-procs.apm_package_version_count.apm_package_version_count {
      
	select count(*) from apm_package_versions
	where package_key = :package_key
    
      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/apm-install-procs.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_package_upgrade_parameters.parameter_id_get {dbqd.acs-tcl.tcl.apm-install-procs.apm_package_upgrade_parameters.parameter_id_get {
      
	    select parameter_id from apm_parameters
	    where parameter_name = :parameter_name
	    and package_key = :package_key
	
      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/apm-install-procs.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_package_install_dependencies.all_dependencies_for_version {dbqd.acs-tcl.tcl.apm-install-procs.apm_package_install_dependencies.all_dependencies_for_version {
      
	select dependency_id from apm_package_dependencies
	where version_id = :version_id
    
      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/apm-install-procs.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_package_install_owners.apm_delete_owners {dbqd.acs-tcl.tcl.apm-install-procs.apm_package_install_owners.apm_delete_owners {
      
	delete from apm_package_owners where version_id = :version_id
    
      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/apm-install-procs.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_package_install_owners.owner_insert {dbqd.acs-tcl.tcl.apm-install-procs.apm_package_install_owners.owner_insert {
      
	    insert into apm_package_owners(version_id, owner_uri, owner_name, sort_key)
	    values(:version_id, :owner_uri, :owner_name, :counter)
	
      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/apm-install-procs.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_package_install_spec.package_version_info_select {dbqd.acs-tcl.tcl.apm-install-procs.apm_package_install_spec.package_version_info_select {
      
	select package_key, version_id
	from apm_package_version_info 
	where version_id = :version_id
    
      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/apm-install-procs.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_package_install_spec.apm_spec_file_register {dbqd.acs-tcl.tcl.apm-install-procs.apm_package_install_spec.apm_spec_file_register {
      
	    update apm_package_types
		set spec_file_path = :path
	        where package_key = :package_key
	
      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/apm-install-procs.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_package_install_callbacks.delete_all_callbacks {dbqd.acs-tcl.tcl.apm-install-procs.apm_package_install_callbacks.delete_all_callbacks {
        delete from apm_package_callbacks
        where version_id = :version_id
      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/apm-install-procs.xql}
dbqd.acs-tcl.tcl.apm-procs-oracle.apm_highest_version.apm_highest_version {dbqd.acs-tcl.tcl.apm-procs-oracle.apm_highest_version.apm_highest_version {
      
	begin
	:1 := apm_package.highest_version (
                    package_key => :package_key
		    );
	end;
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/apm-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-procs-oracle.apm_highest_version_name.apm_highest_version_name {dbqd.acs-tcl.tcl.apm-procs-oracle.apm_highest_version_name.apm_highest_version_name {
      
        select version_name 
        from   apm_package_versions
        where  package_key = :package_key
        and    version_id = apm_package.highest_version(:package_key)
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/apm-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-procs-oracle.apm_num_instances.apm_num_instances {dbqd.acs-tcl.tcl.apm-procs-oracle.apm_num_instances.apm_num_instances {
      
	begin
	:1 := apm_package.num_instances(
		package_key => :package_key
		);
	end;
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/apm-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-procs-oracle.apm_parameter_register.parameter_register {dbqd.acs-tcl.tcl.apm-procs-oracle.apm_parameter_register.parameter_register {
      
	    begin
	    :1 := apm.register_parameter(
					 parameter_id => :parameter_id,
					 parameter_name => :parameter_name,
					 package_key => :package_key,
					 description => :description,
					 datatype => :datatype,
					 default_value => :default_value,
					 section_name => :section_name,
					 min_n_values => :min_n_values,
					 max_n_values => :max_n_values
	                                );
	    end;
	
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/apm-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-procs-oracle.apm_parameter_register.apm_parameter_cache_update {dbqd.acs-tcl.tcl.apm-procs-oracle.apm_parameter_register.apm_parameter_cache_update {
      
	select v.package_id, p.parameter_name,
          decode(v.value_id, null, p.default_value, v.attr_value) as attr_value
	from apm_parameters p, apm_parameter_values v
	where p.package_key = :package_key
	and p.parameter_id = v.parameter_id (+)
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/apm-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-procs-oracle.apm_dependency_add.dependency_add {dbqd.acs-tcl.tcl.apm-procs-oracle.apm_dependency_add.dependency_add {
      
	begin
	:1 := apm_package_version.add_dependency(
            dependency_id => :dependency_id,
	    version_id => :version_id,
	    dependency_uri => :dependency_uri,
	    dependency_version => :dependency_version
        );					 
	end;
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/apm-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-procs-oracle.apm_dependency_remove.dependency_remove {dbqd.acs-tcl.tcl.apm-procs-oracle.apm_dependency_remove.dependency_remove {
      
	begin
	apm_package_version.remove_dependency(
             dependency_id => :dependency_id
	);
	end;					        
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/apm-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-procs-oracle.apm_interface_add.interface_add {dbqd.acs-tcl.tcl.apm-procs-oracle.apm_interface_add.interface_add {
      
	begin
	:1 := apm_package_version.add_interface(
            interface_id => :interface_id,
	    version_id => :version_id,
	    interface_uri => :interface_uri,
	    interface_version => :interface_version
        );					 
	end;
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/apm-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-procs-oracle.apm_interface_remove.interface_remove {dbqd.acs-tcl.tcl.apm-procs-oracle.apm_interface_remove.interface_remove {
      
	begin
	apm_package_version.remove_interface(
             interface_id => :interface_id
	);
	end;					        
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/apm-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-procs-oracle.apm_package_version_installed_p.apm_package_version_installed_p {dbqd.acs-tcl.tcl.apm-procs-oracle.apm_package_version_installed_p.apm_package_version_installed_p {
      
	select decode(count(*), 0, 0, 1) from apm_package_versions
	where package_key = :package_key
	and version_name = :version_name
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/apm-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-procs-oracle.apm_package_version_installed_p.apm_package_version_installed_p {dbqd.acs-tcl.tcl.apm-procs-oracle.apm_package_version_installed_p.apm_package_version_installed_p {
      
	select decode(count(*), 0, 0, 1) from apm_package_versions
	where package_key = :package_key
	and version_name = :version_name
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/apm-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-procs-oracle.apm_package_instance_new.invoke_new {dbqd.acs-tcl.tcl.apm-procs-oracle.apm_package_instance_new.invoke_new {
      
	begin
      :1 := apm_package.new(
        package_id => :package_id,
        instance_name => :instance_name,
        package_key => :package_key,
        context_id => :context_id
      );
	end;
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/apm-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-procs-oracle.apm_package_instance_delete.apm_package_instance_delete {dbqd.acs-tcl.tcl.apm-procs-oracle.apm_package_instance_delete.apm_package_instance_delete {
    begin
      apm_package.del(
	package_id => :package_id
      );
    end;
  } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/apm-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-procs-oracle.apm_package_url_from_id_mem.apm_package_url_from_id {dbqd.acs-tcl.tcl.apm-procs-oracle.apm_package_url_from_id_mem.apm_package_url_from_id {
      
	select site_node.url(node_id) 
          from site_nodes 
         where object_id = :package_id
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/apm-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-procs-oracle.apm_application_new_checkbox.package_types {dbqd.acs-tcl.tcl.apm-procs-oracle.apm_application_new_checkbox.package_types {
        select package_key, pretty_name
        from apm_package_types
        where not (apm_package.singleton_p(package_key) = 1 and
                   apm_package.num_instances(package_key) >= 1)
        order by pretty_name
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/apm-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_highest_version.apm_highest_version {dbqd.acs-tcl.tcl.apm-procs.apm_highest_version.apm_highest_version {

	select  apm_package__highest_version (
                    :package_key
		    );
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/apm-procs-postgresql.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_highest_version_name.apm_highest_version_name {dbqd.acs-tcl.tcl.apm-procs.apm_highest_version_name.apm_highest_version_name {
      
        select version_name 
        from   apm_package_versions
        where  package_key = :package_key
        and    version_id = apm_package__highest_version(:package_key)
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/apm-procs-postgresql.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_num_instances.apm_num_instances {dbqd.acs-tcl.tcl.apm-procs.apm_num_instances.apm_num_instances {

	select apm_package__num_instances(
		:package_key
		);
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/apm-procs-postgresql.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_parameter_register.parameter_register {dbqd.acs-tcl.tcl.apm-procs.apm_parameter_register.parameter_register {

	    select apm__register_parameter(
					 :parameter_id,
					 :package_key,
					 :parameter_name,
					 :description,
					 :datatype,
					 :default_value,
					 :section_name,
					 :min_n_values,
					 :max_n_values
	                                );
	
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/apm-procs-postgresql.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_dependency_add.dependency_add {dbqd.acs-tcl.tcl.apm-procs.apm_dependency_add.dependency_add {

	select apm_package_version__add_dependency(
            :dependency_id,
	    :version_id,
	    :dependency_uri,
	    :dependency_version
        );					 
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/apm-procs-postgresql.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_dependency_remove.dependency_remove {dbqd.acs-tcl.tcl.apm-procs.apm_dependency_remove.dependency_remove {

	select apm_package_version__remove_dependency(
             :dependency_id
	);
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/apm-procs-postgresql.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_interface_add.interface_add {dbqd.acs-tcl.tcl.apm-procs.apm_interface_add.interface_add {

	select apm_package_version__add_interface(
            :interface_id,
	    :version_id,
	    :interface_uri,
	    :interface_version
        );					 
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/apm-procs-postgresql.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_interface_remove.interface_remove {dbqd.acs-tcl.tcl.apm-procs.apm_interface_remove.interface_remove {

	select apm_package_version__remove_interface(
             :interface_id
	);
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/apm-procs-postgresql.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_package_version_installed_p.apm_package_version_installed_p {dbqd.acs-tcl.tcl.apm-procs.apm_package_version_installed_p.apm_package_version_installed_p {

	select case when count(*) = 0 then 0 else 1 end 
        from apm_package_versions
	where package_key = :package_key
	and version_name = :version_name
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/apm-procs-postgresql.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_package_instance_new.invoke_new {dbqd.acs-tcl.tcl.apm-procs.apm_package_instance_new.invoke_new {

      select apm_package__new(
        :package_id,
        :instance_name,
        :package_key,
        'apm_package',
        now(),
        null,
        null,
        :context_id
      );
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/apm-procs-postgresql.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_package_instance_delete.apm_package_instance_delete {dbqd.acs-tcl.tcl.apm-procs.apm_package_instance_delete.apm_package_instance_delete {
	select apm_package__delete(:package_id);
  } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/apm-procs-postgresql.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_parameter_unregister.parameter_unregister {dbqd.acs-tcl.tcl.apm-procs.apm_parameter_unregister.parameter_unregister {
      
	begin
	delete from apm_parameter_values 
	where parameter_id = :parameter_id;
	delete from apm_parameters 
	where parameter_id = :parameter_id;
	PERFORM acs_object__delete(:parameter_id);

        return null;
	end;
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/apm-procs-postgresql.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_package_url_from_id_mem.apm_package_url_from_id {dbqd.acs-tcl.tcl.apm-procs.apm_package_url_from_id_mem.apm_package_url_from_id {
      
	select site_node__url(node_id) 
          from site_nodes 
         where object_id = :package_id
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/apm-procs-postgresql.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_application_new_checkbox.package_types {dbqd.acs-tcl.tcl.apm-procs.apm_application_new_checkbox.package_types {
         select package_key,
         pretty_name
         from apm_package_types
         where not (apm_package__singleton_p(package_key) = 1 and
                    apm_package__num_instances(package_key) >= 1)
         order by pretty_name
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/apm-procs-postgresql.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_package_version_enabled_p.apm_package_version_enabled_p {dbqd.acs-tcl.tcl.apm-procs.apm_package_version_enabled_p.apm_package_version_enabled_p {
      select case when count(*) = 0 then 0 else 1 end from apm_package_versions
      where version_id = :version_id
      and enabled_p = 't'
    } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/apm-procs.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_parameter_register.apm_parameter_cache_update {dbqd.acs-tcl.tcl.apm-procs.apm_parameter_register.apm_parameter_cache_update {
      select v.package_id, p.parameter_name, 
      case when v.value_id is null then p.default_value else v.attr_value end as attr_value
      from apm_parameters p left outer join apm_parameter_values v
      using (parameter_id)
      where p.package_key = :package_key
    } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/apm-procs.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_enabled_packages.enabled_packages {dbqd.acs-tcl.tcl.apm-procs.apm_enabled_packages.enabled_packages {
      select distinct package_key
      from apm_package_versions
      where enabled_p='t'
    } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/apm-procs.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_pretty_name_for_db_type.pretty_db_name_select {dbqd.acs-tcl.tcl.apm-procs.apm_pretty_name_for_db_type.pretty_db_name_select {
      select pretty_db_name
      from apm_package_db_types
      where db_type_key = :db_type
    } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/apm-procs.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_package_parameters.get_names {dbqd.acs-tcl.tcl.apm-procs.apm_package_parameters.get_names {
      select parameter_name from apm_parameters
      where package_key = :package_key
    } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/apm-procs.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_package_registered_p.apm_package_registered_p {dbqd.acs-tcl.tcl.apm-procs.apm_package_registered_p.apm_package_registered_p {
      select 1 from apm_package_types 
      where package_key = :package_key
    } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/apm-procs.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_package_installed_p_not_cached.apm_package_installed_p {dbqd.acs-tcl.tcl.apm-procs.apm_package_installed_p_not_cached.apm_package_installed_p {
      select 1 from apm_package_versions
      where package_key = :package_key
      and installed_p = 't'
    } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/apm-procs.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_package_enabled_p.apm_package_enabled_p {dbqd.acs-tcl.tcl.apm-procs.apm_package_enabled_p.apm_package_enabled_p {
      select 1 from apm_package_versions
      where package_key = :package_key
      and enabled_p = 't'
    } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/apm-procs.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_version_installed_p.apm_version_installed_p {dbqd.acs-tcl.tcl.apm-procs.apm_version_installed_p.apm_version_installed_p {
      select 1 from apm_package_versions
      where version_id = :version_id
      and installed_p = 't'
    } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/apm-procs.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_parameter_update.parameter_update {dbqd.acs-tcl.tcl.apm-procs.apm_parameter_update.parameter_update {
      update apm_parameters 
      set parameter_name = :parameter_name,
      default_value  = :default_value,
      datatype       = :datatype, 
      description	   = :description,
      section_name   = :section_name,
      min_n_values   = :min_n_values,
      max_n_values   = :max_n_values
      where parameter_id = :parameter_id
    } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/apm-procs.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_parameter_unregister.all_parameters_packages {dbqd.acs-tcl.tcl.apm-procs.apm_parameter_unregister.all_parameters_packages {
      select package_id, parameter_id, parameter_name 
      from apm_packages p, apm_parameters ap
      where p.package_key = ap.package_key
      and ap.parameter_id = :parameter_id
    } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/apm-procs.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_package_key_from_id_mem.apm_package_key_from_id {dbqd.acs-tcl.tcl.apm-procs.apm_package_key_from_id_mem.apm_package_key_from_id {
      select package_key
      from apm_packages
      where package_id = :package_id
    } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/apm-procs.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_version_id_from_package_key.get_id {dbqd.acs-tcl.tcl.apm-procs.apm_version_id_from_package_key.get_id {
        select version_id 
        from apm_enabled_package_versions 
        where package_key = :package_key
    } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/apm-procs.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_package_id_from_key_mem.apm_package_id_from_key {dbqd.acs-tcl.tcl.apm-procs.apm_package_id_from_key_mem.apm_package_id_from_key {
      select package_id
      from apm_packages
      where package_key = :package_key
    } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/apm-procs.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_version_info.apm_package_by_version_id {dbqd.acs-tcl.tcl.apm-procs.apm_version_info.apm_package_by_version_id {
      select pretty_name, version_name, package_key, installed_p, distribution_uri, tagged_p
      from   apm_package_version_info
      where  version_id = :version_id
    } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/apm-procs.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_parameter_sync.apm_parameter_names_and_values {dbqd.acs-tcl.tcl.apm-procs.apm_parameter_sync.apm_parameter_names_and_values {
      select parameter_name, attr_value
      from apm_parameters p, apm_parameter_values v, apm_packages a
      where p.parameter_id = v.parameter_id
      and a.package_id = v.package_id
      and a.package_id = :package_id
    } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/apm-procs.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_get_callback_proc.select_proc {dbqd.acs-tcl.tcl.apm-procs.apm_get_callback_proc.select_proc {
        select proc
        from apm_package_callbacks
        where version_id = :version_id
        and   type = :type
    } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/apm-procs.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_set_callback_proc.insert_proc {dbqd.acs-tcl.tcl.apm-procs.apm_set_callback_proc.insert_proc {
        insert into apm_package_callbacks
          (version_id, type, proc)
        values (:version_id, :type, :proc)
    } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/apm-procs.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_set_callback_proc.update_proc {dbqd.acs-tcl.tcl.apm-procs.apm_set_callback_proc.update_proc {
        update apm_package_callbacks
                set proc = :proc
        where version_id = :version_id
          and type = :type
    } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/apm-procs.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_remove_callback_proc.delete_proc {dbqd.acs-tcl.tcl.apm-procs.apm_remove_callback_proc.delete_proc {
        delete from apm_package_callbacks
        where version_id = (select version_id 
                            from apm_enabled_package_versions 
                            where package_key = :package_key)
        and   type = :type
    } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/apm-procs.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_version_get.select_version_info {dbqd.acs-tcl.tcl.apm-procs.apm_version_get.select_version_info {
        select v.version_id,
               v.package_key,
               v.version_name,
               v.version_uri,
               v.summary,
               v.description_format,
               v.description,
               to_char(v.release_date, 'YYYY-MM-DD') as release_date,
               v.vendor,
               v.vendor_uri,
               v.enabled_p,
               v.installed_p,
               v.tagged_p,
               v.imported_p,
               v.data_model_loaded_p,
               v.cvs_import_results,
               v.activation_date,
               v.deactivation_date,
               v.item_id,
               v.content_length,
               v.distribution_uri,
               v.distribution_date,
               v.auto_mount,
               t.pretty_name,
               t.pretty_plural
        from   apm_package_versions v,
               apm_package_types t
        where  v.version_id = :version_id
        and    t.package_key = v.package_key
    } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/apm-procs.xql}
dbqd.acs-tcl.tcl.apm-xml-procs.apm_generate_package_spec.package_version_select {dbqd.acs-tcl.tcl.apm-xml-procs.apm_generate_package_spec.package_version_select {
      
        select t.package_key, 
               t.package_uri, 
               t.pretty_name, 
               t.pretty_plural, 
               t.package_type,
	       t.initial_install_p, 
               t.singleton_p, 
               v.*
        from   apm_package_versions v, 
               apm_package_types t
        where  v.version_id = :version_id
        and    v.package_key = t.package_key
    
      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/apm-xml-procs.xql}
dbqd.acs-tcl.tcl.apm-xml-procs.apm_generate_package_spec.owner_info {dbqd.acs-tcl.tcl.apm-xml-procs.apm_generate_package_spec.owner_info {
      
        select owner_uri, owner_name
        from   apm_package_owners
        where  version_id = :version_id
        order  by sort_key, owner_uri
    
      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/apm-xml-procs.xql}
dbqd.acs-tcl.tcl.apm-xml-procs.apm_generate_package_spec.dependency_info {dbqd.acs-tcl.tcl.apm-xml-procs.apm_generate_package_spec.dependency_info {
      
        select dependency_type, 
               service_uri, 
               service_version
        from   apm_package_dependencies
        where  version_id = :version_id
        order by dependency_type, service_uri
    
      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/apm-xml-procs.xql}
dbqd.acs-tcl.tcl.apm-xml-procs.apm_generate_package_spec.callback_info {dbqd.acs-tcl.tcl.apm-xml-procs.apm_generate_package_spec.callback_info {
        select type,
               proc
        from apm_package_callbacks
        where version_id = :version_id
      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/apm-xml-procs.xql}
dbqd.acs-tcl.tcl.apm-xml-procs.apm_generate_package_spec.callback_info {dbqd.acs-tcl.tcl.apm-xml-procs.apm_generate_package_spec.callback_info {
        select type,
               proc
        from apm_package_callbacks
        where version_id = :version_id
      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/apm-xml-procs.xql}
dbqd.acs-tcl.tcl.apm-xml-procs.apm_generate_package_spec.parameter_info {dbqd.acs-tcl.tcl.apm-xml-procs.apm_generate_package_spec.parameter_info {
      
	select parameter_name, 
               description, 
               datatype, 
               section_name, 
               default_value, 
               min_n_values, 
               max_n_values
        from   apm_parameters
	where  package_key = :package_key
        order  by parameter_name
    
      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/apm-xml-procs.xql}
dbqd.acs-tcl.tcl.community-core-2-procs.oacs::user::get.select_user {dbqd.acs-tcl.tcl.community-core-2-procs.oacs::user::get.select_user {
select user_id, screen_name, last_visit, second_to_last_visit,
first_names, last_name, email, first_names || ' ' || last_name as full_name
from users, parties, persons
where 
users.user_id = parties.party_id and
users.user_id = persons.person_id and
user_id= :user_id
} {} {} {} c:/web/openacs/packages/acs-tcl/tcl/community-core-2-procs.xql}
dbqd.acs-tcl.tcl.community-core-procs-oracle.ad_user_new.user_insert {dbqd.acs-tcl.tcl.community-core-procs-oracle.ad_user_new.user_insert {
      
	begin
	    :1 := acs.add_user(
                user_id => :user_id,
		email => :email,
		url => :url,
                authority_id => :authority_id,
		username => :username,
		first_names => :first_names,
		last_name => :last_name,
		screen_name => :screen_name,
		password => :hashed_password,
	        salt => :salt,
                creation_user => :creation_user,
	        creation_ip => :peeraddr,
	        email_verified_p => :email_verified_p,
	        member_state => :member_state
            );
	end;
	
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/community-core-procs-oracle.xql}
dbqd.acs-tcl.tcl.community-core-procs-oracle.acs_user::delete.permanent_delete {dbqd.acs-tcl.tcl.community-core-procs-oracle.acs_user::delete.permanent_delete {
          begin
              acs.remove_user(
                  user_id => :user_id
              );
          end;
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/community-core-procs-oracle.xql}
dbqd.acs-tcl.tcl.community-core-procs-oracle.person::delete.delete_person {dbqd.acs-tcl.tcl.community-core-procs-oracle.person::delete.delete_person {

	    select person.del(:person_id) from dual;
	
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/community-core-procs-oracle.xql}
dbqd.acs-tcl.tcl.community-core-procs-oracle.user_search {dbqd.acs-tcl.tcl.community-core-procs-oracle.user_search {
      select distinct u.first_names || ' ' || u.last_name || ' (' || u.email || ')' as name, u.user_id
      from   cc_users u
      where  upper(nvl(u.first_names || ' ', '')  ||
             nvl(u.last_name || ' ', '') ||
             u.email || ' ' ||
             nvl(u.screen_name, '')) like upper('%'||:value||'%')
      order  by name
  } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/community-core-procs-oracle.xql}
dbqd.acs-tcl.tcl.community-core-procs-oracle.acs_user::get_from_user_id_not_cached.select_user_info {dbqd.acs-tcl.tcl.community-core-procs-oracle.acs_user::get_from_user_id_not_cached.select_user_info {

          select user_id, 
                 username,
                 authority_id,
                 first_names, 
                 last_name, 
                 first_names || ' ' || last_name as name,
                 email, 
                 url, 
                 screen_name,
                 priv_name,  
                 priv_email,
                 email_verified_p,
                 email_bouncing_p,
                 no_alerts_until,
                 last_visit,
                 to_char(last_visit, 'YYYY-MM-DD HH24:MI:SS') as last_visit_ansi, 
                 second_to_last_visit,
                 to_char(second_to_last_visit, 'YYYY-MM-DD HH24:MI:SS') as second_to_last_visit_ansi, 
                 n_sessions,
                 password_question,
                 password_answer,
                 password_changed_date,
                 member_state,
                 rel_id, 
                 trunc(sysdate - password_changed_date) as password_age_days,
                 creation_date,
                 creation_ip
          from   cc_users 
          where  user_id = :user_id

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/community-core-procs-oracle.xql}
dbqd.acs-tcl.tcl.community-core-procs-oracle.acs_user::get_from_username_not_cached.select_user_info {dbqd.acs-tcl.tcl.community-core-procs-oracle.acs_user::get_from_username_not_cached.select_user_info {

          select user_id, 
                 username,
                 authority_id,
                 first_names, 
                 last_name, 
                 first_names || ' ' || last_name as name,
                 email, 
                 url, 
                 screen_name,
                 priv_name,  
                 priv_email,
                 email_verified_p,
                 email_bouncing_p,
                 no_alerts_until,
                 last_visit,
                 to_char(last_visit, 'YYYY-MM-DD HH24:MI:SS') as last_visit_ansi, 
                 second_to_last_visit,
                 to_char(second_to_last_visit, 'YYYY-MM-DD HH24:MI:SS') as second_to_last_visit_ansi, 
                 n_sessions,
                 password_question,
                 password_answer,
                 password_changed_date,
                 member_state,
                 rel_id, 
                 trunc(sysdate - password_changed_date) as password_age_days,
                 creation_date,
                 creation_ip
          from   cc_users 
          where  authority_id = :authority_id
          and    upper(username) = upper(:username)

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/community-core-procs-oracle.xql}
dbqd.acs-tcl.tcl.community-core-procs.ad_user_new.user_insert {dbqd.acs-tcl.tcl.community-core-procs.ad_user_new.user_insert {

            select acs__add_user(
                :user_id,
                'user',
                now(),
                null,
                :peeraddr,
                :authority_id,
                :username,
                :email,
                :url,
                :first_names,
                :last_name,
                :hashed_password,
                :salt,
                :screen_name,
                :email_verified_p,
                :member_state
            );
        
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/community-core-procs-postgresql.xql}
dbqd.acs-tcl.tcl.community-core-procs.acs_user::delete.permanent_delete {dbqd.acs-tcl.tcl.community-core-procs.acs_user::delete.permanent_delete {
          select acs__remove_user(:user_id);
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/community-core-procs-postgresql.xql}
dbqd.acs-tcl.tcl.community-core-procs.person::delete.delete_person {dbqd.acs-tcl.tcl.community-core-procs.person::delete.delete_person {

            select person__delete(:person_id);
        
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/community-core-procs-postgresql.xql}
dbqd.acs-tcl.tcl.community-core-procs.user_search {dbqd.acs-tcl.tcl.community-core-procs.user_search {
      select distinct u.first_names || ' ' || u.last_name || ' (' || u.email || ')' as name, u.user_id
      from   cc_users u
      where  upper(coalesce(u.first_names || ' ', '')  ||
             coalesce(u.last_name || ' ', '') ||
             u.email || ' ' ||
             coalesce(u.screen_name, '')) like upper('%'||:value||'%')
      order  by name
  } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/community-core-procs-postgresql.xql}
dbqd.acs-tcl.tcl.community-core-procs.acs_user::get_from_user_id_not_cached.select_user_info {dbqd.acs-tcl.tcl.community-core-procs.acs_user::get_from_user_id_not_cached.select_user_info {

          select user_id, 
                 username,
                 authority_id,
                 first_names, 
                 last_name, 
                 first_names || ' ' || last_name as name,
                 email, 
                 url, 
                 screen_name,
                 priv_name,  
                 priv_email,
                 email_verified_p,
                 email_bouncing_p,
                 no_alerts_until,
                 last_visit,
                 to_char(last_visit, 'YYYY-MM-DD HH24:MI:SS') as last_visit_ansi, 
                 second_to_last_visit,
                 to_char(second_to_last_visit, 'YYYY-MM-DD HH24:MI:SS') as second_to_last_visit_ansi, 
                 n_sessions,
                 password_question,
                 password_answer,
                 password_changed_date,
                 member_state,
                 rel_id, 
                 trunc(date_part('epoch', age(password_changed_date))/(60*60*24)) as password_age_days,
                 creation_date,
                 creation_ip
          from   cc_users 
          where  user_id = :user_id

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/community-core-procs-postgresql.xql}
dbqd.acs-tcl.tcl.community-core-procs.acs_user::get_from_username_not_cached.select_user_info {dbqd.acs-tcl.tcl.community-core-procs.acs_user::get_from_username_not_cached.select_user_info {

          select user_id, 
                 username,
                 authority_id,
                 first_names, 
                 last_name, 
                 first_names || ' ' || last_name as name,
                 email, 
                 url, 
                 screen_name,
                 priv_name,  
                 priv_email,
                 email_verified_p,
                 email_bouncing_p,
                 no_alerts_until,
                 last_visit,
                 to_char(last_visit, 'YYYY-MM-DD HH24:MI:SS') as last_visit_ansi, 
                 second_to_last_visit,
                 to_char(second_to_last_visit, 'YYYY-MM-DD HH24:MI:SS') as second_to_last_visit_ansi, 
                 n_sessions,
                 password_question,
                 password_answer,
                 password_changed_date,
                 member_state,
                 rel_id, 
                 trunc(date_part('epoch', age(password_changed_date))/(60*60*24)) as password_age_days,
                 creation_date,
                 creation_ip
          from   cc_users 
          where  authority_id = :authority_id
          and    upper(username) = upper(:username)

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/community-core-procs-postgresql.xql}
dbqd.acs-tcl.tcl.community-core-procs.cc_lookup_screen_name_user.user_select {dbqd.acs-tcl.tcl.community-core-procs.cc_lookup_screen_name_user.user_select {
      
	select user_id from cc_users where upper(screen_name) = upper(:screen_name)
    
      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/community-core-procs.xql}
dbqd.acs-tcl.tcl.community-core-procs.cc_email_from_party.email_from_party {dbqd.acs-tcl.tcl.community-core-procs.cc_email_from_party.email_from_party {
      
	select email from parties where party_id = :party_id
    
      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/community-core-procs.xql}
dbqd.acs-tcl.tcl.community-core-procs.cc_lookup_name_group.group_select {dbqd.acs-tcl.tcl.community-core-procs.cc_lookup_name_group.group_select {
      
	select group_id from groups where group_name = :name
    
      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/community-core-procs.xql}
dbqd.acs-tcl.tcl.community-core-procs.person::get.get_person {dbqd.acs-tcl.tcl.community-core-procs.person::get.get_person {
      
	select first_names, last_name
          from persons 
         where person_id = :person_id
    
      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/community-core-procs.xql}
dbqd.acs-tcl.tcl.community-core-procs.person::update.update_person {dbqd.acs-tcl.tcl.community-core-procs.person::update.update_person {
      
	update persons
           set first_names = :first_names, 
               last_name = :last_name
         where person_id = :person_id
    
      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/community-core-procs.xql}
dbqd.acs-tcl.tcl.community-core-procs.person::name_not_cached.get_person_name {dbqd.acs-tcl.tcl.community-core-procs.person::name_not_cached.get_person_name {
      
          select first_names||' '||last_name as person_name
            from persons
           where person_id = :person_id
          
      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/community-core-procs.xql}
dbqd.acs-tcl.tcl.community-core-procs.person::get_bio.select_bio {dbqd.acs-tcl.tcl.community-core-procs.person::get_bio.select_bio {
          select attr_value as bio
          from acs_attribute_values
          where object_id = :person_id
          and attribute_id =
             (select attribute_id
              from acs_attributes
              where object_type = 'person'
              and attribute_name = 'bio')
      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/community-core-procs.xql}
dbqd.acs-tcl.tcl.community-core-procs.person::update_bio.insert_bio {dbqd.acs-tcl.tcl.community-core-procs.person::update_bio.insert_bio {
        insert into acs_attribute_values
	(object_id, attribute_id, attr_value)
	values 
	(:person_id, (select attribute_id
          from acs_attributes
          where object_type = 'person'
          and attribute_name = 'bio'), :bio)
      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/community-core-procs.xql}
dbqd.acs-tcl.tcl.community-core-procs.person::update_bio.update_bio {dbqd.acs-tcl.tcl.community-core-procs.person::update_bio.update_bio {
        update acs_attribute_values
	set attr_value = :bio
	where object_id = :person_id
	and attribute_id =
          (select attribute_id
          from acs_attributes
          where object_type = 'person'
          and attribute_name = 'bio')
      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/community-core-procs.xql}
dbqd.acs-tcl.tcl.community-core-procs.acs_user::update.user_update {dbqd.acs-tcl.tcl.community-core-procs.acs_user::update.user_update {
      
	update users
        set    [join $cols ", "]
        where  user_id = :user_id
    
      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/community-core-procs.xql}
dbqd.acs-tcl.tcl.community-core-procs.acs_user::get_by_username.user_id_from_username {dbqd.acs-tcl.tcl.community-core-procs.acs_user::get_by_username.user_id_from_username {

            select user_id
            from   users
            where  upper(username) = upper(:username)
            and    authority_id =:authority_id

      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/community-core-procs.xql}
dbqd.acs-tcl.tcl.community-core-procs.party::update.party_update {dbqd.acs-tcl.tcl.community-core-procs.party::update.party_update {
      
	update parties
        set    [join $cols ", "]
        where  party_id = :party_id

      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/community-core-procs.xql}
dbqd.acs-tcl.tcl.community-core-procs.party::get_by_email.select_party_id {dbqd.acs-tcl.tcl.community-core-procs.party::get_by_email.select_party_id {
      
        select party_id 
        from   parties 
        where  lower(email) = lower(:email)

      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/community-core-procs.xql}
dbqd.acs-tcl.tcl.defs-procs-oracle.ad_record_query_string.query_string_record {dbqd.acs-tcl.tcl.defs-procs-oracle.ad_record_query_string.query_string_record {
            insert
            into query_strings 
            (query_date, query_string, subsection, n_results, user_id)
            values
            (sysdate, :query_string, :subsection, :n_results, :user_id)
        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/defs-procs-oracle.xql}
dbqd.acs-tcl.tcl.defs-procs.ad_record_query_string.query_string_record {dbqd.acs-tcl.tcl.defs-procs.ad_record_query_string.query_string_record {
            insert
            into query_strings 
            (query_date, query_string, subsection, n_results, user_id)
            values
            (now(), :query_string, :subsection, :n_results, :user_id)
        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/defs-procs-postgresql.xql}
dbqd.acs-tcl.tcl.defs-procs.ad_pretty_mailing_address_from_args.user_name_select {dbqd.acs-tcl.tcl.defs-procs.ad_pretty_mailing_address_from_args.user_name_select {
      select first_names, last_name, email
      from persons, parties
      where person_id = :user_id
      and person_id = party_id
    } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/defs-procs.xql}
dbqd.acs-tcl.tcl.defs-procs.ad_parameter_cache.select_parameter_value {dbqd.acs-tcl.tcl.defs-procs.ad_parameter_cache.select_parameter_value {
      select apm_parameter_values.attr_value
      from apm_parameters, apm_parameter_values
      where apm_parameter_values.package_id = :package_id
      and apm_parameter_values.parameter_id = apm_parameters.parameter_id
      and apm_parameters.parameter_name = :parameter_name
    } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/defs-procs.xql}
dbqd.acs-tcl.tcl.defs-procs.ad_parameter_cache_all.parameters_get_all {dbqd.acs-tcl.tcl.defs-procs.ad_parameter_cache_all.parameters_get_all {
      select v.package_id, p.parameter_name, v.attr_value
      from apm_parameters p, apm_parameter_values v
      where p.parameter_id = v.parameter_id
    } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/defs-procs.xql}
dbqd.acs-tcl.tcl.deprecated-utilities-procs.nmc_GetNewIDNumber.id_number_update {dbqd.acs-tcl.tcl.deprecated-utilities-procs.nmc_GetNewIDNumber.id_number_update {
      update id_numbers set :id_name = :id_name + 1
      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/deprecated-utilities-procs.xql}
dbqd.acs-tcl.tcl.deprecated-utilities-procs.nmc_GetNewIDNumber.nmc_getnewidnumber {dbqd.acs-tcl.tcl.deprecated-utilities-procs.nmc_GetNewIDNumber.nmc_getnewidnumber {
      select unique :id_name from id_numbers
      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/deprecated-utilities-procs.xql}
dbqd.acs-tcl.tcl.membership-rel-procs-oracle.membership_rel::change_state.approve {dbqd.acs-tcl.tcl.membership-rel-procs-oracle.membership_rel::change_state.approve {
            begin membership_rel.approve(rel_id => :rel_id); end;
        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/membership-rel-procs-oracle.xql}
dbqd.acs-tcl.tcl.membership-rel-procs-oracle.membership_rel::change_state.ban {dbqd.acs-tcl.tcl.membership-rel-procs-oracle.membership_rel::change_state.ban {
            begin membership_rel.ban(rel_id => :rel_id); end;
        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/membership-rel-procs-oracle.xql}
dbqd.acs-tcl.tcl.membership-rel-procs-oracle.membership_rel::change_state.delete {dbqd.acs-tcl.tcl.membership-rel-procs-oracle.membership_rel::change_state.delete {
            begin membership_rel.deleted(rel_id => :rel_id); end;
        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/membership-rel-procs-oracle.xql}
dbqd.acs-tcl.tcl.membership-rel-procs-oracle.membership_rel::change_state.reject {dbqd.acs-tcl.tcl.membership-rel-procs-oracle.membership_rel::change_state.reject {
            begin membership_rel.reject(rel_id => :rel_id); end;
        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/membership-rel-procs-oracle.xql}
dbqd.acs-tcl.tcl.membership-rel-procs-oracle.membership_rel::change_state.unapprove {dbqd.acs-tcl.tcl.membership-rel-procs-oracle.membership_rel::change_state.unapprove {
            begin membership_rel.unapprove(rel_id => :rel_id); end;
        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/membership-rel-procs-oracle.xql}
dbqd.acs-tcl.tcl.membership-rel-procs.membership_rel::change_state.approve {dbqd.acs-tcl.tcl.membership-rel-procs.membership_rel::change_state.approve {
            begin return membership_rel__approve(:rel_id); end;
        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/membership-rel-procs-postgresql.xql}
dbqd.acs-tcl.tcl.membership-rel-procs.membership_rel::change_state.ban {dbqd.acs-tcl.tcl.membership-rel-procs.membership_rel::change_state.ban {
            begin return membership_rel__ban(:rel_id); end;
        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/membership-rel-procs-postgresql.xql}
dbqd.acs-tcl.tcl.membership-rel-procs.membership_rel::change_state.delete {dbqd.acs-tcl.tcl.membership-rel-procs.membership_rel::change_state.delete {
            begin return membership_rel__deleted(:rel_id); end;
        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/membership-rel-procs-postgresql.xql}
dbqd.acs-tcl.tcl.membership-rel-procs.membership_rel::change_state.reject {dbqd.acs-tcl.tcl.membership-rel-procs.membership_rel::change_state.reject {
            begin return membership_rel__reject(:rel_id); end;
        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/membership-rel-procs-postgresql.xql}
dbqd.acs-tcl.tcl.membership-rel-procs.membership_rel::change_state.unapprove {dbqd.acs-tcl.tcl.membership-rel-procs.membership_rel::change_state.unapprove {
            begin return membership_rel__unapprove(:rel_id); end;
        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/membership-rel-procs-postgresql.xql}
dbqd.acs-tcl.tcl.membership-rel-procs.membership_rel::change_state.update_modifying_user {dbqd.acs-tcl.tcl.membership-rel-procs.membership_rel::change_state.update_modifying_user {
      
          update acs_objects set modifying_user = :user_id where object_id = :rel_id 
    
      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/membership-rel-procs.xql}
dbqd.acs-tcl.tcl.object-procs-oracle.acs_object_name.object_name_get {dbqd.acs-tcl.tcl.object-procs-oracle.acs_object_name.object_name_get {
      
	select acs_object.name(:object_id) from dual
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/object-procs-oracle.xql}
dbqd.acs-tcl.tcl.object-procs-oracle.acs_object::get.select_object {dbqd.acs-tcl.tcl.object-procs-oracle.acs_object::get.select_object {

        select o.object_id,
               o.object_type,
               o.context_id,
               o.security_inherit_p,
               o.creation_user,
               to_char(o.creation_date, 'YYYY-MM-DD HH24:MI:SS') as creation_date_ansi,
               o.creation_ip,
               to_char(o.last_modified, 'YYYY-MM-DD HH24:MI:SS') as last_modified_ansi,
               o.modifying_user,
               o.modifying_ip,
               o.tree_sortkey,
               acs_object.name(o.object_id)
        from   acs_objects o
        where  o.object_id = :object_id
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/object-procs-oracle.xql}
dbqd.acs-tcl.tcl.object-procs.acs_object_name.object_name_get {dbqd.acs-tcl.tcl.object-procs.acs_object_name.object_name_get {

        select acs_object__name(:object_id);
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/object-procs-postgresql.xql}
dbqd.acs-tcl.tcl.object-procs.acs_object::get.select_object {dbqd.acs-tcl.tcl.object-procs.acs_object::get.select_object {

        select o.object_id,
               o.object_type,
               o.context_id,
               o.security_inherit_p,
               o.creation_user,
               to_char(o.creation_date, 'YYYY-MM-DD HH24:MI:SS') as creation_date_ansi,
               o.creation_ip,
               to_char(o.last_modified, 'YYYY-MM-DD HH24:MI:SS') as last_modified_ansi,
               o.modifying_user,
               o.modifying_ip,
               o.tree_sortkey,
               acs_object__name(o.object_id)
        from   acs_objects o
        where  o.object_id = :object_id
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/object-procs-postgresql.xql}
dbqd.acs-tcl.tcl.object-procs.acs_lookup_magic_object.magic_object_select {dbqd.acs-tcl.tcl.object-procs.acs_lookup_magic_object.magic_object_select {
      
	select object_id from acs_magic_objects where name = :name
    
      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/object-procs.xql}
dbqd.acs-tcl.tcl.object-procs.acs_object_type.object_type_select {dbqd.acs-tcl.tcl.object-procs.acs_object_type.object_type_select {
      
        select object_type
        from acs_objects
        where object_id = :object_id
    
      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/object-procs.xql}
dbqd.acs-tcl.tcl.object-type-procs-oracle.acs_object_type_hierarchy.object_type_not_null {dbqd.acs-tcl.tcl.object-type-procs-oracle.acs_object_type_hierarchy.object_type_not_null {

	select object_type,
	       pretty_name,
               '' as indent
	  from acs_object_types
	 start with object_type = :object_type
       connect by prior supertype = object_type
         order by level desc

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/object-type-procs-oracle.xql}
dbqd.acs-tcl.tcl.object-type-procs-oracle.acs_object_type_hierarchy.object_type_is_null {dbqd.acs-tcl.tcl.object-type-procs-oracle.acs_object_type_hierarchy.object_type_is_null {

	select object_type,
	       pretty_name,
	       replace(lpad(' ', (level - 1) * $indent_width), ' ', '$indent_string') as indent
	  from acs_object_types
         start with supertype is null
       connect by supertype = prior object_type

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/object-type-procs-oracle.xql}
dbqd.acs-tcl.tcl.object-type-procs.acs_object_type_hierarchy.object_type_not_null {dbqd.acs-tcl.tcl.object-type-procs.acs_object_type_hierarchy.object_type_not_null {

	select o2.object_type,
	       o2.pretty_name,
               '' as indent,
               tree_level(o2.tree_sortkey) as level
	  from (select * 
                  from acs_object_types 
                 where object_type = :object_type) o1, 
               acs_object_types o2
         where o2.tree_sortkey <= o1.tree_sortkey
           and o1.tree_sortkey between o2.tree_sortkey and tree_right(o2.tree_sortkey)
         order by level desc

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/object-type-procs-postgresql.xql}
dbqd.acs-tcl.tcl.object-type-procs.acs_object_type_hierarchy.object_type_is_null {dbqd.acs-tcl.tcl.object-type-procs.acs_object_type_hierarchy.object_type_is_null {

	select object_type,
	       pretty_name,
               repeat('$indent_string',(tree_level(tree_sortkey) - 1) * $indent_width) as indent
	  from acs_object_types
	 order by tree_sortkey

      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/object-type-procs-postgresql.xql}
dbqd.acs-tcl.tcl.object-type-procs.acs_object_type_hierarchy.object_types {dbqd.acs-tcl.tcl.object-type-procs.acs_object_type_hierarchy.object_types {
        $sql
      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/object-type-procs.xql}
dbqd.acs-tcl.tcl.parameter-procs-oracle.parameter::set_value.set_parameter_value {dbqd.acs-tcl.tcl.parameter-procs-oracle.parameter::set_value.set_parameter_value {
            begin
                apm.set_value(
                    package_id => :package_id,
                    parameter_name => :parameter,
                    attr_value => :value
                );
            end;
        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/parameter-procs-oracle.xql}
dbqd.acs-tcl.tcl.parameter-procs.parameter::set_value.set_parameter_value {dbqd.acs-tcl.tcl.parameter-procs.parameter::set_value.set_parameter_value {
            select apm__set_value(
                :package_id,
                :parameter,
                :value
            );
        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/parameter-procs-postgresql.xql}
dbqd.acs-tcl.tcl.request-processor-init.ad_acs_admin_id_mem.acs_kernel_id_get {dbqd.acs-tcl.tcl.request-processor-init.ad_acs_admin_id_mem.acs_kernel_id_get {
      
	select package_id from apm_packages
	where package_key = 'acs-admin'
    
      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/request-processor-init.xql}
dbqd.acs-tcl.tcl.request-processor-init.ad_acs_admin_id_mem.acs_kernel_id_get {dbqd.acs-tcl.tcl.request-processor-init.ad_acs_admin_id_mem.acs_kernel_id_get {
      
	select package_id from apm_packages
	where package_key = 'acs-admin'
    
      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/request-processor-init.xql}
dbqd.acs-tcl.tcl.request-processor-procs-oracle.root_of_host.root_get {dbqd.acs-tcl.tcl.request-processor-procs-oracle.root_of_host.root_get {
      
	select site_node.url(:node_id) as url
	from dual

      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/request-processor-procs-oracle.xql}
dbqd.acs-tcl.tcl.request-processor-procs.root_of_host.root_get {dbqd.acs-tcl.tcl.request-processor-procs.root_of_host.root_get {
      
	select site_node__url(:node_id) as url
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/request-processor-procs-postgresql.xql}
dbqd.acs-tcl.tcl.request-processor-procs.ad_acs_kernel_id_mem.acs_kernel_id_get {dbqd.acs-tcl.tcl.request-processor-procs.ad_acs_kernel_id_mem.acs_kernel_id_get {
      
	select package_id from apm_packages
	where package_key = 'acs-kernel'
    
      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/request-processor-procs.xql}
dbqd.acs-tcl.tcl.request-processor-procs.ad_acs_admin_id.acs_admin_id_get {dbqd.acs-tcl.tcl.request-processor-procs.ad_acs_admin_id.acs_admin_id_get {
      
        select package_id from apm_packages
        where package_key = 'acs-admin'
    
      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/request-processor-procs.xql}
dbqd.acs-tcl.tcl.request-processor-procs.rp_lookup_node_from_host.node_id {dbqd.acs-tcl.tcl.request-processor-procs.rp_lookup_node_from_host.node_id {

        select node_id 
	from host_node_map
	where host = :host

      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/request-processor-procs.xql}
dbqd.acs-tcl.tcl.security-init.secret_tokens_exists {dbqd.acs-tcl.tcl.security-init.secret_tokens_exists {

      select case when count(*) = 0 then 0 else 1 end from secret_tokens

      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/security-init.xql}
dbqd.acs-tcl.tcl.security-procs-oracle.sec_update_user_session_info.update_last_visit {dbqd.acs-tcl.tcl.security-procs-oracle.sec_update_user_session_info.update_last_visit {
      
        update users
        set second_to_last_visit = last_visit,
            last_visit = sysdate,
            n_sessions = n_sessions + 1
        where user_id = :user_id
    
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/security-procs-oracle.xql}
dbqd.acs-tcl.tcl.security-procs-oracle.ad_maybe_redirect_for_registration.sql_test_1 {dbqd.acs-tcl.tcl.security-procs-oracle.ad_maybe_redirect_for_registration.sql_test_1 {
      select test_sql('select 1 from dual where 1=[DoubleApos $value]') from dual
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/security-procs-oracle.xql}
dbqd.acs-tcl.tcl.security-procs-oracle.ad_maybe_redirect_for_registration.sql_test_2 {dbqd.acs-tcl.tcl.security-procs-oracle.ad_maybe_redirect_for_registration.sql_test_2 {
      select test_sql('select 1 from dual where 1=[DoubleApos "'$value'"]') from dual
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/security-procs-oracle.xql}
dbqd.acs-tcl.tcl.security-procs-oracle.populate_secret_tokens_db.insert_random_token {dbqd.acs-tcl.tcl.security-procs-oracle.populate_secret_tokens_db.insert_random_token {
      
	    insert /*+ APPEND */ into secret_tokens(token_id, token, token_timestamp)
	    values(sec_security_token_id_seq.nextval, :random_token, sysdate)
	
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/security-procs-oracle.xql}
dbqd.acs-tcl.tcl.security-procs-oracle.populate_secret_tokens_cache.get_secret_tokens {dbqd.acs-tcl.tcl.security-procs-oracle.populate_secret_tokens_cache.get_secret_tokens {
      
	    select * from (
	    select token_id, token
	    from secret_tokens
	    sample(15)
	    ) where rownum < :num_tokens
	
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/security-procs-oracle.xql}
dbqd.acs-tcl.tcl.security-procs-oracle.ad_set_client_property.prop_update_dml_clob {dbqd.acs-tcl.tcl.security-procs-oracle.ad_set_client_property.prop_update_dml_clob {
         update sec_session_properties
         set property_value = null,
           property_clob = empty_clob(),
           secure_p = :secure,
           last_hit = :last_hit 
         where session_id = :session_id and
           module = :module and
           property_name = :name
         returning property_clob into :1
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/security-procs-oracle.xql}
dbqd.acs-tcl.tcl.security-procs-oracle.ad_set_client_property.prop_update_dml {dbqd.acs-tcl.tcl.security-procs-oracle.ad_set_client_property.prop_update_dml {
         update sec_session_properties
         set property_value = :value,
           property_clob = null,
           secure_p = :secure,
           last_hit = :last_hit 
         where session_id = :session_id and
           module = :module and
           property_name = :name
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/security-procs-oracle.xql}
dbqd.acs-tcl.tcl.security-procs-oracle.ad_change_password.password_update {dbqd.acs-tcl.tcl.security-procs-oracle.ad_change_password.password_update {
        update users 
        set    password = :new_password, 
               salt = :salt,
               password_changed_date = sysdate
        where  user_id = :user_id
      } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/security-procs-oracle.xql}
dbqd.acs-tcl.tcl.security-procs.ad_set_client_property.prop_update_dml {dbqd.acs-tcl.tcl.security-procs.ad_set_client_property.prop_update_dml {
        update sec_session_properties
        set property_value = :value,
          secure_p = :secure,
          last_hit = :last_hit 
        where session_id = :session_id and
          module = :module and
          property_name = :name
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/security-procs-postgresql.xql}
dbqd.acs-tcl.tcl.security-procs.sec_update_user_session_info.update_last_visit {dbqd.acs-tcl.tcl.security-procs.sec_update_user_session_info.update_last_visit {

        update users
        set second_to_last_visit = last_visit,
            last_visit = now(),
            n_sessions = n_sessions + 1
        where user_id = :user_id
    
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/security-procs-postgresql.xql}
dbqd.acs-tcl.tcl.security-procs.ad_maybe_redirect_for_registration.sql_test_1 {dbqd.acs-tcl.tcl.security-procs.ad_maybe_redirect_for_registration.sql_test_1 {
      select test_sql('select 1  where 1=[DoubleApos $value]') 
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/security-procs-postgresql.xql}
dbqd.acs-tcl.tcl.security-procs.ad_maybe_redirect_for_registration.sql_test_2 {dbqd.acs-tcl.tcl.security-procs.ad_maybe_redirect_for_registration.sql_test_2 {
      select test_sql('select 1  where 1=[DoubleApos "'$value'"]') 
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/security-procs-postgresql.xql}
dbqd.acs-tcl.tcl.security-procs.populate_secret_tokens_db.insert_random_token {dbqd.acs-tcl.tcl.security-procs.populate_secret_tokens_db.insert_random_token {

	    insert into secret_tokens(token_id, token, token_timestamp)
	    values(sec_security_token_id_seq.nextval, :random_token, now())
	
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/security-procs-postgresql.xql}
dbqd.acs-tcl.tcl.security-procs.populate_secret_tokens_cache.get_secret_tokens {dbqd.acs-tcl.tcl.security-procs.populate_secret_tokens_cache.get_secret_tokens {
      
    select token_id, token
    from secret_tokens,
         (select trunc(random()*(select count(*)-15 from secret_tokens))::integer as first) r
    where token_id >= r.first and r.first+15 > token_id;
	
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/security-procs-postgresql.xql}
dbqd.acs-tcl.tcl.security-procs.ad_change_password.password_update {dbqd.acs-tcl.tcl.security-procs.ad_change_password.password_update {
        update users 
        set    password = :new_password, 
               salt = :salt,
               password_changed_date = current_timestamp
        where  user_id = :user_id
      } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/security-procs-postgresql.xql}
dbqd.acs-tcl.tcl.security-procs.sec_sweep_sessions.sessions_sweep {dbqd.acs-tcl.tcl.security-procs.sec_sweep_sessions.sessions_sweep {
      
	delete from sec_session_properties
	where last_hit < :expires
    
      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/security-procs.xql}
dbqd.acs-tcl.tcl.security-procs.ad_check_password.password_select {dbqd.acs-tcl.tcl.security-procs.ad_check_password.password_select {
      select password, salt from users where user_id = :user_id
      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/security-procs.xql}
dbqd.acs-tcl.tcl.security-procs.sec_lookup_property.property_lookup_sec {dbqd.acs-tcl.tcl.security-procs.sec_lookup_property.property_lookup_sec {
      
	    select property_value, secure_p
	    from sec_session_properties
	    where session_id = :id
	    and module = :module
	    and property_name = :name
	
      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/security-procs.xql}
dbqd.acs-tcl.tcl.security-procs.sec_get_token.get_token {dbqd.acs-tcl.tcl.security-procs.sec_get_token.get_token {
      select token from secret_tokens
                       	                 where token_id = :token_id
      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/security-procs.xql}
dbqd.acs-tcl.tcl.security-procs.ad_set_client_property.prop_insert_dml {dbqd.acs-tcl.tcl.security-procs.ad_set_client_property.prop_insert_dml {
	insert into sec_session_properties
	  (session_id, module, property_name, secure_p, last_hit)
	select :session_id, :module, :name, :secure, :last_hit
        from dual
        where not exists (select 1
                          from sec_session_properties
                          where session_id = :session_id and
                          module = :module and
                          property_name = :name)
      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/security-procs.xql}
dbqd.acs-tcl.tcl.security-procs.sec_lookup_property.update_last_hit_dml {dbqd.acs-tcl.tcl.security-procs.sec_lookup_property.update_last_hit_dml {
	update sec_session_properties
	   set last_hit = :new_last_hit
	 where session_id = :id and
               property_name = :name
      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/security-procs.xql}
dbqd.acs-tcl.tcl.site-node-apm-integration-procs.site_node_apm_integration::get_child_package_id.select_child_package_id {dbqd.acs-tcl.tcl.site-node-apm-integration-procs.site_node_apm_integration::get_child_package_id.select_child_package_id {
            select sn1.object_id
            from site_nodes sn1,
                 apm_packages
            where sn1.parent_id = (select sn2.node_id
                                   from site_nodes sn2
                                   where sn2.object_id = :package_id)
            and sn1.object_id = apm_packages.package_id
            and apm_packages.package_key = :package_key
        } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/site-node-apm-integration-procs.xql}
dbqd.acs-tcl.tcl.site-node-object-map-procs-oracle.site_node_object_map::new.set_node_mapping {dbqd.acs-tcl.tcl.site-node-object-map-procs-oracle.site_node_object_map::new.set_node_mapping {
            declare
            begin
                site_node_object_map.new(object_id => :object_id, node_id => :node_id);
            end;
        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/site-node-object-map-procs-oracle.xql}
dbqd.acs-tcl.tcl.site-node-object-map-procs-oracle.site_node_object_map::del.unset_node_mapping {dbqd.acs-tcl.tcl.site-node-object-map-procs-oracle.site_node_object_map::del.unset_node_mapping {
            declare
            begin
                site_node_object_map.del(object_id => :object_id);
            end;
        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/site-node-object-map-procs-oracle.xql}
dbqd.acs-tcl.tcl.site-node-object-map-procs.site_node_object_map::new.set_node_mapping {dbqd.acs-tcl.tcl.site-node-object-map-procs.site_node_object_map::new.set_node_mapping {
            select site_node_object_map__new(:object_id, :node_id)
        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/site-node-object-map-procs-postgresql.xql}
dbqd.acs-tcl.tcl.site-node-object-map-procs.site_node_object_map::del.unset_node_mapping {dbqd.acs-tcl.tcl.site-node-object-map-procs.site_node_object_map::del.unset_node_mapping {
            select site_node_object_map__del(:object_id)
        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/site-node-object-map-procs-postgresql.xql}
dbqd.acs-tcl.tcl.site-node-object-map-procs.site_node_object_map::get_node_id.select_node_mapping {dbqd.acs-tcl.tcl.site-node-object-map-procs.site_node_object_map::get_node_id.select_node_mapping {
            select node_id
            from site_node_object_mappings
            where object_id = :object_id
        } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/site-node-object-map-procs.xql}
dbqd.acs-tcl.tcl.site-nodes-procs-oracle.site_node::delete.delete_site_node {dbqd.acs-tcl.tcl.site-nodes-procs-oracle.site_node::delete.delete_site_node {
            begin site_node.del(:node_id); end;
        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/site-nodes-procs-oracle.xql}
dbqd.acs-tcl.tcl.site-nodes-procs-oracle.site_node::init_cache.select_site_nodes {dbqd.acs-tcl.tcl.site-nodes-procs-oracle.site_node::init_cache.select_site_nodes {
            select site_node.url(site_nodes.node_id) as url,
                   site_nodes.node_id,
                   site_nodes.parent_id,
                   site_nodes.name,
                   site_nodes.directory_p,
                   site_nodes.pattern_p,
                   site_nodes.object_id,
                   (select acs_objects.object_type
                    from acs_objects
                    where acs_objects.object_id = site_nodes.object_id) as object_type,
                   apm_packages.package_key,
                   apm_packages.package_id,
                   apm_packages.instance_name,
                   apm_package_types.package_type
            from site_nodes,
                 apm_packages,
                 apm_package_types
            where site_nodes.object_id = apm_packages.package_id(+)
            and apm_package_types.package_key (+) = apm_packages.package_key
        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/site-nodes-procs-oracle.xql}
dbqd.acs-tcl.tcl.site-nodes-procs-oracle.site_node::update_cache.select_site_node {dbqd.acs-tcl.tcl.site-nodes-procs-oracle.site_node::update_cache.select_site_node {
            select site_node.url(site_nodes.node_id) as url,
                   site_nodes.node_id,
                   site_nodes.parent_id,
                   site_nodes.name,
                   site_nodes.directory_p,
                   site_nodes.pattern_p,
                   site_nodes.object_id,
                   (select acs_objects.object_type
                    from acs_objects
                    where acs_objects.object_id = site_nodes.object_id) as object_type,
                   apm_packages.package_key,
                   apm_packages.package_id,
                   apm_packages.instance_name,
                   apm_package_types.package_type
            from site_nodes,
                 apm_packages,
                 apm_package_types
            where site_nodes.node_id = :node_id
            and site_nodes.object_id = apm_packages.package_id (+)
            and apm_package_types.package_key (+) = apm_packages.package_key
        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/site-nodes-procs-oracle.xql}
dbqd.acs-tcl.tcl.site-nodes-procs-oracle.site_node::get_url_from_object_id.select_url_from_object_id {dbqd.acs-tcl.tcl.site-nodes-procs-oracle.site_node::get_url_from_object_id.select_url_from_object_id {
            select site_node.url(node_id)
            from site_nodes
            where object_id = :object_id
            order by site_node.url(node_id) desc
        } {} {} {oracle 8.1.6} c:/web/openacs/packages/acs-tcl/tcl/site-nodes-procs-oracle.xql}
dbqd.acs-tcl.tcl.site-nodes-procs.site_node::delete.delete_site_node {dbqd.acs-tcl.tcl.site-nodes-procs.site_node::delete.delete_site_node {
            select site_node__delete(:node_id);
        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/site-nodes-procs-postgresql.xql}
dbqd.acs-tcl.tcl.site-nodes-procs.site_node::init_cache.select_site_nodes {dbqd.acs-tcl.tcl.site-nodes-procs.site_node::init_cache.select_site_nodes {
            select site_node__url(site_nodes.node_id) as url,
                   site_nodes.node_id,
                   site_nodes.parent_id,
                   site_nodes.name,
                   site_nodes.directory_p,
                   site_nodes.pattern_p,
                   site_nodes.object_id,
                   (select acs_objects.object_type
                    from acs_objects
                    where acs_objects.object_id = site_nodes.object_id) as object_type,
                   apm_packages.package_key,
                   apm_packages.package_id,
                   apm_packages.instance_name,
                   apm_package_types.package_type
            from site_nodes left join 
                 apm_packages on site_nodes.object_id = apm_packages.package_id left join
                 apm_package_types using (package_key)
        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/site-nodes-procs-postgresql.xql}
dbqd.acs-tcl.tcl.site-nodes-procs.site_node::update_cache.select_site_node {dbqd.acs-tcl.tcl.site-nodes-procs.site_node::update_cache.select_site_node {
            select site_node__url(site_nodes.node_id) as url,
                   site_nodes.node_id,
                   site_nodes.parent_id,
                   site_nodes.name,
                   site_nodes.directory_p,
                   site_nodes.pattern_p,
                   site_nodes.object_id,
                   (select acs_objects.object_type
                    from acs_objects
                    where acs_objects.object_id = site_nodes.object_id) as object_type,
                   apm_packages.package_key,
                   apm_packages.package_id,
                   apm_packages.instance_name,
                   apm_package_types.package_type
            from site_nodes left join 
                 apm_packages on site_nodes.object_id = apm_packages.package_id left join
                 apm_package_types using (package_key)
            where site_nodes.node_id = :node_id
        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/site-nodes-procs-postgresql.xql}
dbqd.acs-tcl.tcl.site-nodes-procs.site_node::get_url_from_object_id.select_url_from_object_id {dbqd.acs-tcl.tcl.site-nodes-procs.site_node::get_url_from_object_id.select_url_from_object_id {
            select site_node__url(node_id)
            from site_nodes
            where object_id = :object_id
            order by site_node__url(node_id) desc
        } {} {} {postgresql 7.1} c:/web/openacs/packages/acs-tcl/tcl/site-nodes-procs-postgresql.xql}
dbqd.acs-tcl.tcl.site-nodes-procs.site_node::mount.mount_object {dbqd.acs-tcl.tcl.site-nodes-procs.site_node::mount.mount_object {
            update site_nodes
            set object_id = :object_id
            where node_id = :node_id
        } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/site-nodes-procs.xql}
dbqd.acs-tcl.tcl.site-nodes-procs.site_node::rename.rename_node {dbqd.acs-tcl.tcl.site-nodes-procs.site_node::rename.rename_node {
            update site_nodes
            set    name = :name
            where  node_id = :node_id
        } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/site-nodes-procs.xql}
dbqd.acs-tcl.tcl.site-nodes-procs.site_node::unmount.unmount_object {dbqd.acs-tcl.tcl.site-nodes-procs.site_node::unmount.unmount_object {
            update site_nodes
            set object_id = null
            where node_id = :node_id
        } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/site-nodes-procs.xql}
dbqd.acs-tcl.tcl.user-extensions-procs.acs_user_extension::list_extensions.select_extensions {dbqd.acs-tcl.tcl.user-extensions-procs.acs_user_extension::list_extensions.select_extensions {
  select 
         impl_name from acs_sc_impls, acs_sc_bindings, acs_sc_contracts
   where
         acs_sc_impls.impl_id = acs_sc_bindings.impl_id 
     and
         acs_sc_contracts.contract_id = acs_sc_bindings.contract_id 
     and 
         acs_sc_contracts.contract_name = 'UserData'
} {} {} {} c:/web/openacs/packages/acs-tcl/tcl/user-extensions-procs.xql}
dbqd.acs-tcl.tcl.utilities-procs.ad_dbclick_check_dml.double_click_check {dbqd.acs-tcl.tcl.utilities-procs.ad_dbclick_check_dml.double_click_check {
      
		
		select 1 as one
		from $table_name
		where $id_column_name = :generated_id
		
	    
      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/utilities-procs.xql}
dbqd.acs-tcl.tcl.utilities-procs.validate_zip_code.zip_code_exists {dbqd.acs-tcl.tcl.utilities-procs.validate_zip_code.zip_code_exists {
		    select 1
		      from dual
		     where exists (select 1
				     from zip_codes
				    where zip_code like :zip_5)
      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/utilities-procs.xql}
dbqd.acs-tcl.tcl.utilities-procs.util_email_unique_p.email_unique_p {dbqd.acs-tcl.tcl.utilities-procs.util_email_unique_p.email_unique_p {
    select count(*)
    from dual
    where not exists (select 1
                      from parties
                      where email = lower(:email))
  } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/utilities-procs.xql}
dbqd.acs-tcl.tcl.widgets-procs.all_states {dbqd.acs-tcl.tcl.widgets-procs.all_states {
      
	select state_name, abbrev from states order by state_name
    
      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/widgets-procs.xql}
dbqd.acs-tcl.tcl.widgets-procs.all_countries {dbqd.acs-tcl.tcl.widgets-procs.all_countries {
      
	select default_name, iso from countries order by default_name 
    
      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/widgets-procs.xql}
dbqd.acs-tcl.tcl.widgets-procs.ad_db_select_widget.currency_info {dbqd.acs-tcl.tcl.widgets-procs.ad_db_select_widget.currency_info {
      
	select currency_name, iso 
	from currency_codes 
	where supported_p='t'
	order by currency_name 
    
      } {} {} {} c:/web/openacs/packages/acs-tcl/tcl/widgets-procs.xql}
dbqd.acs-templating.tcl.widget-procs-oracle.template::data::transform::party_search.search_persons {dbqd.acs-templating.tcl.widget-procs-oracle.template::data::transform::party_search.search_persons {
        select (first_names || ' ' || last_name) as name, pe.person_id from persons pe, parties pa 
        where pe.person_id=pa.party_id and (
          lower(pe.first_names || ' ' || pe.last_name) like '%' || lower(:search_string) || '%'
          or lower(pa.email) like '%' || lower(:search_string) || '%'
	)
        order by lower(first_names || ' ' || last_name)
      } {} {} {} c:/web/openacs/packages/acs-templating/tcl/widget-procs-oracle.xql}
dbqd.acs-templating.tcl.widget-procs-oracle.template::data::transform::party_search.search_groups_relsegs {dbqd.acs-templating.tcl.widget-procs-oracle.template::data::transform::party_search.search_groups_relsegs {
        (
        select g1.group_name as party_name, g1.group_id as party_id from groups g1
        where lower(g1.group_name) like '%' || lower(:search_string) || '%'
        )
        union
        (
        select g2.group_name || ' : ' || s2.segment_name as party_name, s2.segment_id as party_id
        from rel_segments s2, groups g2  
        where s2.group_id=g2.group_id and
        lower(g2.group_name || ' : ' || s2.segment_name) like '%' || lower(:search_string) || '%'
        )
        order by party_name
      } {} {} {} c:/web/openacs/packages/acs-templating/tcl/widget-procs-oracle.xql}
dbqd.acs-templating.tcl.widget-procs.template::data::transform::party_search.search_persons {dbqd.acs-templating.tcl.widget-procs.template::data::transform::party_search.search_persons {
        select (first_names || ' ' || last_name) as name, pe.person_id from persons pe 
        join parties pa on pe.person_id=pa.party_id
        where lower(pe.first_names || ' ' || pe.last_name) like '%' || lower(:search_string) || '%'
        or lower(pa.email) like '%' || lower(:search_string) || '%'
        order by lower(first_names || ' ' || last_name)
      } {} {} {} c:/web/openacs/packages/acs-templating/tcl/widget-procs-postgresql.xql}
dbqd.acs-templating.tcl.widget-procs.template::data::transform::party_search.search_groups_relsegs {dbqd.acs-templating.tcl.widget-procs.template::data::transform::party_search.search_groups_relsegs {
        (
        select g1.group_name as party_name, g1.group_id as party_id from groups g1
        where lower(g1.group_name) like '%' || lower(:search_string) || '%'
        )
        union
        (
        select g2.group_name || ' : ' || s2.segment_name as party_name, s2.segment_id as party_id
        from rel_segments s2
        join groups g2 on s2.group_id=g2.group_id
        where lower(g2.group_name || ' : ' || s2.segment_name) like '%' || lower(:search_string) || '%'
        )
        order by party_name
      } {} {} {} c:/web/openacs/packages/acs-templating/tcl/widget-procs-postgresql.xql}
dbqd.acs-templating.www.doc.demo.form.get_user_id {dbqd.acs-templating.www.doc.demo.form.get_user_id {
      select ad_template_sample_users_seq.nextval
    } {} {} {} c:/web/openacs/packages/acs-templating/www/doc/demo/form.xql}
dbqd.acs-templating.www.doc.demo.user-edit.get_users {dbqd.acs-templating.www.doc.demo.user-edit.get_users {
      select user_id, first_name, last_name 
      from ad_template_sample_users 
      where lower(first_name) like '%' || :user_search || '%' 
         or lower(last_name) like '%' || :user_search || '%'
    } {} {} {} c:/web/openacs/packages/acs-templating/www/doc/demo/user-edit.xql}
dbqd.acs-templating.www.doc.demo.user-edit.get_info {dbqd.acs-templating.www.doc.demo.user-edit.get_info {
      select user_id, first_name, last_name, address1, address2, city, state
      from ad_template_sample_users
      where user_id = :user_id
    } {} {} {} c:/web/openacs/packages/acs-templating/www/doc/demo/user-edit.xql}
dbqd.search.tcl.search-procs-oracle.search_indexer.search_observer_dequeue_entry {dbqd.search.tcl.search-procs-oracle.search_indexer.search_observer_dequeue_entry {
            declare
            begin
                search_observer.dequeue(
                    object_id => :object_id,
                    event_date => :date,
                    event => :event
                );
            end;
        } {} {} {oracle 8.1.6} c:/web/openacs/packages/search/tcl/search-procs-oracle.xql}
dbqd.search.tcl.search-procs.search_indexer.search_observer_dequeue_entry {dbqd.search.tcl.search-procs.search_indexer.search_observer_dequeue_entry {
	    select search_observer__dequeue(
	        :object_id,
	        :event_date,
	        :event
	    );
        } {} {} {postgresql 7.1} c:/web/openacs/packages/search/tcl/search-procs-postgresql.xql}
dbqd.search.tcl.search-procs.search_indexer.search_observer_queue_entry {dbqd.search.tcl.search-procs.search_indexer.search_observer_queue_entry {
            select object_id, event_date, event
            from search_observer_queue
            order by event_date asc
        } {} {} {} c:/web/openacs/packages/search/tcl/search-procs.xql}
dbqd.search.tcl.search-procs.search_content_get.get_file_data {dbqd.search.tcl.search-procs.search_content_get.get_file_data {
	    select :content as content,
                   'file' as storage_type
            from dual
        } {} {} {} c:/web/openacs/packages/search/tcl/search-procs.xql}
dbqd.search.tcl.search-procs.search_content_get.get_lob_data {dbqd.search.tcl.search-procs.search_content_get.get_lob_data {
            select :content as content,
                   'lob' as storage_type
            from dual
        } {} {} {} c:/web/openacs/packages/search/tcl/search-procs.xql}
