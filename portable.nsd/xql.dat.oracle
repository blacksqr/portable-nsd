dbqd.acs-admin.tcl.apm-admin-procs.apm_higher_version_installed_p.apm_higher_version_installed_p {dbqd.acs-admin.tcl.apm-admin-procs.apm_higher_version_installed_p.apm_higher_version_installed_p {		select apm_package_version.version_name_greater(:version_name, highest.version_name)
                from (select version_name 
		      from apm_package_versions
                      where version_id = apm_package.highest_version(:package_key)
                     ) highest
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/tcl/apm-admin-procs-oracle.xql}
dbqd.acs-admin.tcl.apm-admin-procs.apm_parameter_section_slider.apm_parameter_sections {dbqd.acs-admin.tcl.apm-admin-procs.apm_parameter_section_slider.apm_parameter_sections {	select distinct(section_name) 
	from apm_parameters
	where package_key = :package_key
    
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/tcl/apm-admin-procs.xql}
dbqd.acs-admin.www.apm.bulk-intall.version_select {dbqd.acs-admin.www.apm.bulk-intall.version_select {	select pretty_name, version_name, package_key
	from apm_package_version_info i
	where version_id = :version_id
    
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/apm/bulk-intall.xql}
dbqd.acs-admin.www.apm.cvs-status.email_by_user_id {dbqd.acs-admin.www.apm.cvs-status.email_by_user_id {      select email from parties where user_id = [ad_get_user_id]
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/apm/cvs-status.xql}
dbqd.acs-admin.www.apm.cvs-status.all_packages_owned_by_email {dbqd.acs-admin.www.apm.cvs-status.all_packages_owned_by_email {    select v.package_key, v.version_id, v.package_name, v.version_name
    from   apm_package_version_info v, apm_package_owners o
    where  o.owner_url = :email
    and    v.version_id = o.version_id
    and    v.installed_p = 't'
    order by upper(package_name)
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/apm/cvs-status.xql}
dbqd.acs-admin.www.apm.cvs-status.apm_file_path {dbqd.acs-admin.www.apm.cvs-status.apm_file_path {	    select path from apm_package_files where version_id = :version_id
	
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/apm/cvs-status.xql}
dbqd.acs-admin.www.apm.file-add-2.apm_file_add_doubleclick_ck {dbqd.acs-admin.www.apm.file-add-2.apm_file_add_doubleclick_ck {	    select count(*) from apm_package_files
	    where version_id = :version_id
	    and path = :index_path
	
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/apm/file-add-2.xql}
dbqd.acs-admin.www.apm.file-add.apm_file_paths {dbqd.acs-admin.www.apm.file-add.apm_file_paths {    select path from apm_package_files where version_id = :version_id

      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/apm/file-add.xql}
dbqd.acs-admin.www.apm.file-remove.apm_get_version_id {dbqd.acs-admin.www.apm.file-remove.apm_get_version_id {select distinct version_id 
from apm_package_files 
where file_id in ([join $file_id ","])
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/apm/file-remove.xql}
dbqd.acs-admin.www.apm.file-remove.apm_delete_files {dbqd.acs-admin.www.apm.file-remove.apm_delete_files {      delete from apm_package_files 
    where file_id in ([join $file_id ","])
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/apm/file-remove.xql}
dbqd.acs-admin.www.apm.file-watch.apm_get_file_to_watch {dbqd.acs-admin.www.apm.file-watch.apm_get_file_to_watch {    select t.package_key,  t.pretty_name, 
           v.version_name, v.package_key, v.installed_p, 
           f.path, f.version_id
    from   apm_package_types t, apm_package_versions v, apm_package_files f
    where  f.file_id = :file_id
    and    f.version_id = v.version_id
    and    v.package_key = t.package_key

      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/apm/file-watch.xql}
dbqd.acs-admin.www.apm.file-watch.apm_get_path_from_file_id {dbqd.acs-admin.www.apm.file-watch.apm_get_path_from_file_id {    select path from apm_package_files where file_id = :file_id

      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/apm/file-watch.xql}
dbqd.acs-admin.www.apm.index.email_by_user_id {dbqd.acs-admin.www.apm.index.email_by_user_id {    select email  from parties where party_id = :user_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/apm/index-oracle.xql}
dbqd.acs-admin.www.apm.index.apm_table {dbqd.acs-admin.www.apm.index.apm_table {        select   v.version_id, v.package_key, t.pretty_name, v.version_name, v.enabled_p,
                 v.installed_p, v.distribution_uri,
            (select count(*) from apm_package_files f where f.version_id = v.version_id) as n_files,
            (select count(*) from apm_package_versions v2
             where v2.package_key = v.package_key
             and   v2.installed_p = 't'
             and   apm_package_version.sortable_version_name(v2.version_name) > apm_package_version.sortable_version_name(v.version_name)) as  superseded_p,
             case
               when content_item.get_latest_revision(item_id) is null
               then 0
               else 1
             end as tarball_p
        from    apm_package_versions v, apm_package_types t
        where  t.package_key = v.package_key
        [ad_dimensional_sql $dimensional_list where and]
        [ad_order_by_from_sort_spec $orderby $table_def]

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/apm/index-oracle.xql}
dbqd.acs-admin.www.apm.index.latest {dbqd.acs-admin.www.apm.index.latest {      (installed_p = 't' or enabled_p = 't' or not exists (
         select 1 from apm_package_versions v2
         where v2.package_key = v.package_key
           and (v2.installed_p = 't' or v2.enabled_p = 't')
           and apm_package_version.sortable_version_name(v2.version_name) > apm_package_version.sortable_version_name(v.version_name)))
   } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/apm/index-oracle.xql}
dbqd.acs-admin.www.apm.index.apm_application {dbqd.acs-admin.www.apm.index.apm_application {      t.package_type = 'apm_application'
   } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/apm/index.xql}
dbqd.acs-admin.www.apm.index.everyone {dbqd.acs-admin.www.apm.index.everyone {      exists (select 1 from apm_package_owners o where o.version_id = v.version_id and owner_uri='mailto:$my_email')
   } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/apm/index.xql}
dbqd.acs-admin.www.apm.package-add-2.apm_pretty_plural_unique_ck {dbqd.acs-admin.www.apm.package-add-2.apm_pretty_plural_unique_ck {	    select case when count(*) = 0 then 0 else 1 end from apm_package_types 
	    where pretty_plural = :pretty_plural
	
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/apm/package-add-2.xql}
dbqd.acs-admin.www.apm.package-add-2.apm_name_unique_ck {dbqd.acs-admin.www.apm.package-add-2.apm_name_unique_ck {	    select case when count(*) = 0 then 0 else 1 end from apm_package_types 
	    where pretty_name = :pretty_name
	
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/apm/package-add-2.xql}
dbqd.acs-admin.www.apm.package-add-2.apm_uri_unique_ck {dbqd.acs-admin.www.apm.package-add-2.apm_uri_unique_ck {	    select case when count(*) = 0 then 0 else 1 end from apm_package_types 
	    where package_uri = :package_uri
	
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/apm/package-add-2.xql}
dbqd.acs-admin.www.apm.package-add-2.apm_version_uri_unique_ck {dbqd.acs-admin.www.apm.package-add-2.apm_version_uri_unique_ck {	    select case when count(*) =  0 then 0 else 1 end from apm_package_versions 
	    where version_uri = :version_uri
	
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/apm/package-add-2.xql}
dbqd.acs-admin.www.apm.package-add-2.apm_package_add_doubleclick {dbqd.acs-admin.www.apm.package-add-2.apm_package_add_doubleclick {	select case when count(*) = 0 then 0 else 1 end from apm_package_versions
	where version_id = :version_id
    
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/apm/package-add-2.xql}
dbqd.acs-admin.www.apm.package-add.apm_get_name {dbqd.acs-admin.www.apm.package-add.apm_get_name {    select first_names || ' ' || last_name as user_name, email from cc_users where user_id = :user_id

      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/apm/package-add.xql}
dbqd.acs-admin.www.apm.package-delete-2.drop_file_query {dbqd.acs-admin.www.apm.package-delete-2.drop_file_query {	select path from apm_package_files
	where file_id in ([join $sql_drop_scripts \",\"])
        and file_type='data_model_drop'
    
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/apm/package-delete-2.xql}
dbqd.acs-admin.www.apm.package-delete.apm_package_drop_scripts {dbqd.acs-admin.www.apm.package-delete.apm_package_drop_scripts {    select file_id, path 
    from apm_package_files
    where version_id = :version_id
    and file_type = 'data_model_drop'
    and (db_type is null or db_type = :db_type)

      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/apm/package-delete.xql}
dbqd.acs-admin.www.apm.packages.index.apm_archive_exist_p {dbqd.acs-admin.www.apm.packages.index.apm_archive_exist_p { select count(*) 
   from cr_revisions 
  where revision_id = (select content_item.get_latest_revision(item_id) 
                         from apm_package_versions
                  	where version_id = :version_id)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/apm/packages/index-oracle.xql}
dbqd.acs-admin.www.apm.packages.index.apm_archive_serve {dbqd.acs-admin.www.apm.packages.index.apm_archive_serve { select '[cr_fs_path]' || filename as content, 
        '[set storage_type file]' as storage_type
   from cr_revisions 
  where revision_id = (select content_item.get_latest_revision(item_id) 
                         from apm_package_versions
                  	where version_id = $version_id)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/apm/packages/index-oracle.xql}
dbqd.acs-admin.www.apm.packages-install-3.apm_package_upgrade_from {dbqd.acs-admin.www.apm.packages-install-3.apm_package_upgrade_from {	    select version_name from apm_package_versions
	    where package_key = :package_key
	    and version_id = apm_package.highest_version(:package_key)
	
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/apm/packages-install-3-oracle.xql}
dbqd.acs-admin.www.apm.parameter-add-2.param_name_unique_ck {dbqd.acs-admin.www.apm.parameter-add-2.param_name_unique_ck {	    select case when count(*) = 0 then 0 else 1 end
	    from apm_parameters
	    where parameter_name = :parameter_name and
              package_key = :package_key
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/apm/parameter-add-2.xql}
dbqd.acs-admin.www.apm.parameter-add-2.apm_parameter_register_doubleclick_p {dbqd.acs-admin.www.apm.parameter-add-2.apm_parameter_register_doubleclick_p {	select 1 from apm_parameters where parameter_id = :parameter_id
    
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/apm/parameter-add-2.xql}
dbqd.acs-admin.www.apm.parameter-add.apm_get_name {dbqd.acs-admin.www.apm.parameter-add.apm_get_name {    select package_key, pretty_name, version_name, acs_object_id_seq.nextval as parameter_id
      from apm_package_version_info
     where version_id = :version_id

      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/apm/parameter-add.xql}
dbqd.acs-admin.www.apm.parameter-edit.param_info {dbqd.acs-admin.www.apm.parameter-edit.param_info {    select parameter_name, datatype, description, default_value, min_n_values, max_n_values, parameter_id, 
    section_name, default_value
      from apm_parameters
     where parameter_id = :parameter_id

      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/apm/parameter-edit.xql}
dbqd.acs-admin.www.apm.parameter-edit.apm_get_name {dbqd.acs-admin.www.apm.parameter-edit.apm_get_name {    select pretty_name, version_name, package_key
      from apm_package_version_info
     where version_id = :version_id

      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/apm/parameter-edit.xql}
dbqd.acs-admin.www.apm.version-dependencies.apm_package_info_by_version_id {dbqd.acs-admin.www.apm.version-dependencies.apm_package_info_by_version_id {    select package_key, pretty_name, version_name, installed_p 
    from apm_package_version_info 
    where version_id = :version_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/apm/version-dependencies-oracle.xql}
dbqd.acs-admin.www.apm.version-dependencies.apm_all_dependencies {dbqd.acs-admin.www.apm.version-dependencies.apm_all_dependencies {	select dependency_id, service_uri, service_version
	from   apm_package_dependencies
	where  version_id = :version_id
	and    dependency_type = :dependency_type_prep
	order by service_uri
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/apm/version-dependencies-oracle.xql}
dbqd.acs-admin.www.apm.version-dependencies.apm_specific_version_dependencies {dbqd.acs-admin.www.apm.version-dependencies.apm_specific_version_dependencies {select t.pretty_name dep_pretty_name, v.version_name dep_version_name, v.version_id dep_version_id
from apm_package_versions v, apm_package_dependencies d, apm_package_types t
where d.service_uri = :service_uri
and d.dependency_type = :other_dependency_type_prep
and d.version_id = v.version_id
and t.package_key = v.package_key 
and apm_package_version.sortable_version_name(d.service_version) $sign apm_package_version.sortable_version_name(:service_version)
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/apm/version-dependencies-oracle.xql}
dbqd.acs-admin.www.apm.version-dependencies.apm_package_info_by_version_id {dbqd.acs-admin.www.apm.version-dependencies.apm_package_info_by_version_id {    select package_key, pretty_name, version_name, installed_p 
    from apm_package_version_info 
    where version_id = :version_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/apm/version-dependencies-oracle.xql}
dbqd.acs-admin.www.apm.version-dependencies.apm_all_dependencies {dbqd.acs-admin.www.apm.version-dependencies.apm_all_dependencies {	select dependency_id, service_uri, service_version
	from   apm_package_dependencies
	where  version_id = :version_id
	and    dependency_type = :dependency_type_prep
	order by service_uri
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/apm/version-dependencies-oracle.xql}
dbqd.acs-admin.www.apm.version-dependency-add-2.apm_dependency_doubleclick_check {dbqd.acs-admin.www.apm.version-dependency-add-2.apm_dependency_doubleclick_check {	select count(*) from apm_package_dependencies
	where dependency_id = :dependency_id
    
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/apm/version-dependency-add-2.xql}
dbqd.acs-admin.www.apm.version-dependency-add.apm_all_service_uri {dbqd.acs-admin.www.apm.version-dependency-add.apm_all_service_uri {    select distinct service_uri, service_version
    from   apm_package_dependencies
    order by service_uri, apm_package_version.sortable_version_name(service_version)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/apm/version-dependency-add-oracle.xql}
dbqd.acs-admin.www.apm.version-dependency-add.apm_package_info_by_version_id_and_package {dbqd.acs-admin.www.apm.version-dependency-add.apm_package_info_by_version_id_and_package {    select p.package_key, p.package_uri, 
    p.pretty_name, v.version_name
    from   apm_package_types p, apm_package_versions v
    where  v.version_id = :version_id
    and    v.package_key = p.package_key

      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/apm/version-dependency-add.xql}
dbqd.acs-admin.www.apm.version-edit-2.apm_version_uri_unique_ck {dbqd.acs-admin.www.apm.version-edit-2.apm_version_uri_unique_ck {	    select case when count(*) = 0 then 0 else 1 end from apm_package_versions 
	    where version_uri = :version_uri
	
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/apm/version-edit-2.xql}
dbqd.acs-admin.www.apm.version-edit-2.old_version_name {dbqd.acs-admin.www.apm.version-edit-2.old_version_name {	    select version_name as old_version_name, version_uri as old_version_uri 
	    from apm_package_versions
	    where version_id = $version_id
	
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/apm/version-edit-2.xql}
dbqd.acs-admin.www.apm.version-edit.apm_all_version_info {dbqd.acs-admin.www.apm.version-edit.apm_all_version_info {    select version_id, package_key, package_uri, pretty_name, version_name, version_uri,
    summary, description_format, description, release_date, vendor, vendor_uri,
    enabled_p, installed_p, tagged_p, imported_p, data_model_loaded_p, activation_date, tarball_length, 
    deactivation_date, distribution_uri, distribution_date, singleton_p, initial_install_p
    from apm_package_version_info where version_id = :version_id

      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/apm/version-edit.xql}
dbqd.acs-admin.www.apm.version-edit.apm_all_owners {dbqd.acs-admin.www.apm.version-edit.apm_all_owners {    select owner_name, owner_uri from apm_package_owners where version_id = :version_id

      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/apm/version-edit.xql}
dbqd.acs-admin.www.apm.version-files.apm_all_files {dbqd.acs-admin.www.apm.version-files.apm_all_files {           select f.file_id, f.path, f.file_type, nvl(t.pretty_name, 'Unknown type') file_pretty_name,
                  f.db_type, nvl(d.pretty_db_name, 'All') as db_pretty_name
           from   apm_package_files f, apm_package_file_types t, apm_package_db_types d
           where  f.version_id = :version_id
           and    f.file_type = t.file_type_key(+)
           and    f.db_type = d.db_type_key(+)
           order by path
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/apm/version-files-oracle.xql}
dbqd.acs-admin.www.apm.version-files.apm_package_by_version_id {dbqd.acs-admin.www.apm.version-files.apm_package_by_version_id {	select pretty_name, version_name, package_key, installed_p, distribution_uri,
	tagged_p
	from apm_package_version_info where version_id = :version_id

      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/apm/version-files.xql}
dbqd.acs-admin.www.apm.version-files.apm_all_files {dbqd.acs-admin.www.apm.version-files.apm_all_files {           select f.file_id, f.path, f.file_type, nvl(t.pretty_name, 'Unknown type') file_pretty_name,
                  f.db_type, nvl(d.pretty_db_name, 'All') as db_pretty_name
           from   apm_package_files f, apm_package_file_types t, apm_package_db_types d
           where  f.version_id = :version_id
           and    f.file_type = t.file_type_key(+)
           and    f.db_type = d.db_type_key(+)
           order by path
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/apm/version-files-oracle.xql}
dbqd.acs-admin.www.apm.version-files. {dbqd.acs-admin.www.apm.version-files. {} {} {} {} F:/temp/openacs-4/packages/acs-admin/www/apm/version-files.xql}
dbqd.acs-admin.www.apm.version-fs-scan.apm_package_info {dbqd.acs-admin.www.apm.version-fs-scan.apm_package_info {    select p.package_key, p.package_url, v.package_name, v.version_name, v.package_id
    from   apm_packages p, apm_package_versions v
    where  v.version_id = :version_id
    and    v.package_id = p.package_id

      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/apm/version-fs-scan.xql}
dbqd.acs-admin.www.apm.version-generate-diffs.apm_package_by_version_id {dbqd.acs-admin.www.apm.version-generate-diffs.apm_package_by_version_id {    select package_name, version_name, package_id from apm_package_version_info where version_id = :version_id

      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/apm/version-generate-diffs.xql}
dbqd.acs-admin.www.apm.version-parameter-values.apm_package_by_version_id {dbqd.acs-admin.www.apm.version-parameter-values.apm_package_by_version_id {    select package_name, version_name, package_id from apm_package_version_info where version_id = :version_id

      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/apm/version-parameter-values.xql}
dbqd.acs-admin.www.apm.version-parameter-values.apm_all_elements {dbqd.acs-admin.www.apm.version-parameter-values.apm_all_elements {select element_id, element_name, description
from   ad_parameter_elements
where  version_id = :version_id
order by element_name

      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/apm/version-parameter-values.xql}
dbqd.acs-admin.www.apm.version-parameter-values.apm_value {dbqd.acs-admin.www.apm.version-parameter-values.apm_value {	select value from ad_parameter_values where element_id = :element_id
    
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/apm/version-parameter-values.xql}
dbqd.acs-admin.www.apm.version-parameters.parameter_table {dbqd.acs-admin.www.apm.version-parameters.parameter_table {            select parameter_name, nvl(description, 'No Description') description, datatype, 
                default_value, parameter_id, nvl(section_name, 'No Section') section_name
            from apm_parameters
            where package_key = :package_key
            $sql_clauses
       } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/apm/version-parameters-oracle.xql}
dbqd.acs-admin.www.apm.version-parameters.apm_package_by_version_id {dbqd.acs-admin.www.apm.version-parameters.apm_package_by_version_id {    select pretty_name, version_name, package_key
      from apm_package_version_info 
     where version_id = :version_id

      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/apm/version-parameters.xql}
dbqd.acs-admin.www.apm.version-tag.apm_package_by_version_id {dbqd.acs-admin.www.apm.version-tag.apm_package_by_version_id {    select package_name, version_name, package_id 
    from apm_package_version_info where version_id = :version_id

      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/apm/version-tag.xql}
dbqd.acs-admin.www.apm.version-tag.apm_all_paths {dbqd.acs-admin.www.apm.version-tag.apm_all_paths {	select path from apm_package_files where version_id = :version_id order by path

      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/apm/version-tag.xql}
dbqd.acs-admin.www.apm.version-tag.apm_all_files_untag {dbqd.acs-admin.www.apm.version-tag.apm_all_files_untag {	update apm_package_versions 
	set    tagged_p   = 'f' 
	where  version_id = :version_id
    
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/apm/version-tag.xql}
dbqd.acs-admin.www.apm.version-tag.apm_all_files_tag {dbqd.acs-admin.www.apm.version-tag.apm_all_files_tag {	update apm_package_versions 
	set    tagged_p   = 't' 
	where  version_id = :version_id
    
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/apm/version-tag.xql}
dbqd.acs-admin.www.apm.version-view.apm_enabled_version_info {dbqd.acs-admin.www.apm.version-view.apm_enabled_version_info {    select version_id as installed_version_id, version_name as installed_version_name,
           enabled_p as installed_enabled_p,
           apm_package_version.version_name_greater(version_name, :version_name) as version_name_greater
    from   apm_package_versions
    where  package_key = :package_key
    and    installed_p = 't'
    and rownum = 1

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/apm/version-view-oracle.xql}
dbqd.acs-admin.www.apm.version-view.apm_data_model_install_version {dbqd.acs-admin.www.apm.version-view.apm_data_model_install_version {    select data_model_installed_version from (
        select version_name as data_model_installed_version
        from   apm_package_versions
        where  package_key = :package_key
        and    data_model_loaded_p = 't'
        order by apm_package_version.sortable_version_name(version_name) desc
    )
    where rownum = 1

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/apm/version-view-oracle.xql}
dbqd.acs-admin.www.apm.version-view.apm_all_version_info {dbqd.acs-admin.www.apm.version-view.apm_all_version_info {    select version_id, package_key, package_uri, pretty_name, version_name, version_uri,
    summary, description_format, description, singleton_p, initial_install_p,
    to_char(release_date, 'Month DD, YYYY') as release_date , vendor, vendor_uri,
    enabled_p, installed_p, tagged_p, imported_p, data_model_loaded_p, 
    to_char(activation_date, 'Month DD, YYYY') as activation_date,
    tarball_length, distribution_uri,
    to_char(deactivation_date, 'Month DD, YYYY') as deactivation_date,
    to_char(distribution_date, 'Month DD, YYYY') as distribution_date
 from apm_package_version_info 
 where version_id = :version_id

      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/apm/version-view.xql}
dbqd.acs-admin.www.apm.version-view.apm_file_count {dbqd.acs-admin.www.apm.version-view.apm_file_count {	select count(*) as n_files from apm_package_files where version_id = :version_id

      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/apm/version-view.xql}
dbqd.acs-admin.www.apm.version-view.supported_databases {dbqd.acs-admin.www.apm.version-view.supported_databases {    select pretty_db_name
    from apm_package_db_types
    where exists (select 1
                  from apm_package_files
                  where version_id = :version_id
                  and   db_type = db_type_key)

      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/apm/version-view.xql}
dbqd.acs-admin.www.apm.version-view.apm_all_owners {dbqd.acs-admin.www.apm.version-view.apm_all_owners {    select owner_uri, owner_name from apm_package_owners where version_id = :version_id

      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/apm/version-view.xql}
dbqd.acs-admin.www.apm.view-unattached-files.apm_all_paths {dbqd.acs-admin.www.apm.view-unattached-files.apm_all_paths {    select distinct path from apm_package_files

      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/apm/view-unattached-files.xql}
dbqd.acs-admin.www.apm.write-all-specs.apm_get_all_packages {dbqd.acs-admin.www.apm.write-all-specs.apm_get_all_packages {    select version_id, version_name, pretty_name, distribution_uri, v.package_key
    from   apm_package_versions v, apm_package_types t
    where  installed_p = 't'
    and v.package_key = t.package_key
    order by upper(pretty_name)

      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/apm/write-all-specs.xql}
dbqd.acs-admin.www.index.subsite_admin_urls {dbqd.acs-admin.www.index.subsite_admin_urls {    select site_node.url(node_id) || 'admin/' as subsite_admin_url, instance_name
    from site_nodes s, apm_packages p
    where s.object_id = p.package_id
    and p.package_key = 'acs-subsite'

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/index-oracle.xql}
dbqd.acs-admin.www.test.signed-cookies-test-2.get_token_value {dbqd.acs-admin.www.test.signed-cookies-test-2.get_token_value {    select token from secret_tokens
    where token_id = :token_id

      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/test/signed-cookies-test-2.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_get_asdf_from_footest {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_get_asdf_from_footest {		select asdf as i, sysdate as datestr from footest
	    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test-oracle.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test. {dbqd.acs-admin.www.tests.db-api-acceptance-test. {		    select asdf as j, sysdate as datestr2 from footest
		
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test-oracle.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_select_date {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_select_date {       select sysdate from dual 
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test-oracle.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.unused {dbqd.acs-admin.www.tests.db-api-acceptance-test.unused {      select sysdate from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test-oracle.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_get_asdf_and_date_from_footest {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_get_asdf_and_date_from_footest {		select asdf, sysdate as datestr from footest
	    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test-oracle.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_get_asdf_sysdate_42_from_footest {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_get_asdf_sysdate_42_from_footest {		select asdf, sysdate as datestr, 42 as jkl from footest
	    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test-oracle.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.unused {dbqd.acs-admin.www.tests.db-api-acceptance-test.unused {      select sysdate from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test-oracle.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_get_just_asfd_and_sysdate_from_footest {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_get_just_asfd_and_sysdate_from_footest {		select asdf, sysdate as datestr from footest
	    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test-oracle.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_get_simply_asdf_sysdate_and_42_from_footest {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_get_simply_asdf_sysdate_and_42_from_footest {		select asdf, sysdate as datestr, 42 as jkl from footest
	    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test-oracle.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_select_asdf_sysdate_from_food_1 {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_select_asdf_sysdate_from_food_1 {      select asdf, sysdate as datestr from footest where asdf = :asdf
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test-oracle.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_select_asdf_sysdate_from_food_2 {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_select_asdf_sysdate_from_food_2 {      select asdf, sysdate as datestr from footest where asdf > :asdf
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test-oracle.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_select_asdf_sysdate_from_food_3 {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_select_asdf_sysdate_from_food_3 {      select asdf, sysdate as datestr from footest where asdf < :asdf
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test-oracle.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_select_asdf_sysdate_from_food_4 {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_select_asdf_sysdate_from_food_4 {      select asdf, sysdate as datestr from footest where asdf = :asdf
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test-oracle.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_select_asdf_sysdate_from_food_5 {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_select_asdf_sysdate_from_food_5 {      select asdf, sysdate as datestr from footest where asdf = :asdf
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test-oracle.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_select_asdf_sysdate_from_food_6 {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_select_asdf_sysdate_from_food_6 {      select asdf, sysdate as datestr from footest where asdf = :asdf
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test-oracle.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_select_asdf_sysdate_from_food_7 {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_select_asdf_sysdate_from_food_7 {      select asdf, sysdate as datestr from footest where asdf > :asdf
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test-oracle.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_select_asdf_sysdate_from_food_8 {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_select_asdf_sysdate_from_food_8 {      select asdf, sysdate as datestr from footest where asdf < :asdf
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test-oracle.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_select_asdf_sysdate_from_food_9 {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_select_asdf_sysdate_from_food_9 {      select asdf, sysdate as datestr from footest where asdf = :asdf
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test-oracle.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_select_asdf_sysdate_from_food_10 {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_select_asdf_sysdate_from_food_10 {      select asdf, sysdate as datestr from footest where asdf = :asdf
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test-oracle.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_select_asdf_sysdate_from_food_11 {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_select_asdf_sysdate_from_food_11 {      select asdf, sysdate as datestr from footest where asdf = :asdf
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test-oracle.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_select_asdf_sysdate_from_food_12 {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_select_asdf_sysdate_from_food_12 {      select asdf, sysdate as datestr from footest where asdf > :asdf
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test-oracle.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_select_asdf_sysdate_from_food_13 {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_select_asdf_sysdate_from_food_13 {      select asdf, sysdate as datestr from footest where asdf < :asdf
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test-oracle.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_select_asdf_sysdate_from_food_14 {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_select_asdf_sysdate_from_food_14 {      select asdf, sysdate as datestr from footest where asdf = :asdf
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test-oracle.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_select_asdf_sysdate_from_food_15 {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_select_asdf_sysdate_from_food_15 {      select asdf, sysdate as datestr from footest where asdf = :asdf
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test-oracle.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.unused {dbqd.acs-admin.www.tests.db-api-acceptance-test.unused {      BEGIN select count(*) into :1 from footest; END;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test-oracle.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_plsql_exec {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_plsql_exec {      BEGIN select * into :1 from footest; END;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test-oracle.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_obtain_sysdate {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_obtain_sysdate {      select sysdate from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test-oracle.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_tests_drop_footest {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_tests_drop_footest {      drop table footest
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_tests_drop_bartest {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_tests_drop_bartest {      drop table bartest
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_tests_drop_footest_seq {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_tests_drop_footest_seq {      drop sequence footest_seq
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_create_footest_seq {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_create_footest_seq {      create sequence footest_seq
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_create_footest {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_create_footest {      create table footest (asdf integer unique)
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_create_bartest_blah {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_create_bartest_blah {      create table bartest (asdf varchar(10) unique)
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_delete_footest {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_delete_footest {      delete from footest
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test. {dbqd.acs-admin.www.tests.db-api-acceptance-test. {		    select asdf as j, sysdate as datestr2 from footest
		
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test-oracle.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_delete_footest {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_delete_footest {      delete from footest
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest {      insert into footest values (0)
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_select_from_footest {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_select_from_footest {      select asdf from footest
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_delete_from_footest {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_delete_from_footest {      delete from footest
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test. {dbqd.acs-admin.www.tests.db-api-acceptance-test. {		    select asdf as j, sysdate as datestr2 from footest
		
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test-oracle.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test. {dbqd.acs-admin.www.tests.db-api-acceptance-test. {		    select asdf as j, sysdate as datestr2 from footest
		
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test-oracle.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.test {dbqd.acs-admin.www.tests.db-api-acceptance-test.test {      nonsense
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.test {dbqd.acs-admin.www.tests.db-api-acceptance-test.test {      nonsense
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.test {dbqd.acs-admin.www.tests.db-api-acceptance-test.test {      nonsense
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_print_food_test {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_print_food_test {      select asdf from footest
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_delete_from_footest_once_again {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_delete_from_footest_once_again {      delete from footest
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_val_1 {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_val_1 {      insert into footest values(1)
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footes_val_2 {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footes_val_2 {      insert into footest values(2)
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.test {dbqd.acs-admin.www.tests.db-api-acceptance-test.test {      select asdf from footest
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.test {dbqd.acs-admin.www.tests.db-api-acceptance-test.test {      select asdf from footest
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_again_with_val_1 {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_again_with_val_1 {      insert into footest values(1)
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_again_with_val_2 {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_again_with_val_2 {      insert into footest values(2) 
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test. {dbqd.acs-admin.www.tests.db-api-acceptance-test. {		    select asdf as j, sysdate as datestr2 from footest
		
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test-oracle.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_with_val_3 {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_with_val_3 {      insert into footest values(3) 
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.test {dbqd.acs-admin.www.tests.db-api-acceptance-test.test {      select asdf from footest
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.unused {dbqd.acs-admin.www.tests.db-api-acceptance-test.unused {      BEGIN select count(*) into :1 from footest; END;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test-oracle.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_with_val_4 {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_with_val_4 {      insert into footest values (4)
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_again_with_val_4 {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_again_with_val_4 {      insert into footest values (4)
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_once_again_with_val_1 {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_once_again_with_val_1 {      insert into footest values (1)
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_once_again_with_val_1 {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_once_again_with_val_1 {      insert into footest values (2)
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.unused {dbqd.acs-admin.www.tests.db-api-acceptance-test.unused {      BEGIN select count(*) into :1 from footest; END;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test-oracle.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_yet_again_with_val_1 {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_yet_again_with_val_1 {      insert into footest values (1)
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_yet_again_with_val_2 {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_yet_again_with_val_2 {      insert into footest values (2)
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.unused {dbqd.acs-admin.www.tests.db-api-acceptance-test.unused {      BEGIN select count(*) into :1 from footest; END;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test-oracle.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.foo_insert {dbqd.acs-admin.www.tests.db-api-acceptance-test.foo_insert {      insert into footest values (1)
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_yet_once_again_with_val_2 {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_yet_once_again_with_val_2 {      insert into footest values (2)
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_yet_twice_again_with_val_2 {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_yet_twice_again_with_val_2 {      insert into footest values (2)
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.if {dbqd.acs-admin.www.tests.db-api-acceptance-test.if {       $correct_p == "0" 
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.unused {dbqd.acs-admin.www.tests.db-api-acceptance-test.unused {      BEGIN select count(*) into :1 from footest; END;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test-oracle.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_again_again_with_val_1 {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_again_again_with_val_1 {      insert into footest values(1)
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_again_again_with_val_2 {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_again_again_with_val_2 {      insert into footest values(2)
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_again_again_with_val_3 {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_again_again_with_val_3 {      insert into footest values(3)
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_delete_from_footest_another_time {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_delete_from_footest_another_time {      delete from footest
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.unused {dbqd.acs-admin.www.tests.db-api-acceptance-test.unused {      BEGIN select count(*) into :1 from footest; END;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test-oracle.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test. {dbqd.acs-admin.www.tests.db-api-acceptance-test. {		    select asdf as j, sysdate as datestr2 from footest
		
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test-oracle.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_another_again_with_val_1 {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_another_again_with_val_1 {      insert into footest values(1)
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_another_again_with_val_2 {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_another_again_with_val_2 {      insert into footest values(2)
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_another_again_with_val_3 {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_another_again_with_val_3 {      insert into footest values(3)
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_select_stuff_from_asdf_from_footest {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_select_stuff_from_asdf_from_footest {       select asdf from footest 
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test. {dbqd.acs-admin.www.tests.db-api-acceptance-test. {		    select asdf as j, sysdate as datestr2 from footest
		
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test-oracle.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.unused {dbqd.acs-admin.www.tests.db-api-acceptance-test.unused {      BEGIN select count(*) into :1 from footest; END;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test-oracle.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_get_asdf_from_footest_for_some_more_time {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_get_asdf_from_footest_for_some_more_time {		select asdf as i from footest where asdf < :asdf
	    
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_get_asdf_from_footest_for_another_time {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_get_asdf_from_footest_for_another_time {		select asdf as i from footest where asdf < :asdf
	    
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_get_asdf_from_footest_as_i_for_another_time {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_get_asdf_from_footest_as_i_for_another_time {		select asdf as i from footest where asdf > :asdf
	    
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.unused {dbqd.acs-admin.www.tests.db-api-acceptance-test.unused {      BEGIN select count(*) into :1 from footest; END;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test-oracle.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_get_just_asdf_from_footest {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_get_just_asdf_from_footest {		select asdf from footest
	    
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test. {dbqd.acs-admin.www.tests.db-api-acceptance-test. {		    select asdf as j, sysdate as datestr2 from footest
		
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test-oracle.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_using_values_1 {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_using_values_1 {      insert into footest values(1)
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_using_values_2 {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_using_values_2 {      insert into footest values(2)
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_using_values_3 {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_using_values_3 {      insert into footest values(3)
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_insert_into_footest_using_the_value_1 {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_insert_into_footest_using_the_value_1 {      insert into footest values(1)
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_insert_into_footest_using_the_value_2 {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_insert_into_footest_using_the_value_2 {      insert into footest values(2)
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_insert_into_footest_using_the_value_3 {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_insert_into_footest_using_the_value_3 {      insert into footest values(3)
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.unused {dbqd.acs-admin.www.tests.db-api-acceptance-test.unused {      BEGIN select count(*) into :1 from footest; END;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test-oracle.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.dp_api_acceptance_test_select_2_from_footest_where_asdf_is_1 {dbqd.acs-admin.www.tests.db-api-acceptance-test.dp_api_acceptance_test_select_2_from_footest_where_asdf_is_1 {      select 2 as jkl, asdf from footest where asdf = 1
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.dp_api_acceptance_test_select_2_from_footest_where_asdf_is_something {dbqd.acs-admin.www.tests.db-api-acceptance-test.dp_api_acceptance_test_select_2_from_footest_where_asdf_is_something {      select 2 as jkl, asdf from footest where asdf = :asdf
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_select_2_from_footest_where_bind {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_select_2_from_footest_where_bind {      select 2 as jkl, asdf from footest where asdf = :asdf
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_select_2_from_footest_wehre_setId {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_select_2_from_footest_wehre_setId {      select 2 as jkl, asdf from footest where asdf = :asdf
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_value_of_number_1 {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_value_of_number_1 {      insert into footest values(1)
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_value_of_number_2 {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_value_of_number_2 {      insert into footest values(2)
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_value_of_number_3 {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_value_of_number_3 {      insert into footest values(3)
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_values_of_1_yet_again {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_values_of_1_yet_again {      insert into footest values(1)
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_values_of_2_yet_again {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_values_of_2_yet_again {      insert into footest values(2)
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_values_of_3_yet_again {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_values_of_3_yet_again {      insert into footest values(3)
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_get_everything_from_footest {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_get_everything_from_footest {	select * from footest
    
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_test_get_everything_from_footest_get_just_asdf {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_test_get_everything_from_footest_get_just_asdf {		select asdf as jkl from footest
	    
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_delete_from_footest_without_anything_else {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_delete_from_footest_without_anything_else {      delete from footest
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_values_of_asdf_with_bind_and_some_other_stuff {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_insert_into_footest_values_of_asdf_with_bind_and_some_other_stuff {      insert into footest values (:asdf)
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_select_count_from_footest {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_select_count_from_footest {      select count(*) from footest where asdf is null
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.dp_api_acceptance_test_delete_from_bartest {dbqd.acs-admin.www.tests.db-api-acceptance-test.dp_api_acceptance_test_delete_from_bartest {      delete from bartest
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.dp_api_acceptance_test_insert_into_bartest_with_asdf {dbqd.acs-admin.www.tests.db-api-acceptance-test.dp_api_acceptance_test_insert_into_bartest_with_asdf {      insert into bartest values (:asdf)
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_select_count_from_bartest_where_asdf_is_a {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_test_select_count_from_bartest_where_asdf_is_a {      select count(*) from bartest where asdf = 'a'
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.dp_api_acceptance_test_insert_into_bartest_with_values_entered_through_asdf {dbqd.acs-admin.www.tests.db-api-acceptance-test.dp_api_acceptance_test_insert_into_bartest_with_values_entered_through_asdf {      insert into bartest values (:asdf)
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.dp_api_acceptance_test_get_count_from_bartest {dbqd.acs-admin.www.tests.db-api-acceptance-test.dp_api_acceptance_test_get_count_from_bartest {      select count(*) from bartest where asdf is null
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_remove_from_footest {dbqd.acs-admin.www.tests.db-api-acceptance-test.db_api_acceptance_remove_from_footest {      delete from footest
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/tests/db-api-acceptance-test.xql}
dbqd.acs-admin.www.users.become.password {dbqd.acs-admin.www.users.become.password {      select password from users where user_id=$user_id
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/users/become.xql}
dbqd.acs-admin.www.users.complex-search.registration_before_days {dbqd.acs-admin.www.users.complex-search.registration_before_days {        creation_date < sysdate - :registration_before_days

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/users/complex-search-oracle.xql}
dbqd.acs-admin.www.users.complex-search.registration_after_days {dbqd.acs-admin.www.users.complex-search.registration_after_days {        creation_date >= sysdate - :registration_after_days

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/users/complex-search-oracle.xql}
dbqd.acs-admin.www.users.complex-search.last_visit_before_days {dbqd.acs-admin.www.users.complex-search.last_visit_before_days {        last_visit < sysdate - :last_visit_before_days

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/users/complex-search-oracle.xql}
dbqd.acs-admin.www.users.complex-search.last_visit_after_days {dbqd.acs-admin.www.users.complex-search.last_visit_after_days {        last_visit >= sysdate - :last_visit_after_days

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/users/complex-search-oracle.xql}
dbqd.acs-admin.www.users.complex-search.user_group_name_from_id {dbqd.acs-admin.www.users.complex-search.user_group_name_from_id {      select group_name from groups where group_id = :limit_to_users_in_group_id
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/users/complex-search.xql}
dbqd.acs-admin.www.users.index.users_n_users {dbqd.acs-admin.www.users.index.users_n_users {      select 
    count(*) as n_users, 
    sum(case when member_state = 'deleted' then 1 else 0 end) as n_deleted_users, 
    max(creation_date) as last_registration
    from cc_users
    where email not in ('anonymous', 'system')
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/users/index.xql}
dbqd.acs-admin.www.users.index.groups_select {dbqd.acs-admin.www.users.index.groups_select {select groups.group_id, 
       groups.group_name, 
       m.num as n_members, 
       c.num as n_components 
from groups, 
     (select group_id, count(*) as num 
      from group_member_map group by group_id) m, 
     (select group_id, count(*) as num 
      from group_component_map group by group_id) c 
where groups.group_id=m.group_id 
  and groups.group_id = c.group_id
order by group_name

      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/users/index.xql}
dbqd.acs-admin.www.users.member-state-change.get_states {dbqd.acs-admin.www.users.member-state-change.get_states {      select email_verified_p email_verified_p_old, member_state member_state_old, first_names || ' ' || last_name as name, email, rel_id, rowid as row_id
from cc_users
where user_id = :user_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/users/member-state-change-oracle.xql}
dbqd.acs-admin.www.users.member-state-change.member_approve {dbqd.acs-admin.www.users.member-state-change.member_approve {                        begin membership_rel.approve( rel_id => :rel_id ); end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/users/member-state-change-oracle.xql}
dbqd.acs-admin.www.users.member-state-change.member_ban {dbqd.acs-admin.www.users.member-state-change.member_ban {                       begin membership_rel.ban( rel_id => :rel_id ); end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/users/member-state-change-oracle.xql}
dbqd.acs-admin.www.users.member-state-change.member_reject {dbqd.acs-admin.www.users.member-state-change.member_reject {                       begin membership_rel.reject( rel_id => :rel_id ); end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/users/member-state-change-oracle.xql}
dbqd.acs-admin.www.users.member-state-change.member_deleted {dbqd.acs-admin.www.users.member-state-change.member_deleted {                       begin membership_rel.deleted( rel_id => :rel_id ); end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/users/member-state-change-oracle.xql}
dbqd.acs-admin.www.users.member-state-change.member_unapprove {dbqd.acs-admin.www.users.member-state-change.member_unapprove {                       begin membership_rel.unapprove( rel_id => :rel_id ); end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/users/member-state-change-oracle.xql}
dbqd.acs-admin.www.users.member-state-change.approve_email {dbqd.acs-admin.www.users.member-state-change.approve_email {                       begin acs_user.approve_email ( user_id => :user_id ); end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/users/member-state-change-oracle.xql}
dbqd.acs-admin.www.users.member-state-change.unapprove_email {dbqd.acs-admin.www.users.member-state-change.unapprove_email {                       begin acs_user.unapprove_email ( user_id => :user_id ); end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/users/member-state-change-oracle.xql}
dbqd.acs-admin.www.users.member-state-change.admin_email {dbqd.acs-admin.www.users.member-state-change.admin_email {      select email from parties where party_id = :admin_user_id
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/users/member-state-change.xql}
dbqd.acs-admin.www.users.one.user_info {dbqd.acs-admin.www.users.one.user_info {      select first_names, last_name, email, nvl(screen_name,'&lt none set up &gt') as screen_name, creation_date, creation_ip, last_visit, member_state, email_verified_p
from cc_users
where user_id = :user_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/users/one-oracle.xql}
dbqd.acs-admin.www.users.one.get_item_id {dbqd.acs-admin.www.users.one.get_item_id {      select live_revision as revision_id, nvl(title,'view this portrait') portrait_title
from acs_rels a, cr_items c, cr_revisions cr 
where a.object_id_two = c.item_id
and c.live_revision = cr.revision_id
and a.object_id_one = :user_id
and a.rel_type = 'user_portrait_rel'
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/users/one-oracle.xql}
dbqd.acs-admin.www.users.one.user_contributions {dbqd.acs-admin.www.users.one.user_contributions {      select at.pretty_name, at.pretty_plural, a.creation_date, acs_object.name(a.object_id) object_name
from acs_objects a, acs_object_types at
where a.object_type = at.object_type
and a.creation_user = :user_id
order by object_name, creation_date
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/users/one-oracle.xql}
dbqd.acs-admin.www.users.one.user_info {dbqd.acs-admin.www.users.one.user_info {      select first_names, last_name, email, nvl(screen_name,'&lt none set up &gt') as screen_name, creation_date, creation_ip, last_visit, member_state, email_verified_p
from cc_users
where user_id = :user_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/users/one-oracle.xql}
dbqd.acs-admin.www.users.one.get_item_id {dbqd.acs-admin.www.users.one.get_item_id {      select live_revision as revision_id, nvl(title,'view this portrait') portrait_title
from acs_rels a, cr_items c, cr_revisions cr 
where a.object_id_two = c.item_id
and c.live_revision = cr.revision_id
and a.object_id_one = :user_id
and a.rel_type = 'user_portrait_rel'
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/users/one-oracle.xql}
dbqd.acs-admin.www.users.one.all_group_membership {dbqd.acs-admin.www.users.one.all_group_membership {    select distinct lower(groups.group_name) as group_name
      from groups, group_member_map gm
     where groups.group_id = gm.group_id and gm.member_id=:user_id
  order by lower(groups.group_name)
  } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/users/one.xql}
dbqd.acs-admin.www.users.one.direct_group_membership {dbqd.acs-admin.www.users.one.direct_group_membership {  select group_id, rel_id, party_names.party_name as group_name
    from (select /*+ ORDERED */ DISTINCT rels.rel_id, object_id_one as group_id, 
                 object_id_two
            from acs_rels rels, all_object_party_privilege_map perm
           where perm.object_id = rels.rel_id
                 and perm.privilege = 'read'
                 and rels.rel_type = 'membership_rel'
                 and rels.object_id_two = :user_id) r, 
         party_names 
   where r.group_id = party_names.party_id
order by lower(party_names.party_name)
  } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/users/one.xql}
dbqd.acs-admin.www.users.registration-history.user_rows {dbqd.acs-admin.www.users.registration-history.user_rows {      select to_char(creation_date,'YYYYMM') as sort_key, rtrim(to_char(creation_date,'Month')) as pretty_month, to_char(creation_date,'YYYY') as pretty_year, count(*) as n_new
from users, acs_objects
where users.user_id = acs_objects.object_id
and creation_date is not null
group by to_char(creation_date,'YYYYMM'), to_char(creation_date,'Month'), to_char(creation_date,'YYYY')
order by 1
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-admin/www/users/registration-history-oracle.xql}
dbqd.acs-admin.www.users.search.user_group_name_from_id {dbqd.acs-admin.www.users.search.user_group_name_from_id {      select group_name from user_groups where group_id = :limit_to_users_in_group_id
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/users/search.xql}
dbqd.acs-admin.www.users.user-add-2.admin_name {dbqd.acs-admin.www.users.user-add-2.admin_name {      select first_names || ' ' || last_name
      from persons
      where person_id = :admin_user_id
   } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/users/user-add-2.xql}
dbqd.acs-admin.www.users.user-add-3.unused {dbqd.acs-admin.www.users.user-add-3.unused {      select email from 
parties where party_id = :admin_user_id
      } {} {} {} F:/temp/openacs-4/packages/acs-admin/www/users/user-add-3.xql}
dbqd.acs-api-browser.www.plsql-subprogram-one.source_text {dbqd.acs-api-browser.www.plsql-subprogram-one.source_text {	select text
	from user_source
	where name = upper(:name)
	and type = upper(:type)
	order by line
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-api-browser/www/plsql-subprogram-one-oracle.xql}
dbqd.acs-api-browser.www.plsql-subprograms-all.all_subprograms {dbqd.acs-api-browser.www.plsql-subprograms-all.all_subprograms {    select object_type as type, object_name as name
    from user_objects
    where object_type in ('PACKAGE', 'PROCEDURE', 'FUNCTION')
    order by
    decode(object_type, 'PACKAGE', 0, 'PROCEDURE', 1, 'FUNCTION', 2) asc
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-api-browser/www/plsql-subprograms-all-oracle.xql}
dbqd.acs-automated-testing.tcl.aa-test-procs.aa_run_testcase.delete_testcase_results_sql {dbqd.acs-automated-testing.tcl.aa-test-procs.aa_run_testcase.delete_testcase_results_sql {    delete from aa_test_results
    where testcase_id = :testcase_id
  } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-automated-testing/tcl/aa-test-procs-oracle.xql}
dbqd.acs-automated-testing.tcl.aa-test-procs.aa_run_testcase.delete_testcase_final_results_sql {dbqd.acs-automated-testing.tcl.aa-test-procs.aa_run_testcase.delete_testcase_final_results_sql {     delete from aa_test_final_results
     where testcase_id = :testcase_id
  } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-automated-testing/tcl/aa-test-procs-oracle.xql}
dbqd.acs-automated-testing.tcl.aa-test-procs.aa_log_result.test_result_insert {dbqd.acs-automated-testing.tcl.aa-test-procs.aa_log_result.test_result_insert {     insert into aa_test_results
                      (testcase_id, package_key, test_id, timestamp, result,
                       notes)
              values (:aa_testcase_id, :aa_package_key, :aa_testcase_test_id,
                      sysdate, :test_result, :test_notes)
  } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-automated-testing/tcl/aa-test-procs-oracle.xql}
dbqd.acs-automated-testing.tcl.aa-test-procs.aa_log_final.testcase_result_insert {dbqd.acs-automated-testing.tcl.aa-test-procs.aa_log_final.testcase_result_insert {    insert into aa_test_final_results
                    (testcase_id, package_key, timestamp, passes, fails)
    values (:aa_testcase_id, :aa_package_key, sysdate, :test_passes, :test_fails)
  } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-automated-testing/tcl/aa-test-procs-oracle.xql}
dbqd.acs-automated-testing.www.admin.index.acs-automated-testing.results_query {dbqd.acs-automated-testing.www.admin.index.acs-automated-testing.results_query {    select testcase_id, package_key,
           to_char(timestamp,'MM/DD/YYYY HH:MI:SS') timestamp,
           passes, fails
    from aa_test_final_results
  } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-automated-testing/www/admin/index-oracle.xql}
dbqd.acs-automated-testing.www.admin.testcase.acs-automated-testing.testcase_query {dbqd.acs-automated-testing.www.admin.testcase.acs-automated-testing.testcase_query {    select to_char(timestamp,'DD/MM/YYYY HH:MI:SS') timestamp, result, notes
      from aa_test_results
      where testcase_id = :testcase_id and
            package_key = :package_key
      order by test_id
  } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-automated-testing/www/admin/testcase-oracle.xql}
dbqd.acs-automated-testing.www.admin.testcase.acs-automated-testing.get_testcase_fails_count {dbqd.acs-automated-testing.www.admin.testcase.acs-automated-testing.get_testcase_fails_count {    select fails
    from aa_test_final_results
    where testcase_id = :testcase_id
  } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-automated-testing/www/admin/testcase-oracle.xql}
dbqd.acs-bootstrap-installer.installer.auto-install.grant_admin {dbqd.acs-bootstrap-installer.installer.auto-install.grant_admin {acs_permission.grant_permission (object_id => acs.magic_object_id('security_context_root'),
				 grantee_id => :user_id,
				 privilege => 'admin'
				);
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-bootstrap-installer/installer/auto-install-oracle.xql}
dbqd.acs-bootstrap-installer.installer.auto-install.all_unmounted_package_key {dbqd.acs-bootstrap-installer.installer.auto-install.all_unmounted_package_key {	select t.package_key 
	from apm_package_types t, apm_packages p
	where t.package_key = p.package_key(+) 
	and p.package_id is null
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-bootstrap-installer/installer/auto-install-oracle.xql}
dbqd.acs-bootstrap-installer.installer.auto-install.db_types_exists {dbqd.acs-bootstrap-installer.installer.auto-install.db_types_exists {	select case when count(*) = 0 then 0 else 1 end
	from apm_package_db_types
} {} {} {} F:/temp/openacs-4/packages/acs-bootstrap-installer/installer/auto-install.xql}
dbqd.acs-bootstrap-installer.installer.auto-install.insert_apm_db_type {dbqd.acs-bootstrap-installer.installer.auto-install.insert_apm_db_type {	insert into apm_package_db_types
		(db_type_key, pretty_db_name)
	values
		(:db_type, :db_pretty_name)
} {} {} {} F:/temp/openacs-4/packages/acs-bootstrap-installer/installer/auto-install.xql}
dbqd.acs-bootstrap-installer.installer.auto-install.all_unmounted_package_key {dbqd.acs-bootstrap-installer.installer.auto-install.all_unmounted_package_key {	select t.package_key 
	from apm_package_types t, apm_packages p
	where t.package_key = p.package_key(+) 
	and p.package_id is null
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-bootstrap-installer/installer/auto-install-oracle.xql}
dbqd.acs-bootstrap-installer.installer.auto-install.main_site_id_select {dbqd.acs-bootstrap-installer.installer.auto-install.main_site_id_select {	select package_id
	from apm_packages
	where instance_name = 'Main Site' 
} {} {} {} F:/temp/openacs-4/packages/acs-bootstrap-installer/installer/auto-install.xql}
dbqd.acs-content-repository.tcl.acs-content-repository-init.acs_cr_scheduled_release_exec.schedule_releases {dbqd.acs-content-repository.tcl.acs-content-repository-init.acs_cr_scheduled_release_exec.schedule_releases {        begin
                cr_scheduled_release_exec;
        end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-content-repository/tcl/acs-content-repository-init-oracle.xql}
dbqd.acs-content-repository.tcl.acs-content-repository-procs.cr_delete_scheduled_files.fetch_paths {dbqd.acs-content-repository.tcl.acs-content-repository-procs.cr_delete_scheduled_files.fetch_paths {      select distinct crftd.path, crftd.storage_area_key
	  from cr_files_to_delete crftd
	  where not exists (select 1 from cr_revisions r where r.content = crftd.path)
      } {} {} {} F:/temp/openacs-4/packages/acs-content-repository/tcl/acs-content-repository-procs.xql}
dbqd.acs-content-repository.tcl.acs-content-repository-procs.cr_delete_scheduled_files.delete_files {dbqd.acs-content-repository.tcl.acs-content-repository-procs.cr_delete_scheduled_files.delete_files {      delete from cr_files_to_delete
      } {} {} {} F:/temp/openacs-4/packages/acs-content-repository/tcl/acs-content-repository-procs.xql}
dbqd.acs-content-repository.tcl.doc-procs.doc::package_info.get_info {dbqd.acs-content-repository.tcl.doc-procs.doc::package_info.get_info {        select doc.get_package_header(:package_name) from dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-content-repository/tcl/doc-procs-oracle.xql}
dbqd.acs-content-repository.tcl.doc-procs.doc::package_info.get_header {dbqd.acs-content-repository.tcl.doc-procs.doc::package_info.get_header {        select doc.get_proc_header(:proc_name, :package_name) from dual
      
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-content-repository/tcl/doc-procs-oracle.xql}
dbqd.acs-content-repository.tcl.doc-procs.doc::package_list.get_packages {dbqd.acs-content-repository.tcl.doc-procs.doc::package_list.get_packages {       select distinct 
        lower(name) as label,  
        lower(name) as value 
      from 
        user_source
      where 
        type='PACKAGE'
      and
        line=1
      order by label
     
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-content-repository/tcl/doc-procs-oracle.xql}
dbqd.acs-content-repository.tcl.doc-procs.doc::func_list.get_funcs {dbqd.acs-content-repository.tcl.doc-procs.doc::func_list.get_funcs {       select distinct 
        lower(text) as line_header 
      from 
        user_source
      where 
        type='PACKAGE'
      and
        lower(name) = lower(:package_name)
      and (
          lower(text) like '%procedure%'
        or
          lower(text) like '%function%'
      )
      order by line_header
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-content-repository/tcl/doc-procs-oracle.xql}
dbqd.acs-content-repository.tcl.doc-procs.doc::func_multirow.get_functions {dbqd.acs-content-repository.tcl.doc-procs.doc::func_multirow.get_functions {      select distinct 
        lower(text) as line_header 
      from 
        user_source
      where 
        type='PACKAGE'
      and
        lower(name) = lower(:package_name)
      and (
          lower(text) like '%procedure%'
        or
          lower(text) like '%function%'
      )
      order by line_header

    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-content-repository/tcl/doc-procs-oracle.xql}
dbqd.acs-content-repository.tcl.filter-procs.content::get_folder_labels.get_url {dbqd.acs-content-repository.tcl.filter-procs.content::get_folder_labels.get_url {    select
      0 as tree_level, '' as name , 'Home' as title
    from
      dual
    UNION
    select
      t.tree_level, i.name, content_item.get_title(t.context_id) as title
    from (
      select 
        context_id, level as tree_level
      from 
        acs_objects
      where
        context_id <> content_item.get_root_folder
      connect by
        prior context_id = object_id
      start with
        object_id = :item_id
      ) t, cr_items i
    where
      i.item_id = t.context_id
    order by
      tree_level

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-content-repository/tcl/filter-procs-oracle.xql}
dbqd.acs-content-repository.tcl.filter-procs.content::get_content_value.gcv_get_revision_id {dbqd.acs-content-repository.tcl.filter-procs.content::get_content_value.gcv_get_revision_id {	  begin
	    content_revision.to_temporary_clob(:revision_id);
	  end;

	} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-content-repository/tcl/filter-procs-oracle.xql}
dbqd.acs-content-repository.tcl.filter-procs.content::get_content_value.gcv_get_previous_content {dbqd.acs-content-repository.tcl.filter-procs.content::get_content_value.gcv_get_previous_content {    select 
      content
    from 
      cr_content_text
    where 
      revision_id = :revision_id

	} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-content-repository/tcl/filter-procs-oracle.xql}
dbqd.acs-content-repository.tcl.filter-procs.content::init.get_item_info {dbqd.acs-content-repository.tcl.filter-procs.content::init.get_item_info {    select 
      item_id, content_type
    from 
      cr_items
    where
      item_id = content_item.get_id(:url, :content_root)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-content-repository/tcl/filter-procs-oracle.xql}
dbqd.acs-content-repository.tcl.filter-procs.content::init.get_template_info {dbqd.acs-content-repository.tcl.filter-procs.content::init.get_template_info {    select 
      item_id, content_type
    from 
      cr_items
    where
      item_id = content_item.get_id(:url, :template_root)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-content-repository/tcl/filter-procs-oracle.xql}
dbqd.acs-content-repository.tcl.filter-procs.content::init.get_template_url {dbqd.acs-content-repository.tcl.filter-procs.content::init.get_template_url {        select 
          (select live_revision from cr_items where item_id = content_item.get_template(:item_id, :context)) as template_id,
          content_template.get_path(
          content_item.get_template(:item_id, :context),:template_root) as template_url 
        from 
          dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-content-repository/tcl/filter-procs-oracle.xql}
dbqd.acs-content-repository.tcl.filter-procs.content::get_content.get_revision {dbqd.acs-content-repository.tcl.filter-procs.content::get_content.get_revision {        select live_revision from cr_items where item_id = :item_id

      } {} {} {} F:/temp/openacs-4/packages/acs-content-repository/tcl/filter-procs.xql}
dbqd.acs-content-repository.tcl.filter-procs.content::get_content.get_mime_type {dbqd.acs-content-repository.tcl.filter-procs.content::get_content.get_mime_type {        select mime_type from cr_revisions 
        where revision_id = :revision_id

      } {} {} {} F:/temp/openacs-4/packages/acs-content-repository/tcl/filter-procs.xql}
dbqd.acs-content-repository.tcl.filter-procs.content::get_content.get_content_type {dbqd.acs-content-repository.tcl.filter-procs.content::get_content.get_content_type {        select content_type from cr_items 
        where item_id = :item_id

      } {} {} {} F:/temp/openacs-4/packages/acs-content-repository/tcl/filter-procs.xql}
dbqd.acs-content-repository.tcl.filter-procs.content::get_content.get_table_name {dbqd.acs-content-repository.tcl.filter-procs.content::get_content.get_table_name {        select table_name from acs_object_types 
        where object_type = :content_type

      } {} {} {} F:/temp/openacs-4/packages/acs-content-repository/tcl/filter-procs.xql}
dbqd.acs-content-repository.tcl.filter-procs.content::get_content.get_content {dbqd.acs-content-repository.tcl.filter-procs.content::get_content.get_content {        select 
           x.*, 
          :item_id as item_id $text_sql, 
          :content_type as content_type
        from
          cr_revisions r, ${table_name}x x
        where
          r.revision_id = :revision_id
        and 
          x.revision_id = r.revision_id

      } {} {} {} F:/temp/openacs-4/packages/acs-content-repository/tcl/filter-procs.xql}
dbqd.acs-content-repository.tcl.filter-procs.content::init.get_live_revision {dbqd.acs-content-repository.tcl.filter-procs.content::init.get_live_revision {    select live_revision from cr_items where item_id = :item_id

      } {} {} {} F:/temp/openacs-4/packages/acs-content-repository/tcl/filter-procs.xql}
dbqd.acs-content-repository.tcl.filter-procs.content::init_all.get_live_revision {dbqd.acs-content-repository.tcl.filter-procs.content::init_all.get_live_revision {    select live_revision from cr_items where item_id = :item_id

      } {} {} {} F:/temp/openacs-4/packages/acs-content-repository/tcl/filter-procs.xql}
dbqd.acs-content-repository.tcl.item-procs.item::content_is_null.cin_get_content {dbqd.acs-content-repository.tcl.item-procs.item::content_is_null.cin_get_content {    select 't' from cr_revisions r, cr_items i
      where r.revision_id = :revision_id
        and i.item_id = r.item_id
        and ((r.content is not null and i.storage_type in ('lob','text')) or
             (r.filename is not null and i.storage_type = 'file'))
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-content-repository/tcl/item-procs-oracle.xql}
dbqd.acs-content-repository.tcl.item-procs.item::get_template_id.gti_get_template_id {dbqd.acs-content-repository.tcl.item-procs.item::get_template_id.gti_get_template_id {    select content_item.get_template(:item_id, :context) as template_id
    from dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-content-repository/tcl/item-procs-oracle.xql}
dbqd.acs-content-repository.tcl.item-procs.item::get_url.gu_get_path {dbqd.acs-content-repository.tcl.item-procs.item::get_url.gu_get_path {    select content_item.get_path(:item_id) from dual
  
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-content-repository/tcl/item-procs-oracle.xql}
dbqd.acs-content-repository.tcl.item-procs.item::get_best_revision.gbr_get_best_revision {dbqd.acs-content-repository.tcl.item-procs.item::get_best_revision.gbr_get_best_revision {    select content_item.get_best_revision(:item_id) from dual
  
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-content-repository/tcl/item-procs-oracle.xql}
dbqd.acs-content-repository.tcl.item-procs.item::get_live_revision.glr_get_live_revision {dbqd.acs-content-repository.tcl.item-procs.item::get_live_revision.glr_get_live_revision {    select live_revision from cr_items
      where item_id = :item_id

      } {} {} {} F:/temp/openacs-4/packages/acs-content-repository/tcl/item-procs.xql}
dbqd.acs-content-repository.tcl.item-procs.item::get_mime_info.gmi_get_mime_info {dbqd.acs-content-repository.tcl.item-procs.item::get_mime_info.gmi_get_mime_info {    select 
      m.mime_type, m.file_extension
    from
      cr_mime_types m, cr_revisions r
    where
      r.mime_type = m.mime_type
    and
      r.revision_id = :revision_id
  
      } {} {} {} F:/temp/openacs-4/packages/acs-content-repository/tcl/item-procs.xql}
dbqd.acs-content-repository.tcl.publish-procs.publish::handle::text.get_revision_id {dbqd.acs-content-repository.tcl.publish-procs.publish::handle::text.get_revision_id {                begin
                content_revision.to_temporary_clob(:revision_id);
                end;
        
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-content-repository/tcl/publish-procs-oracle.xql}
dbqd.acs-content-repository.tcl.publish-procs.publish::handle::text.get_previous_content {dbqd.acs-content-repository.tcl.publish-procs.publish::handle::text.get_previous_content {                       select 
                         content
                       from 
                         cr_content_text
                       where 
                         revision_id = :revision_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-content-repository/tcl/publish-procs-oracle.xql}
dbqd.acs-content-repository.tcl.publish-procs.publish::write_multiple_blobs.wmb_get_blob_file {dbqd.acs-content-repository.tcl.publish-procs.publish::write_multiple_blobs.wmb_get_blob_file {      select [ad_decode $storage_type file "'[cr_fs_path]' || filename" content] from cr_revisions where revision_id = $revision_id
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-content-repository/tcl/publish-procs-oracle.xql}
dbqd.acs-content-repository.tcl.publish-procs.publish::write_content.get_revision_id {dbqd.acs-content-repository.tcl.publish-procs.publish::write_content.get_revision_id {                begin
                content_revision.to_temporary_clob(:revision_id);
                end;

	} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-content-repository/tcl/publish-procs-oracle.xql}
dbqd.acs-content-repository.tcl.publish-procs.publish::write_content.get_previous_content {dbqd.acs-content-repository.tcl.publish-procs.publish::write_content.get_previous_content {                       select 
                         content
                       from 
                         cr_content_text
                       where 
                         revision_id = :revision_id
  
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-content-repository/tcl/publish-procs-oracle.xql}
dbqd.acs-content-repository.tcl.publish-procs.publish::handle::image.i_get_image_info {dbqd.acs-content-repository.tcl.publish-procs.publish::handle::image.i_get_image_info {    select 
      im.width, im.height, r.title as image_alt
    from 
      images im, cr_revisions r
    where 
      im.image_id = :revision_id
    and
      r.revision_id = :revision_id
  
      } {} {} {} F:/temp/openacs-4/packages/acs-content-repository/tcl/publish-procs.xql}
dbqd.acs-content-repository.tcl.publish-procs.publish::render_subitem.rs_get_subitems {dbqd.acs-content-repository.tcl.publish-procs.publish::render_subitem.rs_get_subitems {      select 
        child_id
      from 
        cr_child_rels r, cr_items i
      where 
        r.parent_id = :main_item_id
      and 
        r.relation_tag = :relation_tag
      and
        i.item_id = r.child_id
      order by 
        order_n

      } {} {} {} F:/temp/openacs-4/packages/acs-content-repository/tcl/publish-procs.xql}
dbqd.acs-content-repository.tcl.publish-procs.publish::render_subitem.cs_get_subitems_related {dbqd.acs-content-repository.tcl.publish-procs.publish::render_subitem.cs_get_subitems_related {      select 
        related_object_id
      from 
        cr_item_rels r, cr_items i
      where 
        r.item_id = :main_item_id
      and 
        r.relation_tag = :relation_tag
      and
        i.item_id = r.related_object_id 
      order by 
        r.order_n

      } {} {} {} F:/temp/openacs-4/packages/acs-content-repository/tcl/publish-procs.xql}
dbqd.acs-content-repository.tcl.publish-procs.publish::write_multiple_blobs.get_storage_type {dbqd.acs-content-repository.tcl.publish-procs.publish::write_multiple_blobs.get_storage_type {           select storage_type 
             from cr_items 
            where item_id = (select item_id 
                               from cr_revisions 
                              where revision_id = :revision_id)

      } {} {} {} F:/temp/openacs-4/packages/acs-content-repository/tcl/publish-procs.xql}
dbqd.acs-content-repository.tcl.publish-procs.publish::write_content.get_one_revision {dbqd.acs-content-repository.tcl.publish-procs.publish::write_content.get_one_revision {             select item_id from cr_revisions where revision_id = :revision_id

      } {} {} {} F:/temp/openacs-4/packages/acs-content-repository/tcl/publish-procs.xql}
dbqd.acs-content-repository.tcl.revision-procs.cr_revision_upload.get_revision_id {dbqd.acs-content-repository.tcl.revision-procs.cr_revision_upload.get_revision_id {        begin
                :1 := content_revision.new(title     => :title, 
                                           item_id   => :item_id, 
                                           v_content => null);
        end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-content-repository/tcl/revision-procs-oracle.xql}
dbqd.acs-content-repository.tcl.revision-procs.cr_revision_upload.dml_revision_from_file {dbqd.acs-content-repository.tcl.revision-procs.cr_revision_upload.dml_revision_from_file {                         update 
                            cr_revisions 
                          set
                            content = empty_blob()
                          where
                            revision_id = :revision_id
                          returning content into :1

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-content-repository/tcl/revision-procs-oracle.xql}
dbqd.acs-content-repository.tcl.revision-procs.cr_write_content.get_item_info {dbqd.acs-content-repository.tcl.revision-procs.cr_write_content.get_item_info {          select r.mime_type, i.storage_type, i.storage_area_key, r.revision_id
            from cr_revisions r, cr_items i
          where i.item_id = r.item_id and
              r.revision_id = content_item.get_live_revision(:item_id)
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-content-repository/tcl/revision-procs-oracle.xql}
dbqd.acs-content-repository.tcl.revision-procs.cr_write_content.write_file_content {dbqd.acs-content-repository.tcl.revision-procs.cr_write_content.write_file_content {          select :path || filename
          from cr_revisions
          where revision_id = :revision_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-content-repository/tcl/revision-procs-oracle.xql}
dbqd.acs-content-repository.tcl.revision-procs.cr_write_content.write_lob_content {dbqd.acs-content-repository.tcl.revision-procs.cr_write_content.write_lob_content {          select content
          from cr_revisions
          where revision_id = $revision_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-content-repository/tcl/revision-procs-oracle.xql}
dbqd.acs-content-repository.tcl.revision-procs.cr_import_content.mime_type_register {dbqd.acs-content-repository.tcl.revision-procs.cr_import_content.mime_type_register {          begin
            content_type.register_mime_type('content_revision', :mime_type);
          end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-content-repository/tcl/revision-procs-oracle.xql}
dbqd.acs-content-repository.tcl.revision-procs.cr_import_content.image_subclass {dbqd.acs-content-repository.tcl.revision-procs.cr_import_content.image_subclass {         select content_item.is_subclass(:image_type, 'image') from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-content-repository/tcl/revision-procs-oracle.xql}
dbqd.acs-content-repository.tcl.revision-procs.cr_import_content.content_revision_subclass {dbqd.acs-content-repository.tcl.revision-procs.cr_import_content.content_revision_subclass {         select content_item.is_subclass(:other_type, 'content_revision') from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-content-repository/tcl/revision-procs-oracle.xql}
dbqd.acs-content-repository.tcl.revision-procs.cr_import_content.image_new {dbqd.acs-content-repository.tcl.revision-procs.cr_import_content.image_new {          begin
            :1 := image.new(
               name          =>  :object_name,
               parent_id     =>  :parent_id,
               item_id       =>  :item_id,
               revision_id   =>  :revision_id,
               creation_user =>  :creation_user,
               creation_ip   =>  :creation_ip,
               content_type  =>  :image_type,
               storage_type  =>  :storage_type,
               height        =>  :original_height,
               width         =>  :original_width
            );
          end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-content-repository/tcl/revision-procs-oracle.xql}
dbqd.acs-content-repository.tcl.revision-procs.cr_import_content.image_revision_new {dbqd.acs-content-repository.tcl.revision-procs.cr_import_content.image_revision_new {         begin
           :1 := image.new_revision (
             item_id       => :item_id,
             revision_id   => :revision_id,
             title         => :title,
             description   => :description,
             mime_type     => :mime_type,
             creation_user => :creation_user,
             creation_ip   => :creation_ip,
             height        => :original_height,
             width         => :original_width
           );
         end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-content-repository/tcl/revision-procs-oracle.xql}
dbqd.acs-content-repository.tcl.revision-procs.cr_import_content.content_item_new {dbqd.acs-content-repository.tcl.revision-procs.cr_import_content.content_item_new {          begin
            :1 := content_item.new(
               name          =>  :object_name,
               item_id       =>  :item_id,
               parent_id     =>  :parent_id,
               context_id    =>  :parent_id,
               creation_user =>  :creation_user,
               creation_ip   =>  :creation_ip,
               content_type  =>  :other_type,
               storage_type  =>  :storage_type
            );
          end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-content-repository/tcl/revision-procs-oracle.xql}
dbqd.acs-content-repository.tcl.revision-procs.cr_import_content.content_revision_new {dbqd.acs-content-repository.tcl.revision-procs.cr_import_content.content_revision_new {         begin
           :1 := image.new_revision (
             item_id       => :item_id,
             revision_id   => :revision_id,
             title         => :title,
             description   => :description,
             mime_type     => :mime_type,
             creation_user => :creation_user,
             creation_ip   => :creation_ip
           );
         end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-content-repository/tcl/revision-procs-oracle.xql}
dbqd.acs-content-repository.tcl.revision-procs.cr_import_content.set_file_content {dbqd.acs-content-repository.tcl.revision-procs.cr_import_content.set_file_content {          update cr_revisions
          set filename = :filename,
              content_length = :tmp_size
          where revision_id = :revision_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-content-repository/tcl/revision-procs-oracle.xql}
dbqd.acs-content-repository.tcl.revision-procs.cr_import_content.set_lob_content {dbqd.acs-content-repository.tcl.revision-procs.cr_import_content.set_lob_content {        update cr_revisions
        set mime_type = :mime_type,
        content = empty_blob()
        where revision_id = :revision_id
        returning content into :1
	   
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-content-repository/tcl/revision-procs-oracle.xql}
dbqd.acs-content-repository.tcl.revision-procs.cr_import_content.set_lob_size {dbqd.acs-content-repository.tcl.revision-procs.cr_import_content.set_lob_size {         update cr_revisions
         set content_length = dbms_lob.getlength(content)
         where revision_id = :revision_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-content-repository/tcl/revision-procs-oracle.xql}
dbqd.acs-content-repository.tcl.revision-procs.cr_set_imported_content_live.set_live {dbqd.acs-content-repository.tcl.revision-procs.cr_set_imported_content_live.set_live {         begin content_item.set_live_revision (revision_id => :revision_id);
         end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-content-repository/tcl/revision-procs-oracle.xql}
dbqd.acs-content-repository.tcl.revision-procs.cr_revision_upload.get_revision_id {dbqd.acs-content-repository.tcl.revision-procs.cr_revision_upload.get_revision_id {        begin
                :1 := content_revision.new(title     => :title, 
                                           item_id   => :item_id, 
                                           v_content => null);
        end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-content-repository/tcl/revision-procs-oracle.xql}
dbqd.acs-content-repository.tcl.revision-procs.cr_revision_upload.dml_revision_from_file {dbqd.acs-content-repository.tcl.revision-procs.cr_revision_upload.dml_revision_from_file {                         update 
                            cr_revisions 
                          set
                            content = empty_blob()
                          where
                            revision_id = :revision_id
                          returning content into :1

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-content-repository/tcl/revision-procs-oracle.xql}
dbqd.acs-content-repository.tcl.revision-procs.cr_write_content.get_revision_info {dbqd.acs-content-repository.tcl.revision-procs.cr_write_content.get_revision_info {          select i.storage_type, i.storage_area_key, r.mime_type, i.item_id
          from cr_items i, cr_revisions r
          where r.revision_id = :revision_id and i.item_id = r.item_id
      } {} {} {} F:/temp/openacs-4/packages/acs-content-repository/tcl/revision-procs.xql}
dbqd.acs-content-repository.tcl.revision-procs.cr_write_content.write_text_content {dbqd.acs-content-repository.tcl.revision-procs.cr_write_content.write_text_content {          select content
          from cr_revisions
          where revision_id = :revision_id
      } {} {} {} F:/temp/openacs-4/packages/acs-content-repository/tcl/revision-procs.xql}
dbqd.acs-content-repository.tcl.revision-procs.cr_import_content.mime_type_insert {dbqd.acs-content-repository.tcl.revision-procs.cr_import_content.mime_type_insert {            insert into cr_mime_types (mime_type) 
    	    select :mime_type
    	    from dual
    	    where not exists (select 1 from cr_mime_types where mime_type = :mime_type)
      } {} {} {} F:/temp/openacs-4/packages/acs-content-repository/tcl/revision-procs.xql}
dbqd.acs-content-repository.tcl.revision-procs.cr_registered_type_for_mime_type.registered_type_for_mime_type {dbqd.acs-content-repository.tcl.revision-procs.cr_registered_type_for_mime_type.registered_type_for_mime_type {          select content_type
          from cr_content_mime_type_map
          where mime_type = :mime_type
      } {} {} {} F:/temp/openacs-4/packages/acs-content-repository/tcl/revision-procs.xql}
dbqd.acs-content-repository.www.index.content_root {dbqd.acs-content-repository.www.index.content_root {      select content_item.get_root_folder from dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-content-repository/www/index-oracle.xql}
dbqd.acs-content-repository.www.index.template_root {dbqd.acs-content-repository.www.index.template_root {      select content_template.get_root_folder from dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-content-repository/www/index-oracle.xql}
dbqd.acs-content-repository.www.index.get_name {dbqd.acs-content-repository.www.index.get_name {  select 
    first_names || ' ' || last_name 
  from 
    persons 
  where 
    person_id = :user_id

      } {} {} {} F:/temp/openacs-4/packages/acs-content-repository/www/index.xql}
dbqd.acs-datetime.tcl.acs-calendar-2-procs.dt_widget_week.select_week_info {dbqd.acs-datetime.tcl.acs-calendar-2-procs.dt_widget_week.select_week_info {select   to_char(to_date(:current_date, 'yyyy-mm-dd'), 'D') 
as day_of_the_week,
to_char(next_day(to_date(:current_date, 'yyyy-mm-dd')-7, 'Sunday')) 
as sunday_of_the_week,
to_char(next_day(to_date(:current_date, 'yyyy-mm-dd')-7, 'Sunday'),'J') 
as sunday_julian,
to_char(next_day(to_date(:current_date, 'yyyy-mm-dd'), 'Saturday')) 
as saturday_of_the_week
from     dual
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-datetime/tcl/acs-calendar-2-procs-oracle.xql}
dbqd.acs-datetime.tcl.acs-calendar-2-procs.dt_widget_day.select_day_info {dbqd.acs-datetime.tcl.acs-calendar-2-procs.dt_widget_day.select_day_info {select   to_char(to_date(:current_date, 'yyyy-mm-dd'), 'Day, DD Month YYYY') 
as day_of_the_week,
to_char(to_date(:current_date, 'yyyy-mm-dd')-1, 'yyyy-mm-dd')
as yesterday,
to_char(to_date(:current_date, 'yyyy-mm-dd')+1, 'yyyy-mm-dd')
as tomorrow
from     dual
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-datetime/tcl/acs-calendar-2-procs-oracle.xql}
dbqd.acs-datetime.tcl.acs-calendar-procs.dt_get_info_from_db.dt_get_information {dbqd.acs-datetime.tcl.acs-calendar-procs.dt_get_info_from_db.dt_get_information {	select to_char(to_date(:the_date,'yyyy-mm-dd'),'J') as julian_date_today,
               to_char(trunc(to_date(:the_date, 'yyyy-mm-dd'), 'Month'), 'fmMonth') as month, 
               to_char(trunc(to_date(:the_date, 'yyyy-mm-dd'), 'Month'), 'YYYY') as year, 
               to_char(trunc(to_date(:the_date, 'yyyy-mm-dd'), 'Month'), 'J') as first_julian_date_of_month, 
               to_char(last_day(to_date(:the_date, 'yyyy-mm-dd')), 'DD') as num_days_in_month,
               to_char(trunc(to_date(:the_date, 'yyyy-mm-dd'), 'Month'), 'D') as first_day_of_month, 
               to_char(last_day(to_date(:the_date, 'yyyy-mm-dd')), 'DD') as last_day,
               trunc(add_months(to_date(:the_date, 'yyyy-mm-dd'), 1)) as next_month,
               trunc(add_months(to_date(:the_date, 'yyyy-mm-dd'), -1)) as prev_month,
               trunc(to_date(:the_date, 'yyyy-mm-dd'), 'yyyy') as beginning_of_year,
               to_char(last_day(add_months(to_date(:the_date, 'yyyy-mm-dd'), -1)), 'DD') as days_in_last_month,
               to_char(add_months(to_date(:the_date, 'yyyy-mm-dd'), 1), 'fmMonth') as next_month_name,
               to_char(add_months(to_date(:the_date, 'yyyy-mm-dd'), -1), 'fmMonth') as prev_month_name
	from   dual
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-datetime/tcl/acs-calendar-procs-oracle.xql}
dbqd.acs-datetime.tcl.acs-datetime-procs.dt_julian_to_ansi.julian_to_ansi {dbqd.acs-datetime.tcl.acs-datetime-procs.dt_julian_to_ansi.julian_to_ansi {    select to_char(to_date(:julian_date,'J'),'yyyy-mm-dd') 
      } {} {} {} F:/temp/openacs-4/packages/acs-datetime/tcl/acs-datetime-procs.xql}
dbqd.acs-developer-support.tcl.acs-developer-support-procs.ds_instance_id.acs_kernel_id_get {dbqd.acs-developer-support.tcl.acs-developer-support-procs.ds_instance_id.acs_kernel_id_get {	select package_id from apm_packages
	where package_key = 'acs-developer-support'
	and rownum=1
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-developer-support/tcl/acs-developer-support-procs-oracle.xql}
dbqd.acs-developer-support.tcl.acs-developer-support-procs.ds_require_permission.name {dbqd.acs-developer-support.tcl.acs-developer-support-procs.ds_require_permission.name {      select acs_object.name(:object_id) from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-developer-support/tcl/acs-developer-support-procs-oracle.xql}
dbqd.acs-developer-support.tcl.acs-developer-support-procs.ds_support_url.ds_support_url {dbqd.acs-developer-support.tcl.acs-developer-support-procs.ds_support_url.ds_support_url {	select site_node.url(node_id) 
	from site_nodes s, apm_packages p
	where p.package_id = s.object_id
	and p.package_key ='acs-developer-support'
	and rownum = 1
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-developer-support/tcl/acs-developer-support-procs-oracle.xql}
dbqd.acs-developer-support.tcl.acs-developer-support-procs.ds_user_select_widget.users {dbqd.acs-developer-support.tcl.acs-developer-support-procs.ds_user_select_widget.users {	select u.user_id as user_id_from_db, 
	       acs_object.name(user_id) as name, 
	       p.email 
	from   users u, 
	       parties p 
	where  u.user_id = p.party_id 
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-developer-support/tcl/acs-developer-support-procs-oracle.xql}
dbqd.acs-developer-support.tcl.acs-developer-support-procs.ds_user_select_widget.users {dbqd.acs-developer-support.tcl.acs-developer-support-procs.ds_user_select_widget.users {	select u.user_id as user_id_from_db, 
	       acs_object.name(user_id) as name, 
	       p.email 
	from   users u, 
	       parties p 
	where  u.user_id = p.party_id 
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-developer-support/tcl/acs-developer-support-procs-oracle.xql}
dbqd.acs-developer-support.www.request-info.user_info {dbqd.acs-developer-support.www.request-info.user_info {                        select first_names, last_name, email
                        from users
                        where user_id = $conn(user_id)
		    
      } {} {} {} F:/temp/openacs-4/packages/acs-developer-support/www/request-info.xql}
dbqd.acs-lang.tcl.lang-init.select_lang_keys {dbqd.acs-lang.tcl.lang-init.select_lang_keys {	select key 
	,rtrim(lang) as lang 
	,message 
	from lang_messages
      } {} {} {} F:/temp/openacs-4/packages/acs-lang/tcl/lang-init-oracle.xql}
dbqd.acs-lang.tcl.lang-procs.lang_message_register.lang_message_update {dbqd.acs-lang.tcl.lang-procs.lang_message_register.lang_message_update {		    update lang_messages set 
		    registered_p = 't' 
                    ,message = empty_clob() 
		    where lang = :lang and key = :key
            returning message into :1
      } {} {} {} F:/temp/openacs-4/packages/acs-lang/tcl/lang-procs-oracle.xql}
dbqd.acs-lang.tcl.lang-procs.lang_message_register.lang_message_insert {dbqd.acs-lang.tcl.lang-procs.lang_message_register.lang_message_insert {		insert into lang_messages (key, lang, message, registered_p) 
		values (:key, :lang, empty_clob(),'t') 
                returning message into :1
      } {} {} {} F:/temp/openacs-4/packages/acs-lang/tcl/lang-procs-oracle.xql}
dbqd.acs-lang.tcl.lang-procs.lang_message_register.lang_message_update {dbqd.acs-lang.tcl.lang-procs.lang_message_register.lang_message_update {		    update lang_messages set 
		    registered_p = 't' 
                    ,message = :message 
		    where lang = :lang and key = :key
      } {} {} {} F:/temp/openacs-4/packages/acs-lang/tcl/lang-procs.xql}
dbqd.acs-lang.tcl.lang-procs.lang_message_register.lang_message_insert {dbqd.acs-lang.tcl.lang-procs.lang_message_register.lang_message_insert {		insert into lang_messages (key, lang, message, registered_p) 
		values (:key, :lang, :message,'t') 
      } {} {} {} F:/temp/openacs-4/packages/acs-lang/tcl/lang-procs.xql}
dbqd.acs-lang.tcl.locale-procs.ad_locale_system_tz_offset.system_offset {dbqd.acs-lang.tcl.locale-procs.ad_locale_system_tz_offset.system_offset {	select ( (sysdate - timezone.local_to_utc (:system_timezone, sysdate)) * 24 )
	from dual
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-lang/tcl/locale-procs-oracle.xql}
dbqd.acs-lang.tcl.locale-procs.ad_locale_charset_for_locale.charset_for_locale {dbqd.acs-lang.tcl.locale-procs.ad_locale_charset_for_locale.charset_for_locale {	select mime_charset
	  from ad_locales 
	 where locale = :locale
    
      } {} {} {} F:/temp/openacs-4/packages/acs-lang/tcl/locale-procs.xql}
dbqd.acs-lang.tcl.locale-procs.ad_locale_locale_from_lang.default_locale {dbqd.acs-lang.tcl.locale-procs.ad_locale_locale_from_lang.default_locale {	select locale 
	  from ad_locales 
	 where language = :language
               and default_p = 't'
    
      } {} {} {} F:/temp/openacs-4/packages/acs-lang/tcl/locale-procs.xql}
dbqd.acs-lang.tcl.locale-procs.ad_locale_locale_from_lang.default_locale {dbqd.acs-lang.tcl.locale-procs.ad_locale_locale_from_lang.default_locale {	select locale 
	  from ad_locales 
	 where language = :language
               and default_p = 't'
    
      } {} {} {} F:/temp/openacs-4/packages/acs-lang/tcl/locale-procs.xql}
dbqd.acs-lang.tcl.localization-procs.lc_time_utc_to_local.utc_to_local {dbqd.acs-lang.tcl.localization-procs.lc_time_utc_to_local.utc_to_local {	    begin
	    :1 := to_char(timezone.utc_to_local(timezone.get_id(:tz), to_date(:time_value, 'YYYY-MM-DD HH24:MI:SS')), 'YYYY-MM-DD HH24:MI:SS');
	    end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-lang/tcl/localization-procs-oracle.xql}
dbqd.acs-lang.tcl.localization-procs.lc_time_local_to_utc.local_to_utc {dbqd.acs-lang.tcl.localization-procs.lc_time_local_to_utc.local_to_utc {	    begin
	    :1 := to_char(timezone.local_to_utc(timezone.get_id(:tz), to_date(:time_value, 'YYYY-MM-DD HH24:MI:SS')), 'YYYY-MM-DD HH24:MI:SS');
	    end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-lang/tcl/localization-procs-oracle.xql}
dbqd.acs-lang.tcl.localization-procs.lc_monetary_currency.lc_currency_select {dbqd.acs-lang.tcl.localization-procs.lc_monetary_currency.lc_currency_select {	SELECT fractional_digits
               ,html_entity 
          FROM currency_codes 
         WHERE iso = :currency
    
      } {} {} {} F:/temp/openacs-4/packages/acs-lang/tcl/localization-procs.xql}
dbqd.acs-lang.tcl.localization-procs.lc_list_all_timezones.all_timezones {dbqd.acs-lang.tcl.localization-procs.lc_list_all_timezones.all_timezones {      select unique tz, gmt_offset from timezones order by tz
      } {} {} {} F:/temp/openacs-4/packages/acs-lang/tcl/localization-procs.xql}
dbqd.acs-lang.www.format-test.lang_system_time_select {dbqd.acs-lang.www.format-test.lang_system_time_select {      SELECT to_char(sysdate, 'YYYY-MM-DD HH24:MI:SS') AS system_time FROM dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-lang/www/format-test-oracle.xql}
dbqd.acs-lang.www.set-system-timezone.sysdate {dbqd.acs-lang.www.set-system-timezone.sysdate {      select to_char(sysdate, 'YYYY-MM-DD
HH24:MI:SS') from dual 
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-lang/www/set-system-timezone-oracle.xql}
dbqd.acs-lang.www.test.lang_system_time_select {dbqd.acs-lang.www.test.lang_system_time_select {      SELECT to_char(sysdate, 'YYYY-MM-DD HH24:MI:SS') AS system_time FROM dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-lang/www/test-oracle.xql}
dbqd.acs-lang.www.timezone.lang_system_time_select {dbqd.acs-lang.www.timezone.lang_system_time_select {      SELECT to_char(sysdate, 'YYYY-MM-DD HH24:MI:SS') AS system_time FROM dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-lang/www/timezone-oracle.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_set_content.insert_new_content {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_set_content.insert_new_content {begin
	:1 := content_item.new (
	    name          => 'acs-mail message $body_id',
	    creation_user => :creation_user,
		creation_ip   => :creation_ip,
		title         => :header_subject,
		nls_language  => :nls_language,
		text		  => :content,
		storage_type  => 'lob'
    );
end;
    
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-mail/tcl/acs-mail-procs-oracle.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_set_content.get_latest_revision {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_set_content.get_latest_revision {begin
  :1 := content_item.get_latest_revision ( :item_id );
end;
    
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-mail/tcl/acs-mail-procs-oracle.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_set_content.set_live_revision {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_set_content.set_live_revision {begin
	content_item.set_live_revision(:revision_id);
end;
    
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-mail/tcl/acs-mail-procs-oracle.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_set_content_file.insert_new_content {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_set_content_file.insert_new_content {begin
	:1 := content_item.new (
		name => 'acs-mail message $body_id',
		creation_user => :creation_user,
		creation_ip   => :creation_ip,
		title		  => :header_subject,
		nls_language  => :nls_language,
		storage_type  => 'file'
    );
end;

} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-mail/tcl/acs-mail-procs-oracle.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_set_content_file.get_latest_revision {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_set_content_file.get_latest_revision {begin
  :1 := content_item.get_latest_revision ( :item_id );
end;"
    
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-mail/tcl/acs-mail-procs-oracle.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_set_content_file.set_live_revision {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_set_content_file.set_live_revision {begin
	content_item.set_live_revision(:revision_id);
end;
    
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-mail/tcl/acs-mail-procs-oracle.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_set_content_file.update_content {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_set_content_file.update_content {update cr_revisions
  set content = empty_blob()
  where revision_id = :revision_id
  returning content into :1
    
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-mail/tcl/acs-mail-procs-oracle.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_encode_content.get_latest_revision {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_encode_content.get_latest_revision {begin
    :1 := content_item.get_latest_revision ( :content_item_id );
end;
    
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-mail/tcl/acs-mail-procs-oracle.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_encode_content.copy_blob_to_file {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_encode_content.copy_blob_to_file {select r.content, i.storage_type 
from cr_revisions r, cr_items i 
where r.revision_id = $revision_id and
      r.item_id = i.item_id
        
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-mail/tcl/acs-mail-procs-oracle.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_body_new.acs_mail_body_new {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_body_new.acs_mail_body_new {begin
    :1 := acs_mail_body.new (
        body_id => :body_id,
        body_reply_to => :body_reply_to,
        body_from => :body_from,
        body_date => :body_date,
        header_message_id => :header_message_id,
        header_reply_to => :header_reply_to,
        header_subject => :header_subject,
        header_from => :header_from,
        header_to => :header_to,
        content_item_id => :content_item_id,
        creation_user => :creation_user,
        creation_ip => :creation_ip
    );
end;
    
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-mail/tcl/acs-mail-procs-oracle.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_body_p.acs_mail_body_p {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_body_p.acs_mail_body_p {        begin
            :1 := acs_mail_body.body_p (:object_id);
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-mail/tcl/acs-mail-procs-oracle.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_body_clone.acs_mail_body_clone {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_body_clone.acs_mail_body_clone {        begin
            :1 := acs_mail_body.clone (
                old_body_id => :old_body_id,
                body_id => :body_id,
                creation_user => :creation_user,
                creation_ip => :creation_ip
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-mail/tcl/acs-mail-procs-oracle.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_body_set_content_object.acs_mail_body_set_content_object {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_body_set_content_object.acs_mail_body_set_content_object {begin
    acs_mail_body.set_content_object (
        body_id => :body_id,
        content_item_id => :content_item_id
    );
end;
    
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-mail/tcl/acs-mail-procs-oracle.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_multipart_new.acs_mail_multipart_new {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_multipart_new.acs_mail_multipart_new {        begin
            :1 := acs_mail_multipart.new (
                multipart_id => :multipart_id,
                multipart_kind => :multipart_kind,
                creation_user => :creation_user,
                creation_ip => :creation_ip
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-mail/tcl/acs-mail-procs-oracle.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_multipart_p.acs_mail_multipart_p {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_multipart_p.acs_mail_multipart_p {        begin
            :1 := acs_mail_multipart.multipart_p (:object_id);
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-mail/tcl/acs-mail-procs-oracle.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_multipart_add_content.acs_mail_multipart_add_content {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_multipart_add_content.acs_mail_multipart_add_content {begin
    :1 := acs_mail_multipart.add_content (
        multipart_id => :multipart_id,
        content_item_id => :content_item_id
    );
end;
    
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-mail/tcl/acs-mail-procs-oracle.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_link_new.acs_mail_link_new {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_link_new.acs_mail_link_new {        begin
            :1 := acs_mail_link.new (
                mail_link_id => :mail_link_id,
                body_id => :body_id,
                context_id => :context_id,
                creation_user => :creation_user,
                creation_ip => :creation_ip
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-mail/tcl/acs-mail-procs-oracle.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_link_p.acs_mail_link_p {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_link_p.acs_mail_link_p {        begin
            :1 := acs_mail_link.link_p (:object_id);
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-mail/tcl/acs-mail-procs-oracle.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_encode_content.get_storage_type {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_encode_content.get_storage_type {select storage_type from cr_items 
where item_id = :content_item_id

} {} {} {} F:/temp/openacs-4/packages/acs-mail/tcl/acs-mail-procs.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_encode_content.acs_mail_body_to_mime_get_content_simple {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_encode_content.acs_mail_body_to_mime_get_content_simple {select content, mime_type as v_content_type
	from cr_revisions
	where revision_id = :revision_id
        
} {} {} {} F:/temp/openacs-4/packages/acs-mail/tcl/acs-mail-procs.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_encode_content.acs_mail_body_to_mime_get_contents {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_encode_content.acs_mail_body_to_mime_get_contents {select mime_filename, mime_disposition, content_item_id as ci_id
  from acs_mail_multipart_parts
  where multipart_id = :content_item_id
  order by sequence_number
        
} {} {} {} F:/temp/openacs-4/packages/acs-mail/tcl/acs-mail-procs.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_body_to_output_format.acs_mail_body_to_mime_get_body {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_body_to_output_format.acs_mail_body_to_mime_get_body {select body_id from acs_mail_links where mail_link_id = :link_id
        
} {} {} {} F:/temp/openacs-4/packages/acs-mail/tcl/acs-mail-procs.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_body_to_output_format.acs_mail_body_to_mime_data {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_body_to_output_format.acs_mail_body_to_mime_data {select header_message_id, header_reply_to, header_subject,
       header_from, header_to, content_item_id
  from acs_mail_bodies
  where body_id = :body_id
    
} {} {} {} F:/temp/openacs-4/packages/acs-mail/tcl/acs-mail-procs.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_body_to_output_format.acs_mail_body_to_mime_headers {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_body_to_output_format.acs_mail_body_to_mime_headers {select header_name, header_content from acs_mail_body_headers
  where body_id = :body_id
    
} {} {} {} F:/temp/openacs-4/packages/acs-mail/tcl/acs-mail-procs.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_process_queue.acs_message_send {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_process_queue.acs_message_send {select message_id, envelope_from, envelope_to from acs_mail_queue_outgoing
    
} {} {} {} F:/temp/openacs-4/packages/acs-mail/tcl/acs-mail-procs.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_process_queue.acs_message_delete_sent {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_process_queue.acs_message_delete_sent {delete from acs_mail_queue_outgoing
  where message_id = :message_id
    and envelope_from = :envelope_from
    and envelope_to = :envelope_to
            
} {} {} {} F:/temp/openacs-4/packages/acs-mail/tcl/acs-mail-procs.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_process_queue.acs_message_cleanup_queue {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_process_queue.acs_message_cleanup_queue {delete from acs_mail_queue_messages
  where message_id not in
  (select message_id from acs_mail_queue_outgoing)
  and message_id not in
  (select message_id from acs_mail_queue_incoming)
    
} {} {} {} F:/temp/openacs-4/packages/acs-mail/tcl/acs-mail-procs.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_multipart_type.acs_mail_multipart_type {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_multipart_type.acs_mail_multipart_type {select multipart_kind from acs_mail_multiparts
  where multipart_id = :object_id
    
} {} {} {} F:/temp/openacs-4/packages/acs-mail/tcl/acs-mail-procs.xql}
dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_link_get_body_id.acs_mail_link_get_body_id {dbqd.acs-mail.tcl.acs-mail-procs.acs_mail_link_get_body_id.acs_mail_link_get_body_id {select body_id from acs_mail_links where mail_link_id = :link_id
    
} {} {} {} F:/temp/openacs-4/packages/acs-mail/tcl/acs-mail-procs.xql}
dbqd.acs-messaging.tcl.acs-messaging-procs.acs_messaging_send_query.insert_messaging_by_query {dbqd.acs-messaging.tcl.acs-messaging-procs.acs_messaging_send_query.insert_messaging_by_query {        insert into acs_messages_outgoing
            (message_id, to_address, grouping_id, wait_until)
        select :m__message_id, p.email, q.grouping_id,
               nvl(q.wait_until, SYSDATE) as wait_until
            from ($query) q, parties p
            where not exists (select 1 from acs_messages_outgoing o
                                  where o.message_id = :m__message_id
                                    and p.email = o.to_address)
              and p.party_id = q.recipient_id
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-messaging/tcl/acs-messaging-procs-oracle.xql}
dbqd.acs-messaging.tcl.acs-messaging-procs.acs_message_p.acs_message_p {dbqd.acs-messaging.tcl.acs-messaging-procs.acs_message_p.acs_message_p {	begin
	    :1 := acs_message.message_p(:message_id);
	end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-messaging/tcl/acs-messaging-procs-oracle.xql}
dbqd.acs-messaging.tcl.acs-messaging-procs.acs_messaging_first_ancestor.acs_message_first_ancestor {dbqd.acs-messaging.tcl.acs-messaging-procs.acs_messaging_first_ancestor.acs_message_first_ancestor {	select acs_message.first_ancestor(:message_id) as ancestor_id from dual
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-messaging/tcl/acs-messaging-procs-oracle.xql}
dbqd.acs-messaging.tcl.acs-messaging-procs.acs_messaging_send_query.insert_messaging_by_query {dbqd.acs-messaging.tcl.acs-messaging-procs.acs_messaging_send_query.insert_messaging_by_query {        insert into acs_messages_outgoing
            (message_id, to_address, grouping_id, wait_until)
        select :m__message_id, p.email, q.grouping_id,
               nvl(q.wait_until, SYSDATE) as wait_until
            from ($query) q, parties p
            where not exists (select 1 from acs_messages_outgoing o
                                  where o.message_id = :m__message_id
                                    and p.email = o.to_address)
              and p.party_id = q.recipient_id
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-messaging/tcl/acs-messaging-procs-oracle.xql}
dbqd.acs-messaging.tcl.acs-messaging-procs.acs_messaging_process_queue.acs_message_send {dbqd.acs-messaging.tcl.acs-messaging-procs.acs_messaging_process_queue.acs_message_send {        select o.message_id as sending_message_id,
               o.to_address as recip_email,
               p.email as sender_email,
               to_char(m.sent_date, 'Dy, DD Mon YYYY HH24:MI:SS') as sent_date,
               m.rfc822_id,
               m.title,
               m.mime_type,
               m.content,
               m2.rfc822_id as in_reply_to
            from acs_messages_outgoing o,
                 acs_messages_all m,
                 acs_messages_all m2,
                 parties p
            where o.message_id = m.message_id
                and m2.message_id(+) = m.reply_to
                and p.party_id = m.sender
                and wait_until <= sysdate
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-messaging/tcl/acs-messaging-procs-oracle.xql}
dbqd.acs-messaging.tcl.acs-messaging-procs.acs_messaging_process_queue.acs_message_remove_from_queue {dbqd.acs-messaging.tcl.acs-messaging-procs.acs_messaging_process_queue.acs_message_remove_from_queue {                delete from acs_messages_outgoing
                    where message_id = :sending_message_id
                        and to_address = :recip_email
            
      } {} {} {} F:/temp/openacs-4/packages/acs-messaging/tcl/acs-messaging-procs.xql}
dbqd.acs-reference.www.reference-data-list.data_select {dbqd.acs-reference.www.reference-data-list.data_select {select repository_id,
  table_name,
  internal_data_p,
  package_name,
  to_char(last_update,'MM-DD-YYYY') updated,
  source,
  source_url,
  effective_date,
  expiry_date
from  acs_reference_repositories a
order by table_name

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-reference/www/reference-data-list-oracle.xql}
dbqd.acs-service-contract.tcl.acs-service-contract-init.binding_exists_p {dbqd.acs-service-contract.tcl.acs-service-contract-init.binding_exists_p {select acs_sc_binding.exists_p(:impl_contract_name,:impl_name) from dual
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-service-contract/tcl/acs-service-contract-init-oracle.xql}
dbqd.acs-service-contract.tcl.acs-service-contract-procs.acs_sc_binding_exists_p.binding_exists_p {dbqd.acs-service-contract.tcl.acs-service-contract-procs.acs_sc_binding_exists_p.binding_exists_p {select acs_sc_binding.exists_p(:contract,:impl) from dual
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-service-contract/tcl/acs-service-contract-procs-oracle.xql}
dbqd.acs-service-contract.tcl.acs-service-contract-procs.acs_sc_proc.operation_inputtype_element {dbqd.acs-service-contract.tcl.acs-service-contract-procs.acs_sc_proc.operation_inputtype_element {	select 
	    element_name, 
	    acs_sc_msg_type.get_name(element_msg_type_id) as element_msg_type_name,
	    element_msg_type_isset_p,
	    element_pos
	from acs_sc_msg_type_elements
	where msg_type_id = :operation_inputtype_id
	order by element_pos asc
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-service-contract/tcl/acs-service-contract-procs-oracle.xql}
dbqd.acs-service-contract.tcl.acs-service-contract-procs.acs_sc_proc.operation_outputtype_element {dbqd.acs-service-contract.tcl.acs-service-contract-procs.acs_sc_proc.operation_outputtype_element {	select 
	    element_name, 
	    acs_sc_msg_type.get_name(element_msg_type_id) as element_msg_type_name,
	    element_msg_type_isset_p,
	    element_pos
	from acs_sc_msg_type_elements
	where msg_type_id = :operation_outputtype_id
	order by element_pos asc
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-service-contract/tcl/acs-service-contract-procs-oracle.xql}
dbqd.acs-service-contract.www.binding-install.binding_install {dbqd.acs-service-contract.www.binding-install.binding_install {         begin
           acs_sc_binding.new(
             contract_id => :contract_id,
             impl_id => :impl_id);
         end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-service-contract/www/binding-install-oracle.xql}
dbqd.acs-service-contract.www.binding-uninstall.binding_uninstall {dbqd.acs-service-contract.www.binding-uninstall.binding_uninstall {         begin
           select acs_sc_binding.delete(:contract_id,:impl_id)
         end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-service-contract/www/binding-uninstall-oracle.xql}
dbqd.acs-service-contract.www.index.valid_installed_binding {dbqd.acs-service-contract.www.index.valid_installed_binding {        select 
            contract_id,
            impl_id,
            acs_sc_contract.get_name(contract_id) as contract_name,
            acs_sc_impl.get_name(impl_id) as impl_name
        from
            acs_sc_bindings
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-service-contract/www/index-oracle.xql}
dbqd.acs-service-contract.www.index.valid_uninstalled_binding {dbqd.acs-service-contract.www.index.valid_uninstalled_binding {     select contract_id, contract_name, impl_name,impl_id 
     from valid_uninstalled_bindings
   } {} {} {} F:/temp/openacs-4/packages/acs-service-contract/www/index.xql}
dbqd.acs-service-contract.www.index.invalid_uninstalled_binding {dbqd.acs-service-contract.www.index.invalid_uninstalled_binding {      select contract_id, contract_name, impl_name,impl_id 
      from invalid_uninstalled_bindings
   } {} {} {} F:/temp/openacs-4/packages/acs-service-contract/www/index.xql}
dbqd.acs-service-contract.www.index.orphan_implementation {dbqd.acs-service-contract.www.index.orphan_implementation {      select impl_id, impl_name, impl_contract_name  
      from orphan_implementations
   } {} {} {} F:/temp/openacs-4/packages/acs-service-contract/www/index.xql}
dbqd.acs-subsite.tcl.application-group-procs.application_group::contains_party_p.app_group_contains_party_p {dbqd.acs-subsite.tcl.application-group-procs.application_group::contains_party_p.app_group_contains_party_p {	    select case when exists (
	        select 1
	        from application_group_element_map
	        where package_id = :package_id
	          and element_id = :party_id
	      union all
	        select 1
	        from application_groups
	        where package_id = :package_id
	          and group_id = :party_id
	    ) then 1 else 0 end
            from dual
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/application-group-procs-oracle.xql}
dbqd.acs-subsite.tcl.application-group-procs.application_group::contains_party_p.app_group_contains_party_p {dbqd.acs-subsite.tcl.application-group-procs.application_group::contains_party_p.app_group_contains_party_p {	    select case when exists (
	        select 1
	        from application_group_element_map
	        where package_id = :package_id
	          and element_id = :party_id
	      union all
	        select 1
	        from application_groups
	        where package_id = :package_id
	          and group_id = :party_id
	    ) then 1 else 0 end
            from dual
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/application-group-procs-oracle.xql}
dbqd.acs-subsite.tcl.application-group-procs.application_group::contains_relation_p.app_group_contains_rel_p {dbqd.acs-subsite.tcl.application-group-procs.application_group::contains_relation_p.app_group_contains_rel_p {	    select case when exists (
	        select 1
	        from application_group_element_map
	        where package_id = :package_id
	          and rel_id = :rel_id
	    ) then 1 else 0 end
            from dual
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/application-group-procs-oracle.xql}
dbqd.acs-subsite.tcl.application-group-procs.application_group::contains_segment_p.app_group_contains_segment_p {dbqd.acs-subsite.tcl.application-group-procs.application_group::contains_segment_p.app_group_contains_segment_p {	    select case when exists (
	        select 1
	        from application_group_segments
	        where package_id = :package_id
	          and segment_id = :segment_id
	    ) then 1 else 0 end
            from dual
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/application-group-procs-oracle.xql}
dbqd.acs-subsite.tcl.application-group-procs.application_group::group_id_from_package_id.application_group_from_package_id_query {dbqd.acs-subsite.tcl.application-group-procs.application_group::group_id_from_package_id.application_group_from_package_id_query {	    begin
	    :1 := application_group.group_id_from_package_id (
	        package_id => :package_id,
	        no_complain_p => :no_complain_p
	    );
	    end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/application-group-procs-oracle.xql}
dbqd.acs-subsite.tcl.application-group-procs.application_group::new.parent_group_id_query {dbqd.acs-subsite.tcl.application-group-procs.application_group::new.parent_group_id_query {		    select ag.group_id as parent_group_id
		    from application_groups ag,
		         apm_packages,
		         (select object_id, rownum as tree_rownum
		          from site_nodes
		          start with node_id = :parent_node_id
		          connect by node_id = prior parent_id) nodes
                    where nodes.object_id = apm_packages.package_id
                      and apm_packages.package_id = ag.package_id
                      and tree_rownum=1
		
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/application-group-procs-oracle.xql}
dbqd.acs-subsite.tcl.application-group-procs.application_group::new.add_group {dbqd.acs-subsite.tcl.application-group-procs.application_group::new.add_group {		begin
		:1 := application_group.new (
	            group_id      => :group_id,
	            object_type    => :group_type,
	            group_name    => :group_name,
                    package_id    => :package_id,
	            context_id    => :context_id,
	            creation_user => :creation_user,
	            creation_ip   => :creation_ip,
		    email         => :email,
		    url           => :url
		);
		end;
	    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/application-group-procs-oracle.xql}
dbqd.acs-subsite.tcl.application-group-procs.application_group::new.add_composition_rel {dbqd.acs-subsite.tcl.application-group-procs.application_group::new.add_composition_rel {		    begin
		    :1 := composition_rel.new (
		            rel_type => 'composition_rel',
		            object_id_one => :parent_group_id,
		            object_id_two => :group_id,
		            creation_user => :creation_user,
                            creation_ip   => :creation_ip
		    );
		    end;
		
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/application-group-procs-oracle.xql}
dbqd.acs-subsite.tcl.application-group-procs.application_group::new.group_name_query {dbqd.acs-subsite.tcl.application-group-procs.application_group::new.group_name_query {		select substr(instance_name, 1, 90)
		from apm_packages
		where package_id = :package_id
	    
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/tcl/application-group-procs.xql}
dbqd.acs-subsite.tcl.application-group-procs.application_group::new.parent_node_id {dbqd.acs-subsite.tcl.application-group-procs.application_group::new.parent_node_id {		select parent_id
                from site_nodes
                where object_id = :package_id
	    
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/tcl/application-group-procs.xql}
dbqd.acs-subsite.tcl.attribute-procs.attribute_for_dynamic_object_p {dbqd.acs-subsite.tcl.attribute-procs.attribute_for_dynamic_object_p {	select case when exists (select 1 
                                   from acs_attributes a, acs_object_types t
                                  where t.dynamic_p = 't'
                                    and a.object_type = t.object_type
                                    and a.attribute_id = :value)
	            then 1 else 0 end
	  from dual
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/attribute-procs-oracle.xql}
dbqd.acs-subsite.tcl.attribute-procs.exists_p.attr_exists_p {dbqd.acs-subsite.tcl.attribute-procs.exists_p.attr_exists_p {	select case when exists (select 1 
                                   from acs_attributes a
                                  where (a.attribute_name = :attribute
                                         or a.column_name = :attribute)
                                    and a.object_type = :object_type)
                    then 1
                    else 0
                    end
          from dual
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/attribute-procs-oracle.xql}
dbqd.acs-subsite.tcl.attribute-procs.delete.select_attr_info {dbqd.acs-subsite.tcl.attribute-procs.delete.select_attr_info {        select a.object_type, a.attribute_name, 
               case when a.storage = 'type_specific' then t.table_name else a.table_name end as table_name,
	       nvl(a.column_name, a.attribute_name) as column_name
          from acs_attributes a, acs_object_types t
         where a.attribute_id = :attribute_id
           and t.object_type = a.object_type
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/attribute-procs-oracle.xql}
dbqd.acs-subsite.tcl.attribute-procs.array_for_type.select_attributes {dbqd.acs-subsite.tcl.attribute-procs.array_for_type.select_attributes {	select nvl(a.column_name, a.attribute_name) as name, 
               a.pretty_name, a.attribute_id, a.datatype, 
               v.enum_value, v.pretty_name as value_pretty_name
	from acs_object_type_attributes a,
               acs_enum_values v,
               (select t.object_type, level as type_level
                  from acs_object_types t
                 start with t.object_type = :start_with
               connect by prior t.object_type = t.supertype) t 
         where a.object_type = :object_type
           and a.attribute_id = v.attribute_id(+)
           and t.object_type = a.ancestor_type $storage_clause
        order by type_level, a.sort_order
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/attribute-procs-oracle.xql}
dbqd.acs-subsite.tcl.attribute-procs.attribute::add.drop_attribute {dbqd.acs-subsite.tcl.attribute-procs.attribute::add.drop_attribute {begin acs_attribute.drop_attribute(:object_type, :attribute_name); end;
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/attribute-procs-oracle.xql}
dbqd.acs-subsite.tcl.attribute-procs.attribute::add.create_attribute {dbqd.acs-subsite.tcl.attribute-procs.attribute::add.create_attribute {declare
  attr_id     acs_attributes.attribute_id%TYPE;
begin
  attr_id := acs_attribute.create_attribute (	
	object_type => '$object_type',
	attribute_name => '$attribute_name',
	min_n_values => '$min_n_values',
	max_n_values => '$max_n_values',
	default_value => '$default_value',
	datatype => '$datatype',
	pretty_name => '$pretty_name',
	pretty_plural => '$pretty_plural'
  );
end;
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/attribute-procs-oracle.xql}
dbqd.acs-subsite.tcl.attribute-procs.attribute::add.drop_attr_column {dbqd.acs-subsite.tcl.attribute-procs.attribute::add.drop_attr_column {alter table $table_name drop column $attribute_name
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/attribute-procs-oracle.xql}
dbqd.acs-subsite.tcl.attribute-procs.attribute::add.add_column {dbqd.acs-subsite.tcl.attribute-procs.attribute::add.add_column {alter table $table_name add $attribute_name $sql_type
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/attribute-procs-oracle.xql}
dbqd.acs-subsite.tcl.attribute-procs.attribute::delete.drop_attribute {dbqd.acs-subsite.tcl.attribute-procs.attribute::delete.drop_attribute {begin acs_attribute.drop_attribute(:object_type, :attribute_name); end;
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/attribute-procs-oracle.xql}
dbqd.acs-subsite.tcl.attribute-procs.attribute::delete.drop_attr_column {dbqd.acs-subsite.tcl.attribute-procs.attribute::delete.drop_attr_column {alter table $table_name drop column $column_name
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/attribute-procs-oracle.xql}
dbqd.acs-subsite.tcl.attribute-procs.attribute::add.select_table {dbqd.acs-subsite.tcl.attribute-procs.attribute::add.select_table {        select t.table_name
          from acs_object_types t
         where t.object_type = :object_type
    
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/tcl/attribute-procs.xql}
dbqd.acs-subsite.tcl.attribute-procs.attribute::add.select_attribute_id {dbqd.acs-subsite.tcl.attribute-procs.attribute::add.select_attribute_id {        select a.attribute_id
          from acs_attributes a
         where a.object_type = :object_type
           and a.attribute_name = :attribute_name
    
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/tcl/attribute-procs.xql}
dbqd.acs-subsite.tcl.attribute-procs.attribute::delete.select_attr_info {dbqd.acs-subsite.tcl.attribute-procs.attribute::delete.select_attr_info {        select a.object_type, a.attribute_name, 
               case when a.storage = 'type_specific' then t.table_name else a.table_name end as table_name,
	       coalesce(a.column_name, a.attribute_name) as column_name
          from acs_attributes a, acs_object_types t
         where a.attribute_id = :attribute_id
           and t.object_type = a.object_type
    
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/tcl/attribute-procs.xql}
dbqd.acs-subsite.tcl.attribute-procs.attribute::value_delete.select_last_sort_order {dbqd.acs-subsite.tcl.attribute-procs.attribute::value_delete.select_last_sort_order {        select v.sort_order as old_sort_order
          from acs_enum_values v
         where v.attribute_id = :attribute_id
           and v.enum_value = :enum_value
    
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/tcl/attribute-procs.xql}
dbqd.acs-subsite.tcl.attribute-procs.attribute::value_delete.delete_enum_value {dbqd.acs-subsite.tcl.attribute-procs.attribute::value_delete.delete_enum_value {        delete from acs_enum_values v
        where v.attribute_id = :attribute_id
        and v.enum_value = :enum_value
    
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/tcl/attribute-procs.xql}
dbqd.acs-subsite.tcl.attribute-procs.attribute::value_delete.update_sort_order {dbqd.acs-subsite.tcl.attribute-procs.attribute::value_delete.update_sort_order {            update acs_enum_values v
               set v.sort_order = v.sort_order - 1
             where v.attribute_id = :attribute_id
               and v.sort_order > :old_sort_order
        
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/tcl/attribute-procs.xql}
dbqd.acs-subsite.tcl.attribute-procs.attribute::multirow.object_type_query {dbqd.acs-subsite.tcl.attribute-procs.attribute::multirow.object_type_query {	    select object_type from acs_objects where object_id = :object_id
	
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/tcl/attribute-procs.xql}
dbqd.acs-subsite.tcl.attribute-procs.attribute::multirow.attribute_select {dbqd.acs-subsite.tcl.attribute-procs.attribute::multirow.attribute_select {        select * 
          from ($package_object_view) 
         where object_id = :object_id
	
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/tcl/attribute-procs.xql}
dbqd.acs-subsite.tcl.attribute-procs.attribute::add_form_elements.select_enum_values {dbqd.acs-subsite.tcl.attribute-procs.attribute::add_form_elements.select_enum_values {		select enum.pretty_name, enum.enum_value
		from acs_enum_values enum
		where enum.attribute_id = :attribute_id 
		order by enum.sort_order
	    
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/tcl/attribute-procs.xql}
dbqd.acs-subsite.tcl.attribute-procs.attribute::value_add.insert_enum_value {dbqd.acs-subsite.tcl.attribute-procs.attribute::value_add.insert_enum_value {	insert into acs_enum_values
	(attribute_id, sort_order, enum_value, pretty_name)
	select :attribute_id, :sort_order, :enum_value, :enum_value
	from dual
	where not exists (select 1 
	from acs_enum_values v2
	where v2.pretty_name = :enum_value
	and v2.attribute_id = :attribute_id)
} {} {} {} F:/temp/openacs-4/packages/acs-subsite/tcl/attribute-procs.xql}
dbqd.acs-subsite.tcl.group-procs.delete.delete_group {dbqd.acs-subsite.tcl.group-procs.delete.delete_group {	  BEGIN 
            -- the acs_group package takes care of segments referred
  	    -- to by rel_constraints.rel_segment. We delete the ones
	    -- references by rel_constraints.required_rel_segment here.

	    for row in (select cons.constraint_id
                          from rel_constraints cons, rel_segments segs
                         where segs.segment_id = cons.required_rel_segment
                           and segs.group_id = :group_id) loop

                rel_segment.delete(row.constraint_id);

            end loop;

	    -- delete the actual group
	    ${package_name}.delete(:group_id); 
	  END;
        
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/group-procs-oracle.xql}
dbqd.acs-subsite.tcl.group-procs.member_p.user_is_member {dbqd.acs-subsite.tcl.group-procs.member_p.user_is_member {	  select acs_group.member_p(:user_id,:group_id, :cascade) from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/group-procs-oracle.xql}
dbqd.acs-subsite.tcl.group-procs.new.package_select {dbqd.acs-subsite.tcl.group-procs.new.package_select {	    select t.package_name, lower(t.id_column) as id_column
	      from acs_object_types t
	     where t.object_type = :group_type
	
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/tcl/group-procs.xql}
dbqd.acs-subsite.tcl.group-procs.new.package_select {dbqd.acs-subsite.tcl.group-procs.new.package_select {	    select t.package_name, lower(t.id_column) as id_column
	      from acs_object_types t
	     where t.object_type = :group_type
	
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/tcl/group-procs.xql}
dbqd.acs-subsite.tcl.group-procs.join_policy.select_join_policy {dbqd.acs-subsite.tcl.group-procs.join_policy.select_join_policy {	    select join_policy from groups where group_id = :group_id
	
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/tcl/group-procs.xql}
dbqd.acs-subsite.tcl.group-procs.member_p.group_id_from_name {dbqd.acs-subsite.tcl.group-procs.member_p.group_id_from_name {	  select group_id from groups where group_name=:group_name
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/tcl/group-procs.xql}
dbqd.acs-subsite.tcl.group-type-procs.drop_all_groups_p.group_exists_p {dbqd.acs-subsite.tcl.group-type-procs.drop_all_groups_p.group_exists_p {	    select case when exists (select 1 
                                       from acs_objects o
                                      where acs_permission.permission_p(o.object_id, :user_id, 'delete') = 'f'
                                        and o.object_type = :group_type)
                        then 0 else 1 end
              from dual
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/group-type-procs-oracle.xql}
dbqd.acs-subsite.tcl.group-type-procs.group_type::new.drop_type {dbqd.acs-subsite.tcl.group-type-procs.group_type::new.drop_type {begin acs_object_type.drop_type('$group_type'); end;
      
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/group-type-procs-oracle.xql}
dbqd.acs-subsite.tcl.group-type-procs.group_type::new.create_type {dbqd.acs-subsite.tcl.group-type-procs.group_type::new.create_type {BEGIN
 acs_object_type.create_type (
   supertype     => :supertype,
   object_type   => :group_type,
   pretty_name   => :pretty_name,
   pretty_plural => :pretty_plural,
   table_name    => :table_name,
   id_column     => :id_column,
   package_name  => :package_name
 );
END;      

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/group-type-procs-oracle.xql}
dbqd.acs-subsite.tcl.group-type-procs.group_type::new.update_type {dbqd.acs-subsite.tcl.group-type-procs.group_type::new.update_type {update acs_object_types set dynamic_p='t' where object_type = :group_type

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/group-type-procs-oracle.xql}
dbqd.acs-subsite.tcl.group-type-procs.group_type::new.copy_rel_types {dbqd.acs-subsite.tcl.group-type-procs.group_type::new.copy_rel_types {	insert into group_type_rels 
	(group_rel_type_id, rel_type, group_type)
	select acs_object_id_seq.nextval, r.rel_type, :group_type
	  from group_type_rels r
	 where r.group_type = :supertype

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/group-type-procs-oracle.xql}
dbqd.acs-subsite.tcl.group-type-procs.group_type::new.select_group_id_column {dbqd.acs-subsite.tcl.group-type-procs.group_type::new.select_group_id_column {	    select upper(id_column) from acs_object_types where object_type='group'
	
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/tcl/group-type-procs.xql}
dbqd.acs-subsite.tcl.group-type-procs.group_type::new.supertype_table_column {dbqd.acs-subsite.tcl.group-type-procs.group_type::new.supertype_table_column {	    select t.table_name as references_table,
                   t.id_column as references_column
  	      from acs_object_types t
	     where t.object_type = :supertype
	
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/tcl/group-type-procs.xql}
dbqd.acs-subsite.tcl.group-type-procs.group_type::new.insert_group_type {dbqd.acs-subsite.tcl.group-type-procs.group_type::new.insert_group_type {		insert into group_types (group_type) values (:group_type)
	} {} {} {} F:/temp/openacs-4/packages/acs-subsite/tcl/group-type-procs.xql}
dbqd.acs-subsite.tcl.package-procs.package_type_dynamic_p.object_type_dynamic_p {dbqd.acs-subsite.tcl.package-procs.package_type_dynamic_p.object_type_dynamic_p {	select case when exists (select 1 
                                   from acs_object_types t
                                  where t.dynamic_p = 't'
                                    and t.object_type = :object_type)
	            then 1 else 0 end
	  from dual
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/package-procs-oracle.xql}
dbqd.acs-subsite.tcl.package-procs.package_create_attribute_list.select_all_attributes {dbqd.acs-subsite.tcl.package-procs.package_create_attribute_list.select_all_attributes {	select upper(nvl(attr.table_name,t.table_name)) as attr_table_name, 
	       upper(nvl(attr.column_name, attr.attribute_name)) as attr_column_name, 
	       attr.ancestor_type, attr.min_n_values, attr.default_value
	  from acs_object_type_attributes attr, 
	       (select t.object_type, t.table_name, level as type_level
	          from acs_object_types t
	         start with t.object_type = :object_type
	       connect by prior t.supertype = t.object_type) t
         where attr.ancestor_type = t.object_type
           and attr.object_type = :object_type
        order by t.type_level 
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/package-procs-oracle.xql}
dbqd.acs-subsite.tcl.package-procs.package_recreate_hierarchy.select_object_types {dbqd.acs-subsite.tcl.package-procs.package_recreate_hierarchy.select_object_types {	select t.object_type
	  from acs_object_types t
	 where t.dynamic_p = 't'
	 start with t.object_type = :object_type
       connect by prior t.object_type = t.supertype
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/package-procs-oracle.xql}
dbqd.acs-subsite.tcl.package-procs.package_create.package_valid_p {dbqd.acs-subsite.tcl.package-procs.package_create.package_valid_p {	    select case when exists (select 1 
                                       from user_objects 
                                      where status = 'INVALID'
                                        and object_name = upper(:package_name)
                                        and object_type = upper(:type))
                        then 0 else 1 end
	      from dual
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/package-procs-oracle.xql}
dbqd.acs-subsite.tcl.package-procs.package_object_view_reset.select_ancestor_types {dbqd.acs-subsite.tcl.package-procs.package_object_view_reset.select_ancestor_types {	select t.object_type as ancestor_type
	  from acs_object_types t 
	 start with t.object_type = :object_type 
       connect by prior t.supertype = t.object_type
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/package-procs-oracle.xql}
dbqd.acs-subsite.tcl.package-procs.package_object_view_reset.select_sub_types {dbqd.acs-subsite.tcl.package-procs.package_object_view_reset.select_sub_types {	select t.object_type as sub_type
	  from acs_object_types t 
	 start with t.object_type = :object_type 
       connect by prior t.object_type = t.supertype
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/package-procs-oracle.xql}
dbqd.acs-subsite.tcl.package-procs.package_insert_default_comment.select_comments {dbqd.acs-subsite.tcl.package-procs.package_insert_default_comment.select_comments {	    select acs_object.name(:user_id) as author,
	           sysdate as creation_date
	      from dual
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/package-procs-oracle.xql}
dbqd.acs-subsite.tcl.package-procs.package_insert_default_comment.select_comments {dbqd.acs-subsite.tcl.package-procs.package_insert_default_comment.select_comments {	    select acs_object.name(:user_id) as author,
	           sysdate as creation_date
	      from dual
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/package-procs-oracle.xql}
dbqd.acs-subsite.tcl.package-procs.package_object_attribute_list.attributes_select {dbqd.acs-subsite.tcl.package-procs.package_object_attribute_list.attributes_select {	select a.attribute_id, 
	       nvl(a.table_name, t.table_name) as table_name,
	       nvl(a.column_name, a.attribute_name) as attribute_name, 
	       a.pretty_name, 
	       a.datatype, 
	       case when a.min_n_values = 0 then 'f' else 't' end as required_p, 
               a.default_value, 
               t.table_name as object_type_table_name, 
               t.id_column as object_type_id_column
          from acs_object_type_attributes a, 
               (select t.object_type, t.table_name, t.id_column, level as type_level
                  from acs_object_types t
                 start with t.object_type=:start_with
               connect by prior t.object_type = t.supertype) t 
         where a.object_type = :object_type
           and t.object_type = a.ancestor_type $storage_clause
         order by type_level
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/package-procs-oracle.xql}
dbqd.acs-subsite.tcl.package-procs.package_table_columns_for_type.select_object_type_param_list {dbqd.acs-subsite.tcl.package-procs.package_table_columns_for_type.select_object_type_param_list {	select cols.table_name, cols.column_name
	  from user_tab_columns cols, 
	       (select upper(t.table_name) as table_name
	          from acs_object_types t
                 start with t.object_type = :object_type
               connect by prior t.supertype = t.object_type) t
	 where cols.column_name in
	          (select args.argument_name
                     from user_arguments args
                    where args.position > 0
	              and args.object_name = upper(:object_name)
	              and args.package_name = upper(:package_name))
	   and cols.table_name = t.table_name
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/package-procs-oracle.xql}
dbqd.acs-subsite.tcl.package-procs.package_instantiate_object.create_object {dbqd.acs-subsite.tcl.package-procs.package_instantiate_object.create_object \ \ \ \ BEGIN\n\ \ \ \ \ \ :1\ :=\ \$\{package_name\}.new(\[plsql_utility::generate_attribute_parameter_call\ \\\n\t\ \ \ \ \ \ -prepend\ \":\"\ \\\n\t\ \ \ \ \ \ -indent\ \[expr\ \[string\ length\ \$package_name\]\ +\ 29\]\ \\\n\t\ \ \ \ \ \ \$pieces\]\n\ \ \ \ \ \ )\;\n\ \ \ \ END\;\ \n\ \ \ \ \n\ \ \ \ \ \  {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/package-procs-oracle.xql}
dbqd.acs-subsite.tcl.package-procs.package_generate_body.body {dbqd.acs-subsite.tcl.package-procs.package_generate_body.body create\ or\ replace\ package\ body\ \$\{package_name\}\nas\n\[package_insert_default_comment\]\n\ \ function\ new\ (\ \n\ \ \ \ \ \ \ \ \ \[plsql_utility::generate_attribute_parameters\ \$attribute_list\]\n\ \ )\ return\ \$\{table_name\}.\$\{id_column\}%TYPE\n\ \ is\n\ \ \ \ v_\$id_column\ \$\{table_name\}.\$\{id_column\}%TYPE\;\n\ \ begin\n\n\ \ \ \ v_\$id_column\ :=\ \$\{supertype_package_name\}.new\ (\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \[plsql_utility::generate_attribute_parameter_call_from_attributes\ \\\n\t\t\t\ \ \ \ \ -prepend\ \"new.\"\ \\\n\t\t\t\ \ \ \ \ -indent\ 21\ \\\n\t\t\t\ \ \ \ \ \$supertype_attr_list\]\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ )\;\n\n\ \ \ \ insert\ into\ \$\{table_name\}\ \n\ \ \ \ (\$id_column\[plsql_utility::generate_attribute_dml\ -ignore\ \[list\ \$id_column\]\ \$table_name\ \$attribute_list\])\ \n\ \ \ \ values\ \n\ \ \ \ (v_\$id_column\[plsql_utility::generate_attribute_dml\ -prepend\ \"new.\"\ -ignore\ \[list\ \$id_column\]\ \$table_name\ \$attribute_list\])\;\n\n\ \ \ \ return\ v_\$id_column\;\n\n\ \ end\ new\;\n\n\ \ procedure\ delete\ (\n\ \ \ \ \$id_column\ \ \ \ \ \ in\ \$\{table_name\}.\$\{id_column\}%TYPE\n\ \ )\n\ \ is\ \n\ \ begin\n\n\ \ \ \ \$\{supertype_package_name\}.delete(\ \$package_name.delete.\$id_column\ )\;\n\n\ \ end\ delete\;\n\nend\ \$\{package_name\}\;\n\ \ \ \ \n\ \ \ \ \ \  {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/package-procs-oracle.xql}
dbqd.acs-subsite.tcl.package-procs.package_generate_spec.spec {dbqd.acs-subsite.tcl.package-procs.package_generate_spec.spec create\ or\ replace\ package\ \$package_name\ as\n\[package_insert_default_comment\]\n\ \ function\ new\ (\n\ \ \ \ \ \ \ \ \ \[plsql_utility::generate_attribute_parameters\ \[package_create_attribute_list\ \\\n\t\t\ -supertype\ \$supertype\ \\\n\t\t\ -object_name\ \"NEW\"\ \\\n\t\t\ -table\ \$table_name\ \\\n\t\t\ -column\ \$id_column\ \\\n\t\t\ \$object_type\]\]\n\ )\ return\ \$\{table_name\}.\$\{id_column\}%TYPE\;\n\n\ \ procedure\ delete\ (\n\ \ \ \ \$id_column\ \ \ \ \ \ in\ \$\{table_name\}.\$\{id_column\}%TYPE\n\ \ )\;\nEND\ \$\{package_name\}\;\n\ \ \ \ \n\ \ \ \ \ \  {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/package-procs-oracle.xql}
dbqd.acs-subsite.tcl.package-procs.package_attribute_default.creation_date {dbqd.acs-subsite.tcl.package-procs.package_attribute_default.creation_date sysdate {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/package-procs-oracle.xql}
dbqd.acs-subsite.tcl.package-procs.package_attribute_default.last_modified {dbqd.acs-subsite.tcl.package-procs.package_attribute_default.last_modified sysdate {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/package-procs-oracle.xql}
dbqd.acs-subsite.tcl.package-procs.package_create_attribute_list.select_type_info {dbqd.acs-subsite.tcl.package-procs.package_create_attribute_list.select_type_info {	    select t.table_name as table, t.id_column as column
	      from acs_object_types t
	     where t.object_type = :object_type
	
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/tcl/package-procs.xql}
dbqd.acs-subsite.tcl.package-procs.package_create.select_package_name {dbqd.acs-subsite.tcl.package-procs.package_create.select_package_name {	select t.package_name
	  from acs_object_types t
	 where t.object_type = :object_type
    
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/tcl/package-procs.xql}
dbqd.acs-subsite.tcl.package-procs.package_create_attribute_list.select_type_info {dbqd.acs-subsite.tcl.package-procs.package_create_attribute_list.select_type_info {	select t.table_name, t.id_column, lower(t.package_name) as package_name, t.supertype
	  from acs_object_types t
	 where t.object_type = :object_type
    
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/tcl/package-procs.xql}
dbqd.acs-subsite.tcl.package-procs.package_create_attribute_list.select_type_info {dbqd.acs-subsite.tcl.package-procs.package_create_attribute_list.select_type_info {	select t.table_name, t.id_column, lower(t.package_name) as package_name, t.supertype
	  from acs_object_types t
	 where t.object_type = :object_type
    
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/tcl/package-procs.xql}
dbqd.acs-subsite.tcl.package-procs.package_create_attribute_list.select_type_info {dbqd.acs-subsite.tcl.package-procs.package_create_attribute_list.select_type_info {	select t.table_name, t.id_column, lower(t.package_name) as package_name, t.supertype
	  from acs_object_types t
	 where t.object_type = :object_type
    
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/tcl/package-procs.xql}
dbqd.acs-subsite.tcl.package-procs.package_create_attribute_list.select_type_info {dbqd.acs-subsite.tcl.package-procs.package_create_attribute_list.select_type_info {	select t.table_name, t.id_column, lower(t.package_name) as package_name, t.supertype
	  from acs_object_types t
	 where t.object_type = :object_type
    
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/tcl/package-procs.xql}
dbqd.acs-subsite.tcl.package-procs.package_create_attribute_list.select_type_info {dbqd.acs-subsite.tcl.package-procs.package_create_attribute_list.select_type_info {	select t.table_name, t.id_column, lower(t.package_name) as package_name, t.supertype
	  from acs_object_types t
	 where t.object_type = :object_type
    
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/tcl/package-procs.xql}
dbqd.acs-subsite.tcl.package-procs.package_instantiate_object.package_select {dbqd.acs-subsite.tcl.package-procs.package_instantiate_object.package_select {	    select t.package_name
	      from acs_object_types t
	     where t.object_type = :object_type
	
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/tcl/package-procs.xql}
dbqd.acs-subsite.tcl.package-procs.package_object_view_helper.select_type_info {dbqd.acs-subsite.tcl.package-procs.package_object_view_helper.select_type_info {	select t.table_name, t.id_column
          from acs_object_types t
	 where t.object_type = :object_type
	
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/tcl/package-procs.xql}
dbqd.acs-subsite.tcl.party-procs.party::types_valid_for_rel_type_multirow.start_with_clause_party {dbqd.acs-subsite.tcl.party-procs.party::types_valid_for_rel_type_multirow.start_with_clause_party {        (object_type = 'group' or object_type = 'person')
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/party-procs-oracle.xql}
dbqd.acs-subsite.tcl.party-procs.party::types_valid_for_rel_type_multirow.start_with_clause {dbqd.acs-subsite.tcl.party-procs.party::types_valid_for_rel_type_multirow.start_with_clause {        object_type = :start_with
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/party-procs-oracle.xql}
dbqd.acs-subsite.tcl.party-procs.party::types_valid_for_rel_type_multirow.select_sub_rel_types {dbqd.acs-subsite.tcl.party-procs.party::types_valid_for_rel_type_multirow.select_sub_rel_types {	select 
	    types.pretty_name, 
	    types.object_type, 
	    types.tree_level, 
	    types.indent,
	    case when valid_types.object_type = null then 0 else 1 end as valid_p
	from 
	    (select
	        t.pretty_name, t.object_type, level as tree_level,
	        replace(lpad(' ', (level - 1) * 4), 
	                ' ', '&nbsp;') as indent,
	        rownum as tree_rownum
	     from 
	        acs_object_types t
	     connect by 
	        prior t.object_type = t.supertype
	     start with 
	        $start_with_clause ) types,
	    (select 
	        object_type 
	     from 
	        rel_types_valid_obj_two_types
	     where 
	        rel_type = :rel_type ) valid_types
	where 
	    types.object_type = valid_types.object_type(+)
	order by tree_rownum
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/party-procs-oracle.xql}
dbqd.acs-subsite.tcl.party-procs.new.package_select {dbqd.acs-subsite.tcl.party-procs.new.package_select {	    select t.package_name, lower(t.id_column) as id_column
	      from acs_object_types t
	     where t.object_type = :party_type
	
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/tcl/party-procs.xql}
dbqd.acs-subsite.tcl.plsql-utility-procs.object_type_exists_p.object_type_exists_p {dbqd.acs-subsite.tcl.plsql-utility-procs.object_type_exists_p.object_type_exists_p {	    select case when exists (select 1 from acs_object_types where object_type=:object_type)
                        then 1
                        else 0
                   end
              from dual
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/plsql-utility-procs-oracle.xql}
dbqd.acs-subsite.tcl.rel-segments-procs.rel_segments_new.create_rel_segment {dbqd.acs-subsite.tcl.rel-segments-procs.rel_segments_new.create_rel_segment {      declare
      begin 
	:1 := rel_segment.new(segment_name => :segment_name,
                                  group_id => :group_id,
                                  context_id => :context_id,
                                  rel_type => :rel_type,
                                  creation_user => :creation_user,
                                  creation_ip => :creation_ip
                                 );
      end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/rel-segments-procs-oracle.xql}
dbqd.acs-subsite.tcl.rel-segments-procs.rel_segments_delete.constraint_delete {dbqd.acs-subsite.tcl.rel-segments-procs.rel_segments_delete.constraint_delete {	    begin rel_segment.delete(:constraint_id); end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/rel-segments-procs-oracle.xql}
dbqd.acs-subsite.tcl.rel-segments-procs.rel_segments_delete.rel_segment_delete {dbqd.acs-subsite.tcl.rel-segments-procs.rel_segments_delete.rel_segment_delete {	begin rel_segment.delete(:segment_id); end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/rel-segments-procs-oracle.xql}
dbqd.acs-subsite.tcl.rel-segments-procs.rel_segments_delete.select_dependant_constraints {dbqd.acs-subsite.tcl.rel-segments-procs.rel_segments_delete.select_dependant_constraints {	select c.constraint_id
	  from rel_constraints c
	 where c.required_rel_segment = :segment_id
    
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/tcl/rel-segments-procs.xql}
dbqd.acs-subsite.tcl.rel-types-procs.rel_type_dynamic_p {dbqd.acs-subsite.tcl.rel-types-procs.rel_type_dynamic_p {	select case when exists (select 1 
                                   from acs_object_types t
                                  where t.dynamic_p = 't'
                                    and t.object_type = :value)
	            then 1 else 0 end
	  from dual
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/rel-types-procs-oracle.xql}
dbqd.acs-subsite.tcl.rel-types-procs.rel_types::new.drop_type {dbqd.acs-subsite.tcl.rel-types-procs.rel_types::new.drop_type {begin acs_rel_type.drop_type(:rel_type); end;
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/rel-types-procs-oracle.xql}
dbqd.acs-subsite.tcl.rel-types-procs.rel_types::new.create_type {dbqd.acs-subsite.tcl.rel-types-procs.rel_types::new.create_type {	    begin
	    acs_rel_type.create_type (	
            rel_type          => :rel_type,
            supertype         => :supertype,
            pretty_name       => :pretty_name,
            pretty_plural     => :pretty_plural,
            table_name        => :table_name,
            id_column         => 'rel_id',
            package_name      => :package_name,
            object_type_one   => :object_type_one, 
            role_one          => :role_one,
            min_n_rels_one    => :min_n_rels_one,
            max_n_rels_one    => :max_n_rels_one,
            object_type_two   => :object_type_two, 
            role_two          => :role_two,
            min_n_rels_two    => :min_n_rels_two,
            max_n_rels_two    => :max_n_rels_two
	    );
	    end;
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/rel-types-procs-oracle.xql}
dbqd.acs-subsite.tcl.rel-types-procs.new.parent_rel_type {dbqd.acs-subsite.tcl.rel-types-procs.new.parent_rel_type {	    select table_name as references_table,
	           id_column as references_column
	      from acs_object_types
	     where object_type=:supertype
	
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/tcl/rel-types-procs.xql}
dbqd.acs-subsite.tcl.rel-types-procs.rel_types::new.update_type {dbqd.acs-subsite.tcl.rel-types-procs.rel_types::new.update_type {update acs_object_types set dynamic_p='t' where object_type = :rel_type
} {} {} {} F:/temp/openacs-4/packages/acs-subsite/tcl/rel-types-procs.xql}
dbqd.acs-subsite.tcl.rel-types-procs.rel_types::add_permissible.insert_rel_type {dbqd.acs-subsite.tcl.rel-types-procs.rel_types::add_permissible.insert_rel_type {insert into group_type_rels
(group_rel_type_id, group_type, rel_type)
values
(acs_object_id_seq.nextval, :group_type, :rel_type)
} {} {} {} F:/temp/openacs-4/packages/acs-subsite/tcl/rel-types-procs.xql}
dbqd.acs-subsite.tcl.rel-types-procs.rel_types::remove_permissible.delete_rel_type {dbqd.acs-subsite.tcl.rel-types-procs.rel_types::remove_permissible.delete_rel_type {delete from group_type_rels
where group_type= :group_type
and rel_type= :rel_type
} {} {} {} F:/temp/openacs-4/packages/acs-subsite/tcl/rel-types-procs.xql}
dbqd.acs-subsite.tcl.relation-procs.relation_add.select_rel_violation {dbqd.acs-subsite.tcl.relation-procs.relation_add.select_rel_violation {	    select rel_constraint.violation(:rel_id) from dual
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/relation-procs-oracle.xql}
dbqd.acs-subsite.tcl.relation-procs.relation_remove.select_rel_info {dbqd.acs-subsite.tcl.relation-procs.relation_remove.select_rel_info {	select s.segment_id, r.object_id_two as party_id, t.package_name
	  from rel_segments s, acs_rels r, acs_object_types t
	 where r.object_id_one = s.group_id(+)
	  and r.rel_type = s.rel_type(+)
	  and r.rel_type = t.object_type
	  and r.rel_id = :rel_id
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/relation-procs-oracle.xql}
dbqd.acs-subsite.tcl.relation-procs.relation_remove.relation_delete {dbqd.acs-subsite.tcl.relation-procs.relation_remove.relation_delete {      begin ${package_name}.delete(:rel_id); end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/relation-procs-oracle.xql}
dbqd.acs-subsite.tcl.relation-procs.relation_remove.select_rel_info {dbqd.acs-subsite.tcl.relation-procs.relation_remove.select_rel_info {	select s.segment_id, r.object_id_two as party_id, t.package_name
	  from rel_segments s, acs_rels r, acs_object_types t
	 where r.object_id_one = s.group_id(+)
	  and r.rel_type = s.rel_type(+)
	  and r.rel_type = t.object_type
	  and r.rel_id = :rel_id
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/relation-procs-oracle.xql}
dbqd.acs-subsite.tcl.relation-procs.relation_segment_has_dependant.others_depend_p {dbqd.acs-subsite.tcl.relation-procs.relation_segment_has_dependant.others_depend_p {	    select case when exists
	             (select 1 from rc_violations_by_removing_rel r where r.rel_id = :rel_id)
	           then 1 else 0 end
	      from dual
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/relation-procs-oracle.xql}
dbqd.acs-subsite.tcl.relation-procs.relation_type_is_valid_to_group_p.rel_type_valid_p {dbqd.acs-subsite.tcl.relation-procs.relation_type_is_valid_to_group_p.rel_type_valid_p {	    select case when exists
	             (select 1 from rc_valid_rel_types r 
                      where r.group_id = :group_id 
                        and r.rel_type = :rel_type)
	           then 1 else 0 end
	      from dual
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/relation-procs-oracle.xql}
dbqd.acs-subsite.tcl.relation-procs.relation_types_valid_to_group_multirow.select_sub_rel_types {dbqd.acs-subsite.tcl.relation-procs.relation_types_valid_to_group_multirow.select_sub_rel_types {	select 
	    pretty_name, object_type, level, indent,
	    case when valid_types.rel_type = null then 0 else 1 end as valid_p
	from 
	    (select
	        t.pretty_name, t.object_type, level,
	        replace(lpad(' ', (level - 1) * 4), 
	                ' ', '&nbsp;') as indent,
	        rownum as tree_rownum
	     from 
	        acs_object_types t
	     connect by 
	        prior t.object_type = t.supertype
	     start with 
	        t.object_type = :start_with ) types,
	    (select 
	        rel_type 
	     from 
	        rc_valid_rel_types
	     where 
	        group_id = :group_id ) valid_types
	where 
	    types.object_type = valid_types.rel_type(+)
	order by tree_rownum
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/relation-procs-oracle.xql}
dbqd.acs-subsite.tcl.relation-procs.relation_required_segments_multirow.select_required_rel_segments {dbqd.acs-subsite.tcl.relation-procs.relation_required_segments_multirow.select_required_rel_segments {	select distinct s.segment_id, s.group_id, s.rel_type,
	       g.group_name, g.join_policy, t.pretty_name as rel_type_pretty_name,
               nvl(dl.dependency_level, 0)
	from rc_all_constraints c, 
             (select rel_segment, required_rel_segment
              from rc_segment_required_seg_map
	      where rel_side = 'two'
	      UNION ALL
	      select segment_id, segment_id
	      from rel_segments) map,
             rel_segments s, 
             rc_segment_dependency_levels dl,
	     groups g, acs_object_types t
	where c.group_id = :group_id
	  and c.rel_type = :rel_type
	  and c.required_rel_segment = map.rel_segment
          and map.required_rel_segment = s.segment_id
          and s.segment_id = dl.segment_id(+)
	  and g.group_id = s.group_id
	  and t.object_type = s.rel_type
        order by nvl(dl.dependency_level, 0)
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/relation-procs-oracle.xql}
dbqd.acs-subsite.tcl.relation-procs.relation_remove.select_rel_info {dbqd.acs-subsite.tcl.relation-procs.relation_remove.select_rel_info {	select s.segment_id, r.object_id_two as party_id, t.package_name
	  from rel_segments s, acs_rels r, acs_object_types t
	 where r.object_id_one = s.group_id(+)
	  and r.rel_type = s.rel_type(+)
	  and r.rel_type = t.object_type
	  and r.rel_id = :rel_id
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/relation-procs-oracle.xql}
dbqd.acs-subsite.tcl.relation-procs.relation_required_segments_multirow.select_required_rel_segments {dbqd.acs-subsite.tcl.relation-procs.relation_required_segments_multirow.select_required_rel_segments {	select distinct s.segment_id, s.group_id, s.rel_type,
	       g.group_name, g.join_policy, t.pretty_name as rel_type_pretty_name,
               nvl(dl.dependency_level, 0)
	from rc_all_constraints c, 
             (select rel_segment, required_rel_segment
              from rc_segment_required_seg_map
	      where rel_side = 'two'
	      UNION ALL
	      select segment_id, segment_id
	      from rel_segments) map,
             rel_segments s, 
             rc_segment_dependency_levels dl,
	     groups g, acs_object_types t
	where c.group_id = :group_id
	  and c.rel_type = :rel_type
	  and c.required_rel_segment = map.rel_segment
          and map.required_rel_segment = s.segment_id
          and s.segment_id = dl.segment_id(+)
	  and g.group_id = s.group_id
	  and t.object_type = s.rel_type
        order by nvl(dl.dependency_level, 0)
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/relation-procs-oracle.xql}
dbqd.acs-subsite.tcl.subsite-callback-procs.subsite_callback.select_callbacks {dbqd.acs-subsite.tcl.subsite-callback-procs.subsite_callback.select_callbacks {	select distinct callback, callback_type
	  from subsite_callbacks
	 where object_type in (select t.object_type
	                        from acs_object_types t
	                     connect by prior t.supertype = t.object_type
	                       start with t.object_type = :object_type)
	   and event_type = :event_type
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/subsite-callback-procs-oracle.xql}
dbqd.acs-subsite.tcl.subsite-callback-procs.subsite_callback.select_object_type {dbqd.acs-subsite.tcl.subsite-callback-procs.subsite_callback.select_object_type {	    select object_type
	      from acs_objects 
	     where object_id = :object_id
	
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/tcl/subsite-callback-procs.xql}
dbqd.acs-subsite.tcl.subsite-procs.subsite::configure.add_constraint {dbqd.acs-subsite.tcl.subsite-procs.subsite::configure.add_constraint {		    BEGIN
			:1 := rel_constraint.new(
			constraint_name => :constraint_name,
			rel_segment => :segment_id,
			rel_side => 'two',
			required_rel_segment => rel_segment.get(:supersite_group_id, 'membership_rel'),
			creation_user => :user_id,
			creation_ip => :creation_ip
			);
		    END;
		
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/subsite-procs-oracle.xql}
dbqd.acs-subsite.tcl.subsite-procs.subsite::auto_mount_application.select_package_object_names {dbqd.acs-subsite.tcl.subsite-procs.subsite::auto_mount_application.select_package_object_names {	    select t.pretty_name as package_name, acs_object.name(s.object_id) as object_name
	      from site_nodes s, apm_package_types t
	     where s.node_id = :node_id
	       and t.package_key = :package_key
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/subsite-procs-oracle.xql}
dbqd.acs-subsite.tcl.subsite-procs.subsite::util::sub_type_exists_p.sub_type_exists_p {dbqd.acs-subsite.tcl.subsite-procs.subsite::util::sub_type_exists_p.sub_type_exists_p {	select case 
                 when exists (select 1 from acs_object_types 
                              where supertype = :object_type)
                 then 1 
                 else 0 
               end
        from dual
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/subsite-procs-oracle.xql}
dbqd.acs-subsite.tcl.subsite-procs.subsite::util::object_type_path_list.select_object_type_path {dbqd.acs-subsite.tcl.subsite-procs.subsite::util::object_type_path_list.select_object_type_path {	select object_type
	from acs_object_types
	start with object_type = :object_type
	connect by object_type = prior supertype
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/tcl/subsite-procs-oracle.xql}
dbqd.acs-subsite.tcl.subsite-procs.subsite::configure.subsite_name_query {dbqd.acs-subsite.tcl.subsite-procs.subsite::configure.subsite_name_query {	    select instance_name
	    from apm_packages
	    where package_id = :package_id
	
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/tcl/subsite-procs.xql}
dbqd.acs-subsite.tcl.subsite-procs.subsite::configure.parent_subsite_query {dbqd.acs-subsite.tcl.subsite-procs.subsite::configure.parent_subsite_query {		select m.group_id as supersite_group_id,
                       p.instance_name as supersite_name
		from application_group_element_map m,
                     apm_packages p
		where p.package_id = m.package_id
                  and container_id = group_id
                  and element_id = :subsite_group_id
                  and rel_type = 'composition_rel'
	    
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/tcl/subsite-procs.xql}
dbqd.acs-subsite.tcl.subsite-procs.subsite::instance_name_exists_p.select_name_exists_p {dbqd.acs-subsite.tcl.subsite-procs.subsite::instance_name_exists_p.select_name_exists_p {	select count(*) 
	  from site_nodes
	 where parent_id = :node_id
	   and name = :instance_name
    
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/tcl/subsite-procs.xql}
dbqd.acs-subsite.tcl.subsite-procs.subsite::util::object_type_pretty_name.select_pretty_name {dbqd.acs-subsite.tcl.subsite-procs.subsite::util::object_type_pretty_name.select_pretty_name {	select pretty_name from acs_object_types 
	where object_type = :object_type
    
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/tcl/subsite-procs.xql}
dbqd.acs-subsite.www.admin.attributes.add.object_pretty_name {dbqd.acs-subsite.www.admin.attributes.add.object_pretty_name {    select t.pretty_name 
      from acs_object_types t
     where t.object_type = :object_type

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/attributes/add.xql}
dbqd.acs-subsite.www.admin.attributes.add.select_datatypes {dbqd.acs-subsite.www.admin.attributes.add.select_datatypes {    select d.datatype
      from acs_datatypes d
     order by lower(d.datatype)

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/attributes/add.xql}
dbqd.acs-subsite.www.admin.attributes.delete-2.select_object_type {dbqd.acs-subsite.www.admin.attributes.delete-2.select_object_type {	    select attr.object_type 
	      from acs_attributes attr
	     where attr.attribute_id = :attribute_id
	
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/attributes/delete-2.xql}
dbqd.acs-subsite.www.admin.attributes.delete.select_object_type {dbqd.acs-subsite.www.admin.attributes.delete.select_object_type {    select a.object_type, a.pretty_name as attribute_pretty_name
      from acs_attributes a  
     where a.attribute_id = :attribute_id

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/attributes/delete.xql}
dbqd.acs-subsite.www.admin.attributes.edit-one.attribute_properties {dbqd.acs-subsite.www.admin.attributes.edit-one.attribute_properties {    select a.pretty_name as attribute_pretty_name, a.datatype, a.attribute_id,
           nvl(a.column_name,a.attribute_name) as attribute_column,
           t.id_column as type_column, t.table_name as type_table, t.object_type,
           a.min_n_values
      from acs_attributes a, acs_object_types t
     where a.attribute_id = :attribute_id
       and a.object_type = t.object_type

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/attributes/edit-one-oracle.xql}
dbqd.acs-subsite.www.admin.attributes.edit-one.attribute_properties {dbqd.acs-subsite.www.admin.attributes.edit-one.attribute_properties {    select a.pretty_name as attribute_pretty_name, a.datatype, a.attribute_id,
           nvl(a.column_name,a.attribute_name) as attribute_column,
           t.id_column as type_column, t.table_name as type_table, t.object_type,
           a.min_n_values
      from acs_attributes a, acs_object_types t
     where a.attribute_id = :attribute_id
       and a.object_type = t.object_type

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/attributes/edit-one-oracle.xql}
dbqd.acs-subsite.www.admin.attributes.edit-one.select_value {dbqd.acs-subsite.www.admin.attributes.edit-one.select_value {    select my_view.$attribute_column as current_value
      from ([package_object_view $object_type]) my_view
     where my_view.object_id = :id_column

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/attributes/edit-one.xql}
dbqd.acs-subsite.www.admin.attributes.edit-one.select_enum_values {dbqd.acs-subsite.www.admin.attributes.edit-one.select_enum_values {	select enum.pretty_name, enum.enum_value
	  from acs_enum_values enum
	 where enum.attribute_id = :attribute_id 
	 order by enum.sort_order
    
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/attributes/edit-one.xql}
dbqd.acs-subsite.www.admin.attributes.edit-one.attribute_update {dbqd.acs-subsite.www.admin.attributes.edit-one.attribute_update {      update $type_table 
                set $attribute_column = :attribute_value 
              where $type_column = :id_column
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/attributes/edit-one.xql}
dbqd.acs-subsite.www.admin.attributes.enum-add-2.select_max_sort_order {dbqd.acs-subsite.www.admin.attributes.enum-add-2.select_max_sort_order {    select nvl(max(v.sort_order),0)
      from acs_enum_values v
     where v.attribute_id = :attribute_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/attributes/enum-add-2-oracle.xql}
dbqd.acs-subsite.www.admin.attributes.enum-add-2.insert_enum_value {dbqd.acs-subsite.www.admin.attributes.enum-add-2.insert_enum_value {		    insert into acs_enum_values v
		    (attribute_id, sort_order, enum_value, pretty_name)
		    select :attribute_id, :sort_order, :pretty_name, :pretty_name
		    from dual
		    where not exists (select 1 
                                        from acs_enum_values v2
                                       where v2.pretty_name = :pretty_name
                                         and v2.attribute_id = :attribute_id)
		
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/attributes/enum-add-2-oracle.xql}
dbqd.acs-subsite.www.admin.attributes.enum-add-2.select_max_sort_order {dbqd.acs-subsite.www.admin.attributes.enum-add-2.select_max_sort_order {    select nvl(max(v.sort_order),0)
      from acs_enum_values v
     where v.attribute_id = :attribute_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/attributes/enum-add-2-oracle.xql}
dbqd.acs-subsite.www.admin.attributes.enum-add-2.delete_enum_value {dbqd.acs-subsite.www.admin.attributes.enum-add-2.delete_enum_value {		delete from acs_enum_values 
		 where attribute_id = :attribute_id 
		   and sort_order = :sort_order
	    
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/attributes/enum-add-2.xql}
dbqd.acs-subsite.www.admin.attributes.enum-add-2.update_enum_value {dbqd.acs-subsite.www.admin.attributes.enum-add-2.update_enum_value {		update acs_enum_values
		   set pretty_name = :pretty_name
		 where attribute_id = :attribute_id
		   and sort_order = :sort_order
	    
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/attributes/enum-add-2.xql}
dbqd.acs-subsite.www.admin.attributes.enum-add.number_values {dbqd.acs-subsite.www.admin.attributes.enum-add.number_values {    select count(*) 
      from acs_enum_values v
     where v.attribute_id = :attribute_id

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/attributes/enum-add.xql}
dbqd.acs-subsite.www.admin.attributes.enum-add.select_current_values {dbqd.acs-subsite.www.admin.attributes.enum-add.select_current_values {    select v.enum_value
      from acs_enum_values v
     where v.attribute_id = :attribute_id
     order by v.sort_order

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/attributes/enum-add.xql}
dbqd.acs-subsite.www.admin.attributes.enum-add.select_attr_name {dbqd.acs-subsite.www.admin.attributes.enum-add.select_attr_name {    select a.pretty_name as attribute_pretty_name
      from acs_attributes a
     where a.attribute_id = :attribute_id

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/attributes/enum-add.xql}
dbqd.acs-subsite.www.admin.attributes.one.select_attribute_info {dbqd.acs-subsite.www.admin.attributes.one.select_attribute_info {    select a.attribute_id, a.object_type, a.table_name, a.attribute_name, 
           a.pretty_name, a.pretty_plural, a.sort_order, a.datatype, 
           a.default_value, a.min_n_values, a.max_n_values, a.storage, 
           a.static_p, a.column_name, t.dynamic_p
     from acs_attributes a, acs_object_types t
    where a.object_type = t.object_type
      and a.attribute_id = :attribute_id

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/attributes/one.xql}
dbqd.acs-subsite.www.admin.attributes.one.enum_values {dbqd.acs-subsite.www.admin.attributes.one.enum_values {	select v.enum_value, v.pretty_name
	  from acs_enum_values v
	 where v.attribute_id = :attribute_id
	 order by v.sort_order
    
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/attributes/one.xql}
dbqd.acs-subsite.www.admin.attributes.value-delete.select_pretty_name {dbqd.acs-subsite.www.admin.attributes.value-delete.select_pretty_name {    select v.pretty_name
      from acs_enum_values v
     where v.attribute_id = :attribute_id
       and v.enum_value = :enum_value

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/attributes/value-delete.xql}
dbqd.acs-subsite.www.admin.group-types.change-join-policy-2.select_pretty_name {dbqd.acs-subsite.www.admin.group-types.change-join-policy-2.select_pretty_name {    select t.dynamic_p,
           case when gt.group_type = null then 0 else 1 end as group_type_exists_p
      from acs_object_types t, group_types gt
     where t.object_type = :group_type
       and t.object_type = gt.group_type(+)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/group-types/change-join-policy-2-oracle.xql}
dbqd.acs-subsite.www.admin.group-types.change-join-policy-2.select_pretty_name {dbqd.acs-subsite.www.admin.group-types.change-join-policy-2.select_pretty_name {    select t.dynamic_p,
           case when gt.group_type = null then 0 else 1 end as group_type_exists_p
      from acs_object_types t, group_types gt
     where t.object_type = :group_type
       and t.object_type = gt.group_type(+)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/group-types/change-join-policy-2-oracle.xql}
dbqd.acs-subsite.www.admin.group-types.change-join-policy-2.set_default_join_policy {dbqd.acs-subsite.www.admin.group-types.change-join-policy-2.set_default_join_policy {	insert into group_types
	(group_type, default_join_policy)
	values
	(:group_type, :default_join_policy)
    
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/group-types/change-join-policy-2.xql}
dbqd.acs-subsite.www.admin.group-types.change-join-policy-2.update_join_policy {dbqd.acs-subsite.www.admin.group-types.change-join-policy-2.update_join_policy {	update group_types
	set default_join_policy = :default_join_policy
	where group_type = :group_type
    
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/group-types/change-join-policy-2.xql}
dbqd.acs-subsite.www.admin.group-types.change-join-policy.select_pretty_name {dbqd.acs-subsite.www.admin.group-types.change-join-policy.select_pretty_name {    select t.pretty_name as group_type_pretty_name, t.dynamic_p,
           nvl(gt.default_join_policy, 'open') as default_join_policy
      from acs_object_types t, group_types gt
     where t.object_type = :group_type
       and t.object_type = gt.group_type(+)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/group-types/change-join-policy-oracle.xql}
dbqd.acs-subsite.www.admin.group-types.change-join-policy.select_pretty_name {dbqd.acs-subsite.www.admin.group-types.change-join-policy.select_pretty_name {    select t.pretty_name as group_type_pretty_name, t.dynamic_p,
           nvl(gt.default_join_policy, 'open') as default_join_policy
      from acs_object_types t, group_types gt
     where t.object_type = :group_type
       and t.object_type = gt.group_type(+)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/group-types/change-join-policy-oracle.xql}
dbqd.acs-subsite.www.admin.group-types.delete-2.package_exists {dbqd.acs-subsite.www.admin.group-types.delete-2.package_exists {    select case when exists (select 1 
                               from user_objects o
                              where o.object_type='PACKAGE' 
                                and o.object_name = upper(:package_name))
           then 1 else 0 end
      from dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/group-types/delete-2-oracle.xql}
dbqd.acs-subsite.www.admin.group-types.delete-2.type_exists {dbqd.acs-subsite.www.admin.group-types.delete-2.type_exists {    select case when exists (select 1 from acs_object_types t where t.object_type = :group_type)
                then 1
                else 0
           end
      from dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/group-types/delete-2-oracle.xql}
dbqd.acs-subsite.www.admin.group-types.delete-2.package_drop {dbqd.acs-subsite.www.admin.group-types.delete-2.package_drop {    drop package [DoubleApos $group_type]
  } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/group-types/delete-2-oracle.xql}
dbqd.acs-subsite.www.admin.group-types.delete-2.delete_rel_types {dbqd.acs-subsite.www.admin.group-types.delete-2.delete_rel_types {delete from group_type_rels where group_type = :group_type
  } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/group-types/delete-2-oracle.xql}
dbqd.acs-subsite.www.admin.group-types.delete-2.drop_type {dbqd.acs-subsite.www.admin.group-types.delete-2.drop_type {begin acs_object_type.drop_type(:group_type); end;
  } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/group-types/delete-2-oracle.xql}
dbqd.acs-subsite.www.admin.group-types.delete-2.drop_table {dbqd.acs-subsite.www.admin.group-types.delete-2.drop_table {drop table $table_name
  } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/group-types/delete-2-oracle.xql}
dbqd.acs-subsite.www.admin.group-types.delete-2.delete_group_type {dbqd.acs-subsite.www.admin.group-types.delete-2.delete_group_type {begin
delete from group_types where group_type=:group_type;
end;
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/group-types/delete-2-oracle.xql}
dbqd.acs-subsite.www.admin.group-types.delete-2.select_type_info {dbqd.acs-subsite.www.admin.group-types.delete-2.select_type_info {    select t.table_name, t.package_name
      from acs_object_types t
     where t.object_type=:group_type

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/group-types/delete-2.xql}
dbqd.acs-subsite.www.admin.group-types.delete-2.select_group_ids {dbqd.acs-subsite.www.admin.group-types.delete-2.select_group_ids {	    select distinct o.object_id
	    from acs_objects o, all_object_party_privilege_map perm
	    where perm.object_id = o.object_id
              and perm.party_id = :user_id
              and perm.privilege = 'delete'
	      and o.object_type = :group_type
	
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/group-types/delete-2.xql}
dbqd.acs-subsite.www.admin.group-types.delete.number_subtypes {dbqd.acs-subsite.www.admin.group-types.delete.number_subtypes {    select case when exists (select 1 
                               from acs_object_types t
                              where t.supertype = :group_type) 
                then 1 else 0 end
      from dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/group-types/delete-oracle.xql}
dbqd.acs-subsite.www.admin.group-types.delete.rel_type_exists_p {dbqd.acs-subsite.www.admin.group-types.delete.rel_type_exists_p {    select case when exists (select 1 
                               from acs_rel_types t
                              where t.object_type_one = :group_type
                                 or t.object_type_two = :group_type)
                then 1 else 0 end
      from dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/group-types/delete-oracle.xql}
dbqd.acs-subsite.www.admin.group-types.delete.select_pretty_name {dbqd.acs-subsite.www.admin.group-types.delete.select_pretty_name {    select t.pretty_name as group_type_pretty_name
      from acs_object_types t
     where t.object_type = :group_type

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/group-types/delete.xql}
dbqd.acs-subsite.www.admin.group-types.delete.select_subtypes {dbqd.acs-subsite.www.admin.group-types.delete.select_subtypes {	select t.object_type as group_type, t.pretty_name
          from acs_object_types t
         where t.supertype = :group_type
    
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/group-types/delete.xql}
dbqd.acs-subsite.www.admin.group-types.delete.select_rel_types {dbqd.acs-subsite.www.admin.group-types.delete.select_rel_types {	select rel.rel_type, t.pretty_name
          from acs_rel_types rel, acs_object_types t
         where (rel.object_type_one = :group_type 
                or rel.object_type_two = :group_type)
	   and rel.rel_type = t.object_type
    
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/group-types/delete.xql}
dbqd.acs-subsite.www.admin.group-types.delete.groups_of_this_type {dbqd.acs-subsite.www.admin.group-types.delete.groups_of_this_type {    select count(o.object_id) 
      from acs_objects o
     where o.object_type = :group_type

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/group-types/delete.xql}
dbqd.acs-subsite.www.admin.group-types.delete.relations_to_this_type {dbqd.acs-subsite.www.admin.group-types.delete.relations_to_this_type {    select count(r.rel_id)
      from acs_rels r
     where r.rel_type in (select t.rel_type
                            from acs_rel_types t
                           where t.object_type_one = :group_type
                              or t.object_type_two = :group_type)

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/group-types/delete.xql}
dbqd.acs-subsite.www.admin.group-types.groups-display.select_type_info {dbqd.acs-subsite.www.admin.group-types.groups-display.select_type_info {    select t.pretty_name as group_type_pretty_name
      from acs_object_types t
     where t.object_type = :group_type

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/group-types/groups-display.xql}
dbqd.acs-subsite.www.admin.group-types.groups-list.select_groups {dbqd.acs-subsite.www.admin.group-types.groups-list.select_groups {    select DISTINCT g.group_id, g.group_name
      from (select group_id, group_name 
              from groups g, acs_objects o 
             where g.group_id = o.object_id 
               and o.object_type = :group_type) g, 
           (select object_id 
            from all_object_party_privilege_map 
            where party_id = :user_id and privilege = 'read') perm,
           application_group_element_map m
     where perm.object_id = g.group_id
       and m.package_id = :package_id
       and m.element_id = g.group_id
     order by lower(g.group_name)

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/group-types/groups-list.xql}
dbqd.acs-subsite.www.admin.group-types.index.select_group_types {dbqd.acs-subsite.www.admin.group-types.index.select_group_types {    select t.object_type as group_type, t.pretty_plural, 
           nvl(num.number_groups,0) as number_groups, t.indent
      from (select t.object_type, t.pretty_plural, rownum as inner_rownum,
                   replace(lpad(' ', (level - 1) * 4), ' ', '&nbsp;') as indent
              from acs_object_types t
           connect by prior t.object_type = t.supertype
             start with t.object_type = 'group'
             order by lower(t.pretty_plural)) t, 
           (select o.object_type, count(*) number_groups
              from groups g, acs_objects o,  
                   acs_object_party_privilege_map perm,
                   application_group_element_map app_group
             where perm.object_id = g.group_id
               and perm.party_id = :user_id
               and perm.privilege = 'read'
               and o.object_id = g.group_id
               and app_group.package_id = :package_id
               and app_group.element_id = g.group_id
             group by o.object_type) num
     where t.object_type = num.object_type(+)
     order by t.inner_rownum

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/group-types/index-oracle.xql}
dbqd.acs-subsite.www.admin.group-types.new.pretty_name_unique {dbqd.acs-subsite.www.admin.group-types.new.pretty_name_unique {	    select case when exists (select 1 from acs_object_types t where t.pretty_name = :pretty_name)
                    then 1 else 0 end
	  from dual
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/group-types/new-oracle.xql}
dbqd.acs-subsite.www.admin.group-types.new.pretty_name_unique {dbqd.acs-subsite.www.admin.group-types.new.pretty_name_unique {	    select case when exists (select 1 from acs_object_types t where t.pretty_name = :pretty_name)
                    then 1 else 0 end
	  from dual
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/group-types/new-oracle.xql}
dbqd.acs-subsite.www.admin.group-types.one.select_pretty_name {dbqd.acs-subsite.www.admin.group-types.one.select_pretty_name {    select t.pretty_name as group_type_pretty_name, t.dynamic_p,
           nvl(gt.default_join_policy, 'open') as default_join_policy
      from acs_object_types t, group_types gt
     where t.object_type = :group_type
       and t.object_type = gt.group_type(+)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/group-types/one-oracle.xql}
dbqd.acs-subsite.www.admin.group-types.one.groups_select {dbqd.acs-subsite.www.admin.group-types.one.groups_select {    select my_view.group_name, my_view.group_id
    from (select /*+ ORDERED */ DISTINCT  g.group_name, g.group_id
           from acs_objects o, groups g,
                application_group_element_map app_group, 
                all_object_party_privilege_map perm
          where perm.object_id = g.group_id
            and perm.party_id = :user_id
            and perm.privilege = 'read'
            and g.group_id = o.object_id
            and o.object_type = :group_type
            and app_group.package_id = :package_id
            and app_group.element_id = g.group_id
          order by lower(g.group_name)) my_view 
    where rownum <= 26

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/group-types/one-oracle.xql}
dbqd.acs-subsite.www.admin.group-types.one.attributes_select {dbqd.acs-subsite.www.admin.group-types.one.attributes_select {    select a.attribute_id, a.pretty_name, 
           a.ancestor_type, t.pretty_name as ancestor_pretty_name
      from acs_object_type_attributes a,
           (select t.object_type, t.pretty_name, level as type_level
              from acs_object_types t
             start with t.object_type='group'
           connect by prior t.object_type = t.supertype) t 
     where a.object_type = :group_type
       and t.object_type = a.ancestor_type
    order by type_level 

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/group-types/one-oracle.xql}
dbqd.acs-subsite.www.admin.group-types.one.select_pretty_name {dbqd.acs-subsite.www.admin.group-types.one.select_pretty_name {    select t.pretty_name as group_type_pretty_name, t.dynamic_p,
           nvl(gt.default_join_policy, 'open') as default_join_policy
      from acs_object_types t, group_types gt
     where t.object_type = :group_type
       and t.object_type = gt.group_type(+)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/group-types/one-oracle.xql}
dbqd.acs-subsite.www.admin.group-types.one.relations_select {dbqd.acs-subsite.www.admin.group-types.one.relations_select {    select t.pretty_name, g.rel_type, g.group_rel_type_id
      from acs_object_types t, group_type_rels g
     where t.object_type = g.rel_type
       and g.group_type = :group_type
     order by lower(t.pretty_name)

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/group-types/one.xql}
dbqd.acs-subsite.www.admin.group-types.rel-type-add-2.types_match_p {dbqd.acs-subsite.www.admin.group-types.rel-type-add-2.types_match_p {	    select count(*)
	      from acs_rel_types t
	     where (t.object_type_one = :group_type 
                    or acs_object_type.is_subtype_p(t.object_type_one, :group_type) = 't')
               and t.rel_type = :rel_type
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/group-types/rel-type-add-2-oracle.xql}
dbqd.acs-subsite.www.admin.group-types.rel-type-add-2.exists_p {dbqd.acs-subsite.www.admin.group-types.rel-type-add-2.exists_p {      select count(*) from group_type_rels where group_type = :group_type and rel_type = :rel_type
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/group-types/rel-type-add-2.xql}
dbqd.acs-subsite.www.admin.group-types.rel-type-add.select_primary_relations {dbqd.acs-subsite.www.admin.group-types.rel-type-add.select_primary_relations {    select replace(lpad(' ', (t.type_level - 1) * 4), ' ', '&nbsp;') as indent,
           t.pretty_name, t.rel_type
      from (select t.pretty_name, t.object_type as rel_type, level as type_level
              from acs_object_types t
             where t.object_type not in (select g.rel_type 
                                           from group_type_rels g 
                                          where g.group_type = :group_type)
           connect by prior t.object_type = t.supertype
             start with t.object_type in ('membership_rel', 'composition_rel')) t,
           acs_rel_types rel_type
     where t.rel_type = rel_type.rel_type
       and (rel_type.object_type_one = :group_type 
            or acs_object_type.is_subtype_p(rel_type.object_type_one, :group_type) = 't')

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/group-types/rel-type-add-oracle.xql}
dbqd.acs-subsite.www.admin.group-types.rel-type-remove-2.select_group_type {dbqd.acs-subsite.www.admin.group-types.rel-type-remove-2.select_group_type {	select g.group_type
	from group_type_rels g 
	where g.group_rel_type_id = :group_rel_type_id
    
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/group-types/rel-type-remove-2.xql}
dbqd.acs-subsite.www.admin.group-types.rel-type-remove-2.remove_relation {dbqd.acs-subsite.www.admin.group-types.rel-type-remove-2.remove_relation {	    delete from group_type_rels where group_rel_type_id = :group_rel_type_id
	
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/group-types/rel-type-remove-2.xql}
dbqd.acs-subsite.www.admin.group-types.rel-type-remove.select_info {dbqd.acs-subsite.www.admin.group-types.rel-type-remove.select_info {    select g.rel_type, g.group_type, 
           t.pretty_name as rel_pretty_name, t2.pretty_name as group_type_pretty_name
      from acs_object_types t, acs_object_types t2, group_type_rels g
     where g.group_rel_type_id = :group_rel_type_id
       and t.object_type = g.rel_type
       and t2.object_type = g.group_type

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/group-types/rel-type-remove.xql}
dbqd.acs-subsite.www.admin.groups.change-join-policy-2.update_join_policy {dbqd.acs-subsite.www.admin.groups.change-join-policy-2.update_join_policy {    update groups
    set join_policy = :join_policy
    where group_id = :group_id

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/groups/change-join-policy-2.xql}
dbqd.acs-subsite.www.admin.groups.change-join-policy.group_info {dbqd.acs-subsite.www.admin.groups.change-join-policy.group_info {    select g.group_name, g.join_policy
      from groups g
     where g.group_id = :group_id

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/groups/change-join-policy.xql}
dbqd.acs-subsite.www.admin.groups.constraints-create.select_props {dbqd.acs-subsite.www.admin.groups.constraints-create.select_props {    select acs_group.name(:group_id) as group_name,
           t.pretty_name as rel_type_pretty_name
      from acs_object_types t
     where t.object_type = :rel_type

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/groups/constraints-create-oracle.xql}
dbqd.acs-subsite.www.admin.groups.delete.object_name {dbqd.acs-subsite.www.admin.groups.delete.object_name {      select acs_object.name(:group_id) from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/groups/delete-oracle.xql}
dbqd.acs-subsite.www.admin.groups.delete.select_counts {dbqd.acs-subsite.www.admin.groups.delete.select_counts {    select (select count(*) from group_element_map where group_id = :group_id) as elements,
           (select count(*) from rel_segments where group_id = :group_id) as segments,
           (select count(*) 
              from rel_constraints cons, rel_segments segs
             where segs.segment_id in (cons.rel_segment,cons.required_rel_segment)
               and segs.group_id = :group_id) as constraints
      from dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/groups/delete-oracle.xql}
dbqd.acs-subsite.www.admin.groups.elements-by-group-type.select_group_types {dbqd.acs-subsite.www.admin.groups.elements-by-group-type.select_group_types {    select /*+ ORDERED */ 
           t.object_type, t.pretty_name, count(g.group_id) as number_groups
      from groups g, acs_objects o, acs_object_types t,
           application_group_element_map app_group
     where o.object_id = g.group_id
       and o.object_type = t.object_type
       and app_group.package_id = :package_id
       and app_group.element_id = g.group_id
     group by t.object_type, t.pretty_name
     order by lower(t.pretty_name)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/groups/elements-by-group-type-oracle.xql}
dbqd.acs-subsite.www.admin.groups.elements-by-group-type.select_group_types {dbqd.acs-subsite.www.admin.groups.elements-by-group-type.select_group_types {    select /*+ ORDERED */ 
           t.object_type, t.pretty_name, count(g.group_id) as number_groups
      from groups g, acs_objects o, acs_object_types t,
           application_group_element_map app_group
     where o.object_id = g.group_id
       and o.object_type = t.object_type
       and app_group.package_id = :package_id
       and app_group.element_id = g.group_id
     group by t.object_type, t.pretty_name
     order by lower(t.pretty_name)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/groups/elements-by-group-type-oracle.xql}
dbqd.acs-subsite.www.admin.groups.elements-by-rel-type.relations_query {dbqd.acs-subsite.www.admin.groups.elements-by-rel-type.relations_query {    select g.rel_type, g.group_rel_id,
           acs_object_type.pretty_name(g.rel_type) as rel_type_pretty_name,
           s.segment_id, s.segment_name, 
           acs_rel_type.role_pretty_plural(rel_types.role_two) as role_pretty_plural,
           acs_rel_type.role_pretty_name(rel_types.role_two) as role_pretty_name,
           rels.num_rels,
           case when valid_types.group_id = null then 0 else 1 end as rel_type_valid_p
      from group_rels g, 
           rel_segments s, 
           acs_rel_types rel_types,
           (select rel_type, count(*) as num_rels
              from group_component_map
             where group_id = :group_id
               and group_id = container_id
           group by rel_type
           UNION ALL
           select rel_type, count(*) as num_rels
             from group_approved_member_map
             where group_id = :group_id
               and group_id = container_id
           group by rel_type) rels,
           rc_valid_rel_types valid_types
     where g.group_id = s.group_id(+)
       and g.rel_type = s.rel_type(+)
       and g.rel_type = rels.rel_type(+)
       and g.rel_type = rel_types.rel_type
       and g.group_id = :group_id
       and g.group_id = valid_types.group_id(+)
       and g.rel_type = valid_types.rel_type(+)
     order by lower(g.rel_type)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/groups/elements-by-rel-type-oracle.xql}
dbqd.acs-subsite.www.admin.groups.elements-display-list.rel_type_info {dbqd.acs-subsite.www.admin.groups.elements-display-list.rel_type_info {    select object_type as ancestor_rel_type
      from acs_object_types
     where supertype = 'relationship'
       and object_type in (
               select object_type from acs_object_types
               start with object_type = :rel_type
               connect by object_type = prior supertype
           )

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/groups/elements-display-list-oracle.xql}
dbqd.acs-subsite.www.admin.groups.elements-display-list.relations_query {dbqd.acs-subsite.www.admin.groups.elements-display-list.relations_query {select r.rel_id, 
       party_names.party_name as element_name
from (select /*+ ORDERED */ DISTINCT rels.rel_id, object_id_two
      from $extra_tables acs_rels rels, all_object_party_privilege_map perm
      where perm.object_id = rels.rel_id
        and perm.party_id = :user_id
        and perm.privilege = 'read'
        and rels.rel_type = :rel_type
        and rels.object_id_one = :group_id $extra_where_clauses) r, 
     party_names 
where r.object_id_two = party_names.party_id
order by lower(element_name)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/groups/elements-display-list-oracle.xql}
dbqd.acs-subsite.www.admin.groups.elements-display-list.relations_query {dbqd.acs-subsite.www.admin.groups.elements-display-list.relations_query {select r.rel_id, 
       party_names.party_name as element_name
from (select /*+ ORDERED */ DISTINCT rels.rel_id, object_id_two
      from $extra_tables acs_rels rels, all_object_party_privilege_map perm
      where perm.object_id = rels.rel_id
        and perm.party_id = :user_id
        and perm.privilege = 'read'
        and rels.rel_type = :rel_type
        and rels.object_id_one = :group_id $extra_where_clauses) r, 
     party_names 
where r.object_id_two = party_names.party_id
order by lower(element_name)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/groups/elements-display-list-oracle.xql}
dbqd.acs-subsite.www.admin.groups.elements-display.group_and_rel_info {dbqd.acs-subsite.www.admin.groups.elements-display.group_and_rel_info {    select acs_group.name(:group_id) as group_name,
           acs_object_type.pretty_name(:rel_type) as rel_type_pretty_name,
           acs_rel_type.role_pretty_plural(rel_types.role_two) as role_pretty_plural,
           acs_rel_type.role_pretty_name(rel_types.role_two) as role_pretty_name
      from acs_rel_types rel_types
     where rel_types.rel_type = :rel_type

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/groups/elements-display-oracle.xql}
dbqd.acs-subsite.www.admin.groups.index.subsite_info {dbqd.acs-subsite.www.admin.groups.index.subsite_info {    select ag.group_id as subsite_group_id, ap.instance_name
    from application_groups ag, apm_packages ap
    where ag.package_id = ap.package_id
      and ag.package_id = :package_id

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/groups/index.xql}
dbqd.acs-subsite.www.admin.groups.new.rel_type_info {dbqd.acs-subsite.www.admin.groups.new.rel_type_info {    select object_type as ancestor_rel_type
      from acs_object_types
     where supertype = 'relationship'
       and object_type in (
               select object_type from acs_object_types
               start with object_type = :add_with_rel_type
               connect by object_type = prior supertype
           )

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/groups/new-oracle.xql}
dbqd.acs-subsite.www.admin.groups.new.group_exists_p {dbqd.acs-subsite.www.admin.groups.new.group_exists_p {	    select count(*) from groups where group_id = :group_id
	
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/groups/new.xql}
dbqd.acs-subsite.www.admin.groups.new.group_info {dbqd.acs-subsite.www.admin.groups.new.group_info {    select group_name as add_to_group_name, 
           join_policy as add_to_group_join_policy
    from groups
    where group_id = :add_to_group_id

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/groups/new.xql}
dbqd.acs-subsite.www.admin.groups.new.select_type_info {dbqd.acs-subsite.www.admin.groups.new.select_type_info {    select t.pretty_name as group_type_pretty_name,
           t.table_name
      from acs_object_types t
     where t.object_type = :group_type

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/groups/new.xql}
dbqd.acs-subsite.www.admin.groups.one.group_info {dbqd.acs-subsite.www.admin.groups.one.group_info {    select g.group_name, g.join_policy,
           o.object_type as group_type
      from groups g, acs_objects o, acs_object_types t
     where g.group_id = o.object_id
       and o.object_type = t.object_type
       and g.group_id = :group_id

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/groups/one.xql}
dbqd.acs-subsite.www.admin.groups.rel-type-add-2.types_match_p {dbqd.acs-subsite.www.admin.groups.rel-type-add-2.types_match_p {	    select count(*)
	      from acs_rel_types t
	     where (t.object_type_one = :group_type 
                    or acs_object_type.is_subtype_p(t.object_type_one, :group_type) = 't')
               and t.rel_type = :rel_type
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/groups/rel-type-add-2-oracle.xql}
dbqd.acs-subsite.www.admin.groups.rel-type-add-2.exists_p {dbqd.acs-subsite.www.admin.groups.rel-type-add-2.exists_p {	select case when exists (select 1 
                                   from group_rels 
                                  where group_id = :group_id
                                    and rel_type = :rel_type)
                    then 1 else 0 end
	  from dual
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/groups/rel-type-add-2-oracle.xql}
dbqd.acs-subsite.www.admin.groups.rel-type-add-2.segment_exists_p {dbqd.acs-subsite.www.admin.groups.rel-type-add-2.segment_exists_p {    select case when exists (select 1 
                               from rel_segments s 
                              where s.group_id = :group_id
                                and s.rel_type = :rel_type)
                then 1 else 0 end
      from dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/groups/rel-type-add-2-oracle.xql}
dbqd.acs-subsite.www.admin.groups.rel-type-add-2.select_group_type {dbqd.acs-subsite.www.admin.groups.rel-type-add-2.select_group_type {	    select o.object_type as group_type
	      from acs_objects o
	     where o.object_id = :group_id
	
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/groups/rel-type-add-2.xql}
dbqd.acs-subsite.www.admin.groups.rel-type-add.select_primary_relations {dbqd.acs-subsite.www.admin.groups.rel-type-add.select_primary_relations {    select replace(lpad(' ', (t.type_level - 1) * 4), ' ', '&nbsp;') as indent,
           t.pretty_name, t.rel_type
      from (select t.pretty_name, t.object_type as rel_type, level as type_level
              from acs_object_types t
             where t.object_type not in (select g.rel_type 
                                           from group_rels g 
                                          where g.group_id = :group_id)
           connect by prior t.object_type = t.supertype
             start with t.object_type in ('membership_rel', 'composition_rel')) t,
           acs_rel_types rel_type
     where t.rel_type = rel_type.rel_type
       and (rel_type.object_type_one = :group_type 
            or acs_object_type.is_subtype_p(rel_type.object_type_one, :group_type) = 't')

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/groups/rel-type-add-oracle.xql}
dbqd.acs-subsite.www.admin.groups.rel-type-add.select_group_type {dbqd.acs-subsite.www.admin.groups.rel-type-add.select_group_type {    select o.object_type as group_type
      from acs_objects o
     where o.object_id = :group_id

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/groups/rel-type-add.xql}
dbqd.acs-subsite.www.admin.groups.rel-type-remove-2.select_group_id {dbqd.acs-subsite.www.admin.groups.rel-type-remove-2.select_group_id {    select g.group_id, g.rel_type
      from group_rels g, acs_object_types t
     where g.rel_type = t.object_type
       and g.group_rel_id = :group_rel_id

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/groups/rel-type-remove-2.xql}
dbqd.acs-subsite.www.admin.groups.rel-type-remove-2.select_rel_ids {dbqd.acs-subsite.www.admin.groups.rel-type-remove-2.select_rel_ids {	select r.rel_id 
          from acs_rels r
	 where r.rel_type = :rel_type
	   and r.object_id_one = :group_id
    
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/groups/rel-type-remove-2.xql}
dbqd.acs-subsite.www.admin.groups.rel-type-remove-2.select_segments {dbqd.acs-subsite.www.admin.groups.rel-type-remove-2.select_segments {	    select segment_id
	      from rel_segments 
	     where group_id = :group_id
	       and rel_type = :rel_type
	
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/groups/rel-type-remove-2.xql}
dbqd.acs-subsite.www.admin.groups.rel-type-remove-2.remove_relationship_type {dbqd.acs-subsite.www.admin.groups.rel-type-remove-2.remove_relationship_type {	    delete from group_rels where group_rel_id = :group_rel_id
	
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/groups/rel-type-remove-2.xql}
dbqd.acs-subsite.www.admin.groups.rel-type-remove.select_info {dbqd.acs-subsite.www.admin.groups.rel-type-remove.select_info {    select g.rel_type, g.group_id, acs_object.name(g.group_id) as group_name,
           t.pretty_name as rel_pretty_name
      from acs_object_types t, group_rels g
     where g.group_rel_id = :group_rel_id
       and t.object_type = g.rel_type

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/groups/rel-type-remove-oracle.xql}
dbqd.acs-subsite.www.admin.host-node-map.add.host_node_insert {dbqd.acs-subsite.www.admin.host-node-map.add.host_node_insert {    insert into host_node_map 
    (host, node_id)
    values 
    (:host, :root)

    } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/host-node-map/add.xql}
dbqd.acs-subsite.www.admin.host-node-map.delete.host_node_delete {dbqd.acs-subsite.www.admin.host-node-map.delete.host_node_delete {    delete from host_node_map 
    where host = :host
    and node_id = :node_id

    } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/host-node-map/delete.xql}
dbqd.acs-subsite.www.admin.host-node-map.index.root_id {dbqd.acs-subsite.www.admin.host-node-map.index.root_id {      select site_node.node_id('/') from dual
      
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/host-node-map/index-oracle.xql}
dbqd.acs-subsite.www.admin.host-node-map.index.host_node_pair {dbqd.acs-subsite.www.admin.host-node-map.index.host_node_pair {    select host, node_id, site_node.url(node_id) as url 
    from host_node_map
      
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/host-node-map/index-oracle.xql}
dbqd.acs-subsite.www.admin.host-node-map.index.node_list {dbqd.acs-subsite.www.admin.host-node-map.index.node_list {          select name, node_id
	  from site_nodes
      
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/host-node-map/index.xql}
dbqd.acs-subsite.www.admin.index.acs_admin_url_get {dbqd.acs-subsite.www.admin.index.acs_admin_url_get {    select site_node.url(node_id) acs_admin_url, instance_name
    from site_nodes s, apm_packages p
    where s.object_id = p.package_id
    and p.package_key = 'acs-admin'
    and rownum = 1

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/index-oracle.xql}
dbqd.acs-subsite.www.admin.index.subsite_name {dbqd.acs-subsite.www.admin.index.subsite_name {    select p.instance_name 
      from apm_packages p
     where p.package_id = :package_id

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/index.xql}
dbqd.acs-subsite.www.admin.object-types.alphabetical-index.object_type_in_alphabetical_order {dbqd.acs-subsite.www.admin.object-types.alphabetical-index.object_type_in_alphabetical_order {    select object_type,
           pretty_name
      from acs_object_types
     order by lower(pretty_name)

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/object-types/alphabetical-index.xql}
dbqd.acs-subsite.www.admin.object-types.one.attribute_comment {dbqd.acs-subsite.www.admin.object-types.one.attribute_comment {	select utc.column_name,
	       utc.data_type,
               ucc.comments
	  from user_tab_columns utc,
               user_col_comments ucc
	 where utc.table_name = '[string toupper $table_name]'
           and utc.table_name = ucc.table_name(+)
           and utc.column_name = ucc.column_name(+)
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/object-types/one-oracle.xql}
dbqd.acs-subsite.www.admin.object-types.one.object_type {dbqd.acs-subsite.www.admin.object-types.one.object_type {    select supertype,
           abstract_p,
           pretty_name,
           pretty_plural,
           table_name,
           id_column,
           name_method,
           type_extension_table,
           package_name,
           dynamic_p
      from acs_object_types
     where object_type = :object_type

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/object-types/one.xql}
dbqd.acs-subsite.www.admin.object-types.one.attribute {dbqd.acs-subsite.www.admin.object-types.one.attribute {    select attribute_name,
           pretty_name,
           pretty_plural,
           datatype,
           default_value,
           min_n_values,
           max_n_values,
           storage,
           table_name as attr_table_name,
           column_name
      from acs_attributes
     where object_type = :object_type

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/object-types/one.xql}
dbqd.acs-subsite.www.admin.object-types.one.table_comment {dbqd.acs-subsite.www.admin.object-types.one.table_comment {      select comments from user_tab_comments where table_name = '[string toupper $table_name]'
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/object-types/one.xql}
dbqd.acs-subsite.www.admin.object-types.one.attribute_comment {dbqd.acs-subsite.www.admin.object-types.one.attribute_comment {	select utc.column_name,
	       utc.data_type,
               ucc.comments
	  from user_tab_columns utc,
               user_col_comments ucc
	 where utc.table_name = '[string toupper $table_name]'
           and utc.table_name = ucc.table_name(+)
           and utc.column_name = ucc.column_name(+)
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/object-types/one-oracle.xql}
dbqd.acs-subsite.www.admin.object-types.one.package_index {dbqd.acs-subsite.www.admin.object-types.one.package_index {    select replace (replace (text, ' ', '&nbsp;'), chr(9), '&nbsp;&nbsp;&nbsp;&nbsp;') as text
      from user_source
     where lower(name) = :package_name
       and type = 'PACKAGE BODY'
     order by line

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/object-types/one.xql}
dbqd.acs-subsite.www.admin.parties.new.rel_type_info {dbqd.acs-subsite.www.admin.parties.new.rel_type_info {    select object_type as ancestor_rel_type
      from acs_object_types
     where supertype = 'relationship'
       and object_type in (
               select object_type from acs_object_types
               start with object_type = :add_with_rel_type
               connect by object_type = prior supertype
           )

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/parties/new-oracle.xql}
dbqd.acs-subsite.www.admin.parties.new.group_info {dbqd.acs-subsite.www.admin.parties.new.group_info {    select group_name as add_to_group_name, 
           join_policy as add_to_group_join_policy
    from groups
    where group_id = :add_to_group_id

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/parties/new.xql}
dbqd.acs-subsite.www.admin.parties.new.select_type_info {dbqd.acs-subsite.www.admin.parties.new.select_type_info {    select t.pretty_name as party_type_pretty_name,
           t.table_name
      from acs_object_types t
     where t.object_type = :party_type

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/parties/new.xql}
dbqd.acs-subsite.www.admin.parties.one.party_info {dbqd.acs-subsite.www.admin.parties.one.party_info {    select acs_object.name(:party_id) as party_name,
           object_type as party_type
      from acs_objects
     where object_id = :party_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/parties/one-oracle.xql}
dbqd.acs-subsite.www.admin.rel-segments.constraints.delete-2.delete_constraint {dbqd.acs-subsite.www.admin.rel-segments.constraints.delete-2.delete_constraint {	begin rel_constraint.delete(constraint_id => :constraint_id); end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-segments/constraints/delete-2-oracle.xql}
dbqd.acs-subsite.www.admin.rel-segments.constraints.delete-2.select_segment_id {dbqd.acs-subsite.www.admin.rel-segments.constraints.delete-2.select_segment_id {	    select c.rel_segment as segment_id from rel_constraints c where c.constraint_id = :constraint_id
	
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-segments/constraints/delete-2.xql}
dbqd.acs-subsite.www.admin.rel-segments.constraints.delete-2.select_constraint_props {dbqd.acs-subsite.www.admin.rel-segments.constraints.delete-2.select_constraint_props {	select 1
        from rel_constraints c, application_group_segments s,
             application_group_segments s2
	where c.rel_segment = s.segment_id
          and c.constraint_id = :constraint_id
          and s.package_id = :package_id
          and s2.segment_id = c.required_rel_segment
          and s2.package_id = :package_id
    
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-segments/constraints/delete-2.xql}
dbqd.acs-subsite.www.admin.rel-segments.constraints.delete.select_constraint_props {dbqd.acs-subsite.www.admin.rel-segments.constraints.delete.select_constraint_props {    select c.constraint_name, s.segment_name
      from rel_constraints c, application_group_segments s,
           application_group_segments s2
     where c.rel_segment = s.segment_id
       and c.constraint_id = :constraint_id
       and s.package_id = :package_id
       and s2.segment_id = c.required_rel_segment
       and s2.package_id = :package_id

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-segments/constraints/delete.xql}
dbqd.acs-subsite.www.admin.rel-segments.constraints.index.select_rel_constraints {dbqd.acs-subsite.www.admin.rel-segments.constraints.index.select_rel_constraints {    select c.constraint_id, c.constraint_name
      from rel_constraints c
           application_group_segments s1, application_group_segments s2
     where s1.segment_id = c.rel_segment
       and s1.package_id = :package_id
       and s2.segment_id = c.required_rel_segment
       and s2.package_id = :package_id
       and exists (select 1
                   from all_object_party_privilege_map perm
                   where perm.object_id = c.constraint_id
                     and perm.party_id = :user_id
                     and perm.privilege = 'read')
     order by lower(c.constraint_name)

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-segments/constraints/index.xql}
dbqd.acs-subsite.www.admin.rel-segments.constraints.new.select_rel_properties {dbqd.acs-subsite.www.admin.rel-segments.constraints.new.select_rel_properties {    select s.segment_name, 
           acs_rel_type.role_pretty_name(t.role_one) as role_one_name,
           acs_rel_type.role_pretty_name(t.role_two) as role_two_name
      from rel_segments s, acs_rel_types t
     where s.rel_type = t.rel_type
       and s.segment_id = :rel_segment

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-segments/constraints/new-oracle.xql}
dbqd.acs-subsite.www.admin.rel-segments.constraints.new.add_constraint {dbqd.acs-subsite.www.admin.rel-segments.constraints.new.add_constraint {	 BEGIN
	  :1 := rel_constraint.new(constraint_name => :constraint_name,
                                   rel_segment => :rel_segment,
                                   rel_side => :rel_side,
                                   required_rel_segment => :required_rel_segment,
                                   creation_user => :creation_user,
                                   creation_ip => :creation_ip
                                  );
	 END;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-segments/constraints/new-oracle.xql}
dbqd.acs-subsite.www.admin.rel-segments.constraints.new.select_violated_rels {dbqd.acs-subsite.www.admin.rel-segments.constraints.new.select_violated_rels {	    select viol.rel_id, acs_object.name(viol.party_id) as name
	      from rel_constraints_violated_one viol
	     where viol.constraint_id = :constraint_id
	    UNION ALL
	    select viol.rel_id, acs_object.name(viol.party_id) as name
	      from rel_constraints_violated_two viol
	     where viol.constraint_id = :constraint_id
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-segments/constraints/new-oracle.xql}
dbqd.acs-subsite.www.admin.rel-segments.constraints.new.select_segments {dbqd.acs-subsite.www.admin.rel-segments.constraints.new.select_segments {    select s.segment_name, s.segment_id
      from application_group_segments s
     where s.segment_id <> :rel_segment
       and s.package_id = :package_id

     order by lower(s.segment_name)

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-segments/constraints/new.xql}
dbqd.acs-subsite.www.admin.rel-segments.constraints.new. {dbqd.acs-subsite.www.admin.rel-segments.constraints.new. \ \ \ \ \}\ on_error\ \{\n\tif\ \n\ \ \ \ \ \  {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-segments/constraints/new.xql}
dbqd.acs-subsite.www.admin.rel-segments.constraints.one.select_constraint_properties {dbqd.acs-subsite.www.admin.rel-segments.constraints.one.select_constraint_properties {    select c.constraint_id, c.constraint_name, c.rel_side, 
           s.segment_id, s.segment_name, s.rel_type, acs_group.name(s.group_id) as group_name,
           s2.segment_id as req_segment_id, s2.segment_name as req_segment_name, 
           s2.rel_type as req_rel_type, acs_group.name(s2.group_id) as req_group_name
      from application_group_segments s, application_group_segments s2,
           rel_constraints c
     where s.segment_id = c.rel_segment
       and s2.segment_id = c.required_rel_segment
       and c.constraint_id = :constraint_id
       and s.package_id = :package_id
       and s2.package_id = :package_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-segments/constraints/one-oracle.xql}
dbqd.acs-subsite.www.admin.rel-segments.constraints.one.select_rel_type_info {dbqd.acs-subsite.www.admin.rel-segments.constraints.one.select_rel_type_info {    select role1.role as role_one, 
           nvl(role1.pretty_name,'Object on side one') as role_one_pretty_name,
           nvl(role1.pretty_plural,'Objects on side one') as role_one_pretty_plural,
           role2.role as role_two, 
           nvl(role2.pretty_name,'Object on side two') as role_two_pretty_name,
           nvl(role2.pretty_plural,'Objects on side two') as role_two_pretty_plural,
           acs_object_type.pretty_name(rel.rel_type) as rel_type_pretty_name
      from acs_rel_types rel, acs_rel_roles role1, acs_rel_roles role2
     where rel.rel_type = :rel_type
       and rel.role_one = role1.role(+)
       and rel.role_two = role2.role(+)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-segments/constraints/one-oracle.xql}
dbqd.acs-subsite.www.admin.rel-segments.delete-2.select_group_id {dbqd.acs-subsite.www.admin.rel-segments.delete-2.select_group_id {	    select s.group_id from rel_segments s where s.segment_id = :segment_id
	
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-segments/delete-2.xql}
dbqd.acs-subsite.www.admin.rel-segments.delete.select_segment_info {dbqd.acs-subsite.www.admin.rel-segments.delete.select_segment_info {    select s.segment_name 
      from rel_segments s
     where s.segment_id = :segment_id

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-segments/delete.xql}
dbqd.acs-subsite.www.admin.rel-segments.elements-display.elements_select {dbqd.acs-subsite.www.admin.rel-segments.elements-display.elements_select {    select acs_object.name(map.party_id) as name, map.rel_id, 
           decode(map.container_id, :group_id, 1, 0) as direct_p,
           acs_object.name(map.container_id) as container_name
      from rel_segment_party_map map
     where acs_permission.permission_p(map.party_id, :user_id, 'read') = 't'
       and map.segment_id = :segment_id
     order by lower(name)
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-segments/elements-display-oracle.xql}
dbqd.acs-subsite.www.admin.rel-segments.elements.select_segment_info {dbqd.acs-subsite.www.admin.rel-segments.elements.select_segment_info {    select s.segment_name, s.group_id,
           acs_rel_type.role_pretty_plural(r.role_two) as role_pretty_plural
      from rel_segments s, acs_rel_types r
     where s.segment_id = :segment_id
       and s.rel_type = r.rel_type

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-segments/elements-oracle.xql}
dbqd.acs-subsite.www.admin.rel-segments.index.select_rel_segments {dbqd.acs-subsite.www.admin.rel-segments.index.select_rel_segments {    select s.segment_id, s.segment_name, s.group_id, acs_object.name(s.group_id) as group_name, 
           s.rel_type, t.pretty_name as rel_type_pretty_name
      from acs_object_types t, 
           rel_segments s, 
           acs_object_party_privilege_map perm,
           application_group_segments ags
     where perm.object_id = s.segment_id
       and perm.party_id = :user_id
       and perm.privilege = 'read'
       and t.object_type = s.rel_type
       and s.segment_id = ags.segment_id
       and ags.package_id = :package_id
     order by lower(s.segment_name)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-segments/index-oracle.xql}
dbqd.acs-subsite.www.admin.rel-segments.new-2.select_basic_info {dbqd.acs-subsite.www.admin.rel-segments.new-2.select_basic_info {    select acs_group.name(:group_id) as group_name,
    nvl(acs_rel_type.role_pretty_plural(t.role_two),'Elements') as role_pretty_plural
      from acs_rel_types t
     where t.rel_type = :rel_type

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-segments/new-2-oracle.xql}
dbqd.acs-subsite.www.admin.rel-segments.new-3.segments_exists_p {dbqd.acs-subsite.www.admin.rel-segments.new-3.segments_exists_p {    select case when exists 
                   (select 1 from rel_segments s where s.segment_id <> :segment_id)
           then 1 else 0 end
      from dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-segments/new-3-oracle.xql}
dbqd.acs-subsite.www.admin.rel-segments.new-3.select_segment_id {dbqd.acs-subsite.www.admin.rel-segments.new-3.select_segment_id {	select s.segment_id
	  from rel_segments s
	 where s.group_id = :group_id
	   and s.rel_type = :rel_type
    
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-segments/new-3.xql}
dbqd.acs-subsite.www.admin.rel-segments.new.select_relation_types {dbqd.acs-subsite.www.admin.rel-segments.new.select_relation_types {    select t.pretty_name, t.object_type as rel_type,
    replace(lpad(' ', (level - 1) * 4), ' ', '&nbsp;') as indent
    from acs_object_types t
    where t.object_type not in (select s.rel_type from rel_segments s where s.group_id = :group_id)
    connect by prior t.object_type = t.supertype
    start with t.object_type in ('membership_rel', 'composition_rel')
    order by lower(t.pretty_name) desc

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-segments/new-oracle.xql}
dbqd.acs-subsite.www.admin.rel-segments.new.select_basic_info {dbqd.acs-subsite.www.admin.rel-segments.new.select_basic_info {    select acs_group.name(:group_id) as group_name
      from dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-segments/new-oracle.xql}
dbqd.acs-subsite.www.admin.rel-segments.one.select_segment_properties {dbqd.acs-subsite.www.admin.rel-segments.one.select_segment_properties {    select s.segment_id, s.segment_name, s.group_id, acs_object.name(s.group_id) as group_name,
           s.rel_type, acs_object_type.pretty_name(r.rel_type) as rel_type_pretty_name,
           acs_rel_type.role_pretty_plural(r.role_two) as role_pretty_plural
      from rel_segments s, acs_rel_types r
     where s.segment_id = :segment_id
       and s.rel_type = r.rel_type

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-segments/one-oracle.xql}
dbqd.acs-subsite.www.admin.rel-segments.one.constraints_select {dbqd.acs-subsite.www.admin.rel-segments.one.constraints_select {    select c.constraint_id, c.constraint_name, c.rel_side
      from rel_constraints c
     where c.rel_segment = :segment_id

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-segments/one.xql}
dbqd.acs-subsite.www.admin.rel-segments.one.select_segment_info {dbqd.acs-subsite.www.admin.rel-segments.one.select_segment_info {    select count(*) as number_elements
      from rel_segment_party_map map, acs_object_party_privilege_map perm
     where perm.object_id = map.party_id
       and perm.party_id = :user_id
       and perm.privilege = 'read' 
       and map.segment_id = :segment_id

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-segments/one.xql}
dbqd.acs-subsite.www.admin.rel-types.add-2.update_rel_type_mapping {dbqd.acs-subsite.www.admin.rel-types.add-2.update_rel_type_mapping {    insert into group_type_allowed_rels
    (constraint_id, group_type, rel_type)
    values
    (:constraint_id, :object_type, :rel_type)

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-types/add-2.xql}
dbqd.acs-subsite.www.admin.rel-types.add.select_primary_relations {dbqd.acs-subsite.www.admin.rel-types.add.select_primary_relations {    select o.object_type as rel_type, o.pretty_name
      from acs_object_types o
     where o.object_type in ('composition_rel','membership_rel')
       and o.object_type not in (select g.rel_type from group_type_allowed_rels g where g.group_type = :object_type)

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-types/add.xql}
dbqd.acs-subsite.www.admin.rel-types.delete-2.drop_relationship_type {dbqd.acs-subsite.www.admin.rel-types.delete-2.drop_relationship_type {	    BEGIN
	      acs_rel_type.drop_type( rel_type  => :rel_type,
                                      cascade_p => 't' );
	    END;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-types/delete-2-oracle.xql}
dbqd.acs-subsite.www.admin.rel-types.delete-2.drop_type_table {dbqd.acs-subsite.www.admin.rel-types.delete-2.drop_type_table {      drop table $table_name
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-types/delete-2-oracle.xql}
dbqd.acs-subsite.www.admin.rel-types.delete-2.select_type_info {dbqd.acs-subsite.www.admin.rel-types.delete-2.select_type_info {	select t.table_name 
	  from acs_object_types t
	 where t.object_type = :rel_type
    
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-types/delete-2.xql}
dbqd.acs-subsite.www.admin.rel-types.delete-2.select_rel_ids {dbqd.acs-subsite.www.admin.rel-types.delete-2.select_rel_ids {	select r.rel_id
	  from acs_rels r, acs_object_party_privilege_map perm
	 where perm.object_id = r.rel_id
	  and perm.party_id = :user_id
	  and perm.privilege = 'delete'
	  and r.rel_type = :rel_type
    
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-types/delete-2.xql}
dbqd.acs-subsite.www.admin.rel-types.delete-2.select_segment_id {dbqd.acs-subsite.www.admin.rel-types.delete-2.select_segment_id {	select s.segment_id
	  from rel_segments s, acs_object_party_privilege_map perm
	 where perm.object_id = s.segment_id
 	   and perm.party_id = :user_id
	   and perm.privilege = 'delete'
	   and s.rel_type = :rel_type
    
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-types/delete-2.xql}
dbqd.acs-subsite.www.admin.rel-types.delete.number_subtypes {dbqd.acs-subsite.www.admin.rel-types.delete.number_subtypes {    select case when exists (select 1 
                               from acs_object_types t
                              where t.supertype = :rel_type) 
                then 1 else 0 end
      from dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-types/delete-oracle.xql}
dbqd.acs-subsite.www.admin.rel-types.delete.select_counts {dbqd.acs-subsite.www.admin.rel-types.delete.select_counts {    select (select count(*) from rel_segments where rel_type = :rel_type) as segments,
           (select count(*) from acs_rels where rel_type = :rel_type) as rels
      from dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-types/delete-oracle.xql}
dbqd.acs-subsite.www.admin.rel-types.delete.select_pretty_name {dbqd.acs-subsite.www.admin.rel-types.delete.select_pretty_name {    select t.pretty_name
      from acs_object_types t
     where t.object_type = :rel_type

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-types/delete.xql}
dbqd.acs-subsite.www.admin.rel-types.delete.select_subtypes {dbqd.acs-subsite.www.admin.rel-types.delete.select_subtypes {	select t.object_type as rel_type, t.pretty_name
          from acs_object_types t
         where t.supertype = :rel_type
    
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-types/delete.xql}
dbqd.acs-subsite.www.admin.rel-types.index.select_relation_types {dbqd.acs-subsite.www.admin.rel-types.index.select_relation_types {    select t.object_type as rel_type, t.pretty_name, t.indent, 
           nvl(num.number_relationships,0) as number_relationships
      from (select t.pretty_name, t.object_type, rownum as inner_rownum,
                   replace(lpad(' ', (level - 1) * 4), ' ', '&nbsp;') as indent
              from acs_object_types t
           connect by prior t.object_type = t.supertype
             start with t.object_type in ('membership_rel','composition_rel')
             order by lower(t.pretty_name)) t,
           (select r.rel_type, count(*) as number_relationships
              from acs_objects o, acs_rel_types r, 
                   app_group_distinct_rel_map m
             where r.rel_type = o.object_type
               and o.object_id = m.rel_id
               and m.package_id = :package_id
             group by r.rel_type) num
     where t.object_type = num.rel_type(+)
    order by t.inner_rownum

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-types/index-oracle.xql}
dbqd.acs-subsite.www.admin.rel-types.mapping-remove-2.delete_group_rel_mapping {dbqd.acs-subsite.www.admin.rel-types.mapping-remove-2.delete_group_rel_mapping {	delete from group_rels 
	 where group_rel_id = :group_rel_id
    
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-types/mapping-remove-2.xql}
dbqd.acs-subsite.www.admin.rel-types.mapping-remove-2.delete_group_type_rel_mapping {dbqd.acs-subsite.www.admin.rel-types.mapping-remove-2.delete_group_type_rel_mapping {	delete from group_type_rels 
	 where group_type_rel_id = :group_type_rel_id
    
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-types/mapping-remove-2.xql}
dbqd.acs-subsite.www.admin.rel-types.mapping-remove.select_info {dbqd.acs-subsite.www.admin.rel-types.mapping-remove.select_info {    select g.rel_type, g.group_type, 
           t.pretty_name as rel_pretty_name, t2.pretty_name as group_type_pretty_name
      from acs_object_types t, acs_object_types t2, group_type_rels g
     where g.group_rel_type_id = :group_rel_type_id
       and t.object_type = g.rel_type
       and t2.object_type = g.group_type

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-types/mapping-remove.xql}
dbqd.acs-subsite.www.admin.rel-types.new-2.select_object_types_one {dbqd.acs-subsite.www.admin.rel-types.new-2.select_object_types_one {    select replace(lpad(' ', (level - 1) * 4), ' ', '&nbsp;') || t.pretty_name, 
           t.object_type as rel_type
      from acs_object_types t
   connect by prior t.object_type = t.supertype
     start with t.object_type=:max_object_type_one

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-types/new-2-oracle.xql}
dbqd.acs-subsite.www.admin.rel-types.new-2.select_object_types_two {dbqd.acs-subsite.www.admin.rel-types.new-2.select_object_types_two {    select replace(lpad(' ', (level - 1) * 4), ' ', '&nbsp;') || t.pretty_name, 
           t.object_type as rel_type
      from acs_object_types t
   connect by prior t.object_type = t.supertype
     start with t.object_type=:max_object_type_two

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-types/new-2-oracle.xql}
dbqd.acs-subsite.www.admin.rel-types.new-2.pretty_name_unique {dbqd.acs-subsite.www.admin.rel-types.new-2.pretty_name_unique {	    select case when exists (select 1 from acs_object_types t where t.pretty_name = :pretty_name)
                    then 1 else 0 end
	      from dual
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-types/new-2-oracle.xql}
dbqd.acs-subsite.www.admin.rel-types.new-2.pretty_plural_unique {dbqd.acs-subsite.www.admin.rel-types.new-2.pretty_plural_unique {	    select case when exists (select 1 from acs_object_types t where t.pretty_plural = :pretty_plural)
                    then 1 else 0 end
	      from dual
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-types/new-2-oracle.xql}
dbqd.acs-subsite.www.admin.rel-types.new-2.select_object_types {dbqd.acs-subsite.www.admin.rel-types.new-2.select_object_types {    select r.object_type_one as max_object_type_one, 
           r.object_type_two as max_object_type_two,
           t.pretty_name as supertype_pretty_name,
           r.role_one as supertype_role_one, r.role_two as supertype_role_two,
           r.min_n_rels_one as supertype_min_n_rels_one,
           r.max_n_rels_one as supertype_max_n_rels_one,
           r.min_n_rels_two as supertype_min_n_rels_two,
           r.max_n_rels_two as supertype_max_n_rels_two
      from acs_object_types t, acs_rel_types r
     where r.rel_type = :supertype
       and r.rel_type = t.object_type

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-types/new-2.xql}
dbqd.acs-subsite.www.admin.rel-types.new-2.select_roles {dbqd.acs-subsite.www.admin.rel-types.new-2.select_roles {    select r.pretty_name, r.role
      from acs_rel_roles r
     order by lower(r.role)

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-types/new-2.xql}
dbqd.acs-subsite.www.admin.rel-types.new.select_supertypes {dbqd.acs-subsite.www.admin.rel-types.new.select_supertypes {    select replace(lpad(' ', (level - 1) * 4), ' ', '&nbsp;') || t.pretty_name as name,
           t.object_type
      from acs_object_types t
   connect by prior t.object_type = t.supertype
     start with t.object_type in ('membership_rel','composition_rel')

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-types/new-oracle.xql}
dbqd.acs-subsite.www.admin.rel-types.one.select_rel_type_properties {dbqd.acs-subsite.www.admin.rel-types.one.select_rel_type_properties {    select t1.pretty_name as object_type_one_pretty_name, 
           r.object_type_one, acs_rel_type.role_pretty_name(r.role_one) as role_one_pretty_name, 
           r.role_one, r.min_n_rels_one, r.max_n_rels_one,
           t2.pretty_name as object_type_two_pretty_name, 
           r.object_type_two, acs_rel_type.role_pretty_name(r.role_two) as role_two_pretty_name, 
           r.role_two, r.min_n_rels_two, r.max_n_rels_two
      from acs_rel_types r, acs_object_types t1, acs_object_types t2
     where r.rel_type = :rel_type
       and r.object_type_one = t1.object_type
       and r.object_type_two = t2.object_type

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-types/one-oracle.xql}
dbqd.acs-subsite.www.admin.rel-types.one.rels_select {dbqd.acs-subsite.www.admin.rel-types.one.rels_select {    select inner.* 
      from (select r.rel_id, acs_object.name(r.object_id_one) || ' and ' || acs_object.name(r.object_id_two) as name
              from acs_rels r, acs_object_party_privilege_map perm,
                   app_group_distinct_rel_map m
             where perm.object_id = r.rel_id
               and perm.party_id = :user_id
               and perm.privilege = 'read'
               and r.rel_type = :rel_type
               and m.rel_id = r.rel_id
               and m.package_id = :package_id
             order by lower(acs_object.name(r.object_id_one)), lower(acs_object.name(r.object_id_two))) inner
    where rownum <= 26

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-types/one-oracle.xql}
dbqd.acs-subsite.www.admin.rel-types.one.select_pretty_name {dbqd.acs-subsite.www.admin.rel-types.one.select_pretty_name {    select t.pretty_name as rel_type_pretty_name, t.table_name, t.id_column, t.dynamic_p
      from acs_object_types t
     where t.object_type = :rel_type

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-types/one.xql}
dbqd.acs-subsite.www.admin.rel-types.one.attributes_select {dbqd.acs-subsite.www.admin.rel-types.one.attributes_select {    select a.attribute_id, a.pretty_name
      from acs_attributes a
     where a.object_type = :rel_type

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-types/one.xql}
dbqd.acs-subsite.www.admin.rel-types.rels-list.rels_select {dbqd.acs-subsite.www.admin.rel-types.rels-list.rels_select {    select r.rel_id, acs_object.name(r.object_id_one) || ' and ' || acs_object.name(r.object_id_two) as name
      from acs_rels r, acs_object_party_privilege_map perm,
           app_group_distinct_rel_map m
     where perm.object_id = r.rel_id
       and perm.party_id = :user_id
       and perm.privilege = 'read'
       and r.rel_type = :rel_type
       and m.rel_id = r.rel_id
       and m.package_id = :package_id
     order by lower(name)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-types/rels-list-oracle.xql}
dbqd.acs-subsite.www.admin.rel-types.rels-list.select_pretty_name {dbqd.acs-subsite.www.admin.rel-types.rels-list.select_pretty_name {    select t.pretty_name as rel_type_pretty_name
      from acs_object_types t
     where t.object_type = :rel_type

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-types/rels-list.xql}
dbqd.acs-subsite.www.admin.rel-types.roles.delete-2.drop_role {dbqd.acs-subsite.www.admin.rel-types.roles.delete-2.drop_role {begin acs_rel_type.drop_role(:role);end;
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-types/roles/delete-2-oracle.xql}
dbqd.acs-subsite.www.admin.rel-types.roles.delete-2.role_used_p {dbqd.acs-subsite.www.admin.rel-types.roles.delete-2.role_used_p {		select case when exists (select 1 from acs_rel_types where role_one = :role or role_two = :role) then 1 else 0 end
		from dual
	    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-types/roles/delete-2-oracle.xql}
dbqd.acs-subsite.www.admin.rel-types.roles.delete.select_role_pretty_name {dbqd.acs-subsite.www.admin.rel-types.roles.delete.select_role_pretty_name {    select r.pretty_name from acs_rel_roles r where r.role = :role

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-types/roles/delete.xql}
dbqd.acs-subsite.www.admin.rel-types.roles.edit.select_role_props {dbqd.acs-subsite.www.admin.rel-types.roles.edit.select_role_props {    select r.pretty_name, r.pretty_plural
      from acs_rel_roles r 
     where r.role = :role

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-types/roles/edit.xql}
dbqd.acs-subsite.www.admin.rel-types.roles.edit.update_role {dbqd.acs-subsite.www.admin.rel-types.roles.edit.update_role {	update acs_rel_roles r
	   set r.pretty_name = :pretty_name,
	       r.pretty_plural = :pretty_plural
	 where r.role = :role
    
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-types/roles/edit.xql}
dbqd.acs-subsite.www.admin.rel-types.roles.index.select_roles {dbqd.acs-subsite.www.admin.rel-types.roles.index.select_roles {    select r.role, r.pretty_name, nvl(num1.number_rels,0) + nvl(num2.number_rels,0) as number_rel_types
      from (select t.role_one as role, count(*) as number_rels
             from acs_rel_types t
            group by t.role_one) num1,
           (select t.role_two as role, count(*) as number_rels
             from acs_rel_types t
            group by t.role_two) num2,
           acs_rel_roles r
     where r.role = num1.role(+)
       and r.role = num2.role(+)
     order by lower(r.role)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-types/roles/index-oracle.xql}
dbqd.acs-subsite.www.admin.rel-types.roles.index.select_roles {dbqd.acs-subsite.www.admin.rel-types.roles.index.select_roles {    select r.role, r.pretty_name, nvl(num1.number_rels,0) + nvl(num2.number_rels,0) as number_rel_types
      from (select t.role_one as role, count(*) as number_rels
             from acs_rel_types t
            group by t.role_one) num1,
           (select t.role_two as role, count(*) as number_rels
             from acs_rel_types t
            group by t.role_two) num2,
           acs_rel_roles r
     where r.role = num1.role(+)
       and r.role = num2.role(+)
     order by lower(r.role)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-types/roles/index-oracle.xql}
dbqd.acs-subsite.www.admin.rel-types.roles.new.create_role {dbqd.acs-subsite.www.admin.rel-types.roles.new.create_role {	    begin acs_rel_type.create_role(role => :role, pretty_name => :pretty_name, pretty_plural => :pretty_plural); end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-types/roles/new-oracle.xql}
dbqd.acs-subsite.www.admin.rel-types.roles.new.role_exists_p {dbqd.acs-subsite.www.admin.rel-types.roles.new.role_exists_p {	select count(r.role) from acs_rel_roles r where r.role = :role
    
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-types/roles/new.xql}
dbqd.acs-subsite.www.admin.rel-types.roles.one.select_role_props {dbqd.acs-subsite.www.admin.rel-types.roles.one.select_role_props {    select r.pretty_name, r.pretty_plural
      from acs_rel_roles r 
     where r.role = :role

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-types/roles/one.xql}
dbqd.acs-subsite.www.admin.rel-types.roles.one.select_rel_types_one {dbqd.acs-subsite.www.admin.rel-types.roles.one.select_rel_types_one {    select r.rel_type as role, t.pretty_name, r.rel_type,
           case when r.role_one = :role then 'Side one' else 'Side two' end as side
      from acs_object_types t, acs_rel_types r
     where t.object_type = r.rel_type
       and (r.role_one = :role or r.role_two = :role)
     order by side, t.pretty_name

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/rel-types/roles/one.xql}
dbqd.acs-subsite.www.admin.relations.add.rel_type_info {dbqd.acs-subsite.www.admin.relations.add.rel_type_info {    select t.object_type_two, t.role_two as role, 
           acs_rel_type.role_pretty_name(t.role_two) as role_pretty_name,
           acs_object_type.pretty_name(t.object_type_two) as object_type_two_name,
           ancestor_rel_types.object_type as ancestor_rel_type
      from acs_rel_types t, acs_object_types obj_types, 
           acs_object_types ancestor_rel_types
     where t.rel_type = :rel_type
       and t.rel_type = obj_types.object_type
       and ancestor_rel_types.supertype = 'relationship'
       and ancestor_rel_types.object_type in (
               select object_type from acs_object_types
               start with object_type = :rel_type
               connect by object_type = prior supertype
           )

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/relations/add-oracle.xql}
dbqd.acs-subsite.www.admin.relations.add.select_parties_scope_query {dbqd.acs-subsite.www.admin.relations.add.select_parties_scope_query {, (select element_id from application_group_element_map
   where package_id = :package_id) app_elements
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/relations/add-oracle.xql}
dbqd.acs-subsite.www.admin.relations.add.select_parties {dbqd.acs-subsite.www.admin.relations.add.select_parties {            select DISTINCT
                   decode(groups.group_id,
                          null, case when persons.person_id = null then 'INVALID' else persons.first_names || ' ' || persons.last_name end,
                          groups.group_name) as party_name,
                   p.party_id
            from (select o.object_id as party_id
                  from acs_objects o,
                       (select object_type from acs_object_types ot
                        start with $start_with
                        connect by prior ot.object_type = ot.supertype) t
                  where o.object_type = t.object_type) p,
                 (select element_id
                  from group_element_map
                  where group_id = :group_id and rel_type = :rel_type
                  UNION ALL
                  select to_number(:group_id) from dual) m,
                 (select object_id
                  from all_object_party_privilege_map
                  where party_id = :user_id and privilege = 'read') perm,
                 (select party_id
                  from rc_parties_in_required_segs
                  where group_id = :group_id 
                    and rel_type = :rel_type) pirs $scope_query,
                 groups,
                 persons
            where p.party_id = m.element_id(+)
              and m.element_id is null
              and p.party_id = perm.object_id
              and p.party_id = pirs.party_id $scope_clause
              and p.party_id = groups.group_id(+)
              and p.party_id = persons.person_id(+)
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/relations/add-oracle.xql}
dbqd.acs-subsite.www.admin.relations.add.group_info {dbqd.acs-subsite.www.admin.relations.add.group_info {    select group_name, join_policy
    from groups
    where group_id = :group_id

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/relations/add.xql}
dbqd.acs-subsite.www.admin.relations.change-member-state.update_member_state {dbqd.acs-subsite.www.admin.relations.change-member-state.update_member_state {    update membership_rels
    set member_state = :member_state
    where rel_id = :rel_id

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/relations/change-member-state.xql}
dbqd.acs-subsite.www.admin.relations.one.select_rel_info {dbqd.acs-subsite.www.admin.relations.one.select_rel_info {    select r.rel_type, acs_object_type.pretty_name(t.rel_type) as rel_type_pretty_name,
           acs_rel_type.role_pretty_name(t.role_one) as role_one_pretty_name,
           acs_rel_type.role_pretty_name(t.role_two) as role_two_pretty_name,
           t.object_type_two as object_type_two,
           acs_object.name(r.object_id_one) as object_id_one_name,
           r.object_id_one,
           acs_object.name(r.object_id_two) as object_id_two_name,
           r.object_id_two
      from acs_rels r, acs_rel_types t
     where r.rel_id = :rel_id
       and r.rel_type = t.rel_type
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/relations/one-oracle.xql}
dbqd.acs-subsite.www.admin.relations.one.select_member_state {dbqd.acs-subsite.www.admin.relations.one.select_member_state {    select member_state from membership_rels
    where rel_id = :rel_id

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/relations/one.xql}
dbqd.acs-subsite.www.admin.relations.remove.select_rel_info {dbqd.acs-subsite.www.admin.relations.remove.select_rel_info {    select acs_object_type.pretty_name(r.rel_type) as rel_type_pretty_name,
           acs_object.name(r.object_id_one) as object_id_one_name,
           acs_object.name(r.object_id_two) as object_id_two_name,
           r.object_id_two
      from acs_rels r
     where r.rel_id = :rel_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/relations/remove-oracle.xql}
dbqd.acs-subsite.www.admin.relations.remove.select_dependants {dbqd.acs-subsite.www.admin.relations.remove.select_dependants {	select r.viol_rel_id as rel_id,
	       acs_object_type.pretty_name(r.viol_rel_type) as rel_type_pretty_name,
	       acs_object.name(r.viol_object_id_one) as object_id_one_name, 
	       acs_object.name(r.viol_object_id_two) as object_id_two_name
	  from rc_violations_by_removing_rel r
	 where r.rel_id = :rel_id
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/relations/remove-oracle.xql}
dbqd.acs-subsite.www.admin.site-map.auto-mount.select_node_url {dbqd.acs-subsite.www.admin.site-map.auto-mount.select_node_url {	select site_node.url(s.node_id) as return_url
	  from site_nodes s, apm_packages p
	 where s.object_id = p.package_id
	   and s.node_id = :node_id
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/site-map/auto-mount-oracle.xql}
dbqd.acs-subsite.www.admin.site-map.delete.node_delete {dbqd.acs-subsite.www.admin.site-map.delete.node_delete {    begin
      site_node.delete(:node_id);
    end;
  
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/site-map/delete-oracle.xql}
dbqd.acs-subsite.www.admin.site-map.delete.parent_select {dbqd.acs-subsite.www.admin.site-map.delete.parent_select {      select parent_id
      from site_nodes
      where node_id = :node_id
    
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/site-map/delete.xql}
dbqd.acs-subsite.www.admin.site-map.index.path_select {dbqd.acs-subsite.www.admin.site-map.index.path_select {  select node_id, name, directory_p, level,
         acs_object.name(object_id) as obj_name,
         acs_permission.permission_p(object_id, :user_id, 'admin') as admin_p
  from site_nodes
  start with node_id = :root_id
  connect by node_id = prior parent_id
  order by level desc

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/site-map/index-oracle.xql}
dbqd.acs-subsite.www.admin.site-map.index.nodes_select {dbqd.acs-subsite.www.admin.site-map.index.nodes_select {select package_id,
       package_key,
       apm_package_type.num_parameters(package_key) parameter_count,
       node_id, url, parent_url, name, root_p, mylevel - 1 as mylevel, object_id,
       object_name, directory_p, parent_id, n_children,
       (select decode(acs_permission.permission_p(object_id, :user_id, 'admin'),
                      't', 1, 0) from dual) object_admin_p  
from apm_packages p, (
  select node_id, site_node.url(node_id) as url,
         site_node.url(parent_id) as parent_url,
         name,
         (select count(*)
          from site_nodes
          where parent_id = n.node_id) as n_children,
         decode(node_id, site_node.node_id('/'), 1, 0) as root_p,
         level as mylevel,
         object_id,
         acs_object.name(object_id) as object_name,
         directory_p,
         parent_id
  from site_nodes n
  where (object_id is null or
         acs_permission.permission_p(object_id, :user_id, 'read') = 't')
  start with node_id = nvl(:root_id, site_node.node_id('/'))
  connect by prior node_id = parent_id and parent_id in ([join $expand ", "])) site_map
 where site_map.object_id = p.package_id (+)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/site-map/index-oracle.xql}
dbqd.acs-subsite.www.admin.site-map.index.package_types {dbqd.acs-subsite.www.admin.site-map.index.package_types {	select package_key, pretty_name
	from apm_package_types
	where not (apm_package.singleton_p(package_key) = 1 and
	      apm_package.num_instances(package_key) >= 1)
	order by pretty_name
      
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/site-map/index-oracle.xql}
dbqd.acs-subsite.www.admin.site-map.index.services_select {dbqd.acs-subsite.www.admin.site-map.index.services_select {  select package_id, ap.package_key, acs_object.name(package_id) instance_name,
  apm_package_type.num_parameters(ap.package_key) parameter_count
  from apm_packages ap, apm_package_types
  where ap.package_key = apm_package_types.package_key
  and package_type = 'apm_service'
  and (acs_permission.permission_p(package_id, :user_id, 'read') = 't' or
       acs_permission.permission_p(package_id, acs.magic_object_id('the_public'), 'read') = 't')

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/site-map/index-oracle.xql}
dbqd.acs-subsite.www.admin.site-map.index.root_node {dbqd.acs-subsite.www.admin.site-map.index.root_node {  select parent_id, object_id
  from site_nodes
  where node_id = :root_id

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/site-map/index.xql}
dbqd.acs-subsite.www.admin.site-map.instance-delete.package_instance_delete {dbqd.acs-subsite.www.admin.site-map.instance-delete.package_instance_delete {	begin
	apm_package.delete(package_id => :package_id);
	end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/site-map/instance-delete-oracle.xql}
dbqd.acs-subsite.www.admin.site-map.instance-delete.package_mounted_p {dbqd.acs-subsite.www.admin.site-map.instance-delete.package_mounted_p {	    select case when count(*) = 0 then 0 else 1 end 
	    from apm_packages p, site_nodes s
	    where package_id = :package_id
	    and p.package_id = s.object_id
	
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/site-map/instance-delete.xql}
dbqd.acs-subsite.www.admin.site-map.instance-delete.instance_delete_doubleclick_ck {dbqd.acs-subsite.www.admin.site-map.instance-delete.instance_delete_doubleclick_ck {	select case when count(*) = 0 then 0 else 1 end from apm_packages
	where package_id = :package_id
    
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/site-map/instance-delete.xql}
dbqd.acs-subsite.www.admin.site-map.mount-2.mount {dbqd.acs-subsite.www.admin.site-map.mount-2.mount {    update site_nodes
    set object_id = :package_id
    where node_id = :node_id
    and object_id is null
  
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/site-map/mount-2.xql}
dbqd.acs-subsite.www.admin.site-map.mount.url {dbqd.acs-subsite.www.admin.site-map.mount.url {  select site_node.url(:node_id) from dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/site-map/mount-oracle.xql}
dbqd.acs-subsite.www.admin.site-map.mount.packages_unmounted_select {dbqd.acs-subsite.www.admin.site-map.mount.packages_unmounted_select {  select package_id, acs_object.name(package_id) as name
  from
  apm_packages
  where (acs_permission.permission_p(package_id, :user_id, 'read') = 't' or
         acs_permission.permission_p(package_id, acs.magic_object_id('the_public'), 'read') = 't')
        and apm_package.singleton_p(package_key) = 0
        and not exists (select 1
                           from site_nodes
                           where object_id = package_id)  

  order by name

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/site-map/mount-oracle.xql}
dbqd.acs-subsite.www.admin.site-map.mount.packages_mounted_select {dbqd.acs-subsite.www.admin.site-map.mount.packages_mounted_select {  select package_id, acs_object.name(package_id) as name
  from
  apm_packages
  where (acs_permission.permission_p(package_id, :user_id, 'read') = 't' or
         acs_permission.permission_p(package_id, acs.magic_object_id('the_public'), 'read') = 't')
        and exists (select 1
                       from site_nodes
                       where object_id = package_id)  
  order by name

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/site-map/mount-oracle.xql}
dbqd.acs-subsite.www.admin.site-map.mount.packages_singleton_select {dbqd.acs-subsite.www.admin.site-map.mount.packages_singleton_select {  select package_id, acs_object.name(package_id) as name
  from
  apm_packages
  where (acs_permission.permission_p(package_id, :user_id, 'read') = 't' or
         acs_permission.permission_p(package_id, acs.magic_object_id('the_public'), 'read') = 't')
        and apm_package.singleton_p(package_key) = 1
        and not exists (select 1
                           from site_nodes
                           where object_id = package_id)  
  order by name

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/site-map/mount-oracle.xql}
dbqd.acs-subsite.www.admin.site-map.new.node_new {dbqd.acs-subsite.www.admin.site-map.new.node_new {        begin
        :1 := site_node.new (
        node_id => :new_node_id,
        parent_id => :parent_id,
        name => :name,
        directory_p => :directory_p,
        pattern_p => :pattern_p,
        creation_user => :user_id,
        creation_ip => :ip_address
        );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/site-map/new-oracle.xql}
dbqd.acs-subsite.www.admin.site-map.new.site_node_duplicate_name_root_ck {dbqd.acs-subsite.www.admin.site-map.new.site_node_duplicate_name_root_ck {          select case when count(*) = 0 then 0 else 1 end 
          from site_nodes
          where name = :name
          and parent_id = :parent_id
          and node_id <> :new_node_id
      
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/site-map/new.xql}
dbqd.acs-subsite.www.admin.site-map.new.site_node_new_doubleclick_protect {dbqd.acs-subsite.www.admin.site-map.new.site_node_new_doubleclick_protect {        select case when count(*) = 0 then 0 else 1 end 
        from site_nodes
        where node_id = :new_node_id
    
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/site-map/new.xql}
dbqd.acs-subsite.www.admin.site-map.package-new.package_new_doubleclick_ck {dbqd.acs-subsite.www.admin.site-map.package-new.package_new_doubleclick_ck {	select case when count(*) = 0 then 0 else 1 end 
 	from apm_packages
	where package_id = :new_package_id
    
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/site-map/package-new.xql}
dbqd.acs-subsite.www.admin.site-map.parameter-set-2.apm_parameters_set {dbqd.acs-subsite.www.admin.site-map.parameter-set-2.apm_parameters_set {	select parameter_id, parameter_name
	from apm_parameters
	where package_key = :package_key
    
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/site-map/parameter-set-2.xql}
dbqd.acs-subsite.www.admin.site-map.parameter-set.package_info {dbqd.acs-subsite.www.admin.site-map.parameter-set.package_info {    select package_key, acs_object.name(package_id) instance_name
    from apm_packages
    where package_id = :package_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/site-map/parameter-set-oracle.xql}
dbqd.acs-subsite.www.admin.site-map.parameter-set.parameter_table {dbqd.acs-subsite.www.admin.site-map.parameter-set.parameter_table {select p.parameter_id, p.parameter_name, p.package_key,
       nvl(p.description, 'No Description') description,
       v.attr_value,
       nvl(p.section_name, 'No Section Name') section_name
from apm_parameters p, (select parameter_id, attr_value
			from apm_parameter_values v
                        where v.package_id = :package_id) v
where p.parameter_id = v.parameter_id(+)
   and p.package_key = (select package_key from apm_packages where package_id = :package_id)
$additional_sql

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/site-map/parameter-set-oracle.xql}
dbqd.acs-subsite.www.admin.site-map.unmount.unmount {dbqd.acs-subsite.www.admin.site-map.unmount.unmount {    update site_nodes
    set object_id = null
    where node_id = :node_id
  
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/site-map/unmount.xql}
dbqd.acs-subsite.www.admin.site-map.unmounted.packages_normal_select {dbqd.acs-subsite.www.admin.site-map.unmounted.packages_normal_select {  select package_id, acs_object.name(package_id) as name
  from
  apm_packages
  where (acs_permission.permission_p(package_id, :user_id, 'read') = 't' or
         acs_permission.permission_p(package_id, acs.magic_object_id('the_public'), 'read') = 't')
    and apm_package.singleton_p(package_key) = 0
    and not exists (select 1
                    from site_nodes
                    where object_id = package_id)  
  order by name

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/site-map/unmounted-oracle.xql}
dbqd.acs-subsite.www.admin.site-map.unmounted.packages_singleton_select {dbqd.acs-subsite.www.admin.site-map.unmounted.packages_singleton_select {  select package_id, acs_object.name(package_id) as name
  from
  apm_packages
  where (acs_permission.permission_p(package_id, :user_id, 'read') = 't' or
         acs_permission.permission_p(package_id, acs.magic_object_id('the_public'), 'read') = 't')
    and apm_package.singleton_p(package_key) = 1
    and not exists (select 1
                    from site_nodes
                    where object_id = package_id)  
  order by name

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/site-map/unmounted-oracle.xql}
dbqd.acs-subsite.www.admin.users.new.rel_type_info {dbqd.acs-subsite.www.admin.users.new.rel_type_info {    select object_type as ancestor_rel_type
      from acs_object_types
     where supertype = 'relationship'
       and object_type in (
               select object_type from acs_object_types
               start with object_type = :add_with_rel_type
               connect by object_type = prior supertype
           )

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/users/new-oracle.xql}
dbqd.acs-subsite.www.admin.users.new.user_exists {dbqd.acs-subsite.www.admin.users.new.user_exists {	select case when exists
	                 (select 1 from users where user_id = :user_id)
	       then 1 else 0 end
	from dual
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/users/new-oracle.xql}
dbqd.acs-subsite.www.admin.users.new.user_new_2_rowid_for_email {dbqd.acs-subsite.www.admin.users.new.user_new_2_rowid_for_email {      select rowid from users where user_id = :user_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/admin/users/new-oracle.xql}
dbqd.acs-subsite.www.admin.users.new.group_info {dbqd.acs-subsite.www.admin.users.new.group_info {    select group_name as add_to_group_name, 
           join_policy as add_to_group_join_policy
    from groups
    where group_id = :add_to_group_id

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/users/new.xql}
dbqd.acs-subsite.www.admin.users.new.select_type_info {dbqd.acs-subsite.www.admin.users.new.select_type_info {    select t.pretty_name as user_type_pretty_name,
           t.table_name
      from acs_object_types t
     where t.object_type = :user_type

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/users/new.xql}
dbqd.acs-subsite.www.admin.users.new.creation_name_query {dbqd.acs-subsite.www.admin.users.new.creation_name_query {	    select p.first_names || ' ' || p.last_name 
	              || ' (' || pa.email || ')'
            from persons p, parties pa
            where p.person_id = pa.party_id and p.person_id = :creation_user
	    
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/admin/users/new.xql}
dbqd.acs-subsite.www.index.name {dbqd.acs-subsite.www.index.name {    select acs_object.name(:package_id) from dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/index-oracle.xql}
dbqd.acs-subsite.www.index.site_nodes {dbqd.acs-subsite.www.index.site_nodes {  select site_node.url(n.node_id) as url, acs_object.name(n.object_id) as name
    from site_nodes n
   where n.parent_id = :node_id
    and n.object_id is not null

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/index-oracle.xql}
dbqd.acs-subsite.www.permissions.grant-2.grant {dbqd.acs-subsite.www.permissions.grant-2.grant {  begin
    acs_permission.grant_permission(:object_id, :party_id, :privilege);
  end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/permissions/grant-2-oracle.xql}
dbqd.acs-subsite.www.permissions.grant.name {dbqd.acs-subsite.www.permissions.grant.name {      select acs_object.name(:object_id) from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/permissions/grant-oracle.xql}
dbqd.acs-subsite.www.permissions.grant.parties {dbqd.acs-subsite.www.permissions.grant.parties {  select party_id, acs_object.name(party_id) as name
  from parties

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/permissions/grant-oracle.xql}
dbqd.acs-subsite.www.permissions.grant.privileges {dbqd.acs-subsite.www.permissions.grant.privileges {  select privilege
  from acs_privileges
  order by privilege

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/permissions/grant.xql}
dbqd.acs-subsite.www.permissions.index.adminable_objects {dbqd.acs-subsite.www.permissions.index.adminable_objects {  select distinct o.object_id, acs_object.name(o.object_id) as name
  from acs_objects o, all_object_party_privilege_map map
  where map.object_id = o.object_id
    and map.party_id = :user_id
    and map.privilege = 'admin'

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/permissions/index-oracle.xql}
dbqd.acs-subsite.www.permissions.one.name {dbqd.acs-subsite.www.permissions.one.name {      select acs_object.name(:object_id) from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/permissions/one-oracle.xql}
dbqd.acs-subsite.www.permissions.one.inherited_permissions {dbqd.acs-subsite.www.permissions.one.inherited_permissions {  select grantee_id, grantee_name, privilege
  from (select grantee_id, acs_object.name(grantee_id) as grantee_name,
               privilege, 1 as counter
        from acs_permissions_all
        where object_id = :object_id
        union all
        select grantee_id, acs_object.name(grantee_id) as grantee_name,
               privilege, -1 as counter
        from acs_permissions
        where object_id = :object_id)
  group by grantee_id, grantee_name, privilege
  having sum(counter) > 0

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/permissions/one-oracle.xql}
dbqd.acs-subsite.www.permissions.one.acl {dbqd.acs-subsite.www.permissions.one.acl {  select grantee_id, acs_object.name(grantee_id) as grantee_name,
         privilege
  from acs_permissions
  where object_id = :object_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/permissions/one-oracle.xql}
dbqd.acs-subsite.www.permissions.one.context {dbqd.acs-subsite.www.permissions.one.context {  select acs_object.name(context_id)
  from acs_objects
  where object_id = :object_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/permissions/one-oracle.xql}
dbqd.acs-subsite.www.permissions.one.children {dbqd.acs-subsite.www.permissions.one.children {	select object_id as c_object_id,acs_object.name(object_id) as c_name
	from acs_objects o
	where context_id = :object_id
              and exists (select 1
                          from all_object_party_privilege_map
                          where object_id = o.object_id
                          and party_id = :user_id
                          and privilege = 'admin')    
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/permissions/one-oracle.xql}
dbqd.acs-subsite.www.permissions.one.children_count {dbqd.acs-subsite.www.permissions.one.children_count {	select count(*) as num_children
	from acs_objects o
	where context_id = :object_id and
            acs_permission.permission_p(o.object_id, :user_id, 'admin') = 't'

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/permissions/one-oracle.xql}
dbqd.acs-subsite.www.permissions.one.security_inherit_p {dbqd.acs-subsite.www.permissions.one.security_inherit_p {    select security_inherit_p
    from acs_objects
    where object_id = :object_id
  
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/permissions/one.xql}
dbqd.acs-subsite.www.permissions.revoke-2.revoke {dbqd.acs-subsite.www.permissions.revoke-2.revoke {		begin
		    acs_permission.revoke_permission(:object_id, :party_id, :privilege);
		end;
	    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/permissions/revoke-2-oracle.xql}
dbqd.acs-subsite.www.permissions.revoke.name {dbqd.acs-subsite.www.permissions.revoke.name {      select acs_object.name(:object_id)
from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/permissions/revoke-oracle.xql}
dbqd.acs-subsite.www.permissions.revoke.party_name {dbqd.acs-subsite.www.permissions.revoke.party_name {      select acs_object.name(:party_id) from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/permissions/revoke-oracle.xql}
dbqd.acs-subsite.www.permissions.toggle-inherit.toggle_inherit {dbqd.acs-subsite.www.permissions.toggle-inherit.toggle_inherit {  update acs_objects
  set security_inherit_p = decode(security_inherit_p, 't', 'f', 'f', 't')
  where object_id = :object_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/permissions/toggle-inherit-oracle.xql}
dbqd.acs-subsite.www.permissions.toggle-inherit.toggle_inherit {dbqd.acs-subsite.www.permissions.toggle-inherit.toggle_inherit {  update acs_objects
  set security_inherit_p = case when security_inherit_p = 't'
                                then 'f'
                                else 't'
                           end
  where object_id = :object_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/permissions/toggle-inherit-oracle.xql}
dbqd.acs-subsite.www.pvt.alerts.alerts_list {dbqd.acs-subsite.www.pvt.alerts.alerts_list {    select bea.valid_p, bea.frequency, bea.keywords, bt.topic, bea.rowid
    from bboard_email_alerts bea, bboard_topics bt
    where bea.user_id = :user_id
    and bea.topic_id = bt.topic_id
    order by bea.frequency
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/pvt/alerts-oracle.xql}
dbqd.acs-subsite.www.pvt.alerts.alerts_list_2 {dbqd.acs-subsite.www.pvt.alerts.alerts_list_2 {    select cea.valid_p,
           ad.domain,
           cea.alert_id,
           cea.expires,
           cea.frequency,
           cea.alert_type,
           cea.category,
           cea.keywords
    from   classified_email_alerts cea, ad_domains ad
    where  user_id = :user_id
    and    ad.domain_id = cea.domain_id
    and    sysdate <= expires
    order by expires desc
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/pvt/alerts-oracle.xql}
dbqd.acs-subsite.www.pvt.alerts.name_get {dbqd.acs-subsite.www.pvt.alerts.name_get {      select first_names, last_name, email, url from persons, parties where persons.person_id = parties.party_id and party_id =:user_id
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/pvt/alerts.xql}
dbqd.acs-subsite.www.pvt.home.pvt_home_user_info {dbqd.acs-subsite.www.pvt.home.pvt_home_user_info {    select first_names, last_name, email, url,
    nvl(screen_name,'&lt; none set up &gt;') as screen_name
    from cc_users 
    where user_id=:user_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/pvt/home-oracle.xql}
dbqd.acs-subsite.www.pvt.home.get_portrait_info {dbqd.acs-subsite.www.pvt.home.get_portrait_info {    select cr.publish_date, nvl(cr.title,'your portrait') as portrait_title
    from cr_revisions cr, cr_items ci, acs_rels a
    where cr.revision_id = ci.live_revision
    and  ci.item_id = a.object_id_two
    and a.object_id_one = :user_id
    and a.rel_type = 'user_portrait_rel'
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/pvt/home-oracle.xql}
dbqd.acs-subsite.www.pvt.home.pvt_home_user_info {dbqd.acs-subsite.www.pvt.home.pvt_home_user_info {    select first_names, last_name, email, url,
    nvl(screen_name,'&lt; none set up &gt;') as screen_name
    from cc_users 
    where user_id=:user_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/pvt/home-oracle.xql}
dbqd.acs-subsite.www.pvt.home.biography {dbqd.acs-subsite.www.pvt.home.biography {select attr_value
from acs_attribute_values
where object_id = :user_id
and attribute_id =
   (select attribute_id
    from acs_attributes
    where object_type = 'person'
    and attribute_name = 'bio')
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/pvt/home.xql}
dbqd.acs-subsite.www.pvt.home.get_portrait_info {dbqd.acs-subsite.www.pvt.home.get_portrait_info {    select cr.publish_date, nvl(cr.title,'your portrait') as portrait_title
    from cr_revisions cr, cr_items ci, acs_rels a
    where cr.revision_id = ci.live_revision
    and  ci.item_id = a.object_id_two
    and a.object_id_one = :user_id
    and a.rel_type = 'user_portrait_rel'
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/pvt/home-oracle.xql}
dbqd.acs-subsite.www.pvt.set-on-vacation-to-null.no_alerts_until {dbqd.acs-subsite.www.pvt.set-on-vacation-to-null.no_alerts_until {    select no_alerts_until from users where user_id = :user_id

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/pvt/set-on-vacation-to-null.xql}
dbqd.acs-subsite.www.pvt.set-on-vacation-to-null.pvt_unset_no_alerts_until {dbqd.acs-subsite.www.pvt.set-on-vacation-to-null.pvt_unset_no_alerts_until {	    update users 
	    set no_alerts_until = :clear
	    where user_id = :user_id
    
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/pvt/set-on-vacation-to-null.xql}
dbqd.acs-subsite.www.pvt.set-on-vacation-until.pvt_set_vacation_update {dbqd.acs-subsite.www.pvt.set-on-vacation-until.pvt_set_vacation_update {      update users set no_alerts_until = :on_vacation_until where user_id = :user_id
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/pvt/set-on-vacation-until.xql}
dbqd.acs-subsite.www.pvt.toggle-dont-spam-me-p.unused {dbqd.acs-subsite.www.pvt.toggle-dont-spam-me-p.unused {      update user_preferences set dont_spam_me_p = util.logical_negation(dont_spam_me_p) where user_id = :user_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/pvt/toggle-dont-spam-me-p-oracle.xql}
dbqd.acs-subsite.www.pvt.unsubscribe-2.rel_id {dbqd.acs-subsite.www.pvt.unsubscribe-2.rel_id {      select rel_id
from group_member_map
where group_id = acs.magic_object_id('registered_users')
  and member_id = :user_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/pvt/unsubscribe-2-oracle.xql}
dbqd.acs-subsite.www.pvt.unsubscribe-2.unused {dbqd.acs-subsite.www.pvt.unsubscribe-2.unused {begin
  membership_rel.deleted( rel_id => :rel_id );
end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/pvt/unsubscribe-2-oracle.xql}
dbqd.acs-subsite.www.pvt.unsubscribe.vacation_time {dbqd.acs-subsite.www.pvt.unsubscribe.vacation_time {      select no_alerts_until, acs_user.receives_alerts_p(:user_id) as on_vacation_p 
from users
where user_id = :user_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/pvt/unsubscribe-oracle.xql}
dbqd.acs-subsite.www.pvt.unsubscribe.nospam {dbqd.acs-subsite.www.pvt.unsubscribe.nospam {      select dont_spam_me_p
from user_preferences
where user_id = :user_id
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/pvt/unsubscribe.xql}
dbqd.acs-subsite.www.register.awaiting-approval.register_member_state_information {dbqd.acs-subsite.www.register.awaiting-approval.register_member_state_information {      select member_state, email, email_verified_p, rel_id
from cc_users where user_id = :user_id 
and  (member_state is null or member_state = 'rejected' or member_state = 'needs approval')
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/register/awaiting-approval.xql}
dbqd.acs-subsite.www.register.awaiting-approval.register_member_state_authorized_set {dbqd.acs-subsite.www.register.awaiting-approval.register_member_state_authorized_set {      update membership_rels set member_state = 'approved' where rel_id = :rel_id
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/register/awaiting-approval.xql}
dbqd.acs-subsite.www.register.awaiting-email-verification.register_user_state_properties {dbqd.acs-subsite.www.register.awaiting-email-verification.register_user_state_properties {    select member_state, email, rowid as row_id
    from cc_users
    where user_id = :user_id and
    email_verified_p = 'f' 
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/register/awaiting-email-verification-oracle.xql}
dbqd.acs-subsite.www.register.awaiting-email-verification.register_member_state_authorized_set {dbqd.acs-subsite.www.register.awaiting-email-verification.register_member_state_authorized_set {      update users set 
email_verified_p = 't'
where user_id = :user_id
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/register/awaiting-email-verification.xql}
dbqd.acs-subsite.www.register.banned-user.register_banned_member_state {dbqd.acs-subsite.www.register.banned-user.register_banned_member_state {    select member_state from cc_users 
    where user_id = :user_id 
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/register/banned-user.xql}
dbqd.acs-subsite.www.register.deleted-user.register_deleted_member_state {dbqd.acs-subsite.www.register.deleted-user.register_deleted_member_state {    select member_state from cc_users where user_id = :user_id

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/register/deleted-user.xql}
dbqd.acs-subsite.www.register.email-confirm.register_email_user_info_get {dbqd.acs-subsite.www.register.email-confirm.register_email_user_info_get {	select c.member_state,
	       c.email,
	       c.user_id,
	       c.email_verified_p
	  from users u, cc_users c
	 where u.user_id = c.user_id
	   and u.rowid = :row_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/register/email-confirm-oracle.xql}
dbqd.acs-subsite.www.register.email-confirm.register_email_user_update {dbqd.acs-subsite.www.register.email-confirm.register_email_user_update {      update users 
                        set email_verified_p = 't'
                        where user_id = :user_id
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/register/email-confirm.xql}
dbqd.acs-subsite.www.register.email-confirm.register_email_confirm_update3 {dbqd.acs-subsite.www.register.email-confirm.register_email_confirm_update3 {      update users
                        set email_verified_p = 't'
                        where user_id = :user_id
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/register/email-confirm.xql}
dbqd.acs-subsite.www.register.email-password-2.users_state_authorized_or_deleted {dbqd.acs-subsite.www.register.email-password-2.users_state_authorized_or_deleted {      select 
email from cc_users where user_id=:user_id
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/register/email-password-2.xql}
dbqd.acs-subsite.www.register.email-password-2.password_answer {dbqd.acs-subsite.www.register.email-password-2.password_answer {      select password_answer from users where user_id = :user_id
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/register/email-password-2.xql}
dbqd.acs-subsite.www.register.email-password-2.first_last_name {dbqd.acs-subsite.www.register.email-password-2.first_last_name {      select first_names as db_first_names, last_name as db_last_name from cc_users where user_id = $user_id
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/register/email-password-2.xql}
dbqd.acs-subsite.www.register.email-password-3.first_last_names {dbqd.acs-subsite.www.register.email-password-3.first_last_names {      select first_names as db_first_names, last_name as db_last_name, password_question from cc_users where user_id = :user_id
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/register/email-password-3.xql}
dbqd.acs-subsite.www.register.email-password-3.update_question {dbqd.acs-subsite.www.register.email-password-3.update_question {      update users set password_question = :question, password_answer = :answer where user_id = :user_id
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/register/email-password-3.xql}
dbqd.acs-subsite.www.register.email-password.question {dbqd.acs-subsite.www.register.email-password.question {      select password_question from users where user_id = :user_id
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/register/email-password.xql}
dbqd.acs-subsite.www.register.restore-user.user_state_info {dbqd.acs-subsite.www.register.restore-user.user_state_info {    select member_state, email, rel_id from cc_users where user_id = :user_id

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/register/restore-user.xql}
dbqd.acs-subsite.www.register.restore-user.member_state_authorized_transistion {dbqd.acs-subsite.www.register.restore-user.member_state_authorized_transistion {	update membership_rels
	set member_state = 'approved'  
	where rel_id = :rel_id
    
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/register/restore-user.xql}
dbqd.acs-subsite.www.register.user-join.group_info {dbqd.acs-subsite.www.register.user-join.group_info {    select group_name, join_policy
    from groups
    where group_id = :group_id

      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/register/user-join.xql}
dbqd.acs-subsite.www.register.user-login.user_login_user_id_from_email {dbqd.acs-subsite.www.register.user-login.user_login_user_id_from_email {    select user_id, member_state, email_verified_p
    from cc_users
    where email = lower(:email)
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/register/user-login.xql}
dbqd.acs-subsite.www.register.user-new-2.user_new_2_rowid_for_email {dbqd.acs-subsite.www.register.user-new-2.user_new_2_rowid_for_email {      select rowid from users where user_id = :user_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/register/user-new-2-oracle.xql}
dbqd.acs-subsite.www.register.user-new-2.user_exists {dbqd.acs-subsite.www.register.user-new-2.user_exists {      select count(*) from registered_users where user_id = :user_id
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/register/user-new-2.xql}
dbqd.acs-subsite.www.register.user-new.find_person {dbqd.acs-subsite.www.register.user-new.find_person {      select parties.party_id as user_id, persons.first_names, persons.last_name
      from parties, persons
      where parties.party_id = persons.person_id
        and parties.email = lower(:email)
   } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/register/user-new.xql}
dbqd.acs-subsite.www.shared.portrait-bits.output_portrait {dbqd.acs-subsite.www.shared.portrait-bits.output_portrait {        select r.content
        from cr_revisions r
        where r.revision_id = $revision_id

        } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/shared/portrait-bits-oracle.xql}
dbqd.acs-subsite.www.shared.portrait-bits.get_item_id {dbqd.acs-subsite.www.shared.portrait-bits.get_item_id {         select c.item_id
         from acs_rels a, cr_items c
         where a.object_id_two = c.item_id
           and a.object_id_one = :user_id
           and a.rel_type = 'user_portrait_rel'
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/shared/portrait-bits.xql}
dbqd.acs-subsite.www.user.basic-info-update-2.screen_name_unique_count {dbqd.acs-subsite.www.user.basic-info-update-2.screen_name_unique_count {    select count(*) from users where screen_name = :screen_name and user_id != :user_id
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/user/basic-info-update-2.xql}
dbqd.acs-subsite.www.user.basic-info-update-2.email_unique_count {dbqd.acs-subsite.www.user.basic-info-update-2.email_unique_count {      select count(party_id) from parties where email = lower(:email) and party_id <> :user_id
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/user/basic-info-update-2.xql}
dbqd.acs-subsite.www.user.basic-info-update-2.grab_bio {dbqd.acs-subsite.www.user.basic-info-update-2.grab_bio {      select attr_value as bio_old
    from acs_attribute_values
    where object_id = :user_id
    and attribute_id =
      (select attribute_id
      from acs_attributes
      where object_type = 'person'
      and attribute_name = 'bio')
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/user/basic-info-update-2.xql}
dbqd.acs-subsite.www.user.basic-info-update-2.update_parties {dbqd.acs-subsite.www.user.basic-info-update-2.update_parties {      update parties
      set email = :email,
      url = :url
      where party_id = :user_id
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/user/basic-info-update-2.xql}
dbqd.acs-subsite.www.user.basic-info-update-2.update_persons {dbqd.acs-subsite.www.user.basic-info-update-2.update_persons {      update persons
      set first_names = :first_names,
      last_name = :last_name
      where person_id = :user_id
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/user/basic-info-update-2.xql}
dbqd.acs-subsite.www.user.basic-info-update-2.update_users {dbqd.acs-subsite.www.user.basic-info-update-2.update_users {      update users
      set screen_name=:screen_name
      where user_id = :user_id
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/user/basic-info-update-2.xql}
dbqd.acs-subsite.www.user.basic-info-update-2.insert_bio {dbqd.acs-subsite.www.user.basic-info-update-2.insert_bio {      insert into acs_attribute_values
	(object_id, attribute_id, attr_value)
	values 
	(:user_id, (select attribute_id
          from acs_attributes
          where object_type = 'person'
          and attribute_name = 'bio'), :bio)
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/user/basic-info-update-2.xql}
dbqd.acs-subsite.www.user.basic-info-update-2.update_bio {dbqd.acs-subsite.www.user.basic-info-update-2.update_bio {      update acs_attribute_values
	set attr_value = :bio
	where object_id = :user_id
	and attribute_id =
          (select attribute_id
          from acs_attributes
          where object_type = 'person'
          and attribute_name = 'bio')
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/user/basic-info-update-2.xql}
dbqd.acs-subsite.www.user.basic-info-update.general_info {dbqd.acs-subsite.www.user.basic-info-update.general_info {      select first_names, last_name, email, url, screen_name
           from cc_users 
          where user_id=:user_id
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/user/basic-info-update.xql}
dbqd.acs-subsite.www.user.basic-info-update.biography {dbqd.acs-subsite.www.user.basic-info-update.biography {select attr_value
from acs_attribute_values
where object_id = :user_id
and attribute_id =
   (select attribute_id
    from acs_attributes
    where object_type = 'person'
    and attribute_name = 'bio')
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/user/basic-info-update.xql}
dbqd.acs-subsite.www.user.password-update.user_information {dbqd.acs-subsite.www.user.password-update.user_information {      select first_names, 
last_name, email, url from cc_users where user_id=:user_id
      } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/user/password-update.xql}
dbqd.acs-subsite.www.user.portrait.upload-2.create_item {dbqd.acs-subsite.www.user.portrait.upload-2.create_item {        begin
          :1 := content_item.new(
                 name => :name,
                 creation_ip => :creation_ip);
        end;

        } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/user/portrait/upload-2-oracle.xql}
dbqd.acs-subsite.www.user.portrait.upload-2.create_rel {dbqd.acs-subsite.www.user.portrait.upload-2.create_rel {        begin
          :1 := acs_rel.new (
                 rel_type => 'user_portrait_rel',
                 object_id_one => :user_id,
                 object_id_two => :item_id);
        end;

        } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/user/portrait/upload-2-oracle.xql}
dbqd.acs-subsite.www.user.portrait.upload-2.create_revision {dbqd.acs-subsite.www.user.portrait.upload-2.create_revision {        begin
          :1 := content_revision.new(
             title => :title,
             description => :portrait_comment,
             text => 'not_important',
             mime_type => :guessed_file_type,
             item_id => :item_id,
             creation_user => :user_id,
             creation_ip => :creation_ip
          );

          update cr_items
          set live_revision = :1
          where item_id = :item_id;
        end;

        } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/user/portrait/upload-2-oracle.xql}
dbqd.acs-subsite.www.user.portrait.upload-2.update_photo {dbqd.acs-subsite.www.user.portrait.upload-2.update_photo {        update cr_revisions
        set content = empty_blob()
        where revision_id = :revision_id
        returning content into :1

        } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/user/portrait/upload-2-oracle.xql}
dbqd.acs-subsite.www.user.portrait.upload-2.update_photo_info {dbqd.acs-subsite.www.user.portrait.upload-2.update_photo_info {	update cr_revisions
	set description = :portrait_comment,
	    publish_date = sysdate,
	    mime_type = :guessed_file_type,
	    title = :title
	where revision_id = :revision_id
 
        } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-subsite/www/user/portrait/upload-2-oracle.xql}
dbqd.acs-subsite.www.user.portrait.upload-2.get_item_id {dbqd.acs-subsite.www.user.portrait.upload-2.get_item_id {        select object_id_two as item_id
        from acs_rels
        where object_id_one = :user_id
        and rel_type = 'user_portrait_rel'

        } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/user/portrait/upload-2.xql}
dbqd.acs-subsite.www.user.portrait.upload-2.upload_image_info {dbqd.acs-subsite.www.user.portrait.upload-2.upload_image_info {                insert into images
                (image_id, width, height)
                values
                (:revision_id, :original_width, :original_height)

        } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/user/portrait/upload-2.xql}
dbqd.acs-subsite.www.user.portrait.upload-2.get_revision_id {dbqd.acs-subsite.www.user.portrait.upload-2.get_revision_id {        select live_revision as revision_id
        from cr_items
        where item_id = :item_id

        } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/user/portrait/upload-2.xql}
dbqd.acs-subsite.www.user.portrait.upload-2.update_image_info {dbqd.acs-subsite.www.user.portrait.upload-2.update_image_info {	update images
	set width = :original_width, height = :original_height
	where image_id = :revision_id

        } {} {} {} F:/temp/openacs-4/packages/acs-subsite/www/user/portrait/upload-2.xql}
dbqd.acs-tcl.tcl.acs-kernel-procs.ad_acs_administrator_exists_p.admin_exists_p {dbqd.acs-tcl.tcl.acs-kernel-procs.ad_acs_administrator_exists_p.admin_exists_p {	select 1 as admin_exists_p
	from dual
	where exists (select 1
		      from all_object_party_privilege_map m, users u
		      where m.object_id = 0
		      and m.party_id = u.user_id
		      and m.privilege = 'admin')
    
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/acs-kernel-procs.xql}
dbqd.acs-tcl.tcl.acs-kernel-procs.ad_acs_admin_node.acs_admin_node_p {dbqd.acs-tcl.tcl.acs-kernel-procs.ad_acs_admin_node.acs_admin_node_p {	select case when count(object_id) = 0 then 0 else 1 end
	from site_nodes
	where object_id = (select package_id 
	                   from apm_packages 
	                   where package_key = 'acs-admin')
    
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/acs-kernel-procs.xql}
dbqd.acs-tcl.tcl.acs-permissions-procs.ad_permission_grant.grant_permission {dbqd.acs-tcl.tcl.acs-permissions-procs.ad_permission_grant.grant_permission {	declare begin
	acs_permission.grant_permission(object_id => :object_id,
					grantee_id => :user_id,
					privilege => :privilege);
	end;
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/acs-permissions-procs-oracle.xql}
dbqd.acs-tcl.tcl.acs-permissions-procs.ad_permission_revoke.revoke_permission {dbqd.acs-tcl.tcl.acs-permissions-procs.ad_permission_revoke.revoke_permission {	declare begin
	acs_permission.revoke_permission(object_id => :object_id,
					grantee_id => :user_id,
					privilege => :privilege);
	end;
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/acs-permissions-procs-oracle.xql}
dbqd.acs-tcl.tcl.acs-permissions-procs.ad_permission_p.result {dbqd.acs-tcl.tcl.acs-permissions-procs.ad_permission_p.result {    select count(*) 
      from dual
     where acs_permission.permission_p(:object_id, :user_id, :privilege) = 't'
  
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/acs-permissions-procs-oracle.xql}
dbqd.acs-tcl.tcl.acs-permissions-procs.ad_require_permission.name {dbqd.acs-tcl.tcl.acs-permissions-procs.ad_require_permission.name {      select acs_object.name(:object_id) from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/acs-permissions-procs-oracle.xql}
dbqd.acs-tcl.tcl.acs-permissions-procs.ad_permission_p.n_privs {dbqd.acs-tcl.tcl.acs-permissions-procs.ad_permission_p.n_privs {      select count(*)
        from acs_privileges
       where privilege = :privilege
  
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/acs-permissions-procs.xql}
dbqd.acs-tcl.tcl.admin-init.path_select {dbqd.acs-tcl.tcl.admin-init.path_select {	select package_id, site_node.url(node_id) as url from apm_packages p, site_nodes n
	where p.package_id = n.object_id
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/admin-init-oracle.xql}
dbqd.acs-tcl.tcl.admin-procs.ad_user_class_query.sql_post_select_for_user_class {dbqd.acs-tcl.tcl.admin-procs.ad_user_class_query.sql_post_select_for_user_class {	    select sql_post_select
	    from user_classes 
            where user_class_id = [ns_dbquotevalue $user_class_id]
	
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/admin-procs.xql}
dbqd.acs-tcl.tcl.admin-procs.ad_user_class_description.category_id {dbqd.acs-tcl.tcl.admin-procs.ad_user_class_description.category_id {        select category from categories where category_id = :category_id

      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/admin-procs.xql}
dbqd.acs-tcl.tcl.admin-procs.ad_user_class_description.country_code {dbqd.acs-tcl.tcl.admin-procs.ad_user_class_description.country_code {        select country_name from country_codes where iso = :country_code

      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/admin-procs.xql}
dbqd.acs-tcl.tcl.admin-procs.ad_user_class_description.usps_abbrev {dbqd.acs-tcl.tcl.admin-procs.ad_user_class_description.usps_abbrev {        select state_name from states where usps_abbrev = :usps_abbrev

      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/admin-procs.xql}
dbqd.acs-tcl.tcl.admin-procs.ad_user_class_description.group_id {dbqd.acs-tcl.tcl.admin-procs.ad_user_class_description.group_id {        select group_name from groups where group_id = :group_id

      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/admin-procs.xql}
dbqd.acs-tcl.tcl.admin-procs.ad_user_class_description.registration_during_month {dbqd.acs-tcl.tcl.admin-procs.ad_user_class_description.registration_during_month {        select to_char(to_date(:registration_during_month,'YYYYMM'),'fmMonth YYYY') from dual

      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/admin-procs.xql}
dbqd.acs-tcl.tcl.admin-procs.ad_user_class_description.user_class_id {dbqd.acs-tcl.tcl.admin-procs.ad_user_class_description.user_class_id {        select name from user_classes where user_class_id = :user_class_id

      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/admin-procs.xql}
dbqd.acs-tcl.tcl.apm-file-procs.apm_generate_tarball.create_item {dbqd.acs-tcl.tcl.apm-file-procs.apm_generate_tarball.create_item {begin
 :1 := content_item.new(name => :name,
                        creation_ip => :creation_ip,
                        storage_type => 'file'
                        );
end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-file-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-file-procs.apm_generate_tarball.create_revision {dbqd.acs-tcl.tcl.apm-file-procs.apm_generate_tarball.create_revision {        begin
          :1 := content_revision.new(title => :title,
                                   description => 'gzipped tarfile',
                                   text => 'not_important',
                                   mime_type => 'text/plain',
                                   item_id => :item_id,
                                   creation_user => :user_id,
                                   creation_ip => :creation_ip
                );

          update cr_items
          set live_revision = :1
          where item_id = :item_id;
        end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-file-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-file-procs.apm_generate_tarball.update_tarball {dbqd.acs-tcl.tcl.apm-file-procs.apm_generate_tarball.update_tarball {                update cr_revisions
                set filename = '[set content_file [cr_create_content_file $item_id $revision_id $tmpfile]]'
                where revision_id = :revision_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-file-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-file-procs.apm_generate_tarball.update_content_length {dbqd.acs-tcl.tcl.apm-file-procs.apm_generate_tarball.update_content_length {                update apm_package_versions
                   set content_length = [cr_file_size $content_file]
                 where version_id = :version_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-file-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-file-procs.apm_extract_tarball.distribution_tar_ball_select {dbqd.acs-tcl.tcl.apm-file-procs.apm_extract_tarball.distribution_tar_ball_select {   select  '[cr_fs_path]' || r.filename as content, i.storage_type
     from cr_revisions r, cr_items i
    where r.item_id = i.item_id
      and r.revision_id = (select content_item.get_latest_revision(item_id)
                           from apm_package_versions 
                          where version_id = :version_id)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-file-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-file-procs.apm_file_add.apm_file_add {dbqd.acs-tcl.tcl.apm-file-procs.apm_file_add.apm_file_add {	begin
	:1 := apm_package_version.add_file(
		file_id => :file_id,
		version_id => :version_id,
		path => :path,
		file_type => :file_type,
                db_type => :db_type
		);
	end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-file-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-file-procs.apm_file_remove.apm_file_remove {dbqd.acs-tcl.tcl.apm-file-procs.apm_file_remove.apm_file_remove {	begin
	apm_package_version.remove_file(
				path => :path,
				version_id => :version_id
				);
	end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-file-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-file-procs.apm_generate_tarball.item_exists_p {dbqd.acs-tcl.tcl.apm-file-procs.apm_generate_tarball.item_exists_p {        select case when item_id is null then 0 else item_id end as item_id
          from apm_package_versions 
         where version_id = :version_id

      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-file-procs.xql}
dbqd.acs-tcl.tcl.apm-file-procs.apm_generate_tarball.set_item_id {dbqd.acs-tcl.tcl.apm-file-procs.apm_generate_tarball.set_item_id {        update apm_package_versions 
        set item_id = :item_id 
        where version_id = :version_id

      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-file-procs.xql}
dbqd.acs-tcl.tcl.apm-file-procs.apm_generate_tarball.get_revision_id {dbqd.acs-tcl.tcl.apm-file-procs.apm_generate_tarball.get_revision_id {        select live_revision as revision_id
          from cr_items
         where item_id = :item_id

      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-file-procs.xql}
dbqd.acs-tcl.tcl.apm-file-procs.apm_file_type_keys.file_type_keys {dbqd.acs-tcl.tcl.apm-file-procs.apm_file_type_keys.file_type_keys {      select file_type_key from apm_package_file_types
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-file-procs.xql}
dbqd.acs-tcl.tcl.apm-file-procs.apm_db_type_keys.db_type_keys {dbqd.acs-tcl.tcl.apm-file-procs.apm_db_type_keys.db_type_keys {      select db_type_key from apm_package_db_types
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-file-procs.xql}
dbqd.acs-tcl.tcl.apm-file-procs.apm_generate_tarball.package_key_select {dbqd.acs-tcl.tcl.apm-file-procs.apm_generate_tarball.package_key_select {      select package_key from apm_package_version_info where version_id = :version_id
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-file-procs.xql}
dbqd.acs-tcl.tcl.apm-file-procs.apm_version_from_file.apm_version_id_from_file {dbqd.acs-tcl.tcl.apm-file-procs.apm_version_from_file.apm_version_id_from_file {	select version_id from apm_package_files
	where file_id = :file_id
    
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-file-procs.xql}
dbqd.acs-tcl.tcl.apm-file-procs.apm_filelist_update.package_key_for_version_id {dbqd.acs-tcl.tcl.apm-file-procs.apm_filelist_update.package_key_for_version_id {	select package_key from apm_package_versions 
	where version_id = :version_id
    
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-file-procs.xql}
dbqd.acs-tcl.tcl.apm-file-procs.apm_filelist_update.apm_all_files {dbqd.acs-tcl.tcl.apm-file-procs.apm_filelist_update.apm_all_files {	select f.file_id, f.path
	from   apm_package_files f
	where  f.version_id = :version_id
	order by path
    
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-file-procs.xql}
dbqd.acs-tcl.tcl.apm-file-procs.apm_version_file_list.path_select {dbqd.acs-tcl.tcl.apm-file-procs.apm_version_file_list.path_select {        select path from apm_package_files
        where  version_id = :version_id
        $type_sql $db_type_sql order by path
    
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-file-procs.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_package_install.package_instantiate_mount {dbqd.acs-tcl.tcl.apm-install-procs.apm_package_install.package_instantiate_mount {	        declare
  	            instance_id   apm_packages.package_id%TYPE;
	        begin
	            instance_id := apm_package.new(
	                          instance_name => :package_name,
			  	  package_key => :package_key,
				  context_id => acs.magic_object_id('default_context')
				  );
	        end;
	    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-install-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_package_install_version.version_insert {dbqd.acs-tcl.tcl.apm-install-procs.apm_package_install_version.version_insert {		begin
		:1 := apm_package_version.new(
			version_id => :version_id,
			package_key => :package_key,
			version_name => :version_name,
			version_uri => :version_uri,
			summary => :summary,
			description_format => :description_format,
			description => :description,
			release_date => :release_date,
			vendor => :vendor,
			vendor_uri => :vendor_uri,
			installed_p => 't',
			data_model_loaded_p => 't'
	              );
		end;
	    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-install-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_package_delete.apm_package_delete {dbqd.acs-tcl.tcl.apm-install-procs.apm_package_delete.apm_package_delete {	begin
	    apm_package_type.drop_type(
	        package_key => :package_key,
	        cascade_p => 't'
            );
	end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-install-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_package_version_delete.apm_version_delete {dbqd.acs-tcl.tcl.apm-install-procs.apm_package_version_delete.apm_version_delete {	begin
	 apm_package_version.delete(version_id => :version_id);	 
	end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-install-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_package_install_spec.version_mark_installed {dbqd.acs-tcl.tcl.apm-install-procs.apm_package_install_spec.version_mark_installed {            update apm_package_versions
            set    installed_p = decode(version_id, :version_id, 't', 'f')
            where  package_key = :package_key
        
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-install-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_version_enable.apm_package_version_enable {dbqd.acs-tcl.tcl.apm-install-procs.apm_version_enable.apm_package_version_enable {	begin
	  apm_package_version.enable(
            version_id => :version_id
	  );
	end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-install-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_version_disable.apm_package_version_disable {dbqd.acs-tcl.tcl.apm-install-procs.apm_version_disable.apm_package_version_disable {	begin
	  apm_package_version.disable(
            version_id => :version_id
	  );
	end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-install-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_package_register.application_register {dbqd.acs-tcl.tcl.apm-install-procs.apm_package_register.application_register {	    begin
	    apm.register_application (
		        package_key => :package_key,
			package_uri => :package_uri,
			pretty_name => :pretty_name,
			pretty_plural => :pretty_plural,
			initial_install_p => :initial_install_p,
			singleton_p => :singleton_p,
			spec_file_path => :spec_file_path,
			spec_file_mtime => :spec_file_mtime
          		);
	    end;					  
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-install-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_package_register.service_register {dbqd.acs-tcl.tcl.apm-install-procs.apm_package_register.service_register {	    begin
	    apm.register_service (
			package_key => :package_key,
			package_uri => :package_uri,
			pretty_name => :pretty_name,
			pretty_plural => :pretty_plural,
			initial_install_p => :initial_install_p,
			singleton_p => :singleton_p,
			spec_file_path => :spec_file_path,
			spec_file_mtime => :spec_file_mtime
			);
	    end;					  
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-install-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_version_update.apm_version_update {dbqd.acs-tcl.tcl.apm-install-procs.apm_version_update.apm_version_update {	begin
	:1 := apm_package_version.edit(
				 version_id => :version_id, 
				 version_name => :version_name, 
				 version_uri => :version_uri,
				 summary => :summary,
				 description_format => :description_format,
				 description => :description,
				 release_date => :release_date,
				 vendor => :vendor,
				 vendor_uri => :vendor_uri,
				 installed_p => 't',
				 data_model_loaded_p => 't'				 
				 );
	end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-install-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_package_instantiate_and_mount.package_instantiate_and_mount {dbqd.acs-tcl.tcl.apm-install-procs.apm_package_instantiate_and_mount.package_instantiate_and_mount {	    declare
	            main_site_id  site_nodes.node_id%TYPE;
  	            instance_id   apm_packages.package_id%TYPE;
	            node_id       site_nodes.node_id%TYPE;
	    begin
	            main_site_id := site_node.node_id('/');
	        
	            instance_id := apm_package.new(
			  	  package_key => :package_key,
				  context_id => main_site_id
				  );

		    node_id := site_node.new(
			     parent_id => main_site_id,
			     name => :package_key,
			     directory_p => 't',
			     pattern_p => 't',
			     object_id => instance_id
			  );
	    end;
	    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-install-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_version_upgrade.apm_version_upgrade {dbqd.acs-tcl.tcl.apm-install-procs.apm_version_upgrade.apm_version_upgrade {	begin
	    apm_package_version.upgrade(version_id => :version_id);
	end;

    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-install-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_upgrade_for_version_p.apm_upgrade_for_version_p {dbqd.acs-tcl.tcl.apm-install-procs.apm_upgrade_for_version_p.apm_upgrade_for_version_p {	begin
	    :1 := apm_package_version.upgrade_p(
	              path => :path,
	              initial_version_name => :initial_version_name,
	              final_version_name => :final_version_name
	          );
	end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-install-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_upgrade_script_compare.test {dbqd.acs-tcl.tcl.apm-install-procs.apm_upgrade_script_compare.test {	    begin
	    :1 := apm_package_version.sortable_version_name('$f1_version_from');
	    end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-install-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_upgrade_script_compare.test {dbqd.acs-tcl.tcl.apm-install-procs.apm_upgrade_script_compare.test {	    begin
	    :1 := apm_package_version.sortable_version_name('$f1_version_from');
	    end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-install-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_dependency_provided_p.apm_dependency_check {dbqd.acs-tcl.tcl.apm-install-procs.apm_dependency_provided_p.apm_dependency_check {	select apm_package_version.version_name_greater(service_version, :dependency_version) as version_p
	from apm_package_dependencies d, apm_package_types a, apm_package_versions v
	where d.dependency_type = 'provides'
	and d.version_id = v.version_id
	and d.service_uri = :dependency_uri
	and v.installed_p = 't'
	and a.package_key = v.package_key
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-install-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_package_install.version_exists_p {dbqd.acs-tcl.tcl.apm-install-procs.apm_package_install.version_exists_p {	    select version_id 
	    from apm_package_versions 
	    where package_key = :package_key
	    and version_id = apm_package.highest_version(:package_key)
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-install-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_package_upgrade_p.apm_package_upgrade_p {dbqd.acs-tcl.tcl.apm-install-procs.apm_package_upgrade_p.apm_package_upgrade_p {	select apm_package_version.version_name_greater(:version_name, version_name) upgrade_p
	from apm_package_versions
	where package_key = :package_key
	and version_id = apm_package.highest_version (:package_key)
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-install-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_package_deinstall.apm_uninstall_record {dbqd.acs-tcl.tcl.apm-install-procs.apm_package_deinstall.apm_uninstall_record {	update apm_package_versions
	set    installed_p = 'f', enabled_p = 'f'
	where package_key = :package_key
    
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-install-procs.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_package_version_count.apm_package_version_count {dbqd.acs-tcl.tcl.apm-install-procs.apm_package_version_count.apm_package_version_count {	select count(*) from apm_package_versions
	where package_key = :package_key
    
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-install-procs.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_package_upgrade_parameters.parameter_id_get {dbqd.acs-tcl.tcl.apm-install-procs.apm_package_upgrade_parameters.parameter_id_get {	    select parameter_id from apm_parameters
	    where parameter_name = :parameter_name
	    and package_key = :package_key
	
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-install-procs.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_package_upgrade_parameters.all_parameters_for_package_key {dbqd.acs-tcl.tcl.apm-install-procs.apm_package_upgrade_parameters.all_parameters_for_package_key {	select parameter_id, parameter_name
	from apm_parameters
	where package_key =:package_key
    
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-install-procs.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_package_install_dependencies.all_dependencies_for_version {dbqd.acs-tcl.tcl.apm-install-procs.apm_package_install_dependencies.all_dependencies_for_version {	select dependency_id from apm_package_dependencies
	where version_id = :version_id
    
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-install-procs.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_package_install_owners.apm_delete_owners {dbqd.acs-tcl.tcl.apm-install-procs.apm_package_install_owners.apm_delete_owners {	delete from apm_package_owners where version_id = :version_id
    
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-install-procs.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_package_install_owners.owner_insert {dbqd.acs-tcl.tcl.apm-install-procs.apm_package_install_owners.owner_insert {	    insert into apm_package_owners(version_id, owner_uri, owner_name, sort_key)
	    values(:version_id, :owner_uri, :owner_name, :counter)
	
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-install-procs.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_package_install_files.files_delete {dbqd.acs-tcl.tcl.apm-install-procs.apm_package_install_files.files_delete {	delete from apm_package_files where version_id = :version_id
    
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-install-procs.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_package_install_spec.package_version_info_select {dbqd.acs-tcl.tcl.apm-install-procs.apm_package_install_spec.package_version_info_select {	select package_key, version_id
	from apm_package_version_info 
	where version_id = :version_id
    
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-install-procs.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_package_install_spec.package_spec_path_select {dbqd.acs-tcl.tcl.apm-install-procs.apm_package_install_spec.package_spec_path_select {            select path
            from apm_package_files
            where version_id = :version_id
            and file_type = 'package_spec'
	    and path = :info_file_name
        
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-install-procs.xql}
dbqd.acs-tcl.tcl.apm-install-procs.apm_package_install_spec.apm_spec_file_register {dbqd.acs-tcl.tcl.apm-install-procs.apm_package_install_spec.apm_spec_file_register {	    update apm_package_types
		set spec_file_path = :path
	        where package_key = :package_key
	
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-install-procs.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_highest_version.apm_highest_version {dbqd.acs-tcl.tcl.apm-procs.apm_highest_version.apm_highest_version {	begin
	:1 := apm_package.highest_version (
                    package_key => :package_key
		    );
	end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_num_instances.apm_num_instances {dbqd.acs-tcl.tcl.apm-procs.apm_num_instances.apm_num_instances {	begin
	:1 := apm_package.num_instances(
		package_key => :package_key
		);
	end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_parameter_register.parameter_register {dbqd.acs-tcl.tcl.apm-procs.apm_parameter_register.parameter_register {	    begin
	    :1 := apm.register_parameter(
					 parameter_id => :parameter_id,
					 parameter_name => :parameter_name,
					 package_key => :package_key,
					 description => :description,
					 datatype => :datatype,
					 default_value => :default_value,
					 section_name => :section_name,
					 min_n_values => :min_n_values,
					 max_n_values => :max_n_values
	                                );
	    end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_parameter_register.apm_parameter_cache_update {dbqd.acs-tcl.tcl.apm-procs.apm_parameter_register.apm_parameter_cache_update {	select v.package_id, p.parameter_name, nvl(p.default_value, v.attr_value) as attr_value
	from apm_parameters p, apm_parameter_values v
	where p.package_key = :package_key
	and p.parameter_id = v.parameter_id (+)
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_dependency_add.dependency_add {dbqd.acs-tcl.tcl.apm-procs.apm_dependency_add.dependency_add {	begin
	:1 := apm_package_version.add_dependency(
            dependency_id => :dependency_id,
	    version_id => :version_id,
	    dependency_uri => :dependency_uri,
	    dependency_version => :dependency_version
        );					 
	end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_dependency_remove.dependency_remove {dbqd.acs-tcl.tcl.apm-procs.apm_dependency_remove.dependency_remove {	begin
	apm_package_version.remove_dependency(
             dependency_id => :dependency_id
	);
	end;					        
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_interface_add.interface_add {dbqd.acs-tcl.tcl.apm-procs.apm_interface_add.interface_add {	begin
	:1 := apm_package_version.add_interface(
            interface_id => :interface_id,
	    version_id => :version_id,
	    interface_uri => :interface_uri,
	    interface_version => :interface_version
        );					 
	end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_interface_remove.interface_remove {dbqd.acs-tcl.tcl.apm-procs.apm_interface_remove.interface_remove {	begin
	apm_package_version.remove_interface(
             interface_id => :interface_id
	);
	end;					        
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_package_version_installed_p.apm_package_version_installed_p {dbqd.acs-tcl.tcl.apm-procs.apm_package_version_installed_p.apm_package_version_installed_p {	select decode(count(*), 0, 0, 1) from apm_package_versions
	where package_key = :package_key
	and version_name = :version_name
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_package_version_installed_p.apm_package_version_installed_p {dbqd.acs-tcl.tcl.apm-procs.apm_package_version_installed_p.apm_package_version_installed_p {	select decode(count(*), 0, 0, 1) from apm_package_versions
	where package_key = :package_key
	and version_name = :version_name
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_package_create_instance.apm_package_instance_new {dbqd.acs-tcl.tcl.apm-procs.apm_package_create_instance.apm_package_instance_new {	begin
      :1 := apm_package.new(
        package_id => :package_id,
        instance_name => :instance_name,
        package_key => :package_key,
        context_id => :context_id
      );
	end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_package_url_from_key_mem.apm_package_url_from_key {dbqd.acs-tcl.tcl.apm-procs.apm_package_url_from_key_mem.apm_package_url_from_key {	select site_node.url(node_id) 
          from site_nodes 
         where object_id = :package_id
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_package_version_enabled_p.apm_package_version_installed_p {dbqd.acs-tcl.tcl.apm-procs.apm_package_version_enabled_p.apm_package_version_installed_p {	select case when count(*) = 0 then 0 else 1 end from apm_package_versions
	where version_id = :version_id
	and enabled_p = 't'
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-procs.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_mark_version_for_reload.package_key_select {dbqd.acs-tcl.tcl.apm-procs.apm_mark_version_for_reload.package_key_select {      select package_key from apm_package_version_info where version_id = :version_id
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-procs.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_mark_version_for_reload.file_info {dbqd.acs-tcl.tcl.apm-procs.apm_mark_version_for_reload.file_info {        select file_id, path
        from   apm_package_files
        where  version_id = :version_id
        and    file_type in ('tcl_procs', 'query_file')
        and    (db_type is null or db_type = '[db_type]')
        order by path
    
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-procs.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_mark_version_for_reload.package_key_select {dbqd.acs-tcl.tcl.apm-procs.apm_mark_version_for_reload.package_key_select {        select package_key
        from apm_package_version_info
        where version_id = :version_id
    
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-procs.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_parameter_register.apm_parameter_cache_update {dbqd.acs-tcl.tcl.apm-procs.apm_parameter_register.apm_parameter_cache_update {	select v.package_id, p.parameter_name, nvl(p.default_value, v.attr_value) as attr_value
	from apm_parameters p, apm_parameter_values v
	where p.package_key = :package_key
	and p.parameter_id = v.parameter_id (+)
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-procs-oracle.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_load_libraries.apm_enabled_packages {dbqd.acs-tcl.tcl.apm-procs.apm_load_libraries.apm_enabled_packages {	select distinct package_key
	from apm_package_versions
	where enabled_p='t'
    
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-procs.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_load_libraries.apm_enabled_packages {dbqd.acs-tcl.tcl.apm-procs.apm_load_libraries.apm_enabled_packages {	select distinct package_key
	from apm_package_versions
	where enabled_p='t'
    
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-procs.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_load_queries.apm_enabled_packages {dbqd.acs-tcl.tcl.apm-procs.apm_load_queries.apm_enabled_packages {      select distinct package_key
	from apm_package_versions
	where enabled_p='t'
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-procs.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_pretty_name_for_file_type.pretty_name_select {dbqd.acs-tcl.tcl.apm-procs.apm_pretty_name_for_file_type.pretty_name_select {        select pretty_name
        from apm_package_file_types
        where file_type_key = :type
    
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-procs.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_pretty_name_for_db_type.pretty_db_name_select {dbqd.acs-tcl.tcl.apm-procs.apm_pretty_name_for_db_type.pretty_db_name_select {        select pretty_db_name
        from apm_package_db_types
        where db_type_key = :db_type
    
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-procs.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_package_parameters.get_names {dbqd.acs-tcl.tcl.apm-procs.apm_package_parameters.get_names {	select parameter_name from apm_parameters
	where package_key = :package_key
    
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-procs.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_package_registered_p.apm_package_registered_p {dbqd.acs-tcl.tcl.apm-procs.apm_package_registered_p.apm_package_registered_p {	select 1 from apm_package_types 
	where package_key = :package_key
    
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-procs.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_package_installed_p.apm_package_installed_p {dbqd.acs-tcl.tcl.apm-procs.apm_package_installed_p.apm_package_installed_p {	select 1 from apm_package_versions
	where package_key = :package_key
	and installed_p = 't'
    
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-procs.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_version_installed_p.apm_version_installed_p {dbqd.acs-tcl.tcl.apm-procs.apm_version_installed_p.apm_version_installed_p {	select 1 from apm_package_versions
	where version_id = :version_id
	and installed_p = 't'
    
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-procs.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_parameter_update.parameter_update {dbqd.acs-tcl.tcl.apm-procs.apm_parameter_update.parameter_update {       update apm_parameters 
	set parameter_name = :parameter_name,
            default_value  = :default_value,
            datatype       = :datatype, 
	    description	   = :description,
	    section_name   = :section_name,
            min_n_values   = :min_n_values,
            max_n_values   = :max_n_values
      where parameter_id = :parameter_id
    
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-procs.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_parameter_unregister.all_parameters_packages {dbqd.acs-tcl.tcl.apm-procs.apm_parameter_unregister.all_parameters_packages {	select package_id, parameter_id, parameter_name 
	from apm_packages p, apm_parameters ap
	where p.package_key = ap.package_key
	and ap.parameter_id = :parameter_id

    
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-procs.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_package_key_from_id_mem.apm_package_key_from_id {dbqd.acs-tcl.tcl.apm-procs.apm_package_key_from_id_mem.apm_package_key_from_id {	select package_key from apm_packages where package_id = :package_id
    
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-procs.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_package_id_from_key_mem.apm_package_id_from_key {dbqd.acs-tcl.tcl.apm-procs.apm_package_id_from_key_mem.apm_package_id_from_key {	select package_id from apm_packages where package_key = :package_key
    
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-procs.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_version_info.apm_package_by_version_id {dbqd.acs-tcl.tcl.apm-procs.apm_version_info.apm_package_by_version_id {	    select pretty_name, version_name, package_key, installed_p, distribution_uri, tagged_p
	    from apm_package_version_info where version_id = :version_id
	
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-procs.xql}
dbqd.acs-tcl.tcl.apm-procs.apm_parameter_sync.apm_parameter_names_and_values {dbqd.acs-tcl.tcl.apm-procs.apm_parameter_sync.apm_parameter_names_and_values {	select parameter_name, attr_value
	from apm_parameters p, apm_parameter_values v, apm_packages a
	where p.parameter_id = v.parameter_id
	and a.package_id = v.package_id
	and a.package_id = :package_id
    
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-procs.xql}
dbqd.acs-tcl.tcl.apm-xml-procs.apm_generate_package_spec.package_version_select {dbqd.acs-tcl.tcl.apm-xml-procs.apm_generate_package_spec.package_version_select {        select t.package_key, t.package_uri, t.pretty_name, t.pretty_plural, t.package_type,
	t.initial_install_p, t.singleton_p, v.*
        from   apm_package_versions v, apm_package_types t
        where  v.version_id = :version_id
        and    v.package_key = t.package_key
    
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-xml-procs.xql}
dbqd.acs-tcl.tcl.apm-xml-procs.apm_generate_package_spec.supported_databases {dbqd.acs-tcl.tcl.apm-xml-procs.apm_generate_package_spec.supported_databases {        select distinct db_type
        from apm_package_files
        where db_type is not null
    
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-xml-procs.xql}
dbqd.acs-tcl.tcl.apm-xml-procs.apm_generate_package_spec.owner_info {dbqd.acs-tcl.tcl.apm-xml-procs.apm_generate_package_spec.owner_info {        select owner_uri, owner_name
        from   apm_package_owners
        where  version_id = :version_id
        order by sort_key
    
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-xml-procs.xql}
dbqd.acs-tcl.tcl.apm-xml-procs.apm_generate_package_spec.dependency_info {dbqd.acs-tcl.tcl.apm-xml-procs.apm_generate_package_spec.dependency_info {        select dependency_type, service_uri, service_version
        from   apm_package_dependencies
        where  version_id = :version_id
        order by dependency_type, service_uri
    
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-xml-procs.xql}
dbqd.acs-tcl.tcl.apm-xml-procs.apm_generate_package_spec.version_path {dbqd.acs-tcl.tcl.apm-xml-procs.apm_generate_package_spec.version_path {      select path, file_type, db_type from apm_package_files where version_id = :version_id order by path
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-xml-procs.xql}
dbqd.acs-tcl.tcl.apm-xml-procs.apm_generate_package_spec.parameter_info {dbqd.acs-tcl.tcl.apm-xml-procs.apm_generate_package_spec.parameter_info {	select parameter_name, description, datatype, section_name, default_value, min_n_values, max_n_values
	  from apm_parameters
	 where package_key = :package_key
    
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/apm-xml-procs.xql}
dbqd.acs-tcl.tcl.community-core-procs.ad_user_new.user_insert {dbqd.acs-tcl.tcl.community-core-procs.ad_user_new.user_insert {	begin
	    :1 := acs.add_user(user_id => :user_id,
			 email => :email,
			 url => :url,
			 first_names => :first_names,
			 last_name => :last_name,
			 password => :hashed_password,
	                 salt => :salt,
	                 password_question => :password_question,
	                 password_answer => :password_answer,
	                 creation_ip => :peeraddr,
	                 email_verified_p => :email_verified_p,
	                 member_state => :member_state);
	    end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/community-core-procs-oracle.xql}
dbqd.acs-tcl.tcl.community-core-procs.cc_lookup_screen_name_user.user_select {dbqd.acs-tcl.tcl.community-core-procs.cc_lookup_screen_name_user.user_select {	select user_id from cc_users where upper(screen_name) = upper(:screen_name)
    
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/community-core-procs.xql}
dbqd.acs-tcl.tcl.community-core-procs.cc_lookup_screen_name_user.user_select {dbqd.acs-tcl.tcl.community-core-procs.cc_lookup_screen_name_user.user_select {	select user_id from cc_users where upper(screen_name) = upper(:screen_name)
    
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/community-core-procs.xql}
dbqd.acs-tcl.tcl.community-core-procs.cc_email_from_party.email_from_party {dbqd.acs-tcl.tcl.community-core-procs.cc_email_from_party.email_from_party {	select email from parties where party_id = :party_id
    
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/community-core-procs.xql}
dbqd.acs-tcl.tcl.community-core-procs.cc_lookup_name_group.group_select {dbqd.acs-tcl.tcl.community-core-procs.cc_lookup_name_group.group_select {	select group_id from groups where group_name = :name
    
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/community-core-procs.xql}
dbqd.acs-tcl.tcl.defs-procs.ad_record_query_string.query_string_record {dbqd.acs-tcl.tcl.defs-procs.ad_record_query_string.query_string_record {	insert into query_strings 
	(query_date, query_string, subsection, n_results, user_id) values
	(sysdate, :query_string, :subsection, :n_results, :user_id)
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/defs-procs-oracle.xql}
dbqd.acs-tcl.tcl.defs-procs.ad_parameter.ad_parameter_set {dbqd.acs-tcl.tcl.defs-procs.ad_parameter.ad_parameter_set {		begin
		  apm.set_value(
			  package_id => :package_id,
			  parameter_name => :name,
			  attr_value => :set
			);
		end;
	    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/defs-procs-oracle.xql}
dbqd.acs-tcl.tcl.defs-procs.ad_pretty_mailing_address_from_args.user_name_select {dbqd.acs-tcl.tcl.defs-procs.ad_pretty_mailing_address_from_args.user_name_select {		select first_names, last_name, email
		from persons, parties
		where person_id = :user_id
		and person_id = party_id
	    
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/defs-procs.xql}
dbqd.acs-tcl.tcl.defs-procs.ad_parameter_cache_all.parameters_get_all {dbqd.acs-tcl.tcl.defs-procs.ad_parameter_cache_all.parameters_get_all {	select v.package_id, p.parameter_name, v.attr_value
	from apm_parameters p, apm_parameter_values v
	where p.parameter_id = v.parameter_id
    
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/defs-procs.xql}
dbqd.acs-tcl.tcl.deprecated-utilities-procs.nmc_GetNewIDNumber.id_number_update {dbqd.acs-tcl.tcl.deprecated-utilities-procs.nmc_GetNewIDNumber.id_number_update {      update id_numbers set :id_name = :id_name + 1
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/deprecated-utilities-procs.xql}
dbqd.acs-tcl.tcl.deprecated-utilities-procs.nmc_GetNewIDNumber.nmc_getnewidnumber {dbqd.acs-tcl.tcl.deprecated-utilities-procs.nmc_GetNewIDNumber.nmc_getnewidnumber {      select unique :id_name from id_numbers
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/deprecated-utilities-procs.xql}
dbqd.acs-tcl.tcl.navigation-procs.ad_context_bar.context {dbqd.acs-tcl.tcl.navigation-procs.ad_context_bar.context {    select site_node.url(node_id) as url, object_id,
           acs_object.name(object_id) as object_name,
           level
    from site_nodes
    start with node_id = :node_id
    connect by prior parent_id = node_id
    order by level desc
  
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/navigation-procs-oracle.xql}
dbqd.acs-tcl.tcl.object-procs.acs_object_name.object_name_get {dbqd.acs-tcl.tcl.object-procs.acs_object_name.object_name_get {	begin :1 := acs_object.name(:object_id); end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/object-procs-oracle.xql}
dbqd.acs-tcl.tcl.object-procs.acs_lookup_magic_object.magic_object_select {dbqd.acs-tcl.tcl.object-procs.acs_lookup_magic_object.magic_object_select {	select object_id from acs_magic_objects where name = :name
    
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/object-procs.xql}
dbqd.acs-tcl.tcl.object-procs.acs_object_type.object_type_select {dbqd.acs-tcl.tcl.object-procs.acs_object_type.object_type_select {        select object_type
        from acs_objects
        where object_id = :object_id
    
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/object-procs.xql}
dbqd.acs-tcl.tcl.object-type-procs.acs_object_type_hierarchy.object_type_not_null {dbqd.acs-tcl.tcl.object-type-procs.acs_object_type_hierarchy.object_type_not_null {	select object_type,
	       pretty_name,
               '' as indent
	  from acs_object_types
	 start with object_type = :object_type
       connect by prior supertype = object_type
         order by level desc

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/object-type-procs-oracle.xql}
dbqd.acs-tcl.tcl.object-type-procs.acs_object_type_hierarchy.object_type_is_null {dbqd.acs-tcl.tcl.object-type-procs.acs_object_type_hierarchy.object_type_is_null {	select object_type,
	       pretty_name,
	       replace(lpad(' ', (level - 1) * $indent_width), ' ', '$indent_string') as indent
	  from acs_object_types
         start with supertype is null
       connect by supertype = prior object_type

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/object-type-procs-oracle.xql}
dbqd.acs-tcl.tcl.object-type-procs.acs_object_type_hierarchy.object_types {dbqd.acs-tcl.tcl.object-type-procs.acs_object_type_hierarchy.object_types {        $sql
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/object-type-procs.xql}
dbqd.acs-tcl.tcl.request-processor-init.ad_acs_admin_id_mem.acs_kernel_id_get {dbqd.acs-tcl.tcl.request-processor-init.ad_acs_admin_id_mem.acs_kernel_id_get {	select package_id from apm_packages
	where package_key = 'acs-admin'
    
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/request-processor-init.xql}
dbqd.acs-tcl.tcl.request-processor-init.ad_acs_admin_id_mem.acs_kernel_id_get {dbqd.acs-tcl.tcl.request-processor-init.ad_acs_admin_id_mem.acs_kernel_id_get {	select package_id from apm_packages
	where package_key = 'acs-admin'
    
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/request-processor-init.xql}
dbqd.acs-tcl.tcl.request-processor-procs.root_of_host.root_get {dbqd.acs-tcl.tcl.request-processor-procs.root_of_host.root_get {	select site_node.url(:node_id) as url
	from dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/request-processor-procs-oracle.xql}
dbqd.acs-tcl.tcl.request-processor-procs.ad_acs_kernel_id.acs_kernel_id_get {dbqd.acs-tcl.tcl.request-processor-procs.ad_acs_kernel_id.acs_kernel_id_get {	select package_id from apm_packages
	where package_key = 'acs-kernel'
    
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/request-processor-procs.xql}
dbqd.acs-tcl.tcl.request-processor-procs.ad_acs_kernel_id.acs_admin_id_get {dbqd.acs-tcl.tcl.request-processor-procs.ad_acs_kernel_id.acs_admin_id_get {        select package_id from apm_packages
        where package_key = 'acs-admin'
    
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/request-processor-procs.xql}
dbqd.acs-tcl.tcl.request-processor-procs.root_of_host.node_id {dbqd.acs-tcl.tcl.request-processor-procs.root_of_host.node_id {        select node_id 
	from host_node_map
	where host = :host

      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/request-processor-procs.xql}
dbqd.acs-tcl.tcl.security-init.secret_tokens_exists {dbqd.acs-tcl.tcl.security-init.secret_tokens_exists {      select case when count(*) = 0 then 0 else 1 end from secret_tokens

      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/security-init.xql}
dbqd.acs-tcl.tcl.security-procs.sec_update_user_session_info.update_last_visit {dbqd.acs-tcl.tcl.security-procs.sec_update_user_session_info.update_last_visit {        update users
        set second_to_last_visit = last_visit,
            last_visit = sysdate,
            n_sessions = n_sessions + 1
        where user_id = :user_id
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/security-procs-oracle.xql}
dbqd.acs-tcl.tcl.security-procs.ad_maybe_redirect_for_registration.sql_test_1 {dbqd.acs-tcl.tcl.security-procs.ad_maybe_redirect_for_registration.sql_test_1 {      select test_sql('select 1 from dual where 1=[DoubleApos $value]') from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/security-procs-oracle.xql}
dbqd.acs-tcl.tcl.security-procs.ad_maybe_redirect_for_registration.sql_test_2 {dbqd.acs-tcl.tcl.security-procs.ad_maybe_redirect_for_registration.sql_test_2 {      select test_sql('select 1 from dual where 1=[DoubleApos "'$value'"]') from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/security-procs-oracle.xql}
dbqd.acs-tcl.tcl.security-procs.populate_secret_tokens_db.insert_random_token {dbqd.acs-tcl.tcl.security-procs.populate_secret_tokens_db.insert_random_token {	    insert /*+ APPEND */ into secret_tokens(token_id, token, token_timestamp)
	    values(sec_security_token_id_seq.nextval, :random_token, sysdate)
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/security-procs-oracle.xql}
dbqd.acs-tcl.tcl.security-procs.populate_secret_tokens_cache.get_secret_tokens {dbqd.acs-tcl.tcl.security-procs.populate_secret_tokens_cache.get_secret_tokens {	    select * from (
	    select token_id, token
	    from secret_tokens
	    sample(15)
	    ) where rownum < :num_tokens
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/security-procs-oracle.xql}
dbqd.acs-tcl.tcl.security-procs.ad_set_client_property.prop_update_dml_clob {dbqd.acs-tcl.tcl.security-procs.ad_set_client_property.prop_update_dml_clob {         update sec_session_properties
         set property_value = null,
           property_clob = empty_clob(),
           secure_p = :secure,
           last_hit = :last_hit 
         where session_id = :session_id and
           module = :module and
           property_name = :name
         returning property_clob into :1
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/security-procs-oracle.xql}
dbqd.acs-tcl.tcl.security-procs.ad_set_client_property.prop_update_dml {dbqd.acs-tcl.tcl.security-procs.ad_set_client_property.prop_update_dml {         update sec_session_properties
         set property_value = :value,
           property_clob = null,
           secure_p = :secure,
           last_hit = :last_hit 
         where session_id = :session_id and
           module = :module and
           property_name = :name
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/security-procs-oracle.xql}
dbqd.acs-tcl.tcl.security-procs.sec_sweep_sessions.sessions_sweep {dbqd.acs-tcl.tcl.security-procs.sec_sweep_sessions.sessions_sweep {	delete from sec_session_properties
	where  :current_time - last_hit > :property_life
    
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/security-procs.xql}
dbqd.acs-tcl.tcl.security-procs.ad_check_password.password_select {dbqd.acs-tcl.tcl.security-procs.ad_check_password.password_select {      select password, salt from users where user_id = :user_id
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/security-procs.xql}
dbqd.acs-tcl.tcl.security-procs.ad_change_password.password_update {dbqd.acs-tcl.tcl.security-procs.ad_change_password.password_update {      update users set password = :new_password, salt = :salt where user_id = :user_id
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/security-procs.xql}
dbqd.acs-tcl.tcl.security-procs.sec_lookup_property.property_lookup_sec {dbqd.acs-tcl.tcl.security-procs.sec_lookup_property.property_lookup_sec {	    select property_value, secure_p
	    from sec_session_properties
	    where session_id = :id
	    and module = :module
	    and property_name = :name
	
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/security-procs.xql}
dbqd.acs-tcl.tcl.security-procs.sec_get_token.get_token {dbqd.acs-tcl.tcl.security-procs.sec_get_token.get_token {      select token from secret_tokens
                       	                 where token_id = :token_id
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/security-procs.xql}
dbqd.acs-tcl.tcl.security-procs.ad_set_client_property.prop_insert_dml {dbqd.acs-tcl.tcl.security-procs.ad_set_client_property.prop_insert_dml {	insert into sec_session_properties
	  (session_id, module, property_name, secure_p, last_hit)
	select :session_id, :module, :name, :secure, :last_hit
        from dual
        where not exists (select 1
                          from sec_session_properties
                          where session_id = :session_id and
                          module = :module and
                          property_name = :name)
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/security-procs.xql}
dbqd.acs-tcl.tcl.security-procs.sec_lookup_property.update_last_hit_dml {dbqd.acs-tcl.tcl.security-procs.sec_lookup_property.update_last_hit_dml {	update sec_session_properties
	   set last_hit = :new_last_hit
	 where session_id = :id and
               property_name = :name
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/security-procs.xql}
dbqd.acs-tcl.tcl.site-nodes-procs.site_node_create.node_new {dbqd.acs-tcl.tcl.site-nodes-procs.site_node_create.node_new {        begin
        :1 := site_node.new (
        node_id => :new_node_id,
        parent_id => :parent_node_id,
        name => :name,
        directory_p => :directory_p,
        pattern_p => :pattern_p,
        creation_user => :user_id,
        creation_ip => :ip_address
        );
        end;
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/site-nodes-procs-oracle.xql}
dbqd.acs-tcl.tcl.site-nodes-procs.site_nodes_sync_helper.nodes_select {dbqd.acs-tcl.tcl.site-nodes-procs.site_nodes_sync_helper.nodes_select {    select site_node.url(n.node_id) as url, n.node_id, n.directory_p,
           n.pattern_p, n.object_id, o.object_type, n.package_key, n.package_id
    from acs_objects o, (select n.node_id, n.directory_p, n.pattern_p, n.object_id, p.package_key, p.package_id
                           from site_nodes n, apm_packages p
                          where n.object_id = p.package_id (+) ) n
    where n.object_id = o.object_id (+)
  
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/site-nodes-procs-oracle.xql}
dbqd.acs-tcl.tcl.site-nodes-procs.site_node_mount_application.create_node {dbqd.acs-tcl.tcl.site-nodes-procs.site_node_mount_application.create_node {	begin
	  :1 := site_node.new (
                    parent_id => :parent_node_id,
                    name => :instance_name,
                    directory_p => 't',
                    pattern_p => 't'
	  );
	end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/site-nodes-procs-oracle.xql}
dbqd.acs-tcl.tcl.site-nodes-procs.site_node_closest_ancestor_package_url.select_url {dbqd.acs-tcl.tcl.site-nodes-procs.site_node_closest_ancestor_package_url.select_url {	select site_node.url(node_id) from site_nodes where object_id=:subsite_pkg_id
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/site-nodes-procs-oracle.xql}
dbqd.acs-tcl.tcl.site-nodes-procs.site_map_unmount_application.node_delete {dbqd.acs-tcl.tcl.site-nodes-procs.site_map_unmount_application.node_delete {	    begin site_node.delete(:node_id); end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-tcl/tcl/site-nodes-procs-oracle.xql}
dbqd.acs-tcl.tcl.site-nodes-procs.site_node_create_package_instance.update_site_nodes {dbqd.acs-tcl.tcl.site-nodes-procs.site_node_create_package_instance.update_site_nodes {	update site_nodes
	   set object_id = :package_id
	 where node_id = :node_id
    
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/site-nodes-procs.xql}
dbqd.acs-tcl.tcl.site-nodes-procs.site_node_mount_application.get_context {dbqd.acs-tcl.tcl.site-nodes-procs.site_node_mount_application.get_context {        select object_id as context_id
          from site_nodes 
         where node_id = :parent_node_id
    
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/site-nodes-procs.xql}
dbqd.acs-tcl.tcl.site-nodes-procs.site_map_unmount_application.unmount {dbqd.acs-tcl.tcl.site-nodes-procs.site_map_unmount_application.unmount {	update site_nodes
	   set object_id = null
	 where node_id = :node_id
    
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/site-nodes-procs.xql}
dbqd.acs-tcl.tcl.user-extensions-procs.acs_user_extension::list_extensions.select_extensions {dbqd.acs-tcl.tcl.user-extensions-procs.acs_user_extension::list_extensions.select_extensions {select impl_name from acs_sc_impls, acs_sc_bindings, acs_sc_contracts
where
acs_sc_impls.impl_id = acs_sc_bindings.impl_id and
acs_sc_contracts.contract_id= acs_sc_bindings.contract_id and 
acs_sc_contracts.contract_name='UserData'
} {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/user-extensions-procs.xql}
dbqd.acs-tcl.tcl.utilities-procs.ad_dbclick_check_dml.double_click_check {dbqd.acs-tcl.tcl.utilities-procs.ad_dbclick_check_dml.double_click_check {		select 1 as one
		from $table_name
		where $id_column_name = :generated_id
		
	    
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/utilities-procs.xql}
dbqd.acs-tcl.tcl.utilities-procs.validate_zip_code.zip_code_exists {dbqd.acs-tcl.tcl.utilities-procs.validate_zip_code.zip_code_exists {		    select 1
		      from dual
		     where exists (select 1
				     from zip_codes
				    where zip_code like :zip_5)
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/utilities-procs.xql}
dbqd.acs-tcl.tcl.utilities-procs.util_email_unique_p.email_unique_p {dbqd.acs-tcl.tcl.utilities-procs.util_email_unique_p.email_unique_p {    select count(*)
    from dual
    where not exists (select 1
                      from parties
                      where email = lower(:email))
  } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/utilities-procs.xql}
dbqd.acs-tcl.tcl.widgets-procs.all_states {dbqd.acs-tcl.tcl.widgets-procs.all_states {	select state_name, abbrev from states order by state_name
    
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/widgets-procs.xql}
dbqd.acs-tcl.tcl.widgets-procs.all_countries {dbqd.acs-tcl.tcl.widgets-procs.all_countries {	select default_name, iso from countries order by default_name 
    
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/widgets-procs.xql}
dbqd.acs-tcl.tcl.widgets-procs.ad_db_select_widget.currency_info {dbqd.acs-tcl.tcl.widgets-procs.ad_db_select_widget.currency_info {	select currency_name, iso 
	from currency_codes 
	where supported_p='t'
	order by currency_name 
    
      } {} {} {} F:/temp/openacs-4/packages/acs-tcl/tcl/widgets-procs.xql}
dbqd.acs-templating.www.doc.demo.form.get_user_id {dbqd.acs-templating.www.doc.demo.form.get_user_id {      select ad_template_sample_users_sequence.nextval
    } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-templating/www/doc/demo/form.xql}
dbqd.acs-templating.www.doc.demo.user-edit.get_users {dbqd.acs-templating.www.doc.demo.user-edit.get_users {      select user_id, first_name, last_name 
      from ad_template_sample_users 
      where lower(first_name) like '%' || :user_search || '%' 
         or lower(last_name) like '%' || :user_search || '%'
    } {} {} {} F:/temp/openacs-4/packages/acs-templating/www/doc/demo/user-edit.xql}
dbqd.acs-templating.www.doc.demo.user-edit.get_info {dbqd.acs-templating.www.doc.demo.user-edit.get_info {      select user_id, first_name, last_name, address1, address2, city, state
      from ad_template_sample_users
      where user_id = :user_id
    } {} {} {} F:/temp/openacs-4/packages/acs-templating/www/doc/demo/user-edit.xql}
dbqd.acs-workflow.tcl.display-procs.wf_attribute_widget.party_with_at_least_one_member {dbqd.acs-workflow.tcl.display-procs.wf_attribute_widget.party_with_at_least_one_member {			select p.party_id, 
			       acs_object.name(p.party_id) as name, 
			       case when p.email = '' then '' else '('||p.email||' end') as email
			from   parties p
			where  0 < (select count(*)
                                    from   users u, 
                                           party_approved_member_map m
			            where  m.party_id = p.party_id
			            and    u.user_id = m.member_id)
		    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/display-procs-oracle.xql}
dbqd.acs-workflow.tcl.display-procs.wf_attribute_widget.party_with_at_least_one_member {dbqd.acs-workflow.tcl.display-procs.wf_attribute_widget.party_with_at_least_one_member {			select p.party_id, 
			       acs_object.name(p.party_id) as name, 
			       case when p.email = '' then '' else '('||p.email||' end') as email
			from   parties p
			where  0 < (select count(*)
                                    from   users u, 
                                           party_approved_member_map m
			            where  m.party_id = p.party_id
			            and    u.user_id = m.member_id)
		    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/display-procs-oracle.xql}
dbqd.acs-workflow.tcl.display-procs.wf_assignment_widget.assignment_select {dbqd.acs-workflow.tcl.display-procs.wf_assignment_widget.assignment_select {	    select ca.party_id
	      from wf_case_assignments ca, wf_cases c
	     where c.case_id = :case_id
	       and ca.role_key = :role_key
	       and ca.workflow_key = c.workflow_key
	
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/tcl/display-procs.xql}
dbqd.acs-workflow.tcl.graph-procs.wf_get_workflow_net_internal.workflow_name {dbqd.acs-workflow.tcl.graph-procs.wf_get_workflow_net_internal.workflow_name {       select pretty_name from acs_object_types where object_type = :workflow_key 
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/tcl/graph-procs.xql}
dbqd.acs-workflow.tcl.graph-procs.wf_get_workflow_net_internal.transition_def {dbqd.acs-workflow.tcl.graph-procs.wf_get_workflow_net_internal.transition_def {	select transition_key,
	       transition_name,
	       sort_order,
	       trigger_type
	from   wf_transitions
	where  workflow_key = :workflow_key
	order  by sort_order
    
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/tcl/graph-procs.xql}
dbqd.acs-workflow.tcl.graph-procs.wf_get_workflow_net_internal.places_def {dbqd.acs-workflow.tcl.graph-procs.wf_get_workflow_net_internal.places_def {	select p.place_key,
	       p.place_name,
	       p.sort_order
	from   wf_places p
	where  p.workflow_key = :workflow_key
	order  by p.sort_order
    
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/tcl/graph-procs.xql}
dbqd.acs-workflow.tcl.graph-procs.wf_get_workflow_net_internal.arcs_def {dbqd.acs-workflow.tcl.graph-procs.wf_get_workflow_net_internal.arcs_def {	select transition_key,
	       place_key,
	       direction,
	       guard_callback,
	       guard_custom_arg,
	       guard_description
	from   wf_arcs
	where  workflow_key = :workflow_key
    
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/tcl/graph-procs.xql}
dbqd.acs-workflow.tcl.graph-procs.wf_generate_dot_representation.package_id {dbqd.acs-workflow.tcl.graph-procs.wf_generate_dot_representation.package_id {      select package_id from apm_packages where package_key='acs-workflow'
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/tcl/graph-procs.xql}
dbqd.acs-workflow.tcl.graph-procs.wf_generate_dot_representation.package_id {dbqd.acs-workflow.tcl.graph-procs.wf_generate_dot_representation.package_id {      select package_id from apm_packages where package_key='acs-workflow'
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/tcl/graph-procs.xql}
dbqd.acs-workflow.tcl.graph-procs.wf_generate_dot_representation.package_id {dbqd.acs-workflow.tcl.graph-procs.wf_generate_dot_representation.package_id {      select package_id from apm_packages where package_key='acs-workflow'
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/tcl/graph-procs.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_case_info.case {dbqd.acs-workflow.tcl.workflow-procs.wf_case_info.case {        select case_id,
               acs_object.name(object_id) as object_name,
        
               state
        from   wf_cases
        where  case_id = :case_id
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs-oracle.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_task_info.task {dbqd.acs-workflow.tcl.workflow-procs.wf_task_info.task {        select t.task_id,
               t.case_id, 
               c.object_id,
               acs_object.name(c.object_id) as object_name,
               ot.pretty_name as object_type_pretty,
               c.workflow_key,
               tr.transition_name as task_name, 
               tr.instructions,
               t.state, 
               t.enabled_date,
               to_char(t.enabled_date, :date_format) as enabled_date_pretty,
               t.started_date,
               to_char(t.started_date, :date_format) as started_date_pretty,
               t.canceled_date,
               to_char(t.canceled_date, :date_format) as canceled_date_pretty,
               t.finished_date,
               to_char(t.finished_date, :date_format) as finished_date_pretty,
               t.overridden_date,
               to_char(t.overridden_date, :date_format) as overridden_date_pretty,
               t.holding_user, 
               acs_object.name(t.holding_user) as holding_user_name,
               p.email as holding_user_email,
               t.hold_timeout,
               to_char(t.hold_timeout, :date_format) as hold_timeout_pretty,
               t.deadline,
               to_char(t.deadline, :date_format) as deadline_pretty,
               t.deadline - sysdate as days_till_deadline,
               tr.estimated_minutes,
               sysdate
          from wf_tasks t, 
               wf_cases c, 
               wf_transition_info tr, 
               acs_objects o, 
               acs_object_types ot, 
               parties p
         where t.task_id = :task_id
           and c.case_id = t.case_id
           and tr.transition_key = t.transition_key
           and tr.workflow_key = t.workflow_key and tr.context_key = c.context_key
           and o.object_id = c.object_id
           and ot.object_type = o.object_type
           and p.party_id (+) = t.holding_user
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs-oracle.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_task_info.task_attributes_to_set {dbqd.acs-workflow.tcl.workflow-procs.wf_task_info.task_attributes_to_set {        select a.attribute_id,
               a.attribute_name, 
               a.pretty_name, 
               a.datatype, 
               acs_object.get_attribute(t.case_id, a.attribute_name) as value,
               '' as attribute_widget
          from acs_attributes a, wf_transition_attribute_map m, wf_tasks t
         where t.task_id = :task_id
           and m.workflow_key = t.workflow_key and m.transition_key = t.transition_key
           and a.attribute_id = m.attribute_id
         order by m.sort_order
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs-oracle.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_task_info.task_assigned_users {dbqd.acs-workflow.tcl.workflow-procs.wf_task_info.task_assigned_users {        select ut.user_id,
               acs_object.name(ut.user_id) as name,
               p.email as email
          from wf_user_tasks ut, parties p
         where ut.task_id = :task_id
           and p.party_id = ut.user_id
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs-oracle.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_journal.journal {dbqd.acs-workflow.tcl.workflow-procs.wf_journal.journal {        select j.journal_id,
               j.action,
               j.action_pretty,
               o.creation_date,
               to_char(o.creation_date, :date_format) as creation_date_pretty,
               o.creation_user,
               acs_object.name(o.creation_user) as creation_user_name,
               p.email as creation_user_email, 
               o.creation_ip,
               j.msg
        from   journal_entries j, acs_objects o, parties p
        where  j.object_id = :case_id
          and  o.object_id = j.journal_id
          and  p.party_id (+) =  o.creation_user
        order  by o.creation_date $sql_order
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs-oracle.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_task_action.begin_task_action {dbqd.acs-workflow.tcl.workflow-procs.wf_task_action.begin_task_action {            begin
                :1 := workflow_case.begin_task_action(
                    task_id => :task_id, 
                    action => :action, 
                    action_ip => :modifying_ip,
                    user_id => :user_id, 
                    msg => :msg);
            end;
        
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs-oracle.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_task_action.set_attribute_value {dbqd.acs-workflow.tcl.workflow-procs.wf_task_action.set_attribute_value {                    begin
                        workflow_case.set_attribute_value(
                            journal_id => :journal_id, 
                            attribute_name => :attribute_name, 
                            value => :value
                        );
                    end;
                
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs-oracle.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_task_action.clear_assignments {dbqd.acs-workflow.tcl.workflow-procs.wf_task_action.clear_assignments {                    begin 
                        workflow_case.clear_manual_assignments(
                            case_id => :case_id,
                            role_key => :role_key
                        );
                    end;
                
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs-oracle.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_task_action.add_manual_assignment {dbqd.acs-workflow.tcl.workflow-procs.wf_task_action.add_manual_assignment {                        begin
                            workflow_case.add_manual_assignment(
                                case_id => :case_id,
                                role_key => :role_key,
                                party_id => :party_id
                            );
                        end;
                    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs-oracle.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_task_action.end_task_action {dbqd.acs-workflow.tcl.workflow-procs.wf_task_action.end_task_action {            begin
                workflow_case.end_task_action(
                    journal_id => :journal_id,
                    action => :action,
                    task_id => :task_id
                );
            end;
        
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs-oracle.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_message_transition_fire.transition_fire {dbqd.acs-workflow.tcl.workflow-procs.wf_message_transition_fire.transition_fire {        begin
            workflow_case.fire_message_transition(
                task_id => :task_id
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs-oracle.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_case_new.workflow_case_new {dbqd.acs-workflow.tcl.workflow-procs.wf_case_new.workflow_case_new {      begin 
            :1 := workflow_case.new(case_id => :case_id,
                                    workflow_key => :workflow_key,
                                    context_key => :context_key,
                                    object_id => :object_id,
                                    creation_user => :user_id,
                                    creation_ip => :creation_ip
                                   ); 
      end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs-oracle.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_case_new.workflow_case_start_case {dbqd.acs-workflow.tcl.workflow-procs.wf_case_new.workflow_case_start_case {      begin workflow_case.start_case(case_id => :case_id,
                                     creation_user => :user_id,
                                     creation_ip => :creation_ip
                                    ); end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs-oracle.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_case_suspend.case_suspend {dbqd.acs-workflow.tcl.workflow-procs.wf_case_suspend.case_suspend {        begin
            workflow_case.suspend(
                case_id => :case_id, 
                user_id => :user_id,
                ip_address => :ip_address,
                msg => :msg
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs-oracle.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_case_resume.case_resume {dbqd.acs-workflow.tcl.workflow-procs.wf_case_resume.case_resume {        begin
            workflow_case.resume(
                case_id => :case_id, 
                user_id => :user_id,
                ip_address => :ip_address,
                msg => :msg
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs-oracle.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_case_cancel.case_cancel {dbqd.acs-workflow.tcl.workflow-procs.wf_case_cancel.case_cancel {        begin
            workflow_case.cancel(
                case_id => :case_id, 
                user_id => :user_id,
                ip_address => :ip_address,
                msg => :msg
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs-oracle.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_case_comment.case_comment {dbqd.acs-workflow.tcl.workflow-procs.wf_case_comment.case_comment {        begin
            :1 := journal_entry.new(
                object_id => :case_id,
                action => 'comment',
                creation_user => :user_id,
                creation_ip => :ip_address,
                msg => :msg
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs-oracle.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_task_action.add_manual_assignment {dbqd.acs-workflow.tcl.workflow-procs.wf_task_action.add_manual_assignment {                        begin
                            workflow_case.add_manual_assignment(
                                case_id => :case_id,
                                role_key => :role_key,
                                party_id => :party_id
                            );
                        end;
                    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs-oracle.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_case_remove_manual_assignment.remove_manual_assignment {dbqd.acs-workflow.tcl.workflow-procs.wf_case_remove_manual_assignment.remove_manual_assignment {	begin
            workflow_case.remove_manual_assignment(
                case_id  => :case_id,
                role_key => :role_key,
                party_id => :party_id
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs-oracle.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_case_clear_manual_assignments.clear_manual_assignments {dbqd.acs-workflow.tcl.workflow-procs.wf_case_clear_manual_assignments.clear_manual_assignments {	begin
            workflow_case.clear_manual_assignments(
                case_id  => :case_id,
                role_key => :role_key
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs-oracle.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_case_add_task_assignment.add_task_assignment {dbqd.acs-workflow.tcl.workflow-procs.wf_case_add_task_assignment.add_task_assignment {	begin
            workflow_case.add_task_assignment(
                task_id  => :task_id,
                party_id => :party_id,
                permanent_p => :permanent_value
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs-oracle.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_case_remove_task_assignment.remove_task_assignment {dbqd.acs-workflow.tcl.workflow-procs.wf_case_remove_task_assignment.remove_task_assignment {	begin
            workflow_case.remove_task_assignment(
                task_id  => :task_id,
                party_id => :party_id,
                permanent_p => :permanent_value
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs-oracle.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_case_clear_task_assignments.clear_task_assignments {dbqd.acs-workflow.tcl.workflow-procs.wf_case_clear_task_assignments.clear_task_assignments {	begin
            workflow_case.clear_task_assignments(
                task_id  => :task_id,
                permanent_p => :permanent_value
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs-oracle.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_case_set_case_deadline.set_case_deadline {dbqd.acs-workflow.tcl.workflow-procs.wf_case_set_case_deadline.set_case_deadline {	begin
            workflow_case.set_case_deadline(
	        case_id => :case_id,
                transition_key => :transition_key,
                deadline => :deadline
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs-oracle.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_case_remove_case_deadline.remove_case_deadline {dbqd.acs-workflow.tcl.workflow-procs.wf_case_remove_case_deadline.remove_case_deadline {	begin
            workflow_case.remove_case_deadline(
	        case_id => :case_id,
                transition_key => :transition_key
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs-oracle.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_add_place.wf_add_place {dbqd.acs-workflow.tcl.workflow-procs.wf_add_place.wf_add_place {        begin
            workflow.add_place(
                workflow_key => :workflow_key,
                place_key => :place_key,
                place_name => :place_name,
                sort_order => :sort_order
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs-oracle.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_delete_place.wf_delete_place {dbqd.acs-workflow.tcl.workflow-procs.wf_delete_place.wf_delete_place {        begin
            workflow.delete_place(
                workflow_key => :workflow_key,
                place_key => :place_key
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs-oracle.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_add_role.wf_add_role {dbqd.acs-workflow.tcl.workflow-procs.wf_add_role.wf_add_role {	begin
            workflow.add_role(
                workflow_key => :workflow_key,
                role_key => :role_key,
                role_name => :role_name,
                sort_order => :sort_order
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs-oracle.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_move_role_up.move_role_up {dbqd.acs-workflow.tcl.workflow-procs.wf_move_role_up.move_role_up {	begin
            workflow.move_role_up(
                workflow_key => :workflow_key,
                role_key => :role_key
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs-oracle.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_move_role_down.move_role_down {dbqd.acs-workflow.tcl.workflow-procs.wf_move_role_down.move_role_down {	begin
            workflow.move_role_down(
                workflow_key => :workflow_key,
                role_key => :role_key
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs-oracle.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_delete_role.wf_delete_role {dbqd.acs-workflow.tcl.workflow-procs.wf_delete_role.wf_delete_role {	begin
            workflow.delete_role(
                workflow_key => :workflow_key,
                role_key => :role_key
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs-oracle.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_add_transition.wf_add_transition {dbqd.acs-workflow.tcl.workflow-procs.wf_add_transition.wf_add_transition {	    begin
		workflow.add_transition(
		    workflow_key => :workflow_key,
		    transition_key => :transition_key,
		    transition_name => :transition_name,
		    role_key => :role_key,
		    sort_order => :sort_order,
		    trigger_type => :trigger_type
		);
	    end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs-oracle.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_delete_transition.wf_delete_transition {dbqd.acs-workflow.tcl.workflow-procs.wf_delete_transition.wf_delete_transition {	begin
            workflow.delete_transition(
                workflow_key => :workflow_key,
                transition_key => :transition_key
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs-oracle.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_add_arc.wf_add_arc {dbqd.acs-workflow.tcl.workflow-procs.wf_add_arc.wf_add_arc {        begin
            workflow.add_arc(
                workflow_key => :workflow_key,
	        transition_key => :transition_key,
                place_key => :place_key,
                direction => :direction,
                guard_callback => :guard_callback,
                guard_custom_arg => :guard_custom_arg,
                guard_description => :guard_description
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs-oracle.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_add_arc_out.wf_add_arc {dbqd.acs-workflow.tcl.workflow-procs.wf_add_arc_out.wf_add_arc {        begin
            workflow.add_arc(
                workflow_key => :workflow_key,
	        transition_key => :from_transition_key,
                place_key => :to_place_key,
                guard_callback => :guard_callback,
                guard_custom_arg => :guard_custom_arg,
                guard_description => :guard_description
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs-oracle.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_add_arc_in.wf_add_arc {dbqd.acs-workflow.tcl.workflow-procs.wf_add_arc_in.wf_add_arc {        begin
            workflow.add_arc(
                workflow_key => :workflow_key,
	        transition_key => :to_transition_key,
                place_key => :from_place_key
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs-oracle.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_delete_arc.wf_delete_arc {dbqd.acs-workflow.tcl.workflow-procs.wf_delete_arc.wf_delete_arc {        begin
            workflow.delete_arc(
                workflow_key => :workflow_key,
                transition_key => :transition_key,
                place_key => :place_key,
                direction => :direction
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs-oracle.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_add_trans_attribute_map.add_trans_attribute_map_attribute_id {dbqd.acs-workflow.tcl.workflow-procs.wf_add_trans_attribute_map.add_trans_attribute_map_attribute_id {	    begin
	        workflow.add_trans_attribute_map(
                    workflow_key => :workflow_key,
	            transition_key => :transition_key,
	            attribute_id => :attribute_id,
	            sort_order => :sort_order
                );
	    end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs-oracle.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_add_trans_attribute_map.add_trans_attribute_map_attribute_name {dbqd.acs-workflow.tcl.workflow-procs.wf_add_trans_attribute_map.add_trans_attribute_map_attribute_name {	    begin
	        workflow.add_trans_attribute_map(
                    workflow_key => :workflow_key,
	            transition_key => :transition_key,
	            attribute_name => :attribute_name,
	            sort_order => :sort_order
                );
	    end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs-oracle.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_delete_trans_attribute_map.delete_trans_attribute_map {dbqd.acs-workflow.tcl.workflow-procs.wf_delete_trans_attribute_map.delete_trans_attribute_map {        begin
            workflow.delete_trans_attribute_map(
                workflow_key => :workflow_key,
                transition_key => :transition_key,
                attribute_id => :attribute_id
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs-oracle.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_add_trans_role_assign_map.add_trans_role_assign_map {dbqd.acs-workflow.tcl.workflow-procs.wf_add_trans_role_assign_map.add_trans_role_assign_map {        begin
            workflow.add_trans_role_assign_map(
                workflow_key => :workflow_key,
                transition_key => :transition_key,
                assign_role_key => :assign_role_key
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs-oracle.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_delete_trans_role_assign_map.delete_trans_role_assign_map {dbqd.acs-workflow.tcl.workflow-procs.wf_delete_trans_role_assign_map.delete_trans_role_assign_map {        begin
            workflow.delete_trans_role_assign_map(
                workflow_key => :workflow_key,
                transition_key => :transition_key,
                assign_role_key => :assign_role_key
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs-oracle.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_simple_workflow_p.simple_workflow {dbqd.acs-workflow.tcl.workflow-procs.wf_simple_workflow_p.simple_workflow {      begin :1 := workflow.simple_p(:workflow_key); end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs-oracle.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_export_workflow.declare_object_type {dbqd.acs-workflow.tcl.workflow-procs.wf_export_workflow.declare_object_type {declare
    v_workflow_key varchar2(40);
begin
    v_workflow_key := workflow.create_workflow(
        workflow_key => '[db_quote $new_workflow_key]', 
        pretty_name => '[db_quote $new_workflow_pretty_name]', 
        pretty_plural => '[db_quote $new_workflow_pretty_plural]', 
        description => '[db_quote $description]', 
        table_name => '[db_quote $new_table_name]'
    );
end;
/
show errors

        } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs-oracle.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_export_workflow.add_place {dbqd.acs-workflow.tcl.workflow-procs.wf_export_workflow.add_place {begin
    workflow.add_place(
        workflow_key => '[db_quote $new_workflow_key]',
        place_key    => '[db_quote $place_key]', 
        place_name   => '[db_quote $place_name]', 
        sort_order   => [ad_decode $sort_order "" "null" $sort_order]
    );
end;
/
show errors 
        } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs-oracle.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_export_workflow.add_role {dbqd.acs-workflow.tcl.workflow-procs.wf_export_workflow.add_role {begin
    workflow.add_role(
        workflow_key => '[db_quote $new_workflow_key]',
        role_key     => '[db_quote $role_key]',
        role_name    => '[db_quote $role_name]',
        sort_order   => [ad_decode $sort_order "" "null" $sort_order]
    );
end;
/
show errors
        } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs-oracle.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_export_workflow.add_transition {dbqd.acs-workflow.tcl.workflow-procs.wf_export_workflow.add_transition {begin
    workflow.add_transition(
        workflow_key    => '[db_quote $new_workflow_key]',
        transition_key  => '[db_quote $transition_key]',
        transition_name => '[db_quote $transition_name]',
        role_key        => '[db_quote $role_key]',
        sort_order      => [ad_decode $sort_order "" "null" $sort_order],
        trigger_type    => '[db_quote $trigger_type]'
    );
end;
/
show errors
        } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs-oracle.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_export_workflow.add_arc {dbqd.acs-workflow.tcl.workflow-procs.wf_export_workflow.add_arc {begin
    workflow.add_arc(
        workflow_key          => '[db_quote $new_workflow_key]',
        transition_key        => '[db_quote $transition_key]',
        place_key             => '[db_quote $place_key]',
        direction             => '[db_quote $direction]',
        guard_callback        => '[db_quote $guard_callback]',
        guard_custom_arg      => '[db_quote $guard_custom_arg]',
        guard_description     => '[db_quote $guard_description]'
    );
end;
/
show errors
        } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs-oracle.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_export_workflow.create_attribute {dbqd.acs-workflow.tcl.workflow-procs.wf_export_workflow.create_attribute {declare
    v_attribute_id number;
begin
    v_attribute_id := workflow.create_attribute(
        workflow_key => '[db_quote $new_workflow_key]',
        attribute_name => '[db_quote $attribute_name]',
        datatype => '[db_quote $datatype]',
        pretty_name => '[db_quote $pretty_name]',
        default_value => '[db_quote $default_value]'
    );
end;
/
show errors
        } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs-oracle.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_export_workflow.add_trans_attribute_map {dbqd.acs-workflow.tcl.workflow-procs.wf_export_workflow.add_trans_attribute_map {begin
    workflow.add_trans_attribute_map(
        workflow_key   => '[db_quote $new_workflow_key]', 
        transition_key => '[db_quote $transition_key]',
        attribute_name => '[db_quote $attribute_name]',
        sort_order     => [ad_decode $sort_order "" "null" $sort_order]
    );
end;
/
show errors
        } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs-oracle.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_export_workflow.add_trans_role_assign_map {dbqd.acs-workflow.tcl.workflow-procs.wf_export_workflow.add_trans_role_assign_map {begin
    workflow.add_trans_role_assign_map(
        workflow_key    => '[db_quote $new_workflow_key]',
        transition_key  => '[db_quote $transition_key]',
        assign_role_key => '[db_quote $assign_role_key]'
    );
end;
/
show errors;
        } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs-oracle.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_sweep_time_events.sweep_timed_transitions {dbqd.acs-workflow.tcl.workflow-procs.wf_sweep_time_events.sweep_timed_transitions {         begin
           workflow_case.sweep_timed_transitions;
         end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs-oracle.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_sweep_time_events.sweep_hold_timeout {dbqd.acs-workflow.tcl.workflow-procs.wf_sweep_time_events.sweep_hold_timeout {         begin
           workflow_case.sweep_hold_timeout;
         end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs-oracle.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_task_info.task_roles_to_assign {dbqd.acs-workflow.tcl.workflow-procs.wf_task_info.task_roles_to_assign {        select r.role_key, 
               r.role_name,
               '' as assignment_widget
          from wf_tasks t, wf_transition_role_assign_map tram, wf_roles r
         where t.task_id = :task_id
           and tram.workflow_key = t.workflow_key and tram.transition_key = t.transition_key
           and r.workflow_key = tram.workflow_key and r.role_key = tram.assign_role_key
        order by r.sort_order
    
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_task_panels.action_panels {dbqd.acs-workflow.tcl.workflow-procs.wf_task_panels.action_panels {    select tp.header, 
           tp.template_url
      from wf_context_task_panels tp, 
           wf_cases c,
           wf_tasks t
     where t.task_id = :task_id
       and c.case_id = t.case_id
       and tp.context_key = c.context_key
       and tp.workflow_key = c.workflow_key
       and tp.transition_key = t.transition_key
       and tp.overrides_action_p = 't'
       and (tp.only_display_when_started_p = 'f' or (t.state = 'started' and t.holding_user = :user_id))
    order by tp.overrides_action_p, tp.sort_order

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_task_panels.all_panels {dbqd.acs-workflow.tcl.workflow-procs.wf_task_panels.all_panels {    select tp.header, 
           tp.template_url
      from wf_context_task_panels tp, 
           wf_cases c,
           wf_tasks t
     where t.task_id = :task_id
       and c.case_id = t.case_id
       and tp.context_key = c.context_key
       and tp.workflow_key = c.workflow_key
       and tp.transition_key = t.transition_key
       and (tp.only_display_when_started_p = 'f' or (t.state = 'started' and t.holding_user = :user_id))
    order by tp.overrides_action_p, tp.sort_order

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_task_info.this_user_is_assigned_p {dbqd.acs-workflow.tcl.workflow-procs.wf_task_info.this_user_is_assigned_p {            select count(*) from wf_user_tasks  where task_id = :task_id and user_id = :user_id
        
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_journal.attributes {dbqd.acs-workflow.tcl.workflow-procs.wf_journal.attributes {            select a.attribute_name as name, 
                   a.pretty_name,
                   a.datatype, 
                   v.attr_value as value
            from   wf_attribute_value_audit v, acs_attributes a
            where  v.journal_id = :journal_id
            and    a.attribute_id = v.attribute_id
        
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_workflow_info.workflow {dbqd.acs-workflow.tcl.workflow-procs.wf_workflow_info.workflow {        select t.pretty_name,
               w.description
        from   wf_workflows w, acs_object_types t
        where  w.workflow_key = :workflow_key
        and    t.object_type = w.workflow_key
    
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_workflow_info.transitions {dbqd.acs-workflow.tcl.workflow-procs.wf_workflow_info.transitions {        select transition_key, transition_name, sort_order
        from wf_transitions 
        where workflow_key = :workflow_key 
        and trigger_type = 'user'
        order by sort_order asc
    
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_journal.attributes {dbqd.acs-workflow.tcl.workflow-procs.wf_journal.attributes {            select a.attribute_name as name, 
                   a.pretty_name,
                   a.datatype, 
                   v.attr_value as value
            from   wf_attribute_value_audit v, acs_attributes a
            where  v.journal_id = :journal_id
            and    a.attribute_id = v.attribute_id
        
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_task_action.case_id_from_task {dbqd.acs-workflow.tcl.workflow-procs.wf_task_action.case_id_from_task {       select case_id from wf_tasks where task_id = :task_id
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_add_place.place_keys {dbqd.acs-workflow.tcl.workflow-procs.wf_add_place.place_keys {      select place_key from wf_places where workflow_key = :workflow_key
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_add_role.role_keys {dbqd.acs-workflow.tcl.workflow-procs.wf_add_role.role_keys {      select role_key from wf_roles where workflow_key = :workflow_key
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_add_transition.transition_keys {dbqd.acs-workflow.tcl.workflow-procs.wf_add_transition.transition_keys {      select transition_key from wf_transitions where workflow_key = :workflow_key
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_add_transition.estimated_minutes_and_instructions {dbqd.acs-workflow.tcl.workflow-procs.wf_add_transition.estimated_minutes_and_instructions {		insert into wf_context_transition_info 
		(context_key, workflow_key, transition_key, estimated_minutes, instructions)
		values (:context_key, :workflow_key, :transition_key, :estimated_minutes, :instructions)
	    
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_export_workflow.workflow_info {dbqd.acs-workflow.tcl.workflow-procs.wf_export_workflow.workflow_info {        select wf.description,
        ot.pretty_name,
        ot.pretty_plural,
        ot.table_name
        from   wf_workflows wf,
        acs_object_types ot
        where  wf.workflow_key = :workflow_key
        and    ot.object_type = wf.workflow_key
    
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_export_workflow.places {dbqd.acs-workflow.tcl.workflow-procs.wf_export_workflow.places {        select place_key,
               place_name,
               sort_order
        from   wf_places
        where  workflow_key = :workflow_key
        order by sort_order asc
    
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_export_workflow.roles {dbqd.acs-workflow.tcl.workflow-procs.wf_export_workflow.roles {        select role_key,
               role_name,
               sort_order
	from   wf_roles
	where  workflow_key = :workflow_key
    
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_workflow_info.transitions {dbqd.acs-workflow.tcl.workflow-procs.wf_workflow_info.transitions {        select transition_key, transition_name, sort_order
        from wf_transitions 
        where workflow_key = :workflow_key 
        and trigger_type = 'user'
        order by sort_order asc
    
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_export_workflow.arcs {dbqd.acs-workflow.tcl.workflow-procs.wf_export_workflow.arcs {        select transition_key,
               place_key,
               direction,
               guard_callback,
               guard_custom_arg,
               guard_description
        from   wf_arcs
        where  workflow_key = :workflow_key
        order by transition_key asc
    
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_journal.attributes {dbqd.acs-workflow.tcl.workflow-procs.wf_journal.attributes {            select a.attribute_name as name, 
                   a.pretty_name,
                   a.datatype, 
                   v.attr_value as value
            from   wf_attribute_value_audit v, acs_attributes a
            where  v.journal_id = :journal_id
            and    a.attribute_id = v.attribute_id
        
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_export_workflow.transition_attribute_map {dbqd.acs-workflow.tcl.workflow-procs.wf_export_workflow.transition_attribute_map {            select transition_key,
                   sort_order
            from   wf_transition_attribute_map
            where  workflow_key = :workflow_key
            and    attribute_id = :attribute_id
        
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_export_workflow.transition_role_assign_map {dbqd.acs-workflow.tcl.workflow-procs.wf_export_workflow.transition_role_assign_map {        select transition_key,
               assign_role_key
          from wf_transition_role_assign_map
         where workflow_key = :workflow_key
         order by transition_key
    
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_export_workflow.context_transition_info {dbqd.acs-workflow.tcl.workflow-procs.wf_export_workflow.context_transition_info {        select transition_key,
               estimated_minutes,
               instructions,
               enable_callback,
               enable_custom_arg,
               fire_callback,
               fire_custom_arg,
               time_callback,
               time_custom_arg,
               deadline_callback,
               deadline_custom_arg,
               deadline_attribute_name,
               hold_timeout_callback,
               hold_timeout_custom_arg,
               notification_callback,
               notification_custom_arg,
               unassigned_callback,
               unassigned_custom_arg
        from   wf_context_transition_info
        where  workflow_key = :workflow_key
        and    context_key = :context_key
    
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_export_workflow.context_role_info {dbqd.acs-workflow.tcl.workflow-procs.wf_export_workflow.context_role_info {	select role_key,
	       assignment_callback,
	       assignment_custom_arg
	from   wf_context_role_info
	where  workflow_key = :workflow_key
	and    context_key = :context_key
    
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs.xql}
dbqd.acs-workflow.tcl.workflow-procs.wf_export_workflow.context_task_panels {dbqd.acs-workflow.tcl.workflow-procs.wf_export_workflow.context_task_panels {        select transition_key,
               sort_order,
               header,
               template_url,
               overrides_action_p,
               only_display_when_started_p
        from   wf_context_task_panels
        where  context_key = :context_key
        and    workflow_key = :workflow_key
        order by transition_key asc, sort_order asc
    
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/tcl/workflow-procs.xql}
dbqd.acs-workflow.www.active-tasks.active_tasks {dbqd.acs-workflow.www.active-tasks.active_tasks {    select t.task_id, 
           t.transition_key, 
           t.state, 
           t.case_id,
           tr.transition_name,
           to_char(t.enabled_date, :date_format) as enabled_date_pretty,
           to_char(t.started_date, :date_format) as started_date_pretty,
           to_char(t.deadline, :date_format) as deadline_pretty,
           p.party_id as assignee_party_id,
           p.email as assignee_email,
           acs_object.name(p.party_id) as assignee_name,
           '' as assignee_url,
           assignee_o.object_type as assignee_object_type,
           '' as reassign_url
      from wf_tasks t, wf_transitions tr, wf_task_assignments tasgn, parties p, acs_objects assignee_o
     where t.case_id = :case_id
       and t.state in ('enabled', 'started')
       and tr.workflow_key = t.workflow_key
       and tr.transition_key = t.transition_key
       and tasgn.task_id (+) = t.task_id
       and p.party_id (+) = tasgn.party_id
       and assignee_o.object_id (+) = p.party_id
    order by t.enabled_date desc

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/active-tasks-oracle.xql}
dbqd.acs-workflow.www.admin.arc-add.num_arcs {dbqd.acs-workflow.www.admin.arc-add.num_arcs {    select count(*) 
    from   wf_arcs 
    where  workflow_key = :workflow_key
    and    transition_key = :transition_key
    and    place_key = :place_key
    and    direction = :direction

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/arc-add.xql}
dbqd.acs-workflow.www.admin.arc-add.insert_arc {dbqd.acs-workflow.www.admin.arc-add.insert_arc {	insert into wf_arcs (workflow_key, transition_key, place_key, direction) 
	values (:workflow_key, :transition_key, :place_key, :direction)
    
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/arc-add.xql}
dbqd.acs-workflow.www.admin.arc-delete.delete_arc {dbqd.acs-workflow.www.admin.arc-delete.delete_arc {    delete from wf_arcs
    where  workflow_key = :workflow_key
    and    transition_key = :transition_key
    and    place_key = :place_key
    and    direction = :direction

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/arc-delete.xql}
dbqd.acs-workflow.www.admin.arc-edit-2.arc_update {dbqd.acs-workflow.www.admin.arc-edit-2.arc_update {    update wf_arcs
    set    guard_callback = :guard_callback,
           guard_custom_arg = :guard_custom_arg,
           guard_description = :guard_description
    where  workflow_key = :workflow_key
    and    transition_key = :transition_key
    and    place_key = :place_key
    and    direction = :direction

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/arc-edit-2.xql}
dbqd.acs-workflow.www.admin.arc-edit.possible_guards {dbqd.acs-workflow.www.admin.arc-edit.possible_guards {    select a0.package_name || '.' || a0.object_name
    from   user_arguments a0
    where  position = 0
    and    argument_name is null
    and    data_type = 'CHAR'
    and    in_out = 'OUT'
    and    exists (select 1 from user_arguments a1 where a1.package_name=a0.package_name and a1.object_name=a0.object_name 
                   and a1.position=1 and a1.data_type='NUMBER' and a1.in_out='IN')
    and    exists (select 1 from user_arguments a2 where a2.package_name=a0.package_name and a2.object_name=a0.object_name 
                   and a2.position=2 and a2.data_type='VARCHAR2' and a2.in_out='IN')
    and    exists (select 1 from user_arguments a3 where a3.package_name=a0.package_name and a3.object_name=a0.object_name 
                   and a3.position=3 and a3.data_type='VARCHAR2' and a3.in_out='IN')
    and    exists (select 1 from user_arguments a4 where a4.package_name=a0.package_name and a4.object_name=a0.object_name 
                   and a4.position=4 and a4.data_type='VARCHAR2' and a4.in_out='IN')
    and    exists (select 1 from user_arguments a5 where a5.package_name=a0.package_name and a5.object_name=a0.object_name 
                   and a5.position=5 and a5.data_type='VARCHAR2' and a5.in_out='IN')
    and    exists (select 1 from user_arguments a6 where a6.package_name=a0.package_name and a6.object_name=a0.object_name 
                   and a6.position=6 and a6.data_type='VARCHAR2' and a6.in_out='IN')

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/admin/arc-edit-oracle.xql}
dbqd.acs-workflow.www.admin.arc-edit.arc_info {dbqd.acs-workflow.www.admin.arc-edit.arc_info {    select a.guard_callback,
           a.guard_custom_arg,
           a.guard_description
    from   wf_arcs a
    where  a.workflow_key = :workflow_key
    and    a.transition_key = :transition_key
    and    a.place_key = :place_key
    and    a.direction = :direction

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/arc-edit.xql}
dbqd.acs-workflow.www.admin.arc-edit.possible_guards {dbqd.acs-workflow.www.admin.arc-edit.possible_guards {    select a0.package_name || '.' || a0.object_name
    from   user_arguments a0
    where  position = 0
    and    argument_name is null
    and    data_type = 'CHAR'
    and    in_out = 'OUT'
    and    exists (select 1 from user_arguments a1 where a1.package_name=a0.package_name and a1.object_name=a0.object_name 
                   and a1.position=1 and a1.data_type='NUMBER' and a1.in_out='IN')
    and    exists (select 1 from user_arguments a2 where a2.package_name=a0.package_name and a2.object_name=a0.object_name 
                   and a2.position=2 and a2.data_type='VARCHAR2' and a2.in_out='IN')
    and    exists (select 1 from user_arguments a3 where a3.package_name=a0.package_name and a3.object_name=a0.object_name 
                   and a3.position=3 and a3.data_type='VARCHAR2' and a3.in_out='IN')
    and    exists (select 1 from user_arguments a4 where a4.package_name=a0.package_name and a4.object_name=a0.object_name 
                   and a4.position=4 and a4.data_type='VARCHAR2' and a4.in_out='IN')
    and    exists (select 1 from user_arguments a5 where a5.package_name=a0.package_name and a5.object_name=a0.object_name 
                   and a5.position=5 and a5.data_type='VARCHAR2' and a5.in_out='IN')
    and    exists (select 1 from user_arguments a6 where a6.package_name=a0.package_name and a6.object_name=a0.object_name 
                   and a6.position=6 and a6.data_type='VARCHAR2' and a6.in_out='IN')

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/admin/arc-edit-oracle.xql}
dbqd.acs-workflow.www.admin.assign-transition-role-2.workflow_exists {dbqd.acs-workflow.www.admin.assign-transition-role-2.workflow_exists {	select count(*) from wf_workflows 
	where workflow_key = :workflow_key
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/assign-transition-role-2.xql}
dbqd.acs-workflow.www.admin.assign-transition-role-2.role_exists {dbqd.acs-workflow.www.admin.assign-transition-role-2.role_exists {	select count(*) from wf_roles 
	where workflow_key = :workflow_key
        and role_key = :role_key
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/assign-transition-role-2.xql}
dbqd.acs-workflow.www.admin.assign-transition-role-2.assign_transition_role {dbqd.acs-workflow.www.admin.assign-transition-role-2.assign_transition_role {    update wf_transitions set role_key = :role_key
    where workflow_key = :workflow_key
    and transition_key = :transition_key

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/assign-transition-role-2.xql}
dbqd.acs-workflow.www.admin.assign-transition-role.workflow_exists {dbqd.acs-workflow.www.admin.assign-transition-role.workflow_exists {	select count(*) from wf_workflows 
	where workflow_key = :workflow_key
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/assign-transition-role.xql}
dbqd.acs-workflow.www.admin.assign-transition-role.role_exists {dbqd.acs-workflow.www.admin.assign-transition-role.role_exists {	select count(*) from wf_roles 
	where workflow_key = :workflow_key
        and role_key = :role_key
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/assign-transition-role.xql}
dbqd.acs-workflow.www.admin.assign-transition-role.workflow {dbqd.acs-workflow.www.admin.assign-transition-role.workflow {    select w.workflow_key, 
           t.pretty_name
    from   wf_workflows w, 
           acs_object_types t 
    where  w.workflow_key = :workflow_key 
    and    w.workflow_key = t.object_type

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/assign-transition-role.xql}
dbqd.acs-workflow.www.admin.assign-transition-role.role {dbqd.acs-workflow.www.admin.assign-transition-role.role {    select role_name
    from wf_roles
    where workflow_key = :workflow_key
    and role_key = :role_key

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/assign-transition-role.xql}
dbqd.acs-workflow.www.admin.assign-transition-role.workflow_transitions {dbqd.acs-workflow.www.admin.assign-transition-role.workflow_transitions {    select transition_name,
           transition_key
    from wf_transitions
    where workflow_key = :workflow_key
    and role_key is null
    order by sort_order

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/assign-transition-role.xql}
dbqd.acs-workflow.www.admin.attribute-add-2.create_attribute {dbqd.acs-workflow.www.admin.attribute-add-2.create_attribute {    declare
      v_attribute_id integer;
    begin
      v_attribute_id := workflow.create_attribute(
          workflow_key => :workflow_key,
          attribute_name => :attribute_name,
          datatype => :datatype,
          pretty_name => :pretty_name,
          default_value => :default_value
      );
    end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/admin/attribute-add-2-oracle.xql}
dbqd.acs-workflow.www.admin.attribute-add.workflow_name {dbqd.acs-workflow.www.admin.attribute-add.workflow_name {    select ot.pretty_name as workflow_name
    from   acs_object_types ot
    where  ot.object_type = :workflow_key

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/attribute-add.xql}
dbqd.acs-workflow.www.admin.attribute-add.datatype {dbqd.acs-workflow.www.admin.attribute-add.datatype {    select datatype
    from acs_datatypes
    order by datatype

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/attribute-add.xql}
dbqd.acs-workflow.www.admin.attribute-delete.drop_attribute {dbqd.acs-workflow.www.admin.attribute-delete.drop_attribute {        begin
            workflow.drop_attribute(
                workflow_key => :workflow_key,
                attribute_name => :attribute_name
            );
	end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/admin/attribute-delete-oracle.xql}
dbqd.acs-workflow.www.admin.attribute-delete.drop_from_map {dbqd.acs-workflow.www.admin.attribute-delete.drop_from_map {	delete from wf_transition_attribute_map 
	where  workflow_key = :workflow_key
	and    attribute_id = :attribute_id
    
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/attribute-delete.xql}
dbqd.acs-workflow.www.admin.attributes-table.attributes {dbqd.acs-workflow.www.admin.attributes-table.attributes {    select a.attribute_id,
           a.sort_order,
           a.attribute_name,
           a.pretty_name,
           a.datatype,
           '' as delete_url,
           (select count(*) from wf_transition_attribute_map m
            where  m.workflow_key = a.object_type
            and    m.attribute_id = a.attribute_id) as used_p
    from   acs_attributes a
    where  a.object_type = :workflow_key
    order by sort_order

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/attributes-table.xql}
dbqd.acs-workflow.www.admin.attributes.workflow_exists {dbqd.acs-workflow.www.admin.attributes.workflow_exists {	select 1 from wf_workflows 
	where workflow_key = :workflow_key
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/attributes.xql}
dbqd.acs-workflow.www.admin.attributes.workflow_name {dbqd.acs-workflow.www.admin.attributes.workflow_name {    select ot.pretty_name as workflow_name
    from   acs_object_types ot
    where  ot.object_type = :workflow_key

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/attributes.xql}
dbqd.acs-workflow.www.admin.case-debug.case_info {dbqd.acs-workflow.www.admin.case-debug.case_info {    select case_id, acs_object.name(object_id) as object_name, state as state from wf_cases where case_id = :case_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/admin/case-debug-oracle.xql}
dbqd.acs-workflow.www.admin.case-debug.attributes {dbqd.acs-workflow.www.admin.case-debug.attributes {    select a.attribute_name as name, acs_object.get_attribute(c.case_id, a.attribute_name) as value
    from   acs_attributes a, wf_cases c
    where  a.object_type = c.workflow_key
    and    c.case_id = :case_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/admin/case-debug-oracle.xql}
dbqd.acs-workflow.www.admin.case-debug.dead_tokens {dbqd.acs-workflow.www.admin.case-debug.dead_tokens {    select token_id, place_key, case_id, state, locked_task_id,
           to_char(produced_date, 'YYYY-MM-DD HH24:MI:SS') as produced_date_pretty,
           to_char(locked_date, 'YYYY-MM-DD HH24:MI:SS') as locked_date_pretty,
           to_char(consumed_date, 'YYYY-MM-DD HH24:MI:SS') as consumed_date_pretty,
           to_char(canceled_date, 'YYYY-MM-DD HH24:MI:SS') as canceled_date_pretty
    from   wf_tokens
    where  case_id = :case_id
    and    state in ('consumed', 'canceled')

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/admin/case-debug-oracle.xql}
dbqd.acs-workflow.www.admin.case-debug.tasks {dbqd.acs-workflow.www.admin.case-debug.tasks {    select task_id, transition_key, state, case_id
    from   wf_tasks
    where  case_id = :case_id
    order by case when state = 'started' then 1 when state = 'enabled' then 2 when state = 'finished' then 3 else 4 end

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/case-debug.xql}
dbqd.acs-workflow.www.admin.case-debug.live_tokens {dbqd.acs-workflow.www.admin.case-debug.live_tokens {    select token_id, place_key, case_id, state, locked_task_id
    from   wf_tokens
    where  case_id = :case_id
    and    state in ('free', 'locked')

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/case-debug.xql}
dbqd.acs-workflow.www.admin.case-debug.enabled_transitions {dbqd.acs-workflow.www.admin.case-debug.enabled_transitions {    select case_id, transition_key, transition_name, trigger_type
    from   wf_enabled_transitions
    where  case_id = :case_id

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/case-debug.xql}
dbqd.acs-workflow.www.admin.cases.cases_table {dbqd.acs-workflow.www.admin.cases.cases_table {    select c.case_id, 
           o.object_type,
           ot.pretty_name as object_type_pretty,
           acs_object.name(c.object_id) as object_name, 
           c.state,
           jeo.creation_date as started_date,
           to_char(jeo.creation_date, 'Mon fmDDfm, YYYY HH24:MI:SS') as started_date_pretty,
           round(sysdate - jeo.creation_date) as age
    from   wf_cases c, 
           acs_objects o,
           acs_object_types ot,
           journal_entries je,
           acs_objects jeo
    where  c.workflow_key = '[db_quote $workflow_key]'
    and    o.object_id = c.object_id
    and    ot.object_type = o.object_type
    and    je.object_id = c.case_id
    and    je.action = 'case start'
    and    jeo.object_id = je.journal_id
    [ad_dimensional_sql $dimensional_list where and]
    [ad_order_by_from_sort_spec $orderby $table_def]

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/admin/cases-oracle.xql}
dbqd.acs-workflow.www.admin.cases.workflow_exists {dbqd.acs-workflow.www.admin.cases.workflow_exists {	select 1 from wf_workflows 
	where workflow_key = :workflow_key
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/cases.xql}
dbqd.acs-workflow.www.admin.cases.workflow_name {dbqd.acs-workflow.www.admin.cases.workflow_name {    select pretty_name as workflow_name
    from   acs_object_types
    where  object_type = :workflow_key

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/cases.xql}
dbqd.acs-workflow.www.admin.cases.transitions {dbqd.acs-workflow.www.admin.cases.transitions {    select transition_key, transition_name 
    from   wf_transitions
    where  workflow_key = :workflow_key
    order by transition_name

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/cases.xql}
dbqd.acs-workflow.www.admin.cases.places {dbqd.acs-workflow.www.admin.cases.places {    select place_key, place_name
    from   wf_places
    where  workflow_key = :workflow_key
    order by place_name

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/cases.xql}
dbqd.acs-workflow.www.admin.context-add-2.context_insert {dbqd.acs-workflow.www.admin.context-add-2.context_insert {    insert into wf_contexts (context_key, context_name)
    values (:context_key, :context_name)

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/context-add-2.xql}
dbqd.acs-workflow.www.admin.define.wf_exists {dbqd.acs-workflow.www.admin.define.wf_exists {       select count(*) from wf_workflows where workflow_key = :workflow_key 
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/define.xql}
dbqd.acs-workflow.www.admin.define.num_cases {dbqd.acs-workflow.www.admin.define.num_cases {    select count(*) as num_cases from wf_cases where workflow_key = :workflow_key

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/define.xql}
dbqd.acs-workflow.www.admin.export-2.package_id {dbqd.acs-workflow.www.admin.export-2.package_id {      select package_id from apm_packages where package_key='acs-workflow' and rownum=1
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/admin/export-2-oracle.xql}
dbqd.acs-workflow.www.admin.export-2.workflow_info {dbqd.acs-workflow.www.admin.export-2.workflow_info {    select ot.pretty_name as workflow_name
    from   acs_object_types ot
    where  ot.object_type = :workflow_key

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/export-2.xql}
dbqd.acs-workflow.www.admin.export.workflow_info {dbqd.acs-workflow.www.admin.export.workflow_info {    select ot.pretty_name as workflow_name
    from   acs_object_types ot
    where  ot.object_type = :workflow_key

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/export.xql}
dbqd.acs-workflow.www.admin.index.all_workflows {dbqd.acs-workflow.www.admin.index.all_workflows {    select w.workflow_key, 
           t.pretty_name,
           w.description,
           count(c.case_id) as num_cases,
           0 as num_unassigned_tasks
    from   wf_workflows w, 
           acs_object_types t, 
           wf_cases c
    where  w.workflow_key = t.object_type
    and    c.workflow_key (+) = w.workflow_key
    and    c.state (+) = 'active'
    group  by w.workflow_key, t.pretty_name, w.description
    order  by t.pretty_name

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/admin/index-oracle.xql}
dbqd.acs-workflow.www.admin.index.all_workflows {dbqd.acs-workflow.www.admin.index.all_workflows {    select w.workflow_key, 
           t.pretty_name,
           w.description,
           count(c.case_id) as num_cases,
           0 as num_unassigned_tasks
    from   wf_workflows w, 
           acs_object_types t, 
           wf_cases c
    where  w.workflow_key = t.object_type
    and    c.workflow_key (+) = w.workflow_key
    and    c.state (+) = 'active'
    group  by w.workflow_key, t.pretty_name, w.description
    order  by t.pretty_name

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/admin/index-oracle.xql}
dbqd.acs-workflow.www.admin.index.num_unassigned_tasks {dbqd.acs-workflow.www.admin.index.num_unassigned_tasks {	select count(*) 
	from   wf_tasks t, wf_cases c
	where  t.workflow_key = :workflow_key
	and    t.state = 'enabled'
        and    c.case_id = t.case_id
        and    c.state = 'active'
	and    not exists (select 1 from wf_task_assignments ta where ta.task_id = t.task_id)
    
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/index.xql}
dbqd.acs-workflow.www.admin.init.object {dbqd.acs-workflow.www.admin.init.object {    select object_id, acs_object.name(object_id) as name from acs_objects order by name

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/admin/init-oracle.xql}
dbqd.acs-workflow.www.admin.init.context {dbqd.acs-workflow.www.admin.init.context {    select context_key, context_name, '' as selected
    from wf_contexts 
    order by context_name 

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/init.xql}
dbqd.acs-workflow.www.admin.init.workflow_name {dbqd.acs-workflow.www.admin.init.workflow_name {      select pretty_name from acs_object_types where object_type = :workflow_key
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/init.xql}
dbqd.acs-workflow.www.admin.name-edit-2.object_type_update {dbqd.acs-workflow.www.admin.name-edit-2.object_type_update {	update acs_object_types
	set    pretty_name = :workflow_name,
	       pretty_plural = :workflow_name
	where  object_type = :workflow_key
    
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/name-edit-2.xql}
dbqd.acs-workflow.www.admin.name-edit-2.workflow_update {dbqd.acs-workflow.www.admin.name-edit-2.workflow_update {	update wf_workflows
	set    description = :description
	where  workflow_key = :workflow_key
    
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/name-edit-2.xql}
dbqd.acs-workflow.www.admin.name-edit.workflow_info {dbqd.acs-workflow.www.admin.name-edit.workflow_info {    select ot.pretty_name as workflow_name, w.description
    from   acs_object_types ot, wf_workflows w
    where  ot.object_type = w.workflow_key
    and    w.workflow_key = :workflow_key

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/name-edit.xql}
dbqd.acs-workflow.www.admin.place-add-2.num_places {dbqd.acs-workflow.www.admin.place-add-2.num_places {	    select count(*) 
	    from   wf_places
	    where  workflow_key = :workflow_key
	    and    place_name = :place_name
	
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/place-add-2.xql}
dbqd.acs-workflow.www.admin.place-add-2.num_places {dbqd.acs-workflow.www.admin.place-add-2.num_places {	    select count(*) 
	    from   wf_places
	    where  workflow_key = :workflow_key
	    and    place_name = :place_name
	
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/place-add-2.xql}
dbqd.acs-workflow.www.admin.place-add-2.place_keys {dbqd.acs-workflow.www.admin.place-add-2.place_keys {      select place_key from wf_places where workflow_key = :workflow_key
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/place-add-2.xql}
dbqd.acs-workflow.www.admin.place-add-2.place_add {dbqd.acs-workflow.www.admin.place-add-2.place_add {    insert into wf_places (place_key, place_name, workflow_key, sort_order)
    values (:place_key, :place_name, :workflow_key, :sort_order)

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/place-add-2.xql}
dbqd.acs-workflow.www.admin.place-add.workflow_info {dbqd.acs-workflow.www.admin.place-add.workflow_info {    select ot.pretty_name as workflow_name
    from   acs_object_types ot
    where  ot.object_type = :workflow_key

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/place-add.xql}
dbqd.acs-workflow.www.admin.place-add.num_start_places {dbqd.acs-workflow.www.admin.place-add.num_start_places {    select case when count(*) = 0 then 0 else 1 end from wf_places 
    where  workflow_key = :workflow_key
    and    place_key = 'start'

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/place-add.xql}
dbqd.acs-workflow.www.admin.place-add.num_start_places {dbqd.acs-workflow.www.admin.place-add.num_start_places {    select case when count(*) = 0 then 0 else 1 end from wf_places 
    where  workflow_key = :workflow_key
    and    place_key = 'start'

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/place-add.xql}
dbqd.acs-workflow.www.admin.place-delete.arcs_delete {dbqd.acs-workflow.www.admin.place-delete.arcs_delete {	delete from wf_arcs
	where  workflow_key = :workflow_key
	and    place_key = :place_key
    
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/place-delete.xql}
dbqd.acs-workflow.www.admin.place-delete.place_delete {dbqd.acs-workflow.www.admin.place-delete.place_delete {	delete from wf_places
	where  workflow_key = :workflow_key
	and    place_key = :place_key
    
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/place-delete.xql}
dbqd.acs-workflow.www.admin.place-edit-2.place_update {dbqd.acs-workflow.www.admin.place-edit-2.place_update {    update wf_places
    set    place_name = :place_name,
           sort_order = :sort_order
    where  workflow_key = :workflow_key
    and    place_key = :place_key

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/place-edit-2.xql}
dbqd.acs-workflow.www.admin.place-edit.place_info {dbqd.acs-workflow.www.admin.place-edit.place_info {    select p.place_name, p.sort_order,
           ot.pretty_name as workflow_name
    from   wf_places p, acs_object_types ot
    where  p.place_key = :place_key
    and    p.workflow_key = :workflow_key
    and    ot.object_type = p.workflow_key

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/place-edit.xql}
dbqd.acs-workflow.www.admin.role-add-2.num_roles {dbqd.acs-workflow.www.admin.role-add-2.num_roles {	    select count(*) 
	    from   wf_roles
	    where  workflow_key = :workflow_key
	    and    role_name = :role_name
	
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/role-add-2.xql}
dbqd.acs-workflow.www.admin.role-add.workflow_info {dbqd.acs-workflow.www.admin.role-add.workflow_info {    select ot.pretty_name as workflow_name
    from   acs_object_types ot
    where  ot.object_type = :workflow_key

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/role-add.xql}
dbqd.acs-workflow.www.admin.role-edit-2.num_roles {dbqd.acs-workflow.www.admin.role-edit-2.num_roles {	    select count(*) 
	    from   wf_roles
	    where  workflow_key = :workflow_key
	    and    role_name = :role_name
            and    role_key != :role_key
	
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/role-edit-2.xql}
dbqd.acs-workflow.www.admin.role-edit-2.edit_role {dbqd.acs-workflow.www.admin.role-edit-2.edit_role {	update wf_roles
	   set role_name = :role_name
	 where workflow_key = :workflow_key
	   and role_key = :role_key
    
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/role-edit-2.xql}
dbqd.acs-workflow.www.admin.role-edit.workflow_info {dbqd.acs-workflow.www.admin.role-edit.workflow_info {    select ot.pretty_name as workflow_name
    from   acs_object_types ot
    where  ot.object_type = :workflow_key

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/role-edit.xql}
dbqd.acs-workflow.www.admin.role-edit.role_info {dbqd.acs-workflow.www.admin.role-edit.role_info {    select role_key,
           role_name
      from wf_roles
     where workflow_key = :workflow_key
       and role_key = :role_key

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/role-edit.xql}
dbqd.acs-workflow.www.admin.role-manual.workflow_info {dbqd.acs-workflow.www.admin.role-manual.workflow_info {    select ot.pretty_name as workflow_name
    from   acs_object_types ot
    where  ot.object_type = :workflow_key

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/role-manual.xql}
dbqd.acs-workflow.www.admin.role-manual.role_info {dbqd.acs-workflow.www.admin.role-manual.role_info {    select role_name
      from wf_roles
     where workflow_key = :workflow_key
       and role_key = :role_key

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/role-manual.xql}
dbqd.acs-workflow.www.admin.role-manual.transitions {dbqd.acs-workflow.www.admin.role-manual.transitions {    select t.transition_key,
           t.transition_name
      from wf_transitions t
     where t.workflow_key = :workflow_key
       and not exists (select 1 
                         from wf_transition_role_assign_map m 
                        where m.workflow_key = t.workflow_key  
                          and m.transition_key = t.transition_key 
                          and m.assign_role_key = :role_key)
     order by t.sort_order

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/role-manual.xql}
dbqd.acs-workflow.www.admin.roles-assignment-table.roles {dbqd.acs-workflow.www.admin.roles-assignment-table.roles {    select r.sort_order, 
           r.role_key,
           r.role_name,
           '' as delete_url,
           '' as edit_url,
           '' as static_url,
           '' as manual_url,
           '' as programmatic_url,
           0 as is_static_p,
           cri.assignment_callback,
           cri.assignment_custom_arg,
           map.transition_key as assigning_transition_key,
           t.transition_name as assigning_transition_name
      from wf_roles r, wf_context_role_info cri, wf_transition_role_assign_map map, wf_transitions t
     where r.workflow_key = :workflow_key
       and cri.context_key (+) = :context_key
       and cri.workflow_key (+) = r.workflow_key
       and cri.role_key (+) = r.role_key
       and map.workflow_key (+) = r.workflow_key
       and map.assign_role_key (+) = r.role_key
       and t.workflow_key (+) = map.workflow_key
       and t.transition_key (+) = map.transition_key
     order by r.sort_order

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/admin/roles-assignment-table-oracle.xql}
dbqd.acs-workflow.www.admin.roles-assignment-table.roles {dbqd.acs-workflow.www.admin.roles-assignment-table.roles {    select r.sort_order, 
           r.role_key,
           r.role_name,
           '' as delete_url,
           '' as edit_url,
           '' as static_url,
           '' as manual_url,
           '' as programmatic_url,
           0 as is_static_p,
           cri.assignment_callback,
           cri.assignment_custom_arg,
           map.transition_key as assigning_transition_key,
           t.transition_name as assigning_transition_name
      from wf_roles r, wf_context_role_info cri, wf_transition_role_assign_map map, wf_transitions t
     where r.workflow_key = :workflow_key
       and cri.context_key (+) = :context_key
       and cri.workflow_key (+) = r.workflow_key
       and cri.role_key (+) = r.role_key
       and map.workflow_key (+) = r.workflow_key
       and map.assign_role_key (+) = r.role_key
       and t.workflow_key (+) = map.workflow_key
       and t.transition_key (+) = map.transition_key
     order by r.sort_order

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/admin/roles-assignment-table-oracle.xql}
dbqd.acs-workflow.www.admin.roles-table.roles {dbqd.acs-workflow.www.admin.roles-table.roles {    select r.sort_order, 
           r.role_key,
           r.role_name,
           '' as delete_url,
           '' as edit_url,
           '' as move_up_url,
           '' as move_down_url,
           0 as role_no,
           t.transition_key,
           t.transition_name,
           '' as transition_edit_url
      from wf_roles r, wf_transitions t
     where r.workflow_key = :workflow_key
       and t.workflow_key (+) = r.workflow_key
       and t.role_key (+) = r.role_key
     order by r.sort_order, t.sort_order

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/admin/roles-table-oracle.xql}
dbqd.acs-workflow.www.admin.roles-table.roles {dbqd.acs-workflow.www.admin.roles-table.roles {    select r.sort_order, 
           r.role_key,
           r.role_name,
           '' as delete_url,
           '' as edit_url,
           '' as move_up_url,
           '' as move_down_url,
           0 as role_no,
           t.transition_key,
           t.transition_name,
           '' as transition_edit_url
      from wf_roles r, wf_transitions t
     where r.workflow_key = :workflow_key
       and t.workflow_key (+) = r.workflow_key
       and t.role_key (+) = r.role_key
     order by r.sort_order, t.sort_order

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/admin/roles-table-oracle.xql}
dbqd.acs-workflow.www.admin.static-assignment-add.static_assignment_add {dbqd.acs-workflow.www.admin.static-assignment-add.static_assignment_add {    insert into wf_context_assignments
        (workflow_key, context_key, role_key, party_id)
    values
        (:workflow_key, :context_key, :role_key, :party_id)

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/static-assignment-add.xql}
dbqd.acs-workflow.www.admin.static-assignment-delete.static_assignment_delete {dbqd.acs-workflow.www.admin.static-assignment-delete.static_assignment_delete {    delete
    from   wf_context_assignments
    where  workflow_key = :workflow_key
    and    context_key = :context_key
    and    role_key = :role_key
    and    party_id = :party_id

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/static-assignment-delete.xql}
dbqd.acs-workflow.www.admin.static-assignments.tasks {dbqd.acs-workflow.www.admin.static-assignments.tasks {    select tr.transition_key, 
           tr.transition_name,
           p.party_id,
           acs_object.name(p.party_id) as party_name,
           p.email as party_email,
           '' as user_select_widget
    from   wf_transition_info tr,
           wf_context_assignments ca,
           parties p
    where  tr.workflow_key = :workflow_key
    and    tr.context_key = :context_key
    and    tr.trigger_type = 'user'
    and    tr.assignment_callback is null
    and    ca.context_key (+) = tr.context_key
    and    ca.transition_key (+) = tr.transition_key
    and    p.party_id (+) = ca.party_id
    and    not exists 
               (select 1 
                from   wf_transition_assignment_map 
                where  workflow_key = tr.workflow_key
                and    assign_transition_key = tr.transition_key)
    order by tr.sort_order, tr.transition_key

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/admin/static-assignments-oracle.xql}
dbqd.acs-workflow.www.admin.static-assignments.parties {dbqd.acs-workflow.www.admin.static-assignments.parties {            select p.party_id as sel_party_id,
                   acs_object.name(p.party_id) as sel_name,
                   p.email as sel_email
            from   parties p
            where  p.party_id not in 
                  (select ca.party_id 
                   from   wf_context_assignments ca
                   where  ca.workflow_key = :workflow_key 
                   and    ca.context_key = :context_key 
                   and    ca.transition_key = :transition_key)
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/admin/static-assignments-oracle.xql}
dbqd.acs-workflow.www.admin.static-assignments-table.roles {dbqd.acs-workflow.www.admin.static-assignments-table.roles {    select r.role_key, 
           r.role_name,
           p.party_id,
           acs_object.name(p.party_id) as party_name,
           p.email as party_email,
           '' as user_select_widget,
           '' as add_export_vars,
           '' as remove_url
    from   wf_roles r,
           wf_context_assignments ca,
           parties p
    where  r.workflow_key = :workflow_key
    and    ca.context_key (+) = :context_key
    and    ca.role_key (+) = r.role_key
    and    p.party_id (+) = ca.party_id
    order by r.sort_order, r.role_key

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/admin/static-assignments-table-oracle.xql}
dbqd.acs-workflow.www.admin.static-assignments-table.parties {dbqd.acs-workflow.www.admin.static-assignments-table.parties {            select p.party_id as sel_party_id,
                   acs_object.name(p.party_id) as sel_name,
                   p.email as sel_email
            from   parties p
            where  p.party_id not in 
                  (select ca.party_id 
                   from   wf_context_assignments ca
                   where  ca.workflow_key = :workflow_key 
                   and    ca.context_key = :context_key 
                   and    ca.role_key = :role_key)
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/admin/static-assignments-table-oracle.xql}
dbqd.acs-workflow.www.admin.static-assignments.workflow_exists {dbqd.acs-workflow.www.admin.static-assignments.workflow_exists {	select 1 from wf_workflows 
	where workflow_key = :workflow_key
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/static-assignments.xql}
dbqd.acs-workflow.www.admin.static-assignments.workflow_name {dbqd.acs-workflow.www.admin.static-assignments.workflow_name {    select pretty_name as workflow_name
    from   acs_object_types
    where  object_type = :workflow_key

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/static-assignments.xql}
dbqd.acs-workflow.www.admin.static-assignments.context_slider {dbqd.acs-workflow.www.admin.static-assignments.context_slider {    select context_key as context_key_from_db,
           context_name as title,
           '' as url,
           0 as selected_p
    from   wf_contexts
    order by context_name

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/static-assignments.xql}
dbqd.acs-workflow.www.admin.task-actions-2.num_rows {dbqd.acs-workflow.www.admin.task-actions-2.num_rows {      select count(*) from wf_context_transition_info where workflow_key = :workflow_key and transition_key = :transition_key and context_key = :context_key
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/task-actions-2.xql}
dbqd.acs-workflow.www.admin.task-actions-2.insert_actions {dbqd.acs-workflow.www.admin.task-actions-2.insert_actions {        insert into wf_context_transition_info
        (workflow_key, 
         transition_key, 
         context_key, 
         enable_callback,
         enable_custom_arg,
         fire_callback,
         fire_custom_arg,
         time_callback,
         time_custom_arg,
         deadline_callback,
         deadline_custom_arg,
         deadline_attribute_name,
         hold_timeout_callback,
         hold_timeout_custom_arg,
         notification_callback,
         notification_custom_arg,
         unassigned_callback,
         unassigned_custom_arg)
        values 
        (:workflow_key, 
         :transition_key, 
         :context_key, 
         :enable_callback,
         :enable_custom_arg,
         :fire_callback,
         :fire_custom_arg,
         :time_callback,
         :time_custom_arg,
         :deadline_callback,
         :deadline_custom_arg,
         :deadline_attribute_name,
         :hold_timeout_callback,
         :hold_timeout_custom_arg,
         :notification_callback,
         :notification_custom_arg,
         :unassigned_callback,
         :unassigned_custom_arg)
    
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/task-actions-2.xql}
dbqd.acs-workflow.www.admin.task-actions-2.update_actions {dbqd.acs-workflow.www.admin.task-actions-2.update_actions {        update wf_context_transition_info set 
        enable_callback = :enable_callback,
        enable_custom_arg = :enable_custom_arg,
        fire_callback = :fire_callback,
        fire_custom_arg = :fire_custom_arg,
        time_callback = :time_callback,
        time_custom_arg = :time_custom_arg,
        deadline_callback = :deadline_callback,
        deadline_custom_arg = :deadline_custom_arg,
        deadline_attribute_name = :deadline_attribute_name,
        hold_timeout_callback = :hold_timeout_callback,
        hold_timeout_custom_arg = :hold_timeout_custom_arg,
        notification_callback = :notification_callback,
        notification_custom_arg = :notification_custom_arg,
        unassigned_callback = :unassigned_callback,
        unassigned_custom_arg = :unassigned_custom_arg
        where workflow_key = :workflow_key and transition_key = :transition_key and context_key = :context_key
    
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/task-actions-2.xql}
dbqd.acs-workflow.www.admin.task-actions.workflow_exists {dbqd.acs-workflow.www.admin.task-actions.workflow_exists {	select 1 from wf_workflows 
	where workflow_key = :workflow_key
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/task-actions.xql}
dbqd.acs-workflow.www.admin.task-actions.workflow_and_transition_name {dbqd.acs-workflow.www.admin.task-actions.workflow_and_transition_name {    select ot.pretty_name as workflow_name,
           t.transition_name
    from   acs_object_types ot,
           wf_transitions t
    where  ot.object_type = :workflow_key
    and    t.workflow_key = ot.object_type
    and    t.transition_key = :transition_key

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/task-actions.xql}
dbqd.acs-workflow.www.admin.task-add-2.num_transitions {dbqd.acs-workflow.www.admin.task-add-2.num_transitions {	    select count(*) 
	    from   wf_transitions
	    where  workflow_key = :workflow_key
	    and    transition_name = :transition_name
	
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/task-add-2.xql}
dbqd.acs-workflow.www.admin.task-add.workflow_info {dbqd.acs-workflow.www.admin.task-add.workflow_info {    select ot.pretty_name as workflow_name
    from   acs_object_types ot
    where  ot.object_type = :workflow_key

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/task-add.xql}
dbqd.acs-workflow.www.admin.task-add.roles {dbqd.acs-workflow.www.admin.task-add.roles {    select r.role_key, 
           r.role_name 
      from wf_roles r
     where r.workflow_key = :workflow_key
     order by r.sort_order

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/task-add.xql}
dbqd.acs-workflow.www.admin.task-assignment-add.num_rows {dbqd.acs-workflow.www.admin.task-assignment-add.num_rows {	select count(*) as num_rows 
	  from wf_transition_role_assign_map 
         where workflow_key = :workflow_key
	   and transition_key = :transition_key
	   and assign_role_key = :role_key
    
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/task-assignment-add.xql}
dbqd.acs-workflow.www.admin.task-assignment-add.make_manual {dbqd.acs-workflow.www.admin.task-assignment-add.make_manual {	    insert into wf_transition_role_assign_map (workflow_key, transition_key, assign_role_key)
	    values (:workflow_key, :transition_key, :role_key)
	
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/task-assignment-add.xql}
dbqd.acs-workflow.www.admin.task-assignment-delete.assignment_delete {dbqd.acs-workflow.www.admin.task-assignment-delete.assignment_delete {	delete from wf_transition_role_assign_map
	 where workflow_key = :workflow_key
  	   and transition_key = :transition_key
	   and assign_role_key = :role_key
    
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/task-assignment-delete.xql}
dbqd.acs-workflow.www.admin.task-assignment.workflow_exists {dbqd.acs-workflow.www.admin.task-assignment.workflow_exists {	select 1 from wf_workflows 
	where workflow_key = :workflow_key
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/task-assignment.xql}
dbqd.acs-workflow.www.admin.task-assignment.workflow_and_transition_name {dbqd.acs-workflow.www.admin.task-assignment.workflow_and_transition_name {    select ot.pretty_name as workflow_name,
           t.transition_name
    from   acs_object_types ot,
           wf_transitions t
    where  ot.object_type = :workflow_key
    and    t.workflow_key = ot.object_type
    and    t.transition_key = :transition_key

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/task-assignment.xql}
dbqd.acs-workflow.www.admin.task-assignment.assigned_by_this {dbqd.acs-workflow.www.admin.task-assignment.assigned_by_this {    select r.role_name,
           r.role_key,
           '' as delete_url
    from   wf_transition_role_assign_map m, 
           wf_roles r
    where  m.workflow_key = :workflow_key
    and    m.transition_key = :transition_key
    and    r.workflow_key = m.workflow_key
    and    r.role_key = m.assign_role_key

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/task-assignment.xql}
dbqd.acs-workflow.www.admin.task-assignment.to_be_assigned_by_this {dbqd.acs-workflow.www.admin.task-assignment.to_be_assigned_by_this {    select r.role_name,
           r.role_key
    from   wf_roles r
    where  r.workflow_key = :workflow_key
    and    r.role_key != (select role_key from wf_transitions t where workflow_key = :workflow_key and transition_key = :transition_key)
    and    not exists (select 1 from wf_transition_role_assign_map m
                       where  m.workflow_key = :workflow_key
                       and    m.transition_key = :transition_key
                       and    m.assign_role_key = r.role_key)

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/task-assignment.xql}
dbqd.acs-workflow.www.admin.task-attribute-add.transition_attribute_add {dbqd.acs-workflow.www.admin.task-attribute-add.transition_attribute_add {    insert into wf_transition_attribute_map (workflow_key, transition_key, sort_order, attribute_id)
    select :workflow_key, :transition_key, nvl(max(sort_order)+1,1), :attribute_id
    from wf_transition_attribute_map
    where workflow_key = :workflow_key
    and   transition_key = :transition_key

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/admin/task-attribute-add-oracle.xql}
dbqd.acs-workflow.www.admin.task-attribute-add.transition_attribute_add {dbqd.acs-workflow.www.admin.task-attribute-add.transition_attribute_add {    insert into wf_transition_attribute_map (workflow_key, transition_key, sort_order, attribute_id)
    select :workflow_key, :transition_key, nvl(max(sort_order)+1,1), :attribute_id
    from wf_transition_attribute_map
    where workflow_key = :workflow_key
    and   transition_key = :transition_key

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/admin/task-attribute-add-oracle.xql}
dbqd.acs-workflow.www.admin.task-attribute-delete.panel_delete {dbqd.acs-workflow.www.admin.task-attribute-delete.panel_delete {    delete from wf_transition_attribute_map
    where  workflow_key = :workflow_key
    and    transition_key = :transition_key
    and    attribute_id = :attribute_id

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/task-attribute-delete.xql}
dbqd.acs-workflow.www.admin.task-attribute-move-up.attribute_move_up {dbqd.acs-workflow.www.admin.task-attribute-move-up.attribute_move_up {	update wf_transition_attribute_map
	set    sort_order = case when sort_order = :sort_order then :prior_sort_order when sort_order = :prior_sort_order then :sort_order end
	where  workflow_key = :workflow_key
	and    transition_key = :transition_key
	and    sort_order in (:sort_order, :prior_sort_order)
    
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/task-attribute-move-up.xql}
dbqd.acs-workflow.www.admin.task-attributes.workflow_exists {dbqd.acs-workflow.www.admin.task-attributes.workflow_exists {	select 1 from wf_workflows 
	where workflow_key = :workflow_key
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/task-attributes.xql}
dbqd.acs-workflow.www.admin.task-attributes.workflow_and_transition_name {dbqd.acs-workflow.www.admin.task-attributes.workflow_and_transition_name {    select ot.pretty_name as workflow_name,
           t.transition_name
    from   acs_object_types ot,
           wf_transitions t
    where  ot.object_type = :workflow_key
    and    t.workflow_key = ot.object_type
    and    t.transition_key = :transition_key

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/task-attributes.xql}
dbqd.acs-workflow.www.admin.task-attributes.attributes {dbqd.acs-workflow.www.admin.task-attributes.attributes {    select ta.sort_order,
           a.attribute_id,
           a.attribute_name,
           a.pretty_name,
           a.datatype,
           '' as delete_url,
           '' as move_up_url
    from   wf_transition_attribute_map ta,
           acs_attributes a
    where  ta.workflow_key = :workflow_key
    and    ta.transition_key = :transition_key
    and    a.attribute_id = ta.attribute_id
    order by sort_order

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/task-attributes.xql}
dbqd.acs-workflow.www.admin.task-attributes.attributes_not_set {dbqd.acs-workflow.www.admin.task-attributes.attributes_not_set {    select a.attribute_id,
           a.sort_order,
           a.attribute_name,
           a.pretty_name,
           a.datatype
    from   acs_attributes a
    where  a.object_type = :workflow_key
    and not exists (select 1 from wf_transition_attribute_map m
                    where  m.workflow_key = :workflow_key
                    and    m.transition_key = :transition_key
                    and    m.attribute_id = a.attribute_id)
    order by sort_order

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/task-attributes.xql}
dbqd.acs-workflow.www.admin.task-delete.arcs_delete {dbqd.acs-workflow.www.admin.task-delete.arcs_delete {	delete from wf_arcs
	where  workflow_key = :workflow_key
	and    transition_key = :transition_key
    
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/task-delete.xql}
dbqd.acs-workflow.www.admin.task-delete.transition_attribute_map_delete {dbqd.acs-workflow.www.admin.task-delete.transition_attribute_map_delete {	delete from wf_transition_attribute_map
	where  workflow_key = :workflow_key
	and    transition_key = :transition_key
    
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/task-delete.xql}
dbqd.acs-workflow.www.admin.task-delete.transition_assignment_map_delete {dbqd.acs-workflow.www.admin.task-delete.transition_assignment_map_delete {	delete from wf_transition_assignment_map
	where  workflow_key = :workflow_key
	and    transition_key = :transition_key
    
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/task-delete.xql}
dbqd.acs-workflow.www.admin.task-delete.wf_context_assignments_delete {dbqd.acs-workflow.www.admin.task-delete.wf_context_assignments_delete {	delete from wf_context_assignments
	where  workflow_key = :workflow_key
	and    transition_key = :transition_key
    
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/task-delete.xql}
dbqd.acs-workflow.www.admin.task-delete.wf_context_transition_info_delete {dbqd.acs-workflow.www.admin.task-delete.wf_context_transition_info_delete {	delete from wf_context_transition_info
	where  workflow_key = :workflow_key
	and    transition_key = :transition_key
    
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/task-delete.xql}
dbqd.acs-workflow.www.admin.task-delete.transition_delete {dbqd.acs-workflow.www.admin.task-delete.transition_delete {	delete from wf_transitions
	where  workflow_key = :workflow_key
	and    transition_key = :transition_key
    
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/task-delete.xql}
dbqd.acs-workflow.www.admin.task-edit-2.transition_update {dbqd.acs-workflow.www.admin.task-edit-2.transition_update {	    update wf_transitions
	    set    transition_name = :transition_name,
		   trigger_type = :trigger_type,
		   role_key = :role_key
	    where  workflow_key = :workflow_key
	    and    transition_key = :transition_key
	
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/task-edit-2.xql}
dbqd.acs-workflow.www.admin.task-edit-2.transition_update {dbqd.acs-workflow.www.admin.task-edit-2.transition_update {	    update wf_transitions
	    set    transition_name = :transition_name,
		   trigger_type = :trigger_type,
		   role_key = :role_key
	    where  workflow_key = :workflow_key
	    and    transition_key = :transition_key
	
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/task-edit-2.xql}
dbqd.acs-workflow.www.admin.task-edit-2.num_rows {dbqd.acs-workflow.www.admin.task-edit-2.num_rows {      select count(*) from wf_context_transition_info where workflow_key = :workflow_key and transition_key = :transition_key and context_key = 'default'
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/task-edit-2.xql}
dbqd.acs-workflow.www.admin.task-edit-2.insert_estimated_minmutes {dbqd.acs-workflow.www.admin.task-edit-2.insert_estimated_minmutes {		insert into wf_context_transition_info
		(workflow_key, transition_key, context_key, estimated_minutes, instructions)
		values (:workflow_key, :transition_key, 'default', :estimated_minutes, :instructions)
	    
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/task-edit-2.xql}
dbqd.acs-workflow.www.admin.task-edit-2.update_estimated_minutes {dbqd.acs-workflow.www.admin.task-edit-2.update_estimated_minutes {		update wf_context_transition_info 
		   set estimated_minutes = :estimated_minutes,
		       instructions = :instructions
		 where workflow_key = :workflow_key  
		   and transition_key = :transition_key 
		   and context_key = 'default'
	    
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/task-edit-2.xql}
dbqd.acs-workflow.www.admin.task-edit.workflow_info {dbqd.acs-workflow.www.admin.task-edit.workflow_info {    select pretty_name as workflow_name
      from acs_object_types
     where object_type = :workflow_key

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/task-edit.xql}
dbqd.acs-workflow.www.admin.task-edit.transition_info {dbqd.acs-workflow.www.admin.task-edit.transition_info {    select transition_name,
           trigger_type,
           role_key as selected_role_key
    from   wf_transitions
    where  transition_key = :transition_key
    and    workflow_key = :workflow_key

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/task-edit.xql}
dbqd.acs-workflow.www.admin.task-edit.roles {dbqd.acs-workflow.www.admin.task-edit.roles {    select r.role_key, 
           r.role_name,
           case when role_key = :selected_role_key then 'SELECTED' else '' end as selected_string 
      from wf_roles r
     where r.workflow_key = :workflow_key
     order by r.sort_order

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/task-edit.xql}
dbqd.acs-workflow.www.admin.task-edit.transition_context_info {dbqd.acs-workflow.www.admin.task-edit.transition_context_info {    select estimated_minutes, instructions 
      from wf_context_transition_info 
     where workflow_key = :workflow_key 
       and transition_key = :transition_key 
       and context_key = :context_key

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/task-edit.xql}
dbqd.acs-workflow.www.admin.task-panel-add-2.panel_add {dbqd.acs-workflow.www.admin.task-panel-add-2.panel_add {	insert into wf_context_task_panels
	    (workflow_key, transition_key, context_key, sort_order, header, template_url)
	select :workflow_key, :transition_key, :context_key, nvl(max(sort_order)+1,1), :header, :template_url
	from   wf_context_task_panels
	where  workflow_key = :workflow_key
	and    transition_key = :transition_key
	and    context_key = :context_key
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/admin/task-panel-add-2-oracle.xql}
dbqd.acs-workflow.www.admin.task-panel-add-2.panel_add {dbqd.acs-workflow.www.admin.task-panel-add-2.panel_add {	insert into wf_context_task_panels
	    (workflow_key, transition_key, context_key, sort_order, header, template_url)
	select :workflow_key, :transition_key, :context_key, nvl(max(sort_order)+1,1), :header, :template_url
	from   wf_context_task_panels
	where  workflow_key = :workflow_key
	and    transition_key = :transition_key
	and    context_key = :context_key
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/admin/task-panel-add-2-oracle.xql}
dbqd.acs-workflow.www.admin.task-panel-add.workflow_and_transition_name {dbqd.acs-workflow.www.admin.task-panel-add.workflow_and_transition_name {    select ot.pretty_name as workflow_name,
           t.transition_name
    from   acs_object_types ot,
           wf_transitions t
    where  ot.object_type = :workflow_key
    and    t.workflow_key = ot.object_type
    and    t.transition_key = :transition_key

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/task-panel-add.xql}
dbqd.acs-workflow.www.admin.task-panel-delete.panel_delete {dbqd.acs-workflow.www.admin.task-panel-delete.panel_delete {    delete from wf_context_task_panels
    where  workflow_key = :workflow_key
    and    transition_key = :transition_key
    and    context_key = :context_key
    and    sort_order = :sort_order

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/task-panel-delete.xql}
dbqd.acs-workflow.www.admin.task-panel-edit-2.panel_update {dbqd.acs-workflow.www.admin.task-panel-edit-2.panel_update {	update wf_context_task_panels
	set    header = :header,
	       template_url = :template_url,
               overrides_action_p = :overrides_action_p,
	       only_display_when_started_p = :only_display_when_started_p
	where  workflow_key = :workflow_key
	and    transition_key = :transition_key
	and    context_key = :context_key
	and    sort_order = :sort_order
    
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/task-panel-edit-2.xql}
dbqd.acs-workflow.www.admin.task-panel-edit.workflow_and_transition_name {dbqd.acs-workflow.www.admin.task-panel-edit.workflow_and_transition_name {    select ot.pretty_name as workflow_name,
           t.transition_name
    from   acs_object_types ot,
           wf_transitions t
    where  ot.object_type = :workflow_key
    and    t.workflow_key = ot.object_type
    and    t.transition_key = :transition_key

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/task-panel-edit.xql}
dbqd.acs-workflow.www.admin.task-panel-edit.panel {dbqd.acs-workflow.www.admin.task-panel-edit.panel {    select p.header,
           p.template_url,
           p.overrides_action_p,
           p.only_display_when_started_p
    from   wf_context_task_panels p
    where  p.workflow_key = :workflow_key
    and    p.transition_key = :transition_key
    and    p.context_key = :context_key
    and    p.sort_order = :sort_order

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/task-panel-edit.xql}
dbqd.acs-workflow.www.admin.task-panel-move-up.prior_sort_key {dbqd.acs-workflow.www.admin.task-panel-move-up.prior_sort_key {	select max(sort_key) 
	from   wf_context_task_panels
	where  workflow_key = :workflow_key
	and    transition_key = :transition_key
	and    context_key = :context_key
	and    sort_key < :sort_key
    
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/task-panel-move-up.xql}
dbqd.acs-workflow.www.admin.task-panel-move-up.panel_move_up {dbqd.acs-workflow.www.admin.task-panel-move-up.panel_move_up {	update wf_context_task_panels
	set    sort_key = case when sort_key = :sort_key then :prior_sort_key when sort_key = :prior_sort_key then :sort_key end
	where  workflow_key = :workflow_key
	and    transition_key = :transition_key
	and    context_key = :context_key
	and    sort_key in (:sort_key, :prior_sort_key)
    
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/task-panel-move-up.xql}
dbqd.acs-workflow.www.admin.task-panels.workflow_exists {dbqd.acs-workflow.www.admin.task-panels.workflow_exists {	select 1 from wf_workflows 
	where workflow_key = :workflow_key
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/task-panels.xql}
dbqd.acs-workflow.www.admin.task-panels.workflow_and_transition_name {dbqd.acs-workflow.www.admin.task-panels.workflow_and_transition_name {    select ot.pretty_name as workflow_name,
           t.transition_name
    from   acs_object_types ot,
           wf_transitions t
    where  ot.object_type = :workflow_key
    and    t.workflow_key = ot.object_type
    and    t.transition_key = :transition_key

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/task-panels.xql}
dbqd.acs-workflow.www.admin.task-panels.context_slider {dbqd.acs-workflow.www.admin.task-panels.context_slider {    select context_key as context_key_from_db,
           context_name as title,
           '' as url,
           0 as selected_p
    from   wf_contexts
    order by context_name

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/task-panels.xql}
dbqd.acs-workflow.www.admin.task-panels.panels {dbqd.acs-workflow.www.admin.task-panels.panels {    select tp.sort_order,
           tp.header, 
           tp.template_url,
           '' as edit_url,
           '' as delete_url,
           '' as move_up_url
    from   wf_context_task_panels tp
    where  tp.context_key = :context_key
    and    tp.workflow_key = :workflow_key
    and    tp.transition_key = :transition_key
    order by sort_order

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/task-panels.xql}
dbqd.acs-workflow.www.admin.transition-panels-table.panels {dbqd.acs-workflow.www.admin.transition-panels-table.panels {    select t.transition_key,
           t.transition_name,
           '' as transition_edit_url,
           '' as panel_add_url,
           pan.sort_order,
           0 as panel_no,
           pan.header,
           pan.template_url,
           pan.template_url as template_url_pretty,
           pan.overrides_action_p,
           pan.only_display_when_started_p,
           0 as rowspan,
           '' as panel_edit_url,
           '' as panel_delete_url
      from wf_transitions t, wf_context_task_panels pan
     where t.workflow_key = :workflow_key
       and pan.workflow_key (+) = t.workflow_key
       and pan.context_key (+) = :context_key
       and pan.transition_key (+) = t.transition_key
     order by t.sort_order, pan.sort_order

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/admin/transition-panels-table-oracle.xql}
dbqd.acs-workflow.www.admin.transition-panels-table.panels {dbqd.acs-workflow.www.admin.transition-panels-table.panels {    select t.transition_key,
           t.transition_name,
           '' as transition_edit_url,
           '' as panel_add_url,
           pan.sort_order,
           0 as panel_no,
           pan.header,
           pan.template_url,
           pan.template_url as template_url_pretty,
           pan.overrides_action_p,
           pan.only_display_when_started_p,
           0 as rowspan,
           '' as panel_edit_url,
           '' as panel_delete_url
      from wf_transitions t, wf_context_task_panels pan
     where t.workflow_key = :workflow_key
       and pan.workflow_key (+) = t.workflow_key
       and pan.context_key (+) = :context_key
       and pan.transition_key (+) = t.transition_key
     order by t.sort_order, pan.sort_order

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/admin/transition-panels-table-oracle.xql}
dbqd.acs-workflow.www.admin.transitions-table.transtitions {dbqd.acs-workflow.www.admin.transitions-table.transtitions {    select t.sort_order, 
           t.transition_key,
           t.transition_name,
           t.trigger_type,
           '' as trigger_type_pretty,
           t.role_key,
           r.role_name,
           '' as delete_url,
           '' as edit_url,
           '' as role_edit_url
      from wf_transitions t, wf_roles r
     where t.workflow_key = :workflow_key
       and r.workflow_key (+) = t.workflow_key
       and r.role_key (+) = t.role_key
     order by t.sort_order

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/admin/transitions-table-oracle.xql}
dbqd.acs-workflow.www.admin.transitions-table.transtitions {dbqd.acs-workflow.www.admin.transitions-table.transtitions {    select t.sort_order, 
           t.transition_key,
           t.transition_name,
           t.trigger_type,
           '' as trigger_type_pretty,
           t.role_key,
           r.role_name,
           '' as delete_url,
           '' as edit_url,
           '' as role_edit_url
      from wf_transitions t, wf_roles r
     where t.workflow_key = :workflow_key
       and r.workflow_key (+) = t.workflow_key
       and r.role_key (+) = t.role_key
     order by t.sort_order

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/admin/transitions-table-oracle.xql}
dbqd.acs-workflow.www.admin.unassigned-tasks.unassigned_tasks {dbqd.acs-workflow.www.admin.unassigned-tasks.unassigned_tasks {    select ta.task_id,
           ta.case_id,
           ta.workflow_key,
           ta.transition_key,
           tr.transition_name,
           ta.enabled_date,
           to_char(ta.enabled_date, :date_format) as enabled_date_pretty,
           ta.state,
           ta.deadline,
           to_char(ta.deadline, :date_format) as deadline_pretty,
           ta.estimated_minutes,
           c.object_id,
           acs_object.name(c.object_id) as object_name,
           o.object_type
    from   wf_tasks ta, wf_transitions tr, wf_cases c, acs_objects o
    where  ta.workflow_key = :workflow_key
    and    tr.workflow_key = ta.workflow_key
    and    tr.transition_key = ta.transition_key
    and    c.case_id = ta.case_id
    and    o.object_id = c.object_id
    and    ta.state = 'enabled'
    and    not exists (select 1 from wf_task_assignments tasgn where tasgn.task_id = ta.task_id)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/admin/unassigned-tasks-oracle.xql}
dbqd.acs-workflow.www.admin.unassigned-tasks.workflow_info {dbqd.acs-workflow.www.admin.unassigned-tasks.workflow_info {    select  ot.pretty_name
    from    wf_workflows wf, acs_object_types ot
    where   wf.workflow_key = :workflow_key
    and     ot.object_type = wf.workflow_key

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/unassigned-tasks.xql}
dbqd.acs-workflow.www.admin.wizard.create.create_workflow {dbqd.acs-workflow.www.admin.wizard.create.create_workflow {    declare
        v_workflow_key varchar(40);
    begin
        v_workflow_key := workflow.create_workflow(
            workflow_key => '[db_quote $workflow_key]',
            pretty_name => '[db_quote $workflow_name]', 
            pretty_plural => '[db_quote $workflow_name]', 
     	    description => '[db_quote $workflow_description]',
  	    table_name => '[db_quote $workflow_cases_table]'
        );
    end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/admin/wizard/create-oracle.xql}
dbqd.acs-workflow.www.admin.wizard.create.define_attribute {dbqd.acs-workflow.www.admin.wizard.create.define_attribute {	    declare
	        v_attribute_id acs_attributes.attribute_id%TYPE;
	    begin
	        v_attribute_id := workflow.create_attribute(
	            workflow_key => '[db_quote $workflow_key]',
	            attribute_name => '[db_quote $task($transition_key,loop_attribute_name)]',
	            datatype => 'boolean',
	            pretty_name => '[db_quote "$task($transition_key,loop_question)"]',
      	            default_value => '[ad_decode $task($transition_key,loop_answer) "t" "f" "t"]'
	        );
	    
	    end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/admin/wizard/create-oracle.xql}
dbqd.acs-workflow.www.admin.wizard.create.object_pretty_names {dbqd.acs-workflow.www.admin.wizard.create.object_pretty_names {      select pretty_name from acs_object_types
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/wizard/create.xql}
dbqd.acs-workflow.www.admin.wizard.create.object_types {dbqd.acs-workflow.www.admin.wizard.create.object_types {      select object_type from acs_object_types
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/wizard/create.xql}
dbqd.acs-workflow.www.admin.wizard.create.constraints {dbqd.acs-workflow.www.admin.wizard.create.constraints {      select constraint_name from user_constraints
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/wizard/create.xql}
dbqd.acs-workflow.www.admin.wizard.create.create_cases_table {dbqd.acs-workflow.www.admin.wizard.create.create_cases_table {create table $workflow_cases_table (
  case_id             integer primary key
                      constraint $workflow_cases_constraint
                      references wf_cases on delete cascade
)
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/wizard/create.xql}
dbqd.acs-workflow.www.admin.wizard.create.drop_cases_table {dbqd.acs-workflow.www.admin.wizard.create.drop_cases_table {      drop table $workflow_cases_table
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/wizard/create.xql}
dbqd.acs-workflow.www.admin.workflow-add-2.create_workflow {dbqd.acs-workflow.www.admin.workflow-add-2.create_workflow {    declare
        v_workflow_key varchar(40);
    begin
        v_workflow_key := workflow.create_workflow(
            workflow_key => :workflow_key,
            pretty_name => :workflow_name, 
            pretty_plural => :workflow_name, 
     	    description => :description,
  	    table_name => :workflow_cases_table
        );
    end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/admin/workflow-add-2-oracle.xql}
dbqd.acs-workflow.www.admin.workflow-add-2.num_object_types {dbqd.acs-workflow.www.admin.workflow-add-2.num_object_types {	    select case when count(*) = 0 then 0 else 1 end from acs_object_types where pretty_name = :workflow_name 
	
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/workflow-add-2.xql}
dbqd.acs-workflow.www.admin.workflow-add-2.object_types {dbqd.acs-workflow.www.admin.workflow-add-2.object_types {      select object_type from acs_object_types
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/workflow-add-2.xql}
dbqd.acs-workflow.www.admin.workflow-add-2.constraints {dbqd.acs-workflow.www.admin.workflow-add-2.constraints {      select constraint_name from user_constraints
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/workflow-add-2.xql}
dbqd.acs-workflow.www.admin.workflow-add-2.create_cases_table {dbqd.acs-workflow.www.admin.workflow-add-2.create_cases_table {    create table $workflow_cases_table (
    case_id             integer primary key
                        constraint $workflow_cases_constraint
                        references wf_cases
    )
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/workflow-add-2.xql}
dbqd.acs-workflow.www.admin.workflow-add-2.start_place {dbqd.acs-workflow.www.admin.workflow-add-2.start_place {        insert into wf_places (place_key, workflow_key, place_name, sort_order)
        values ('start', :workflow_key, 'Start place', 1)
    
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/workflow-add-2.xql}
dbqd.acs-workflow.www.admin.workflow-add-2.end_place {dbqd.acs-workflow.www.admin.workflow-add-2.end_place {        insert into wf_places (place_key, workflow_key, place_name, sort_order)
        values ('end', :workflow_key, 'End place', 999)
    
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/workflow-add-2.xql}
dbqd.acs-workflow.www.admin.workflow-add-2.drop_cases_table {dbqd.acs-workflow.www.admin.workflow-add-2.drop_cases_table {      drop table $workflow_cases_table
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/workflow-add-2.xql}
dbqd.acs-workflow.www.admin.workflow-cases-delete.delete_cases {dbqd.acs-workflow.www.admin.workflow-cases-delete.delete_cases {    begin 
        workflow.delete_cases(workflow_key => :workflow_key);
    end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/admin/workflow-cases-delete-oracle.xql}
dbqd.acs-workflow.www.admin.workflow-cases-delete.workflow_exists {dbqd.acs-workflow.www.admin.workflow-cases-delete.workflow_exists {	select 1 from wf_workflows 
	where workflow_key = :workflow_key
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/workflow-cases-delete.xql}
dbqd.acs-workflow.www.admin.workflow-copy-2.package_id {dbqd.acs-workflow.www.admin.workflow-copy-2.package_id {      select package_id from apm_packages where package_key='acs-workflow' and rownum=1
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/admin/workflow-copy-2-oracle.xql}
dbqd.acs-workflow.www.admin.workflow-copy-2.object_types {dbqd.acs-workflow.www.admin.workflow-copy-2.object_types {      select object_type from acs_object_types
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/workflow-copy-2.xql}
dbqd.acs-workflow.www.admin.workflow-copy-2.pretty_names {dbqd.acs-workflow.www.admin.workflow-copy-2.pretty_names {      select pretty_name from acs_object_types
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/workflow-copy-2.xql}
dbqd.acs-workflow.www.admin.workflow-copy-2.pretty_names {dbqd.acs-workflow.www.admin.workflow-copy-2.pretty_names {      select pretty_name from acs_object_types
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/workflow-copy-2.xql}
dbqd.acs-workflow.www.admin.workflow-copy-2.workflow_info {dbqd.acs-workflow.www.admin.workflow-copy-2.workflow_info {    select ot.pretty_name as workflow_name
    from   acs_object_types ot
    where  ot.object_type = :workflow_key

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/workflow-copy-2.xql}
dbqd.acs-workflow.www.admin.workflow-copy.workflow_info {dbqd.acs-workflow.www.admin.workflow-copy.workflow_info {    select ot.pretty_name as workflow_name
    from   acs_object_types ot
    where  ot.object_type = :workflow_key

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/workflow-copy.xql}
dbqd.acs-workflow.www.admin.workflow-copy.pretty_names {dbqd.acs-workflow.www.admin.workflow-copy.pretty_names {    select pretty_name, pretty_plural
    from acs_object_types
    where object_type = :workflow_key

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/workflow-copy.xql}
dbqd.acs-workflow.www.admin.workflow-copy.object_types {dbqd.acs-workflow.www.admin.workflow-copy.object_types {      select object_type from acs_object_types
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/workflow-copy.xql}
dbqd.acs-workflow.www.admin.workflow-copy.pretty_name {dbqd.acs-workflow.www.admin.workflow-copy.pretty_name {      select pretty_name from acs_object_types
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/workflow-copy.xql}
dbqd.acs-workflow.www.admin.workflow-copy.pretty_plural_names {dbqd.acs-workflow.www.admin.workflow-copy.pretty_plural_names {      select pretty_plural from acs_object_types
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/workflow-copy.xql}
dbqd.acs-workflow.www.admin.workflow-delete.delete_cases {dbqd.acs-workflow.www.admin.workflow-delete.delete_cases {	begin 
	    workflow.delete_cases(workflow_key => :workflow_key);
	end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/admin/workflow-delete-oracle.xql}
dbqd.acs-workflow.www.admin.workflow-delete.delete_workflow {dbqd.acs-workflow.www.admin.workflow-delete.delete_workflow {    begin
        workflow.drop_workflow(workflow_key => :workflow_key);
    end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/admin/workflow-delete-oracle.xql}
dbqd.acs-workflow.www.admin.workflow-delete.workflow_exists {dbqd.acs-workflow.www.admin.workflow-delete.workflow_exists {	select 1 from wf_workflows 
	where workflow_key = :workflow_key
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/workflow-delete.xql}
dbqd.acs-workflow.www.admin.workflow-delete.cases_table {dbqd.acs-workflow.www.admin.workflow-delete.cases_table {       select table_name from acs_object_types where object_type = :workflow_key 
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/workflow-delete.xql}
dbqd.acs-workflow.www.admin.workflow-delete.drop_cases_table {dbqd.acs-workflow.www.admin.workflow-delete.drop_cases_table {	drop table $cases_table
    
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/workflow-delete.xql}
dbqd.acs-workflow.www.admin.workflow.workflow {dbqd.acs-workflow.www.admin.workflow.workflow {    select w.workflow_key, 
           t.pretty_name,
           w.description,
           count(c.case_id) as num_cases,
           0 as num_unassigned_tasks
    from   wf_workflows w, 
           acs_object_types t, 
           wf_cases c
    where  w.workflow_key = :workflow_key 
    and    w.workflow_key = t.object_type
    and    c.workflow_key (+) = w.workflow_key
    group  by w.workflow_key, t.pretty_name, w.description

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/admin/workflow-oracle.xql}
dbqd.acs-workflow.www.admin.workflow-roles.workflow_exists {dbqd.acs-workflow.www.admin.workflow-roles.workflow_exists {	select count(*) from wf_workflows 
	where workflow_key = :workflow_key
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/workflow-roles.xql}
dbqd.acs-workflow.www.admin.workflow-roles.workflow {dbqd.acs-workflow.www.admin.workflow-roles.workflow {    select w.workflow_key, 
           t.pretty_name
    from   wf_workflows w, 
           acs_object_types t 
    where  w.workflow_key = :workflow_key 
    and    w.workflow_key = t.object_type

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/workflow-roles.xql}
dbqd.acs-workflow.www.admin.workflow-summary.workflow_exists {dbqd.acs-workflow.www.admin.workflow-summary.workflow_exists {	select 1 from wf_workflows 
	where workflow_key = :workflow_key
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/workflow-summary.xql}
dbqd.acs-workflow.www.admin.workflow-summary.workflow_name {dbqd.acs-workflow.www.admin.workflow-summary.workflow_name {    select pretty_name as workflow_name
    from   acs_object_types
    where  object_type = :workflow_key

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/workflow-summary.xql}
dbqd.acs-workflow.www.admin.workflow-summary.n_total {dbqd.acs-workflow.www.admin.workflow-summary.n_total {    select count(*) 
    from   wf_cases
    where  workflow_key = :workflow_key

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/workflow-summary.xql}
dbqd.acs-workflow.www.admin.workflow-summary.num_cases {dbqd.acs-workflow.www.admin.workflow-summary.num_cases {    select state, count(case_id) as num
    from   wf_cases
    where  workflow_key = :workflow_key
    group by state

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/workflow-summary.xql}
dbqd.acs-workflow.www.admin.workflow-summary.places {dbqd.acs-workflow.www.admin.workflow-summary.places {    select p.place_key, 
           p.place_name,
          (select count(*)
           from   wf_tokens t, wf_cases c
           where  t.workflow_key = p.workflow_key
           and    t.place_key    = p.place_key
           and    t.state in ('free')
           and    c.case_id = t.case_id
           and    c.state = 'active') as num_cases,
           0 as num_pixels,
           '' as cases_url
    from   wf_places p
    where  p.workflow_key = :workflow_key
    order by p.sort_order

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/workflow-summary.xql}
dbqd.acs-workflow.www.admin.workflow-summary.transitions {dbqd.acs-workflow.www.admin.workflow-summary.transitions {    select tr.transition_key, 
           tr.transition_name,
	   (select count(*) 
            from   wf_tasks ta, wf_cases c
	    where  ta.workflow_key = tr.workflow_key
	    and    ta.transition_key = tr.transition_key
	    and    ta.state in ('started')
            and    c.case_id = ta.case_id
            and    c.state = 'active') as num_cases,
           0 as num_pixels,
           '' as cases_url
    from   wf_transitions tr
    where  tr.workflow_key = :workflow_key
    order by tr.sort_order

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/workflow-summary.xql}
dbqd.acs-workflow.www.admin.workflow.workflow_exists {dbqd.acs-workflow.www.admin.workflow.workflow_exists {	select count(*) from wf_workflows 
	where workflow_key = :workflow_key
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/workflow.xql}
dbqd.acs-workflow.www.admin.workflow.workflow {dbqd.acs-workflow.www.admin.workflow.workflow {    select w.workflow_key, 
           t.pretty_name,
           w.description,
           count(c.case_id) as num_cases,
           0 as num_unassigned_tasks
    from   wf_workflows w, 
           acs_object_types t, 
           wf_cases c
    where  w.workflow_key = :workflow_key 
    and    w.workflow_key = t.object_type
    and    c.workflow_key (+) = w.workflow_key
    group  by w.workflow_key, t.pretty_name, w.description

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/admin/workflow-oracle.xql}
dbqd.acs-workflow.www.admin.workflow.num_unassigned_tasks {dbqd.acs-workflow.www.admin.workflow.num_unassigned_tasks {    select count(*) 
    from   wf_tasks t,
           wf_cases c
    where  t.workflow_key = :workflow_key
    and    t.state = 'enabled'
    and    c.case_id = t.case_id
    and    c.state = 'active'
    and    not exists (select 1 from wf_task_assignments ta where ta.task_id = t.task_id)

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/workflow.xql}
dbqd.acs-workflow.www.admin.workflow.num_active_cases {dbqd.acs-workflow.www.admin.workflow.num_active_cases {    select count(*) 
    from   wf_cases c
    where  c.workflow_key = :workflow_key
    and    c.state = 'active'

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/admin/workflow.xql}
dbqd.acs-workflow.www.assign-yourself.add_self_case {dbqd.acs-workflow.www.assign-yourself.add_self_case {    begin
        workflow_case.add_manual_assignment (
            case_id => :case_id,
            transition_key => :transition_key,
            party_id => :user_id
        );
    end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/assign-yourself-oracle.xql}
dbqd.acs-workflow.www.assign-yourself.add_self_task {dbqd.acs-workflow.www.assign-yourself.add_self_task {    begin
        workflow_case.add_task_assignment (
            task_id => :task_id,
            party_id => :user_id
        );
    end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/assign-yourself-oracle.xql}
dbqd.acs-workflow.www.assign-yourself.task_info {dbqd.acs-workflow.www.assign-yourself.task_info {    select t.case_id, 
           t.workflow_key, 
           t.transition_key, 
           c.object_id, 
           wcti.access_privilege
    from   wf_tasks t, wf_cases c, wf_context_transition_info wcti
    where  wcti.context_key = c.context_key
    and    wcti.workflow_key = t.workflow_key
    and    wcti.transition_key = t.transition_key
    and    c.case_id = t.case_id
    and    t.task_id = :task_id

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/assign-yourself.xql}
dbqd.acs-workflow.www.assign-yourself.move_assignees {dbqd.acs-workflow.www.assign-yourself.move_assignees {    insert into wf_case_assignments
    (case_id, transition_key, workflow_key, party_id)
    select :case_id, :transition_key, :workflow_key, ta.party_id
    from   wf_task_assignments ta
    where  task_id = :task_id
    and not exists (select 1 from wf_case_assignments ca
                    where ca.party_id = ta.party_id
                    and   ca.workflow_key = :workflow_key
                    and   ca.case_id = :case_id
                    and   ca.transition_key = :transition_key)

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/assign-yourself.xql}
dbqd.acs-workflow.www.assign-yourself.delete_self_case {dbqd.acs-workflow.www.assign-yourself.delete_self_case {    delete from wf_case_assignments
    where  workflow_key   = :workflow_key
    and    case_id        = :case_id
    and    transition_key = :transition_key
    and    party_id       = :user_id

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/assign-yourself.xql}
dbqd.acs-workflow.www.assign-yourself.delete_self_task {dbqd.acs-workflow.www.assign-yourself.delete_self_task {    delete from wf_task_assignments
    where  party_id = :user_id
    and    task_id  = :task_id

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/assign-yourself.xql}
dbqd.acs-workflow.www.assignee-add-2.add_assignee_task {dbqd.acs-workflow.www.assignee-add-2.add_assignee_task {            begin
                workflow_case.add_task_assignment (
                    task_id => :task_id,
                    party_id => :party_id
                );
            end;
        
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/assignee-add-2-oracle.xql}
dbqd.acs-workflow.www.assignee-add-2.add_assignee_case {dbqd.acs-workflow.www.assignee-add-2.add_assignee_case {            begin
                workflow_case.add_manual_assignment (
                    case_id => :case_id,
                    transition_key => :transition_key,
                    party_id => :party_id
                );
            end;
        
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/assignee-add-2-oracle.xql}
dbqd.acs-workflow.www.assignee-add-2.task_info {dbqd.acs-workflow.www.assignee-add-2.task_info {    select t.case_id, 
           t.workflow_key, 
           t.transition_key, 
           c.object_id, 
           wcti.access_privilege
    from   wf_tasks t, wf_cases c, wf_context_transition_info wcti
    where  wcti.context_key = c.context_key
    and    wcti.workflow_key = t.workflow_key
    and    wcti.transition_key = t.transition_key
    and    c.case_id = t.case_id
    and    t.task_id = :task_id

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/assignee-add-2.xql}
dbqd.acs-workflow.www.assignee-add-2.this_user_is_assigned_p {dbqd.acs-workflow.www.assignee-add-2.this_user_is_assigned_p {    select count(*) from wf_user_tasks  where task_id = :task_id and user_id = :user_id

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/assignee-add-2.xql}
dbqd.acs-workflow.www.assignee-add-2.already_assigned_task {dbqd.acs-workflow.www.assignee-add-2.already_assigned_task {    select count(*) from wf_task_assignments 
    where task_id = :task_id and party_id = :party_id
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/assignee-add-2.xql}
dbqd.acs-workflow.www.assignee-add-2.already_assigned_case {dbqd.acs-workflow.www.assignee-add-2.already_assigned_case {    select count(*) from wf_case_assignments
    where  workflow_key   = :workflow_key
    and    case_id        = :case_id
    and    transition_key = :transition_key
    and    party_id       = :party_id
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/assignee-add-2.xql}
dbqd.acs-workflow.www.assignee-add.unassigned_parties {dbqd.acs-workflow.www.assignee-add.unassigned_parties {    select p.party_id,
           acs_object.name(p.party_id) as name,
           p.email
      from parties p
     where not exists (select 1 from wf_task_assignments ta where ta.task_id = :task_id and ta.party_id = p.party_id)
       and 0 < (select count(*)
                from   users u, party_approved_member_map m
                where  m.party_id = p.party_id
                and    u.user_id = m.member_id)


      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/assignee-add-oracle.xql}
dbqd.acs-workflow.www.assignee-remove-2.remove_assignee_task {dbqd.acs-workflow.www.assignee-remove-2.remove_assignee_task {        begin
            workflow_case.remove_task_assignment (
                task_id => :task_id,
                party_id => :party_id
            );

            workflow_case.remove_manual_assignment (
                case_id => :case_id,
                transition_key => :transition_key,
                party_id => :party_id
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/assignee-remove-2-oracle.xql}
dbqd.acs-workflow.www.assignee-remove-2.task_info {dbqd.acs-workflow.www.assignee-remove-2.task_info {    select t.case_id, 
           t.transition_key, 
           c.object_id, 
           wcti.access_privilege
    from   wf_tasks t, wf_cases c, wf_context_transition_info wcti
    where  wcti.context_key = c.context_key
    and    wcti.workflow_key = t.workflow_key
    and    wcti.transition_key = t.transition_key
    and    c.case_id = t.case_id
    and    t.task_id = :task_id

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/assignee-remove-2.xql}
dbqd.acs-workflow.www.assignee-remove-2.this_user_is_assigned_p {dbqd.acs-workflow.www.assignee-remove-2.this_user_is_assigned_p {    select count(*) from wf_user_tasks  where task_id = :task_id and user_id = :user_id

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/assignee-remove-2.xql}
dbqd.acs-workflow.www.case-assignment-set.case_info {dbqd.acs-workflow.www.case-assignment-set.case_info {    select case_id, 
           acs_object.name(object_id) as object_name, 
           state,
           workflow_key
    from   wf_cases
    where  case_id = :case_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/case-assignment-set-oracle.xql}
dbqd.acs-workflow.www.case-assignment-set.party_with_at_least_one_member {dbqd.acs-workflow.www.case-assignment-set.party_with_at_least_one_member {    select p.party_id,
           acs_object.name(p.party_id) as name, 
           case when p.email = '' then '' else '('||p.email||')' end as email
    from   parties p
    where  0 < (select count(*)
                from   users u, party_approved_member_map m
                where  m.party_id = p.party_id
                and    u.user_id = m.member_id)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/case-assignment-set-oracle.xql}
dbqd.acs-workflow.www.case-assignment-set.role_name_select {dbqd.acs-workflow.www.case-assignment-set.role_name_select {select role_name
from wf_roles
where role_key = :role_key
and workflow_key = :workflow_key
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/case-assignment-set.xql}
dbqd.acs-workflow.www.case-assignment-set.assignment_select {dbqd.acs-workflow.www.case-assignment-set.assignment_select {    select party_id
      from wf_case_assignments
     where case_id = :case_id
       and role_key = :role_key
       and workflow_key = :workflow_key

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/case-assignment-set.xql}
dbqd.acs-workflow.www.case-assignments.case_info {dbqd.acs-workflow.www.case-assignments.case_info {    select case_id, 
           acs_object.name(object_id) as object_name, 
           state,
           workflow_key
    from   wf_cases
    where  case_id = :case_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/case-assignments-oracle.xql}
dbqd.acs-workflow.www.case-assignments-table.manual_assignments {dbqd.acs-workflow.www.case-assignments-table.manual_assignments {    select p.party_id,
           acs_object.name(p.party_id) as name,
           p.email,
           '' as url,
           '' as remove_url,
           '' as edit_url,
           o.object_type,
           r.role_key,
           r.role_name
      from wf_cases c, wf_roles r, wf_case_assignments ca, parties p, acs_objects o
     where c.case_id = :case_id
       and r.workflow_key = c.workflow_key
       and ca.case_id (+) = :case_id
       and ca.role_key (+) = r.role_key 
       and p.party_id (+) = ca.party_id 
       and o.object_id (+) = p.party_id 
     order by r.sort_order, r.role_key, name

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/case-assignments-table-oracle.xql}
dbqd.acs-workflow.www.case-attributes-table.attributes {dbqd.acs-workflow.www.case-attributes-table.attributes {    select a.attribute_id,
           a.sort_order,
           a.attribute_name,
           a.pretty_name,
           a.datatype,
           '' as edit_url,
           workflow_case.get_attribute_value(:case_id, a.attribute_name) as value,
           '' as value_pretty
      from acs_attributes a, wf_cases c
     where c.case_id = :case_id
       and a.object_type = c.workflow_key
     order by a.sort_order

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/case-attributes-table-oracle.xql}
dbqd.acs-workflow.www.case-deadline-set.case_info {dbqd.acs-workflow.www.case-deadline-set.case_info {    select case_id, 
           acs_object.name(object_id) as object_name, 
           state,
           workflow_key
    from   wf_cases
    where  case_id = :case_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/case-deadline-set-oracle.xql}
dbqd.acs-workflow.www.case-deadline-set.a_week_from_now {dbqd.acs-workflow.www.case-deadline-set.a_week_from_now {      select sysdate+7 from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/case-deadline-set-oracle.xql}
dbqd.acs-workflow.www.case-deadline-set.transition_name_select {dbqd.acs-workflow.www.case-deadline-set.transition_name_select {select transition_name
from wf_transitions
where transition_key = :transition_key
      and workflow_key = :workflow_key
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/case-deadline-set.xql}
dbqd.acs-workflow.www.case-deadline-set.deadline_select {dbqd.acs-workflow.www.case-deadline-set.deadline_select {    select deadline
      from wf_case_deadlines
     where case_id = :case_id
       and transition_key = :transition_key
       and workflow_key = :workflow_key

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/case-deadline-set.xql}
dbqd.acs-workflow.www.case-deadlines.case_info {dbqd.acs-workflow.www.case-deadlines.case_info {    select case_id, 
           acs_object.name(object_id) as object_name, 
           state,
           workflow_key
    from   wf_cases
    where  case_id = :case_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/case-deadlines-oracle.xql}
dbqd.acs-workflow.www.case-deadlines-table.deadlines {dbqd.acs-workflow.www.case-deadlines-table.deadlines {    select tr.transition_name, 
           tr.transition_key, 
           to_char(cd.deadline, :date_format) as deadline_pretty,
           '' as edit_url,
           '' as remove_url
    from   (select c.case_id, tr.sort_order, tr.transition_name, tr.transition_key, tr.workflow_key from wf_cases c, wf_transitions tr
            where c.case_id = :case_id and c.workflow_key = tr.workflow_key) tr,
            wf_case_deadlines cd
    where  tr.case_id = cd.case_id(+)
    and    tr.transition_key = cd.transition_key(+)
    and    tr.workflow_key = cd.workflow_key(+)
    order by tr.sort_order

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/case-deadlines-table-oracle.xql}
dbqd.acs-workflow.www.case.case_info {dbqd.acs-workflow.www.case.case_info {    select case_id, 
           acs_object.name(object_id) as object_name, 
           state,
           workflow_key
    from   wf_cases
    where  case_id = :case_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/case-oracle.xql}
dbqd.acs-workflow.www.case-state-graph.tokens {dbqd.acs-workflow.www.case-state-graph.tokens {    select tok.token_id, 
           tok.place_key,
           tok.locked_task_id,
           ta.transition_key
    from   wf_tokens tok,
           wf_tasks ta
    where  tok.case_id = :case_id
    and    ta.task_id (+) = tok.locked_task_id
    and    tok.state in ('free', 'locked')

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/case-state-graph-oracle.xql}
dbqd.acs-workflow.www.case-state-graph.workflow_key_from_case_id {dbqd.acs-workflow.www.case-state-graph.workflow_key_from_case_id {       select workflow_key from wf_cases where case_id = :case_id 
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/case-state-graph.xql}
dbqd.acs-workflow.www.case-state-graph.tokens {dbqd.acs-workflow.www.case-state-graph.tokens {    select tok.token_id, 
           tok.place_key,
           tok.locked_task_id,
           ta.transition_key
    from   wf_tokens tok,
           wf_tasks ta
    where  tok.case_id = :case_id
    and    ta.task_id (+) = tok.locked_task_id
    and    tok.state in ('free', 'locked')

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/case-state-graph-oracle.xql}
dbqd.acs-workflow.www.case.current_tasks {dbqd.acs-workflow.www.case.current_tasks {    select t.task_id, 
           t.transition_key, 
           t.state, 
           t.case_id,
           tr.transition_name,
           to_char(t.enabled_date, :date_format) as enabled_date_pretty
    from   wf_tasks t, wf_transitions tr
    where  t.case_id = :case_id
    and    t.state in ('enabled', 'started')
    and    tr.workflow_key = t.workflow_key
    and    tr.transition_key = t.transition_key
    order by t.enabled_date desc

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/case.xql}
dbqd.acs-workflow.www.case.old_tasks {dbqd.acs-workflow.www.case.old_tasks {    select t.task_id, 
           t.transition_key, 
           t.state, 
           t.case_id,
           tr.transition_name,
           to_char(t.enabled_date, :date_format) as enabled_date_pretty
    from   wf_tasks t, wf_transitions tr
    where  t.case_id = :case_id
    and    t.state not in ('enabled', 'started')
    and    tr.workflow_key = t.workflow_key
    and    tr.transition_key = t.transition_key
    order by t.enabled_date desc

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/case.xql}
dbqd.acs-workflow.www.comment-add.case {dbqd.acs-workflow.www.comment-add.case {    select case_id,
           acs_object.name(object_id) as object_name,
           state
    from   wf_cases
    where  case_id = :case_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/comment-add-oracle.xql}
dbqd.acs-workflow.www.finished-tasks.finished_tasks {dbqd.acs-workflow.www.finished-tasks.finished_tasks {    select t.task_id, 
           t.transition_key, 
           t.state, 
           t.case_id,
           tr.transition_name,
           to_char(t.enabled_date, :date_format) as enabled_date_pretty,
           to_char(t.started_date, :date_format) as started_date_pretty,
           to_char(t.canceled_date, :date_format) as canceled_date_pretty,
           to_char(t.overridden_date, :date_format) as overridden_date_pretty,
           to_char(t.finished_date, :date_format) as finished_date_pretty,
           to_char(nvl(t.finished_date, nvl(t.canceled_date, t.overridden_date)), :date_format) as done_date_pretty,
           p.party_id as done_by_party_id,
           '' as done_by_url,
           acs_object.name(p.party_id) as done_by_name,
           p.email as done_by_email
      from wf_tasks t, wf_transitions tr, parties p
     where t.case_id = :case_id
       and t.state not in ('enabled', 'started')
       and tr.workflow_key = t.workflow_key
       and tr.transition_key = t.transition_key
       and p.party_id (+) = t.holding_user
     order by t.enabled_date desc

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/finished-tasks-oracle.xql}
dbqd.acs-workflow.www.journal.journal_select {dbqd.acs-workflow.www.journal.journal_select {    select j.journal_id,
           j.action,
           j.action_pretty,
           o.creation_date,
           to_char(o.creation_date, :date_format) as creation_date_pretty,
           o.creation_user,
           acs_object.name(o.creation_user) as creation_user_name,
	   p.email as creation_user_email, 
	   o.creation_ip,
           j.msg,
           a.attribute_name as attribute_name, 
	   a.pretty_name as attribute_pretty_name,
	   a.datatype as attribute_datatype, 
	   v.attr_value as attribute_value
    from   journal_entries j, acs_objects o, parties p,
           wf_attribute_value_audit v, acs_attributes a
    where  j.object_id = :case_id
      and  o.object_id = j.journal_id
      and  p.party_id (+) =  o.creation_user
      and  v.journal_id (+) = j.journal_id
      and  a.attribute_id (+) = v.attribute_id
    order  by o.creation_date $sql_order, j.journal_id $sql_order

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/journal-oracle.xql}
dbqd.acs-workflow.www.task-assignees.assignees {dbqd.acs-workflow.www.task-assignees.assignees {    select p.party_id,
           acs_object.name(p.party_id) as name,
           p.email,
           '' as remove_url,
           o.object_type
    from   wf_task_assignments ta,
           parties p,
           acs_objects o
    where  ta.task_id = :task_id
    and    p.party_id = ta.party_id
    and    o.object_id = p.party_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/task-assignees-oracle.xql}
dbqd.acs-workflow.www.task-assignees.effective_assignees {dbqd.acs-workflow.www.task-assignees.effective_assignees {    select distinct u.user_id,
           acs_object.name(u.user_id) as name,
           p.email,
           '/shared/community-member?user_id=' || u.user_id as url
    from   wf_task_assignments ta,
           party_approved_member_map m,
           parties p,
           users u
    where  ta.task_id = :task_id
    and    m.party_id = ta.party_id
    and    p.party_id = m.member_id
    and    u.user_id = p.party_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/task-assignees-oracle.xql}
dbqd.acs-workflow.www.task-deadline-set-2.deadline_update {dbqd.acs-workflow.www.task-deadline-set-2.deadline_update {update wf_tasks set deadline = :deadline_date
where task_id = :task_id
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/task-deadline-set-2.xql}
dbqd.acs-workflow.www.task-deadline-set.deadline_select {dbqd.acs-workflow.www.task-deadline-set.deadline_select {select deadline
from wf_tasks
where task_id = :task_id
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/task-deadline-set.xql}
dbqd.acs-workflow.www.task-list.select_list {dbqd.acs-workflow.www.task-list.select_list {    "t.task_id, 
    t.case_id, 
    t.transition_key, 
    t.enabled_date, 
    to_char(t.enabled_date, :date_format) as enabled_date_pretty,
    t.started_date,
    to_char(t.started_date, :date_format) as started_date_pretty,
    t.deadline,
    to_char(t.deadline, :date_format) as deadline_pretty,
    t.deadline - sysdate as days_till_deadline,
    t.state, 
    c.object_id, 
    ot.object_type as object_type,
    ot.pretty_name as object_type_pretty, 
    acs_object.name(c.object_id) as object_name,
    c.workflow_key,
    wft.pretty_name as workflow_name,
    sysdate,
    t.estimated_minutes,
    '' as task_url"


      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/acs-workflow/www/task-list-oracle.xql}
dbqd.acs-workflow.www.task.panels {dbqd.acs-workflow.www.task.panels {    select tp.header, 
           tp.template_url,
           '' as bgcolor
      from wf_context_task_panels tp, 
           wf_cases c,
           wf_tasks t
     where t.task_id = :task_id
       and c.case_id = t.case_id
       and tp.context_key = c.context_key
       and tp.workflow_key = c.workflow_key
       and tp.transition_key = t.transition_key
       and (tp.only_display_when_started_p = 'f' or (t.state = 'started' and :this_user_is_assigned_p = 1))
       and tp.overrides_action_p = 'f'
    order by tp.sort_order

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/task.xql}
dbqd.acs-workflow.www.task.instruction_check {dbqd.acs-workflow.www.task.instruction_check {    select count(*) 
    from wf_transition_info ti, wf_tasks t
    where t.task_id = :task_id
      and t.transition_key = ti.transition_key
      and t.workflow_key = ti.workflow_key
      and instructions is not null

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/task.xql}
dbqd.acs-workflow.www.task.action_panels {dbqd.acs-workflow.www.task.action_panels {    select tp.header, 
           tp.template_url
      from wf_context_task_panels tp, 
           wf_cases c,
           wf_tasks t
     where t.task_id = :task_id
       and c.case_id = t.case_id
       and tp.context_key = c.context_key
       and tp.workflow_key = c.workflow_key
       and tp.transition_key = t.transition_key
       and (tp.only_display_when_started_p = 'f' or (t.state = 'started' and :this_user_is_assigned_p = 1))
       and tp.overrides_action_p = 't'
    order by tp.sort_order

      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/task.xql}
dbqd.acs-workflow.www.task.case_state {dbqd.acs-workflow.www.task.case_state {      select state from wf_cases where case_id = :case_id
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/task.xql}
dbqd.acs-workflow.www.test-display.workflow_key_from_case_id {dbqd.acs-workflow.www.test-display.workflow_key_from_case_id {       select workflow_key from wf_cases where case_id = :case_id 
      } {} {} {} F:/temp/openacs-4/packages/acs-workflow/www/test-display.xql}
dbqd.address-book.tcl.address-book-procs.ab::contact::1row.get_contact_info {dbqd.address-book.tcl.address-book-procs.ab::contact::1row.get_contact_info {	select last_name,
	       first_names,
	       title,
	       organization
	  from ab_contacts
	 where contact_id = :contact_id
    
      } {} {} {} F:/temp/openacs-4/packages/address-book/tcl/address-book-procs.xql}
dbqd.address-book.tcl.address-book-procs.ab::contact_attr::multirow.get_contact_attrs {dbqd.address-book.tcl.address-book-procs.ab::contact_attr::multirow.get_contact_attrs {	select attr_id,
               type_name,
	       value
	  from ab_contact_attr_types acat,
	       ab_contact_attrs aca
	 where acat.type_key = aca.type_key
	   and aca.contact_id = :contact_id
      order by sort_key
      } {} {} {} F:/temp/openacs-4/packages/address-book/tcl/address-book-procs.xql}
dbqd.address-book.tcl.address-book-procs.ab::contact::displaywidget.get_contact_attributes {dbqd.address-book.tcl.address-book-procs.ab::contact::displaywidget.get_contact_attributes {	select type_name,
	       value
	  from ab_contact_attr_types acat,
	       ab_contact_attrs aca
	 where acat.type_key = aca.type_key
	   and aca.contact_id = :contact_id
      order by sort_key
    
      } {} {} {} F:/temp/openacs-4/packages/address-book/tcl/address-book-procs.xql}
dbqd.address-book.tcl.address-book-procs.ab::contact::displaywidget.get_addresses {dbqd.address-book.tcl.address-book-procs.ab::contact::displaywidget.get_addresses {	select address_id,
	       address_name,
	       line_one,
	       line_two,
	       line_three,
	       line_four,
	       municipality_name,
	       region_id,
	       postal_code,
	       country_id
	  from addresses_located
	 where locatee_id = :contact_id
      order by sort_key
    
      } {} {} {} F:/temp/openacs-4/packages/address-book/tcl/address-book-procs.xql}
dbqd.address-book.www.address-ae-2.address_exists_p {dbqd.address-book.www.address-ae-2.address_exists_p {      select case when count(*) = 0 then 0 else 1 end from pl_addresses where address_id = :address_id
      } {} {} {} F:/temp/openacs-4/packages/address-book/www/address-ae-2.xql}
dbqd.address-book.www.address-delete.delete_location_rel {dbqd.address-book.www.address-delete.delete_location_rel {	begin
	  location_rel.delete(:rel_id);
	end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/address-book/www/address-delete-oracle.xql}
dbqd.address-book.www.address-delete.delete_orphan_address {dbqd.address-book.www.address-delete.delete_orphan_address {	    declare
	      v_rel_id subplace_rels.rel_id%TYPE;
	      cursor subplace_rel_cursor is
	        select sr.rel_id
	          from subplace_rels sr,
	               acs_rels ar
	         where ar.rel_id = sr.rel_id
	           and ar.object_id_two = :address_id;
	    begin
	      open subplace_rel_cursor;
	      fetch subplace_rel_cursor into v_rel_id;
	      if not subplace_rel_cursor%NOTFOUND then
	        subplace_rel.delete(v_rel_id);
	      end if;
	      close subplace_rel_cursor;
	      pl_address.delete(:address_id);
	    end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/address-book/www/address-delete-oracle.xql}
dbqd.address-book.www.address-delete.orphan_address {dbqd.address-book.www.address-delete.orphan_address {      select case when count(*) = 0 then 1 else 0 end from place_element_map where place_id = :address_id
      } {} {} {} F:/temp/openacs-4/packages/address-book/www/address-delete.xql}
dbqd.address-book.www.address-delete.address_is_orphan_p {dbqd.address-book.www.address-delete.address_is_orphan_p {      select case when count(*) = 0 then 0 else 1 end from acs_objects where object_id = :address_id and object_type = 'pl_address'
      } {} {} {} F:/temp/openacs-4/packages/address-book/www/address-delete.xql}
dbqd.address-book.www.address-swap.get_other_rel_id {dbqd.address-book.www.address-swap.get_other_rel_id {      select rel_id from (select rel_id from addresses_located where sort_key $operator (select sort_key from location_rels where rel_id = :rel_id) and locatee_id = :contact_id order by sort_key $direction) sq where rownum = 1
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/address-book/www/address-swap-oracle.xql}
dbqd.address-book.www.address-swap.swap_location_rel_sort_key {dbqd.address-book.www.address-swap.swap_location_rel_sort_key {    begin
      location_rel.swap_sort(rel_id_one => :rel_id,
                             rel_id_two => :other_rel_id);
    end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/address-book/www/address-swap-oracle.xql}
dbqd.address-book.www.address-swap.get_contact_id {dbqd.address-book.www.address-swap.get_contact_id {      select locatee_id from pl_addresses_located where rel_id = :rel_id
      } {} {} {} F:/temp/openacs-4/packages/address-book/www/address-swap.xql}
dbqd.address-book.www.attr-ae-2.insert_ab_contact_attr {dbqd.address-book.www.attr-ae-2.insert_ab_contact_attr {	begin
	  :1 :=
	    ab_contact_attr.new(creation_user => :user_id,
	                        creation_ip => :peeraddr,
	                        context_id => :contact_id,
	                        contact_id => :contact_id,
	                        type_key => :attr_type,
	                        value => :attr_value);
	end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/address-book/www/attr-ae-2-oracle.xql}
dbqd.address-book.www.attr-ae-2.delete_empty_attr {dbqd.address-book.www.attr-ae-2.delete_empty_attr {      begin ab_contact_attr.delete(:attr_id); end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/address-book/www/attr-ae-2-oracle.xql}
dbqd.address-book.www.attr-ae-2.attr_exists_p {dbqd.address-book.www.attr-ae-2.attr_exists_p {      select case when count(*) = 0 then 0 else 1 end from ab_contact_attrs where attr_id = :attr_id
      } {} {} {} F:/temp/openacs-4/packages/address-book/www/attr-ae-2.xql}
dbqd.address-book.www.attr-ae-2.update_ab_contact_attr {dbqd.address-book.www.attr-ae-2.update_ab_contact_attr {	update ab_contact_attrs
	   set type_key = :attr_type, value = :attr_value
	 where attr_id = :attr_id
    
      } {} {} {} F:/temp/openacs-4/packages/address-book/www/attr-ae-2.xql}
dbqd.address-book.www.attr-ae.unique_type_key {dbqd.address-book.www.attr-ae.unique_type_key {	select type_key
	  from ab_contact_attr_types
	 where type_id = (select min(type_id)
                            from ab_contact_attr_types
                           where type_key not in (select type_key
                                                    from ab_contact_attrs
                                                   where contact_id = :contact_id))
    
      } {} {} {} F:/temp/openacs-4/packages/address-book/www/attr-ae.xql}
dbqd.address-book.www.attr-ae.first_type_key {dbqd.address-book.www.attr-ae.first_type_key {	    select type_key
	      from ab_contact_attr_types
	     where type_id = (select min(type_id)
	                      from ab_contact_attr_types)
        
      } {} {} {} F:/temp/openacs-4/packages/address-book/www/attr-ae.xql}
dbqd.address-book.www.attr-ae.get_attribute {dbqd.address-book.www.attr-ae.get_attribute {      select type_key, value from ab_contact_attrs where attr_id = :attr_id
      } {} {} {} F:/temp/openacs-4/packages/address-book/www/attr-ae.xql}
dbqd.address-book.www.attr-delete.delete_attr {dbqd.address-book.www.attr-delete.delete_attr {    begin ab_contact_attr.delete(:attr_id); end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/address-book/www/attr-delete-oracle.xql}
dbqd.address-book.www.attr-delete.contact_id {dbqd.address-book.www.attr-delete.contact_id {    select contact_id
      from ab_contact_attrs
     where attr_id = :attr_id

      } {} {} {} F:/temp/openacs-4/packages/address-book/www/attr-delete.xql}
dbqd.address-book.www.attr-swap.get_other_attr_id {dbqd.address-book.www.attr-swap.get_other_attr_id {      select attr_id from (select attr_id from ab_contact_attrs where sort_key $operator (select sort_key from ab_contact_attrs where attr_id = :attr_id) and contact_id = :contact_id order by sort_key $direction) where rownum = 1
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/address-book/www/attr-swap-oracle.xql}
dbqd.address-book.www.attr-swap.swap_attribute_sort_key {dbqd.address-book.www.attr-swap.swap_attribute_sort_key {    begin
      ab_contact_attr.swap_sort(attr_id_one => :attr_id,
                                attr_id_two => :other_attr_id);
    end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/address-book/www/attr-swap-oracle.xql}
dbqd.address-book.www.attr-swap.get_contact_id {dbqd.address-book.www.attr-swap.get_contact_id {      select contact_id from ab_contact_attrs where attr_id = :attr_id
      } {} {} {} F:/temp/openacs-4/packages/address-book/www/attr-swap.xql}
dbqd.address-book.www.contact-add-2.create_ab_contact {dbqd.address-book.www.contact-add-2.create_ab_contact {	    begin
	     :1 :=
	      ab_contact.new(contact_id => :contact_id,
	                     creation_user => :user_id,
	                     creation_ip => :peeraddr,
	                     context_id => :instance_id,
	                     first_names => :first_names,
	                     last_name => :last_name,
	                     title => :title,
	                     organization => :organization,
	                     object_id => :instance_id,
	                     category => 'ab_contact');
	    end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/address-book/www/contact-add-2-oracle.xql}
dbqd.address-book.www.contact-add-2.grant_admin_to_contact_creator {dbqd.address-book.www.contact-add-2.grant_admin_to_contact_creator {	    begin acs_permission.grant_permission(object_id => :contact_id,
	                                          grantee_id => :user_id,
	                                          privilege => 'admin');
	    end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/address-book/www/contact-add-2-oracle.xql}
dbqd.address-book.www.contact-add-2.insert_ab_contact_attrs {dbqd.address-book.www.contact-add-2.insert_ab_contact_attrs {      begin $plsql_block end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/address-book/www/contact-add-2-oracle.xql}
dbqd.address-book.www.contact-add-2.contact_exists_p {dbqd.address-book.www.contact-add-2.contact_exists_p {      select case when count(*) = 0 then 0 else 1 end from ab_contacts where contact_id = :contact_id
      } {} {} {} F:/temp/openacs-4/packages/address-book/www/contact-add-2.xql}
dbqd.address-book.www.contact-delete.delete_ab_contact_rel {dbqd.address-book.www.contact-delete.delete_ab_contact_rel {	begin
	  ab_contact_rel.delete(:rel_id);
	end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/address-book/www/contact-delete-oracle.xql}
dbqd.address-book.www.contact-delete.delete_orphan_address_perms {dbqd.address-book.www.contact-delete.delete_orphan_address_perms {	 delete from acs_permissions
         where object_id = :contact_id;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/address-book/www/contact-delete-oracle.xql}
dbqd.address-book.www.contact-delete.delete_orphan_address {dbqd.address-book.www.contact-delete.delete_orphan_address {	    begin

	      -- Delete the contact, blowing away orphan addresses.
	      ab_contact.delete(contact_id => :contact_id,
	                        delete_orphan_addresses_p => 't');
	    end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/address-book/www/contact-delete-oracle.xql}
dbqd.address-book.www.contact-delete.orphan_contact {dbqd.address-book.www.contact-delete.orphan_contact {      select case when count(*) = 0 then 1 else 0 end from ab_contacts_related where contact_id = :contact_id
      } {} {} {} F:/temp/openacs-4/packages/address-book/www/contact-delete.xql}
dbqd.address-book.www.contact-delete.contact_is_orphan_p {dbqd.address-book.www.contact-delete.contact_is_orphan_p {      select case when count(*) = 0 then 0 else 1 end from acs_objects where object_id = :contact_id and object_type = 'ab_contact'
      } {} {} {} F:/temp/openacs-4/packages/address-book/www/contact-delete.xql}
dbqd.address-book.www.contact-edit-2.update_contact {dbqd.address-book.www.contact-edit-2.update_contact {    update ab_contacts
       set first_names = :first_names,
           last_name = :last_name,
           title = :title,
           organization= :organization
     where contact_id = :contact_id

      } {} {} {} F:/temp/openacs-4/packages/address-book/www/contact-edit-2.xql}
dbqd.address-book.www.contact-edit.grab_contact_info {dbqd.address-book.www.contact-edit.grab_contact_info {    select first_names,
           last_name,
           title,
           organization
      from ab_contacts
     where contact_id = :contact_id

      } {} {} {} F:/temp/openacs-4/packages/address-book/www/contact-edit.xql}
dbqd.address-book.www.contact-view.grab_addresses {dbqd.address-book.www.contact-view.grab_addresses {    select address_id,
           address_name,
           line_one,
           line_two,
           line_three,
           line_four,
           municipality_name,
           region_id,
           postal_code,
           country_id,
           rel_id
      from pl_addresses_located
     where locatee_id = :contact_id
  order by sort_key

      } {} {} {} F:/temp/openacs-4/packages/address-book/www/contact-view.xql}
dbqd.address-book.www.index.package_name {dbqd.address-book.www.index.package_name {      begin :1 := acs_object.name(:instance_id); end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/address-book/www/index-oracle.xql}
dbqd.address-book.www.index.sql_query {dbqd.address-book.www.index.sql_query {    select contact_id,
           nvl(last_name,'<br>') as last_name,
           nvl(first_names,'<br>') as first_names,
           nvl(title,'<br>') as title,
           nvl(organization,'<br>') as organization,
           nvl(work_phone,'<br>') as work_phone,
           nvl(home_phone,'<br>') as home_phone,
           nvl(fax,'<br>') as fax,
           nvl(other,'<br>') as other,
           nvl(email,'<br>') as email,
           acs_permission.permission_p(acr.rel_id,:user_id,'delete') as delete_p,
           acr.rel_id
      from ab_contacts_related acr
     where acs_permission.permission_p(contact_id,:user_id,'read') = 't'
       and object_id = :instance_id
      [value_if_exists search_filter]
  } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/address-book/www/index-oracle.xql}
dbqd.adserver.tcl.adserver-procs.ad_acs_adserver_url_mem.acs_adserver_mountpoint {dbqd.adserver.tcl.adserver-procs.ad_acs_adserver_url_mem.acs_adserver_mountpoint {            select site_node.url(s.node_id)
              from site_nodes s, apm_packages a
             where s.object_id = a.package_id
               and a.package_key = 'adserver'
        
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/adserver/tcl/adserver-procs-oracle.xql}
dbqd.adserver.tcl.adserver-procs.adserver_get_ad_html.adserver_defs_adv_update {dbqd.adserver.tcl.adserver-procs.adserver_get_ad_html.adserver_defs_adv_update {        update adv_log 
           set display_count = display_count + 1 
         where adv_key = :adv_key 
           and entry_date = trunc (sysdate)
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/adserver/tcl/adserver-procs-oracle.xql}
dbqd.adserver.tcl.adserver-procs.adserver_get_ad_html.adv_insert {dbqd.adserver.tcl.adserver-procs.adserver_get_ad_html.adv_insert {                insert into adv_log 
                       (adv_key, entry_date, display_count) 
                values (:adv_key,
                        trunc (sysdate),
                        (select 1 from dual 
                                 where 0 = (select count (*) 
                                              from adv_log 
                                             where adv_key = :adv_key 
                                               and entry_date = trunc (sysdate))))
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/adserver/tcl/adserver-procs-oracle.xql}
dbqd.adserver.tcl.adserver-procs.adserver_get_ad_html.adserver_defs_adv_user_insert {dbqd.adserver.tcl.adserver-procs.adserver_get_ad_html.adserver_defs_adv_user_insert {                    insert into adv_user_map (user_id, adv_key, event_time, event_type)
                    values (:user_id,:adv_key,sysdate,'d')
                
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/adserver/tcl/adserver-procs-oracle.xql}
dbqd.adserver.tcl.adserver-procs.adserver_get_ad_html.adserver_get_ad_least_exposure_first {dbqd.adserver.tcl.adserver-procs.adserver_get_ad_html.adserver_get_ad_least_exposure_first {                    select map.adv_key, track_clickthru_p, target_url
                      from adv_group_map map, advs_todays_log log, advs
                     where rownum=1
                       and group_key = :group_key
                       and map.adv_key = advs.adv_key
                       and map.adv_key = log.adv_key
                  order by nvl (display_count, 0)
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/adserver/tcl/adserver-procs-oracle.xql}
dbqd.adserver.tcl.adserver-procs.ad_acs_adserver_id_mem.acs_adserver_id_get {dbqd.adserver.tcl.adserver-procs.ad_acs_adserver_id_mem.acs_adserver_id_get {            select package_id from apm_packages
            where package_key = 'adserver'
        
      } {} {} {} F:/temp/openacs-4/packages/adserver/tcl/adserver-procs.xql}
dbqd.adserver.tcl.adserver-procs.adserver_get_ad_html.ad_rotation_method {dbqd.adserver.tcl.adserver-procs.adserver_get_ad_html.ad_rotation_method {                    select rotation_method 
                      from adv_groups
                     where group_key=:group_key
      } {} {} {} F:/temp/openacs-4/packages/adserver/tcl/adserver-procs.xql}
dbqd.adserver.tcl.adserver-procs.adserver_get_random_ad_key.adserver_count_group_ads {dbqd.adserver.tcl.adserver-procs.adserver_get_random_ad_key.adserver_count_group_ads {           select adv_count 
             from advs_properties
        
      } {} {} {} F:/temp/openacs-4/packages/adserver/tcl/adserver-procs.xql}
dbqd.adserver.tcl.adserver-procs.adserver_get_random_ad_key.adserver_pick {dbqd.adserver.tcl.adserver-procs.adserver_get_random_ad_key.adserver_pick {            select adv_key 
              from advs
             where adv_number = :pick
            
      } {} {} {} F:/temp/openacs-4/packages/adserver/tcl/adserver-procs.xql}
dbqd.adserver.tcl.adserver-procs.adserver_get_random_ad_key.adserver_count_group_ads {dbqd.adserver.tcl.adserver-procs.adserver_get_random_ad_key.adserver_count_group_ads {           select adv_count 
             from advs_properties
        
      } {} {} {} F:/temp/openacs-4/packages/adserver/tcl/adserver-procs.xql}
dbqd.adserver.tcl.adserver-procs.adserver_get_random_ad_key.adserver_group_get {dbqd.adserver.tcl.adserver-procs.adserver_get_random_ad_key.adserver_group_get {        select adv_key 
          from adv_group_map
         where adv_group_number = :pick
           and group_key = :group_key
        
      } {} {} {} F:/temp/openacs-4/packages/adserver/tcl/adserver-procs.xql}
dbqd.adserver.tcl.adserver-procs.adserver_get_sequential_ad_key.adserver_adv_key {dbqd.adserver.tcl.adserver-procs.adserver_get_sequential_ad_key.adserver_adv_key {        select adv_group_number as last,
               ag.adv_count max_adv_group_number
          from adv_group_map grp, adv_groups ag, adv_user_map map
         where user_id=:user_id
           and event_time     = (
               select max(event_time) 
                 from adv_user_map map2
                where map2.user_id = :user_id
                  and map2.adv_key = map.adv_key
                  and map2.event_type = 'd'
               )
           and ag.group_key   = :group_key
           and grp.group_key  = :group_key
           and grp.adv_key    = map.adv_key
           and map.user_id    = :user_id
           and map.event_type = 'd'
      } {} {} {} F:/temp/openacs-4/packages/adserver/tcl/adserver-procs.xql}
dbqd.adserver.tcl.adserver-procs.adserver_get_sequential_ad_key.adserver_sequential_get {dbqd.adserver.tcl.adserver-procs.adserver_get_sequential_ad_key.adserver_sequential_get {         select adv_key 
           from adv_group_map
          where group_key=:group_key
            and adv_group_number=:adv_group_number
      } {} {} {} F:/temp/openacs-4/packages/adserver/tcl/adserver-procs.xql}
dbqd.adserver.tcl.adserver-procs.adserver_get_ad_html.adserver_get_ad_by_ad_key {dbqd.adserver.tcl.adserver-procs.adserver_get_ad_html.adserver_get_ad_by_ad_key {                select track_clickthru_p, target_url
                  from advs
                 where adv_key = :adv_key
      } {} {} {} F:/temp/openacs-4/packages/adserver/tcl/adserver-procs.xql}
dbqd.adserver.tcl.adserver-procs.adserver_get_ad_html.adserver_get_ad_by_adnumber {dbqd.adserver.tcl.adserver-procs.adserver_get_ad_html.adserver_get_ad_by_adnumber {                select track_clickthru_p, target_url, adv_key
                  from advs
                 where adv_number = :ad_number
      } {} {} {} F:/temp/openacs-4/packages/adserver/tcl/adserver-procs.xql}
dbqd.adserver.tcl.adserver-procs.adserver_get_ad_html.adserver_get_ad_by_group_and_number {dbqd.adserver.tcl.adserver-procs.adserver_get_ad_html.adserver_get_ad_by_group_and_number {                select a.adv_key, track_clickthru_p, target_url
                  from advs a, adv_group_map m
                 where a.adv_key = m.adv_key
                   and adv_group_number = :ad_number
                   and m.group_key = :group_key
      } {} {} {} F:/temp/openacs-4/packages/adserver/tcl/adserver-procs.xql}
dbqd.adserver.www.adhref.adv_known_user_insert {dbqd.adserver.www.adhref.adv_known_user_insert {    insert into adv_user_map (user_id, adv_key, event_time, event_type) 
    values (:user_id, :adv_key, sysdate, 'c')
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/adserver/www/adhref-oracle.xql}
dbqd.adserver.www.adhref.adv_update_query {dbqd.adserver.www.adhref.adv_update_query {update adv_log 
   set click_count = click_count + 1 
 where adv_key = :adv_key 
   and entry_date = trunc (sysdate)
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/adserver/www/adhref-oracle.xql}
dbqd.adserver.www.adhref.adv_insert {dbqd.adserver.www.adhref.adv_insert {    insert into adv_log
           (adv_key, entry_date, click_count)
    values (:adv_key,
            trunc (sysdate),
            (select 1 from dual 
                     where 0 = (select count (*) 
                                  from adv_log 
                                 where adv_key = :adv_key 
                                   and entry_date = trunc (sysdate))))"
    db_dml adv_insert $insert_sql
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/adserver/www/adhref-oracle.xql}
dbqd.adserver.www.adhref.adv_url_query {dbqd.adserver.www.adhref.adv_url_query {select target_url 
  from advs 
 where adv_key = :adv_key
      } {} {} {} F:/temp/openacs-4/packages/adserver/www/adhref.xql}
dbqd.adserver.www.adimg.adv_log_update_query {dbqd.adserver.www.adimg.adv_log_update_query {      update adv_log 
         set display_count = display_count + 1 
       where adv_key = :adv_key 
         and entry_date = trunc (sysdate)
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/adserver/www/adimg-oracle.xql}
dbqd.adserver.www.adimg.adv_insert {dbqd.adserver.www.adimg.adv_insert {        insert into adv_log 
               (adv_key, entry_date, display_count) 
        values (:adv_key,
                trunc (sysdate),
                (select 1 from dual 
                         where 0 = (select count (*) 
                                      from adv_log 
                                     where adv_key = :adv_key 
                                      and entry_date = trunc (sysdate))))
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/adserver/www/adimg-oracle.xql}
dbqd.adserver.www.adimg.adv_known_user_insert {dbqd.adserver.www.adimg.adv_known_user_insert {        insert into adv_user_map (user_id, adv_key, event_time, event_type) 
        values (:user_id, :adv_key, sysdate, 'd')
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/adserver/www/adimg-oracle.xql}
dbqd.adserver.www.adimg.adv_select {dbqd.adserver.www.adimg.adv_select {              SELECT adv_filename as ad_filename_stub, 
                     case when local_image_p = 't' then 1 else 0 end as local_image
                FROM advs
                WHERE adv_key = :adv_key
      } {} {} {} F:/temp/openacs-4/packages/adserver/www/adimg.xql}
dbqd.adserver.www.admin.add-adv-2.adv_insert_query {dbqd.adserver.www.admin.add-adv-2.adv_insert_query {insert into advs (adv_key, target_url, local_image_p, track_clickthru_p, adv_filename)
select :adv_key, :target_url, :local_image_p, :track_clickthru_p, :adv_filename 
 from dual
where not exists (select 1
                    from advs
                   where adv_key= :adv_key)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/adserver/www/admin/add-adv-2-oracle.xql}
dbqd.adserver.www.admin.add-adv-2.adv_insert_check {dbqd.adserver.www.admin.add-adv-2.adv_insert_check {select count(*)
  from advs 
 where adv_key = :adv_key
   and target_url = :target_url
   and local_image_p = :local_image_p
   and track_clickthru_p = :track_clickthru_p
  and adv_filename = :adv_filename

      } {} {} {} F:/temp/openacs-4/packages/adserver/www/admin/add-adv-2.xql}
dbqd.adserver.www.admin.add-adv-group-2.adv_insert_query {dbqd.adserver.www.admin.add-adv-group-2.adv_insert_query {insert into adv_groups (group_key, pretty_name, rotation_method)
select :group_key, :pretty_name, :rotation_method
  from dual
 where not exists (select 1
                     from adv_groups
                    where group_key = :group_key)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/adserver/www/admin/add-adv-group-2-oracle.xql}
dbqd.adserver.www.admin.add-adv-group-2.adv_insert_check {dbqd.adserver.www.admin.add-adv-group-2.adv_insert_check {select count(*)
  from adv_groups 
 where group_key = :group_key and $pretty_name_sql
   and trim(rotation_method) = :rotation_method
      } {} {} {} F:/temp/openacs-4/packages/adserver/www/admin/add-adv-group-2.xql}
dbqd.adserver.www.admin.add-adv-to-group-2.adv_insert_query {dbqd.adserver.www.admin.add-adv-to-group-2.adv_insert_query {insert into adv_group_map (group_key, adv_key) 
select :group_key, :adv_key
  from dual
 where not exists (select 1
                     from adv_group_map
                    where adv_key = :adv_key
                      and group_key = :group_key)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/adserver/www/admin/add-adv-to-group-2-oracle.xql}
dbqd.adserver.www.admin.add-adv-to-group.adv_pretty_name_query {dbqd.adserver.www.admin.add-adv-to-group.adv_pretty_name_query {      select pretty_name from adv_groups where group_key = :group_key
      } {} {} {} F:/temp/openacs-4/packages/adserver/www/admin/add-adv-to-group.xql}
dbqd.adserver.www.admin.delete-adv-2.adv_delete_query_1 {dbqd.adserver.www.admin.delete-adv-2.adv_delete_query_1 {      delete from adv_log where adv_key = :adv_key
      } {} {} {} F:/temp/openacs-4/packages/adserver/www/admin/delete-adv-2.xql}
dbqd.adserver.www.admin.delete-adv-2.adv_delete_query_2 {dbqd.adserver.www.admin.delete-adv-2.adv_delete_query_2 {      delete from adv_user_map where adv_key = :adv_key
      } {} {} {} F:/temp/openacs-4/packages/adserver/www/admin/delete-adv-2.xql}
dbqd.adserver.www.admin.delete-adv-2.adv_delete_query_4 {dbqd.adserver.www.admin.delete-adv-2.adv_delete_query_4 {      delete from adv_group_map where adv_key = :adv_key
      } {} {} {} F:/temp/openacs-4/packages/adserver/www/admin/delete-adv-2.xql}
dbqd.adserver.www.admin.delete-adv-2.adv_delete_query_5 {dbqd.adserver.www.admin.delete-adv-2.adv_delete_query_5 {      delete from advs where adv_key = :adv_key
      } {} {} {} F:/temp/openacs-4/packages/adserver/www/admin/delete-adv-2.xql}
dbqd.adserver.www.admin.delete-adv.adv_info_query {dbqd.adserver.www.admin.delete-adv.adv_info_query {select sum (display_count) as n_displays, 
       sum (click_count) as n_clicks, 
       min (entry_date) as first_display, 
       max (entry_date) as last_display, 
       round (max (entry_date) - min (entry_date)) as n_days, 
       count (*) as n_entries 
from adv_log 
where adv_key = :adv_key
      } {} {} {} F:/temp/openacs-4/packages/adserver/www/admin/delete-adv.xql}
dbqd.adserver.www.admin.index.adrv_name_query {dbqd.adserver.www.admin.index.adrv_name_query {            select pretty_name
              from adv_groups
             where group_key = :group_key
            
      } {} {} {} F:/temp/openacs-4/packages/adserver/www/admin/index.xql}
dbqd.adserver.www.admin.index.adv_select_query1 {dbqd.adserver.www.admin.index.adv_select_query1 {    select group_key, pretty_name
      from adv_groups 
     where not group_key in (select group_key from adv_group_map)
            
      } {} {} {} F:/temp/openacs-4/packages/adserver/www/admin/index.xql}
dbqd.adserver.www.admin.index.adv_select_query2 {dbqd.adserver.www.admin.index.adv_select_query2 {    select map.group_key, advs.adv_key
      from advs, adv_group_map map
     where advs.adv_key = map.adv_key

UNION

    select NULL, advs.adv_key
      from advs
     where 0=(select count(*) from adv_group_map where advs.adv_key = adv_group_map.adv_key)
           
      } {} {} {} F:/temp/openacs-4/packages/adserver/www/admin/index.xql}
dbqd.adserver.www.admin.one-adv-detailed-stats.adv_info_query {dbqd.adserver.www.admin.one-adv-detailed-stats.adv_info_query {      select adv_key, adv_filename, track_clickthru_p, target_url from advs where adv_key = :adv_key
      } {} {} {} F:/temp/openacs-4/packages/adserver/www/admin/one-adv-detailed-stats.xql}
dbqd.adserver.www.admin.one-adv-detailed-stats.adv_numbers_query {dbqd.adserver.www.admin.one-adv-detailed-stats.adv_numbers_query {select sum(display_count) as n_displays, 
       sum(click_count) as n_clicks, 
       min(entry_date) as first_display, 
       max(entry_date) as last_display 
from adv_log 
where adv_key = :adv_key
      } {} {} {} F:/temp/openacs-4/packages/adserver/www/admin/one-adv-detailed-stats.xql}
dbqd.adserver.www.admin.one-adv-group.adv_group_info_query {dbqd.adserver.www.admin.one-adv-group.adv_group_info_query {select group_key, pretty_name
from adv_groups 
where group_key = :group_key
      } {} {} {} F:/temp/openacs-4/packages/adserver/www/admin/one-adv-group.xql}
dbqd.adserver.www.admin.one-adv-group.r_method {dbqd.adserver.www.admin.one-adv-group.r_method {                    select rotation_method as current_method
                    from adv_groups where group_key=:group_key
      } {} {} {} F:/temp/openacs-4/packages/adserver/www/admin/one-adv-group.xql}
dbqd.adserver.www.admin.one-adv.adv_info_query {dbqd.adserver.www.admin.one-adv.adv_info_query {      select adv_key, 
       adv_filename, 
       local_image_p, 
       track_clickthru_p, 
       target_url 
from advs 
where adv_key = :adv_key
      } {} {} {} F:/temp/openacs-4/packages/adserver/www/admin/one-adv.xql}
dbqd.adserver.www.admin.one-adv.adv_display_count {dbqd.adserver.www.admin.one-adv.adv_display_count {select count(*) from adv_log where adv_key=:adv_key
      } {} {} {} F:/temp/openacs-4/packages/adserver/www/admin/one-adv.xql}
dbqd.adserver.www.admin.one-adv.adv_info_select {dbqd.adserver.www.admin.one-adv.adv_info_select {       select sum (display_count) as n_displays, 
              sum (click_count) as n_clicks, 
              round (100 * (sum (click_count) /sum (display_count)), 2) as clickthrough_percent, 
              min (entry_date) as first_display, 
              max (entry_date) as last_display 
       from adv_log 
       where adv_key = :adv_key
      } {} {} {} F:/temp/openacs-4/packages/adserver/www/admin/one-adv.xql}
dbqd.adserver.www.admin.remove-adv-from-group-2.adv_delete_query {dbqd.adserver.www.admin.remove-adv-from-group-2.adv_delete_query {delete
   from adv_group_map
  where group_key = :group_key
    and adv_key = :adv_key

      } {} {} {} F:/temp/openacs-4/packages/adserver/www/admin/remove-adv-from-group-2.xql}
dbqd.adserver.www.admin.remove-adv-from-group.adv_name_query {dbqd.adserver.www.admin.remove-adv-from-group.adv_name_query {      select pretty_name from adv_groups where group_key = :group_key
      } {} {} {} F:/temp/openacs-4/packages/adserver/www/admin/remove-adv-from-group.xql}
dbqd.adserver.www.admin.update-adv-group.adv_group_update_query {dbqd.adserver.www.admin.update-adv-group.adv_group_update_query {update adv_groups set pretty_name = :pretty_name,
                      rotation_method=:rotation_method
                      where group_key = :group_key
      } {} {} {} F:/temp/openacs-4/packages/adserver/www/admin/update-adv-group.xql}
dbqd.adserver.www.admin.update-adv.adv_update_query {dbqd.adserver.www.admin.update-adv.adv_update_query {update advs set 
  target_url = :target_url, 
  track_clickthru_p = :track_clickthru_p, 
  adv_filename = :adv_filename, 
  local_image_p = :local_image_p 
where adv_key = :adv_key
      } {} {} {} F:/temp/openacs-4/packages/adserver/www/admin/update-adv.xql}
dbqd.adserver.www.index.adserver_sample_groups {dbqd.adserver.www.index.adserver_sample_groups {    select group_key, pretty_name, adv_count, rotation_method
      from adv_groups
     order by group_key
 
      } {} {} {} F:/temp/openacs-4/packages/adserver/www/index.xql}
dbqd.adserver.www.view-group.adserver_group_view {dbqd.adserver.www.view-group.adserver_group_view {        select pretty_name, adv_count, rotation_method
          from adv_groups
         where group_key = :group_key
    
      } {} {} {} F:/temp/openacs-4/packages/adserver/www/view-group.xql}
dbqd.adserver.www.view-group.adserver_group_view_one {dbqd.adserver.www.view-group.adserver_group_view_one {            select adv_key, adv_group_number
              from adv_group_map
             where group_key = :group_key
          order by adv_group_number
        
      } {} {} {} F:/temp/openacs-4/packages/adserver/www/view-group.xql}
dbqd.bboard.tcl.bboard-procs.bboard_forum_p.bboard_forum_p {dbqd.bboard.tcl.bboard-procs.bboard_forum_p.bboard_forum_p {        begin
            :1 := bboard_forum.forum_p(:forum_id);
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/tcl/bboard-procs-oracle.xql}
dbqd.bboard.tcl.bboard-procs.bboard_forum_new.create_forum {dbqd.bboard.tcl.bboard-procs.bboard_forum_new.create_forum {        begin
            :1 := bboard_forum.new (
                forum_id => :forum_id,
                short_name => :short_name,
                charter => :charter,
                moderated_p => :moderated_p,
                bboard_id => :bboard_id,
                context_id => :context_id,
                creation_user => :creation_user,
                creation_ip => :creation_ip
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/tcl/bboard-procs-oracle.xql}
dbqd.bboard.tcl.bboard-procs.bboard_forum_set.update_forum {dbqd.bboard.tcl.bboard-procs.bboard_forum_set.update_forum {        begin
            bboard_forum.set_attrs (
                forum_id => :forum_id,
                short_name => :short_name,
                charter => :charter,
                moderated_p => :moderated_p,
                bboard_id => :bboard_id
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/tcl/bboard-procs-oracle.xql}
dbqd.bboard.tcl.bboard-procs.bboard_category_p.bboard_category_p {dbqd.bboard.tcl.bboard-procs.bboard_category_p.bboard_category_p {        begin
            :1 := bboard_category.category_p(:category_id);
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/tcl/bboard-procs-oracle.xql}
dbqd.bboard.tcl.bboard-procs.bboard_category_new.create_category {dbqd.bboard.tcl.bboard-procs.bboard_category_new.create_category {	begin
	    :1 := bboard_category.new (
	        category_id => :category_id,
	        short_name => :short_name,
	        description => :description,
	        forum_id => :forum_id
	    );
	end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/tcl/bboard-procs-oracle.xql}
dbqd.bboard.tcl.bboard-procs.bboard_category_set.update_category {dbqd.bboard.tcl.bboard-procs.bboard_category_set.update_category {        begin
            bboard_category.set_attrs (
                category_id => :category_id,
                short_name => :short_name,
                description => :description,
                forum_id => :forum_id
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/tcl/bboard-procs-oracle.xql}
dbqd.bboard.tcl.bboard-procs.bboard_message_new.message_new {dbqd.bboard.tcl.bboard-procs.bboard_message_new.message_new {        begin
            :1 := bboard_message.new (
                message_id => :message_id,
                reply_to => :reply_to,
                sent_date => :sent_date,
                sender => :sender,
                title => :title,
                mime_type => :mime_type,
                data => empty_blob(),
                context_id => :context_id,
                creation_user => :creation_user,
                creation_ip => :creation_ip
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/tcl/bboard-procs-oracle.xql}
dbqd.bboard.tcl.bboard-procs.bboard_message_new.message_new_set_blob {dbqd.bboard.tcl.bboard-procs.bboard_message_new.message_new_set_blob {        update cr_revisions
            set content = empty_blob()
            where revision_id = :revision_id
        returning content into :1
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/tcl/bboard-procs-oracle.xql}
dbqd.bboard.tcl.bboard-procs.bboard_message_set.message_set_attr {dbqd.bboard.tcl.bboard-procs.bboard_message_set.message_set_attr {        begin
            bboard_message.set_attrs (
                message_id => :message_id,
                reply_to => :reply_to,
                sent_date => :sent_date,
                sender => :sender,
                title => :title,
                mime_type => :mime_type,
                context_id => :context_id
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/tcl/bboard-procs-oracle.xql}
dbqd.bboard.tcl.bboard-procs.bboard_message_set.message_set_content {dbqd.bboard.tcl.bboard-procs.bboard_message_set.message_set_content {        update cr_revisions
            set content = empty_blob()
            where revision_id = :revision_id
        returning content into :1
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/tcl/bboard-procs-oracle.xql}
dbqd.bboard.tcl.bboard-procs.bboard_message_clear_categories.bboard_message_clear_categories {dbqd.bboard.tcl.bboard-procs.bboard_message_clear_categories.bboard_message_clear_categories {        begin
            bboard_message.clear_categories ( :message_id );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/tcl/bboard-procs-oracle.xql}
dbqd.bboard.tcl.bboard-procs.bboard_message_add_category.bboard_message_add_category {dbqd.bboard.tcl.bboard-procs.bboard_message_add_category.bboard_message_add_category {        begin
            bboard_message.add_category (
                message_id => :message_id,
                category_id => :category_id
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/tcl/bboard-procs-oracle.xql}
dbqd.bboard.tcl.bboard-procs.bboard_message_remove_category.bboard_message_remove_category {dbqd.bboard.tcl.bboard-procs.bboard_message_remove_category.bboard_message_remove_category {        begin
            bboard_message.remove_category (
                message_id => :message_id,
                category_id => :category_id
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/tcl/bboard-procs-oracle.xql}
dbqd.bboard.tcl.bboard-procs.bboard_message_set_status.bboard_message_set_status {dbqd.bboard.tcl.bboard-procs.bboard_message_set_status.bboard_message_set_status {        begin
            bboard_message.set_status (
                message_id => :message_id,
                forum_id => :forum_id,
                status => :status
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/tcl/bboard-procs-oracle.xql}
dbqd.bboard.tcl.bboard-procs.bboard_subscribe_forum.forum_subscribe {dbqd.bboard.tcl.bboard-procs.bboard_subscribe_forum.forum_subscribe {        begin
            bboard_forum.subscribe (
                forum_id => :forum_id,
                subscriber_id => :subscriber_id
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/tcl/bboard-procs-oracle.xql}
dbqd.bboard.tcl.bboard-procs.bboard_subscribe_category.category_subscribe {dbqd.bboard.tcl.bboard-procs.bboard_subscribe_category.category_subscribe {        begin
            bboard_category.subscribe (
                category_id => :category_id,
                subscriber_id => :subscriber_id
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/tcl/bboard-procs-oracle.xql}
dbqd.bboard.tcl.bboard-procs.bboard_subscribe_thread.thread_subscribe {dbqd.bboard.tcl.bboard-procs.bboard_subscribe_thread.thread_subscribe {        begin
            bboard_message.subscribe (
                thread_id => :thread_id,
                subscriber_id => :subscriber_id
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/tcl/bboard-procs-oracle.xql}
dbqd.bboard.tcl.bboard-procs.bboard_message_subscribed_p.check_message_subscribed {dbqd.bboard.tcl.bboard-procs.bboard_message_subscribed_p.check_message_subscribed {	select count(*) as subscribed_p from bboard_thread_subscribers
	where subscriber_id = :user_id
	      and thread_id in (select message_id
	                        from acs_messages b
	                        connect by b.message_id = prior b.reply_to 
	                        start with message_id = :message_id)

    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/tcl/bboard-procs-oracle.xql}
dbqd.bboard.tcl.bboard-procs.bboard_message_forum.bboard_forum_containing_message {dbqd.bboard.tcl.bboard-procs.bboard_message_forum.bboard_forum_containing_message {	select bboard_forum.forum_containing_message(:message_id) as forum_id
	  from dual
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/tcl/bboard-procs-oracle.xql}
dbqd.bboard.tcl.bboard-procs.bboard_message_url.first_ancestor {dbqd.bboard.tcl.bboard-procs.bboard_message_url.first_ancestor {	select acs_message.first_ancestor(:message_id) as ancestor_id 
            from dual
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/tcl/bboard-procs-oracle.xql}
dbqd.bboard.tcl.bboard-procs.bboard_attach_image.insert_image {dbqd.bboard.tcl.bboard-procs.bboard_attach_image.insert_image {             begin
                :1 := acs_message.new_image (
                    message_id     => :message_id,
                    image_id       => :file_id,
                    file_name      => :short_filename,
                    title          => :title,
                    mime_type      => :mime_type,
                    content        => empty_blob(),
                    width          => :width,
                    height         => :height,
                    creation_user  => :user_id,
                    creation_ip    => :creation_ip,
                    is_live        => 't'
            );
            end;
        
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/tcl/bboard-procs-oracle.xql}
dbqd.bboard.tcl.bboard-procs.bboard_attach_image.get_revision {dbqd.bboard.tcl.bboard-procs.bboard_attach_image.get_revision {        select content_item.get_latest_revision(:file_id) as revision_id
        from dual
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/tcl/bboard-procs-oracle.xql}
dbqd.bboard.tcl.bboard-procs.bboard_attach_image.set_content_size {dbqd.bboard.tcl.bboard-procs.bboard_attach_image.set_content_size {	update cr_revisions
 	set filename = :filename,
	    content_length = :file_size
	where revision_id = :revision_id
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/tcl/bboard-procs-oracle.xql}
dbqd.bboard.tcl.bboard-procs.bboard_attach_file.insert_file {dbqd.bboard.tcl.bboard-procs.bboard_attach_file.insert_file {            begin
                :1 := acs_message.new_file (
                    message_id     => :message_id,
                    file_id        => :file_id,
                    file_name      => :short_filename,
                    title          => :title,
                    mime_type      => :mime_type,
                    content        => empty_blob(),
                    creation_user  => :user_id,
                    creation_ip    => :creation_ip,
                    is_live        => 't'
            );
            end;
        
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/tcl/bboard-procs-oracle.xql}
dbqd.bboard.tcl.bboard-procs.bboard_attach_file.get_revision {dbqd.bboard.tcl.bboard-procs.bboard_attach_file.get_revision {        select content_item.get_latest_revision(:file_id) as revision_id
        from dual
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/tcl/bboard-procs-oracle.xql}
dbqd.bboard.tcl.bboard-procs.bboard_attach_file.set_content_size {dbqd.bboard.tcl.bboard-procs.bboard_attach_file.set_content_size {	update cr_revisions
 	set filename = :filename,
	    content_length = :file_size
	where revision_id = :revision_id
      
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/tcl/bboard-procs-oracle.xql}
dbqd.bboard.tcl.bboard-procs.bboard_delete_attachment.is_file_image {dbqd.bboard.tcl.bboard-procs.bboard_delete_attachment.is_file_image {	select image_id
            from images
            where image_id = content_item.get_latest_revision(:file_id)
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/tcl/bboard-procs-oracle.xql}
dbqd.bboard.tcl.bboard-procs.bboard_delete_attachment.delete_image {dbqd.bboard.tcl.bboard-procs.bboard_delete_attachment.delete_image {	    begin
	        acs_message.delete_image(:file_id);
	    end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/tcl/bboard-procs-oracle.xql}
dbqd.bboard.tcl.bboard-procs.bboard_delete_attachment.delete_file {dbqd.bboard.tcl.bboard-procs.bboard_delete_attachment.delete_file {	    begin
   	        acs_message.delete_file(:file_id);
	    end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/tcl/bboard-procs-oracle.xql}
dbqd.bboard.tcl.bboard-procs.bboard_garbage_collect.clear_revision_references {dbqd.bboard.tcl.bboard-procs.bboard_garbage_collect.clear_revision_references {update cr_items 
   set latest_revision=null, live_revision=null
 where item_id = -1;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/tcl/bboard-procs-oracle.xql}
dbqd.bboard.tcl.bboard-procs.bboard_garbage_collect.bboard_alert_clean {dbqd.bboard.tcl.bboard-procs.bboard_garbage_collect.bboard_alert_clean {	declare
	    cursor alerts_cursor is
 
 	    select object_id
 	         from acs_objects
 	         where object_id in (select object_id
                                       from acs_objects
                                      where object_type = 'bboard_message'
                  	              start with context_id in (select forum_id
                                                                  from bboard_forums)
 	                              connect by prior object_id = context_id)
 	               and object_id not in (select message_id
 	                                       from bboard_forum_message_map)
             order by object_id desc;
	begin
  	    for alert_val in alerts_cursor loop
	        bboard_message.remove(alert_val.object_id);
	    end loop;
	end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/tcl/bboard-procs-oracle.xql}
dbqd.bboard.tcl.bboard-procs.bboard_schedule_sends.thread_subscribers {dbqd.bboard.tcl.bboard-procs.bboard_schedule_sends.thread_subscribers {        select subscriber_id as recipient_id, thread_id as grouping_id,
               sysdate as wait_until
          from bboard_thread_subscribers s
          where s.thread_id in (select message_id 
                                  from acs_messages
                                 start with message_id = :message_id
                               connect by message_id = prior reply_to)
            and s.subscriber_id in (select party_id 
                                      from all_object_party_privilege_map 
                                     where object_id = :message_id 
                                       and privilege = 'bboard_read_message')
  } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/tcl/bboard-procs-oracle.xql}
dbqd.bboard.tcl.bboard-procs.bboard_schedule_sends.category_subscribers {dbqd.bboard.tcl.bboard-procs.bboard_schedule_sends.category_subscribers {	select s.subscriber_id as recipient_id, s.category_id as grouping_id,
	       sysdate as wait_until
	  from bboard_category_subscribers s, bboard_category_message_map m
	  where m.message_id = :message_id
	    and s.category_id = m.category_id
            and s.subscriber_id in (select party_id 
                                      from acs_object_party_privilege_map 
                                     where object_id = :message_id 
                                       and privilege = 'bboard_read_message')
  } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/tcl/bboard-procs-oracle.xql}
dbqd.bboard.tcl.bboard-procs.bboard_schedule_sends.forum_subscribers {dbqd.bboard.tcl.bboard-procs.bboard_schedule_sends.forum_subscribers {        select s.subscriber_id as recipient_id, s.forum_id as grouping_id,
               sysdate as wait_until
            from bboard_forum_subscribers s, bboard_forum_message_map m
            where m.message_id = :message_id
              and s.forum_id = m.forum_id
              and s.subscriber_id in (select party_id 
                                        from acs_object_party_privilege_map 
                                       where object_id = :message_id 
                                         and privilege = 'bboard_read_message')
  } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/tcl/bboard-procs-oracle.xql}
dbqd.bboard.tcl.bboard-procs.bboard_forum_get.forum_get {dbqd.bboard.tcl.bboard-procs.bboard_forum_get.forum_get {        select * from bboard_forums where forum_id = :forum_id
    
      } {} {} {} F:/temp/openacs-4/packages/bboard/tcl/bboard-procs.xql}
dbqd.bboard.tcl.bboard-procs.bboard_category_get.category_get {dbqd.bboard.tcl.bboard-procs.bboard_category_get.category_get {        select * from bboard_categories where category_id = :category_id
    
      } {} {} {} F:/temp/openacs-4/packages/bboard/tcl/bboard-procs.xql}
dbqd.bboard.tcl.bboard-procs.bboard_message_new.message_new_revision {dbqd.bboard.tcl.bboard-procs.bboard_message_new.message_new_revision {        select live_revision as revision_id
            from cr_items
            where item_id = :message_id
        for update
    
      } {} {} {} F:/temp/openacs-4/packages/bboard/tcl/bboard-procs.xql}
dbqd.bboard.tcl.bboard-procs.bboard_message_set.message_revision {dbqd.bboard.tcl.bboard-procs.bboard_message_set.message_revision {        select live_revision as revision_id from cr_items
            where item_id = :message_id
            for update
    
      } {} {} {} F:/temp/openacs-4/packages/bboard/tcl/bboard-procs.xql}
dbqd.bboard.tcl.bboard-procs.bboard_message_get.message_get {dbqd.bboard.tcl.bboard-procs.bboard_message_get.message_get {        select * from acs_messages_all where message_id = :message_id
    
      } {} {} {} F:/temp/openacs-4/packages/bboard/tcl/bboard-procs.xql}
dbqd.bboard.tcl.bboard-procs.bboard_unsubscribe_forum.forum_unsubscribe {dbqd.bboard.tcl.bboard-procs.bboard_unsubscribe_forum.forum_unsubscribe {        delete from bboard_forum_subscribers
            where forum_id = :forum_id
                and subscriber_id = :subscriber_id
    
      } {} {} {} F:/temp/openacs-4/packages/bboard/tcl/bboard-procs.xql}
dbqd.bboard.tcl.bboard-procs.bboard_unsubscribe_category.category_unsubscribe {dbqd.bboard.tcl.bboard-procs.bboard_unsubscribe_category.category_unsubscribe {        delete from bboard_category_subscribers
            where category_id = :category_id
                and subscriber_id = :subscriber_id
    
      } {} {} {} F:/temp/openacs-4/packages/bboard/tcl/bboard-procs.xql}
dbqd.bboard.tcl.bboard-procs.bboard_unsubscribe_thread.thread_unsubscribe {dbqd.bboard.tcl.bboard-procs.bboard_unsubscribe_thread.thread_unsubscribe {        delete from bboard_thread_subscribers
            where thread_id = :thread_id
                and subscriber_id = :subscriber_id
    
      } {} {} {} F:/temp/openacs-4/packages/bboard/tcl/bboard-procs.xql}
dbqd.bboard.tcl.bboard-procs.bboard_category_subscribed_p.check_category_subscribed {dbqd.bboard.tcl.bboard-procs.bboard_category_subscribed_p.check_category_subscribed {        select count(*) as subscribed_p from bboard_category_subscribers
            where category_id = :category_id
                and subscriber_id = :user_id
    
      } {} {} {} F:/temp/openacs-4/packages/bboard/tcl/bboard-procs.xql}
dbqd.bboard.tcl.bboard-procs.bboard_category_subscribed_p.check_category_forums_subscribed {dbqd.bboard.tcl.bboard-procs.bboard_category_subscribed_p.check_category_forums_subscribed {		select count(*) as subscribed_p from bboard_forum_subscribers
     	            where subscriber_id = :user_id
		        and forum_id in (select bc.forum_id
		                            from bboard_categories bc
  		                            where bc.category_id = 
                                                  :category_id)
	    
      } {} {} {} F:/temp/openacs-4/packages/bboard/tcl/bboard-procs.xql}
dbqd.bboard.tcl.bboard-procs.bboard_forum_subscribed_p.check_forum_subscribed {dbqd.bboard.tcl.bboard-procs.bboard_forum_subscribed_p.check_forum_subscribed {        select count(*) as subscribed_p 
            from bboard_forum_subscribers
            where forum_id = :forum_id
                and subscriber_id = :user_id
    
      } {} {} {} F:/temp/openacs-4/packages/bboard/tcl/bboard-procs.xql}
dbqd.bboard.tcl.bboard-procs.bboard_message_subscribed_p.check_message_cats_subscribed {dbqd.bboard.tcl.bboard-procs.bboard_message_subscribed_p.check_message_cats_subscribed {		select count(*) as subscribed_p 
		from bboard_category_subscribers
		where subscriber_id = :user_id
		      and category_id in (select bcmm.category_id
		                          from bboard_category_message_map bcmm
		                          where bcmm.message_id = :message_id)

	    
      } {} {} {} F:/temp/openacs-4/packages/bboard/tcl/bboard-procs.xql}
dbqd.bboard.tcl.bboard-procs.bboard_message_subscribed_p.check_message_forums_subscribed {dbqd.bboard.tcl.bboard-procs.bboard_message_subscribed_p.check_message_forums_subscribed {		    select count(*) as subscribed_p 
		    from bboard_forum_subscribers
		    where subscriber_id = :user_id
		          and forum_id in (select bfmm.forum_id
   		                           from bboard_forum_message_map bfmm
		                           where bfmm.message_id = :message_id)
		
      } {} {} {} F:/temp/openacs-4/packages/bboard/tcl/bboard-procs.xql}
dbqd.bboard.tcl.bboard-procs.bboard_forum_moderated_p.forum_moderated_p {dbqd.bboard.tcl.bboard-procs.bboard_forum_moderated_p.forum_moderated_p {	select moderated_p
  	  from bboard_forums
	  where forum_id = :forum_id
    
      } {} {} {} F:/temp/openacs-4/packages/bboard/tcl/bboard-procs.xql}
dbqd.bboard.tcl.bboard-procs.bboard_check_and_register_mime_type.check_mime_type {dbqd.bboard.tcl.bboard-procs.bboard_check_and_register_mime_type.check_mime_type {	select mime_type
	    from cr_mime_types
	    where mime_type = :type
    
      } {} {} {} F:/temp/openacs-4/packages/bboard/tcl/bboard-procs.xql}
dbqd.bboard.tcl.bboard-procs.bboard_check_and_register_mime_type.insert_mime {dbqd.bboard.tcl.bboard-procs.bboard_check_and_register_mime_type.insert_mime {		insert into cr_mime_types (mime_type)
		values (:type)
	    
      } {} {} {} F:/temp/openacs-4/packages/bboard/tcl/bboard-procs.xql}
dbqd.bboard.tcl.bboard-procs.bboard_alert_message.forum_info {dbqd.bboard.tcl.bboard-procs.bboard_alert_message.forum_info {	select short_name as forum_name
	    from bboard_forums
	    where forum_id = :forum_id
    
      } {} {} {} F:/temp/openacs-4/packages/bboard/tcl/bboard-procs.xql}
dbqd.bboard.tcl.bboard-procs.bboard_alert_one_mesg.bboard_mesg_info {dbqd.bboard.tcl.bboard-procs.bboard_alert_one_mesg.bboard_mesg_info {	select reply_to, sender, title, mime_type, content, email,
               first_names||' '||last_name as full_name
            from acs_messages_all, persons, parties
            where message_id = :message_id
                  and person_id = sender
	          and party_id = person_id
    
      } {} {} {} F:/temp/openacs-4/packages/bboard/tcl/bboard-procs.xql}
dbqd.bboard.tcl.bboard-procs.bboard_alert_message.forum_info {dbqd.bboard.tcl.bboard-procs.bboard_alert_message.forum_info {	select short_name as forum_name
	    from bboard_forums
	    where forum_id = :forum_id
    
      } {} {} {} F:/temp/openacs-4/packages/bboard/tcl/bboard-procs.xql}
dbqd.bboard.www.category-delete-2.delete_category {dbqd.bboard.www.category-delete-2.delete_category {    begin
        bboard_category.delete (:category_id);
    end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/www/category-delete-2-oracle.xql}
dbqd.bboard.www.category-delete-2.forum_id {dbqd.bboard.www.category-delete-2.forum_id {    select forum_id from bboard_categories where category_id = :category_id

      } {} {} {} F:/temp/openacs-4/packages/bboard/www/category-delete-2.xql}
dbqd.bboard.www.category-delete.forum_short_name_id {dbqd.bboard.www.category-delete.forum_short_name_id {    select f.short_name as forum_name, f.forum_id
        from bboard_forums f, bboard_categories c
        where c.category_id = :category_id
          and c.forum_id = f.forum_id

      } {} {} {} F:/temp/openacs-4/packages/bboard/www/category-delete.xql}
dbqd.bboard.www.category-delete.category_short_name {dbqd.bboard.www.category-delete.category_short_name {    select short_name as category_name
        from bboard_categories
        where category_id = :category_id

      } {} {} {} F:/temp/openacs-4/packages/bboard/www/category-delete.xql}
dbqd.bboard.www.category-delete.category_message_count {dbqd.bboard.www.category-delete.category_message_count {    select count(*) as message_count
        from bboard_category_message_map
        where category_id = :category_id

      } {} {} {} F:/temp/openacs-4/packages/bboard/www/category-delete.xql}
dbqd.bboard.www.category-edit.category_info {dbqd.bboard.www.category-edit.category_info {    select f.short_name as forum_name, f.forum_id, c.short_name
      from bboard_forums f, bboard_categories c
      where c.category_id = :category_id
        and f.forum_id = c.forum_id

      } {} {} {} F:/temp/openacs-4/packages/bboard/www/category-edit.xql}
dbqd.bboard.www.category-new.forum_short_name {dbqd.bboard.www.category-new.forum_short_name {    select short_name as forum_name from bboard_forums
      where forum_id = :forum_id

      } {} {} {} F:/temp/openacs-4/packages/bboard/www/category-new.xql}
dbqd.bboard.www.category-subscribe.category_forum {dbqd.bboard.www.category-subscribe.category_forum {    select forum_id from bboard_categories where category_id = :category_id

      } {} {} {} F:/temp/openacs-4/packages/bboard/www/category-subscribe.xql}
dbqd.bboard.www.forum-by-category.categories_select_none {dbqd.bboard.www.forum-by-category.categories_select_none {    select 1 from dual where 0 = 1

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/www/forum-by-category-oracle.xql}
dbqd.bboard.www.forum-by-category.messages_select_by_cat {dbqd.bboard.www.forum-by-category.messages_select_by_cat {    select message_id, title, num_replies,
         first_names||' '||last_name as full_name,
  	 to_char(last_reply_date,'MM/DD/YY hh12:Mi am') as last_updated
    from bboard_messages_by_category b, persons
    where person_id = sender
        and reply_to is null
        and forum_id = :forum_id
  	$category_sql
        $moderated_sql
    order by sent_date desc
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/www/forum-by-category-oracle.xql}
dbqd.bboard.www.forum-by-category.unapproved_none {dbqd.bboard.www.forum-by-category.unapproved_none {	select 1 from dual where 1 = 0
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/www/forum-by-category-oracle.xql}
dbqd.bboard.www.forum-by-category.rejected_none {dbqd.bboard.www.forum-by-category.rejected_none {	select 1 from dual where 1 = 0
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/www/forum-by-category-oracle.xql}
dbqd.bboard.www.forum-by-category.forum_info {dbqd.bboard.www.forum-by-category.forum_info {    select f.short_name as forum_name, f.moderated_p
        from bboard_forums f
        where f.forum_id = :forum_id

      } {} {} {} F:/temp/openacs-4/packages/bboard/www/forum-by-category.xql}
dbqd.bboard.www.forum-by-category.category_info {dbqd.bboard.www.forum-by-category.category_info {        select f.forum_id, f.short_name as forum_name, f.moderated_p
            from bboard_categories c, bboard_forums f
            where c.category_id = :category_id
                and c.forum_id = f.forum_id
    
      } {} {} {} F:/temp/openacs-4/packages/bboard/www/forum-by-category.xql}
dbqd.bboard.www.forum-by-category.category_info {dbqd.bboard.www.forum-by-category.category_info {        select short_name as category_name from bboard_categories
          where category_id = :category_id    
      } {} {} {} F:/temp/openacs-4/packages/bboard/www/forum-by-category.xql}
dbqd.bboard.www.forum-by-category.messages_select_unmoderated {dbqd.bboard.www.forum-by-category.messages_select_unmoderated {	select message_id, title, num_replies,
               first_names||' '||last_name as full_name
	  from bboard_messages_by_category, persons
	  where category_id = :category_id
	    and person_id = sender
	    and reply_to is null
	    and status = 'unmoderated'
    
      } {} {} {} F:/temp/openacs-4/packages/bboard/www/forum-by-category.xql}
dbqd.bboard.www.forum-by-category.rejected_messages_select {dbqd.bboard.www.forum-by-category.rejected_messages_select {	select message_id, title, num_replies,
               first_names||' '||last_name as full_name
	  from bboard_messages_by_category, persons
	  where category_id = :category_id
	    and person_id = sender
	    and reply_to is null
	    and status = 'rejected'
    
      } {} {} {} F:/temp/openacs-4/packages/bboard/www/forum-by-category.xql}
dbqd.bboard.www.forum-delete-2.categories_delete {dbqd.bboard.www.forum-delete-2.categories_delete {	declare
	    cursor category_cursor is
	        select distinct category_id
                    from bboard_categories c
                    where c.forum_id = :forum_id;
        begin
	    for category_val in category_cursor loop
 
 	        delete from acs_permissions 
                   where object_id = category_val.category_id;

                bboard_category.delete(category_val.category_id);
            end loop;
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/www/forum-delete-2-oracle.xql}
dbqd.bboard.www.forum-delete-2.forum_delete {dbqd.bboard.www.forum-delete-2.forum_delete {	begin
	    bboard_forum.delete (:forum_id);
	end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/www/forum-delete-2-oracle.xql}
dbqd.bboard.www.forum-delete-2.messages_delete {dbqd.bboard.www.forum-delete-2.messages_delete {        delete from bboard_forum_message_map 
         where forum_id = :forum_id

      } {} {} {} F:/temp/openacs-4/packages/bboard/www/forum-delete-2.xql}
dbqd.bboard.www.forum-delete-2.permissions_delete {dbqd.bboard.www.forum-delete-2.permissions_delete {	delete from acs_permissions 
  	  where object_id = :forum_id

      } {} {} {} F:/temp/openacs-4/packages/bboard/www/forum-delete-2.xql}
dbqd.bboard.www.forum-delete.forum_info {dbqd.bboard.www.forum-delete.forum_info {    select short_name as forum_name, charter as forum_charter
    from bboard_forums
    where forum_id = :forum_id

      } {} {} {} F:/temp/openacs-4/packages/bboard/www/forum-delete.xql}
dbqd.bboard.www.forum-delete.forum_message_count {dbqd.bboard.www.forum-delete.forum_message_count {    select count(*) as message_count
    from bboard_forum_message_map bfmm
    where bfmm.forum_id = :forum_id

      } {} {} {} F:/temp/openacs-4/packages/bboard/www/forum-delete.xql}
dbqd.bboard.www.forum-edit.forum_info {dbqd.bboard.www.forum-edit.forum_info {    select short_name, charter, moderated_p from bboard_forums
      where forum_id = :forum_id

      } {} {} {} F:/temp/openacs-4/packages/bboard/www/forum-edit.xql}
dbqd.bboard.www.forum-move-2.update_bboard_contexts {dbqd.bboard.www.forum-move-2.update_bboard_contexts {	update acs_objects
	    set context_id = :dest_forum_id
	    where context_id = :forum_id
	          and (object_type = 'bboard_message' or
                       object_type = 'bboard_category')
    
      } {} {} {} F:/temp/openacs-4/packages/bboard/www/forum-move-2.xql}
dbqd.bboard.www.forum-move-2.move_bboard_messages {dbqd.bboard.www.forum-move-2.move_bboard_messages {        update bboard_forum_message_map 
            set forum_id = :dest_forum_id
            where forum_id = :forum_id
    
      } {} {} {} F:/temp/openacs-4/packages/bboard/www/forum-move-2.xql}
dbqd.bboard.www.forum-move-2.move_bboard_categories {dbqd.bboard.www.forum-move-2.move_bboard_categories {	update bboard_categories
	    set forum_id = :dest_forum_id
            where forum_id = :forum_id
    
      } {} {} {} F:/temp/openacs-4/packages/bboard/www/forum-move-2.xql}
dbqd.bboard.www.forum-move.forum_info {dbqd.bboard.www.forum-move.forum_info {    select short_name as forum_name, charter, moderated_p from bboard_forums
      where forum_id = :forum_id

      } {} {} {} F:/temp/openacs-4/packages/bboard/www/forum-move.xql}
dbqd.bboard.www.forum-move.allowed_target_forums {dbqd.bboard.www.forum-move.allowed_target_forums {    select forum_id, short_name
      from bboard_forums
      where not forum_id = :forum_id
        and exists (select 1 from all_object_party_privilege_map
                      where object_id = forum_id
                        and party_id in (:user_id, -1)
                        and privilege = 'admin')


      } {} {} {} F:/temp/openacs-4/packages/bboard/www/forum-move.xql}
dbqd.bboard.www.forum.forum_info {dbqd.bboard.www.forum.forum_info {    select short_name as forum_name, moderated_p,
       acs_permission.permission_p(:forum_id, :user_id, 'admin') as admin_p,
       acs_permission.permission_p(:forum_id, :user_id, 'bboard_create_category') 
          as category_create_p
      from bboard_forums
     where forum_id = :forum_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/www/forum-oracle.xql}
dbqd.bboard.www.forum.messages_select {dbqd.bboard.www.forum.messages_select {	select message_id, title, num_replies,
               first_names||' '||last_name as full_name,
	       to_char(last_reply_date,'MM/DD/YY hh12:Mi am') as last_updated
          from bboard_messages_all b, persons
          where forum_id = :forum_id
	    and sent_date > case when :last_n_days = 0 then '1976-01-01' else to_char(sysdate - :last_n_days) end
	    and person_id = sender
            and reply_to is null
	order by sent_date desc
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/www/forum-oracle.xql}
dbqd.bboard.www.forum.categories_select {dbqd.bboard.www.forum.categories_select {	select c.category_id, c.short_name,
             count(m.message_id) as message_count
	  from bboard_categories c,
	       (select c.category_id, c.message_id
	          from bboard_category_message_map c,
	               bboard_forum_message_map f
	          where c.message_id = f.message_id
                    and f.forum_id = :forum_id) m
	  where c.forum_id = :forum_id
            and m.category_id(+) = c.category_id
	    and (m.message_id is null 
                or m.message_id in (select f.message_id
                                     from bboard_forum_message_map f
                                     where f.forum_id = :forum_id))
	  group by c.category_id, short_name
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/www/forum-oracle.xql}
dbqd.bboard.www.forum.messages_select_approved {dbqd.bboard.www.forum.messages_select_approved {	select message_id, title, num_replies,
               first_names||' '||last_name as full_name,
	       to_char(last_reply_date,'MM/DD/YY hh12:Mi am') as last_updated
          from bboard_messages_all b, persons
          where forum_id = :forum_id
	    and sent_date > case when :last_n_days = 0 then '1976-01-01' else to_char(sysdate - :last_n_days) end
	    and person_id = sender
            and reply_to is null
	    and status = 'approved'
	order by sent_date desc
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/www/forum-oracle.xql}
dbqd.bboard.www.forum.categories_select_approved {dbqd.bboard.www.forum.categories_select_approved {	select c.category_id, c.short_name,
             count(m.message_id) as message_count
	  from bboard_categories c,
	       (select c.category_id, c.message_id
	          from bboard_category_message_map c,
	               bboard_forum_message_map f
	          where c.message_id = f.message_id
                    and f.status = 'approved'
                    and f.forum_id = :forum_id) m
	  where c.forum_id = :forum_id
            and m.category_id(+) = c.category_id
	    and (m.message_id is null 
                or m.message_id in (select f.message_id
                                     from bboard_forum_message_map f
                                     where f.forum_id = :forum_id))
	  group by c.category_id, short_name
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/www/forum-oracle.xql}
dbqd.bboard.www.forum.unapproved_none {dbqd.bboard.www.forum.unapproved_none {	select 1 from dual where 1 = 0
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/www/forum-oracle.xql}
dbqd.bboard.www.forum.rejected_none {dbqd.bboard.www.forum.rejected_none {	select 1 from dual where 1 = 0
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/www/forum-oracle.xql}
dbqd.bboard.www.forum.uncategorized_count {dbqd.bboard.www.forum.uncategorized_count {	select count(*) as uncategorized_count
            from bboard_forum_message_map msg
	    where forum_id = :forum_id
              and not exists (select 1
                              from bboard_category_message_map cat
                              where msg.message_id = cat.message_id)
    
      } {} {} {} F:/temp/openacs-4/packages/bboard/www/forum.xql}
dbqd.bboard.www.forum.uncategorized_approved_count {dbqd.bboard.www.forum.uncategorized_approved_count {	select count(*) as uncategorized_count
            from bboard_forum_message_map msg
	    where forum_id = :forum_id
              and status = 'approved'
              and not exists (select 1
                              from bboard_category_message_map cat
                              where msg.message_id = cat.message_id)
    
      } {} {} {} F:/temp/openacs-4/packages/bboard/www/forum.xql}
dbqd.bboard.www.forum.messages_select_unmoderated {dbqd.bboard.www.forum.messages_select_unmoderated {	select message_id, title, num_replies,
               first_names||' '||last_name as full_name
	  from bboard_messages_all, persons
	  where forum_id = :forum_id
	    and person_id = sender
	    and reply_to is null
	    and status = 'unmoderated'

      } {} {} {} F:/temp/openacs-4/packages/bboard/www/forum.xql}
dbqd.bboard.www.forum.rejected_messages_select {dbqd.bboard.www.forum.rejected_messages_select {	select message_id, title, num_replies,
               first_names||' '||last_name as full_name
	  from bboard_messages_all, persons
	  where forum_id = :forum_id
	    and person_id = sender
	    and reply_to is null
	    and status = 'rejected'
    
      } {} {} {} F:/temp/openacs-4/packages/bboard/www/forum.xql}
dbqd.bboard.www.index.forums_select {dbqd.bboard.www.index.forums_select {    select forum_id, short_name, moderated_p, charter 
      from bboard_forums f
      where bboard_id = :package_id
        and acs_permission.permission_p(forum_id,:user_id,'bboard_read_forum') = 't'
    order by short_name

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/www/index-oracle.xql}
dbqd.bboard.www.message-approve.sender_info {dbqd.bboard.www.message-approve.sender_info {    select sender from acs_messages where message_id = :message_id

      } {} {} {} F:/temp/openacs-4/packages/bboard/www/message-approve.xql}
dbqd.bboard.www.message-delete-2.bboard_delete_threads {dbqd.bboard.www.message-delete-2.bboard_delete_threads {	delete from bboard_forum_message_map bfm
	    where message_id in (select message_id
                                     from acs_messages m
                                     connect by prior message_id = reply_to
                                     start with message_id = :message_id)
                  and exists (select 1 from all_object_party_privilege_map
                                  where object_id = bfm.message_id
                                        and party_id in (:user_id, -1)
                                        and privilege = 'bboard_delete_message')

    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/www/message-delete-2-oracle.xql}
dbqd.bboard.www.message-delete.message_info {dbqd.bboard.www.message-delete.message_info {        select m.message_id, m.reply_to, m.title,
               m.sent_date, m.mime_type, m.content, 
               p.first_names ||' '||p.last_name as full_name
            from acs_messages_all m, persons p, bboard_forum_message_map f
            where m.message_id = :message_id
                and f.message_id = :message_id
                and f.forum_id = :forum_id
                and p.person_id = m.sender
    
      } {} {} {} F:/temp/openacs-4/packages/bboard/www/message-delete.xql}
dbqd.bboard.www.message-delete.forum_short_name {dbqd.bboard.www.message-delete.forum_short_name {    select short_name as forum_name from bboard_forums
      where forum_id = :forum_id

      } {} {} {} F:/temp/openacs-4/packages/bboard/www/message-delete.xql}
dbqd.bboard.www.message-edit-2.forum_short_name {dbqd.bboard.www.message-edit-2.forum_short_name {    select short_name as forum_name from bboard_forums
      where forum_id = :forum_id

      } {} {} {} F:/temp/openacs-4/packages/bboard/www/message-edit-2.xql}
dbqd.bboard.www.message-edit-2.forum_short_name {dbqd.bboard.www.message-edit-2.forum_short_name {    select short_name as forum_name from bboard_forums
      where forum_id = :forum_id

      } {} {} {} F:/temp/openacs-4/packages/bboard/www/message-edit-2.xql}
dbqd.bboard.www.message-edit.message_info {dbqd.bboard.www.message-edit.message_info {    select message_id, reply_to, title, mime_type, content
        from acs_messages_all m
        where message_id = :message_id

      } {} {} {} F:/temp/openacs-4/packages/bboard/www/message-edit.xql}
dbqd.bboard.www.message-edit.first_category {dbqd.bboard.www.message-edit.first_category {    select min(category_id) as category_id from bboard_category_message_map
        where message_id = :message_id
        group by message_id

      } {} {} {} F:/temp/openacs-4/packages/bboard/www/message-edit.xql}
dbqd.bboard.www.message-edit.forum_short_name {dbqd.bboard.www.message-edit.forum_short_name {    select short_name as forum_name from bboard_forums
      where forum_id = :forum_id

      } {} {} {} F:/temp/openacs-4/packages/bboard/www/message-edit.xql}
dbqd.bboard.www.message-edit.quote_info {dbqd.bboard.www.message-edit.quote_info {    select m.reply_to, m.title, m.sent_date,
           m.mime_type, m.content, 
           p.first_names||' '||p.last_name as full_name
      from acs_messages_all m, persons p
      where message_id = :reply_to
        and person_id = sender

      } {} {} {} F:/temp/openacs-4/packages/bboard/www/message-edit.xql}
dbqd.bboard.www.message-edit.category_list {dbqd.bboard.www.message-edit.category_list {    select c.category_id, c.short_name
      from bboard_categories c
      where forum_id = :forum_id

      } {} {} {} F:/temp/openacs-4/packages/bboard/www/message-edit.xql}
dbqd.bboard.www.message-mail-2.forward_queue {dbqd.bboard.www.message-mail-2.forward_queue {        begin
            acs_message.send (
                message_id => :new_message_id,
                to_address => :email,
                grouping_id => :new_message_id,
                wait_until => sysdate
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/www/message-mail-2-oracle.xql}
dbqd.bboard.www.message-mail-2.user_email {dbqd.bboard.www.message-mail-2.user_email {        select email as user_email from parties where party_id = :user_id
    
      } {} {} {} F:/temp/openacs-4/packages/bboard/www/message-mail-2.xql}
dbqd.bboard.www.message-mail-2.message_info {dbqd.bboard.www.message-mail-2.message_info {        select reply_to, sender, title, mime_type, content
            from acs_messages_all
            where message_id = :message_id
    
      } {} {} {} F:/temp/openacs-4/packages/bboard/www/message-mail-2.xql}
dbqd.bboard.www.message-mail.forum_short_name {dbqd.bboard.www.message-mail.forum_short_name {    select short_name as forum_name from bboard_forums
      where forum_id = :forum_id

      } {} {} {} F:/temp/openacs-4/packages/bboard/www/message-mail.xql}
dbqd.bboard.www.message-mail.sender_email {dbqd.bboard.www.message-mail.sender_email {    select email as sender_email from parties
        where party_id = :user_id

      } {} {} {} F:/temp/openacs-4/packages/bboard/www/message-mail.xql}
dbqd.bboard.www.message-mail.message_info {dbqd.bboard.www.message-mail.message_info {    select reply_to, title, sent_date,
           mime_type, content, 
           first_names||' '||last_name as full_name
      from acs_messages_all m, persons p
      where message_id = :message_id
        and person_id = sender

      } {} {} {} F:/temp/openacs-4/packages/bboard/www/message-mail.xql}
dbqd.bboard.www.message-move-2.update_bboard_contexts {dbqd.bboard.www.message-move-2.update_bboard_contexts {	update acs_objects
	    set context_id = :dest_forum_id
	    where context_id = :forum_id
	          and object_type = 'bboard_message'
                  and object_id in (select message_id
                                        from acs_messages m
                                        connect by prior message_id = reply_to
                                        start with message_id = :message_id) 
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/www/message-move-2-oracle.xql}
dbqd.bboard.www.message-move-2.move_bboard_messages {dbqd.bboard.www.message-move-2.move_bboard_messages {        update bboard_forum_message_map 
            set forum_id = :dest_forum_id
            where forum_id = :forum_id
                  and message_id in (select message_id
                                         from acs_messages m
                                         connect by prior message_id = reply_to
                                         start with message_id = :message_id) 
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/www/message-move-2-oracle.xql}
dbqd.bboard.www.message-move.message_info {dbqd.bboard.www.message-move.message_info {    select p.first_names ||' '|| p.last_name as sender_name, b.title,
           b.mime_type as msg_mime_type, b.content
      from bboard_messages_all b, persons p
      where message_id = :message_id
            and b.sender = p.person_id

      } {} {} {} F:/temp/openacs-4/packages/bboard/www/message-move.xql}
dbqd.bboard.www.message-move.allowed_target_forums {dbqd.bboard.www.message-move.allowed_target_forums {    select forum_id, short_name
      from bboard_forums
      where not forum_id = :forum_id
        and exists (select 1 from all_object_party_privilege_map
                      where object_id = forum_id
                        and party_id = :user_id
                        and privilege = 'admin')


      } {} {} {} F:/temp/openacs-4/packages/bboard/www/message-move.xql}
dbqd.bboard.www.message-new-2.forum_short_name {dbqd.bboard.www.message-new-2.forum_short_name {    select short_name as forum_name from bboard_forums
      where forum_id = :forum_id

      } {} {} {} F:/temp/openacs-4/packages/bboard/www/message-new-2.xql}
dbqd.bboard.www.message-new-3.grant {dbqd.bboard.www.message-new-3.grant {	    begin
	    acs_permission.grant_permission(:message_id, :user_id, 'bboard_write_message');
	    end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/www/message-new-3-oracle.xql}
dbqd.bboard.www.message-new.forum_short_name {dbqd.bboard.www.message-new.forum_short_name {    select short_name as forum_name from bboard_forums
      where forum_id = :forum_id

      } {} {} {} F:/temp/openacs-4/packages/bboard/www/message-new.xql}
dbqd.bboard.www.message-new.quote_info {dbqd.bboard.www.message-new.quote_info {    select reply_to, title, sent_date,
           mime_type, content, 
           first_names||' '||last_name as full_name
      from acs_messages_all m, persons p
      where message_id = :reply_to
        and person_id = sender

      } {} {} {} F:/temp/openacs-4/packages/bboard/www/message-new.xql}
dbqd.bboard.www.message-new.quote_first_category {dbqd.bboard.www.message-new.quote_first_category {    select min(category_id) as category_id from bboard_category_message_map
      where message_id = :reply_to
      group by message_id

      } {} {} {} F:/temp/openacs-4/packages/bboard/www/message-new.xql}
dbqd.bboard.www.message-new.category_list {dbqd.bboard.www.message-new.category_list {    select category_id, short_name
      from bboard_categories
      where forum_id = :forum_id

      } {} {} {} F:/temp/openacs-4/packages/bboard/www/message-new.xql}
dbqd.bboard.www.message.forum_short_name {dbqd.bboard.www.message.forum_short_name {    select short_name as forum_name,
       acs_permission.permission_p(:forum_id, :user_id, 'admin') as admin_p,
       acs_permission.permission_p(:forum_id, :user_id, 'bboard_moderate_forum') 
         as moderate_p
      from bboard_forums
      where forum_id = :forum_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/www/message-oracle.xql}
dbqd.bboard.www.message.message_info {dbqd.bboard.www.message.message_info {  select message_id, reply_to, title, 
      to_char(sent_date, 'Month DD, YYYY HH:Mi am') as pretty_date, sender as user_id,
      mime_type, content, first_names||' '||last_name as full_name,
      acs_permission.permission_p(message_id, :user_id,
                                  'bboard_write_message') as write_p
    from acs_messages_all m, persons p
    where message_id = :message_id
      and person_id = sender

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/www/message-oracle.xql}
dbqd.bboard.www.message.message_replies {dbqd.bboard.www.message.message_replies {    select m.message_id, m.reply_to, m.title, m.mime_type, m.content, 
         to_char(m.sent_date,'Month DD, YYYY HH:Mi am') as pretty_date, sender as user_id,
         p.first_names||' '||p.last_name as full_name, 
         mt.depth - 1 as thread_depth, rownum,
         acs_permission.permission_p(m.message_id, :user_id,
                                  'bboard_write_message') as write_p
        from acs_messages_all m, persons p,
            (select message_id, level as depth, rownum as seqnum
                from acs_messages
                connect by prior message_id = reply_to
                start with message_id = :message_id) mt
        where m.message_id <> :message_id
            and p.person_id = m.sender
            and m.message_id = mt.message_id
            and m.message_id in (select bfmm.message_id 
                                     from bboard_forum_message_map bfmm
                                     where bfmm.forum_id = :forum_id)
    order by m.sent_date

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/www/message-oracle.xql}
dbqd.bboard.www.message-threaded.forum_short_name {dbqd.bboard.www.message-threaded.forum_short_name {    select short_name as forum_name,
       acs_permission.permission_p(:forum_id, :user_id, 'admin') as admin_p,
       acs_permission.permission_p(:forum_id, :user_id, 'bboard_moderate_forum') 
         as moderate_p
      from bboard_forums
      where forum_id = :forum_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/www/message-threaded-oracle.xql}
dbqd.bboard.www.message-threaded.messages_and_replies {dbqd.bboard.www.message-threaded.messages_and_replies {  select m.message_id, m.reply_to, m.title, m.sent_date, m.mime_type,
         to_char(m.sent_date, 'Month DD, YYYY HH:Mi am') as pretty_date,
         m.content, p.first_names||' '||p.last_name as full_name, 
         p.person_id as user_id,
         mt.depth - 1 as thread_depth,
      acs_permission.permission_p(m.message_id, :user_id,
                                  'bboard_write_message') as write_p
    from acs_messages_all m, persons p, 
      (select message_id, level as depth, rownum as seqnum
         from acs_messages im
         connect by prior message_id = reply_to
         start with message_id = :message_id) mt
    where p.person_id = m.sender
      and m.message_id = mt.message_id
      and m.message_id in (select bfmm.message_id 
                               from bboard_forum_message_map bfmm
                               where bfmm.forum_id = :forum_id)
      order by seqnum

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/www/message-threaded-oracle.xql}
dbqd.bboard.www.message-threaded.thread_title {dbqd.bboard.www.message-threaded.thread_title {    select title
      from acs_messages_all
      where message_id = :message_id

      } {} {} {} F:/temp/openacs-4/packages/bboard/www/message-threaded.xql}
dbqd.bboard.www.messages-by-user.user_info {dbqd.bboard.www.messages-by-user.user_info {    select first_names||' '||last_name as full_name
      from persons
      where person_id = :user_id

      } {} {} {} F:/temp/openacs-4/packages/bboard/www/messages-by-user.xql}
dbqd.bboard.www.messages-by-user.forum_info {dbqd.bboard.www.messages-by-user.forum_info {    select short_name as forum_name, moderated_p from bboard_forums
      where forum_id = :forum_id

      } {} {} {} F:/temp/openacs-4/packages/bboard/www/messages-by-user.xql}
dbqd.bboard.www.messages-by-user.messages_select {dbqd.bboard.www.messages-by-user.messages_select {        select title, num_replies, message_id,
               first_names||' '||last_name as full_name
        from bboard_messages_all, persons
        where sender = :user_id
              and forum_id = :forum_id
              and person_id = sender
    
      } {} {} {} F:/temp/openacs-4/packages/bboard/www/messages-by-user.xql}
dbqd.bboard.www.messages-by-user.messages_select {dbqd.bboard.www.messages-by-user.messages_select {        select title, num_replies, message_id,
               first_names||' '||last_name as full_name
        from bboard_messages_all, persons
        where sender = :user_id
              and forum_id = :forum_id
              and person_id = sender
    
      } {} {} {} F:/temp/openacs-4/packages/bboard/www/messages-by-user.xql}
dbqd.bboard.www.messages-by-user.alt_forums_select {dbqd.bboard.www.messages-by-user.alt_forums_select {    select forum_id, short_name
    from bboard_forums bf
    where not forum_id = :forum_id
          and bboard_id = :package_id
          and exists (select 1
                      from bboard_messages_all bma
                      where sender = :user_id 
                            and bma.forum_id = bf.forum_id)
          and exists (select 1 from all_object_party_privilege_map
                          where object_id = bf.forum_id
                            and party_id = :current_user_id
                            and privilege = 'bboard_read_forum')

      } {} {} {} F:/temp/openacs-4/packages/bboard/www/messages-by-user.xql}
dbqd.bboard.www.search.im_convert_query {dbqd.bboard.www.search.im_convert_query {    select bboard_im_convert(:query) as query from dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/www/search-oracle.xql}
dbqd.bboard.www.search.bboard_search {dbqd.bboard.www.search.bboard_search {	select score(10) as the_score, message_id,
            m.title, m.num_replies, to_char(m.sent_date,'MM/DD/YYYY') as sent_date,
	    p.first_names||' '||p.last_name as full_name
	  from bboard_messages_all m, persons p, bboard_forums f
	  where contains(content, :query, 10) > 0
	    and m.sender = p.person_id
	    and m.forum_id = :forum_id
	    and f.forum_id = m.forum_id
	    and f.bboard_id = :package_id
	  order by score(10) desc
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/www/search-oracle.xql}
dbqd.bboard.www.simple-message.get_attachments {dbqd.bboard.www.simple-message.get_attachments {	select object_id as file_id, cr.title, ci.name
            from acs_objects ao, cr_items ci, cr_revisions cr
            where object_id = ci.item_id and
                  live_revision = revision_id and
	          object_type = 'content_item' and
                  context_id = :id
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard/www/simple-message-oracle.xql}
dbqd.bboard.www.subscriptions.get_forum_subs {dbqd.bboard.www.subscriptions.get_forum_subs {    select bfs.forum_id, short_name as name
      from bboard_forum_subscribers bfs, bboard_forums bf
      where bfs.forum_id = bf.forum_id
            and bfs.subscriber_id = :user_id
      order by forum_id asc

      } {} {} {} F:/temp/openacs-4/packages/bboard/www/subscriptions.xql}
dbqd.bboard.www.subscriptions.get_category_subs {dbqd.bboard.www.subscriptions.get_category_subs {    select bcs.category_id, short_name as name, forum_id
      from bboard_category_subscribers bcs, bboard_categories bc
      where bcs.category_id = bc.category_id
            and bcs.subscriber_id = :user_id
      order by category_id asc

      } {} {} {} F:/temp/openacs-4/packages/bboard/www/subscriptions.xql}
dbqd.bboard.www.subscriptions.get_thread_subs {dbqd.bboard.www.subscriptions.get_thread_subs {    select thread_id, title as name, forum_id
      from bboard_thread_subscribers bts, bboard_messages_all bma
      where bts.thread_id = bma.message_id
            and bts.subscriber_id = :user_id
      order by thread_id asc

      } {} {} {} F:/temp/openacs-4/packages/bboard/www/subscriptions.xql}
dbqd.bboard-portlets.www.summarize.select_bboard {dbqd.bboard-portlets.www.summarize.select_bboard {    select b.forum_id,
           b.short_name,
           site_node.url(sn.node_id) as url,
           acs_object.name(sn.object_id) as bboard_name
      from bboard_forums b, 
           site_nodes sn, 
           apm_packages apm
     where sn.object_id = b.bboard_id(+)
       and sn.parent_id = :node_id
       and sn.object_id = apm.package_id
       and apm.package_key = 'bboard'
     order by lower(bboard_name)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bboard-portlets/www/summarize-oracle.xql}
dbqd.bookmarks.tcl.bookmarks-init.bm_packages {dbqd.bookmarks.tcl.bookmarks-init.bm_packages {    select site_node.url(node_id) as path
    from   site_nodes
    where  object_id in (select package_id
                         from   apm_packages where package_key = 'bookmarks')

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bookmarks/tcl/bookmarks-init-oracle.xql}
dbqd.bookmarks.tcl.bookmarks-init.bm_export_to_netscape.bm_info {dbqd.bookmarks.tcl.bookmarks-init.bm_export_to_netscape.bm_info {        select   b.bookmark_id, 
	         b.url_id, 
                 b.local_title, 
	         acs_objects.creation_date, 
	         b.parent_id,
                 bm_urls.complete_url, 
	         b.folder_p
        from     (select /*+INDEX(bm_bookmarks bm_bookmarks_local_title_idx)*/ bookmark_id, url_id, local_title, folder_p, level lev, 
	          parent_id, owner_id, rownum ord_num from bm_bookmarks 
	          start with parent_id = :root_folder_id connect by prior bookmark_id = parent_id) b, 
	         bm_urls,
	         acs_objects
        where    owner_id       = :user_id
	and      acs_objects.object_id = b.bookmark_id
        and      b.url_id = bm_urls.url_id(+)
	order by ord_num
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bookmarks/tcl/bookmarks-init-oracle.xql}
dbqd.bookmarks.tcl.bookmarks-init.bm_clean_up_session_data.delete_old_in_closed_p {dbqd.bookmarks.tcl.bookmarks-init.bm_clean_up_session_data.delete_old_in_closed_p {      delete from bm_in_closed_p where creation_date < (sysdate - 1)
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bookmarks/tcl/bookmarks-init-oracle.xql}
dbqd.bookmarks.tcl.bookmarks-init.bm_export_to_netscape.name {dbqd.bookmarks.tcl.bookmarks-init.bm_export_to_netscape.name {    select first_names||' '||last_name as name 
    from   cc_users 
    where  user_id = :user_id
      } {} {} {} F:/temp/openacs-4/packages/bookmarks/tcl/bookmarks-init.xql}
dbqd.bookmarks.tcl.bookmarks-procs.exclude_folders {dbqd.bookmarks.tcl.bookmarks-procs.exclude_folders {		and bookmark_id not in 
		(
		select bookmark_id from bm_bookmarks where folder_p = 't' 
		and owner_id = :user_id 
		start with parent_id = :bookmark_id 
		connect by bookmark_id = parent_id
		)
	} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bookmarks/tcl/bookmarks-procs-oracle.xql}
dbqd.bookmarks.tcl.bookmarks-procs.bm_folder_selection.folder_select {dbqd.bookmarks.tcl.bookmarks-procs.bm_folder_selection.folder_select {    select /*+INDEX(bm_bookmarks bm_bookmarks_local_title_idx)*/ bookmark_id, 
    local_title,
    level as indentation
    from   bm_bookmarks
    where folder_p = 't'
    and owner_id = :user_id
    and bookmark_id <> :bookmark_id
    and parent_id <> :package_id
    and acs_permission.permission_p(:bookmark_id, :user_id, 'write') = 't'
    $exclude_folders
    start with parent_id = :package_id
    connect by prior bookmark_id = parent_id
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bookmarks/tcl/bookmarks-procs-oracle.xql}
dbqd.bookmarks.tcl.bookmarks-procs.bm_get_root_folder_id.fs_root_folder {dbqd.bookmarks.tcl.bookmarks-procs.bm_get_root_folder_id.fs_root_folder {      begin
          :1 := bookmark.get_root_folder(
                package_id => :package_id,
                user_id    => :user_id);
      end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bookmarks/tcl/bookmarks-procs-oracle.xql}
dbqd.bookmarks.tcl.bookmarks-procs.bm_user_can_write_in_some_folder_p.write_in_folders {dbqd.bookmarks.tcl.bookmarks-procs.bm_user_can_write_in_some_folder_p.write_in_folders {      select count(*) from bm_bookmarks
                     where owner_id = :viewed_user_id
                     and folder_p = 't'
                     and acs_permission.permission_p(bookmark_id, :browsing_user_id, 'write') = 't'
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bookmarks/tcl/bookmarks-procs-oracle.xql}
dbqd.bookmarks.tcl.bookmarks-procs.bm_delete_permission_p.delete_permission_p {dbqd.bookmarks.tcl.bookmarks-procs.bm_delete_permission_p.delete_permission_p {      select count(*) from bm_bookmarks 
	where acs_permission.permission_p(bookmark_id, :browsing_user_id, 'delete') = 'f'
	start with bookmark_id = :bookmark_id
	connect by prior bookmark_id = parent_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bookmarks/tcl/bookmarks-procs-oracle.xql}
dbqd.bookmarks.tcl.bookmarks-procs.bm_bookmark_private_p.bookmark_private_p {dbqd.bookmarks.tcl.bookmarks-procs.bm_bookmark_private_p.bookmark_private_p {      select bookmark.private_p(:bookmark_id) from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bookmarks/tcl/bookmarks-procs-oracle.xql}
dbqd.bookmarks.tcl.bookmarks-procs.bm_update_bookmark_private_p.update_private_p {dbqd.bookmarks.tcl.bookmarks-procs.bm_update_bookmark_private_p.update_private_p {	    begin
	       bookmark.update_private_p(:bookmark_id, :private_p);
	    end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bookmarks/tcl/bookmarks-procs-oracle.xql}
dbqd.bookmarks.tcl.bookmarks-procs.bm_initialize_in_closed_p.initialize_in_closed_p {dbqd.bookmarks.tcl.bookmarks-procs.bm_initialize_in_closed_p.initialize_in_closed_p {	    begin
	       bookmark.initialize_in_closed_p(:viewed_user_id, :in_closed_p_id);
	    end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bookmarks/tcl/bookmarks-procs-oracle.xql}
dbqd.bookmarks.tcl.bookmarks-procs.bm_handle_bookmark_double_click.dbclick {dbqd.bookmarks.tcl.bookmarks-procs.bm_handle_bookmark_double_click.dbclick {      select count(*) 
                                          from   bm_bookmarks 
	                                  where  bookmark_id = :bookmark_id
      } {} {} {} F:/temp/openacs-4/packages/bookmarks/tcl/bookmarks-procs.xql}
dbqd.bookmarks.tcl.bookmarks-procs.bm_context_bar_args.user_name {dbqd.bookmarks.tcl.bookmarks-procs.bm_context_bar_args.user_name {      select first_names || ' ' || last_name from cc_users where object_id = :viewed_user_id
      } {} {} {} F:/temp/openacs-4/packages/bookmarks/tcl/bookmarks-procs.xql}
dbqd.bookmarks.www.bookmark-access.update_access_date {dbqd.bookmarks.www.bookmark-access.update_access_date {      update bm_bookmarks set last_access_date = sysdate where bookmark_id = :bookmark_id
or bookmark_id in (select bookmark_id from bm_bookmarks 
start with bookmark_id = (select parent_id from bm_bookmarks where bookmark_id = :bookmark_id) 
connect by prior parent_id = bookmark_id)
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bookmarks/www/bookmark-access-oracle.xql}
dbqd.bookmarks.www.bookmark-add-one-2.url_add {dbqd.bookmarks.www.bookmark-add-one-2.url_add {	begin
	   :1 := url.new (
           url_id => :url_id,
           url_title => :url_title,
	   host_url => :host_url,
	   complete_url => :complete_url,
           meta_keywords => :meta_keywords,
           meta_description => :meta_description,
           creation_user => :viewed_user_id,
           creation_ip => :creation_ip
	);
	end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bookmarks/www/bookmark-add-one-2-oracle.xql}
dbqd.bookmarks.www.bookmark-add-one-2.bookmark_add {dbqd.bookmarks.www.bookmark-add-one-2.bookmark_add {    declare
      dummy_var integer;
    begin
      dummy_var := bookmark.new (
       bookmark_id => :bookmark_id,
       owner_id    => :viewed_user_id,
       url_id      => :url_id,
       local_title => :local_title,
       parent_id   => :parent_id,
       creation_user => :user_id,
       creation_ip => :creation_ip
	);       
    end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bookmarks/www/bookmark-add-one-2-oracle.xql}
dbqd.bookmarks.www.bookmark-add-one-2.count_url {dbqd.bookmarks.www.bookmark-add-one-2.count_url {    select count(*)
    from   bm_urls
    where  complete_url = :complete_url 
      } {} {} {} F:/temp/openacs-4/packages/bookmarks/www/bookmark-add-one-2.xql}
dbqd.bookmarks.www.bookmark-add-one-2.new_url_id {dbqd.bookmarks.www.bookmark-add-one-2.new_url_id {      select url_id 
                                      from   bm_urls 
                                      where  complete_url= :complete_url
      } {} {} {} F:/temp/openacs-4/packages/bookmarks/www/bookmark-add-one-2.xql}
dbqd.bookmarks.www.bookmark-add-one-2.update_url_meta_info {dbqd.bookmarks.www.bookmark-add-one-2.update_url_meta_info {      update bm_urls set url_title= :url_title,
	    meta_description= :meta_description,
	    meta_keywords= :meta_keywords
            where url_id = :url_id
      } {} {} {} F:/temp/openacs-4/packages/bookmarks/www/bookmark-add-one-2.xql}
dbqd.bookmarks.www.bookmark-delete-2.bookmark_add {dbqd.bookmarks.www.bookmark-delete-2.bookmark_add {    begin
      bookmark.delete (
       bookmark_id => :bookmark_id
	);       
 end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bookmarks/www/bookmark-delete-2-oracle.xql}
dbqd.bookmarks.www.bookmark-delete.contained_bookmarks {dbqd.bookmarks.www.bookmark-delete.contained_bookmarks {      select local_title, level as indentation 
from bm_bookmarks start with bookmark_id = :bookmark_id 
connect by prior bookmark_id = parent_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bookmarks/www/bookmark-delete-oracle.xql}
dbqd.bookmarks.www.bookmark-delete.bookmark_title {dbqd.bookmarks.www.bookmark-delete.bookmark_title {      select local_title from bm_bookmarks
                                              where bookmark_id = :bookmark_id
      } {} {} {} F:/temp/openacs-4/packages/bookmarks/www/bookmark-delete.xql}
dbqd.bookmarks.www.bookmark-edit-2.insert_or_update_url {dbqd.bookmarks.www.bookmark-edit-2.insert_or_update_url {    begin
    :1 := url.insert_or_update (
    url_title => :local_title,
    host_url => :host_url,
    complete_url => :complete_url,
    creation_user => :creation_user,
    creation_ip => :creation_ip
    );
    end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bookmarks/www/bookmark-edit-2-oracle.xql}
dbqd.bookmarks.www.bookmark-edit-2.update_in_closed_p_all_users {dbqd.bookmarks.www.bookmark-edit-2.update_in_closed_p_all_users {begin
bookmark.update_in_closed_p_all_users (
                bookmark_id => :bookmark_id,
                new_parent_id => :parent_id
);
end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bookmarks/www/bookmark-edit-2-oracle.xql}
dbqd.bookmarks.www.bookmark-edit-2.update_bookmark {dbqd.bookmarks.www.bookmark-edit-2.update_bookmark {      update bm_bookmarks set local_title = :local_title, parent_id = :parent_id
                        $url_clause
                        where bookmark_id = :bookmark_id
      } {} {} {} F:/temp/openacs-4/packages/bookmarks/www/bookmark-edit-2.xql}
dbqd.bookmarks.www.bookmark-edit-2.update_context_id {dbqd.bookmarks.www.bookmark-edit-2.update_context_id {      update acs_objects set context_id = :parent_id where object_id = :bookmark_id
      } {} {} {} F:/temp/openacs-4/packages/bookmarks/www/bookmark-edit-2.xql}
dbqd.bookmarks.www.bookmark-edit-2.url_clause {dbqd.bookmarks.www.bookmark-edit-2.url_clause {         , url_id = :url_id
      } {} {} {} F:/temp/openacs-4/packages/bookmarks/www/bookmark-edit-2.xql}
dbqd.bookmarks.www.bookmark-edit.bookmark_admin_p {dbqd.bookmarks.www.bookmark-edit.bookmark_admin_p {	select 
	acs_permission.permission_p(:bookmark_id, :browsing_user_id, 'admin') 
	from dual
	} {} {} {} F:/temp/openacs-4/packages/bookmarks/www/bookmark-edit.xql}
dbqd.bookmarks.www.bookmark-edit.folder_p {dbqd.bookmarks.www.bookmark-edit.folder_p {	 select folder_p from bm_bookmarks where bookmark_id = :bookmark_id
	} {} {} {} F:/temp/openacs-4/packages/bookmarks/www/bookmark-edit.xql}
dbqd.bookmarks.www.bookmark-edit.inheritance_p {dbqd.bookmarks.www.bookmark-edit.inheritance_p {	select security_inherit_p from acs_objects where object_id = :bookmark_id
	} {} {} {} F:/temp/openacs-4/packages/bookmarks/www/bookmark-edit.xql}
dbqd.bookmarks.www.bookmark-edit.bookmark_edit {dbqd.bookmarks.www.bookmark-edit.bookmark_edit { 	select local_title,
               owner_id,
               complete_url, 
               folder_p,
               parent_id, 
               bookmark_id
        from   bm_bookmarks left join bm_urls using (url_id)
        where  bookmark_id = :bookmark_id
      } {} {} {} F:/temp/openacs-4/packages/bookmarks/www/bookmark-edit.xql}
dbqd.bookmarks.www.bookmark-view.bookmark_view {dbqd.bookmarks.www.bookmark-view.bookmark_view {	select local_title,
               email,
               owner_id,
               complete_url, 
               bookmark_id,
               meta_keywords,
               meta_description,
               url_title
        from   bm_bookmarks, 
               bm_urls,
               parties
        where  bookmark_id = :bookmark_id
        and    bm_bookmarks.url_id = bm_urls.url_id(+)
        and    bm_bookmarks.owner_id = parties.party_id      
	} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bookmarks/www/bookmark-view-oracle.xql}
dbqd.bookmarks.www.bookmark-view.bookmark_view {dbqd.bookmarks.www.bookmark-view.bookmark_view {	select local_title,
               email,
               owner_id,
               complete_url, 
               bookmark_id,
               meta_keywords,
               meta_description,
               url_title
        from   bm_bookmarks, 
               bm_urls,
               parties
        where  bookmark_id = :bookmark_id
        and    bm_bookmarks.url_id = bm_urls.url_id(+)
        and    bm_bookmarks.owner_id = parties.party_id      
	} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bookmarks/www/bookmark-view-oracle.xql}
dbqd.bookmarks.www.bookmarks-check.set_last_live_date_to_now {dbqd.bookmarks.www.bookmarks-check.set_last_live_date_to_now {		now()
	} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bookmarks/www/bookmarks-check-oracle.xql}
dbqd.bookmarks.www.bookmarks-check.bookmark_list {dbqd.bookmarks.www.bookmarks-check.bookmark_list {select url_id,
       complete_url,
       nvl(url_title, complete_url) as url_title
       from bm_urls
       where exists (select 1 from (select bookmark_id, url_id from bm_bookmarks
                                                     start with parent_id = :root_folder_id 
                                                     connect by prior bookmark_id = parent_id) bm
                                      where bm.url_id = bm_urls.url_id
                                      and acs_permission.permission_p(bm.bookmark_id, :browsing_user_id, 'delete')= 't' )
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bookmarks/www/bookmarks-check-oracle.xql}
dbqd.bookmarks.www.bookmarks-check.bookmark_update_last_checked {dbqd.bookmarks.www.bookmarks-check.bookmark_update_last_checked {    update bm_urls 
    set    last_checked_date = sysdate,

    url_title= :title,
    meta_description= :description,
    meta_keywords= :keywords

    $last_live_clause

    where  url_id = :url_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bookmarks/www/bookmarks-check-oracle.xql}
dbqd.bookmarks.www.bookmarks-import.folder_insert {dbqd.bookmarks.www.bookmarks-import.folder_insert {		declare
		dummy_var integer;
		begin
		   dummy_var := bookmark.new (
		   bookmark_id => :bookmark_id,
		   owner_id    => :viewed_user_id,
		   local_title => :local_title,
		   parent_id   => :parent_id,
		   folder_p    => 't',
		   creation_user => :user_id,
		   creation_ip => :creation_ip
		);       
		end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bookmarks/www/bookmarks-import-oracle.xql}
dbqd.bookmarks.www.bookmarks-import.new_url {dbqd.bookmarks.www.bookmarks-import.new_url {		declare
		   dummy_var integer;
		begin
		dummy_var := url.new (
		   url_id => :url_id,
		   url_title => :local_title,
		   host_url => :host_url,
		   complete_url => :complete_url,
		   creation_user => :viewed_user_id,
		   creation_ip => :creation_ip
		);
		end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bookmarks/www/bookmarks-import-oracle.xql}
dbqd.bookmarks.www.bookmarks-import. {dbqd.bookmarks.www.bookmarks-import. {		declare
		   dummy_var integer;
		begin
		   dummy_var := bookmark.new (
		   bookmark_id => :bookmark_id,
		   owner_id    => :viewed_user_id,
		   url_id      => :url_id,
		   local_title => :local_title,
		   parent_id   => :parent_id,
		   creation_user => :user_id,
		   creation_ip => :creation_ip
		);       
		end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bookmarks/www/bookmarks-import-oracle.xql}
dbqd.bookmarks.www.bookmarks-import.dbclick_check {dbqd.bookmarks.www.bookmarks-import.dbclick_check {select count(bookmark_id) as n_existing
from   bm_bookmarks 
where  bookmark_id = :bookmark_id
      } {} {} {} F:/temp/openacs-4/packages/bookmarks/www/bookmarks-import.xql}
dbqd.bookmarks.www.bookmarks-import.n_dp_folder {dbqd.bookmarks.www.bookmarks-import.n_dp_folder {	    select count(*) from bm_bookmarks
	    where  owner_id = :viewed_user_id
	    and    parent_id = :parent_id
	    and    folder_p = 't'
	    and    local_title = :local_title
      } {} {} {} F:/temp/openacs-4/packages/bookmarks/www/bookmarks-import.xql}
dbqd.bookmarks.www.bookmarks-import.bm_parent {dbqd.bookmarks.www.bookmarks-import.bm_parent {	    select bookmark_id
	    from   bm_bookmarks
	    where  folder_p = 't'
	    and    owner_id = :user_id
	    and    local_title = :local_title
      } {} {} {} F:/temp/openacs-4/packages/bookmarks/www/bookmarks-import.xql}
dbqd.bookmarks.www.bookmarks-import.bm_dp_url {dbqd.bookmarks.www.bookmarks-import.bm_dp_url {		    select url_id
		    from   bm_urls
		    where  complete_url = :complete_url
      } {} {} {} F:/temp/openacs-4/packages/bookmarks/www/bookmarks-import.xql}
dbqd.bookmarks.www.bookmarks-import.dp {dbqd.bookmarks.www.bookmarks-import.dp {		select count(bookmark_id) 
		from   bm_bookmarks
		where  url_id = :url_id
		and    owner_id = :viewed_user_id
		and    parent_id = :parent_id
      } {} {} {} F:/temp/openacs-4/packages/bookmarks/www/bookmarks-import.xql}
dbqd.bookmarks.www.bookmarks-import. {dbqd.bookmarks.www.bookmarks-import. {		declare
		   dummy_var integer;
		begin
		   dummy_var := bookmark.new (
		   bookmark_id => :bookmark_id,
		   owner_id    => :viewed_user_id,
		   url_id      => :url_id,
		   local_title => :local_title,
		   parent_id   => :parent_id,
		   creation_user => :user_id,
		   creation_ip => :creation_ip
		);       
		end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bookmarks/www/bookmarks-import-oracle.xql}
dbqd.bookmarks.www.bookmarks-user-list.bookmarks_of_other_users {dbqd.bookmarks.www.bookmarks-user-list.bookmarks_of_other_users {      select u.first_names, 
            u.last_name, 
            b.owner_id as viewed_user_id, 
            count(b.bookmark_id) as number_of_bookmarks
    from    cc_users u, (select bookmark_id, url_id, folder_p, owner_id from bm_bookmarks 
                    start with parent_id = :package_id connect by prior bookmark_id = parent_id) b
    where   u.object_id = b.owner_id
    and     acs_permission.permission_p(b.bookmark_id, :browsing_user_id, 'read') = 't'
    and     b.owner_id <> :browsing_user_id
    and     b.folder_p = 'f'
    and     b.bookmark_id <> :package_id
    group by u.first_names, 
             u.last_name, 
             b.owner_id
    order by number_of_bookmarks desc
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bookmarks/www/bookmarks-user-list-oracle.xql}
dbqd.bookmarks.www.delete-dead-links.bookmark_ids_for_url {dbqd.bookmarks.www.delete-dead-links.bookmark_ids_for_url {      select bookmark_id
    from (select bookmark_id, url_id from bm_bookmarks
                        start with parent_id = :root_folder_id 
                        connect by prior bookmark_id = parent_id) bm
    where acs_permission.permission_p(bm.bookmark_id, :browsing_user_id, 'delete') = 't'
    and bm.url_id = :url_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bookmarks/www/delete-dead-links-oracle.xql}
dbqd.bookmarks.www.delete-dead-links.delete_dead_link {dbqd.bookmarks.www.delete-dead-links.delete_dead_link {	begin
	bookmark.delete (
	bookmark_id => :bookmark_id
	);       
        end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bookmarks/www/delete-dead-links-oracle.xql}
dbqd.bookmarks.www.delete-dead-links.delete_dead_link {dbqd.bookmarks.www.delete-dead-links.delete_dead_link {	begin
	bookmark.delete (
	bookmark_id => :bookmark_id
	);       
        end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bookmarks/www/delete-dead-links-oracle.xql}
dbqd.bookmarks.www.folder-add-2.bookmark_add {dbqd.bookmarks.www.folder-add-2.bookmark_add {declare
dummy_var integer;
begin
dummy_var := bookmark.new (
bookmark_id => :bookmark_id,
owner_id    => :viewed_user_id,
local_title => :local_title,
parent_id   => :parent_id,
folder_p    => :folder_p,
creation_user => :user_id,
creation_ip => :creation_ip
);       
end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bookmarks/www/folder-add-2-oracle.xql}
dbqd.bookmarks.www.index.index_order_by_name {dbqd.bookmarks.www.index.index_order_by_name {		/*+INDEX(bm_bookmarks bm_bookmarks_local_title_idx)*/		
	} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bookmarks/www/index-oracle.xql}
dbqd.bookmarks.www.index.index_order_by_access_date {dbqd.bookmarks.www.index.index_order_by_access_date {		/*+INDEX_DESC(bm_bookmarks bm_bookmarks_access_date_idx)*/		
	} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bookmarks/www/index-oracle.xql}
dbqd.bookmarks.www.index.private_select {dbqd.bookmarks.www.index.private_select {		, bookmark.private_p(b.bookmark_id) as private_p
	} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bookmarks/www/index-oracle.xql}
dbqd.bookmarks.www.index.bookmark_system_name {dbqd.bookmarks.www.index.bookmark_system_name {      select acs_object.name(:package_id) from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bookmarks/www/index-oracle.xql}
dbqd.bookmarks.www.index.bookmarks_select {dbqd.bookmarks.www.index.bookmarks_select {         select b.bookmark_id, b.url_id, b.local_title as bookmark_title, b.folder_p, 
           u.complete_url, u.last_live_date, u.last_checked_date, 
           bm_in_closed_p.closed_p, 
           nvl(admin_view.object_id, 0) as admin_p,
           nvl(delete_view.object_id,0) as delete_p,
           b.lev as indentation
           $private_select
         from bm_urls u,
           (select $index_order bookmark_id, url_id, local_title, folder_p, level lev, parent_id, rownum ord_num 
            from bm_bookmarks start with bookmark_id = :root_folder_id connect by prior bookmark_id = parent_id) b,
           bm_in_closed_p,
           (select distinct object_id
            from all_object_party_privilege_map
            where party_id = :browsing_user_id and privilege = 'admin') admin_view,
           (select distinct object_id
            from all_object_party_privilege_map
            where party_id = :browsing_user_id and privilege = 'delete') delete_view
         where b.url_id = u.url_id (+)
           and bm_in_closed_p.bookmark_id = b.bookmark_id
           and bm_in_closed_p.in_closed_p = 'f'
           and bm_in_closed_p.in_closed_p_id = :in_closed_p_id
           and exists (select 1
                       from bm_bookmarks
                       where exists (select 1
                                     from all_object_party_privilege_map
                                     where object_id = bookmark_id and party_id = :browsing_user_id
                                       and privilege = 'read')
                       start with bookmark_id = b.bookmark_id connect by prior bookmark_id = parent_id)
           and b.bookmark_id <> :root_folder_id
           and b.bookmark_id = admin_view.object_id(+)
           and b.bookmark_id = delete_view.object_id(+)
         order by ord_num
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bookmarks/www/index-oracle.xql}
dbqd.bookmarks.www.index.my_bookmarks_select {dbqd.bookmarks.www.index.my_bookmarks_select {        select b.bookmark_id, b.url_id, b.local_title as bookmark_title,
          u.complete_url, u.last_live_date, u.last_checked_date, 
          b.folder_p, 
          bm_in_closed_p.closed_p, 
          nvl(admin_view.object_id, 0) as admin_p,
          nvl(delete_view.object_id,0) as delete_p,
          b.lev as indentation
          $private_select
        from bm_urls u,
          (select $index_order bookmark_id, url_id, local_title, folder_p, level lev, parent_id, rownum ord_num 
           from bm_bookmarks
           start with bookmark_id = :root_folder_id connect by prior bookmark_id = parent_id) b,
          bm_in_closed_p,
          (select distinct object_id
           from all_object_party_privilege_map
           where party_id = :browsing_user_id and privilege = 'admin') admin_view,
          (select distinct object_id
           from all_object_party_privilege_map
           where party_id = :browsing_user_id and privilege = 'delete') delete_view
        where b.url_id = u.url_id (+)
          and bm_in_closed_p.bookmark_id = b.bookmark_id
          and bm_in_closed_p.in_closed_p = 'f'
          and bm_in_closed_p.in_closed_p_id = :in_closed_p_id
          and exists (select 1
                      from bm_bookmarks
                      where exists (select 1
                                    from all_object_party_privilege_map
                                    where object_id = bookmark_id and party_id  = :browsing_user_id
                                      and privilege = 'read')
                                    start with bookmark_id = b.bookmark_id connect by prior bookmark_id = parent_id)
          and b.bookmark_id <> :root_folder_id
          and b.bookmark_id = admin_view.object_id(+)
          and b.bookmark_id = delete_view.object_id(+)
        order by ord_num
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bookmarks/www/index-oracle.xql}
dbqd.bookmarks.www.index.user_exists {dbqd.bookmarks.www.index.user_exists {      select 1 from parties where party_id = :viewed_user_id
      } {} {} {} F:/temp/openacs-4/packages/bookmarks/www/index.xql}
dbqd.bookmarks.www.index.user_name {dbqd.bookmarks.www.index.user_name {      select first_names || ' ' || last_name from cc_users where object_id = :viewed_user_id
      } {} {} {} F:/temp/openacs-4/packages/bookmarks/www/index.xql}
dbqd.bookmarks.www.most-popular.popular_hosts {dbqd.bookmarks.www.most-popular.popular_hosts {    select unique host_url,
           $count_select_query as n_bookmarks
    from  bm_urls
    order by n_bookmarks desc

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bookmarks/www/most-popular-oracle.xql}
dbqd.bookmarks.www.most-popular.popular_urls {dbqd.bookmarks.www.most-popular.popular_urls {    select nvl(url_title, complete_url) as local_title, 
           complete_url, 
           $count_select_query as n_bookmarks
    from   bm_urls
    order by n_bookmarks desc

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bookmarks/www/most-popular-oracle.xql}
dbqd.bookmarks.www.most-popular.popular_hosts {dbqd.bookmarks.www.most-popular.popular_hosts {    select unique host_url,
           $count_select_query as n_bookmarks
    from  bm_urls
    order by n_bookmarks desc

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bookmarks/www/most-popular-oracle.xql}
dbqd.bookmarks.www.most-popular.popular_urls {dbqd.bookmarks.www.most-popular.popular_urls {    select nvl(url_title, complete_url) as local_title, 
           complete_url, 
           $count_select_query as n_bookmarks
    from   bm_urls
    order by n_bookmarks desc

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bookmarks/www/most-popular-oracle.xql}
dbqd.bookmarks.www.one-host.user_urls {dbqd.bookmarks.www.one-host.user_urls {    select u.first_names || ' ' || u.last_name as name, 
           bml.local_title,
           complete_url
    from   cc_users u, 
           bm_bookmarks bml, 
           bm_urls bmu
    where  u.user_id = bml.owner_id
    and    bml.url_id = bmu.url_id
    and    bmu.host_url = :host_url
    order by name

      } {} {} {} F:/temp/openacs-4/packages/bookmarks/www/one-host.xql}
dbqd.bookmarks.www.permissions-reset-all-2.delete_individual_permissions {dbqd.bookmarks.www.permissions-reset-all-2.delete_individual_permissions {      delete from acs_permissions where object_id in (select bookmark_id from bm_bookmarks
start with parent_id = :root_folder_id
connect by prior bookmark_id = parent_id)
and grantee_id <> :viewed_user_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bookmarks/www/permissions-reset-all-2-oracle.xql}
dbqd.bookmarks.www.permissions-reset-all-2.turn_on_security_inheritance {dbqd.bookmarks.www.permissions-reset-all-2.turn_on_security_inheritance {      update acs_objects set security_inherit_p = 't'
where object_id in (select bookmark_id from bm_bookmarks
start with parent_id = :root_folder_id
connect by prior bookmark_id = parent_id)
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bookmarks/www/permissions-reset-all-2-oracle.xql}
dbqd.bookmarks.www.permissions-reset-all.direct_bookmark_permissions {dbqd.bookmarks.www.permissions-reset-all.direct_bookmark_permissions {      select bookmark_id, local_title from bm_bookmarks
where acs_permission.permission_p(bookmark_id, acs.magic_object_id('registered_users'), 'read') <> :public_p
start with parent_id = :root_folder_id
connect by prior bookmark_id = parent_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bookmarks/www/permissions-reset-all-oracle.xql}
dbqd.bookmarks.www.search.bookmark_search_user {dbqd.bookmarks.www.search.bookmark_search_user {    select   bookmark_id, 
             complete_url,
             nvl(local_title, url_title) as title, 
             meta_keywords, 
             meta_description
    from     (select bookmark_id, url_id, local_title, folder_p, owner_id 
              from bm_bookmarks start with bookmark_id = :root_folder_id 
              connect by prior bookmark_id = parent_id) b, 
             bm_urls
    where    owner_id = :browsing_user_id 
    and      folder_p = 'f'
    and      b.url_id = bm_urls.url_id 
    and      b.bookmark_id <> :root_folder_id
    and     (    upper(local_title)      like :search_pattern
              or upper(url_title)        like :search_pattern
              or upper(complete_url)     like :search_pattern
              or upper(meta_keywords)    like :search_pattern
              or upper(meta_description) like :search_pattern)
    order by title

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bookmarks/www/search-oracle.xql}
dbqd.bookmarks.www.search.bookmark_search_other {dbqd.bookmarks.www.search.bookmark_search_other {    select   distinct complete_url,
             bookmark_id,
             nvl(local_title, url_title) as title, 
             meta_keywords, 
             meta_description, 
             folder_p,
             acs_permission.permission_p(bookmark_id, :browsing_user_id, 'admin') as admin_p
    from     (select bookmark_id, url_id, local_title, folder_p, owner_id 
              from bm_bookmarks start with bookmark_id in (select bookmark_id
                           from bm_bookmarks where parent_id = :package_id)
              connect by prior bookmark_id = parent_id) b, 
             bm_urls
    where    owner_id <> :browsing_user_id
    and      acs_permission.permission_p(bookmark_id, :browsing_user_id, 'read') = 't'
    and      folder_p  = 'f' 
    and      b.url_id = bm_urls.url_id 
    and     (   upper(local_title)      like :search_pattern
             or upper(url_title)        like :search_pattern
             or upper(complete_url)     like :search_pattern
             or upper(meta_keywords)    like :search_pattern
             or upper(meta_description) like :search_pattern)
    order by title

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bookmarks/www/search-oracle.xql}
dbqd.bookmarks.www.toggle-open-close.toggle_open_close {dbqd.bookmarks.www.toggle-open-close.toggle_open_close {    begin
   bookmark.toggle_open_close(
   bookmark_id => :bookmark_id,
   browsing_user_id => :browsing_user_id
    );
    end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bookmarks/www/toggle-open-close-oracle.xql}
dbqd.bookmarks.www.toggle-open-close.toggle_open_close_all {dbqd.bookmarks.www.toggle-open-close.toggle_open_close_all {    begin
   bookmark.toggle_open_close_all(
   browsing_user_id => :browsing_user_id,
   closed_p => :closed_p,
   root_id => bookmark.get_root_folder(
                package_id => :package_id,
                user_id    => :viewed_user_id
              )
    );
    end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bookmarks/www/toggle-open-close-oracle.xql}
dbqd.bookmarks.www.tree-dynamic.bookmark_items {dbqd.bookmarks.www.tree-dynamic.bookmark_items {    select   b.bookmark_id, 
             b.url_id, 
             b.local_title, 
             last_live_date, 
             last_checked_date,
             b.parent_id, 
             complete_url, 
             b.folder_p
    from     (select /*+INDEX(bm_bookmarks bm_bookmarks_local_title_idx)*/ 
              bookmark_id, url_id, local_title, folder_p, 
              level lev, parent_id, owner_id, rownum as ord_num 
              from bm_bookmarks start with bookmark_id = :root_id 
              connect by prior bookmark_id = parent_id) b, 
             bm_urls
    where exists (select 1 from bm_bookmarks where acs_permission.permission_p(bookmark_id, :user_id, 'read') = 't'
            start with bookmark_id = b.bookmark_id connect by prior bookmark_id = parent_id)
    and      b.bookmark_id <> :root_id
    and      b.url_id = bm_urls.url_id(+)
    order by ord_num

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/bookmarks/www/tree-dynamic-oracle.xql}
dbqd.bookmarks.www.tree-dynamic.name_query {dbqd.bookmarks.www.tree-dynamic.name_query {select first_names||' '||last_name as name 
from   cc_users 
where  user_id = :user_id
      } {} {} {} F:/temp/openacs-4/packages/bookmarks/www/tree-dynamic.xql}
dbqd.calendar.tcl.cal-item-procs.cal_assign_item_permission.grant_calendar_permissions_to_items_1 {dbqd.calendar.tcl.cal-item-procs.cal_assign_item_permission.grant_calendar_permissions_to_items_1 {		begin
		acs_permission.grant_permission (
		  object_id       =>      :cal_item_id,
		  grantee_id      =>      :party_id,
		  privilege       =>      'cal_item_read'
		);
		end;
	    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/calendar/tcl/cal-item-procs-oracle.xql}
dbqd.calendar.tcl.cal-item-procs.cal_assign_item_permission.grant_calendar_permissions_to_items_2 {dbqd.calendar.tcl.cal-item-procs.cal_assign_item_permission.grant_calendar_permissions_to_items_2 {	    begin
	    acs_permission.grant_permission (
	      object_id       =>      :cal_item_id,
	      grantee_id      =>      :party_id,
	      privilege       =>      :permission
	    );
	    end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/calendar/tcl/cal-item-procs-oracle.xql}
dbqd.calendar.tcl.cal-item-procs.cal_assign_item_permission.grant_calendar_permissions_to_items_3 {dbqd.calendar.tcl.cal-item-procs.cal_assign_item_permission.grant_calendar_permissions_to_items_3 {	    begin
	    acs_permission.revoke_permission (
	      object_id       =>      :cal_item_id,
	      grantee_id      =>      :party_id,
	      privilege       =>      :permission
	    );
	    end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/calendar/tcl/cal-item-procs-oracle.xql}
dbqd.calendar.tcl.cal-item-procs.cal_item_create.insert_activity {dbqd.calendar.tcl.cal-item-procs.cal_item_create.insert_activity {	begin
	:1 := acs_activity.new (
	  name          => :name,
	  description   => :description,
	  creation_user => :creation_user,
	  creation_ip   => :creation_ip
	);
	end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/calendar/tcl/cal-item-procs-oracle.xql}
dbqd.calendar.tcl.cal-item-procs.cal_item_create.insert_timespan {dbqd.calendar.tcl.cal-item-procs.cal_item_create.insert_timespan {	begin
	:1 := timespan.new(
	  start_date => to_date(:start_date,:date_format),
	  end_date   => to_date(:end_date,:date_format)
	);
	end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/calendar/tcl/cal-item-procs-oracle.xql}
dbqd.calendar.tcl.cal-item-procs.cal_item_create.cal_item_add {dbqd.calendar.tcl.cal-item-procs.cal_item_create.cal_item_add {	begin
	:1 := cal_item.new(
	  on_which_calendar  => :on_which_calendar,
	  activity_id        => :activity_id,
          timespan_id        => :timespan_id,
	  creation_user      => :creation_user,
	  creation_ip        => :creation_ip
	);
	end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/calendar/tcl/cal-item-procs-oracle.xql}
dbqd.calendar.tcl.cal-item-procs.cal_item_create.grant_calendar_permissions_to_items_4 {dbqd.calendar.tcl.cal-item-procs.cal_item_create.grant_calendar_permissions_to_items_4 {	    begin
  	      acs_permission.grant_permission (
                object_id       =>      :cal_item_id,
                grantee_id      =>      :grantee_id,
                privilege       =>      :privilege
              );
	    end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/calendar/tcl/cal-item-procs-oracle.xql}
dbqd.calendar.tcl.cal-item-procs.cal_item_update.update_interval {dbqd.calendar.tcl.cal-item-procs.cal_item_update.update_interval {	begin
	  time_interval.edit (
	    interval_id  => :interval_id,
	    start_date   => to_date(:start_date,:date_format),
	    end_date     => to_date(:end_date,:date_format)
	  );
	end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/calendar/tcl/cal-item-procs-oracle.xql}
dbqd.calendar.tcl.cal-item-procs.cal_item_delete.delete_cal_item {dbqd.calendar.tcl.cal-item-procs.cal_item_delete.delete_cal_item {	begin
	  cal_item.delete (
	    cal_item_id  => :cal_item_id
	  );
	end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/calendar/tcl/cal-item-procs-oracle.xql}
dbqd.calendar.tcl.cal-item-procs.cal_item_create.get_permissions_to_items {dbqd.calendar.tcl.cal-item-procs.cal_item_create.get_permissions_to_items {	select          grantee_id,
                  	privilege
	from            acs_permissions
	where           object_id = :on_which_calendar
    
      } {} {} {} F:/temp/openacs-4/packages/calendar/tcl/cal-item-procs.xql}
dbqd.calendar.tcl.cal-item-procs.cal_item_update.update_activity {dbqd.calendar.tcl.cal-item-procs.cal_item_update.update_activity {    update acs_activities 
    set    name = :name,
           description = :description
    where  activity_id
    in     (
           select activity_id
           from   acs_events
           where  event_id = :cal_item_id
           )
    } {} {} {} F:/temp/openacs-4/packages/calendar/tcl/cal-item-procs.xql}
dbqd.calendar.tcl.cal-item-procs.cal_item_update.get_interval_id {dbqd.calendar.tcl.cal-item-procs.cal_item_update.get_interval_id {    select interval_id 
    from   timespans
    where  timespan_id
    in     (
           select timespan_id
           from   acs_events
           where  event_id = :cal_item_id
           )
    } {} {} {} F:/temp/openacs-4/packages/calendar/tcl/cal-item-procs.xql}
dbqd.calendar.tcl.calendar-community-core-procs.cc_group_to_name.group_name_select {dbqd.calendar.tcl.calendar-community-core-procs.cc_group_to_name.group_name_select {             select acs_group.name(:group_id)
             from   dual
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/calendar/tcl/calendar-community-core-procs-oracle.xql}
dbqd.calendar.tcl.calendar-community-core-procs.cc_is_party_group_p.get_group_result {dbqd.calendar.tcl.calendar-community-core-procs.cc_is_party_group_p.get_group_result {	select    acs_object_util.get_object_type(:party_id)
	as        result
	from      dual
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/calendar/tcl/calendar-community-core-procs-oracle.xql}
dbqd.calendar.tcl.calendar-community-core-procs.cc_is_party_group_p.get_group_result {dbqd.calendar.tcl.calendar-community-core-procs.cc_is_party_group_p.get_group_result {	select    acs_object_util.get_object_type(:party_id)
	as        result
	from      dual
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/calendar/tcl/calendar-community-core-procs-oracle.xql}
dbqd.calendar.tcl.calendar-community-core-procs.cc_member_of_groups.get_all_party_ids {dbqd.calendar.tcl.calendar-community-core-procs.cc_member_of_groups.get_all_party_ids {    select   group_id 
    from     group_member_index
    where    member_id = :member_id
    } {} {} {} F:/temp/openacs-4/packages/calendar/tcl/calendar-community-core-procs.xql}
dbqd.calendar.tcl.calendar-display-procs.calendar::one_month_display.select_monthly_items {dbqd.calendar.tcl.calendar-display-procs.calendar::one_month_display.select_monthly_items {	select   to_char(start_date, 'j') as start_date,
	         nvl(e.name, a.name) as name,
	         nvl(e.description, a.description) as description,
	         e.event_id as item_id
	from     acs_activities a,
	         acs_events e,
	         timespans s,
	         time_intervals t
	where    e.timespan_id = s.timespan_id
	and      s.interval_id = t.interval_id
	and      e.activity_id = a.activity_id
	and      e.event_id
	in       (
	         select  cal_item_id
	         from    cal_items
	         where   on_which_calendar = :calendar_id
         )
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/calendar/tcl/calendar-display-procs-oracle.xql}
dbqd.calendar.tcl.calendar-display-procs.calendar::one_week_display.select_weekday_info {dbqd.calendar.tcl.calendar-display-procs.calendar::one_week_display.select_weekday_info {        select   to_char(to_date(:current_date, 'yyyy-mm-dd'), 'D') 
        as       day_of_the_week,
        to_char(next_day(to_date(:current_date, 'yyyy-mm-dd')-7, 'SUNDAY')) 
        as       sunday_of_the_week,
        to_char(next_day(to_date(:current_date, 'yyyy-mm-dd'), 'Saturday')) 
        as       saturday_of_the_week
        from     dual
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/calendar/tcl/calendar-display-procs-oracle.xql}
dbqd.calendar.tcl.calendar-display-procs.calendar::one_week_display.select_week_items {dbqd.calendar.tcl.calendar-display-procs.calendar::one_week_display.select_week_items {select   to_char(start_date, 'J') as start_date,
         to_char(start_date, 'HH24:MI') as pretty_start_date,
         to_char(end_date, 'HH24:MI') as pretty_end_date,
         nvl(e.name, a.name) as name,
         e.event_id as item_id
from     acs_activities a,
         acs_events e,
         timespans s,
         time_intervals t
where    e.timespan_id = s.timespan_id
and      s.interval_id = t.interval_id
and      e.activity_id = a.activity_id
and      start_date between
         to_date(:sunday_of_the_week,'YYYY-MM-DD') and
         to_date(:saturday_of_the_week,'YYYY-MM-DD')
and      e.event_id
in       (
         select  cal_item_id
         from    cal_items
         where   on_which_calendar = :calendar_id
         )
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/calendar/tcl/calendar-display-procs-oracle.xql}
dbqd.calendar.tcl.calendar-display-procs.calendar::one_day_display.select_day_items {dbqd.calendar.tcl.calendar-display-procs.calendar::one_day_display.select_day_items {	select   to_char(start_date, 'HH24') as start_hour,
         to_char(start_date, 'HH24:MI') as pretty_start_date,
         to_char(end_date, 'HH24:MI') as pretty_end_date,
         nvl(e.name, a.name) as name,
         e.event_id as item_id
from     acs_activities a,
         acs_events e,
         timespans s,
         time_intervals t
where    e.timespan_id = s.timespan_id
and      s.interval_id = t.interval_id
and      e.activity_id = a.activity_id
and      start_date between
         to_date(:current_date,:date_format) and
         to_date(:current_date,:date_format) + (24 - 1/3600)/24
and      e.event_id
in       (
         select  cal_item_id
         from    cal_items
         where   on_which_calendar = :calendar_id
         )
	
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/calendar/tcl/calendar-display-procs-oracle.xql}
dbqd.calendar.tcl.calendar-display-procs.calendar::list_display.select_day_items {dbqd.calendar.tcl.calendar-display-procs.calendar::list_display.select_day_items {	select   to_char(start_date, 'HH24') as start_hour,
         to_char(start_date, 'HH24:MI') as pretty_start_date,
         to_char(end_date, 'HH24:MI') as pretty_end_date,
         nvl(e.name, a.name) as name,
         e.event_id as item_id
from     acs_activities a,
         acs_events e,
         timespans s,
         time_intervals t
where    e.timespan_id = s.timespan_id
and      s.interval_id = t.interval_id
and      e.activity_id = a.activity_id
and      start_date between
         to_date(:current_date,:date_format) and
         to_date(:current_date,:date_format) + (24 - 1/3600)/24
and      e.event_id
in       (
         select  cal_item_id
         from    cal_items
         where   on_which_calendar = :calendar_id
         )
	
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/calendar/tcl/calendar-display-procs-oracle.xql}
dbqd.calendar.tcl.calendar-procs.calendar_create.create_new_calendar {dbqd.calendar.tcl.calendar-procs.calendar_create.create_new_calendar {	begin
	:1 := calendar.new(
	  owner_id      => :owner_id,
	  private_p     => :private_p,
	  calendar_name => :calendar_name,
	  package_id    => :package_id,
	  creation_user => :creation_user,
	  creation_ip   => :creation_ip
	);	
	end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/calendar/tcl/calendar-procs-oracle.xql}
dbqd.calendar.tcl.calendar-procs.calendar_assign_permissions.get_magic_id {dbqd.calendar.tcl.calendar-procs.calendar_assign_permissions.get_magic_id {	    select  acs.magic_object_id('the_public')
	            as party_id
	    from    dual
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/calendar/tcl/calendar-procs-oracle.xql}
dbqd.calendar.tcl.calendar-procs.calendar_assign_permissions.assign_calendar_permissions {dbqd.calendar.tcl.calendar-procs.calendar_assign_permissions.assign_calendar_permissions {	    begin
	      acs_permission.grant_permission (
	        object_id       =>      :calendar_id,
	        grantee_id      =>      :party_id,
	        privilege       =>      :cal_privilege
	      );
	    end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/calendar/tcl/calendar-procs-oracle.xql}
dbqd.calendar.tcl.calendar-procs.calendar_assign_permissions.revoke_calendar_permissions {dbqd.calendar.tcl.calendar-procs.calendar_assign_permissions.revoke_calendar_permissions {	    begin
	      acs_permission.revoke_permission (
	        object_id       =>      :calendar_id,
	        grantee_id      =>      :party_id,
	        privilege       =>      :cal_privilege
	      );
	    end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/calendar/tcl/calendar-procs-oracle.xql}
dbqd.calendar.tcl.calendar-procs.calendar_create_private.get_user_name {dbqd.calendar.tcl.calendar-procs.calendar_create_private.get_user_name {	select   acs_object.name(:private_id) 
	from     dual
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/calendar/tcl/calendar-procs-oracle.xql}
dbqd.calendar.tcl.calendar-procs.calendar_get_name.get_calendar_name {dbqd.calendar.tcl.calendar-procs.calendar_get_name.get_calendar_name {	       select  calendar.name(:calendar_id)
	       from    dual
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/calendar/tcl/calendar-procs-oracle.xql}
dbqd.calendar.tcl.calendar-procs.calendar_public_p.check_calendar_permission {dbqd.calendar.tcl.calendar-procs.calendar_public_p.check_calendar_permission {              select   acs_permission.permission_p(
                         :calendar_id, 
                         acs.magic_object_id('the_public'),
                         'calendar_read'
                       ) 
              from     dual

            
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/calendar/tcl/calendar-procs-oracle.xql}
dbqd.calendar.tcl.calendar-procs.calendar_update.update_calendar {dbqd.calendar.tcl.calendar-procs.calendar_update.update_calendar {	update   calendars
	set      calendar_name = :calendar_name
	where    calendar_id = :calendar_id	
    
      } {} {} {} F:/temp/openacs-4/packages/calendar/tcl/calendar-procs.xql}
dbqd.calendar.tcl.calendar-procs.calendar_have_group_cal_p.get_calendar_info {dbqd.calendar.tcl.calendar-procs.calendar_have_group_cal_p.get_calendar_info {    select    calendar_id,
    from      calendars
    where     owner_id = :party_id
    } {} {} {} F:/temp/openacs-4/packages/calendar/tcl/calendar-procs.xql}
dbqd.calendar.tcl.calendar-procs.calendar_have_private_p.get_calendar_info {dbqd.calendar.tcl.calendar-procs.calendar_have_private_p.get_calendar_info {    select    calendar_id
    from      calendars
    where     owner_id = :party_id
    and       private_p = 't'
    } {} {} {} F:/temp/openacs-4/packages/calendar/tcl/calendar-procs.xql}
dbqd.calendar.www.admin.cal-item-permissions.get_party_name {dbqd.calendar.www.admin.cal-item-permissions.get_party_name {                  select   acs_object.name(:party_id)
                  from     dual
               
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/calendar/www/admin/cal-item-permissions-oracle.xql}
dbqd.calendar.www.admin.cal-item-permissions.list_users {dbqd.calendar.www.admin.cal-item-permissions.list_users {	select   acs_object.name(party_id) 
	         as pretty_name,
	         party_id
        from     parties
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/calendar/www/admin/cal-item-permissions-oracle.xql}
dbqd.calendar.www.admin.cal-item-permissions.get_calendar_audiences {dbqd.calendar.www.admin.cal-item-permissions.get_calendar_audiences {	select    unique(grantee_id) as party_id,
	          acs_object.name(grantee_id) as name
	from      acs_permissions
	where     object_id = :cal_item_id	
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/calendar/www/admin/cal-item-permissions-oracle.xql}
dbqd.calendar.www.admin.cal-item-permissions.get_existing_permissions {dbqd.calendar.www.admin.cal-item-permissions.get_existing_permissions {    select   distinct(child_privilege) as privilege 
    from     acs_privilege_hierarchy 
    where    child_privilege like 'cal_item%'

      } {} {} {} F:/temp/openacs-4/packages/calendar/www/admin/cal-item-permissions.xql}
dbqd.calendar.www.admin.cal-item-permissions.get_party_privileges {dbqd.calendar.www.admin.cal-item-permissions.get_party_privileges {	select    distinct privilege
	from      all_object_party_privilege_map 
	where     party_id = :party_id
	and       object_id = :cal_item_id
	and       privilege like '%cal_item%'
    
      } {} {} {} F:/temp/openacs-4/packages/calendar/www/admin/cal-item-permissions.xql}
dbqd.calendar.www.admin.calendar-permissions.get_party_name {dbqd.calendar.www.admin.calendar-permissions.get_party_name {                  select   acs_object.name(:party_id)
                  from     dual
               
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/calendar/www/admin/calendar-permissions-oracle.xql}
dbqd.calendar.www.admin.calendar-permissions.list_users {dbqd.calendar.www.admin.calendar-permissions.list_users {	select   acs_object.name(party_id) 
	         as pretty_name,
	         party_id
        from parties
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/calendar/www/admin/calendar-permissions-oracle.xql}
dbqd.calendar.www.admin.calendar-permissions.get_existing_permissions {dbqd.calendar.www.admin.calendar-permissions.get_existing_permissions {    select   distinct(child_privilege) as privilege 
    from     acs_privilege_hierarchy 
    where    child_privilege like 'calendar%'

      } {} {} {} F:/temp/openacs-4/packages/calendar/www/admin/calendar-permissions.xql}
dbqd.calendar.www.admin.calendar-permissions.get_party_privileges {dbqd.calendar.www.admin.calendar-permissions.get_party_privileges {	select    distinct privilege 	        
	from      all_object_party_privilege_map 
	where     object_id = :calendar_id
	and       party_id = :party_id
	and       privilege like '%calendar%'
    
      } {} {} {} F:/temp/openacs-4/packages/calendar/www/admin/calendar-permissions.xql}
dbqd.calendar.www.admin.calendar-preferences.get_party_name {dbqd.calendar.www.admin.calendar-preferences.get_party_name {                  select   acs_object.name(:party_id)
                  from     dual
               
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/calendar/www/admin/calendar-preferences-oracle.xql}
dbqd.calendar.www.admin.calendar-preferences.get_viewable_calendar {dbqd.calendar.www.admin.calendar-preferences.get_viewable_calendar {	select   unique(o.object_id) as calendar_id, 
	         calendar.name(object_id) as calendar_name,
                 calendar.show_p(object_id, :party_id) as show_p
	from     acs_objects o
	where    calendar.readable_p(o.object_id, :party_id) = 't'
	and      o.object_id = :party_id
	and      acs_object_util.object_type_p(o.object_id, 'calendar') = 't'
	and      calendar.private_p(o.object_id) = 'f'
	
	union

	select   cal_item.on_which_calendar(o.object_id) as calendar_id, 
	         calendar.name(cal_item.on_which_calendar(o.object_id)) as calendar_name,
	         calendar.show_p(cal_item.on_which_calendar(o.object_id), :party_id) as show_p
	from     acs_objects o
	where    privilege = 'cal_item_read'
	and      party_id = :party_id
	and      acs_object_util.object_type_p(o.object_id, 'cal_item') = 't'
	and      calendar.private_p(cal_item.on_which_calendar(o.object_id)) = 'f'

	
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/calendar/www/admin/calendar-preferences-oracle.xql}
dbqd.calendar.www.admin.index.calendar_list {dbqd.calendar.www.admin.index.calendar_list {    select     calendar_id, 
               calendar_name
    from       calendars
    where      owner_id = :user_id
    and        acs_permission.permission_p(
                  calendar_id, 
                  :user_id,
                  'calendar_admin'
               ) = 't'
    order by   calendar_name

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/calendar/www/admin/index-oracle.xql}
dbqd.calendar.www.admin.one.get_calendar_audiences {dbqd.calendar.www.admin.one.get_calendar_audiences {	select    unique(grantee_id) as party_id,
	          acs_object.name(grantee_id) as name
	from      acs_permissions
	where     object_id = :calendar_id	
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/calendar/www/admin/one-oracle.xql}
dbqd.calendar.www.cal-dayview.get_day_items {dbqd.calendar.www.cal-dayview.get_day_items {	select   to_char(start_date, 'HH24') as start_hour,
         to_char(start_date, 'HH24:MI') as pretty_start_date,
         to_char(end_date, 'HH24:MI') as pretty_end_date,
         nvl(e.name, a.name) as name,
         e.event_id as item_id
from     acs_activities a,
         acs_events e,
         timespans s,
         time_intervals t
where    e.timespan_id = s.timespan_id
and      s.interval_id = t.interval_id
and      e.activity_id = a.activity_id
and      start_date between
         to_date(:current_date,:date_format) and
         to_date(:current_date,:date_format) + (24 - 1/3600)/24
and      e.event_id
in       (
         select  cal_item_id
         from    cal_items
         where   on_which_calendar = :calendar_id
         )
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/calendar/www/cal-dayview-oracle.xql}
dbqd.calendar.www.cal-dayview.get_day_items {dbqd.calendar.www.cal-dayview.get_day_items {	select   to_char(start_date, 'HH24') as start_hour,
         to_char(start_date, 'HH24:MI') as pretty_start_date,
         to_char(end_date, 'HH24:MI') as pretty_end_date,
         nvl(e.name, a.name) as name,
         e.event_id as item_id
from     acs_activities a,
         acs_events e,
         timespans s,
         time_intervals t
where    e.timespan_id = s.timespan_id
and      s.interval_id = t.interval_id
and      e.activity_id = a.activity_id
and      start_date between
         to_date(:current_date,:date_format) and
         to_date(:current_date,:date_format) + (24 - 1/3600)/24
and      e.event_id
in       (
         select  cal_item_id
         from    cal_items
         where   on_which_calendar = :calendar_id
         )
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/calendar/www/cal-dayview-oracle.xql}
dbqd.calendar.www.cal-item.get_item_data {dbqd.calendar.www.cal-item.get_item_data {	select   to_char(start_date, 'MM/DD/YYYY') as start_date,
	         to_char(start_date, 'HH24:MI') as start_time,
	         to_char(end_date, 'HH24:MI') as end_time,
	         nvl(a. name, e.name) as name,
	         nvl(e.description, a.description) as description
	from     acs_activities a,
	         acs_events e,
	         timespans s,
	         time_intervals t
	where    e.timespan_id = s.timespan_id
	and      s.interval_id = t.interval_id
	and      e.activity_id = a.activity_id
	and      e.event_id = :cal_item_id
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/calendar/www/cal-item-oracle.xql}
dbqd.calendar.www.cal-item.list_calendars {dbqd.calendar.www.cal-item.list_calendars {        select    calendar_id, calendar_name
        from      calendars
        where     acs_permission.permission_p(calendar_id, :user_id, 'calendar_write') = 't'
        and       private_p = 'f'        



      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/calendar/www/cal-item-oracle.xql}
dbqd.calendar.www.cal-listview.get_day_items {dbqd.calendar.www.cal-listview.get_day_items {select   to_char(start_date, 'j') as start_date,
         to_char(start_date, 'HH24:MI') as pretty_start_date,
         to_char(end_date, 'HH24:MI') as pretty_end_date,
         nvl(e.name, a.name) as name,
         e.event_id as item_id
from     acs_activities a,
         acs_events e,
         timespans s, 
         time_intervals t
where    e.timespan_id = s.timespan_id
and      s.interval_id = t.interval_id
and      e.activity_id = a.activity_id
and      start_date between
        to_date(:current_date,:date_format) and
         to_date(:current_date,:date_format) + (24 - 1/3600)/24
and      e.event_id
in       (
           select    cal_item_id
           from      cal_items  
           where     on_which_calendar = :calendar_id
         )

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/calendar/www/cal-listview-oracle.xql}
dbqd.calendar.www.cal-listview.get_day_items {dbqd.calendar.www.cal-listview.get_day_items {select   to_char(start_date, 'j') as start_date,
         to_char(start_date, 'HH24:MI') as pretty_start_date,
         to_char(end_date, 'HH24:MI') as pretty_end_date,
         nvl(e.name, a.name) as name,
         e.event_id as item_id
from     acs_activities a,
         acs_events e,
         timespans s, 
         time_intervals t
where    e.timespan_id = s.timespan_id
and      s.interval_id = t.interval_id
and      e.activity_id = a.activity_id
and      start_date between
        to_date(:current_date,:date_format) and
         to_date(:current_date,:date_format) + (24 - 1/3600)/24
and      e.event_id
in       (
           select    cal_item_id
           from      cal_items  
           where     on_which_calendar = :calendar_id
         )

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/calendar/www/cal-listview-oracle.xql}
dbqd.calendar.www.cal-monthview.get_monthly_items {dbqd.calendar.www.cal-monthview.get_monthly_items {	select   to_char(start_date, 'j') as start_date,
        	 nvl(e.name, a.name) as name,
         	 nvl(e.description, a.description) as description,
         	 e.event_id as item_id
	from     acs_activities a,
	         acs_events e,
        	 timespans s,
	         time_intervals t
	where    e.timespan_id = s.timespan_id
	and      s.interval_id = t.interval_id
	and      e.activity_id = a.activity_id
	and      e.event_id
	in       (
        	 select  cal_item_id
	         from    cal_items
	         where   on_which_calendar = :calendar_id
        	 )
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/calendar/www/cal-monthview-oracle.xql}
dbqd.calendar.www.cal-monthview.get_monthly_items {dbqd.calendar.www.cal-monthview.get_monthly_items {	select   to_char(start_date, 'j') as start_date,
	         nvl(e.name, a.name) as name,
	         nvl(e.description, a.description) as description,
	         e.event_id as item_id
	from     acs_activities a,
	         acs_events e,
	         timespans s,
	         time_intervals t
	where    e.timespan_id = s.timespan_id
	and      s.interval_id = t.interval_id
	and      e.activity_id = a.activity_id
	and      e.event_id
	in       (
	         select  cal_item_id
	         from    cal_items
	         where   on_which_calendar = :calendar_id
         )
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/calendar/www/cal-monthview-oracle.xql}
dbqd.calendar.www.cal-options.get_readable_calendars {dbqd.calendar.www.cal-options.get_readable_calendars {    select   unique(calendar_id) as calendar_id,
             calendar_name,
             ' ' as checked_p
    from     calendars
    where    acs_permission.permission_p(calendar_id, :user_id, 'calendar_read') = 't'
    and      acs_permission.permission_p(calendar_id, :user_id, 'calendar_show') = 't'
    and      private_p = 'f'

    union 
    
    select  unique(on_which_calendar) as calendar_id,
            calendar.name(on_which_calendar) as calendar_name,
            ' ' as checked_p
    from    cal_items
    where   acs_permission.permission_p(cal_item_id, :user_id, 'cal_item_read') = 't'
    and     calendar.private_p(on_which_calendar) = 'f'

      

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/calendar/www/cal-options-oracle.xql}
dbqd.calendar.www.cal-weekview.get_weekday_info {dbqd.calendar.www.cal-weekview.get_weekday_info {select   to_char(to_date(:current_date, 'yyyy-mm-dd'), 'D') 
as       day_of_the_week,
         to_char(next_day(to_date(:current_date, 'yyyy-mm-dd')-7, 'SUNDAY')) 
as       sunday_of_the_week,
         to_char(next_day(to_date(:current_date, 'yyyy-mm-dd'), 'Saturday')) 
as       saturday_of_the_week
from     dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/calendar/www/cal-weekview-oracle.xql}
dbqd.calendar.www.cal-weekview.get_day_items {dbqd.calendar.www.cal-weekview.get_day_items {select   to_char(start_date, 'J') as start_date,
         to_char(start_date, 'HH24:MI') as pretty_start_date,
         to_char(end_date, 'HH24:MI') as pretty_end_date,
         nvl(e.name, a.name) as name,
         e.event_id as item_id
from     acs_activities a,
         acs_events e,
         timespans s,
         time_intervals t
where    e.timespan_id = s.timespan_id
and      s.interval_id = t.interval_id
and      e.activity_id = a.activity_id
and      trunc(start_date) between to_date(:sunday_of_the_week,'YYYY-MM-DD') and
         to_date(:saturday_of_the_week,'YYYY-MM-DD')
and      e.event_id
in       (
         select  cal_item_id
         from    cal_items
         where   on_which_calendar = :calendar_id
         )

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/calendar/www/cal-weekview-oracle.xql}
dbqd.clickthrough.tcl.clickthrough-procs.clickthrough_href.clickthrough_url_sql {dbqd.clickthrough.tcl.clickthrough-procs.clickthrough_href.clickthrough_url_sql {      select site_node.url(sn2.node_id)
          from site_nodes sn1, site_nodes sn2, apm_packages p
         where sn1.object_id = :package_id
           and sn2.parent_id = sn1.node_id
           and sn2.object_id = p.package_id
           and p.package_key = 'clickthrough'
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/clickthrough/tcl/clickthrough-procs-oracle.xql}
dbqd.clickthrough.tcl.clickthrough-procs.clickthrough_cache_sweeper.update_clickthrough_log_sql {dbqd.clickthrough.tcl.clickthrough-procs.clickthrough_cache_sweeper.update_clickthrough_log_sql {			update clickthrough_log
			   set click_count = click_count + :cached_click_count
			 where local_url = :cached_local_url
			   and foreign_url = :cached_foreign_url
			   and package_id = :cached_package_id
			   and trunc(entry_date) = trunc(sysdate)
		    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/clickthrough/tcl/clickthrough-procs-oracle.xql}
dbqd.clickthrough.tcl.clickthrough-procs.clickthrough_cache_sweeper.insert_clickthrough_log_sql {dbqd.clickthrough.tcl.clickthrough-procs.clickthrough_cache_sweeper.insert_clickthrough_log_sql {	insert into clickthrough_log
	    (local_url, foreign_url, entry_date, click_count, package_id)
	    select :cached_local_url, :cached_foreign_url, trunc(sysdate), 
		:cached_click_count, :cached_package_id    
	    from dual
	    where 0 = (
		select count(*)
		from clickthrough_log
		where local_url = :cached_local_url
		and foreign_url = :cached_foreign_url
		and package_id = :cached_package_id
		and trunc(entry_date) = trunc(sysdate)
		)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/clickthrough/tcl/clickthrough-procs-oracle.xql}
dbqd.clickthrough.tcl.clickthrough-procs.clickthrough_parent_package_id.parent_package_id_sql {dbqd.clickthrough.tcl.clickthrough-procs.clickthrough_parent_package_id.parent_package_id_sql {      select sn2.object_id as parent_package_id
        from site_nodes sn1, site_nodes sn2 
       where sn1.object_id = :clickthrough_package_id 
         and sn1.parent_id = sn2.node_id
      } {} {} {} F:/temp/openacs-4/packages/clickthrough/tcl/clickthrough-procs.xql}
dbqd.clickthrough.tcl.clickthrough-procs.clickthrough_parent_package_id.parent_package_id_sql {dbqd.clickthrough.tcl.clickthrough-procs.clickthrough_parent_package_id.parent_package_id_sql {      select sn2.object_id as parent_package_id
        from site_nodes sn1, site_nodes sn2 
       where sn1.object_id = :clickthrough_package_id 
         and sn1.parent_id = sn2.node_id
      } {} {} {} F:/temp/openacs-4/packages/clickthrough/tcl/clickthrough-procs.xql}
dbqd.clickthrough.www.admin.all-from-local.all_from_local {dbqd.clickthrough.www.admin.all-from-local.all_from_local {    select entry_date, sum(click_count) as n_clicks
      from clickthrough_log
     where local_url = :local_url
       and package_id = :parent_package_id
     group by entry_date
     order by entry_date desc
	} {} {} {} F:/temp/openacs-4/packages/clickthrough/www/admin/all-from-local.xql}
dbqd.clickthrough.www.admin.all-to-foreign.all_to_foreign {dbqd.clickthrough.www.admin.all-to-foreign.all_to_foreign {	    select entry_date, sum(click_count) as n_clicks 
      from clickthrough_log
     where foreign_url = :foreign_url
       and package_id = :parent_package_id
     group by entry_date
     order by entry_date desc
	} {} {} {} F:/temp/openacs-4/packages/clickthrough/www/admin/all-to-foreign.xql}
dbqd.clickthrough.www.admin.by-foreign-url-aggregate.by_foreign_url_aggregate {dbqd.clickthrough.www.admin.by-foreign-url-aggregate.by_foreign_url_aggregate {    select local_url, foreign_url, sum(click_count) as n_clicks
      from clickthrough_log
     where package_id = :parent_package_id
     group by local_url, foreign_url 
    having sum(click_count) >= :minimum
     order by foreign_url
	} {} {} {} F:/temp/openacs-4/packages/clickthrough/www/admin/by-foreign-url-aggregate.xql}
dbqd.clickthrough.www.admin.by-foreign-url. {dbqd.clickthrough.www.admin.by-foreign-url. {    select distinct local_url, foreign_url 
      from clickthrough_log
     where package_id = :parent_package_id
     order by foreign_url
	} {} {} {} F:/temp/openacs-4/packages/clickthrough/www/admin/by-foreign-url.xql}
dbqd.clickthrough.www.admin.by-local-url.by_local_url {dbqd.clickthrough.www.admin.by-local-url.by_local_url {    select distinct local_url, foreign_url 
      from clickthrough_log
     where package_id = :parent_package_id
     order by local_url

	} {} {} {} F:/temp/openacs-4/packages/clickthrough/www/admin/by-local-url.xql}
dbqd.clickthrough.www.admin.one-foreign-one-day.one_foreign_one_day {dbqd.clickthrough.www.admin.one-foreign-one-day.one_foreign_one_day {    select local_url, click_count
      from clickthrough_log
     where foreign_url = :foreign_url
       and entry_date = :query_date
       and package_id = :parent_package_id
     order by local_url
	} {} {} {} F:/temp/openacs-4/packages/clickthrough/www/admin/one-foreign-one-day.xql}
dbqd.clickthrough.www.admin.one-local-one-day.one_local_one_day {dbqd.clickthrough.www.admin.one-local-one-day.one_local_one_day {    select foreign_url, click_count
      from clickthrough_log
     where local_url = :local_url
       and entry_date = :query_date
       and package_id = :parent_package_id
     order by foreign_url
	} {} {} {} F:/temp/openacs-4/packages/clickthrough/www/admin/one-local-one-day.xql}
dbqd.clickthrough.www.admin.one-url-pair.one_url_pair {dbqd.clickthrough.www.admin.one-url-pair.one_url_pair {    select entry_date, click_count
      from clickthrough_log
     where local_url = :local_url
       and foreign_url = :foreign_url
       and package_id = :parent_package_id
     order by entry_date desc
	} {} {} {} F:/temp/openacs-4/packages/clickthrough/www/admin/one-url-pair.xql}
dbqd.clickthrough.www.index.parent_package_sql {dbqd.clickthrough.www.index.parent_package_sql {select sn2.object_id as parent_package_id, 
                                   site_node.url(sn2.node_id) as parent_package_url
                              from site_nodes sn1, site_nodes sn2 
                             where sn1.object_id = :clickthrough_package_id 
                               and sn1.parent_id = sn2.node_id
	} {} {} {} F:/temp/openacs-4/packages/clickthrough/www/index-oracle.xql}
dbqd.clickthrough.www.index.parent_package_sql {dbqd.clickthrough.www.index.parent_package_sql {select sn2.object_id as parent_package_id, 
                                   site_node.url(sn2.node_id) as parent_package_url
                              from site_nodes sn1, site_nodes sn2 
                             where sn1.object_id = :clickthrough_package_id 
                               and sn1.parent_id = sn2.node_id
	} {} {} {} F:/temp/openacs-4/packages/clickthrough/www/index.xql}
dbqd.cms.tcl.cms-folder-procs.cms_folder::get_registered_types.get_name_type {dbqd.cms.tcl.cms-folder-procs.cms_folder::get_registered_types.get_name_type {    select
      o.pretty_name,
      m.content_type
    from
      acs_object_types o, cr_folder_type_map m
    where
      m.folder_id = :folder_id
    and
      m.content_type = o.object_type
    and
      content_item.is_subclass(o.object_type, 'content_revision') = 't'
    order by
      decode(o.object_type, 'content_revision', '----', o.pretty_name)
	} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/cms-folder-procs-oracle.xql}
dbqd.cms.tcl.content-add-procs.content_add::content_method_html.count_text_mime_types {dbqd.cms.tcl.content-add-procs.content_add::content_method_html.count_text_mime_types {			select count(*)
			from cr_content_mime_type_map
			where mime_type like ('%text/%')
			 and content_type = :content_type
		} {} {} {} F:/temp/openacs-4/packages/cms/tcl/content-add-procs.xql}
dbqd.cms.tcl.content-add-procs.content_add::content_method_html.count_mime_types {dbqd.cms.tcl.content-add-procs.content_add::content_method_html.count_mime_types {			select count(*)
			from cr_content_mime_type_map
			where content_type = :content_type
		} {} {} {} F:/temp/openacs-4/packages/cms/tcl/content-add-procs.xql}
dbqd.cms.tcl.content-method-procs.content_method::get_content_methods.get_default_method {dbqd.cms.tcl.content-method-procs.content_method::get_content_methods.get_default_method {      select 
        content_method 
      from
        cm_content_methods m
      where
        content_method = content_method.get_method (:content_type )
      $text_entry_filter
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/content-method-procs-oracle.xql}
dbqd.cms.tcl.content-method-procs.content_method::get_content_method_options.get_content_default_method {dbqd.cms.tcl.content-method-procs.content_method::get_content_method_options.get_content_default_method {      select
        label, map.content_method
      from
        cm_content_type_method_map map, cm_content_methods m
      where
        map.content_method = m.content_method
      and
        map.content_method = content_method.get_method( :content_type )
      $text_entry_filter
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/content-method-procs-oracle.xql}
dbqd.cms.tcl.content-method-procs.content_method::text_entry_filter_sql.count_text_mime_types {dbqd.cms.tcl.content-method-procs.content_method::text_entry_filter_sql.count_text_mime_types {		select count(*)
		from cr_content_mime_type_map
		where mime_type like ('%text/%')
		 and content_type = :content_type
	} {} {} {} F:/temp/openacs-4/packages/cms/tcl/content-method-procs.xql}
dbqd.cms.tcl.content-method-procs.content_method::get_content_methods.get_methods_1 {dbqd.cms.tcl.content-method-procs.content_method::get_content_methods.get_methods_1 {  select
    map.content_method
  from
    cm_content_type_method_map map, cm_content_methods m
  where
    map.content_method = m.content_method
  and
    map.content_type = :content_type
  $text_entry_filter

	} {} {} {} F:/temp/openacs-4/packages/cms/tcl/content-method-procs.xql}
dbqd.cms.tcl.content-method-procs.content_method::get_content_methods.get_methods_2 {dbqd.cms.tcl.content-method-procs.content_method::get_content_methods.get_methods_2 {  select
    content_method
  from
    cm_content_methods m
  where 1 = 1
  $text_entry_filter

	} {} {} {} F:/temp/openacs-4/packages/cms/tcl/content-method-procs.xql}
dbqd.cms.tcl.content-method-procs.content_method::get_content_method_options.get_methods_1 {dbqd.cms.tcl.content-method-procs.content_method::get_content_method_options.get_methods_1 {	  select
	    label, map.content_method
	  from
	    cm_content_methods m, cm_content_type_method_map map
	  where
            m.content_method = map.content_method
	  and
	    map.content_type = :content_type
	  $text_entry_filter
	
      } {} {} {} F:/temp/openacs-4/packages/cms/tcl/content-method-procs.xql}
dbqd.cms.tcl.content-method-procs.content_method::get_content_method_options.get_methods_2 {dbqd.cms.tcl.content-method-procs.content_method::get_content_method_options.get_methods_2 {	  select
	    label, content_method
	  from
	    cm_content_methods m
	  where 1 = 1
	  $text_entry_filter
	
      } {} {} {} F:/temp/openacs-4/packages/cms/tcl/content-method-procs.xql}
dbqd.cms.tcl.form-procs.content::query_form_metadata.attributes_query_1 {dbqd.cms.tcl.form-procs.content::query_form_metadata.attributes_query_1 {    select
      attributes.attribute_id, attribute_name, 
      attributes.table_name,
      attribute_label, type_label, object_type as subtype, datatype, 
      params.is_html, params.is_required,
      widget, param,
      nvl( (select param_type from cm_attribute_widget_params
            where attribute_id = attributes.attribute_id
            and param_id = params.param_id), 'literal' ) param_type, 
      nvl( (select param_source from cm_attribute_widget_params
            where attribute_id = attributes.attribute_id
            and param_id = params.param_id), 
           'onevalue' ) param_source, 
      nvl( (select value from cm_attribute_widget_params
            where attribute_id = attributes.attribute_id
            and param_id = params.param_id), 
           params.default_value ) value
    from
      (
        select
          aw.attribute_id, fwp.param,
          aw.widget, decode(aw.is_required,'t','t',fwp.is_required) is_required,
          fwp.param_id, fwp.default_value, fwp.is_html
        from
          cm_form_widget_params fwp, cm_attribute_widgets aw
        where
          fwp.widget = aw.widget
      ) params,
      (
        select
          attr.attribute_id, attribute_name, sort_order, 
          attr.pretty_name as attribute_label, attr.datatype, 
          types.object_type, types.pretty_name as type_label, 
          tree_level, types.table_name
        from
          acs_attributes attr,
          (
            select 
              object_type, pretty_name, level as tree_level,
              table_name
            from 
              acs_object_types
            where 
              object_type <> 'acs_object'
            connect by 
              prior supertype = object_type
            start with 
              object_type = :content_type
          ) types
        where
          attr.object_type = types.object_type
      ) attributes
    where
      attributes.attribute_id = params.attribute_id

	} {} {} {} F:/temp/openacs-4/packages/cms/tcl/form-procs-oracle.xql}
dbqd.cms.tcl.form-procs.content::create_form_element.cfe_attribute_name_to_char {dbqd.cms.tcl.form-procs.content::create_form_element.cfe_attribute_name_to_char {	to_char($attribute_name, 'YYYY MM DD HH24 MI SS') 
                   as $attribute_name

	} {} {} {} F:/temp/openacs-4/packages/cms/tcl/form-procs-oracle.xql}
dbqd.cms.tcl.form-procs.content::create_form_element.get_revision_id {dbqd.cms.tcl.form-procs.content::create_form_element.get_revision_id {	select content_item.get_latest_revision(:item_id) from dual
	} {} {} {} F:/temp/openacs-4/packages/cms/tcl/form-procs-oracle.xql}
dbqd.cms.tcl.form-procs.content::get_revision_create_element.get_enum_1 {dbqd.cms.tcl.form-procs.content::get_revision_create_element.get_enum_1 {	select nvl(pretty_name,enum_value), enum_value
	from acs_enum_values
	where attribute_id = :attribute_id
	order by sort_order
	} {} {} {} F:/temp/openacs-4/packages/cms/tcl/form-procs-oracle.xql}
dbqd.cms.tcl.form-procs.content::process_revision_form.new_content_revision {dbqd.cms.tcl.form-procs.content::process_revision_form.new_content_revision {             begin
	     :revision_id := content_revision.new(
                 title         => :title,
                 description   => :description,
                 mime_type     => :mime_type,
                 text          => ' ',
                 item_id       => content_symlink.resolve(:item_id),
                 creation_ip   => '[ns_conn peeraddr]',
                 creation_user => [User::getID]
             );
             end;
	} {} {} {} F:/temp/openacs-4/packages/cms/tcl/form-procs-oracle.xql}
dbqd.cms.tcl.form-procs.content::process_revision_form.get_extended_attributes {dbqd.cms.tcl.form-procs.content::process_revision_form.get_extended_attributes {	  select 
            types.table_name, types.id_column, attr.attribute_name,
            attr.datatype
          from 
            acs_attributes attr,
            ( select 
                object_type, table_name, id_column, level as inherit_level
              from 
                acs_object_types
              where 
                object_type <> 'acs_object'
              and
                object_type <> 'content_revision'
              connect by 
                prior supertype = object_type
              start with 
                object_type = :content_type) types        
          where 
            attr.object_type (+) = types.object_type
          order by 
            types.inherit_level desc

	} {} {} {} F:/temp/openacs-4/packages/cms/tcl/form-procs-oracle.xql}
dbqd.cms.tcl.form-procs.content::insert_element_data.ied_get_objects_tree {dbqd.cms.tcl.form-procs.content::insert_element_data.ied_get_objects_tree {          select 
            types.table_name, types.id_column, attr.attribute_name,
            attr.datatype
          from 
            acs_attributes attr,
            ( select 
                object_type, table_name, id_column, level as inherit_level
              from 
                acs_object_types
              where 
                object_type not in ($sql_exclusion)
              connect by 
                prior supertype = object_type
              start with 
                object_type = :content_type) types        
          where 
            attr.object_type (+) = types.object_type

	} {} {} {} F:/temp/openacs-4/packages/cms/tcl/form-procs-oracle.xql}
dbqd.cms.tcl.form-procs.content::new_item.get_item_id {dbqd.cms.tcl.form-procs.content::new_item.get_item_id {        begin 
          :item_id := content_item.new( [join $params ","] );
        end;
        } {} {} {} F:/temp/openacs-4/packages/cms/tcl/form-procs-oracle.xql}
dbqd.cms.tcl.form-procs.content::upload_content.get_storage_type {dbqd.cms.tcl.form-procs.content::upload_content.get_storage_type {                select 
                  storage_type, item_id 
                from 
                  cr_items 
                where 
                  item_id = (select 
                               item_id 
                             from 
                               cr_revisions 
                             where revision_id = :revision_id)

	} {} {} {} F:/temp/openacs-4/packages/cms/tcl/form-procs-oracle.xql}
dbqd.cms.tcl.form-procs.content::upload_content.upload_file_revision {dbqd.cms.tcl.form-procs.content::upload_content.upload_file_revision {      update cr_revisions 
      set filename ='[cr_create_content_file $item_id $revision_id $tmpfile]',
      content_length = [file size $tmpfile]
      where revision_id = :revision_id
    
      } {} {} {} F:/temp/openacs-4/packages/cms/tcl/form-procs-oracle.xql}
dbqd.cms.tcl.form-procs.content::upload_content.upload_text_revision {dbqd.cms.tcl.form-procs.content::upload_content.upload_text_revision {             update cr_revisions 
             set content = empty_blob(), 
             content_length = [file size $tmpfile] 
             where revision_id = :revision_id
             returning content into :1
      
      } {} {} {} F:/temp/openacs-4/packages/cms/tcl/form-procs-oracle.xql}
dbqd.cms.tcl.form-procs.content::upload_content.upload_revision {dbqd.cms.tcl.form-procs.content::upload_content.upload_revision {             update cr_revisions 
             set content = empty_blob(), 
             content_length = [file size $tmpfile]
             where revision_id = :revision_id
             returning content into :1
      
      } {} {} {} F:/temp/openacs-4/packages/cms/tcl/form-procs-oracle.xql}
dbqd.cms.tcl.form-procs.content::get_sql_value.string_to_timestamp {dbqd.cms.tcl.form-procs.content::get_sql_value.string_to_timestamp {	to_date(:$name, 'YYYY MM DD HH24 MI SS')

	} {} {} {} F:/temp/openacs-4/packages/cms/tcl/form-procs-oracle.xql}
dbqd.cms.tcl.form-procs.content::add_child_relation_element.get_all_valid_relation_tags {dbqd.cms.tcl.form-procs.content::add_child_relation_element.get_all_valid_relation_tags {    select 
      relation_tag as label, relation_tag as value 
    from 
      cr_type_children c
    where
      content_item.is_subclass(:parent_type, c.parent_type) = 't'
    and
      content_item.is_subclass(:content_type, c.child_type) = 't'
    and
      content_item.is_valid_child(:parent_id, c.child_type) = 't'

	} {} {} {} F:/temp/openacs-4/packages/cms/tcl/form-procs-oracle.xql}
dbqd.cms.tcl.form-procs.content::add_child_relation_element.get_parent_title {dbqd.cms.tcl.form-procs.content::add_child_relation_element.get_parent_title {      select content_item.get_title(:parent_id) from dual

	} {} {} {} F:/temp/openacs-4/packages/cms/tcl/form-procs-oracle.xql}
dbqd.cms.tcl.form-procs.content::set_attribute_values.timestamp_to_string {dbqd.cms.tcl.form-procs.content::set_attribute_values.timestamp_to_string {	to_char($attr, 'YYYY MM DD HH24 MI SS') as $attr

	} {} {} {} F:/temp/openacs-4/packages/cms/tcl/form-procs-oracle.xql}
dbqd.cms.tcl.form-procs.content::get_attributes.ga_get_attributes {dbqd.cms.tcl.form-procs.content::get_attributes.ga_get_attributes {    select
      [join $args ","]
    from
      acs_attributes,
      (
	select 
	  object_type ancestor, level as type_order
	from 
	  acs_object_types
	connect by 
	  prior supertype = object_type
	start with 
          object_type = :content_type
      ) types
    where
      object_type = ancestor
    and
      attribute_name <> 'ldap dn'
    order by type_order desc, sort_order

	} {} {} {} F:/temp/openacs-4/packages/cms/tcl/form-procs-oracle.xql}
dbqd.cms.tcl.form-procs.content::get_attribute_enum_values.gaev_get_enum_values {dbqd.cms.tcl.form-procs.content::get_attribute_enum_values.gaev_get_enum_values {           select
	     nvl(pretty_name,enum_value), 
	     enum_value
	   from
	     acs_enum_values
	   where
	     attribute_id = :attribute_id
	   order by
	     sort_order

	</querytex>
</fullquery>

<fullquery name="content::get_latest_revision.glr_get_latest_revision">
	<querytext>

    select content_item.get_latest_revision(:item_id) from dual

	} {} {} {} F:/temp/openacs-4/packages/cms/tcl/form-procs-oracle.xql}
dbqd.cms.tcl.form-procs.content::add_basic_revision.basic_get_revision_id {dbqd.cms.tcl.form-procs.content::add_basic_revision.basic_get_revision_id {      begin :1 := content_revision.new(
               item_id       => content_symlink.resolve(:item_id),
               revision_id   => :revision_id,
               title         => :title,
               creation_ip   => :creation_ip,
               creation_user => :creation_user $param_sql); end;
      } {} {} {} F:/temp/openacs-4/packages/cms/tcl/form-procs-oracle.xql}
dbqd.cms.tcl.form-procs.content::update_content_from_file.get_storage_type {dbqd.cms.tcl.form-procs.content::update_content_from_file.get_storage_type {                select 
                  storage_type, item_id 
                from 
                  cr_items 
                where 
                  item_id = (select 
                               item_id 
                             from 
                               cr_revisions 
                             where revision_id = :revision_id)

	} {} {} {} F:/temp/openacs-4/packages/cms/tcl/form-procs-oracle.xql}
dbqd.cms.tcl.form-procs.content::update_content_from_file.upload_file_revision {dbqd.cms.tcl.form-procs.content::update_content_from_file.upload_file_revision {      update cr_revisions 
      set filename ='[cr_create_content_file $item_id $revision_id $tmpfile]',
      content_length = [file size $tmpfile]
      where revision_id = :revision_id

      } {} {} {} F:/temp/openacs-4/packages/cms/tcl/form-procs-oracle.xql}
dbqd.cms.tcl.form-procs.content::update_content_from_file.upload_text_revision {dbqd.cms.tcl.form-procs.content::update_content_from_file.upload_text_revision {             update cr_revisions 
             set content = empty_blob(), 
             content_length = [file size $tmpfile] 
             where revision_id = :revision_id
             returning content into :1
      
      } {} {} {} F:/temp/openacs-4/packages/cms/tcl/form-procs-oracle.xql}
dbqd.cms.tcl.form-procs.content::update_content_from_file.upload_revision {dbqd.cms.tcl.form-procs.content::update_content_from_file.upload_revision {             update cr_revisions 
             set content = empty_blob(), 
             content_length = [file size $tmpfile]
             where revision_id = :revision_id
             returning content into :1
      
      } {} {} {} F:/temp/openacs-4/packages/cms/tcl/form-procs-oracle.xql}
dbqd.cms.tcl.form-procs.content::copy_content.cc_copy_content {dbqd.cms.tcl.form-procs.content::copy_content.cc_copy_content {           begin
             content_revision.content_copy (
              revision_id      => :revision_id_src,
              revision_id_dest => :revision_id_dest
             );
           end;

	} {} {} {} F:/temp/openacs-4/packages/cms/tcl/form-procs-oracle.xql}
dbqd.cms.tcl.form-procs.content::create_form_element.get_content_type {dbqd.cms.tcl.form-procs.content::create_form_element.get_content_type {	select content_type from cr_items i, cr_revisions r
	where r.item_id = i.item_id
	and   r.revision_id = :revision_id
	} {} {} {} F:/temp/openacs-4/packages/cms/tcl/form-procs.xql}
dbqd.cms.tcl.form-procs.content::create_form_element.cfe_attribute_name {dbqd.cms.tcl.form-procs.content::create_form_element.cfe_attribute_name {	$attribute_name

	} {} {} {} F:/temp/openacs-4/packages/cms/tcl/form-procs.xql}
dbqd.cms.tcl.form-procs.content::create_form_element.get_element_value {dbqd.cms.tcl.form-procs.content::create_form_element.get_element_value {	select $what from ${table_name}x where revision_id = :revision_id
	} {} {} {} F:/temp/openacs-4/packages/cms/tcl/form-procs.xql}
dbqd.cms.tcl.form-procs.content::query_form_metadata.attributes_query_extra_where {dbqd.cms.tcl.form-procs.content::query_form_metadata.attributes_query_extra_where {	 and $extra_where

	} {} {} {} F:/temp/openacs-4/packages/cms/tcl/form-procs.xql}
dbqd.cms.tcl.form-procs.content::process_revision_form_dml.insert_revision_form {dbqd.cms.tcl.form-procs.content::process_revision_form_dml.insert_revision_form {              insert into $__last_table (
                [join $__columns ", "]
              ) values (
                [join $__values ", "]
              )"
	} {} {} {} F:/temp/openacs-4/packages/cms/tcl/form-procs.xql}
dbqd.cms.tcl.form-procs.content::insert_element_data.ied_get_objects_tree_extra_where {dbqd.cms.tcl.form-procs.content::insert_element_data.ied_get_objects_tree_extra_where {	 and $extra_where

	} {} {} {} F:/temp/openacs-4/packages/cms/tcl/form-procs.xql}
dbqd.cms.tcl.form-procs.content::insert_element_data.ied_get_objects_tree_order_by {dbqd.cms.tcl.form-procs.content::insert_element_data.ied_get_objects_tree_order_by {          order by 
            types.inherit_level desc

	} {} {} {} F:/temp/openacs-4/packages/cms/tcl/form-procs.xql}
dbqd.cms.tcl.form-procs.content::process_insert_statement.process_insert_statement {dbqd.cms.tcl.form-procs.content::process_insert_statement.process_insert_statement {              insert into $__last_table (
                [join $__columns ", "]
              ) values (
                [join $__values ", "]
              )"
	} {} {} {} F:/temp/openacs-4/packages/cms/tcl/form-procs.xql}
dbqd.cms.tcl.form-procs.content::add_revision.addrev_get_content_type {dbqd.cms.tcl.form-procs.content::add_revision.addrev_get_content_type {    select object_type as content_type, table_name
    from acs_object_types
    where object_type = (select content_type from cr_items 
                         where item_id = :item_id)
	} {} {} {} F:/temp/openacs-4/packages/cms/tcl/form-procs.xql}
dbqd.cms.tcl.form-procs.content::upload_content.update_mime_sql {dbqd.cms.tcl.form-procs.content::upload_content.update_mime_sql {      update cr_revisions 
        set mime_type = :mime_type 
        where revision_id = :revision_id

	} {} {} {} F:/temp/openacs-4/packages/cms/tcl/form-procs.xql}
dbqd.cms.tcl.form-procs.content::add_content_element.get_text_mime_types {dbqd.cms.tcl.form-procs.content::add_content_element.get_text_mime_types {	    select
	      label, map.mime_type as value
	    from
	      cr_mime_types types, cr_content_mime_type_map map
	    where
	      types.mime_type = map.mime_type
	    and
	      map.content_type = :content_type
	    and
	      lower(types.mime_type) like ('text/%')
	    order by
	      label

	} {} {} {} F:/temp/openacs-4/packages/cms/tcl/form-procs.xql}
dbqd.cms.tcl.form-procs.content::add_child_relation_element.get_parent_type {dbqd.cms.tcl.form-procs.content::add_child_relation_element.get_parent_type {    select content_type from cr_items 
    where item_id = :parent_id

	} {} {} {} F:/temp/openacs-4/packages/cms/tcl/form-procs.xql}
dbqd.cms.tcl.form-procs.content::get_widget_param_value.set_content_values {dbqd.cms.tcl.form-procs.content::get_widget_param_value.set_content_values {	$param(value)

	} {} {} {} F:/temp/openacs-4/packages/cms/tcl/form-procs.xql}
dbqd.cms.tcl.form-procs.content::get_type_attribute_params.gtap_get_attribute_data {dbqd.cms.tcl.form-procs.content::get_type_attribute_params.gtap_get_attribute_data {    select
      [join $columns ","]
    from
      cm_attribute_widget_param_ext x
    where
      object_type in ( [join $in_list ","] )

	} {} {} {} F:/temp/openacs-4/packages/cms/tcl/form-procs.xql}
dbqd.cms.tcl.form-procs.content::get_attribute_params.gap_get_attribute_data {dbqd.cms.tcl.form-procs.content::get_attribute_params.gap_get_attribute_data {    select
      [join $columns ","]
    from
      cm_attribute_widget_param_ext
    where
      object_type = :content_type
    and
      attribute_name = :attribute_name

	} {} {} {} F:/temp/openacs-4/packages/cms/tcl/form-procs.xql}
dbqd.cms.tcl.form-procs.content::set_attribute_values.get_previous_version_values {dbqd.cms.tcl.form-procs.content::set_attribute_values.get_previous_version_values {    select 
      [join $columns ", "] 
    from 
      [get_type_info $content_type table_name]x
    where 
      revision_id = :revision_id

	} {} {} {} F:/temp/openacs-4/packages/cms/tcl/form-procs.xql}
dbqd.cms.tcl.form-procs.content::get_default_content_method.count_mime_type {dbqd.cms.tcl.form-procs.content::get_default_content_method.count_mime_type {	select count(*) from cr_content_mime_type_map
	where content_type = :content_type and mime_type like 'text/%'

	} {} {} {} F:/temp/openacs-4/packages/cms/tcl/form-procs.xql}
dbqd.cms.tcl.form-procs.content::get_type_info.get_type_info_1 {dbqd.cms.tcl.form-procs.content::get_type_info.get_type_info_1 {      select 
        $ref
      from 
        acs_object_types 
      where 
        object_type = :object_type

	} {} {} {} F:/temp/openacs-4/packages/cms/tcl/form-procs.xql}
dbqd.cms.tcl.form-procs.content::get_type_info.get_type_info_2 {dbqd.cms.tcl.form-procs.content::get_type_info.get_type_info_2 {      select 
        [join $args ","]
      from 
        acs_object_types 
      where 
        object_type = :object_type

	} {} {} {} F:/temp/openacs-4/packages/cms/tcl/form-procs.xql}
dbqd.cms.tcl.form-procs.content::copy_content.cc_get_mime_type {dbqd.cms.tcl.form-procs.content::copy_content.cc_get_mime_type {      select mime_type from cr_revisions where revision_id = :revision_id_src

	} {} {} {} F:/temp/openacs-4/packages/cms/tcl/form-procs.xql}
dbqd.cms.tcl.form-procs.cc_update_cr_revisions.cc_update_cr_revisions {dbqd.cms.tcl.form-procs.cc_update_cr_revisions.cc_update_cr_revisions {           update cr_revisions
           set mime_type = :mime_type
           where revision_id = :revision_id_dest

	} {} {} {} F:/temp/openacs-4/packages/cms/tcl/form-procs.xql}
dbqd.cms.tcl.form-procs.content::validate_name.vn_same_name_count1 {dbqd.cms.tcl.form-procs.content::validate_name.vn_same_name_count1 {	  select count(1)
	  from cr_items
          where name = :name

	} {} {} {} F:/temp/openacs-4/packages/cms/tcl/form-procs.xql}
dbqd.cms.tcl.form-procs.content::validate_name.vn_same_name_count2 {dbqd.cms.tcl.form-procs.content::validate_name.vn_same_name_count2 {	  select count(1)
          from cr_items
          where name = :name
            and parent_id = :parent_id

	} {} {} {} F:/temp/openacs-4/packages/cms/tcl/form-procs.xql}
dbqd.cms.tcl.item-procs.item::is_publishable.ip_is_publishable_p {dbqd.cms.tcl.item-procs.item::is_publishable.ip_is_publishable_p {    select content_item.is_publishable(:item_id) from dual
  
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/item-procs-oracle.xql}
dbqd.cms.tcl.item-procs.item::get_title.gt_get_title {dbqd.cms.tcl.item-procs.item::get_title.gt_get_title {    select content_item.get_title(:item_id) from dual
  
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/item-procs-oracle.xql}
dbqd.cms.tcl.item-procs.item::get_id.id_get_item_id {dbqd.cms.tcl.item-procs.item::get_id.id_get_item_id {      select content_item__get_id(:url $root_sql) from dual
  
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/item-procs-oracle.xql}
dbqd.cms.tcl.item-procs.item::get_revision_content.grc_get_all_content_1 {dbqd.cms.tcl.item-procs.item::get_revision_content.grc_get_all_content_1 {	, content.blob_to_string(content) as text

	} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/item-procs-oracle.xql}
dbqd.cms.tcl.item-procs.item::get_item_from_revision.gifr_get_one_revision {dbqd.cms.tcl.item-procs.item::get_item_from_revision.gifr_get_one_revision {    select item_id from cr_revisions where revision_id = :revision_id
  
      } {} {} {} F:/temp/openacs-4/packages/cms/tcl/item-procs.xql}
dbqd.cms.tcl.item-procs.item::get_content_type.gct_get_content_type {dbqd.cms.tcl.item-procs.item::get_content_type.gct_get_content_type {    select content_type from cr_items where
      item_id = :item_id
  
      } {} {} {} F:/temp/openacs-4/packages/cms/tcl/item-procs.xql}
dbqd.cms.tcl.item-procs.item::content_methods_by_type.cmbt_get_content_mime_types {dbqd.cms.tcl.item-procs.item::content_methods_by_type.cmbt_get_content_mime_types {    select mime_type from cr_content_mime_type_map
      where content_type = :content_type
      and lower(mime_type) like 'text/%'
  
      } {} {} {} F:/temp/openacs-4/packages/cms/tcl/item-procs.xql}
dbqd.cms.tcl.item-procs.item::get_revision_content.grc_get_table_names {dbqd.cms.tcl.item-procs.item::get_revision_content.grc_get_table_names {    select table_name from acs_object_types 
    where object_type = :content_type
  
      } {} {} {} F:/temp/openacs-4/packages/cms/tcl/item-procs.xql}
dbqd.cms.tcl.item-procs.item::get_revision_content.grc_get_all_content {dbqd.cms.tcl.item-procs.item::get_revision_content.grc_get_all_content {      select 
    x.*, 
    :item_id as item_id $text_sql, 
    :content_type as content_type
  from
    cr_revisions r, ${table_name}x x
  where
    r.revision_id = :revision_id
  and 
    x.revision_id = r.revision_id
  
      } {} {} {} F:/temp/openacs-4/packages/cms/tcl/item-procs.xql}
dbqd.cms.tcl.item-procs.item::get_publish_status.gps_get_publish_status {dbqd.cms.tcl.item-procs.item::get_publish_status.gps_get_publish_status {    select publish_status from cr_items where item_id = :item_id
  
      } {} {} {} F:/temp/openacs-4/packages/cms/tcl/item-procs.xql}
dbqd.cms.tcl.module-procs.cm::modules::users::getSortedPaths.users_get_paths {dbqd.cms.tcl.module-procs.cm::modules::users::getSortedPaths.users_get_paths {          select 
            o.object_id as item_id,
            o.object_type || ': ' || acs_object.name(o.object_id) as item_path,
            o.object_type as item_type
          from
            acs_objects o, parties p
          where
            o.object_id = p.party_id
          and
            o.object_id in ($sql_id_list)
          order by
            item_path

     } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/module-procs-oracle.xql}
dbqd.cms.tcl.module-procs.cm::modules::sitemap::getSortedPaths.sitemap_get_name {dbqd.cms.tcl.module-procs.cm::modules::sitemap::getSortedPaths.sitemap_get_name {       select 
         item_id, 
         content_item.get_path(item_id, :sorted_paths_root_id) as item_path,
         content_type as item_type
       from 
         cr_items
       where
         item_id in ($sql_id_list)
       order by item_path
       

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/module-procs-oracle.xql}
dbqd.cms.tcl.module-procs.cm::modules::categories::getSortedPaths.get_paths {dbqd.cms.tcl.module-procs.cm::modules::categories::getSortedPaths.get_paths {          select 
            keyword_id as item_id,
            content_keyword.get_path(keyword_id) as item_path,
            'content_keyword' as item_type
          from
            cr_keywords
          where 
            keyword_id in ($sql_id_list)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/module-procs-oracle.xql}
dbqd.cms.tcl.module-procs.cm::modules::getChildFolders.module_get_result {dbqd.cms.tcl.module-procs.cm::modules::getChildFolders.module_get_result {        select
	  :mount_point as mount_point,
	  r.name, 
          r.item_id,
          '' as children,
	  nvl((select 't' from dual where exists
	    (select 1 from cr_folders f_child, cr_resolved_items r_child
	       where r_child.parent_id = r.resolved_id
		 and f_child.folder_id = r_child.resolved_id)), 'f') expandable,
	  r.is_symlink symlink, 
          0 update_time
	from
	  cr_folders f, cr_resolved_items r
	where
	  r.parent_id = :id
	and
	  r.resolved_id = f.folder_id
	order by
	  name
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/module-procs-oracle.xql}
dbqd.cms.tcl.module-procs.cm::modules::templates::getRootFolderID.template_get_root_id {dbqd.cms.tcl.module-procs.cm::modules::templates::getRootFolderID.template_get_root_id {            select content_template.get_root_folder() from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/module-procs-oracle.xql}
dbqd.cms.tcl.module-procs.cm::modules::sitemap::getRootFolderID.sitemap_get_root_id {dbqd.cms.tcl.module-procs.cm::modules::sitemap::getRootFolderID.sitemap_get_root_id {            select content_item.get_root_folder() from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/module-procs-oracle.xql}
dbqd.cms.tcl.module-procs.cm::modules::types::getTypesTree.types_get_result {dbqd.cms.tcl.module-procs.cm::modules::types::getTypesTree.types_get_result {          select
            lpad(' ', level, '-') || pretty_name as label,
            object_type as value
          from
            acs_object_types t
          connect by
            supertype = prior object_type
          start with
            object_type = 'content_revision'
        
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/module-procs-oracle.xql}
dbqd.cms.tcl.module-procs.cm::modules::types::getChildFolders.get_result {dbqd.cms.tcl.module-procs.cm::modules::types::getChildFolders.get_result {      select
                     :module_name as mount_point,
                     t.pretty_name, 
                     t.object_type,
                     '' as children,
                     NVL(
                      (select 't' from dual 
                        where exists (select 1 from acs_object_types
                          where supertype = t.object_type)),
                      'f'
                     ) as expandable,
                     'f' as symlink, 
                     0 as update_time
                   from 
                     acs_object_types t
                   where 
                     supertype = :id
                   order by 
                     t.pretty_name
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/module-procs-oracle.xql}
dbqd.cms.tcl.module-procs.cm::modules::categories::getChildFolders.category_get_children {dbqd.cms.tcl.module-procs.cm::modules::categories::getChildFolders.category_get_children {      select 
                     :module_name as mount_point,
                     content_keyword.get_heading(keyword_id) as name, 
                     keyword_id, 
                     '' as children,
                     NVL( (select 't' from dual 
                             where exists (
                               select 1 from cr_keywords k2
                                 where k2.parent_id = k.keyword_id
                                   and content_keyword.is_leaf(k2.keyword_id) = 'f')),
                           'f') as expandable,
                     'f' as symlink,
                     0 as update_time           
                   from 
                     cr_keywords k
                   where 
                     $where_clause
                   and
                     content_keyword.is_leaf(keyword_id) = 'f'
                   order by 
                     name
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/module-procs-oracle.xql}
dbqd.cms.tcl.module-procs.cm::modules::users::getChildFolders.users_get_result {dbqd.cms.tcl.module-procs.cm::modules::users::getChildFolders.users_get_result {      select
                     :module_name as mount_point,
                     g.group_name as name, 
                     g.group_id, '' as children,
                     NVL(
                      (select 't' from dual 
                        where exists (
                          select 1 from group_component_map m2
                          where m2.group_id = g.group_id)),
                      'f' 
                     ) as expandable,
                     'f' as symlink,
                     0 as update_time
                   from 
                     groups g $map_table
                   where 
                     $where_clause
                   order by 
                     name
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/module-procs-oracle.xql}
dbqd.cms.tcl.module-procs.cm::modules::get_module_id.module_get_id {dbqd.cms.tcl.module-procs.cm::modules::get_module_id.module_get_id {        select module_id from cm_modules
          where key = :module_name
      
      } {} {} {} F:/temp/openacs-4/packages/cms/tcl/module-procs.xql}
dbqd.cms.tcl.module-procs.cm::modules::getMountPoints.get_list {dbqd.cms.tcl.module-procs.cm::modules::getMountPoints.get_list {      select 
         key, name, '' as id, 
         '' as children, 't' as expandable, 'f' as symlink,
         0 as update_time
       from cm_modules 
       order by sort_key
      } {} {} {} F:/temp/openacs-4/packages/cms/tcl/module-procs.xql}
dbqd.cms.tcl.module-procs.cm::modules::clipboard::getChildFolders.clip_get_result {dbqd.cms.tcl.module-procs.cm::modules::clipboard::getChildFolders.clip_get_result {      select
                     :module_name as mount_point,
                     name, key, '' as children,
                     'f' as expandable,
                     'f' as symlink,
                     0 as update_type
                   from cm_modules order by sort_key
      } {} {} {} F:/temp/openacs-4/packages/cms/tcl/module-procs.xql}
dbqd.cms.tcl.pagination-procs.pagination::paginate_query.pg_paginate_query {dbqd.cms.tcl.pagination-procs.pagination::paginate_query.pg_paginate_query {      select *
      from
        (
          select 
            x.*, rownum as row_id
	  from
	    ($sql) x
        ) ordered_sql_query_with_row_id
      where
        row_id between $start_row and $start_row + $rows_per_page - 1

	} {} {} {} F:/temp/openacs-4/packages/cms/tcl/pagination-procs-oracle.xql}
dbqd.cms.tcl.pagination-procs.pagination::get_total_pages.gtp_get_total_pages {dbqd.cms.tcl.pagination-procs.pagination::get_total_pages.gtp_get_total_pages {	  select 
	    ceil(count(*) / [pagination::get_rows_per_page] )
	  from
            ($sql) x
	
      } {} {} {} F:/temp/openacs-4/packages/cms/tcl/pagination-procs.xql}
dbqd.cms.tcl.perm-procs.content::check_access.ca_get_perm_list {dbqd.cms.tcl.perm-procs.content::check_access.ca_get_perm_list {    select 
      p.privilege,
      cms_permission.permission_p (
        :object_id, :user_id, p.privilege
      ) as is_granted
    from 
      acs_privileges p
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/perm-procs-oracle.xql}
dbqd.cms.tcl.perm-procs.content::check_access.ca_get_msg_info {dbqd.cms.tcl.perm-procs.content::check_access.ca_get_msg_info {	select 
	  acs_object.name(:object_id) as obj_name, 
	  pretty_name as perm_name
	from 
	  acs_privileges
	where 
	  privilege = :privilege
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/perm-procs-oracle.xql}
dbqd.cms.tcl.perm-procs.content::perm_form_generate.pfg_get_permission_boxes {dbqd.cms.tcl.perm-procs.content::perm_form_generate.pfg_get_permission_boxes {      select 
	t.child_privilege as privilege, 
	lpad(' ', t.tree_level * 24, '&nbsp;') || 
          NVL(p.pretty_name, t.child_privilege) as label,
	cms_permission.permission_p(
	 :object_id, :grantee_id, t.child_privilege
	) as permission_p,
        cms_permission.permission_p (
	 :object_id, :grantee_id, t.privilege
	) as parent_permission_p
      from (
	select privilege, child_privilege, level as tree_level
	  from acs_privilege_hierarchy
	  connect by privilege = prior child_privilege
	  start with privilege = 'cm_root'
	) t, acs_privileges p
      where
	p.privilege = t.child_privilege
      and (
	cms_permission.has_grant_authority (
	  :object_id, :user_id, t.child_privilege
	) = 't' 
	or
	cms_permission.has_revoke_authority (
	  :object_id, :user_id, t.child_privilege, :grantee_id
	) = 't' 
      )

	} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/perm-procs-oracle.xql}
dbqd.cms.tcl.perm-procs.content::perm_form_process.pfp_grant_permission_1 {dbqd.cms.tcl.perm-procs.content::perm_form_process.pfp_grant_permission_1 {                     begin 
	               cms_permission.grant_permission (
		         item_id => :object_id, 
		         holder_id => :user_id,
		         privilege => :privilege, 
		         recepient_id => :grantee_id,
                         is_recursive => :pf_is_recursive
	               );
	             end;

	} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/perm-procs-oracle.xql}
dbqd.cms.tcl.perm-procs.content::perm_form_process.pfp_revoke_permission_1 {dbqd.cms.tcl.perm-procs.content::perm_form_process.pfp_revoke_permission_1 {                     begin 
     	               cms_permission.revoke_permission (
		         item_id => :object_id, 
		         holder_id => :user_id,
		         privilege => :privilege, 
		         revokee_id => :grantee_id,
                         is_recursive => :pf_is_recursive
	               );
	             end;

	} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/perm-procs-oracle.xql}
dbqd.cms.tcl.perm-procs.content::check_access.ca_get_user_name {dbqd.cms.tcl.perm-procs.content::check_access.ca_get_user_name {      select screen_name from users where user_id = :user_id
    
      } {} {} {} F:/temp/openacs-4/packages/cms/tcl/perm-procs.xql}
dbqd.cms.tcl.publish-procs.publish::track_publish_status.tps_get_items_multilist {dbqd.cms.tcl.publish-procs.publish::track_publish_status.tps_get_items_multilist {            select 
	      distinct i.item_id, i.live_revision 
            from 
      	      cr_items i, cr_release_periods p
            where
  	      i.publish_status = 'ready'
             and
	      i.live_revision is not null
             and 
              i.item_id = p.item_id
             and
              (sysdate between p.start_when and p.end_when)
          
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/publish-procs-oracle.xql}
dbqd.cms.tcl.publish-procs.publish::track_publish_status.tps_get_items_onelist {dbqd.cms.tcl.publish-procs.publish::track_publish_status.tps_get_items_onelist {            select 
  	      distinct i.item_id
            from 
  	      cr_items i, cr_release_periods p
            where
	      i.publish_status = 'live'
            and
  	      i.live_revision is not null
            and 
              i.item_id = p.item_id     
            and 
	      not exists (select 1 from cr_release_periods p2
		          where p2.item_id = i.item_id
		           and (sysdate between p2.start_when and p2.end_when)
	                 )
            
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/publish-procs-oracle.xql}
dbqd.cms.tcl.publish-procs.publish::set_publish_status.sps_update_cr_items {dbqd.cms.tcl.publish-procs.publish::set_publish_status.sps_update_cr_items {      update cr_items set publish_status = :new_status
                              where item_id = :item_id
      } {} {} {} F:/temp/openacs-4/packages/cms/tcl/publish-procs.xql}
dbqd.cms.tcl.rel-procs.cms_rel::sort_related_item_order.srio_get_related_items {dbqd.cms.tcl.rel-procs.cms_rel::sort_related_item_order.srio_get_related_items {            select
              rel_id
            from
              cr_item_rels
            where
              item_id = :item_id
            order by
              order_n, rel_id
        
      } {} {} {} F:/temp/openacs-4/packages/cms/tcl/rel-procs.xql}
dbqd.cms.tcl.rel-procs.cms_rel::sort_child_item_order.scio_get_child_order {dbqd.cms.tcl.rel-procs.cms_rel::sort_child_item_order.scio_get_child_order {            select
              rel_id
            from
              cr_child_rels
            where
              parent_id = :item_id
            order by
              order_n, rel_id
        
      } {} {} {} F:/temp/openacs-4/packages/cms/tcl/rel-procs.xql}
dbqd.cms.tcl.user-procs.User::cms_admin_exists.cae_admin_exists {dbqd.cms.tcl.user-procs.User::cms_admin_exists.cae_admin_exists {      select content_permission.cm_admin_exists from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/user-procs-oracle.xql}
dbqd.cms.tcl.user-procs.User::getName.gn_get_name {dbqd.cms.tcl.user-procs.User::getName.gn_get_name {      select 
        $col
      from 
        persons
      where
        person_id = [getID]
      } {} {} {} F:/temp/openacs-4/packages/cms/tcl/user-procs.xql}
dbqd.cms.tcl.widget-procs.widget::process_param.pp_proces_param {dbqd.cms.tcl.widget-procs.widget::process_param.pp_proces_param {      begin
      cm_form_widget.set_attribute_param_value (
          content_type   => :content_type,
          attribute_name => :attribute_name,
          param          => :param_$order,
          param_type     => :param_type_$order,
          param_source   => :param_source_$order,
          value          => :param_value_$order
      );
      end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/widget-procs-oracle.xql}
dbqd.cms.tcl.workflow-procs.wf_case_info.case {dbqd.cms.tcl.workflow-procs.wf_case_info.case {        select case_id,
               acs_object.name(object_id) as object_name,
        
               state
        from   wf_cases
        where  case_id = :case_id
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/workflow-procs-oracle.xql}
dbqd.cms.tcl.workflow-procs.wf_task_info.task {dbqd.cms.tcl.workflow-procs.wf_task_info.task {        select t.task_id,
               t.case_id, 
               c.object_id,
               acs_object.name(c.object_id) as object_name,
               ot.pretty_name as object_type_pretty,
               c.workflow_key,
               tr.transition_name as task_name, 
               tr.instructions,
               t.state, 
               t.enabled_date,
               to_char(t.enabled_date, :date_format) as enabled_date_pretty,
               t.started_date,
               to_char(t.started_date, :date_format) as started_date_pretty,
               t.canceled_date,
               to_char(t.canceled_date, :date_format) as canceled_date_pretty,
               t.finished_date,
               to_char(t.finished_date, :date_format) as finished_date_pretty,
               t.overridden_date,
               to_char(t.overridden_date, :date_format) as overridden_date_pretty,
               t.holding_user, 
               acs_object.name(t.holding_user) as holding_user_name,
               p.email as holding_user_email,
               t.hold_timeout,
               to_char(t.hold_timeout, :date_format) as hold_timeout_pretty,
               t.deadline,
               to_char(t.deadline, :date_format) as deadline_pretty,
               t.deadline - sysdate as days_till_deadline,
               tr.estimated_minutes,
               sysdate
          from wf_tasks t, 
               wf_cases c, 
               wf_transition_info tr, 
               acs_objects o, 
               acs_object_types ot, 
               parties p
         where t.task_id = :task_id
           and c.case_id = t.case_id
           and tr.transition_key = t.transition_key
           and tr.workflow_key = t.workflow_key and tr.context_key = c.context_key
           and o.object_id = c.object_id
           and ot.object_type = o.object_type
           and p.party_id (+) = t.holding_user
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/workflow-procs-oracle.xql}
dbqd.cms.tcl.workflow-procs.wf_task_info.task_attributes_to_set {dbqd.cms.tcl.workflow-procs.wf_task_info.task_attributes_to_set {        select a.attribute_id,
               a.attribute_name, 
               a.pretty_name, 
               a.datatype, 
               acs_object.get_attribute(t.case_id, a.attribute_name) as value,
               '' as attribute_widget
          from acs_attributes a, wf_transition_attribute_map m, wf_tasks t
         where t.task_id = :task_id
           and m.workflow_key = t.workflow_key and m.transition_key = t.transition_key
           and a.attribute_id = m.attribute_id
         order by m.sort_order
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/workflow-procs-oracle.xql}
dbqd.cms.tcl.workflow-procs.wf_task_info.task_assigned_users {dbqd.cms.tcl.workflow-procs.wf_task_info.task_assigned_users {        select ut.user_id,
               acs_object.name(ut.user_id) as name,
               p.email as email
          from wf_user_tasks ut, parties p
         where ut.task_id = :task_id
           and p.party_id = ut.user_id
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/workflow-procs-oracle.xql}
dbqd.cms.tcl.workflow-procs.wf_journal.journal {dbqd.cms.tcl.workflow-procs.wf_journal.journal {        select j.journal_id,
               j.action,
               j.action_pretty,
               o.creation_date,
               to_char(o.creation_date, :date_format) as creation_date_pretty,
               o.creation_user,
               acs_object.name(o.creation_user) as creation_user_name,
               p.email as creation_user_email, 
               o.creation_ip,
               j.msg
        from   journal_entries j, acs_objects o, parties p
        where  j.object_id = :case_id
          and  o.object_id = j.journal_id
          and  p.party_id (+) =  o.creation_user
        order  by o.creation_date $sql_order
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/workflow-procs-oracle.xql}
dbqd.cms.tcl.workflow-procs.wf_task_action.begin_task_action {dbqd.cms.tcl.workflow-procs.wf_task_action.begin_task_action {            begin
                :1 := workflow_case.begin_task_action(
                    task_id => :task_id, 
                    action => :action, 
                    action_ip => :modifying_ip,
                    user_id => :user_id, 
                    msg => :msg);
            end;
        
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/workflow-procs-oracle.xql}
dbqd.cms.tcl.workflow-procs.wf_task_action.set_attribute_value {dbqd.cms.tcl.workflow-procs.wf_task_action.set_attribute_value {                    begin
                        workflow_case.set_attribute_value(
                            journal_id => :journal_id, 
                            attribute_name => :attribute_name, 
                            value => :value
                        );
                    end;
                
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/workflow-procs-oracle.xql}
dbqd.cms.tcl.workflow-procs.wf_task_action.clear_assignments {dbqd.cms.tcl.workflow-procs.wf_task_action.clear_assignments {                    begin 
                        workflow_case.clear_manual_assignments(
                            case_id => :case_id,
                            role_key => :role_key
                        );
                    end;
                
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/workflow-procs-oracle.xql}
dbqd.cms.tcl.workflow-procs.wf_task_action.add_manual_assignment {dbqd.cms.tcl.workflow-procs.wf_task_action.add_manual_assignment {                        begin
                            workflow_case.add_manual_assignment(
                                case_id => :case_id,
                                role_key => :role_key,
                                party_id => :party_id
                            );
                        end;
                    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/workflow-procs-oracle.xql}
dbqd.cms.tcl.workflow-procs.wf_task_action.end_task_action {dbqd.cms.tcl.workflow-procs.wf_task_action.end_task_action {            begin
                workflow_case.end_task_action(
                    journal_id => :journal_id,
                    action => :action,
                    task_id => :task_id
                );
            end;
        
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/workflow-procs-oracle.xql}
dbqd.cms.tcl.workflow-procs.wf_message_transition_fire.transition_fire {dbqd.cms.tcl.workflow-procs.wf_message_transition_fire.transition_fire {        begin
            workflow_case.fire_message_transition(
                task_id => :task_id
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/workflow-procs-oracle.xql}
dbqd.cms.tcl.workflow-procs.wf_case_new.workflow_case_new {dbqd.cms.tcl.workflow-procs.wf_case_new.workflow_case_new {      begin 
            :1 := workflow_case.new(case_id => :case_id,
                                    workflow_key => :workflow_key,
                                    context_key => :context_key,
                                    object_id => :object_id,
                                    creation_user => :user_id,
                                    creation_ip => :creation_ip
                                   ); 
      end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/workflow-procs-oracle.xql}
dbqd.cms.tcl.workflow-procs.wf_case_new.workflow_case_start_case {dbqd.cms.tcl.workflow-procs.wf_case_new.workflow_case_start_case {      begin workflow_case.start_case(case_id => :case_id,
                                     creation_user => :user_id,
                                     creation_ip => :creation_ip
                                    ); end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/workflow-procs-oracle.xql}
dbqd.cms.tcl.workflow-procs.wf_case_suspend.case_suspend {dbqd.cms.tcl.workflow-procs.wf_case_suspend.case_suspend {        begin
            workflow_case.suspend(
                case_id => :case_id, 
                user_id => :user_id,
                ip_address => :ip_address,
                msg => :msg
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/workflow-procs-oracle.xql}
dbqd.cms.tcl.workflow-procs.wf_case_resume.case_resume {dbqd.cms.tcl.workflow-procs.wf_case_resume.case_resume {        begin
            workflow_case.resume(
                case_id => :case_id, 
                user_id => :user_id,
                ip_address => :ip_address,
                msg => :msg
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/workflow-procs-oracle.xql}
dbqd.cms.tcl.workflow-procs.wf_case_cancel.case_cancel {dbqd.cms.tcl.workflow-procs.wf_case_cancel.case_cancel {        begin
            workflow_case.cancel(
                case_id => :case_id, 
                user_id => :user_id,
                ip_address => :ip_address,
                msg => :msg
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/workflow-procs-oracle.xql}
dbqd.cms.tcl.workflow-procs.wf_case_comment.case_comment {dbqd.cms.tcl.workflow-procs.wf_case_comment.case_comment {        begin
            :1 := journal_entry.new(
                object_id => :case_id,
                action => 'comment',
                creation_user => :user_id,
                creation_ip => :ip_address,
                msg => :msg
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/workflow-procs-oracle.xql}
dbqd.cms.tcl.workflow-procs.wf_task_action.add_manual_assignment {dbqd.cms.tcl.workflow-procs.wf_task_action.add_manual_assignment {                        begin
                            workflow_case.add_manual_assignment(
                                case_id => :case_id,
                                role_key => :role_key,
                                party_id => :party_id
                            );
                        end;
                    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/workflow-procs-oracle.xql}
dbqd.cms.tcl.workflow-procs.wf_case_remove_manual_assignment.remove_manual_assignment {dbqd.cms.tcl.workflow-procs.wf_case_remove_manual_assignment.remove_manual_assignment {	begin
            workflow_case.remove_manual_assignment(
                case_id  => :case_id,
                role_key => :role_key,
                party_id => :party_id
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/workflow-procs-oracle.xql}
dbqd.cms.tcl.workflow-procs.wf_case_clear_manual_assignments.clear_manual_assignments {dbqd.cms.tcl.workflow-procs.wf_case_clear_manual_assignments.clear_manual_assignments {	begin
            workflow_case.clear_manual_assignments(
                case_id  => :case_id,
                role_key => :role_key
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/workflow-procs-oracle.xql}
dbqd.cms.tcl.workflow-procs.wf_case_add_task_assignment.add_task_assignment {dbqd.cms.tcl.workflow-procs.wf_case_add_task_assignment.add_task_assignment {	begin
            workflow_case.add_task_assignment(
                task_id  => :task_id,
                party_id => :party_id,
                permanent_p => :permanent_value
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/workflow-procs-oracle.xql}
dbqd.cms.tcl.workflow-procs.wf_case_remove_task_assignment.remove_task_assignment {dbqd.cms.tcl.workflow-procs.wf_case_remove_task_assignment.remove_task_assignment {	begin
            workflow_case.remove_task_assignment(
                task_id  => :task_id,
                party_id => :party_id,
                permanent_p => :permanent_value
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/workflow-procs-oracle.xql}
dbqd.cms.tcl.workflow-procs.wf_case_clear_task_assignments.clear_task_assignments {dbqd.cms.tcl.workflow-procs.wf_case_clear_task_assignments.clear_task_assignments {	begin
            workflow_case.clear_task_assignments(
                task_id  => :task_id,
                permanent_p => :permanent_value
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/workflow-procs-oracle.xql}
dbqd.cms.tcl.workflow-procs.wf_case_set_case_deadline.set_case_deadline {dbqd.cms.tcl.workflow-procs.wf_case_set_case_deadline.set_case_deadline {	begin
            workflow_case.set_case_deadline(
	        case_id => :case_id,
                transition_key => :transition_key,
                deadline => :deadline
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/workflow-procs-oracle.xql}
dbqd.cms.tcl.workflow-procs.wf_case_remove_case_deadline.remove_case_deadline {dbqd.cms.tcl.workflow-procs.wf_case_remove_case_deadline.remove_case_deadline {	begin
            workflow_case.remove_case_deadline(
	        case_id => :case_id,
                transition_key => :transition_key
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/workflow-procs-oracle.xql}
dbqd.cms.tcl.workflow-procs.wf_add_place.wf_add_place {dbqd.cms.tcl.workflow-procs.wf_add_place.wf_add_place {        begin
            workflow.add_place(
                workflow_key => :workflow_key,
                place_key => :place_key,
                place_name => :place_name,
                sort_order => :sort_order
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/workflow-procs-oracle.xql}
dbqd.cms.tcl.workflow-procs.wf_delete_place.wf_delete_place {dbqd.cms.tcl.workflow-procs.wf_delete_place.wf_delete_place {        begin
            workflow.delete_place(
                workflow_key => :workflow_key,
                place_key => :place_key
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/workflow-procs-oracle.xql}
dbqd.cms.tcl.workflow-procs.wf_add_role.wf_add_role {dbqd.cms.tcl.workflow-procs.wf_add_role.wf_add_role {	begin
            workflow.add_role(
                workflow_key => :workflow_key,
                role_key => :role_key,
                role_name => :role_name,
                sort_order => :sort_order
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/workflow-procs-oracle.xql}
dbqd.cms.tcl.workflow-procs.wf_move_role_up.move_role_up {dbqd.cms.tcl.workflow-procs.wf_move_role_up.move_role_up {	begin
            workflow.move_role_up(
                workflow_key => :workflow_key,
                role_key => :role_key
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/workflow-procs-oracle.xql}
dbqd.cms.tcl.workflow-procs.wf_move_role_down.move_role_down {dbqd.cms.tcl.workflow-procs.wf_move_role_down.move_role_down {	begin
            workflow.move_role_down(
                workflow_key => :workflow_key,
                role_key => :role_key
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/workflow-procs-oracle.xql}
dbqd.cms.tcl.workflow-procs.wf_delete_role.wf_delete_role {dbqd.cms.tcl.workflow-procs.wf_delete_role.wf_delete_role {	begin
            workflow.delete_role(
                workflow_key => :workflow_key,
                role_key => :role_key
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/workflow-procs-oracle.xql}
dbqd.cms.tcl.workflow-procs.wf_add_transition.wf_add_transition {dbqd.cms.tcl.workflow-procs.wf_add_transition.wf_add_transition {	    begin
		workflow.add_transition(
		    workflow_key => :workflow_key,
		    transition_key => :transition_key,
		    transition_name => :transition_name,
		    role_key => :role_key,
		    sort_order => :sort_order,
		    trigger_type => :trigger_type
		);
	    end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/workflow-procs-oracle.xql}
dbqd.cms.tcl.workflow-procs.wf_delete_transition.wf_delete_transition {dbqd.cms.tcl.workflow-procs.wf_delete_transition.wf_delete_transition {	begin
            workflow.delete_transition(
                workflow_key => :workflow_key,
                transition_key => :transition_key
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/workflow-procs-oracle.xql}
dbqd.cms.tcl.workflow-procs.wf_add_arc.wf_add_arc {dbqd.cms.tcl.workflow-procs.wf_add_arc.wf_add_arc {        begin
            workflow.add_arc(
                workflow_key => :workflow_key,
	        transition_key => :transition_key,
                place_key => :place_key,
                direction => :direction,
                guard_callback => :guard_callback,
                guard_custom_arg => :guard_custom_arg,
                guard_description => :guard_description
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/workflow-procs-oracle.xql}
dbqd.cms.tcl.workflow-procs.wf_add_arc_out.wf_add_arc {dbqd.cms.tcl.workflow-procs.wf_add_arc_out.wf_add_arc {        begin
            workflow.add_arc(
                workflow_key => :workflow_key,
	        transition_key => :from_transition_key,
                place_key => :to_place_key,
                guard_callback => :guard_callback,
                guard_custom_arg => :guard_custom_arg,
                guard_description => :guard_description
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/workflow-procs-oracle.xql}
dbqd.cms.tcl.workflow-procs.wf_add_arc_in.wf_add_arc {dbqd.cms.tcl.workflow-procs.wf_add_arc_in.wf_add_arc {        begin
            workflow.add_arc(
                workflow_key => :workflow_key,
	        transition_key => :to_transition_key,
                place_key => :from_place_key
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/workflow-procs-oracle.xql}
dbqd.cms.tcl.workflow-procs.wf_delete_arc.wf_delete_arc {dbqd.cms.tcl.workflow-procs.wf_delete_arc.wf_delete_arc {        begin
            workflow.delete_arc(
                workflow_key => :workflow_key,
                transition_key => :transition_key,
                place_key => :place_key,
                direction => :direction
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/workflow-procs-oracle.xql}
dbqd.cms.tcl.workflow-procs.wf_add_trans_attribute_map.add_trans_attribute_map_attribute_id {dbqd.cms.tcl.workflow-procs.wf_add_trans_attribute_map.add_trans_attribute_map_attribute_id {	    begin
	        workflow.add_trans_attribute_map(
                    workflow_key => :workflow_key,
	            transition_key => :transition_key,
	            attribute_id => :attribute_id,
	            sort_order => :sort_order
                );
	    end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/workflow-procs-oracle.xql}
dbqd.cms.tcl.workflow-procs.wf_add_trans_attribute_map.add_trans_attribute_map_attribute_name {dbqd.cms.tcl.workflow-procs.wf_add_trans_attribute_map.add_trans_attribute_map_attribute_name {	    begin
	        workflow.add_trans_attribute_map(
                    workflow_key => :workflow_key,
	            transition_key => :transition_key,
	            attribute_name => :attribute_name,
	            sort_order => :sort_order
                );
	    end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/workflow-procs-oracle.xql}
dbqd.cms.tcl.workflow-procs.wf_delete_trans_attribute_map.delete_trans_attribute_map {dbqd.cms.tcl.workflow-procs.wf_delete_trans_attribute_map.delete_trans_attribute_map {        begin
            workflow.delete_trans_attribute_map(
                workflow_key => :workflow_key,
                transition_key => :transition_key,
                attribute_id => :attribute_id
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/workflow-procs-oracle.xql}
dbqd.cms.tcl.workflow-procs.wf_add_trans_role_assign_map.add_trans_role_assign_map {dbqd.cms.tcl.workflow-procs.wf_add_trans_role_assign_map.add_trans_role_assign_map {        begin
            workflow.add_trans_role_assign_map(
                workflow_key => :workflow_key,
                transition_key => :transition_key,
                assign_role_key => :assign_role_key
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/workflow-procs-oracle.xql}
dbqd.cms.tcl.workflow-procs.wf_delete_trans_role_assign_map.delete_trans_role_assign_map {dbqd.cms.tcl.workflow-procs.wf_delete_trans_role_assign_map.delete_trans_role_assign_map {        begin
            workflow.delete_trans_role_assign_map(
                workflow_key => :workflow_key,
                transition_key => :transition_key,
                assign_role_key => :assign_role_key
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/workflow-procs-oracle.xql}
dbqd.cms.tcl.workflow-procs.wf_simple_workflow_p.simple_workflow {dbqd.cms.tcl.workflow-procs.wf_simple_workflow_p.simple_workflow {      begin :1 := workflow.simple_p(:workflow_key); end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/workflow-procs-oracle.xql}
dbqd.cms.tcl.workflow-procs.wf_export_workflow.declare_object_type {dbqd.cms.tcl.workflow-procs.wf_export_workflow.declare_object_type {declare
    v_workflow_key varchar2(40);
begin
    v_workflow_key := workflow.create_workflow(
        workflow_key => '[db_quote $new_workflow_key]', 
        pretty_name => '[db_quote $new_workflow_pretty_name]', 
        pretty_plural => '[db_quote $new_workflow_pretty_plural]', 
        description => '[db_quote $description]', 
        table_name => '[db_quote $new_table_name]'
    );
end;
/
show errors

        } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/workflow-procs-oracle.xql}
dbqd.cms.tcl.workflow-procs.wf_export_workflow.add_place {dbqd.cms.tcl.workflow-procs.wf_export_workflow.add_place {begin
    workflow.add_place(
        workflow_key => '[db_quote $new_workflow_key]',
        place_key    => '[db_quote $place_key]', 
        place_name   => '[db_quote $place_name]', 
        sort_order   => [ad_decode $sort_order "" "null" $sort_order]
    );
end;
/
show errors 
        } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/workflow-procs-oracle.xql}
dbqd.cms.tcl.workflow-procs.wf_export_workflow.add_role {dbqd.cms.tcl.workflow-procs.wf_export_workflow.add_role {begin
    workflow.add_role(
        workflow_key => '[db_quote $new_workflow_key]',
        role_key     => '[db_quote $role_key]',
        role_name    => '[db_quote $role_name]',
        sort_order   => [ad_decode $sort_order "" "null" $sort_order]
    );
end;
/
show errors
        } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/workflow-procs-oracle.xql}
dbqd.cms.tcl.workflow-procs.wf_export_workflow.add_transition {dbqd.cms.tcl.workflow-procs.wf_export_workflow.add_transition {begin
    workflow.add_transition(
        workflow_key    => '[db_quote $new_workflow_key]',
        transition_key  => '[db_quote $transition_key]',
        transition_name => '[db_quote $transition_name]',
        role_key        => '[db_quote $role_key]',
        sort_order      => [ad_decode $sort_order "" "null" $sort_order],
        trigger_type    => '[db_quote $trigger_type]'
    );
end;
/
show errors
        } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/workflow-procs-oracle.xql}
dbqd.cms.tcl.workflow-procs.wf_export_workflow.add_arc {dbqd.cms.tcl.workflow-procs.wf_export_workflow.add_arc {begin
    workflow.add_arc(
        workflow_key          => '[db_quote $new_workflow_key]',
        transition_key        => '[db_quote $transition_key]',
        place_key             => '[db_quote $place_key]',
        direction             => '[db_quote $direction]',
        guard_callback        => '[db_quote $guard_callback]',
        guard_custom_arg      => '[db_quote $guard_custom_arg]',
        guard_description     => '[db_quote $guard_description]'
    );
end;
/
show errors
        } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/workflow-procs-oracle.xql}
dbqd.cms.tcl.workflow-procs.wf_export_workflow.create_attribute {dbqd.cms.tcl.workflow-procs.wf_export_workflow.create_attribute {declare
    v_attribute_id integer;
begin
    v_attribute_id := workflow.create_attribute(
        workflow_key => '[db_quote $new_workflow_key]',
        attribute_name => '[db_quote $attribute_name]',
        datatype => '[db_quote $datatype]',
        pretty_name => '[db_quote $pretty_name]',
        default_value => '[db_quote $default_value]'
    );
end;
/
show errors
        } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/workflow-procs-oracle.xql}
dbqd.cms.tcl.workflow-procs.wf_export_workflow.add_trans_attribute_map {dbqd.cms.tcl.workflow-procs.wf_export_workflow.add_trans_attribute_map {begin
    workflow.add_trans_attribute_map(
        workflow_key   => '[db_quote $new_workflow_key]', 
        transition_key => '[db_quote $transition_key]',
        attribute_name => '[db_quote $attribute_name]',
        sort_order     => [ad_decode $sort_order "" "null" $sort_order]
    );
end;
/
show errors
        } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/workflow-procs-oracle.xql}
dbqd.cms.tcl.workflow-procs.wf_export_workflow.add_trans_role_assign_map {dbqd.cms.tcl.workflow-procs.wf_export_workflow.add_trans_role_assign_map {begin
    workflow.add_trans_role_assign_map(
        workflow_key    => '[db_quote $new_workflow_key]',
        transition_key  => '[db_quote $transition_key]',
        assign_role_key => '[db_quote $assign_role_key]'
    );
end;
/
show errors;
        } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/tcl/workflow-procs-oracle.xql}
dbqd.cms.www.head.get_name {dbqd.cms.www.head.get_name {  select first_names || ' ' || last_name 
    from persons where person_id = :user_id
      } {} {} {} F:/temp/openacs-4/packages/cms/www/head.xql}
dbqd.cms.www.index.content_root {dbqd.cms.www.index.content_root {      select content_item.get_root_folder from dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/index-oracle.xql}
dbqd.cms.www.index.template_root {dbqd.cms.www.index.template_root {      select content_template.get_root_folder from dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/index-oracle.xql}
dbqd.cms.www.index.get_name {dbqd.cms.www.index.get_name {  select 
    first_names || ' ' || last_name 
  from 
    persons 
  where 
    person_id = :user_id

      } {} {} {} F:/temp/openacs-4/packages/cms/www/index.xql}
dbqd.cms.www.item.create.new_content_item {dbqd.cms.www.item.create.new_content_item {      begin 
    :1 := content_item.new(:name, :context_id, :item_id, sysdate, NULL,
                           '[ns_conn peeraddr]', 'content_item'); 
  end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/item/create-oracle.xql}
dbqd.cms.www.item.create.new_revision {dbqd.cms.www.item.create.new_revision {      begin 
    :1 := content_revision.new(:title, :description, $publish_date, 
                               :mime_type, NULL, :text, 'content_revision', 
                               :item_id, :revision_id);
  end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/item/create-oracle.xql}
dbqd.cms.www.item.create.get_item_id {dbqd.cms.www.item.create.get_item_id {        select acs_object_id_seq.nextval from dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/item/create-oracle.xql}
dbqd.cms.www.item.create.get_revision_id {dbqd.cms.www.item.create.get_revision_id {        select acs_object_id_seq.nextval from dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/item/create-oracle.xql}
dbqd.cms.www.item.create.get_mime_types {dbqd.cms.www.item.create.get_mime_types {        select label, mime_type from cr_mime_types order by label

      } {} {} {} F:/temp/openacs-4/packages/cms/www/item/create.xql}
dbqd.cms.www.modules.categories.create.new_keyword {dbqd.cms.www.modules.categories.create.new_keyword {    begin :1 := content_keyword.new(
      heading => :heading, 
      description => :description, 
      keyword_id => :keyword_id,
      creation_user => :user_id,
      creation_ip => :ip$pid); end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/categories/create-oracle.xql}
dbqd.cms.www.modules.categories.create.get_keyword_id {dbqd.cms.www.modules.categories.create.get_keyword_id {    select acs_object_id_seq.nextval from dual
  
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/categories/create-oracle.xql}
dbqd.cms.www.modules.categories.delete.delete_keyword {dbqd.cms.www.modules.categories.delete.delete_keyword {      begin :1 := content_keyword.delete(:id); end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/categories/delete-oracle.xql}
dbqd.cms.www.modules.categories.delete.get_empty_status {dbqd.cms.www.modules.categories.delete.get_empty_status {  select content_keyword.is_leaf(:id) from dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/categories/delete-oracle.xql}
dbqd.cms.www.modules.categories.edit.edit_keyword {dbqd.cms.www.modules.categories.edit.edit_keyword {    begin 
      content_keyword.set_heading(:keyword_id, :heading);
      content_keyword.set_description(:keyword_id, :description);
    end;
      
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/categories/edit-oracle.xql}
dbqd.cms.www.modules.categories.edit.get_info {dbqd.cms.www.modules.categories.edit.get_info {  select
    content_keyword.get_heading(:id) heading,
    content_keyword.get_description(:id) description,
    case when content_keyword.is_leaf(:id) = 't' then 'keyword' else 'category' end as what
  from
    dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/categories/edit-oracle.xql}
dbqd.cms.www.modules.categories.index.get_info {dbqd.cms.www.modules.categories.index.get_info {    select 
      content_keyword.is_leaf(:id) as is_leaf,
      content_keyword.get_heading(:id) as heading,
      content_keyword.get_description(:id) as description,
      content_keyword.get_path(:id) as path
    from 
      dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/categories/index-oracle.xql}
dbqd.cms.www.modules.categories.index.get_items {dbqd.cms.www.modules.categories.index.get_items {  select
    keyword_id,
    content_keyword.is_leaf(keyword_id) as is_leaf,
    content_keyword.get_heading(keyword_id) as heading,
    (select count(*) from cr_item_keyword_map m
      where m.keyword_id = k.keyword_id) as item_count
  from
    cr_keywords k
  where
    $where_clause
  order by
    is_leaf, heading

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/categories/index-oracle.xql}
dbqd.cms.www.modules.categories.index.get_parent_id {dbqd.cms.www.modules.categories.index.get_parent_id {    select
      context_id
    from
      acs_objects
    where
      object_id = :id

      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/categories/index.xql}
dbqd.cms.www.modules.categories.keyword-assign.assign_keyword {dbqd.cms.www.modules.categories.keyword-assign.assign_keyword {       begin content_keyword.item_assign(:resolved_id, :item_id); end;

            
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/categories/keyword-assign-oracle.xql}
dbqd.cms.www.modules.categories.keyword-unassign.unassign_keyword {dbqd.cms.www.modules.categories.keyword-unassign.unassign_keyword {  begin content_keyword.item_unassign(:resolved_id, :keyword_id); end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/categories/keyword-unassign-oracle.xql}
dbqd.cms.www.modules.categories.move.move_keyword_item {dbqd.cms.www.modules.categories.move.move_keyword_item {       update cr_items set parent_id = $update_value
         where item_id = $item_id
         and exists (
           select 1 from cr_keywords where keyword_id = item_id
         )
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/categories/move.xql}
dbqd.cms.www.modules.categories.move.move_keyword_keyword {dbqd.cms.www.modules.categories.move.move_keyword_keyword {       update cr_keywords set parent_id = $update_value
         where keyword_id = $item_id
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/categories/move.xql}
dbqd.cms.www.modules.items.assign-keywords.item_assign {dbqd.cms.www.modules.items.assign-keywords.item_assign {        begin 
         :1 := content_keyword.item_assign(
          :root_id, :item_id, null, :user_id, :ip); 
        end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/assign-keywords-oracle.xql}
dbqd.cms.www.modules.items.attributes-edit.get_item {dbqd.cms.www.modules.items.attributes-edit.get_item {  select 
    i.content_type, i.name, nvl(r.title, i.name) title, i.latest_revision
  from
    cr_items i, cr_revisions r
  where
   i.item_id = :item_id
  and
   i.latest_revision = r.revision_id (+)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/attributes-edit-oracle.xql}
dbqd.cms.www.modules.items.attributes-edit.get_item {dbqd.cms.www.modules.items.attributes-edit.get_item {  select 
    i.content_type, i.name, nvl(r.title, i.name) title, i.latest_revision
  from
    cr_items i, cr_revisions r
  where
   i.item_id = :item_id
  and
   i.latest_revision = r.revision_id (+)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/attributes-edit-oracle.xql}
dbqd.cms.www.modules.items.attributes.get_info {dbqd.cms.www.modules.items.attributes.get_info {  select
    content_item.get_revision_count(x.item_id) revision_count, 
    content_revision.get_number(:revision_id) revision_number, 
    content_item.get_live_revision(x.item_id) live_revision, 
    x.*
  from
    $type_info(table_name)x x
  where
    object_id = :revision_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/attributes-oracle.xql}
dbqd.cms.www.modules.items.attributes.get_attributes {dbqd.cms.www.modules.items.attributes.get_attributes {  select 
    types.pretty_name object_label, 
    types.table_name, 
    types.id_column, 
    attr.attribute_name, 
    attr.pretty_name attribute_label
  from 
    acs_attributes attr,
    ( select 
        object_type, pretty_name, table_name, id_column, 
        level as inherit_level
      from 
        acs_object_types
      where 
        object_type ^= 'acs_object'
      connect by 
        prior supertype = object_type
      start with 
        object_type = :content_type) types        
  where 
    attr.object_type = types.object_type
  order by 
    types.inherit_level desc
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/attributes-oracle.xql}
dbqd.cms.www.modules.items.attributes.get_type_info {dbqd.cms.www.modules.items.attributes.get_type_info {  select 
    o.object_type, t.table_name 
  from 
    acs_objects o, acs_object_types t
  where 
    o.object_id = :revision_id
  and
    o.object_type = t.object_type

      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/items/attributes.xql}
dbqd.cms.www.modules.items.children.get_child_types {dbqd.cms.www.modules.items.children.get_child_types {  select
    t.pretty_name, c.child_type
  from
    acs_object_types t, cr_type_children c
  where
    c.parent_type = content_item.get_content_type(:item_id)
  and
    c.child_type = t.object_type      

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/children-oracle.xql}
dbqd.cms.www.modules.items.comment-add.new_entry {dbqd.cms.www.modules.items.comment-add.new_entry {    begin
      :1 = journal_entry.new(
                             journal_id => :journal_id,
                             object_id => :object_id,
                             action => 'comment',
                             action_pretty => 'Comment',
                             creation_user => :user_id,
                             creation_ip  => :ip_address,
                             msg => :msg );
    end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/comment-add-oracle.xql}
dbqd.cms.www.modules.items.comment-add.get_title {dbqd.cms.www.modules.items.comment-add.get_title {  select content_item.get_title(:item_id) from dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/comment-add-oracle.xql}
dbqd.cms.www.modules.items.comment-add.get_journal_id {dbqd.cms.www.modules.items.comment-add.get_journal_id {    select acs_object_id_seq.nextval from dual
  
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/comment-add-oracle.xql}
dbqd.cms.www.modules.items.comments.get_comments {dbqd.cms.www.modules.items.comments.get_comments {  select
    journal_id, action_pretty, msg, 
    decode(NVL(p.person_id, 0),
        0, 'System',
        substr(p.first_names, 1, 1) || '. ' || p.last_name) person,
    to_char(o.creation_date, 'MM/DD/YY HH24:MI:SS') when
  from
    journal_entries j, acs_objects o, persons p
  where
  (   
      j.object_id = :item_id
    or
      j.object_id in (select case_id from wf_cases c 
                      where c.object_id = :item_id)
  ) and
    j.journal_id = o.object_id
  and
    o.creation_user = p.person_id (+)
  and
    msg is not null
  order by
    o.creation_date desc

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/comments-oracle.xql}
dbqd.cms.www.modules.items.content-add-1.get_revision {dbqd.cms.www.modules.items.content-add-1.get_revision {  select
    i.item_id, content_type, title as name, mime_type
  from
    cr_revisions r, cr_items i
  where
    i.item_id = r.item_id
  and
    r.revision_id = :revision_id

      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/items/content-add-1.xql}
dbqd.cms.www.modules.items.content-add-2.get_revision {dbqd.cms.www.modules.items.content-add-2.get_revision {  select
    item_id, title as name
  from
    cr_revisions
  where
    revision_id = :revision_id

      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/items/content-add-2.xql}
dbqd.cms.www.modules.items.content-download.get_iteminfo {dbqd.cms.www.modules.items.content-download.get_iteminfo {  select
    item_id, mime_type, content_revision.is_live( revision_id ) is_live
  from
    cr_revisions
  where
    revision_id = :revision_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/content-download-oracle.xql}
dbqd.cms.www.modules.items.create-1.get_content_typ_name {dbqd.cms.www.modules.items.create-1.get_content_typ_name {  select
    pretty_name
  from
    acs_object_types
  where
    object_type = :content_type

      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/items/create-1.xql}
dbqd.cms.www.modules.items.create-2.get_item {dbqd.cms.www.modules.items.create-2.get_item {  select 
    nvl(content_item.get_path(:parent_id), '/') as item_path,
    pretty_name as content_type_name
  from
    acs_object_types
  where
    object_type = :content_type

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/create-2-oracle.xql}
dbqd.cms.www.modules.items.custom.cr_demo_article_image.create-1.get_content_type {dbqd.cms.www.modules.items.custom.cr_demo_article_image.create-1.get_content_type {  select
    pretty_name
  from
    acs_object_types
  where
    object_type = :content_type

      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/items/custom/cr_demo_article_image/create-1.xql}
dbqd.cms.www.modules.items.custom.cr_demo_article_image.create-2.new_revision {dbqd.cms.www.modules.items.custom.cr_demo_article_image.create-2.new_revision {      begin
      :1 := content_revision.new (
        item_id       => :item_id,
        title         => :title,
        description   => :description,
        mime_type     => :mime_type,
        creation_user => :user_id,
        creation_ip   => :ip_address
      );
      end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/custom/cr_demo_article_image/create-2-oracle.xql}
dbqd.cms.www.modules.items.custom.cr_demo_article_image.create-2.update_content {dbqd.cms.www.modules.items.custom.cr_demo_article_image.create-2.update_content {          update cr_revisions
            set content = empty_blob()
            where revision_id = $revision_id
            returning content into :1
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/custom/cr_demo_article_image/create-2-oracle.xql}
dbqd.cms.www.modules.items.custom.cr_demo_article_image.create-2.abort {dbqd.cms.www.modules.items.custom.cr_demo_article_image.create-2.abort {      abort transaction
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/items/custom/cr_demo_article_image/create-2.xql}
dbqd.cms.www.modules.items.custom.cr_demo_article_image.create-2.insert_image {dbqd.cms.www.modules.items.custom.cr_demo_article_image.create-2.insert_image {      insert into images (
        image_id, width, height
      ) values (
        :revision_id, :width, :height
      )
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/items/custom/cr_demo_article_image/create-2.xql}
dbqd.cms.www.modules.items.custom.cr_demo_article_image.create-2.insert_art_image {dbqd.cms.www.modules.items.custom.cr_demo_article_image.create-2.insert_art_image {      insert into cr_demo_article_images (
        article_image_id, caption
      ) values (
        :revision_id, :caption
      )
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/items/custom/cr_demo_article_image/create-2.xql}
dbqd.cms.www.modules.items.custom.cr_demo_article_image.create-2.get_clicks {dbqd.cms.www.modules.items.custom.cr_demo_article_image.create-2.get_clicks {	  select
	    count(1)
	  from
	    cr_items
	  where
	    item_id = :item_id
	
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/items/custom/cr_demo_article_image/create-2.xql}
dbqd.cms.www.modules.items.custom.image.attributes-edit.abort {dbqd.cms.www.modules.items.custom.image.attributes-edit.abort {      abort transaction
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/items/custom/image/attributes-edit.xql}
dbqd.cms.www.modules.items.custom.image.attributes-edit.update_revisions {dbqd.cms.www.modules.items.custom.image.attributes-edit.update_revisions {      update cr_revisions
        set title = :title,
        description = :description
        where revision_id = :revision_id
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/items/custom/image/attributes-edit.xql}
dbqd.cms.www.modules.items.custom.image.attributes-edit.update_images {dbqd.cms.www.modules.items.custom.image.attributes-edit.update_images {      update images
        set width = :width,
        height = :height
        where image_id = :revision_id
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/items/custom/image/attributes-edit.xql}
dbqd.cms.www.modules.items.custom.image.attributes-edit.get_item_info {dbqd.cms.www.modules.items.custom.image.attributes-edit.get_item_info {  select 
    i.name, i.latest_revision, r.title 
  from 
    cr_items i, cr_revisions r
  where 
    i.item_id = :item_id
  and
    i.item_id = r.item_id
  and
    i.latest_revision = r.revision_id

      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/items/custom/image/attributes-edit.xql}
dbqd.cms.www.modules.items.custom.image.attributes-edit.get_latest {dbqd.cms.www.modules.items.custom.image.attributes-edit.get_latest {      select
        latest_revision
      from
        cr_items
      where
        item_id = :item_id
    
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/items/custom/image/attributes-edit.xql}
dbqd.cms.www.modules.items.custom.image.attributes-edit.get_clicks {dbqd.cms.www.modules.items.custom.image.attributes-edit.get_clicks {	  select
	    count(1)
	  from
	    cr_revisions
	  where
	    revision_id = :revision_id
	
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/items/custom/image/attributes-edit.xql}
dbqd.cms.www.modules.items.custom.image.content-add-1.update_revisions {dbqd.cms.www.modules.items.custom.image.content-add-1.update_revisions {      update cr_revisions
        set content = empty_blob()
        where revision_id = $revision_id
        returning content into :1
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/custom/image/content-add-1-oracle.xql}
dbqd.cms.www.modules.items.custom.image.content-add-1.update_images {dbqd.cms.www.modules.items.custom.image.content-add-1.update_images {      update images
        set width = :width,
        height = :height
        where image_id = :revision_id
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/items/custom/image/content-add-1.xql}
dbqd.cms.www.modules.items.custom.image.content-add-1.get_item_id {dbqd.cms.www.modules.items.custom.image.content-add-1.get_item_id {  select
    item_id
  from
    cr_revisions
  where
    revision_id = :revision_id

      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/items/custom/image/content-add-1.xql}
dbqd.cms.www.modules.items.custom.image.create-1.new_revision {dbqd.cms.www.modules.items.custom.image.create-1.new_revision {      begin
      :1 := content_revision.new (
        item_id       => :item_id,
        title         => :title,
        description   => :description,
        mime_type     => :mime_type,
        creation_user => :user_id,
        creation_ip   => :ip_address
      );
      end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/custom/image/create-1-oracle.xql}
dbqd.cms.www.modules.items.custom.image.create-1.insert_revisions {dbqd.cms.www.modules.items.custom.image.create-1.insert_revisions {      update cr_revisions
        set content = empty_blob()
        where revision_id = $revision_id
        returning content into :1
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/custom/image/create-1-oracle.xql}
dbqd.cms.www.modules.items.custom.image.create-1.abort {dbqd.cms.www.modules.items.custom.image.create-1.abort {      abort transaction
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/items/custom/image/create-1.xql}
dbqd.cms.www.modules.items.custom.image.create-1.insert_images {dbqd.cms.www.modules.items.custom.image.create-1.insert_images {      insert into images (
        image_id, width, height
      ) values (
        :revision_id, :width, :height
      )
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/items/custom/image/create-1.xql}
dbqd.cms.www.modules.items.custom.image.create-1.get_clicks {dbqd.cms.www.modules.items.custom.image.create-1.get_clicks {	  select
	    count(1)
	  from
	    cr_items
	  where
	    item_id = :item_id
	
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/items/custom/image/create-1.xql}
dbqd.cms.www.modules.items.custom.image.revision-add-1.new_revision {dbqd.cms.www.modules.items.custom.image.revision-add-1.new_revision {      begin
      :1 := content_revision.new (
        item_id       => :item_id,
        title         => :title,
        description   => :description,
        mime_type     => :mime_type,
        creation_user => :user_id,
        creation_ip   => :ip_address
      );
      end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/custom/image/revision-add-1-oracle.xql}
dbqd.cms.www.modules.items.custom.image.revision-add-1.update_revisions {dbqd.cms.www.modules.items.custom.image.revision-add-1.update_revisions {      update cr_revisions
        set content = empty_blob()
        where revision_id = $revision_id
        returning content into :1
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/custom/image/revision-add-1-oracle.xql}
dbqd.cms.www.modules.items.custom.image.revision-add-1.insert_images {dbqd.cms.www.modules.items.custom.image.revision-add-1.insert_images {      insert into images (
        image_id, width, height
      ) values (
        :revision_id, :width, :height
      )
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/items/custom/image/revision-add-1.xql}
dbqd.cms.www.modules.items.custom.image.revision-add-1.get_item_info {dbqd.cms.www.modules.items.custom.image.revision-add-1.get_item_info {  select 
    i.name, i.latest_revision, r.title 
  from 
    cr_items i, cr_revisions r
  where 
    i.item_id = :item_id
  and
    i.item_id = r.item_id
  and
    i.latest_revision = r.revision_id

      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/items/custom/image/revision-add-1.xql}
dbqd.cms.www.modules.items.delete.item_delete {dbqd.cms.www.modules.items.delete.item_delete {  begin 
    content_item.delete(
      item_id => :item_id
    ); 
  end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/delete-oracle.xql}
dbqd.cms.www.modules.items.delete.flush {dbqd.cms.www.modules.items.delete.flush {  select
    parent_id
  from
    cr_resolved_items
  where
    resolved_id = :item_id

      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/items/delete.xql}
dbqd.cms.www.modules.items.export-xml.export_revision {dbqd.cms.www.modules.items.export-xml.export_revision {                             begin
                                 :1 := content_revision.export_xml(:revision_id);
                             end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/export-xml-oracle.xql}
dbqd.cms.www.modules.items.export-xml.get_xml_doc {dbqd.cms.www.modules.items.export-xml.get_xml_doc {                select doc from cr_xml_docs where doc_id = :doc_id
                
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/items/export-xml.xql}
dbqd.cms.www.modules.items.index.get_item_id {dbqd.cms.www.modules.items.index.get_item_id {  select content_symlink.resolve(:item_id) from dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/index-oracle.xql}
dbqd.cms.www.modules.items.index.get_info {dbqd.cms.www.modules.items.index.get_info {  select 
    content_type, latest_revision
  from 
    cr_items 
  where 
   item_id = :item_id
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/items/index.xql}
dbqd.cms.www.modules.items.keywords.get_keywords {dbqd.cms.www.modules.items.keywords.get_keywords {select
             keyword_id,
             content_keyword.get_heading(keyword_id) heading,
             NVL(content_keyword.get_description(keyword_id),
                '-') description
           from
             cr_item_keyword_map
           where
             item_id = :item_id
           order by
             heading
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/keywords-oracle.xql}
dbqd.cms.www.modules.items.keywords.get_name {dbqd.cms.www.modules.items.keywords.get_name {        select name from cr_items where item_id = :item_id
 
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/items/keywords.xql}
dbqd.cms.www.modules.items.publish.set_live_revision {dbqd.cms.www.modules.items.publish.set_live_revision {     begin 
       content_item.set_live_revision( 
         revision_id => :revision_id 
       );
     end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/publish-oracle.xql}
dbqd.cms.www.modules.items.publish.get_iteminfo {dbqd.cms.www.modules.items.publish.get_iteminfo {  select
    item_id,
    content_item.is_publishable( item_id ) as publish_p
  from
    cr_revisions
  where
    revision_id = :revision_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/publish-oracle.xql}
dbqd.cms.www.modules.items.publish-status.get_info {dbqd.cms.www.modules.items.publish-status.get_info {  select
    NVL(initcap(publish_status), 'Production') publish_status, 
    NVL(to_char(start_when, 'MM/DD/YY HH:MI AM'), 'Immediate') start_when,
    NVL(to_char(end_when, 'MM/DD/YY HH:MI AM'), 'Indefinite') end_when,
    content_item.is_publishable(:item_id) is_publishable,
    live_revision
  from
    cr_items i, cr_release_periods r
  where
    i.item_id = :item_id
  and
    i.item_id = r.item_id (+)
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/publish-status-oracle.xql}
dbqd.cms.www.modules.items.publish-status.get_publish_info {dbqd.cms.www.modules.items.publish-status.get_publish_info {  select 
    content_item.is_publishable( item_id ) is_publishable, 
    live_revision
  from
    cr_items
  where
    item_id = :item_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/publish-status-oracle.xql}
dbqd.cms.www.modules.items.publish-status.unfinished_exists {dbqd.cms.www.modules.items.publish-status.unfinished_exists {  select content_workflow.unfinished_workflow_exists( :item_id ) from dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/publish-status-oracle.xql}
dbqd.cms.www.modules.items.publish-status.get_child_types {dbqd.cms.www.modules.items.publish-status.get_child_types {  select
    child_type, relation_tag, min_n, 
    o.pretty_name as child_type_pretty, 
    o.pretty_plural as child_type_plural, 
    case when max_n = null then '-' else to_char(max_n) end as max_n,
    (
      select
        count(*)
      from
        cr_child_rels
      where
        parent_id = i.item_id
      and
        content_item.get_content_type( child_id ) = c.child_type
      and
        relation_tag = c.relation_tag
    ) as child_count
  from
    cr_type_children c, cr_items i, acs_object_types o
  where
    c.parent_type = i.content_type
  and
    c.child_type = o.object_type
  and
    -- this item is the parent
    i.item_id = :item_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/publish-status-oracle.xql}
dbqd.cms.www.modules.items.publish-status.get_rel_types {dbqd.cms.www.modules.items.publish-status.get_rel_types {  select
    target_type, relation_tag, min_n, 
    o.pretty_name as target_type_pretty,
    o.pretty_plural as target_type_plural,
    case when max_n = null then '-' else to_char(max_n) end max_n,
    (
      select
        count(*)
      from
        cr_item_rels
      where
        item_id = i.item_id
      and
        content_item.get_content_type( related_object_id ) = r.target_type
      and
        relation_tag = r.relation_tag
    ) rel_count
  from
    cr_type_relations r, cr_items i, acs_object_types o
  where
    o.object_type = r.target_type
  and
    r.content_type = i.content_type
  and
    i.item_id = :item_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/publish-status-oracle.xql}
dbqd.cms.www.modules.items.publish.abort {dbqd.cms.www.modules.items.publish.abort {      abort transaction
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/items/publish.xql}
dbqd.cms.www.modules.items.relate-child-order.abort {dbqd.cms.www.modules.items.relate-child-order.abort {      abort transaction
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/items/relate-child-order.xql}
dbqd.cms.www.modules.items.relate-child-order.child_swap_1 {dbqd.cms.www.modules.items.relate-child-order.child_swap_1 {    update cr_child_rels set order_n = :swap_order where rel_id = :rel_id
  
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/items/relate-child-order.xql}
dbqd.cms.www.modules.items.relate-child-order.child_swap_2 {dbqd.cms.www.modules.items.relate-child-order.child_swap_2 {    update cr_child_rels set order_n = :order_n where rel_id = :swap_id
  
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/items/relate-child-order.xql}
dbqd.cms.www.modules.items.relate-child-order.get_prev_swap_rel {dbqd.cms.www.modules.items.relate-child-order.get_prev_swap_rel {    select rel_id, order_n from cr_child_rels r1
    where r1.parent_id = :item_id
    and r1.order_n < :order_n 
    and not exists (select order_n from cr_child_rels r2
                    where r2.parent_id = :item_id
                    and r2.order_n < :order_n
                    and r2.order_n > r1.order_n)
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/items/relate-child-order.xql}
dbqd.cms.www.modules.items.relate-child-order.get_next_swap_rel {dbqd.cms.www.modules.items.relate-child-order.get_next_swap_rel {    select rel_id, order_n from cr_child_rels r1
    where r1.parent_id = :item_id
    and r1.order_n > :order_n 
    and not exists (select order_n from cr_child_rels r2
                    where r2.parent_id = :item_id
                    and r2.order_n > :order_n
                    and r2.order_n < r1.order_n)
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/items/relate-child-order.xql}
dbqd.cms.www.modules.items.relate-items-2.relate {dbqd.cms.www.modules.items.relate-items-2.relate {      begin 
      :rel_id := content_item.relate (
          item_id       => :item_id,
          object_id     => :related_id,
          relation_tag  => :relation_tag,
          order_n       => :order_n,
          relation_type => :relation_type
      );
    end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/relate-items-2-oracle.xql}
dbqd.cms.www.modules.items.relate-items-2.get_title {dbqd.cms.www.modules.items.relate-items-2.get_title {  select content_item.get_title(:item_id) from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/relate-items-2-oracle.xql}
dbqd.cms.www.modules.items.relate-items-2.get_order {dbqd.cms.www.modules.items.relate-items-2.get_order {        select 
	  coalesce(max(order_n) + 1, 1) 
	from 
	  cr_item_rels
	where 
	  item_id = :item_id
        
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/items/relate-items-2.xql}
dbqd.cms.www.modules.items.relate-items.get_item_info {dbqd.cms.www.modules.items.relate-items.get_item_info {    select 
      content_item.get_title(i.item_id) as title,
      i.content_type
    from 
      cr_items i
    where
      i.item_id = :item_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/relate-items-oracle.xql}
dbqd.cms.www.modules.items.relate-items.get_options {dbqd.cms.www.modules.items.relate-items.get_options {    select 
      lpad(' ', level, '-') || pretty_name as pretty_name, 
      object_type
    from
      acs_object_types
    connect by
      prior object_type = supertype
    start with
      object_type = 'cr_item_rel'
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/relate-items-oracle.xql}
dbqd.cms.www.modules.items.relate-items.get_clip_items {dbqd.cms.www.modules.items.relate-items.get_clip_items {    select
      i.item_id as related_id, 
      content_item.get_title(i.item_id) as title,
      content_item.get_path(i.item_id) as path,   
      tr.relation_tag
    from
      cr_items i, cr_type_relations tr
    where
      content_item.is_subclass(i.content_type, tr.target_type) = 't'
    and
      content_item.is_subclass(:item_type, tr.content_type) = 't'
    and (
      tr.max_n is null 
      or 
      (select count(*) from cr_item_rels 
	where item_id = :item_id 
	and relation_tag = tr.relation_tag) < tr.max_n
      )
    and 
      i.item_id in $sql_items
    and
      i.item_id ^= :item_id
    order by
      path, i.item_id, tr.relation_tag
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/relate-items-oracle.xql}
dbqd.cms.www.modules.items.relate-order.abort {dbqd.cms.www.modules.items.relate-order.abort {      abort transaction
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/items/relate-order.xql}
dbqd.cms.www.modules.items.relate-order.relate_swap_1 {dbqd.cms.www.modules.items.relate-order.relate_swap_1 {      update $rel_table 
        set order_n = :swap_order 
        where rel_id = :rel_id
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/items/relate-order.xql}
dbqd.cms.www.modules.items.relate-order.relate_swap_2 {dbqd.cms.www.modules.items.relate-order.relate_swap_2 {      update $rel_table 
        set order_n = :order_n 
        where rel_id = :swap_id
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/items/relate-order.xql}
dbqd.cms.www.modules.items.relate-order.get_item_id {dbqd.cms.www.modules.items.relate-order.get_item_id {  select 
    $rel_parent_column
  from 
    $rel_table
  where 
    rel_id = :rel_id
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/items/relate-order.xql}
dbqd.cms.www.modules.items.relate-order.get_order {dbqd.cms.www.modules.items.relate-order.get_order {  select
    order_n
  from
    $rel_table
  where
    rel_id = :rel_id
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/items/relate-order.xql}
dbqd.cms.www.modules.items.relate-order.get_prev_swap_rel {dbqd.cms.www.modules.items.relate-order.get_prev_swap_rel {      select 
        rel_id, order_n 
      from 
        $rel_table
      where 
        $rel_parent_column = :item_id
      and 
        order_n = :order_n - 1
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/items/relate-order.xql}
dbqd.cms.www.modules.items.relate-order.get_next_swap_rel {dbqd.cms.www.modules.items.relate-order.get_next_swap_rel {      select 
        rel_id, order_n 
      from 
        $rel_table
      where 
        $rel_parent_column = :item_id
      and 
        order_n = :order_n + 1
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/items/relate-order.xql}
dbqd.cms.www.modules.items.related-items.get_related {dbqd.cms.www.modules.items.related-items.get_related {  select
    r.rel_id,
    r.related_object_id item_id,
    t.pretty_name as type_name,
    NVL(r.relation_tag, '-') as tag,
    trim(NVL(content_item.get_title(r.related_object_id), i.name)) title,
    ot.pretty_name as content_type
  from
    cr_item_rels r, acs_objects o, acs_object_types t,
    cr_items i, acs_object_types ot
  where
    r.item_id = :item_id
  and
    o.object_id = r.rel_id
  and
    t.object_type = o.object_type
  and 
    i.item_id = r.related_object_id
  and
    ot.object_type = i.content_type
  order by 
    order_n, title

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/related-items-oracle.xql}
dbqd.cms.www.modules.items.relationship-view.get_rel_info {dbqd.cms.www.modules.items.relationship-view.get_rel_info \ \ select\n\ \ \ \ t.pretty_name\ as\ type_name,\ t.object_type,\ \n\ \ \ \ r.item_id,\ r.related_object_id,\\\n\ \ \ \ content_item.get_title(i.item_id)\ as\ item_title,\n\ \ \ \ acs_object.name(r.related_object_id)\ as\ related_title,\n\ \ \ \ content_item.is_subclass(o2.object_type,\ 'content_item')\ as\ is_item,\n\ \ \ \ r.relation_tag,\ r.order_n\n\ \ from\n\ \ \ \ acs_objects\ o,\ acs_object_types\ t,\ \n\ \ \ \ cr_item_rels\ r,\ cr_items\ i,\ acs_objects\ o2\n\ \ where\n\ \ \ \ o.object_type\ =\ t.object_type\n\ \ and\n\ \ \ \ o.object_id\ =\ :rel_id\n\ \ and\n\ \ \ \ r.rel_id\ =\ :rel_id\n\ \ and\ \n\ \ \ \ i.item_id\ =\ r.item_id\n\ \ and\ \n\ \ \ \ o2.object_id\ =\ r.related_object_id\n\n\ \ \ \ \ \  {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/relationship-view-oracle.xql}
dbqd.cms.www.modules.items.relationship-view.get_rel_attrs {dbqd.cms.www.modules.items.relationship-view.get_rel_attrs {  select 
    types.table_name, types.id_column, attr.attribute_name,
    attr.pretty_name as attribute_label, attr.datatype,
    types.pretty_name as type_name
  from 
    acs_attributes attr,
    (select 
        object_type, table_name, id_column, pretty_name,
        level as inherit_level
      from 
        acs_object_types
      where 
        object_type not in ('acs_object', 'cr_item_rel')
      connect by 
        prior supertype = object_type
      start with 
        object_type = :object_type) types
  where
    attr.object_type (+) = types.object_type
  order by
    inherit_level desc, attr.pretty_name
  
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/relationship-view-oracle.xql}
dbqd.cms.www.modules.items.relationship-view.get_value {dbqd.cms.www.modules.items.relationship-view.get_value {    select $what from $a_row(table_name) 
      where $a_row(id_column) = :rel_id
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/items/relationship-view.xql}
dbqd.cms.www.modules.items.rename.rename_item {dbqd.cms.www.modules.items.rename.rename_item {    begin 
    content_item.rename (
        item_id => :item_id, 
        name    => :name 
    ); 
    end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/rename-oracle.xql}
dbqd.cms.www.modules.items.rename.get_item_name {dbqd.cms.www.modules.items.rename.get_item_name {  select 
    name
  from 
    cr_items
  where 
    item_id = :item_id

      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/items/rename.xql}
dbqd.cms.www.modules.items.rename.get_parent_id {dbqd.cms.www.modules.items.rename.get_parent_id {    select
      parent_id
    from
      cr_items
    where
      item_id = :item_id
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/items/rename.xql}
dbqd.cms.www.modules.items.revision-add-1.get_content_type {dbqd.cms.www.modules.items.revision-add-1.get_content_type {  select
    content_item.get_content_type( :item_id )
  from
    dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/revision-add-1-oracle.xql}
dbqd.cms.www.modules.items.revision-add-1.get_name {dbqd.cms.www.modules.items.revision-add-1.get_name {  select
    name
  from
    cr_items
  where
    item_id = :item_id
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/items/revision-add-1.xql}
dbqd.cms.www.modules.items.revision-add-2.get_one_item {dbqd.cms.www.modules.items.revision-add-2.get_one_item {  select 
    content_type, name
  from
    cr_items
  where
   item_id = :item_id

      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/items/revision-add-2.xql}
dbqd.cms.www.modules.items.revision.get_revision {dbqd.cms.www.modules.items.revision.get_revision {  select 
    revision_id, title, description, item_id, mime_type, 
    content_revision.get_number( revision_id ) revision_number,
    (
     select 
       label 
     from 
       cr_mime_types 
     where 
       mime_type = cr_revisions.mime_type
    ) mime_type_pretty,
    to_char(publish_date,'Month DD, YYYY') as publish_date_pretty,
    content_length as content_size
  from 
    cr_revisions
  where 
    revision_id = :revision_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/revision-oracle.xql}
dbqd.cms.www.modules.items.revision.get_status {dbqd.cms.www.modules.items.revision.get_status {  select content_item.is_publishable( :item_id ) from dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/revision-oracle.xql}
dbqd.cms.www.modules.items.revision.get_one_item {dbqd.cms.www.modules.items.revision.get_one_item {  select 
    name, locale, live_revision as live_revision_id,
    (
      select 
        pretty_name
      from 
        acs_object_types
      where 
        object_type = cr_items.content_type
    ) content_type,
    content_item.get_path(item_id) as path
  from 
    cr_items
  where 
    item_id = :item_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/revision-oracle.xql}
dbqd.cms.www.modules.items.revision.get_meta_attrs {dbqd.cms.www.modules.items.revision.get_meta_attrs {  select 
    attribute_id, pretty_name, 
    (select pretty_name from acs_object_types
     where object_type = attr.object_type) object_type,
    nvl(column_name,attribute_name) attribute_name,  
    nvl(attr.table_name,o.table_name) table_name,
    nvl(o.id_column,'object_id') id_column
  from
    acs_attributes attr, 
    (select 
       object_type, table_name, id_column 
     from
       acs_object_types
     where 
       object_type not in ('acs_object','content_revision')
     connect by
       prior supertype = object_type
     start with
       object_type = (select 
                        object_type 
                      from 
                        acs_objects
                      where
                        object_id = :revision_id) ) o
  where
    o.object_type = attr.object_type
  order by
    attr.object_type, attr.sort_order

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/revision-oracle.xql}
dbqd.cms.www.modules.items.revision.get_content {dbqd.cms.www.modules.items.revision.get_content {      select 
        blob_to_string(content)
      from
        cr_revisions
      where
        revision_id = :revision_id
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/revision-oracle.xql}
dbqd.cms.www.modules.items.revision-upload.new_content {dbqd.cms.www.modules.items.revision-upload.new_content {      begin 
      :item_id := content_item.new(
          name          => :name, 
          parent_id     => :parent_id, 
          content_type  => :content_type,
          creation_user => [User::getID],
          creation_ip   => '[ns_conn peeraddr]' ); 
      end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/revision-upload-oracle.xql}
dbqd.cms.www.modules.items.revision-upload.insert_content {dbqd.cms.www.modules.items.revision-upload.insert_content {      insert into cr_xml_docs 
  values ($revision_id, empty_clob()) returning doc into :1
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/revision-upload-oracle.xql}
dbqd.cms.www.modules.items.revision-upload.import_xml {dbqd.cms.www.modules.items.revision-upload.import_xml {      begin
    :revision_id := content_revision.import_xml(
      :item_id, :revision_id, :revision_id);
  end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/revision-upload-oracle.xql}
dbqd.cms.www.modules.items.revision-upload.get_new_item {dbqd.cms.www.modules.items.revision-upload.get_new_item {      select 
        NVL(content_item.get_path(:parent_id), '/') as item_path,
        pretty_name as content_type_name
      from
        acs_object_types
      where
        object_type = :content_type
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/revision-upload-oracle.xql}
dbqd.cms.www.modules.items.revision-upload.get_revision_id {dbqd.cms.www.modules.items.revision-upload.get_revision_id {        select acs_object_id_seq.nextval from dual
      
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/revision-upload-oracle.xql}
dbqd.cms.www.modules.items.revision.get_count {dbqd.cms.www.modules.items.revision.get_count {  select count(*) from cr_revisions where item_id = :item_id

      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/items/revision.xql}
dbqd.cms.www.modules.items.revision.get_attr_values {dbqd.cms.www.modules.items.revision.get_attr_values {      select 
        [join $attr_columns ", "]
      from
        [join $attr_tables ", "]
      where
        [join $column_id_cons " and "]
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/items/revision.xql}
dbqd.cms.www.modules.items.revisions.get_content_type {dbqd.cms.www.modules.items.revisions.get_content_type {  select
    content_item.get_content_type( :item_id )
  from
    dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/revisions-oracle.xql}
dbqd.cms.www.modules.items.revisions.get_iteminfo {dbqd.cms.www.modules.items.revisions.get_iteminfo {  select 
    item_id, name, locale, live_revision, publish_status,
    content_item.is_publishable(item_id) as is_publishable
  from 
    cr_items
  where 
    item_id = :item_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/revisions-oracle.xql}
dbqd.cms.www.modules.items.revisions.get_revisions {dbqd.cms.www.modules.items.revisions.get_revisions {  select 
    revision_id, 
    trim(title) as title, 
    trim(description) as description,
    content_revision.get_number(revision_id) as revision_number
  from 
    cr_revisions r
  where 
    r.item_id = $item_id
  order by
    revision_number desc
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/revisions-oracle.xql}
dbqd.cms.www.modules.items.status-edit.set_release_period {dbqd.cms.www.modules.items.status-edit.set_release_period {      begin 
                    content_item.set_release_period(
                      item_id => :item_id,
                      start_when => $start_when,
                      end_when => $end_when
                    );
                  end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/status-edit-oracle.xql}
dbqd.cms.www.modules.items.status-edit.check_status {dbqd.cms.www.modules.items.status-edit.check_status {  select content_item.is_publishable( :item_id ) from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/status-edit-oracle.xql}
dbqd.cms.www.modules.items.status-edit.check_published {dbqd.cms.www.modules.items.status-edit.check_published {  select content_item.is_published( :item_id ) from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/status-edit-oracle.xql}
dbqd.cms.www.modules.items.status-edit.get_info {dbqd.cms.www.modules.items.status-edit.get_info {    select
      NVL(publish_status, 'production') as publish_status,
      to_char(NVL(start_when, sysdate), 'YYYY MM DD HH24 MI SS') start_when,
      to_char(NVL(end_when, sysdate + 365), 'YYYY MM DD HH24 MI SS') end_when
    from
      cr_items i, cr_release_periods r
    where
      i.item_id = :item_id
    and
      i.item_id = r.item_id (+)
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/status-edit-oracle.xql}
dbqd.cms.www.modules.items.status-edit.get_live_rewision {dbqd.cms.www.modules.items.status-edit.get_live_rewision {    select live_revision from cr_items where item_id = :item_id
  
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/items/status-edit.xql}
dbqd.cms.www.modules.items.template-register.register_template_to_item {dbqd.cms.www.modules.items.template-register.register_template_to_item {        begin content_item.register_template(
            item_id     => :item_id,
            template_id => :template_id,
            use_context => :context ); 
         end;
  
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/template-register-oracle.xql}
dbqd.cms.www.modules.items.template-register.second_template_p {dbqd.cms.www.modules.items.template-register.second_template_p {  select count(1) from cr_item_template_map
    where use_context = :context
    and item_id = :item_id
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/items/template-register.xql}
dbqd.cms.www.modules.items.template-unregister.template_unregister {dbqd.cms.www.modules.items.template-unregister.template_unregister {      begin
         content_item.unregister_template(
             template_id => :template_id, 
             item_id     => :item_id, 
             use_context => :context ); 
         end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/template-unregister-oracle.xql}
dbqd.cms.www.modules.items.templates.allowed_set_p {dbqd.cms.www.modules.items.templates.allowed_set_p {  select
    cms_permission.permission_p( module_id, :user_id, 'cm_write' )
  from
    cm_modules
  where
     key = 'types'

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/templates-oracle.xql}
dbqd.cms.www.modules.items.templates.get_iteminfo {dbqd.cms.www.modules.items.templates.get_iteminfo {  select 
    object_type, pretty_name,
    content_item.get_title(:item_id) name
  from
    acs_object_types
  where 
    object_type = content_item.get_content_type(:item_id)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/templates-oracle.xql}
dbqd.cms.www.modules.items.templates.get_reg_templates {dbqd.cms.www.modules.items.templates.get_reg_templates {  select 
    template_id, use_context, 
    content_item.get_path( template_id ) path,
    cms_permission.permission_p( template_id, :user_id, 'cm_examine')
      as can_read_template
  from 
    cr_item_template_map t
  where     
    t.item_id = :item_id
  order by 
    path, use_context

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/templates-oracle.xql}
dbqd.cms.www.modules.items.templates.get_type_templates {dbqd.cms.www.modules.items.templates.get_type_templates {  select 
    template_id, use_context, is_default,
    content_item.get_path( template_id ) path,
    cms_permission.permission_p( template_id, :user_id, 'cm_examine') 
      as can_read_template,
    (select 1 
     from 
       cr_item_template_map itmap 
     where 
       itmap.template_id = t.template_id
     and 
       itmap.use_context = t.use_context
     and 
       itmap.item_id = :item_id) already_registered_p
  from 
    cr_type_template_map t
  where 
    t.content_type = :content_type
  order by 
    path, use_context

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/templates-oracle.xql}
dbqd.cms.www.modules.items.unpublish.unset_live_revision {dbqd.cms.www.modules.items.unpublish.unset_live_revision {      begin 
           content_item.unset_live_revision( :item_id );
         end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/unpublish-oracle.xql}
dbqd.cms.www.modules.items.unrelate-item.unrelate_item {dbqd.cms.www.modules.items.unrelate-item.unrelate_item {  begin
  content_item.unrelate ( 
      rel_id => :rel_id 
  );
  end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/items/unrelate-item-oracle.xql}
dbqd.cms.www.modules.items.unrelate-item.abort {dbqd.cms.www.modules.items.unrelate-item.abort {      abort transaction
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/items/unrelate-item.xql}
dbqd.cms.www.modules.items.unrelate-item.get_item_id {dbqd.cms.www.modules.items.unrelate-item.get_item_id {  select item_id from cr_item_rels where rel_id = :rel_id
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/items/unrelate-item.xql}
dbqd.cms.www.modules.permissions.index.get_permissions {dbqd.cms.www.modules.permissions.index.get_permissions {  select * from ( 
    select 
      p.pretty_name, 
      p.privilege, 
      u.party_id as grantee_id,
      n.first_names || ' ' || n.last_name as grantee_name,
      u.email
    from 
      acs_permissions per, acs_privileges p, parties u,
      persons n,
      (select object_id from acs_objects 
	 connect by prior context_id = object_id 
		and prior security_inherit_p = 't'
	 start with object_id = :object_id) o
    where
      per.privilege = p.privilege
    and
      per.grantee_id = u.party_id
    and
      per.object_id = o.object_id
    and
      u.party_id = n.person_id
  union
    select
      p.pretty_name, p.privilege, 
      -1 as grantee_id, 'All Users' as grantee_name, '&nbsp;' as email 
    from
      acs_permissions per, acs_privileges p, parties u
    where
      u.party_id = -1
    and
      per.object_id = :object_id
    and
      per.privilege = p.privilege
    and
      per.grantee_id = u.party_id
  ) order by
    grantee_name, privilege
  
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/permissions/index-oracle.xql}
dbqd.cms.www.modules.permissions.permission-alter.get_info {dbqd.cms.www.modules.permissions.permission-alter.get_info {  select 
    acs_object.name(:object_id) as object_name, 
    acs_object.name(:grantee_id) as grantee_name,
    acs_permission.permission_p(:object_id, :user_id, 'cm_perm') as user_cm_perm
  from
    dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/permissions/permission-alter-oracle.xql}
dbqd.cms.www.modules.search.index.within_clause {dbqd.cms.www.modules.search.index.within_clause {        ${the_or}%[string tolower $word]% within \$field

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/search/index-oracle.xql}
dbqd.cms.www.modules.search.index.contains_clause {dbqd.cms.www.modules.search.index.contains_clause {       $the_or contains($column_name, '$search_clause', $label) > 0 

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/search/index-oracle.xql}
dbqd.cms.www.modules.search.index.score_expr {dbqd.cms.www.modules.search.index.score_expr {        $the_plus score($label)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/search/index-oracle.xql}
dbqd.cms.www.modules.search.index.sql_query {dbqd.cms.www.modules.search.index.sql_query {    select 
      i.item_id, content_item.get_path(i.item_id) item_path,
      r.revision_id,
      t.pretty_name as pretty_type, t.object_type,
      r.title, to_char(r.publish_date) as pretty_date,
      NVL(NVL(m.label, r.mime_type), 'unknown') as pretty_mime_type,
      rownum as row_index,
      ($score_expr) as search_score
    from
      cr_items i, cr_revisions r, 
      cr_mime_types m, acs_object_types t $attrs_table
    where
      m.mime_type(+) = r.mime_type
    and
      t.object_type = i.content_type $attrs_where
    and
      ($contains_clause)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/search/index-oracle.xql}
dbqd.cms.www.modules.search.index.live_revision {dbqd.cms.www.modules.search.index.live_revision {           and r.revision_id(+) = i.live_revision 

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/search/index-oracle.xql}
dbqd.cms.www.modules.search.index.get_mime_types {dbqd.cms.www.modules.search.index.get_mime_types {  select
    label, mime_type as value
  from 
    cr_mime_types

      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/search/index.xql}
dbqd.cms.www.modules.search.index.get_results {dbqd.cms.www.modules.search.index.get_results {    select count(*) from ($sql_query) x
  
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/search/index.xql}
dbqd.cms.www.modules.search.search-results.get_results {dbqd.cms.www.modules.search.search-results.get_results {    select * from ($sql_query) x
    where row_index >= :start_row and row_index < (:start_row + :rows_per_page)
    order by search_score desc, title
  
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/search/search-results.xql}
dbqd.cms.www.modules.sitemap.ancestors.index_page_p {dbqd.cms.www.modules.sitemap.ancestors.index_page_p {      decode( nvl( 
        content_folder.get_index_page( :item_id ),0)
        ,0,'f','t') has_index_page,

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/sitemap/ancestors-oracle.xql}
dbqd.cms.www.modules.sitemap.ancestors.get_context {dbqd.cms.www.modules.sitemap.ancestors.get_context {  select
    t.tree_level, t.parent_id, 
    content_folder.is_folder(i.item_id) is_folder,
    content_item.get_title(t.parent_id) as title
  from 
    cr_items i,
    (
      select 
        parent_id, level as tree_level
      from 
        cr_items
      where
        parent_id ^= 0
      connect by
        prior parent_id = item_id
      start with
        item_id = :item_id
    ) t
  where
    i.item_id = t.parent_id
  order by
    tree_level desc
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/sitemap/ancestors-oracle.xql}
dbqd.cms.www.modules.sitemap.ancestors.get_preview_info {dbqd.cms.www.modules.sitemap.ancestors.get_preview_info {  select
    $index_page_sql 
    -- does it have a template
    content_item.get_template( item_id, 'public' ) template_id,
    -- symlinks to this folder will have the path of this item
    content_item.get_virtual_path( item_id, :root_id ) virtual_path,
    content_item.get_path( 
      content_symlink.resolve( item_id ), :root_id ) physical_path,
    content_folder.is_folder( item_id ) is_folder,
    live_revision
  from
    cr_items
  where 
    item_id = :item_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/sitemap/ancestors-oracle.xql}
dbqd.cms.www.modules.sitemap.ancestors.get_template_id {dbqd.cms.www.modules.sitemap.ancestors.get_template_id {      select 
        content_item.get_template( 
          nvl( content_folder.get_index_page( :item_id ), 0), 'public' )
      from
        dual
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/sitemap/ancestors-oracle.xql}
dbqd.cms.www.modules.sitemap.attributes.content {dbqd.cms.www.modules.sitemap.attributes.content {             begin
               content_folder.${subfolder_method}(:folder_resolved_id,'content_folder');
               content_folder.${symlink_method}(:folder_resolved_id,'content_symlink');
             end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/sitemap/attributes-oracle.xql}
dbqd.cms.www.modules.sitemap.attributes.get_options {dbqd.cms.www.modules.sitemap.attributes.get_options {  select
    content_folder.is_registered(:folder_id,'content_folder') allow_subfolders,
    content_folder.is_registered(:folder_id,'content_symlink') allow_symlinks,
    content_folder.is_registered(:folder_id,'content_template') allow_templates
  from dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/sitemap/attributes-oracle.xql}
dbqd.cms.www.modules.sitemap.attributes.get_folder_name {dbqd.cms.www.modules.sitemap.attributes.get_folder_name {  select label from cr_folders where folder_id = :folder_id

      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/sitemap/attributes.xql}
dbqd.cms.www.modules.sitemap.copy.copy_item {dbqd.cms.www.modules.sitemap.copy.copy_item {	    begin
            content_item.copy(
                item_id          => :cp_item_id,
                target_folder_id => :folder_id,
	        creation_user    => :user_id,
	        creation_ip      => :ip
            ); 
            end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/sitemap/copy-oracle.xql}
dbqd.cms.www.modules.sitemap.copy.get_path {dbqd.cms.www.modules.sitemap.copy.get_path {  select
    content_item.get_path( :folder_id )
  from 
    dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/sitemap/copy-oracle.xql}
dbqd.cms.www.modules.sitemap.copy.get_marked {dbqd.cms.www.modules.sitemap.copy.get_marked {  select
    content_item.get_title(item_id) title, 
    content_item.get_path(item_id,:root_id) name, 
    item_id, parent_id
  from
    cr_items
  where
    item_id in ([join $clip_items ","])
  and
    -- only for those items which user has cm_examine
    cms_permission.permission_p(item_id, :user_id, 'cm_examine') = 't'

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/sitemap/copy-oracle.xql}
dbqd.cms.www.modules.sitemap.create.new_folder {dbqd.cms.www.modules.sitemap.create.new_folder {    begin 
    :1 := content_folder.new(
        name          => :name, 
        label         => :label, 
        description   => :description,
        parent_id     => :create_parent_id, 
        creation_user => :user_id, 
        creation_ip   => :ip ); 
    end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/sitemap/create-oracle.xql}
dbqd.cms.www.modules.sitemap.create.register_content_type {dbqd.cms.www.modules.sitemap.create.register_content_type {	  begin
	  content_folder.register_content_type(
	      folder_id        => :folder_id,
	      content_type     => 'content_template',
	      include_subtypes => 'f' 
	  );
	  end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/sitemap/create-oracle.xql}
dbqd.cms.www.modules.sitemap.create.get_path {dbqd.cms.www.modules.sitemap.create.get_path {  select content_item.get_path(:create_parent_id) from dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/sitemap/create-oracle.xql}
dbqd.cms.www.modules.sitemap.delete-items.get_marked_items {dbqd.cms.www.modules.sitemap.delete-items.get_marked_items {  select
    item_id,
    nvl(content_item.get_title(item_id),name) title, 
    content_item.get_path(item_id) path,
    pretty_name as content_type_pretty,
    content_symlink.is_symlink(item_id) is_symlink,
    content_folder.is_folder(item_id) is_folder,
    content_template.is_template(item_id) is_template
  from
    cr_items i, acs_object_types t
  where
    i.content_type = t.object_type
  and
    item_id in ([join $clip_items ","])
  and
    -- permissions check
    cms_permission.permission_p( item_id, :user_id, 'cm_write' ) = 't'
  order by
    -- this way parents are deleted after their children
    item_id desc

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/sitemap/delete-items-oracle.xql}
dbqd.cms.www.modules.sitemap.delete-items.delete_items {dbqd.cms.www.modules.sitemap.delete-items.delete_items {	  begin
	  $delete_proc (
	    $delete_key => :del_item_id
          );
          end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/sitemap/delete-items-oracle.xql}
dbqd.cms.www.modules.sitemap.delete-items.symlink_delete {dbqd.cms.www.modules.sitemap.delete-items.symlink_delete {        content_symlink.delete

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/sitemap/delete-items-oracle.xql}
dbqd.cms.www.modules.sitemap.delete-items.folder_delete {dbqd.cms.www.modules.sitemap.delete-items.folder_delete {        content_folder.delete

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/sitemap/delete-items-oracle.xql}
dbqd.cms.www.modules.sitemap.delete-items.template_delete {dbqd.cms.www.modules.sitemap.delete-items.template_delete {        content_template.delete

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/sitemap/delete-items-oracle.xql}
dbqd.cms.www.modules.sitemap.delete-items.item_delete {dbqd.cms.www.modules.sitemap.delete-items.item_delete {        content_item.delete

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/sitemap/delete-items-oracle.xql}
dbqd.cms.www.modules.sitemap.delete-items.get_list {dbqd.cms.www.modules.sitemap.delete-items.get_list {	  select
	    parent_id
          from
            cr_resolved_items
          where
            resolved_id = :del_item_id
	
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/sitemap/delete-items.xql}
dbqd.cms.www.modules.sitemap.delete.delete_folder {dbqd.cms.www.modules.sitemap.delete.delete_folder {      begin content_folder.delete(:id); end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/sitemap/delete-oracle.xql}
dbqd.cms.www.modules.sitemap.delete.check_empty {dbqd.cms.www.modules.sitemap.delete.check_empty {  select content_folder.is_empty(:id) from dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/sitemap/delete-oracle.xql}
dbqd.cms.www.modules.sitemap.index.create_folder {dbqd.cms.www.modules.sitemap.index.create_folder {  select
    r.item_id, '' as context,
    decode(o.object_type, 'content_symlink', r.label,
			  'content_folder', f.label,
			  nvl(v.title, i.name)) title,
    decode(r.item_id, :index_page_id, 't', 'f') is_index_page,
    nvl(to_char(round(v.content_length / 1000, 2)), '-') file_size
  from 
    cr_resolved_items r, cr_items i, cr_folders f, cr_revisions v, 
    cr_revisions u, acs_objects o, acs_object_types t
  where
    r.parent_id = $parent_var
  and
    r.resolved_id = i.item_id
  and
    i.item_id = o.object_id
  and
    i.content_type = t.object_type
  and
    i.latest_revision = v.revision_id (+)
  and
    i.live_revision = u.revision_id (+)
  and
    i.item_id = f.folder_id (+)
  order by
    is_index_page desc $orderby_clause
  
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/sitemap/index-oracle.xql}
dbqd.cms.www.modules.sitemap.index.display_data_partial {dbqd.cms.www.modules.sitemap.index.display_data_partial {  select
    decode(i.content_type, 'content_folder', 't', 'f') is_folder,
    decode(i.content_type, 'content_template', 't', 'f') is_template,
    r.item_id, r.resolved_id, r.is_symlink, r.name,
    NVL(trim(
      decode(o.object_type, 'content_symlink', r.label,
			  'content_folder', f.label,
			  nvl(v.title, i.name))),
      '-') title,
    decode(i.publish_status, 'live', 
      to_char(u.publish_date, 'MM/DD/YYYY'), '-') publish_date,
    o.object_type, t.pretty_name content_type,
    to_char(o.last_modified, 'MM/DD/YYYY HH24:MI') last_modified_date,
    decode(r.item_id, :index_page_id, 't', 'f') is_index_page,
    nvl(to_char(round(v.content_length / 1000, 2)), '-') file_size
  from 
    cr_resolved_items r, cr_items i, cr_folders f, cr_revisions v, 
    cr_revisions u, acs_objects o, acs_object_types t
  where
    r.parent_id = $parent_var
  and
    r.resolved_id = i.item_id
  and
    i.item_id = o.object_id
  and
    i.content_type = t.object_type
  and
    i.latest_revision = v.revision_id (+)
  and
    i.live_revision = u.revision_id (+)
  and
    i.item_id = f.folder_id (+)
  and
    -- paginator sql
    r.item_id in (CURRENT_PAGE_SET)
  order by
    is_index_page desc $orderby_clause
  
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/sitemap/index-oracle.xql}
dbqd.cms.www.modules.sitemap.index.get_resolved_id {dbqd.cms.www.modules.sitemap.index.get_resolved_id {    select content_symlink.resolve( :id ) from dual
  
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/sitemap/index-oracle.xql}
dbqd.cms.www.modules.sitemap.index.get_index_page_id {dbqd.cms.www.modules.sitemap.index.get_index_page_id {  select content_folder.get_index_page($parent_var) from dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/sitemap/index-oracle.xql}
dbqd.cms.www.modules.sitemap.index.get_symlinks {dbqd.cms.www.modules.sitemap.index.get_symlinks {  select
    i.item_id id,
    content_item.get_path(i.item_id) path
  from 
    cr_items i, cr_symlinks s
  where
    i.item_id = s.target_id
  and
    i.item_id = :original_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/sitemap/index-oracle.xql}
dbqd.cms.www.modules.sitemap.index.get_info {dbqd.cms.www.modules.sitemap.index.get_info {    select
      parent_id, NVL(label, name) label, description
    from
      cr_items i, cr_folders f
    where
      i.item_id = f.folder_id
    and
      f.folder_id = :id
  
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/sitemap/index-oracle.xql}
dbqd.cms.www.modules.sitemap.index.get_module_name {dbqd.cms.www.modules.sitemap.index.get_module_name {    select name from cm_modules where key = :mount_point
  
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/sitemap/index.xql}
dbqd.cms.www.modules.sitemap.index.get_reg_types {dbqd.cms.www.modules.sitemap.index.get_reg_types {    select
      content_type
    from
      cr_folder_type_map
    where
      folder_id = :root_id
  
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/sitemap/index.xql}
dbqd.cms.www.modules.sitemap.index.get_types {dbqd.cms.www.modules.sitemap.index.get_types {    select
      content_type
    from
      cr_folder_type_map
    where
      folder_id = :id
  
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/sitemap/index.xql}
dbqd.cms.www.modules.sitemap.move.move_items {dbqd.cms.www.modules.sitemap.move.move_items {	    begin
            content_item.move(
                item_id          => :mv_item_id,
                target_folder_id => :folder_id
            ); 
            end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/sitemap/move-oracle.xql}
dbqd.cms.www.modules.sitemap.move.get_path {dbqd.cms.www.modules.sitemap.move.get_path {  select
    content_item.get_path( :folder_id )
  from 
    dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/sitemap/move-oracle.xql}
dbqd.cms.www.modules.sitemap.move.get_marked {dbqd.cms.www.modules.sitemap.move.get_marked {  select
    content_item.get_title(item_id) title, 
    content_item.get_path(item_id,:root_id) name, 
    item_id, parent_id
  from
    cr_items
  where
    item_id in ([join $clip_items ","])
  and
    -- only for those items which user has cm_write
    cms_permission.permission_p(item_id, :user_id, 'cm_write') = 't'

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/sitemap/move-oracle.xql}
dbqd.cms.www.modules.sitemap.rename.rename_folder {dbqd.cms.www.modules.sitemap.rename.rename_folder {    begin 
    content_folder.rename (
        folder_id   => :item_id, 
        name        => :name, 
        label       => :label, 
        description => :description
    ); 
    end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/sitemap/rename-oracle.xql}
dbqd.cms.www.modules.sitemap.rename.get_info {dbqd.cms.www.modules.sitemap.rename.get_info {    select
      i.name, f.label, f.description
    from 
      cr_items i, cr_folders f
    where
      i.item_id = :item_id
    and
      f.folder_id = :item_id
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/sitemap/rename.xql}
dbqd.cms.www.modules.sitemap.symlink.new_link {dbqd.cms.www.modules.sitemap.symlink.new_link {	    begin
            :symlink_id := content_symlink.new(
                name          => :name, 
                label         => :label,
                target_id     => :sym_item_id, 
                parent_id     => :folder_id,
                creation_date => sysdate, 
                creation_user => :user_id, 
                creation_ip   => :ip
            ); 
            end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/sitemap/symlink-oracle.xql}
dbqd.cms.www.modules.sitemap.symlink.get_marked {dbqd.cms.www.modules.sitemap.symlink.get_marked {  select
    content_item.get_title(item_id) title, 'symlink_to_' || name as name, 
    item_id
  from
    cr_items
  where
    item_id in ([join $clip_items ","])
  and
    -- only items which have are not symlinks
    content_type ^= 'content_symlink'
  and
    -- only for those item which user has cm_examine
    cms_permission.permission_p(item_id, :user_id, 'cm_examine') = 't'

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/sitemap/symlink-oracle.xql}
dbqd.cms.www.modules.sitemap.type-register.register_type {dbqd.cms.www.modules.sitemap.type-register.register_type {      begin
           content_folder.register_content_type(
               folder_id        => :folder_id,
               content_type     => :type,
               include_subtypes => 'f'
           );
         end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/sitemap/type-register-oracle.xql}
dbqd.cms.www.modules.sitemap.type-unregister.unregister {dbqd.cms.www.modules.sitemap.type-unregister.unregister {         begin
           content_folder.unregister_content_type(
               folder_id        => :folder_id,
               content_type     => :type_key,
               include_subtypes => 'f' 
           );
         end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/sitemap/type-unregister-oracle.xql}
dbqd.cms.www.modules.templates.assets.get_image_info {dbqd.cms.www.modules.templates.assets.get_image_info {          select width, height from images 
          where image_id = :revision_id
        
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/templates/assets.xql}
dbqd.cms.www.modules.templates.clipboard.get_templates {dbqd.cms.www.modules.templates.clipboard.get_templates {        select
           template_id, content_item.get_path(template_id) path
        from
           cr_templates
        where
          template_id in ($in_list)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/templates/clipboard-oracle.xql}
dbqd.cms.www.modules.templates.copy.copy_item {dbqd.cms.www.modules.templates.copy.copy_item {      declare copy_id integer; begin 
        copy_id := content_item.copy2(
          :template_id, :folder_id, :creation_user, :creation_ip
        );
        insert into cr_templates (template_id) values (copy_id);
      end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/templates/copy-oracle.xql}
dbqd.cms.www.modules.templates.copy.get_path {dbqd.cms.www.modules.templates.copy.get_path {      select content_item.get_path(:folder_id) from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/templates/copy-oracle.xql}
dbqd.cms.www.modules.templates.delete.delete {dbqd.cms.www.modules.templates.delete.delete {      begin content_template.delete(:template_id); end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/templates/delete-oracle.xql}
dbqd.cms.www.modules.templates.edit.get_path {dbqd.cms.www.modules.templates.edit.get_path {        select content_item.get_path(:template_id) from dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/templates/edit-oracle.xql}
dbqd.cms.www.modules.templates.edit.get_mime_types {dbqd.cms.www.modules.templates.edit.get_mime_types {  select label, m.mime_type from cr_mime_types m, cr_content_mime_type_map t
  where t.content_type = 'content_template' and t.mime_type = m.mime_type

      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/templates/edit.xql}
dbqd.cms.www.modules.templates.edit.get_mime_type {dbqd.cms.www.modules.templates.edit.get_mime_type {        select mime_type from cr_revisions where revision_id = :edit_revision

      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/templates/edit.xql}
dbqd.cms.www.modules.templates.edit.get_revision_count {dbqd.cms.www.modules.templates.edit.get_revision_count {        select count(revision_id) 
        from cr_revisions 
        where item_id = :template_id

      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/templates/edit.xql}
dbqd.cms.www.modules.templates.index.get_id {dbqd.cms.www.modules.templates.index.get_id {        select 
        content_item.get_id(:path, content_template.get_root_folder) 
        from dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/templates/index-oracle.xql}
dbqd.cms.www.modules.templates.index.get_root_folder_id {dbqd.cms.www.modules.templates.index.get_root_folder_id {        select content_template.get_root_folder from dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/templates/index-oracle.xql}
dbqd.cms.www.modules.templates.index.get_path {dbqd.cms.www.modules.templates.index.get_path {        select content_item.get_path(:id) from dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/templates/index-oracle.xql}
dbqd.cms.www.modules.templates.index.get_items {dbqd.cms.www.modules.templates.index.get_items {  select
    t.template_id, i.name, 
    to_char(o.last_modified, 'MM/DD/YY HH:MI AM') modified,
    nvl(round(r.content_length / 1000, 2), 0) || ' KB' as file_size
  from
    cr_templates t, cr_items i, acs_objects o, cr_revisions r
  where
    i.parent_id = :id
  and
    i.item_id = t.template_id
  and
    i.item_id = o.object_id
  and
    i.latest_revision = r.revision_id (+)
  order by
    upper(i.name)
 
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/templates/index-oracle.xql}
dbqd.cms.www.modules.templates.index.get_type {dbqd.cms.www.modules.templates.index.get_type {        select content_type from cr_items where item_id = :id
 
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/templates/index.xql}
dbqd.cms.www.modules.templates.index.get_parent {dbqd.cms.www.modules.templates.index.get_parent {  select
    f.folder_id, f.label, i.name, 
    to_char(o.last_modified, 'MM/DD/YY HH:MI AM') as modified
  from
    cr_folders f, cr_items i, acs_objects o
  where
    i.item_id = (select parent_id from cr_items where item_id = :id)
  and
    i.item_id = f.folder_id
  and
    i.item_id = o.object_id
 
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/templates/index.xql}
dbqd.cms.www.modules.templates.index.get_folders {dbqd.cms.www.modules.templates.index.get_folders {  select
    f.folder_id, f.label, i.name, 
    to_char(o.last_modified, 'MM/DD/YY HH:MI AM') as modified
  from
    cr_folders f, cr_items i, acs_objects o
  where
    i.parent_id = :id
  and
    i.item_id = f.folder_id
  and
    i.item_id = o.object_id
  order by
    upper(f.label), upper(i.name) 

      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/templates/index.xql}
dbqd.cms.www.modules.templates.move.move_item {dbqd.cms.www.modules.templates.move.move_item {      begin 
        content_item.move(
          :template_id, :folder_id
        );
      end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/templates/move-oracle.xql}
dbqd.cms.www.modules.templates.move.get_path {dbqd.cms.www.modules.templates.move.get_path {      select content_item.get_path(:folder_id) from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/templates/move-oracle.xql}
dbqd.cms.www.modules.templates.new-folder.get_path {dbqd.cms.www.modules.templates.new-folder.get_path {        select content_item.get_path(:parent_id) from dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/templates/new-folder-oracle.xql}
dbqd.cms.www.modules.templates.new-folder.new_folder {dbqd.cms.www.modules.templates.new-folder.new_folder {   begin :1 := content_folder.new(
         folder_id => :folder_id,
         name => :name,
         label => :label,
         description => :description,
         parent_id => :parent_id,
         creation_ip   => :creation_ip,
         creation_user => :creation_user
  ); end;
       } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/templates/new-folder-oracle.xql}
dbqd.cms.www.modules.templates.new-template.new_template {dbqd.cms.www.modules.templates.new-template.new_template {      begin :1 := content_template.new(
         template_id => :template_id,
         name => :name,
         parent_id => :folder_id,
         creation_ip   => :creation_ip,
         creation_user => :creation_user
  ); end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/templates/new-template-oracle.xql}
dbqd.cms.www.modules.templates.new-template.get_path {dbqd.cms.www.modules.templates.new-template.get_path {        select content_item.get_path(:folder_id) from dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/templates/new-template-oracle.xql}
dbqd.cms.www.modules.templates.new-template.get_mime_types {dbqd.cms.www.modules.templates.new-template.get_mime_types {  select label, m.mime_type from cr_mime_types m, cr_content_mime_type_map t
  where t.content_type = 'content_template' and t.mime_type = m.mime_type

      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/templates/new-template.xql}
dbqd.cms.www.modules.templates.properties.get_id {dbqd.cms.www.modules.templates.properties.get_id {    select 
      content_item.get_id(:path, content_template.get_root_folder) 
    from dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/templates/properties-oracle.xql}
dbqd.cms.www.modules.templates.properties.get_root_id {dbqd.cms.www.modules.templates.properties.get_root_id {        select content_template.get_root_folder from dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/templates/properties-oracle.xql}
dbqd.cms.www.modules.templates.properties.get_path {dbqd.cms.www.modules.templates.properties.get_path {      select content_item.get_path(:id) from dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/templates/properties-oracle.xql}
dbqd.cms.www.modules.templates.properties.get_type {dbqd.cms.www.modules.templates.properties.get_type {        select content_type from cr_items where item_id = :id

      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/templates/properties.xql}
dbqd.cms.www.modules.templates.publish.get_info {dbqd.cms.www.modules.templates.publish.get_info {  select 
    content_item.get_path(item_id) path, item_id 
  from 
    cr_items 
  where item_id = (
    select item_id from cr_revisions where revision_id = :revision_id)
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/templates/publish-oracle.xql}
dbqd.cms.www.modules.templates.publish.update_items {dbqd.cms.www.modules.templates.publish.update_items {      update cr_items set live_revision = :revision_id
                where item_id = :template_id
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/templates/publish.xql}
dbqd.cms.www.modules.templates.revisions.get_revisions {dbqd.cms.www.modules.templates.revisions.get_revisions {  select
    revision_id,
    to_char(o.creation_date, 'MM/DD/YY HH:MI AM') modified,
    round(r.content_length / 1000, 2) || ' KB' as file_size,
    decode(NVL(p.person_id, 0),
        0, '-',
        substr(p.first_names, 1, 1) || substr(p.last_name, 1, 1)) modified_by,
    nvl(j.msg, '-') msg
  from 
    cr_revisions r, acs_objects o, persons p, journal_entries j
  where
    item_id = :template_id
  and
    o.object_id = r.revision_id
  and
    o.creation_user = p.person_id (+)
  and
    o.object_id = j.journal_id (+)
  order by
    o.creation_date desc

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/templates/revisions-oracle.xql}
dbqd.cms.www.modules.templates.revisions.get_live_revision {dbqd.cms.www.modules.templates.revisions.get_live_revision {        select live_revision from cr_items where item_id = :template_id

      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/templates/revisions.xql}
dbqd.cms.www.modules.templates.revisions.get_revision_count {dbqd.cms.www.modules.templates.revisions.get_revision_count {  select
    count(*) 
  from 
    cr_revisions
  where
    item_id = :template_id

      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/templates/revisions.xql}
dbqd.cms.www.modules.templates.template-create.new_template {dbqd.cms.www.modules.templates.template-create.new_template {      begin 
        :ret_val := content_template.new(
            template_id   => :template_id,
            name          => :name,
            parent_id     => :parent_id,
            creation_user => :user_id,
            creation_ip   => :ip_address
        );
        end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/templates/template-create-oracle.xql}
dbqd.cms.www.modules.templates.template-create.get_template_id {dbqd.cms.www.modules.templates.template-create.get_template_id {        select acs_object_id_seq.nextval from dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/templates/template-create-oracle.xql}
dbqd.cms.www.modules.templates.template-create.get_folder_name {dbqd.cms.www.modules.templates.template-create.get_folder_name {        select name from cr_items where item_id = :parent_id     

      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/templates/template-create.xql}
dbqd.cms.www.modules.templates.template-delete.delete_template {dbqd.cms.www.modules.templates.template-delete.delete_template {      begin 
        content_template.delete(:template_id); 
      end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/templates/template-delete-oracle.xql}
dbqd.cms.www.modules.templates.template-delete.get_status {dbqd.cms.www.modules.templates.template-delete.get_status {  select 't' from dual 
    where not exists (
      select 
        1 
      from
        cr_templates t, acs_objects o
      where
        o.object_id = t.template_id
      and
        o.context_id = :template_id
      and not exists (select 1 from cr_revisions 
                        where revision_id = t.template_id))

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/templates/template-delete-oracle.xql}
dbqd.cms.www.modules.templates.template.get_id {dbqd.cms.www.modules.templates.template.get_id {  select content_symlink.resolve(:template_id) from dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/templates/template-oracle.xql}
dbqd.cms.www.modules.templates.template.get_path {dbqd.cms.www.modules.templates.template.get_path {  select content_item.get_path(:template_id, :root_id) from dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/templates/template-oracle.xql}
dbqd.cms.www.modules.templates.template.get_items {dbqd.cms.www.modules.templates.template.get_items {  select
    content_item.get_title(item_id) title, item_id, use_context
  from
    cr_item_template_map
  where
    template_id = :template_id
  order by
    use_context
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/templates/template-oracle.xql}
dbqd.cms.www.modules.templates.template.get_types {dbqd.cms.www.modules.templates.template.get_types {  select
    pretty_name, content_type, use_context
  from
    acs_object_types types, cr_type_template_map map
  where
    map.template_id = :template_id
  and
    types.object_type = map.content_type
  order by
    types.pretty_name
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/templates/template.xql}
dbqd.cms.www.modules.templates.upload.get_path {dbqd.cms.www.modules.templates.upload.get_path {      select content_item.get_path(:template_id) from dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/templates/upload-oracle.xql}
dbqd.cms.www.modules.types.content-method.add_method {dbqd.cms.www.modules.types.content-method.add_method {      begin
      content_method.add_method (
          content_type   => :content_type,
          content_method => :content_method,
          is_default     => 'f'
      );
      end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/types/content-method-oracle.xql}
dbqd.cms.www.modules.types.content-method-set-default.set_content_method_default {dbqd.cms.www.modules.types.content-method-set-default.set_content_method_default {  begin
  content_method.set_default_method (
      content_type   => :content_type,
      content_method => :content_method
  );
  end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/types/content-method-set-default-oracle.xql}
dbqd.cms.www.modules.types.content-method-unregister.content_method_unregister {dbqd.cms.www.modules.types.content-method-unregister.content_method_unregister {  begin
  content_method.remove_method (
      content_type   => :content_type,
      content_method => :content_method
  );
  end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/types/content-method-unregister-oracle.xql}
dbqd.cms.www.modules.types.content-method-unset-default.unset_content_method_default {dbqd.cms.www.modules.types.content-method-unset-default.unset_content_method_default {  begin
    content_method.unset_default_method (
      content_type   => :content_type
    );
  end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/types/content-method-unset-default-oracle.xql}
dbqd.cms.www.modules.types.content-method.get_methods {dbqd.cms.www.modules.types.content-method.get_methods {  select
    m.content_method, label, is_default, description
  from
    cm_content_type_method_map map, cm_content_methods m
  where
    m.content_method = map.content_method
  and
    map.content_type = :content_type
  order by
    is_default desc, label

      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/types/content-method.xql}
dbqd.cms.www.modules.types.content-method.check_status {dbqd.cms.www.modules.types.content-method.check_status {  select
    count( mime_type )
  from
    cr_content_mime_type_map
  where
    mime_type like ('%text/%')
  and
    content_type = :content_type

      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/types/content-method.xql}
dbqd.cms.www.modules.types.content-method.get_unregistered_methods {dbqd.cms.www.modules.types.content-method.get_unregistered_methods {  select
    label, m.content_method
  from
    cm_content_methods m
  where
    not exists ( 
      select 1
      from
        cm_content_type_method_map
      where
        content_method = m.content_method
      and
        content_type = :content_type )
  $text_entry_filter_sql
  order by 
    label

      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/types/content-method.xql}
dbqd.cms.www.modules.types.content_symlink.delete.symlink_delete {dbqd.cms.www.modules.types.content_symlink.delete.symlink_delete {         begin content_symlink.delete(:id); end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/types/content_symlink/delete-oracle.xql}
dbqd.cms.www.modules.types.index.get_content_type {dbqd.cms.www.modules.types.index.get_content_type {  select 
    decode (supertype, 'acs_object', '', supertype) as parent_type,   
    decode (object_type, 'content_revision', '', object_type) as object_type,
    pretty_name
  from 
    acs_object_types
  where
    object_type ^= 'acs_object'
  connect by 
    object_type = prior supertype
  start with 
    object_type = :content_type
  order by 
    rownum desc

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/types/index-oracle.xql}
dbqd.cms.www.modules.types.index.get_attr_types {dbqd.cms.www.modules.types.index.get_attr_types {  select 
    attr.attribute_id, attr.attribute_name, attr.object_type,
    attr.pretty_name as attribute_name_pretty,
    datatype, types.pretty_name as pretty_name,
    nvl(description_key,'&nbsp') as description_key, 
    description, widget
  from 
    acs_attributes attr, acs_attribute_descriptions d,
    cm_attribute_widgets w,
    ( select 
        object_type, pretty_name
      from 
        acs_object_types
      where 
        object_type ^= 'acs_object'
      connect by 
        prior supertype = object_type
      start with 
        object_type = :content_type
    ) types        
  where 
    attr.object_type = types.object_type
  and
    attr.attribute_id = w.attribute_id(+)
  and 
    attr.attribute_name = d.attribute_name(+)
  order by 
    types.object_type, sort_order, attr.attribute_name

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/types/index-oracle.xql}
dbqd.cms.www.modules.types.index.get_type_templates {dbqd.cms.www.modules.types.index.get_type_templates {  select 
    template_id, ttmap.content_type, use_context, is_default, name, 
    content_item.get_path(
      template_id,:root_id) as path,
    (select pretty_name 
       from acs_object_types 
       where object_type = :content_type) pretty_name
  from 
    cr_type_template_map ttmap, cr_items i 
  where 
    i.item_id = ttmap.template_id
  and 
    ttmap.content_type = :content_type
  order by 
    upper(name)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/types/index-oracle.xql}
dbqd.cms.www.modules.types.index.get_module_id {dbqd.cms.www.modules.types.index.get_module_id {  select module_id from cm_modules where key = 'types'

      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/types/index.xql}
dbqd.cms.www.modules.types.index.get_object_type {dbqd.cms.www.modules.types.index.get_object_type {  select 
    pretty_name
  from
    acs_object_types
  where
    object_type = :content_type

      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/types/index.xql}
dbqd.cms.www.modules.types.mime-types.register_mime_type {dbqd.cms.www.modules.types.mime-types.register_mime_type {      begin
        content_type.register_mime_type (
            content_type => :content_type,
            mime_type    => :mime_type
        );
      end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/types/mime-types-oracle.xql}
dbqd.cms.www.modules.types.mime-types.get_module_id {dbqd.cms.www.modules.types.mime-types.get_module_id {  select module_id from cm_modules where key = 'types'

      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/types/mime-types.xql}
dbqd.cms.www.modules.types.mime-types.get_name {dbqd.cms.www.modules.types.mime-types.get_name {  select
    pretty_name
  from
    acs_object_types
  where
    object_type = :content_type

      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/types/mime-types.xql}
dbqd.cms.www.modules.types.mime-types.get_unreg_mime_types {dbqd.cms.www.modules.types.mime-types.get_unreg_mime_types {  select
    label, mime_type
  from 
    cr_mime_types
  where
    not exists ( select 1
                 from 
                   cr_content_mime_type_map
                 where
                   mime_type = cr_mime_types.mime_type
                 and
                   content_type = :content_type )
  order by
    label

      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/types/mime-types.xql}
dbqd.cms.www.modules.types.mime-types.get_reg_mime_types {dbqd.cms.www.modules.types.mime-types.get_reg_mime_types {  select 
    label, m.mime_type
  from
    cr_mime_types m, cr_content_mime_type_map map
  where
    m.mime_type = map.mime_type
  and
    map.content_type = :content_type
  order by
    label

      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/types/mime-types.xql}
dbqd.cms.www.modules.types.register-templates.register_templates {dbqd.cms.www.modules.types.register-templates.register_templates {      begin
                   content_type.register_template(
                       content_type => :content_type,
	               template_id  => :template_id,
	               use_context  => :context );
                 end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/types/register-templates-oracle.xql}
dbqd.cms.www.modules.types.register-templates.get_content_templates {dbqd.cms.www.modules.types.register-templates.get_content_templates {  select 
    template_id, 
    content_item.get_path( template_id, content_template.get_root_folder ) 
      as name
  from 
    cr_templates t, cr_items i
  where 
    t.template_id = i.item_id
  and not exists (
    select 1 
    from 
      cr_type_template_map
    where 
      template_id = t.template_id
    and 
      content_type = :content_type )
  and 
    $marked_templates_sql

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/types/register-templates-oracle.xql}
dbqd.cms.www.modules.types.register-templates.get_pretty_type {dbqd.cms.www.modules.types.register-templates.get_pretty_type {  select 
    pretty_name
  from
    acs_object_types
  where
    object_type = :content_type  

      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/types/register-templates.xql}
dbqd.cms.www.modules.types.register-templates.get_use_contexts {dbqd.cms.www.modules.types.register-templates.get_use_contexts {         select use_context, use_context 
           from cr_template_use_contexts
       order by 1     

      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/types/register-templates.xql}
dbqd.cms.www.modules.types.relation-register.get_target_types {dbqd.cms.www.modules.types.relation-register.get_target_types {  select
    lpad(' ', level, '-') || pretty_name, object_type
  from
    acs_object_types
  connect by
    prior object_type = supertype
  start with
    object_type = 'content_revision'

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/types/relation-register-oracle.xql}
dbqd.cms.www.modules.types.relation-register.register_rel_types {dbqd.cms.www.modules.types.relation-register.register_rel_types {	  begin
          content_type.${register_method} (
	      $content_key => :content_type,
	      $target_key  => :target_type,
	      relation_tag => :relation_tag,
              min_n        => :min_n,
              max_n        => :max_n
          );
          end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/types/relation-register-oracle.xql}
dbqd.cms.www.modules.types.relation-register.get_module_id {dbqd.cms.www.modules.types.relation-register.get_module_id {  select module_id from cm_modules where key = 'types'

      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/types/relation-register.xql}
dbqd.cms.www.modules.types.relation-register.get_pretty_name {dbqd.cms.www.modules.types.relation-register.get_pretty_name {  select
    pretty_name
  from
    acs_object_types
  where
    object_type = :content_type

      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/types/relation-register.xql}
dbqd.cms.www.modules.types.relation-unregister.unregister {dbqd.cms.www.modules.types.relation-unregister.unregister {	  begin
          content_type.${unregister_method} (
	      $content_key => :content_type,
	      $target_key  => :target_type,
	      relation_tag => :relation_tag
          );
          end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/types/relation-unregister-oracle.xql}
dbqd.cms.www.modules.types.relation-unregister.get_module_id {dbqd.cms.www.modules.types.relation-unregister.get_module_id {  select module_id from cm_modules where key = 'types'

      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/types/relation-unregister.xql}
dbqd.cms.www.modules.types.relations.get_module_id {dbqd.cms.www.modules.types.relations.get_module_id {  select module_id from cm_modules where key = 'types'

      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/types/relations.xql}
dbqd.cms.www.modules.types.relations.get_rel_types {dbqd.cms.www.modules.types.relations.get_rel_types {  select
    pretty_name, target_type, relation_tag, min_n, max_n
  from
    cr_type_relations r, acs_object_types o
  where
    o.object_type = r.target_type
  and
    r.content_type = :type
  order by
    pretty_name, relation_tag

      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/types/relations.xql}
dbqd.cms.www.modules.types.relations.get_child_types {dbqd.cms.www.modules.types.relations.get_child_types {  select
    pretty_name, child_type, relation_tag, min_n, max_n
  from
    cr_type_children c, acs_object_types o
  where
    c.child_type = o.object_type
  and
    c.parent_type = :type
  order by
    pretty_name, relation_tag

      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/types/relations.xql}
dbqd.cms.www.modules.types.set-default-template.set_default_template {dbqd.cms.www.modules.types.set-default-template.set_default_template {  begin
  content_type.set_default_template(
      template_id  => :template_id,
      content_type => :content_type,
      use_context  => :context );
  end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/types/set-default-template-oracle.xql}
dbqd.cms.www.modules.types.unregister-mime-type.unregister_mime_type {dbqd.cms.www.modules.types.unregister-mime-type.unregister_mime_type {  begin
    content_type.unregister_mime_type(
        content_type => :content_type,
        mime_type    => :mime_type
    );
  end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/types/unregister-mime-type-oracle.xql}
dbqd.cms.www.modules.types.unregister-mime-type.get_module_id {dbqd.cms.www.modules.types.unregister-mime-type.get_module_id {  select module_id from cm_modules where key = 'types'

      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/types/unregister-mime-type.xql}
dbqd.cms.www.modules.types.unregister-template.unregister_template {dbqd.cms.www.modules.types.unregister-template.unregister_template {  begin
    content_type.unregister_template(
      template_id  => :template_id,
      content_type => :content_type,
      use_context  => :context );
  end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/types/unregister-template-oracle.xql}
dbqd.cms.www.modules.types.widget-register-1.register_widget {dbqd.cms.www.modules.types.widget-register-1.register_widget {	  begin
	  cm_form_widget.register_attribute_widget(
              content_type   => :content_type,
              attribute_name => :attribute_name,
              widget         => :widget,
              is_required    => :is_required
          );
	  end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/types/widget-register-1-oracle.xql}
dbqd.cms.www.modules.types.widget-register-1.update_widgets {dbqd.cms.www.modules.types.widget-register-1.update_widgets {	  update cm_attribute_widgets
            set is_required = case when is_required = 't' then 'f' else 't' end
            where attribute_id = :attribute_id
            and widget = :widget
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/types/widget-register-1-oracle.xql}
dbqd.cms.www.modules.types.widget-register-1.check_registered {dbqd.cms.www.modules.types.widget-register-1.check_registered {      select 1
      from
        cm_attribute_widgets
      where
        attribute_id = :attribute_id
      and
        widget = :widget
    
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/types/widget-register-1.xql}
dbqd.cms.www.modules.types.widget-register-2.get_params {dbqd.cms.www.modules.types.widget-register-2.get_params {  select
    f.param_id, param, 
    case when f.is_required = 't' then 't' else w.is_required end is_required, is_html, 
    nvl(w.value,f.default_value) default_value,
    nvl(w.param_source,'literal') param_source
  from
    cm_form_widget_params f, 
    ( select 
        is_required, param_id, param_source, value
      from 
        cm_attribute_widget_params awp, cm_attribute_widgets aw
      where 
        awp.attribute_id = :attribute_id
      and
        awp.attribute_id = aw.attribute_id
    ) w
  where
    widget = :widget
  and
    f.param_id = w.param_id (+)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/types/widget-register-2-oracle.xql}
dbqd.cms.www.modules.types.widget-register-2.get_attr_info {dbqd.cms.www.modules.types.widget-register-2.get_attr_info {  select
    a.pretty_name as attribute_name_pretty, 
    a.attribute_name,
    t.pretty_name as content_type_pretty,
    a.object_type as content_type
  from
    acs_attributes a, acs_object_types t
  where
    a.object_type = t.object_type
  and
    a.attribute_id = :attribute_id

      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/types/widget-register-2.xql}
dbqd.cms.www.modules.types.widget-register-2.get_params {dbqd.cms.www.modules.types.widget-register-2.get_params {  select
    f.param_id, param, 
    case when f.is_required = 't' then 't' else w.is_required end is_required, is_html, 
    nvl(w.value,f.default_value) default_value,
    nvl(w.param_source,'literal') param_source
  from
    cm_form_widget_params f, 
    ( select 
        is_required, param_id, param_source, value
      from 
        cm_attribute_widget_params awp, cm_attribute_widgets aw
      where 
        awp.attribute_id = :attribute_id
      and
        awp.attribute_id = aw.attribute_id
    ) w
  where
    widget = :widget
  and
    f.param_id = w.param_id (+)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/types/widget-register-2-oracle.xql}
dbqd.cms.www.modules.types.widget-register-3.get_outstanding {dbqd.cms.www.modules.types.widget-register-3.get_outstanding {      select
        distinct param
      from
        cm_form_widget_params f
      where
        is_required = 't'
      and
        widget = :widget
      and
        not exists (
          select 1
          from
            cm_attribute_widget_params
          where
            attribute_id = :attribute_id
          and
            param_id = f.param_id )
    
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/types/widget-register-3.xql}
dbqd.cms.www.modules.types.widget-register-3.get_names {dbqd.cms.www.modules.types.widget-register-3.get_names {      select
        pretty_name, attribute_name, object_type
      from
        acs_attributes
      where
        attribute_id = :attribute_id
    
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/types/widget-register-3.xql}
dbqd.cms.www.modules.types.widget-register.get_module_id {dbqd.cms.www.modules.types.widget-register.get_module_id {  select
    module_id
  from
    cm_modules
  where
    key = 'types'

      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/types/widget-register.xql}
dbqd.cms.www.modules.types.widget-register.get_form_widgets {dbqd.cms.www.modules.types.widget-register.get_form_widgets {  select
    widget, widget
  from
    cm_form_widgets

      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/types/widget-register.xql}
dbqd.cms.www.modules.types.widget-register.get_attr_info {dbqd.cms.www.modules.types.widget-register.get_attr_info {      select
        a.pretty_name as attribute_name_pretty, 
        t.pretty_name as content_type_pretty,
        t.object_type as content_type,
        a.attribute_name
      from
        acs_attributes a, acs_object_types t
      where
        a.object_type = t.object_type
      and
        a.attribute_id = :attribute_id

      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/types/widget-register.xql}
dbqd.cms.www.modules.types.widget-register.get_reg_widget {dbqd.cms.www.modules.types.widget-register.get_reg_widget {      select
        widget as registered_widget, is_required
      from
        cm_attribute_widgets
      where
        attribute_id = :attribute_id

      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/types/widget-register.xql}
dbqd.cms.www.modules.types.widget-unregister.unregister {dbqd.cms.www.modules.types.widget-unregister.unregister {  begin
  cm_form_widget.unregister_attribute_widget (
      content_type   => :content_type,
      attribute_name => :attribute_name
  );
  end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/types/widget-unregister-oracle.xql}
dbqd.cms.www.modules.types.widget-unregister.get_module_id {dbqd.cms.www.modules.types.widget-unregister.get_module_id {  select
    module_id
  from
    cm_modules
  where
    key = 'types'

      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/types/widget-unregister.xql}
dbqd.cms.www.modules.types.widget-unregister.get_attr_info {dbqd.cms.www.modules.types.widget-unregister.get_attr_info {  select
    attribute_name, object_type as content_type
  from
    acs_attributes
  where
    attribute_id = :attribute_id

      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/types/widget-unregister.xql}
dbqd.cms.www.modules.users.create.new_group {dbqd.cms.www.modules.users.create.new_group {      begin :1 := acs_group.new(
    group_id => :group_id, 
    group_name => :group_name, 
    email => :email,
    url => :url,
    creation_user => :user_id, 
    creation_ip => :ip ); end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/users/create-oracle.xql}
dbqd.cms.www.modules.users.create.new_rel {dbqd.cms.www.modules.users.create.new_rel {      begin :1 := composition_rel.new(
    object_id_one => :parent_id,
    object_id_two => :group_id,
    creation_user => :user_id, 
    creation_ip => :ip ); end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/users/create-oracle.xql}
dbqd.cms.www.modules.users.create.get_group_id {dbqd.cms.www.modules.users.create.get_group_id {    select acs_object_id_seq.nextval from dual
  
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/users/create-oracle.xql}
dbqd.cms.www.modules.users.delete.delete_group {dbqd.cms.www.modules.users.delete.delete_group {      begin acs_group.delete(:id); end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/users/delete-oracle.xql}
dbqd.cms.www.modules.users.delete.get_status {dbqd.cms.www.modules.users.delete.get_status {  select NVL((select 'f' from dual where exists (
            select 1 from acs_rels 
              where object_id_one = :id 
              and rel_type in ('composition_rel', 'membership_rel'))),
          't') as is_empty from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/users/delete-oracle.xql}
dbqd.cms.www.modules.users.edit-user.get_user_info {dbqd.cms.www.modules.users.edit-user.get_user_info {    select
      p.first_names, p.last_name, 
      pp.email, pp.url, 
      u.screen_name,
      to_char(u.no_alerts_until, 'YYYY/MM/DD') as no_alerts_until
    from
      persons p, parties pp, users u
    where
      p.person_id = :id
    and
      pp.party_id = :id
    and
      u.user_id = :id

      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/users/edit-user.xql}
dbqd.cms.www.modules.users.edit-user.edit_user_1 {dbqd.cms.www.modules.users.edit-user.edit_user_1 {    update users $users_update where user_id = :item_id
  
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/users/edit-user.xql}
dbqd.cms.www.modules.users.edit-user.edit_user_2 {dbqd.cms.www.modules.users.edit-user.edit_user_2 {    update persons set first_names=:first_names, last_name = :last_name 
      where person_id=:item_id
  
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/users/edit-user.xql}
dbqd.cms.www.modules.users.edit-user.edit_user_3 {dbqd.cms.www.modules.users.edit-user.edit_user_3 {    update parties set email=:email, url=:url where party_id = :item_id
  
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/users/edit-user.xql}
dbqd.cms.www.modules.users.edit.edit_group_1 {dbqd.cms.www.modules.users.edit.edit_group_1 {    update groups 
      set group_name = :group_name
      where group_id = :group_id
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/users/edit.xql}
dbqd.cms.www.modules.users.edit.edit_group_2 {dbqd.cms.www.modules.users.edit.edit_group_2 {    update parties
      set email = :email, url = :url
      where party_id = :group_id
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/users/edit.xql}
dbqd.cms.www.modules.users.edit.get_group_info {dbqd.cms.www.modules.users.edit.get_group_info {    select
      g.group_name, p.url, p.email
    from
      groups g, parties p
    where
      g.group_id = :id
    and
      p.party_id = :id

     } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/users/edit.xql}
dbqd.cms.www.modules.users.index.get_groups_1 {dbqd.cms.www.modules.users.index.get_groups_1 {    select
      g.group_id, g.group_name,
      NVL(pg.email, '&nbsp;') as email,
      (select count(*) from group_member_map 
       where group_id = g.group_id) as user_count
    from 
      groups g, parties pg, acs_rels rg, composition_rels rc
    where
      g.group_id = pg.party_id
    and
      rg.object_id_one = :id
    and
      rg.object_id_two = g.group_id
    and
      rc.rel_id = rg.rel_id
    order by
      upper(g.group_name)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/users/index-oracle.xql}
dbqd.cms.www.modules.users.index.get_users_1 {dbqd.cms.www.modules.users.index.get_users_1 {    select
      u.user_id, ppu.first_names || ' ' || ppu.last_name as pretty_name,
      NVL(u.screen_name, '&nbsp;') as screen_name,
      pu.email, aru.member_state,
      aru.rel_id
    from
      users u, persons ppu, parties pu, 
      acs_rels ru, membership_rels aru
    where
      u.user_id = ppu.person_id
    and
      u.user_id = pu.party_id
    and
      ru.object_id_one = :id
    and
      ru.object_id_two = u.user_id
    and
      aru.rel_id = ru.rel_id
    and
      (aru.member_state <> 'deleted' or aru.member_state is null)
    order by
      upper(pretty_name)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/users/index-oracle.xql}
dbqd.cms.www.modules.users.index.get_groups_2 {dbqd.cms.www.modules.users.index.get_groups_2 {    select
      g.group_id, g.group_name,
      NVL(pg.email, '&nbsp;') as email, 
      (select count(*) from group_member_map 
       where group_id = g.group_id) as user_count
    from 
      groups g, parties pg
    where
      g.group_id = pg.party_id
    and
      not exists (
        select 1 from acs_rels ar, composition_rels cr
        where ar.rel_id = cr.rel_id
        and ar.object_id_two = g.group_id)
    order by
      g.group_name

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/users/index-oracle.xql}
dbqd.cms.www.modules.users.index.get_users_2 {dbqd.cms.www.modules.users.index.get_users_2 {    select
      u.user_id, ppu.first_names || ' ' || ppu.last_name as pretty_name,
      NVL(u.screen_name, '&nbsp;') as screen_name,
      pu.email, '' as member_state,
      null as rel_id       
    from
      users u, persons ppu, parties pu
    where
      u.user_id = ppu.person_id
    and
      u.user_id = pu.party_id
    and
      not exists (
        select 1 from acs_rels ar, membership_rels mr
        where ar.rel_id = mr.rel_id
        and ar.object_id_two = u.user_id)
    order by
      pretty_name

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/users/index-oracle.xql}
dbqd.cms.www.modules.users.index.check_admin {dbqd.cms.www.modules.users.index.check_admin {  select 
    cms_permission.permission_p (:module_id, :user_id, 'cm_admin')
  from
    dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/users/index-oracle.xql}
dbqd.cms.www.modules.users.index.check_perm {dbqd.cms.www.modules.users.index.check_perm {  select 
    cms_permission.permission_p (:module_id, :user_id, 'cm_perm')
  from
    dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/users/index-oracle.xql}
dbqd.cms.www.modules.users.index.get_info1 {dbqd.cms.www.modules.users.index.get_info1 {    select 
      g.group_id, g.group_name, p.email, p.url,
      NVL((select 'f' from dual where exists (
            select 1 from acs_rels 
              where object_id_one = :id 
              and rel_type in ('composition_rel', 'membership_rel'))),
          't') as is_empty 
    from 
      groups g, parties p
    where
      g.group_id = :id
    and
      p.party_id = :id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/users/index-oracle.xql}
dbqd.cms.www.modules.users.index.get_groups_1 {dbqd.cms.www.modules.users.index.get_groups_1 {    select
      g.group_id, g.group_name,
      NVL(pg.email, '&nbsp;') as email,
      (select count(*) from group_member_map 
       where group_id = g.group_id) as user_count
    from 
      groups g, parties pg, acs_rels rg, composition_rels rc
    where
      g.group_id = pg.party_id
    and
      rg.object_id_one = :id
    and
      rg.object_id_two = g.group_id
    and
      rc.rel_id = rg.rel_id
    order by
      upper(g.group_name)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/users/index-oracle.xql}
dbqd.cms.www.modules.users.index.get_users_1 {dbqd.cms.www.modules.users.index.get_users_1 {    select
      u.user_id, ppu.first_names || ' ' || ppu.last_name as pretty_name,
      NVL(u.screen_name, '&nbsp;') as screen_name,
      pu.email, aru.member_state,
      aru.rel_id
    from
      users u, persons ppu, parties pu, 
      acs_rels ru, membership_rels aru
    where
      u.user_id = ppu.person_id
    and
      u.user_id = pu.party_id
    and
      ru.object_id_one = :id
    and
      ru.object_id_two = u.user_id
    and
      aru.rel_id = ru.rel_id
    and
      (aru.member_state <> 'deleted' or aru.member_state is null)
    order by
      upper(pretty_name)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/users/index-oracle.xql}
dbqd.cms.www.modules.users.index.get_groups_2 {dbqd.cms.www.modules.users.index.get_groups_2 {    select
      g.group_id, g.group_name,
      NVL(pg.email, '&nbsp;') as email, 
      (select count(*) from group_member_map 
       where group_id = g.group_id) as user_count
    from 
      groups g, parties pg
    where
      g.group_id = pg.party_id
    and
      not exists (
        select 1 from acs_rels ar, composition_rels cr
        where ar.rel_id = cr.rel_id
        and ar.object_id_two = g.group_id)
    order by
      g.group_name

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/users/index-oracle.xql}
dbqd.cms.www.modules.users.index.get_users_2 {dbqd.cms.www.modules.users.index.get_users_2 {    select
      u.user_id, ppu.first_names || ' ' || ppu.last_name as pretty_name,
      NVL(u.screen_name, '&nbsp;') as screen_name,
      pu.email, '' as member_state,
      null as rel_id       
    from
      users u, persons ppu, parties pu
    where
      u.user_id = ppu.person_id
    and
      u.user_id = pu.party_id
    and
      not exists (
        select 1 from acs_rels ar, membership_rels mr
        where ar.rel_id = mr.rel_id
        and ar.object_id_two = u.user_id)
    order by
      pretty_name

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/users/index-oracle.xql}
dbqd.cms.www.modules.users.index.get_info2 {dbqd.cms.www.modules.users.index.get_info2 {    select
      party_id as group_id, 'All Users' as group_name, 
      email, url, 'f' as is_empty
    from
      parties
    where
      party_id = -1
  
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/users/index.xql}
dbqd.cms.www.modules.users.make-admin.grant_permission {dbqd.cms.www.modules.users.make-admin.grant_permission {  declare
    cursor c_module_cur is
      select module_id from cm_modules;
    v_module_id cm_modules.module_id%TYPE;
  begin
    open c_module_cur;
    loop
      fetch c_module_cur into v_module_id;
      exit when c_module_cur%NOTFOUND;
      cms_permission.grant_permission (
        v_module_id, :user_id, 'cm_admin', :target_user_id, 't'
      );
    end loop;
    close c_module_cur;

    cms_permission.grant_permission (
      content_item.get_root_folder, :user_id, 'cm_admin', :target_user_id, 't'
    );

    cms_permission.grant_permission (
      content_template.get_root_folder, :user_id, 'cm_admin', :target_user_id, 't'
    );
  end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/users/make-admin-oracle.xql}
dbqd.cms.www.modules.users.one-user.get_info {dbqd.cms.www.modules.users.one-user.get_info {  select
    p.first_names, p.last_name, 
    pp.email, pp.url, 
    u.screen_name,
    to_char(u.last_visit, 'YYYY/MM/DD HH24:MI') as last_visit,
    to_char(u.no_alerts_until, 'YYYY/MM/DD') as no_alerts_until
  from
    persons p, parties pp, users u
  where
    p.person_id = :id
  and
    pp.party_id = :id
  and
    u.user_id = :id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/users/one-user-oracle.xql}
dbqd.cms.www.modules.users.one-user.get_groups {dbqd.cms.www.modules.users.one-user.get_groups {  select 
    g.group_name, g.group_id
  from
    groups g, group_member_map m
  where
    m.group_id = g.group_id
  and
    m.member_id = :id

      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/users/one-user.xql}
dbqd.cms.www.modules.users.user-assoc.user_assoc_root {dbqd.cms.www.modules.users.user-assoc.user_assoc_root {        declare
          v_id membership_rels.rel_id%TYPE;
          cursor c_rel_cur is
            select 
              m.rel_id
            from 
              acs_rels r, membership_rels m
            where 
              r.object_id_two=$item_id
            and 
              m.rel_id = r.rel_id;
        begin 
          open c_rel_cur;
          loop
            fetch c_rel_cur into v_id;
            exit when c_rel_cur%NOTFOUND;
            membership_rel.delete(v_id);
          end loop;
        end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/users/user-assoc-oracle.xql}
dbqd.cms.www.modules.users.user-assoc.user_assoc_root2 {dbqd.cms.www.modules.users.user-assoc.user_assoc_root2 {        declare
          v_group_id groups.group_id%TYPE;
          v_user_id users.user_id%TYPE;
        begin 
          select g.group_id, u.user_id into v_group_id, v_user_id
            from groups g, users u
            where g.group_id = :id and u.user_id = :item_id;

          :1 := membership_rel.new(
          object_id_one => :id, object_id_two => :item_id,
          creation_user => :user_id, creation_ip => :ip); 

          exception when no_data_found then null;
        end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/users/user-assoc-oracle.xql}
dbqd.cms.www.modules.users.user-search.get_who {dbqd.cms.www.modules.users.user-search.get_who {      select acs_object.name(:group_id) from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/users/user-search-oracle.xql}
dbqd.cms.www.modules.users.user-search.get_results {dbqd.cms.www.modules.users.user-search.get_results {    select 
      distinct u.user_id, u.screen_name,
      p.first_names || ' ' || p.last_name as name,
      pp.email
    from
      users u, persons p, parties pp $extra_table
    where 
      ($clauses)
    and
      p.person_id = u.user_id
    and
      pp.party_id = u.user_id
      $where_clause

      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/users/user-search.xql}
dbqd.cms.www.modules.workflow.case-create.new_case {dbqd.cms.www.modules.workflow.case-create.new_case {      begin :1 := workflow_case.new(
	    workflow_key  => 'publishing_wf', 
	    context_key   => NULL,
	    object_id     => :item_id,
	    creation_user => :user_id, 
	    creation_ip   => :creation_ip,
	    case_id       => :case_id
        ); 
        end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/workflow/case-create-oracle.xql}
dbqd.cms.www.modules.workflow.case-create.add_assignment {dbqd.cms.www.modules.workflow.case-create.add_assignment {		  begin
		  workflow_case.add_manual_assignment(
		      case_id        => :case_id,
		      role_key 	     => :transition,
		      party_id       => :value
		  );
		  end;
		
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/workflow/case-create-oracle.xql}
dbqd.cms.www.modules.workflow.case-create.add_new_assignment {dbqd.cms.www.modules.workflow.case-create.add_new_assignment {		      begin
	    	      workflow_case.add_manual_assignment(
		          case_id         => :case_id,
	                  role_key        => :transition,
	                  party_id        => :new_value
		      );
		      end;
		    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/workflow/case-create-oracle.xql}
dbqd.cms.www.modules.workflow.case-create.start_case {dbqd.cms.www.modules.workflow.case-create.start_case {      begin
      workflow_case.start_case(
          case_id       => :case_id,
          creation_user => :user_id,
          creation_ip   => :creation_ip,
          msg           => :msg
      );
      end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/workflow/case-create-oracle.xql}
dbqd.cms.www.modules.workflow.case-create.get_users {dbqd.cms.www.modules.workflow.case-create.get_users {  select 
    person.name(user_id) name, user_id 
  from 
    users 
  where 
    user_id > 0 
  order by 
    name

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/workflow/case-create-oracle.xql}
dbqd.cms.www.modules.workflow.case-create.get_case_id {dbqd.cms.www.modules.workflow.case-create.get_case_id {          select acs_object_id_seq.nextval from dual
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/workflow/case-create-oracle.xql}
dbqd.cms.www.modules.workflow.case-create.insert_deadlines {dbqd.cms.www.modules.workflow.case-create.insert_deadlines {	      insert into wf_case_deadlines (
	        case_id, workflow_key, transition_key, deadline
	      ) values (
	        :case_id, 'publishing_wf', :transition, $dead_sql
	      )
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/workflow/case-create.xql}
dbqd.cms.www.modules.workflow.case-create.update_deadlines {dbqd.cms.www.modules.workflow.case-create.update_deadlines {	      update 
	        wf_case_deadlines 
	      set
	        deadline = $new_dead_sql
	      where
	        workflow_key = 'publishing_wf' 
	      and 
	        transition_key = :transition
	      and 
	        case_id = :case_id
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/workflow/case-create.xql}
dbqd.cms.www.modules.workflow.case-status.get_transinfo {dbqd.cms.www.modules.workflow.case-status.get_transinfo {      select k.transition_key, k.task_id, t.transition_name,
             k.holding_user, 
             content_workflow.get_holding_user_name(k.task_id) hold_name
             from wf_tasks k, wf_transitions t
	     where k.case_id = :case_id 
             and k.state in ('enabled', 'started')
             and k.transition_key = t.transition_key
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/workflow/case-status-oracle.xql}
dbqd.cms.www.modules.workflow.case-status.get_deadline {dbqd.cms.www.modules.workflow.case-status.get_deadline {      select to_char(deadline, 'DD MON') deadline 
		 from wf_case_deadlines 
		 where case_id = :case_id 
                 and transition_key = :transition_key
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/workflow/case-status-oracle.xql}
dbqd.cms.www.modules.workflow.case-status.get_caseinfo {dbqd.cms.www.modules.workflow.case-status.get_caseinfo {      select case_id, initcap(state) as state
           from wf_cases where object_id = :item_id
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/workflow/case-status.xql}
dbqd.cms.www.modules.workflow.case-status.get_status {dbqd.cms.www.modules.workflow.case-status.get_status {      select case when count(*) = 0 then 'no' else 'yes' end
               from wf_case_assignments ca,
		    wf_transitions trans
               where case_id = :case_id 
	       and ca.role_key = trans.role_key
               and trans.transition_key = :transition_key 
               and party_id = :user_id
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/workflow/case-status.xql}
dbqd.cms.www.modules.workflow.index.get_stats {dbqd.cms.www.modules.workflow.index.get_stats {  select
    count( decode(content_workflow.is_finished(c.case_id, transition_key),
             'f',1,null)
    ) as total_count,
    count( decode(content_workflow.is_overdue(c.case_id, transition_key),
             't',1,null)
    ) as overdue_count,
    count( decode(content_workflow.is_active(c.case_id, transition_key),
             't',1,null)
    ) as active_count,
    count( decode(content_workflow.is_checked_out(c.case_id, transition_key),
             't',1,null)
    ) as checkout_count
  from
    wf_cases c, wf_transitions trans
  where
    c.workflow_key = trans.workflow_key
  and
    c.workflow_key = 'publishing_wf'
  and
    c.state = 'active'

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/workflow/index-oracle.xql}
dbqd.cms.www.modules.workflow.index.get_transitions {dbqd.cms.www.modules.workflow.index.get_transitions {  select 
    trans.transition_key, transition_name, sort_order,
    count(transition_name) as transition_count,
    count(decode (
            content_workflow.is_overdue(c.case_id, trans.transition_key),
            't',1,null)
         ) as overdue_count,
    count(decode (
            content_workflow.is_active(c.case_id, trans.transition_key),
            't',1,null)
         ) as active_count,
    count( decode(
             content_workflow.is_checked_out(c.case_id, trans.transition_key),
             't',1,null)
         ) as checkout_count
  from
    wf_cases c, wf_transitions trans
  where
    trans.workflow_key = c.workflow_key
  and
    trans.workflow_key = 'publishing_wf'
  and
    c.state in ('active')
  and
    -- don't include tasks that have been finished or canceled
    content_workflow.is_finished(c.case_id, trans.transition_key) = 'f'
  group by
    sort_order, transition_name, trans.transition_key

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/workflow/index-oracle.xql}
dbqd.cms.www.modules.workflow.index.get_user_tasks {dbqd.cms.www.modules.workflow.index.get_user_tasks {  select
    p.person_id, p.first_names, p.last_name,
    count(transition_name) as transition_count,
    count(decode (
            content_workflow.is_overdue(c.case_id, t.transition_key),
            't',1,null)
         ) as overdue_count,
    count(decode (
            content_workflow.is_active(c.case_id, t.transition_key),
            't',1,null)
         ) as active_count,
    count( decode(
             content_workflow.is_checked_out(c.case_id, t.transition_key, ca.party_id),
             't',1,null)
         ) as checkout_count
  from
    wf_cases c, wf_case_assignments ca, 
    wf_transitions t, persons p
  where
    t.workflow_key = 'publishing_wf'
  and
    t.workflow_key = c.workflow_key
  and
    c.state = 'active'
  and
    c.case_id = ca.case_id
  and
    ca.role_key = t.role_key
  and
    p.person_id = ca.party_id
  and
    -- don't include tasks that have been finished or canceled
    content_workflow.is_finished(c.case_id, t.transition_key) = 'f'
  group by
    first_names, last_name, person_id 

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/workflow/index-oracle.xql}
dbqd.cms.www.modules.workflow.overdue-items.get_overdue_tasks {dbqd.cms.www.modules.workflow.overdue-items.get_overdue_tasks {  select
    trans.transition_key, transition_name, ca.party_id, 
    item_id, content_item.get_title(item_id) as title,
    nvl(party.name(ca.party_id),person.name(ca.party_id)) as assigned_party,
    to_char(dead.deadline,'Mon. DD, YYYY') as deadline_pretty,
    content_workflow.get_status(c.case_id, trans.transition_key) as status
  from 
    wf_transitions trans, wf_cases c, wf_case_deadlines dead, 
    wf_case_assignments ca, cr_items i
  where 
    c.case_id = dead.case_id
  and
    c.case_id = ca.case_id
  and
    ca.role_key = trans.role_key
  and
    dead.transition_key = trans.transition_key
  and
    c.workflow_key = 'publishing_wf'
  and
    c.workflow_key = trans.workflow_key
  and
    c.state = 'active'
  and 
    c.object_id = i.item_id
  and
    content_workflow.is_overdue(c.case_id, trans.transition_key) = 't'
  $transition_sql
  order by
    transition_name, dead.deadline desc, title, assigned_party

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/workflow/overdue-items-oracle.xql}
dbqd.cms.www.modules.workflow.overdue-items.get_transitoin_name {dbqd.cms.www.modules.workflow.overdue-items.get_transitoin_name {      select transition_name
        from wf_transitions
        where transition_key = :transition
        and workflow_key = 'publishing_wf'

      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/workflow/overdue-items.xql}
dbqd.cms.www.modules.workflow.task-checkin.workflow_checkin {dbqd.cms.www.modules.workflow.task-checkin.workflow_checkin {      begin
      content_workflow.checkin(
          task_id      => :task_id,             
          user_id      => :user_id,
          ip_address   => :ip_address,
          msg          => :msg
      );
      end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/workflow/task-checkin-oracle.xql}
dbqd.cms.www.modules.workflow.task-checkin.check_valid {dbqd.cms.www.modules.workflow.task-checkin.check_valid {  select content_workflow.can_approve( :task_id, :user_id ) from dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/workflow/task-checkin-oracle.xql}
dbqd.cms.www.modules.workflow.task-checkin.get_task_info {dbqd.cms.www.modules.workflow.task-checkin.get_task_info {  select
    c.object_id, tr.transition_name,
    content_item.get_title(c.object_id) title,
    tk.holding_user as holding_user, 
    to_char(tk.hold_timeout,'Mon. DD, YYYY') hold_timeout,
    content_workflow.get_holding_user_name(tk.task_id) holding_user_name
  from
    wf_tasks tk, wf_transitions tr, wf_cases c
  where
    tk.task_id = :task_id
  and
    tk.transition_key = tr.transition_key
  and
    tk.case_id = c.case_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/workflow/task-checkin-oracle.xql}
dbqd.cms.www.modules.workflow.task-checkin.get_task_status {dbqd.cms.www.modules.workflow.task-checkin.get_task_status {      select content_workflow.can_approve( :task_id, :user_id ) from dual
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/workflow/task-checkin-oracle.xql}
dbqd.cms.www.modules.workflow.task-checkin.abort {dbqd.cms.www.modules.workflow.task-checkin.abort {      abort transaction
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/workflow/task-checkin.xql}
dbqd.cms.www.modules.workflow.task-finish.workflow_approve {dbqd.cms.www.modules.workflow.task-finish.workflow_approve {           begin
               content_workflow.approve(
                       task_id    => :task_id,
                       user_id    => :user_id,
                       ip_address => :ip_address,
                       msg        => :msg
                 );
            end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/workflow/task-finish-oracle.xql}
dbqd.cms.www.modules.workflow.task-finish.get_status {dbqd.cms.www.modules.workflow.task-finish.get_status {  select content_workflow.can_approve( :task_id, :user_id ) from dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/workflow/task-finish-oracle.xql}
dbqd.cms.www.modules.workflow.task-finish.get_task_info {dbqd.cms.www.modules.workflow.task-finish.get_task_info {  select
    c.object_id, content_item.get_title(c.object_id) title, 
    tr.transition_name
  from
    wf_tasks tk, wf_cases c,
    wf_transitions tr
  where
    tk.task_id = :task_id
  and
    tk.transition_key = tr.transition_key
  and
    tk.workflow_key = tr.workflow_key
  and
    tk.workflow_key = 'publishing_wf'
  and
    c.case_id = tk.case_id
  and
    content_workflow.can_approve( tk.task_id, :user_id ) = 't'

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/workflow/task-finish-oracle.xql}
dbqd.cms.www.modules.workflow.task-finish.get_status {dbqd.cms.www.modules.workflow.task-finish.get_status {             select content_workflow.can_approve( :task_id, :user_id ) from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/workflow/task-finish-oracle.xql}
dbqd.cms.www.modules.workflow.task-finish.abort {dbqd.cms.www.modules.workflow.task-finish.abort {      abort transaction
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/workflow/task-finish.xql}
dbqd.cms.www.modules.workflow.task-reject.workflow_reject {dbqd.cms.www.modules.workflow.task-reject.workflow_reject {                      begin
                        content_workflow.reject(
                             task_id        => :task_id,
                             user_id        => :user_id,
                             ip_address     => :ip_address,
                             transition_key => :transition_key,
                             msg            => :msg
                         );
                       end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/workflow/task-reject-oracle.xql}
dbqd.cms.www.modules.workflow.task-reject.get_status {dbqd.cms.www.modules.workflow.task-reject.get_status {  select content_workflow.can_reject( :task_id, :user_id ) from dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/workflow/task-reject-oracle.xql}
dbqd.cms.www.modules.workflow.task-reject.get_task_info {dbqd.cms.www.modules.workflow.task-reject.get_task_info {  select
    c.object_id, content_item.get_title(c.object_id) title, 
    tr.transition_name
  from
    wf_tasks tk, wf_cases c,
    wf_transitions tr
  where
    tk.task_id = :task_id
  and
    tk.transition_key = tr.transition_key
  and
    tk.workflow_key = tr.workflow_key
  and
    tk.workflow_key = 'publishing_wf'
  and
    tk.case_id = c.case_id
  and
    content_workflow.can_reject( tk.task_id, :user_id ) = 't'

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/workflow/task-reject-oracle.xql}
dbqd.cms.www.modules.workflow.task-reject.get_rejects {dbqd.cms.www.modules.workflow.task-reject.get_rejects {  select
    trans.transition_name, trans.transition_key
  from
    wf_places src, wf_places dest, wf_tasks t, wf_transitions trans
  where
    src.workflow_key = dest.workflow_key
  and
    src.workflow_key = 'publishing_wf'
  and
    src.workflow_key = trans.workflow_key
  and
    src.place_key = content_workflow.get_this_place( t.transition_key )
  and
    -- for the publishing_wf, past transitions have a lower sort order
    dest.sort_order < src.sort_order
  and
    -- get the transition associated with that place
    content_workflow.get_this_place( trans.transition_key ) = dest.place_key
  and
    t.task_id = :task_id
  order by
    dest.sort_order desc

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/workflow/task-reject-oracle.xql}
dbqd.cms.www.modules.workflow.task-reject.abort {dbqd.cms.www.modules.workflow.task-reject.abort {      abort transaction
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/workflow/task-reject.xql}
dbqd.cms.www.modules.workflow.task-start.workflow_checkout {dbqd.cms.www.modules.workflow.task-start.workflow_checkout {      begin
      content_workflow.checkout(
          task_id      => :task_id,             
          hold_timeout => $hold_timeout_sql,
          user_id      => :user_id,
          ip_address   => :ip_address,
          msg          => :msg
      );
      end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/workflow/task-start-oracle.xql}
dbqd.cms.www.modules.workflow.task-start.get_status {dbqd.cms.www.modules.workflow.task-start.get_status {  select content_workflow.can_start( :task_id, :user_id ) from dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/workflow/task-start-oracle.xql}
dbqd.cms.www.modules.workflow.task-start.get_task_info {dbqd.cms.www.modules.workflow.task-start.get_task_info {  select
    c.object_id, tr.transition_name,
    content_item.get_title(c.object_id) title,
    tk.holding_user as holding_user, 
    to_char(tk.hold_timeout,'Mon. DD, YYYY') hold_timeout,
    content_workflow.get_holding_user_name(tk.task_id) holding_user_name
  from
    wf_tasks tk,
    wf_transitions tr,
    wf_cases c
  where
    tk.task_id = :task_id
  and
    tk.transition_key = tr.transition_key
  and
    tk.case_id = c.case_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/workflow/task-start-oracle.xql}
dbqd.cms.www.modules.workflow.task-start.get_status {dbqd.cms.www.modules.workflow.task-start.get_status {      select content_workflow.can_start( :task_id, :user_id ) from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/workflow/task-start-oracle.xql}
dbqd.cms.www.modules.workflow.task-start.abort {dbqd.cms.www.modules.workflow.task-start.abort {      abort transaction
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/workflow/task-start.xql}
dbqd.cms.www.modules.workflow.user-tasks.get_party_name {dbqd.cms.www.modules.workflow.user-tasks.get_party_name {  select nvl(party.name(:party_id),person.name(:party_id)) from dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/workflow/user-tasks-oracle.xql}
dbqd.cms.www.modules.workflow.user-tasks.get_active {dbqd.cms.www.modules.workflow.user-tasks.get_active {  select
    trans.transition_key, transition_name, 
    item_id, content_item.get_title(item_id) as title,
    t.state,
    to_char(deadline,'Mon. DD, YYYY') as deadline_pretty,
    to_char(enabled_date,$date_format) as enabled_date_pretty,
    to_char(started_date,$date_format) as started_date_pretty,
    to_char(hold_timeout,'Mon. DD, YYYY') as hold_timeout_pretty,
    holding_user, person.name(holding_user) as holding_user_name,
    content_workflow.is_overdue(c.case_id, trans.transition_key) as is_overdue
  from
    wf_transitions trans, wf_tasks t, cr_items i,
    wf_cases c, wf_case_assignments ca
  where
    c.workflow_key = 'publishing_wf'
  and
    c.workflow_key = trans.workflow_key
  and
    c.case_id = ca.case_id
  and
    c.case_id = t.case_id
  and
    c.object_id = i.item_id
  and
    t.transition_key = trans.transition_key
  and
    ca.role_key = trans.role_key
  and
    c.state = 'active'
  and
    t.state in ('enabled','started')
  and
    ca.party_id = :party_id
  order by
    trans.sort_order, title
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/workflow/user-tasks-oracle.xql}
dbqd.cms.www.modules.workflow.user-tasks.get_waiting {dbqd.cms.www.modules.workflow.user-tasks.get_waiting {  select
    trans.transition_key, transition_name, 
    item_id, content_item.get_title(item_id) as title,
    to_char(deadline,'Mon. DD, YYYY') as deadline_pretty,
    content_workflow.is_overdue(c.case_id, trans.transition_key) as is_overdue
  from
    wf_case_assignments ca, wf_case_deadlines dead, wf_cases c,
    cr_items i, wf_transitions trans
  where
    c.workflow_key = 'publishing_wf'
  and
    c.workflow_key = trans.workflow_key
  and
    c.case_id = ca.case_id
  and
    c.case_id = dead.case_id
  and
    ca.role_key = trans.role_key
  and
    dead.transition_key = trans.transition_key
  and
    c.object_id = i.item_id
  and
    c.state = 'active'
  and
    content_workflow.is_finished(c.case_id, trans.transition_key) = 'f'
  and
    not exists ( select 1
                 from
                   wf_tasks
                 where
                   case_id = c.case_id
                 and
                   transition_key = trans.transition_key
                 and
                   state in ('enabled','started') )
  and
    ca.party_id = :party_id
  order by
    trans.sort_order, title
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/workflow/user-tasks-oracle.xql}
dbqd.cms.www.modules.workflow.workflow.get_active {dbqd.cms.www.modules.workflow.workflow.get_active {  select
    t.transition_key, transition_name, 
    item_id, content_item.get_title(item_id) as title,
    t.state, ca.party_id,
    nvl(party.name(ca.party_id),person.name(ca.party_id)) as assigned_party,
    holding_user,
    person.name(holding_user) as holding_user_name,
    to_char(hold_timeout,'Mon. DD, YYYY') as hold_timeout_pretty,
    to_char(deadline,'Mon., DD, YYYY') as deadline_pretty,
    to_char(enabled_date,$date_format) as enabled_date_pretty, 
    to_char(started_date,$date_format) as started_date_pretty,
    content_workflow.is_overdue(c.case_id, t.transition_key) as is_overdue
  from
    wf_tasks t, wf_transitions trans, cr_items i,
    wf_cases c, wf_case_assignments ca
  where
    c.workflow_key = 'publishing_wf'
  and
    c.workflow_key = trans.workflow_key
  and
    c.case_id = t.case_id
  and
    c.case_id = ca.case_id
  and
    c.state = 'active'
  and
    -- the workflow item is a content item
    c.object_id = i.item_id
  and
    t.transition_key = trans.transition_key
  and
    ca.role_key = trans.role_key
  and
    t.state in ('started','enabled')
  $transition_sql
  order by
    trans.sort_order, title, assigned_party, deadline desc, state

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/workflow/workflow-oracle.xql}
dbqd.cms.www.modules.workflow.workflow.get_waiting {dbqd.cms.www.modules.workflow.workflow.get_waiting {  select
    trans.transition_key, transition_name, ca.party_id,
    item_id, content_item.get_title(item_id) as title,
    nvl(party.name(ca.party_id),person.name(ca.party_id)) as assigned_party,
    to_char(dead.deadline,'Mon.DD, YYYY') as deadline_pretty,
    content_workflow.is_overdue(c.case_id, trans.transition_key) as is_overdue
  from
    wf_cases c, wf_case_assignments ca, wf_case_deadlines dead,
    wf_transitions trans, cr_items i
  where
    c.workflow_key = 'publishing_wf'
  and
    c.workflow_key = trans.workflow_key
  and
    c.object_id = i.item_id
  and
    c.case_id = ca.case_id
  and
    c.case_id = dead.case_id
  and
    ca.role_key = trans.role_key
  and
    dead.transition_key = trans.transition_key
  and
    c.state = 'active'
  and
    -- non active task
    not exists ( select 1
                 from 
                   wf_tasks
                 where
                   state in ('enabled','started')
                 and
                   case_id = c.case_id
                 and
                   transition_key = trans.transition_key )
  and
    -- its finished
    content_workflow.is_finished(c.case_id, trans.transition_key) = 'f'
  -- trans.transition_key = transition 
  $transition_sql
  order by
    trans.sort_order, title, assigned_party, dead.deadline desc
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/workflow/workflow-oracle.xql}
dbqd.cms.www.modules.workflow.workflow.get_name {dbqd.cms.www.modules.workflow.workflow.get_name {      select 
        transition_name 
      from 
        wf_transitions
      where 
        transition_key = :transition
      and 
        workflow_key = 'publishing_wf'
    
      } {} {} {} F:/temp/openacs-4/packages/cms/www/modules/workflow/workflow.xql}
dbqd.cms.www.modules.workspace.assignments.get_locked_tasks {dbqd.cms.www.modules.workspace.assignments.get_locked_tasks {  select
    types.pretty_name, 
    obj.object_id item_id, 
    content_item.get_title(obj.object_id) title,
    task.task_id,
    content_workflow.get_holding_user_name(task.task_id) holding_user_name,
    to_char(task.hold_timeout,'Mon. DD, YYYY') hold_timeout,
    assign.case_id, 
    trans.transition_name, trans.transition_key,
    to_char(dead.deadline,'Mon. DD, YYYY') deadline
  from
    acs_object_types types,
    acs_objects obj,
    wf_case_assignments assign,
    wf_transitions trans, 
    wf_tasks task,
    wf_cases case,
    wf_case_deadlines dead,
    wf_transition_role_assign_map trans_role
  where 
    dead.case_id = case.case_id
  and
    dead.transition_key = task.transition_key
  and
    assign.party_id = :user_id
  and
    assign.case_id = task.case_id
  and
    assign.role_key = trans_role.assign_role_key
  and
    task.transition_key = trans_role.transition_key
  and 
    task.state = 'started'
  and
    task.transition_key = trans.transition_key
  and
    assign.case_id = case.case_id
  and
    case.object_id = obj.object_id
  and
    types.object_type = content_item.get_content_type(obj.object_id)
  and
    task.holding_user ^= :user_id
  order by
    dead.deadline

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/workspace/assignments-oracle.xql}
dbqd.cms.www.modules.workspace.index.get_workspace_items {dbqd.cms.www.modules.workspace.index.get_workspace_items {  select
    types.pretty_name, 
    obj.object_id item_id, 
    content_item.get_title(obj.object_id) title,
    task.task_id,
    task.holding_user,
    task.state,
    assign.case_id, 
    trans.transition_name, trans.transition_key,
    to_char(dead.deadline,'Mon. DD, YYYY') deadline,
    content_workflow.can_reject(task.task_id, :user_id) can_reject,
    content_workflow.approve_string(task.task_id, :user_id) approve_string
  from
    acs_object_types types,
    acs_objects obj,
    wf_case_assignments assign,
    wf_transitions trans, 
    wf_tasks task,
    wf_cases case,
    wf_case_deadlines dead
  where 
    dead.case_id = case.case_id
  and
    dead.transition_key = task.transition_key
  and
    assign.party_id = :user_id
  and
    assign.case_id = task.case_id
  and
    assign.role_key = trans.role_key
  and
    task.transition_key = trans.transition_key
  and (
    task.state = 'enabled'
    or (task.state = 'started' and task.holding_user = :user_id)
  ) and
    task.transition_key = trans.transition_key
  and
    assign.case_id = case.case_id
  and
    case.object_id = obj.object_id
  and
    types.object_type = content_item.get_content_type(obj.object_id)
  order by
    dead.deadline

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/modules/workspace/index-oracle.xql}
dbqd.cms.www.register.grant_permissions {dbqd.cms.www.register.grant_permissions {	declare
	  cursor c_item_cur is
	    select item_id from cr_items
	    connect by parent_id = prior item_id
	    start with parent_id = 0;
	
          cursor c_module_cur is
	    select module_id from cm_modules;

	begin
  
	  for item_row in c_item_cur loop 
	    acs_permission.grant_permission (
	        object_id  => item_row.item_id, 
	        grantee_id => :user_id, 
	        privilege  => 'cm_admin'
	    );
	  end loop;

	  for v_module in c_module_cur loop
	    acs_permission.grant_permission (
	        object_id  => v_module.module_id,
	        grantee_id => :user_id,
	        privilege  => 'cm_admin'
            );
	  end loop;

	end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/register-oracle.xql}
dbqd.cms.www.register.get_user_id {dbqd.cms.www.register.get_user_id {      select acs_object_id_seq.nextval from dual
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cms/www/register-oracle.xql}
dbqd.cms.www.register.update_users {dbqd.cms.www.register.update_users {      update users
        set screen_name = :screen_name
        where user_id = :user_id
      } {} {} {} F:/temp/openacs-4/packages/cms/www/register.xql}
dbqd.cronjob.www.admin.cronjob-add.add_cronjob {dbqd.cronjob.www.admin.cronjob-add.add_cronjob {   declare
	 v_cronjob_id integer;
	 begin
    v_cronjob_id := cronjob.new(
      user_id => :user_id,
      description => :description,
      approved_p => :approved_p,
      disabled_p => :disabled_p,
      minute => :minute,
      hr => :hr,
      mon => :mon,
      day => :day,
      dayofweek => :dayofweek,
      run_sql => :run_sql,
      run_tcl => :run_tcl,
      email => :email
			);
	 end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cronjob/www/admin/cronjob-add-oracle.xql}
dbqd.cronjob.www.admin.cronjob-delete.edit_cronjob {dbqd.cronjob.www.admin.cronjob-delete.edit_cronjob {	 begin
    cronjob.delete(
      cronjob_id => :cronjob_id
			);
	 end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cronjob/www/admin/cronjob-delete-oracle.xql}
dbqd.cronjob.www.admin.cronjob-edit.edit_cronjob {dbqd.cronjob.www.admin.cronjob-edit.edit_cronjob {	 begin
    cronjob.set_attrs(
      cronjob_id => :cronjob_id,
      description => :description,
      approved_p => :approved_p,
      disabled_p => :disabled_p,
      minute => :minute,
      hr => :hr,
      mon => :mon,
      day => :day,
      dayofweek => :dayofweek,
      run_sql => :run_sql,
      run_tcl => :run_tcl,
      email => :email
			);
	 end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/cronjob/www/admin/cronjob-edit-oracle.xql}
dbqd.cronjob.www.admin.cronjob.cronjob_query {dbqd.cronjob.www.admin.cronjob.cronjob_query {select
 *
from
 cronjobs
where
 cronjob_id = :cronjob_id
      } {} {} {} F:/temp/openacs-4/packages/cronjob/www/admin/cronjob.xql}
dbqd.cronjob.www.admin.cronjobs.cronjobs_query {dbqd.cronjob.www.admin.cronjobs.cronjobs_query {select
 *
from
 cronjobs
order by
 user_id
      } {} {} {} F:/temp/openacs-4/packages/cronjob/www/admin/cronjobs.xql}
dbqd.directory.tcl.directory-procs.dir_app_group_info.subsite_p_1 {dbqd.directory.tcl.directory-procs.dir_app_group_info.subsite_p_1 {        select * from (
          select object_id as subsite_id
            from site_nodes n
           where (select package_key from apm_packages p where p.package_id = n.object_id) = 'acs-subsite' 
         connect by node_id = prior parent_id 
           start with node_id = :node_id 
           order by level
        ) where rownum = 1
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/directory/tcl/directory-procs-oracle.xql}
dbqd.directory.tcl.directory-procs.dir_app_group_info.subsite_p_2 {dbqd.directory.tcl.directory-procs.dir_app_group_info.subsite_p_2 {          select object_id as subsite_id, acs_object.name(object_id) as subsite_name
            from site_nodes n
           where (select package_key from apm_packages p where p.package_id = n.object_id) = 'acs-subsite' 
         connect by node_id = prior parent_id 
           start with node_id = :node_id 
           order by level
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/directory/tcl/directory-procs-oracle.xql}
dbqd.directory.tcl.directory-procs.dir_alpha_nav_bar.initial_list {dbqd.directory.tcl.directory-procs.dir_alpha_nav_bar.initial_list {	select distinct upper(substr(last_name,1,1)) 
          from $table_and_group
      } {} {} {} F:/temp/openacs-4/packages/directory/tcl/directory-procs.xql}
dbqd.directory.tcl.directory-procs.dir_app_group_info.n_id {dbqd.directory.tcl.directory-procs.dir_app_group_info.n_id {        select node_id from site_nodes
        where object_id = :package_id
    
      } {} {} {} F:/temp/openacs-4/packages/directory/tcl/directory-procs.xql}
dbqd.directory.tcl.directory-procs.dir_app_group_info.g_i {dbqd.directory.tcl.directory-procs.dir_app_group_info.g_i {      select g.group_id, g.group_name
        from groups g, application_groups a
       where a.package_id = :subsite_id
         and a.group_id = g.group_id
    
      } {} {} {} F:/temp/openacs-4/packages/directory/tcl/directory-procs.xql}
dbqd.directory.tcl.directory-procs.dir_subsite_info.n_id {dbqd.directory.tcl.directory-procs.dir_subsite_info.n_id {        select node_id from site_nodes
        where object_id = :package_id
    
      } {} {} {} F:/temp/openacs-4/packages/directory/tcl/directory-procs.xql}
dbqd.directory.tcl.directory-procs.dir_alpha_nav_bar.table_and_group_1 {dbqd.directory.tcl.directory-procs.dir_alpha_nav_bar.table_and_group_1 {          dir_all_users m where 1=1
      } {} {} {} F:/temp/openacs-4/packages/directory/tcl/directory-procs.xql}
dbqd.directory.tcl.directory-procs.dir_alpha_nav_bar.table_and_group_2 {dbqd.directory.tcl.directory-procs.dir_alpha_nav_bar.table_and_group_2 {          dir_group_members m where group_id = :group_id
      } {} {} {} F:/temp/openacs-4/packages/directory/tcl/directory-procs.xql}
dbqd.directory.www.index.get_all_n_users {dbqd.directory.www.index.get_all_n_users {         select * from (
           select first_names, last_name, email, user_id, rownum as my_rownum from (
              select m.* from $table_and_group
              $where_clause
              $order_clause
           )
         ) where my_rownum between :start_row and [expr $start_row + $num_rows - 1]
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/directory/www/index-oracle.xql}
dbqd.directory.www.index.total_users_1 {dbqd.directory.www.index.total_users_1 {         select count(1)
         from $table_and_group
      } {} {} {} F:/temp/openacs-4/packages/directory/www/index.xql}
dbqd.directory.www.index.total_users_2 {dbqd.directory.www.index.total_users_2 {         select count(1)
         from $table_and_group
         $where_clause
      } {} {} {} F:/temp/openacs-4/packages/directory/www/index.xql}
dbqd.directory.www.index.table_and_group_1 {dbqd.directory.www.index.table_and_group_1 {          dir_all_users m where 1=1
      } {} {} {} F:/temp/openacs-4/packages/directory/www/index.xql}
dbqd.directory.www.index.table_and_group_2 {dbqd.directory.www.index.table_and_group_2 {          dir_group_members m where group_id = :group_id
      } {} {} {} F:/temp/openacs-4/packages/directory/www/index.xql}
dbqd.directory.www.index.order_by_name {dbqd.directory.www.index.order_by_name {        order by lower(last_name)
      } {} {} {} F:/temp/openacs-4/packages/directory/www/index.xql}
dbqd.directory.www.index.order_by_email {dbqd.directory.www.index.order_by_email {        order by email
      } {} {} {} F:/temp/openacs-4/packages/directory/www/index.xql}
dbqd.directory.www.index.order_by_name- {dbqd.directory.www.index.order_by_name- {        order by lower(last_name) desc
      } {} {} {} F:/temp/openacs-4/packages/directory/www/index.xql}
dbqd.directory.www.index.order_by_email- {dbqd.directory.www.index.order_by_email- {        order by email desc
      } {} {} {} F:/temp/openacs-4/packages/directory/www/index.xql}
dbqd.directory.www.index.where_1 {dbqd.directory.www.index.where_1 {         and (lower(first_names) like '%' || lower(:search) || '%'
              or lower(last_name) like '%' || lower(:search) || '%'
              or email like '%' || lower(:search) || '%')
      } {} {} {} F:/temp/openacs-4/packages/directory/www/index.xql}
dbqd.directory.www.index.where_2 {dbqd.directory.www.index.where_2 {         and upper(last_name) like :letter || '%'
      } {} {} {} F:/temp/openacs-4/packages/directory/www/index.xql}
dbqd.directory.www.index.get_all_users {dbqd.directory.www.index.get_all_users {         select m.* from $table_and_group
           $where_clause
           $order_clause
      } {} {} {} F:/temp/openacs-4/packages/directory/www/index.xql}
dbqd.download.tcl.download-procs.download_file_downloader.download_insert {dbqd.download.tcl.download-procs.download_file_downloader.download_insert {                insert into download_downloads (
                download_id, 
                user_id, 
                revision_id, 
                download_date, 
                download_ip,
                download_hostname,
                user_agent,
                reason_id,
                reason)
                values
                (:download_id, 
                :user_id, 
                :revision_id, 
                sysdate, 
                :download_ip,
                :download_hostname,
                :user_agent,
                :reason_id,
                :reason_other)
            
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/download/tcl/download-procs-oracle.xql}
dbqd.download.tcl.download-procs.download_insert_revision.revision_new {dbqd.download.tcl.download-procs.download_insert_revision.revision_new {        declare
          v_revision_id integer;
        begin
          v_revision_id := content_revision.new(
           item_id => :archive_id,
           title => :filename,
           description => :version_name,
           revision_id => :revision_id,
           mime_type => :mime_type,
           creation_user => :user_id,
           creation_ip => :creation_ip
          );

          insert into download_archive_revisions (revision_id,    approved_p) values
                                                 (v_revision_id, :approved_p);
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/download/tcl/download-procs-oracle.xql}
dbqd.download.tcl.download-procs.download_insert_revision.content_add {dbqd.download.tcl.download-procs.download_insert_revision.content_add {        update cr_revisions
        set    content = empty_blob()
        where  revision_id = :revision_id
        returning content into :1
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/download/tcl/download-procs-oracle.xql}
dbqd.download.tcl.download-procs.download_insert_revision.make_live {dbqd.download.tcl.download-procs.download_insert_revision.make_live {        begin
        content_item.set_live_revision(:revision_id);
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/download/tcl/download-procs-oracle.xql}
dbqd.download.tcl.download-procs.download_repository_info.repository_info {dbqd.download.tcl.download-procs.download_repository_info.repository_info {select repository_id, title, description, help_text 
from download_repository_obj 
where parent_id = :package_id

} {} {} {} F:/temp/openacs-4/packages/download/tcl/download-procs.xql}
dbqd.download.tcl.download-procs.download_repository_info.type_info {dbqd.download.tcl.download-procs.download_repository_info.type_info {select count(*) from download_archive_types 
where repository_id = :repository_id
            
} {} {} {} F:/temp/openacs-4/packages/download/tcl/download-procs.xql}
dbqd.download.tcl.download-procs.download_metadata_widget.download_metadata_choices {dbqd.download.tcl.download-procs.download_metadata_widget.download_metadata_choices {select choice_id, label
from download_metadata_choices
where metadata_id = :metadata_id
order by sort_order

} {} {} {} F:/temp/openacs-4/packages/download/tcl/download-procs.xql}
dbqd.download.tcl.download-procs.download_file_downloader.download_count {dbqd.download.tcl.download-procs.download_file_downloader.download_count {select count(*) from download_downloads 
where download_id = :download_id

} {} {} {} F:/temp/openacs-4/packages/download/tcl/download-procs.xql}
dbqd.download.tcl.download-procs.download_maybe_create_new_mime_type.mime_type_exists {dbqd.download.tcl.download-procs.download_maybe_create_new_mime_type.mime_type_exists {select count(*) from cr_mime_types
where  mime_type = :mime_type

} {} {} {} F:/temp/openacs-4/packages/download/tcl/download-procs.xql}
dbqd.download.tcl.download-procs.download_maybe_create_new_mime_type.new_mime_type {dbqd.download.tcl.download-procs.download_maybe_create_new_mime_type.new_mime_type {insert into cr_mime_types
(mime_type, file_extension)
values
(:mime_type, :extension)

} {} {} {} F:/temp/openacs-4/packages/download/tcl/download-procs.xql}
dbqd.download.tcl.download-procs.download_validate_metadata.metadata {dbqd.download.tcl.download-procs.download_validate_metadata.metadata {select 
  dam.metadata_id,
  dam.pretty_name,
  dam.data_type,
  dam.required_p
from download_archive_metadata dam
where dam.repository_id = :repository_id and
      dam.computed_p = 'f' and
      (dam.archive_type_id = :archive_type_id or
       dam.archive_type_id is null)
order by sort_key
    
} {} {} {} F:/temp/openacs-4/packages/download/tcl/download-procs.xql}
dbqd.download.tcl.download-procs.download_insert_metadata.survsimp_question_info_list {dbqd.download.tcl.download-procs.download_insert_metadata.survsimp_question_info_list {select 
  dam.metadata_id,
  dam.data_type
from download_archive_metadata dam
where dam.repository_id = :repository_id and
      dam.computed_p = 'f' and
      (dam.archive_type_id = :archive_type_id or
       dam.archive_type_id is null)
order by sort_key
    
} {} {} {} F:/temp/openacs-4/packages/download/tcl/download-procs.xql}
dbqd.download.tcl.download-procs.download_insert_metadata.metadata_inserts {dbqd.download.tcl.download-procs.download_insert_metadata.metadata_inserts {insert into download_revision_data
(revision_id, metadata_id, $answer_column)
values 
( :revision_id, :metadata_id, :response )
        
} {} {} {} F:/temp/openacs-4/packages/download/tcl/download-procs.xql}
dbqd.download.www.admin.approve-or-reject-2.version_approve {dbqd.download.www.admin.approve-or-reject-2.version_approve {       update download_archive_revisions
         set approved_p = :approved_p,
             approved_comment = :approved_comment,
             approved_user = :user_id,
             approved_date = sysdate
       where revision_id = :revision_id
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/download/www/admin/approve-or-reject-2-oracle.xql}
dbqd.download.www.admin.approve-or-reject-2.sendmail {dbqd.download.www.admin.approve-or-reject-2.sendmail {        begin
           :1 := acs_mail_nt.post_request(
                party_from => :user_id,
                party_to => :creation_user,
                expand_group => 'f',
                subject => :subject,
                message => :body);
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/download/www/admin/approve-or-reject-2-oracle.xql}
dbqd.download.www.admin.approve-or-reject-2.creation_email_select {dbqd.download.www.admin.approve-or-reject-2.creation_email_select {        select da.archive_name,
               dar.creation_user,
               dar.version_name
          from download_arch_revisions_obj dar, download_archives_obj da
         where da.archive_id = dar.archive_id and dar.revision_id = :revision_id
    
      } {} {} {} F:/temp/openacs-4/packages/download/www/admin/approve-or-reject-2.xql}
dbqd.download.www.admin.approve-or-reject-2.approving_user_select {dbqd.download.www.admin.approve-or-reject-2.approving_user_select {        select email as approving_email,
               first_names || ' ' || last_name as approving_name
          from cc_users 
         where user_id = :user_id
    
      } {} {} {} F:/temp/openacs-4/packages/download/www/admin/approve-or-reject-2.xql}
dbqd.download.www.admin.approve-or-reject.revision_info_select {dbqd.download.www.admin.approve-or-reject.revision_info_select {select da.repository_id as repository_id,
       da.archive_id,
       da.archive_name,
       da.summary,
       dar.revision_id,
       dar.file_name,
       dar.version_name,
       round(dbms_lob.getlength(dar.content)/1024) as file_size,
       decode(da.latest_revision, dar.revision_id, 't', 'f') as current_version_p,
       dar.creation_user,
       dar.creation_date,
       u.last_name || ', ' || u.first_names as creation_user_name
from   download_archives_obj da,
       download_arch_revisions_obj dar,
       cc_users u
where  da.archive_id = dar.archive_id and
       dar.revision_id = :revision_id and
       u.user_id = dar.creation_user

} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/download/www/admin/approve-or-reject-oracle.xql}
dbqd.download.www.admin.report-by-ip.download_table {dbqd.download.www.admin.report-by-ip.download_table {    select min(u.last_name || ', ' || u.first_names) as user_name,
           min(u.email) as email,
           min(d.user_id) as user_id,
           d.download_ip,
           nvl(min(d.download_hostname),'unavailable') as download_hostname,
           count(*) as num_downloads,
           min('$downloaded') as downloaded
     from download_downloads_repository d, cc_users u
     where d.repository_id = $repository_id and
           d.user_id = u.user_id
           [ad_dimensional_sql $dimensional where]
     group by d.download_ip
     order by 2 desc

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/download/www/admin/report-by-ip-oracle.xql}
dbqd.download.www.admin.report-by-ip.date_clause_1 {dbqd.download.www.admin.report-by-ip.date_clause_1 {	d.download_date + 1 > SYSDATE

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/download/www/admin/report-by-ip-oracle.xql}
dbqd.download.www.admin.report-by-ip.date_clause_7 {dbqd.download.www.admin.report-by-ip.date_clause_7 {	d.download_date + 7 > SYSDATE

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/download/www/admin/report-by-ip-oracle.xql}
dbqd.download.www.admin.report-by-ip.date_clause_30 {dbqd.download.www.admin.report-by-ip.date_clause_30 {	d.download_date + 30 > SYSDATE

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/download/www/admin/report-by-ip-oracle.xql}
dbqd.download.www.admin.report-by-user.download_table {dbqd.download.www.admin.report-by-user.download_table {    select min(u.last_name || ', ' || u.first_names) as user_name,
           min(u.email) as email,
           d.user_id,
           count(*) as num_downloads,
           min('$downloaded') as downloaded
     from download_downloads_repository d, cc_users u
     where d.repository_id = $repository_id and
           d.user_id = u.user_id
           [ad_dimensional_sql $dimensional where]
     group by d.user_id
     order by 2 desc

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/download/www/admin/report-by-user-oracle.xql}
dbqd.download.www.admin.report-by-user.date_clause_1 {dbqd.download.www.admin.report-by-user.date_clause_1 {	d.download_date + 1 > SYSDATE

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/download/www/admin/report-by-user-oracle.xql}
dbqd.download.www.admin.report-by-user.date_clause_7 {dbqd.download.www.admin.report-by-user.date_clause_7 {	d.download_date + 7 > SYSDATE

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/download/www/admin/report-by-user-oracle.xql}
dbqd.download.www.admin.report-by-user.date_clause_30 {dbqd.download.www.admin.report-by-user.date_clause_30 {	d.download_date + 30 > SYSDATE

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/download/www/admin/report-by-user-oracle.xql}
dbqd.download.www.admin.report-one-ip.download_table {dbqd.download.www.admin.report-one-ip.download_table {    select da.archive_name, 
           da.archive_id, 
           dar.revision_id,
           dar.version_name,
           d.download_date,
           u.last_name || ', ' || u.first_names as user_name,
           u.user_id,
           u.email,
           nvl(d.download_hostname,'unavailable') as download_hostname,
           nvl2(d.reason_id, dr.reason, d.reason) as reason
      from download_archives_obj da, download_arch_revisions_obj dar, download_downloads d, download_reasons dr, cc_users u
     where da.repository_id = $repository_id
       and da.archive_id = dar.archive_id
       and d.revision_id = dar.revision_id
       and d.download_ip = '$download_ip'
       and dr.download_reason_id(+) = d.reason_id
       and u.user_id = d.user_id
       [ad_dimensional_sql $dimensional where]
       [ad_order_by_from_sort_spec $orderby $table_def]
      
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/download/www/admin/report-one-ip-oracle.xql}
dbqd.download.www.admin.report-one-ip.date_clause_1 {dbqd.download.www.admin.report-one-ip.date_clause_1 {	d.download_date + 1 > SYSDATE

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/download/www/admin/report-one-ip-oracle.xql}
dbqd.download.www.admin.report-one-ip.date_clause_7 {dbqd.download.www.admin.report-one-ip.date_clause_7 {	d.download_date + 7 > SYSDATE

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/download/www/admin/report-one-ip-oracle.xql}
dbqd.download.www.admin.report-one-ip.date_clause_30 {dbqd.download.www.admin.report-one-ip.date_clause_30 {	d.download_date + 30 > SYSDATE

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/download/www/admin/report-one-ip-oracle.xql}
dbqd.download.www.admin.report-one-user.download_table {dbqd.download.www.admin.report-one-user.download_table {    select da.repository_id,
           da.archive_name, 
           da.archive_id, 
           dar.revision_id,
           dar.version_name,
           d.download_date,
           d.download_ip,
           nvl(d.download_hostname,'unavailable') as download_hostname,
           nvl2(d.reason_id, dr.reason, d.reason) as reason
      from download_archives_obj da, download_arch_revisions_obj dar, download_downloads d, download_reasons dr
     where da.repository_id = $repository_id
       and da.archive_id = dar.archive_id
       and d.revision_id = dar.revision_id
       and d.user_id = $user_id
       and dr.download_reason_id(+) = d.reason_id
       [ad_dimensional_sql $dimensional where]
       [ad_order_by_from_sort_spec $orderby $table_def]
      
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/download/www/admin/report-one-user-oracle.xql}
dbqd.download.www.admin.report-one-user.date_clause_1 {dbqd.download.www.admin.report-one-user.date_clause_1 {	d.download_date + 1 > SYSDATE

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/download/www/admin/report-one-user-oracle.xql}
dbqd.download.www.admin.report-one-user.date_clause_7 {dbqd.download.www.admin.report-one-user.date_clause_7 {	d.download_date + 7 > SYSDATE

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/download/www/admin/report-one-user-oracle.xql}
dbqd.download.www.admin.report-one-user.date_clause_30 {dbqd.download.www.admin.report-one-user.date_clause_30 {	d.download_date + 30 > SYSDATE

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/download/www/admin/report-one-user-oracle.xql}
dbqd.download.www.admin.report-one-user.name_select {dbqd.download.www.admin.report-one-user.name_select {      select u.last_name, u.first_names
                     from cc_users u
                     where u.user_id = :user_id 
      } {} {} {} F:/temp/openacs-4/packages/download/www/admin/report-one-user.xql}
dbqd.download.www.admin.report-version-downloads.download_table {dbqd.download.www.admin.report-version-downloads.download_table {    select u.last_name || ', ' || u.first_names as user_name,
           d.download_date,
           d.download_ip,
           nvl(d.download_hostname,'unavailable') as download_hostname,
           nvl(dar.version_name, 'unnamed') as version_name,
           dar.revision_id,
           u.user_id,
           u.email,
           nvl2(d.reason_id, dr.reason, d.reason) as reason
      from download_arch_revisions_obj dar, download_downloads d, download_reasons dr, cc_users u
     where d.user_id = u.user_id
       and dar.archive_id = $archive_id
       and dar.revision_id = d.revision_id
       and dr.download_reason_id(+) = d.reason_id
       [ad_dimensional_sql $dimensional where]
       [ad_order_by_from_sort_spec $orderby $table_def]

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/download/www/admin/report-version-downloads-oracle.xql}
dbqd.download.www.admin.report-version-downloads.version_clause {dbqd.download.www.admin.report-version-downloads.version_clause {	dar.revision_id = content_item.get_live_revision(dar.archive_id)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/download/www/admin/report-version-downloads-oracle.xql}
dbqd.download.www.admin.report-version-downloads.date_clause_1 {dbqd.download.www.admin.report-version-downloads.date_clause_1 {	d.download_date + 1  > sysdate

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/download/www/admin/report-version-downloads-oracle.xql}
dbqd.download.www.admin.report-version-downloads.date_clause_7 {dbqd.download.www.admin.report-version-downloads.date_clause_7 {	d.download_date + 7 > sysdate

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/download/www/admin/report-version-downloads-oracle.xql}
dbqd.download.www.admin.report-version-downloads.date_clause_30 {dbqd.download.www.admin.report-version-downloads.date_clause_30 {	d.download_date + 30 > sysdate

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/download/www/admin/report-version-downloads-oracle.xql}
dbqd.download.www.admin.report-version-downloads.name_select {dbqd.download.www.admin.report-version-downloads.name_select {    select da.archive_name from download_archives_obj da where da.archive_id = :archive_id

      } {} {} {} F:/temp/openacs-4/packages/download/www/admin/report-version-downloads.xql}
dbqd.download.www.admin.report-version-downloads.count_select {dbqd.download.www.admin.report-version-downloads.count_select {      select count(*)
from   download_downloads d, download_arch_revisions_obj dar
where  dar.archive_id = :archive_id and
       d.revision_id = dar.revision_id 
       [ad_dimensional_sql $dimensional where]

      } {} {} {} F:/temp/openacs-4/packages/download/www/admin/report-version-downloads.xql}
dbqd.download.www.admin.repository-ae.todo_insert {dbqd.download.www.admin.repository-ae.todo_insert {         declare
          the_id integer;
         begin
          the_id := download_rep.new(repository_id  => :repository_id,
                             title => :title,
                             description => :description,
                             help_text => :help_text,
                             creation_user => :user_id,
                             parent_id => :package_id,
                             context_id => :package_id);
                    end;
        
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/download/www/admin/repository-ae-oracle.xql}
dbqd.download.www.admin.repository-ae.repository_edit {dbqd.download.www.admin.repository-ae.repository_edit {             begin
                download_rep.edit(repository_id  => :repository_id,
                                         title => :title,
                                         description => :description,
                                         help_text => :help_text,
                                  modifying_user => :user_id
                );
             end;
        
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/download/www/admin/repository-ae-oracle.xql}
dbqd.download.www.admin.repository-ae.repository_info {dbqd.download.www.admin.repository-ae.repository_info {    select title, description, help_text from download_repository_obj where repository_id = :repository_id

      } {} {} {} F:/temp/openacs-4/packages/download/www/admin/repository-ae.xql}
dbqd.download.www.admin.repository-ae.rep_count_get {dbqd.download.www.admin.repository-ae.rep_count_get {      select count(*) from download_repository_obj where repository_id = :repository_id
      } {} {} {} F:/temp/openacs-4/packages/download/www/admin/repository-ae.xql}
dbqd.download.www.admin.repository-metadata-delete.metadata_delete {dbqd.download.www.admin.repository-metadata-delete.metadata_delete {    delete from download_archive_metadata where metadata_id = :metadata_id

      } {} {} {} F:/temp/openacs-4/packages/download/www/admin/repository-metadata-delete.xql}
dbqd.download.www.admin.repository-metadata-edit.metadata_select {dbqd.download.www.admin.repository-metadata-edit.metadata_select {    select 
      dam.metadata_id,
      dam.repository_id,
      dam.archive_type_id,
      nvl(dat.pretty_name, 'All') as archive_name,
      dam.sort_key,
      dam.pretty_name,
      dam.data_type,
      dam.required_p,      
      dam.linked_p,        
      dam.mainpage_p,
      dam.computed_p      
    from download_archive_metadata dam, download_archive_types dat
         where dam.repository_id = :repository_id and
               dam.metadata_id = :metadata_id and
               dam.archive_type_id = dat.archive_type_id(+) 
    order by archive_type_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/download/www/admin/repository-metadata-edit-oracle.xql}
dbqd.download.www.admin.repository-metadata-edit.metadata_select {dbqd.download.www.admin.repository-metadata-edit.metadata_select {    select 
      dam.metadata_id,
      dam.repository_id,
      dam.archive_type_id,
      nvl(dat.pretty_name, 'All') as archive_name,
      dam.sort_key,
      dam.pretty_name,
      dam.data_type,
      dam.required_p,      
      dam.linked_p,        
      dam.mainpage_p,
      dam.computed_p      
    from download_archive_metadata dam, download_archive_types dat
         where dam.repository_id = :repository_id and
               dam.metadata_id = :metadata_id and
               dam.archive_type_id = dat.archive_type_id(+) 
    order by archive_type_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/download/www/admin/repository-metadata-edit-oracle.xql}
dbqd.download.www.admin.repository-metadata-edit.choices {dbqd.download.www.admin.repository-metadata-edit.choices {    select label from download_metadata_choices where metadata_id = :metadata_id

      } {} {} {} F:/temp/openacs-4/packages/download/www/admin/repository-metadata-edit.xql}
dbqd.download.www.admin.repository-metadata-edit.archiv_types {dbqd.download.www.admin.repository-metadata-edit.archiv_types {    select pretty_name, archive_type_id from download_archive_types where repository_id = $repository_id
      } {} {} {} F:/temp/openacs-4/packages/download/www/admin/repository-metadata-edit.xql}
dbqd.download.www.admin.repository-metadata-edit.metadata_update {dbqd.download.www.admin.repository-metadata-edit.metadata_update {            update download_archive_metadata set
                  archive_type_id = :archive_type_id,
                  sort_key = :sort_key,
                  pretty_name = :pretty_name,
                  data_type = :data_type,
                  required_p = :required_p,
                  linked_p = :linked_p,
                  mainpage_p = :mainpage_p,
                  computed_p = :computed_p
            where metadata_id = :metadata_id and
                  repository_id = :repository_id 
        
      } {} {} {} F:/temp/openacs-4/packages/download/www/admin/repository-metadata-edit.xql}
dbqd.download.www.admin.repository-metadata-edit.choices_delete {dbqd.download.www.admin.repository-metadata-edit.choices_delete {            delete from download_metadata_choices where metadata_id = :metadata_id
        
      } {} {} {} F:/temp/openacs-4/packages/download/www/admin/repository-metadata-edit.xql}
dbqd.download.www.admin.repository-metadata-edit.choice_insert {dbqd.download.www.admin.repository-metadata-edit.choice_insert {insert into download_metadata_choices (choice_id, metadata_id, label, sort_order)
values (download_md_choice_id_sequence.nextval, :metadata_id, :choice, :count)
                
      } {} {} {} F:/temp/openacs-4/packages/download/www/admin/repository-metadata-edit.xql}
dbqd.download.www.admin.repository-metadata.metadata_select {dbqd.download.www.admin.repository-metadata.metadata_select {    select 
      dam.metadata_id,
      dam.repository_id,
      dam.archive_type_id,
      nvl(dat.pretty_name, 'All') as archive_name,
      dam.sort_key,
      dam.pretty_name,
      dam.data_type,
      dam.required_p,      
      dam.linked_p,        
      dam.mainpage_p,
      dam.computed_p      
    from download_archive_metadata dam, download_archive_types dat
         where dam.repository_id = :repository_id and
               dam.archive_type_id = dat.archive_type_id(+)
    order by archive_type_id, sort_key

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/download/www/admin/repository-metadata-oracle.xql}
dbqd.download.www.admin.repository-metadata.archiv_types {dbqd.download.www.admin.repository-metadata.archiv_types {select pretty_name, archive_type_id 
from download_archive_types 
where repository_id = $repository_id

} {} {} {} F:/temp/openacs-4/packages/download/www/admin/repository-metadata.xql}
dbqd.download.www.admin.repository-metadata.metadata_insert {dbqd.download.www.admin.repository-metadata.metadata_insert {insert into download_archive_metadata (
    metadata_id,
    repository_id, 
    archive_type_id,
    sort_key,
    pretty_name,
    data_type,
    required_p,
    linked_p,
    mainpage_p,
    computed_p)
values (
    :metadata_id,
    :repository_id, 
    :archive_type_id,
    :sort_key,
    :pretty_name,
    :data_type,
    :required_p,
    :linked_p,
    :mainpage_p,
    :computed_p)
        
} {} {} {} F:/temp/openacs-4/packages/download/www/admin/repository-metadata.xql}
dbqd.download.www.admin.repository-metadata.choice_insert {dbqd.download.www.admin.repository-metadata.choice_insert {insert into download_metadata_choices 
(choice_id, metadata_id, label, sort_order)
values 
(download_md_choice_id_sequence.nextval, :metadata_id, :choice, :count)
                
} {} {} {} F:/temp/openacs-4/packages/download/www/admin/repository-metadata.xql}
dbqd.download.www.admin.repository-metadata.metadata_select {dbqd.download.www.admin.repository-metadata.metadata_select {    select 
      dam.metadata_id,
      dam.repository_id,
      dam.archive_type_id,
      nvl(dat.pretty_name, 'All') as archive_name,
      dam.sort_key,
      dam.pretty_name,
      dam.data_type,
      dam.required_p,      
      dam.linked_p,        
      dam.mainpage_p,
      dam.computed_p      
    from download_archive_metadata dam, download_archive_types dat
         where dam.repository_id = :repository_id and
               dam.archive_type_id = dat.archive_type_id(+)
    order by archive_type_id, sort_key

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/download/www/admin/repository-metadata-oracle.xql}
dbqd.download.www.admin.repository-reasons-delete.reason_delete {dbqd.download.www.admin.repository-reasons-delete.reason_delete {    delete from download_reasons where download_reason_id = :download_reason_id

      } {} {} {} F:/temp/openacs-4/packages/download/www/admin/repository-reasons-delete.xql}
dbqd.download.www.admin.repository-reasons-edit.edit_info {dbqd.download.www.admin.repository-reasons-edit.edit_info {      select download_reason_id, reason from download_reasons where download_reason_id = :download_reason_id
      } {} {} {} F:/temp/openacs-4/packages/download/www/admin/repository-reasons-edit.xql}
dbqd.download.www.admin.repository-reasons-edit.edit_reason {dbqd.download.www.admin.repository-reasons-edit.edit_reason {        update download_reasons set reason = :reason
        where download_reason_id = :download_reason_id
    
      } {} {} {} F:/temp/openacs-4/packages/download/www/admin/repository-reasons-edit.xql}
dbqd.download.www.admin.repository-reasons.repository_reasons_insert {dbqd.download.www.admin.repository-reasons.repository_reasons_insert {        insert into download_reasons (download_reason_id, repository_id, reason) values (:download_reason_id, :repository_id, :reason)
    
      } {} {} {} F:/temp/openacs-4/packages/download/www/admin/repository-reasons.xql}
dbqd.download.www.admin.repository-reasons.reasons_select {dbqd.download.www.admin.repository-reasons.reasons_select {    select download_reason_id, reason from download_reasons where repository_id = :repository_id

      } {} {} {} F:/temp/openacs-4/packages/download/www/admin/repository-reasons.xql}
dbqd.download.www.admin.repository-types-delete.type_delete {dbqd.download.www.admin.repository-types-delete.type_delete {    delete from download_archive_types where repository_id = :repository_id and archive_type_id = :archive_type_id

      } {} {} {} F:/temp/openacs-4/packages/download/www/admin/repository-types-delete.xql}
dbqd.download.www.admin.repository-types-edit.edit_info {dbqd.download.www.admin.repository-types-edit.edit_info {      select archive_type_id, pretty_name, description from download_archive_types where archive_type_id = :archive_type_id
      } {} {} {} F:/temp/openacs-4/packages/download/www/admin/repository-types-edit.xql}
dbqd.download.www.admin.repository-types-edit.edit_type {dbqd.download.www.admin.repository-types-edit.edit_type {        update download_archive_types set pretty_name = :pretty_name, description = :description
        where archive_type_id = :archive_type_id
    
      } {} {} {} F:/temp/openacs-4/packages/download/www/admin/repository-types-edit.xql}
dbqd.download.www.admin.repository-types.repository_types_insert {dbqd.download.www.admin.repository-types.repository_types_insert {        insert into download_archive_types (archive_type_id, repository_id, pretty_name, description) values (:archive_type_id, :repository_id, :pretty_name, :description)
    
      } {} {} {} F:/temp/openacs-4/packages/download/www/admin/repository-types.xql}
dbqd.download.www.admin.repository-types.types_select {dbqd.download.www.admin.repository-types.types_select {    select archive_type_id, pretty_name, description from download_archive_types where repository_id = :repository_id

      } {} {} {} F:/temp/openacs-4/packages/download/www/admin/repository-types.xql}
dbqd.download.www.admin.spam-users-2.sendmail {dbqd.download.www.admin.spam-users-2.sendmail {        begin
           :1 := acs_mail_nt.post_request(
                party_from => :user_id,
                party_to => :to_user_id,
                expand_group => 'f',
                subject => :subject,
                message => :msgbody);
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/download/www/admin/spam-users-2-oracle.xql}
dbqd.download.www.admin.spam-users.user_select {dbqd.download.www.admin.spam-users.user_select {      select u.email, u.user_id, u.user_name from ($sql_query) u
      } {} {} {} F:/temp/openacs-4/packages/download/www/admin/spam-users.xql}
dbqd.download.www.all-metadata.metadata {dbqd.download.www.all-metadata.metadata {    select dam.pretty_name,
           dam.data_type
    from download_archive_metadata dam
    where dam.linked_p = 't' and
          dam.metadata_id = :metadata_id

      } {} {} {} F:/temp/openacs-4/packages/download/www/all-metadata.xql}
dbqd.download.www.archive-add-2.archive_new {dbqd.download.www.archive-add-2.archive_new {        declare
          v_archive_id integer;
          v_archive_desc_id integer;
          v_name       cr_items.name%TYPE;
        begin
          v_name := 'Download Archive Desc for ' || :archive_id;

          v_archive_desc_id := content_item.new (
           content_type => 'cr_download_archive_desc',
           item_id => :archive_desc_id,
           name => v_name,
           title => :summary,
           description => :description,
           mime_type => :description_format,
           parent_id => :repository_id,
           context_id => :repository_id,
           creation_user => :user_id,
           creation_ip => :creation_ip,
           is_live => 't'
          );
          insert into download_archive_descs (archive_desc_id) values (content_item.get_live_revision(v_archive_desc_id));

          v_archive_id := content_item.new(
           content_type => 'cr_download_archive',
           item_id => :archive_id,
           name => :archive_name,
           parent_id => :repository_id,
           context_id => :repository_id,
           creation_user => :user_id,
           creation_ip => :creation_ip
          );

          insert into download_archives (archive_id, archive_type_id, archive_desc_id) values (v_archive_id, :archive_type_id, content_item.get_live_revision(v_archive_desc_id));
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/download/www/archive-add-2-oracle.xql}
dbqd.download.www.archive-add.metadata {dbqd.download.www.archive-add.metadata {    select 
      dam.metadata_id,
      dam.pretty_name,
      dam.data_type
    from download_archive_metadata dam
         where dam.repository_id = :repository_id and
               dam.computed_p = 'f' and
               (dam.archive_type_id = :archive_type_id or
                dam.archive_type_id is null)
    order by sort_key

      } {} {} {} F:/temp/openacs-4/packages/download/www/archive-add.xql}
dbqd.download.www.archive-version-add-2.get_archive_type {dbqd.download.www.archive-version-add-2.get_archive_type {      select archive_type_id from download_archives where archive_id = :archive_id
      } {} {} {} F:/temp/openacs-4/packages/download/www/archive-version-add-2.xql}
dbqd.download.www.archive-version-add.archive_info_select {dbqd.download.www.archive-version-add.archive_info_select {   select da.archive_name, 
          da.archive_type_id,
          da.summary,
          da.description, 
          da.description_type, 
          u.last_name || ', ' || u.first_names as creation_user_name,
          da.creation_user, 
          to_char(da.creation_date,'Mon DD, YYYY') as creation_date
     from download_archives_obj da, cc_users u
    where da.archive_id = :archive_id
      and u.user_id = da.creation_user

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/download/www/archive-version-add-oracle.xql}
dbqd.download.www.archive-version-add.metadata {dbqd.download.www.archive-version-add.metadata {    select 
      dam.metadata_id,
      dam.pretty_name,
      dam.data_type
    from download_archive_metadata dam
         where dam.repository_id = :repository_id and
               dam.computed_p = 'f' and
               (dam.archive_type_id = :archive_type_id or
                dam.archive_type_id is null)
    order by sort_key

      } {} {} {} F:/temp/openacs-4/packages/download/www/archive-version-add.xql}
dbqd.download.www.download-verify.revision_info_select {dbqd.download.www.download-verify.revision_info_select {select da.archive_id,
       da.repository_id as repository_id,
       da.archive_name,
       da.summary,
       dar.revision_id,
       dar.file_name,
       dar.version_name,
       round(dbms_lob.getlength(dar.content)/1024) as file_size       
from   download_archives_obj da,
       download_arch_revisions_obj dar
where  da.archive_id = dar.archive_id and
       dar.revision_id = :revision_id 
       $approval

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/download/www/download-verify-oracle.xql}
dbqd.download.www.index.my_revisions {dbqd.download.www.index.my_revisions {        select da.archive_name,
               dar.version_name,
               dar.revision_id,
               dar.approved_p,
               nvl(dar.approved_comment, 'No comment') approved_comment,
               to_char(dar.creation_date,'Mon DD, YYYY') as creation_date
    from download_arch_revisions_obj dar, download_archives_obj da
    where da.repository_id = :repository_id and
          dar.archive_id = da.archive_id and
          approved_p != 't' and
          dar.creation_user = :user_id
    order by creation_date

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/download/www/index-oracle.xql}
dbqd.download.www.index.download_index_query {dbqd.download.www.index.download_index_query {select da.archive_id,
       dat.pretty_name as archive_type,
       da.archive_type_id,
       da.archive_name,
       da.summary,
       dar.revision_id,
       dar.file_name,
       dar.version_name,
       round(dbms_lob.getlength(dar.content)/1024) as file_size,       
       (select count(*) from download_downloads where revision_id = dar.revision_id) as downloads,
       dar.approved_p 
       $metadata_selects
from   download_archives_obj da,
       download_archive_types dat,
       download_arch_revisions_obj dar
where  da.repository_id = :repository_id and
       dat.archive_type_id = da.archive_type_id and
       da.archive_id = dar.archive_id and
       acs_permission.permission_p(dar.revision_id, :user_id, 'read') = 't'
       $approval
       [ad_dimensional_sql $dimensional where]
       [ad_order_by_from_sort_spec $orderby $table_def]
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/download/www/index-oracle.xql}
dbqd.download.www.index.archive_where_clause {dbqd.download.www.index.archive_where_clause {   dar.revision_id = content_item.get_live_revision(da.archive_id)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/download/www/index-oracle.xql}
dbqd.download.www.index.date_clause_1 {dbqd.download.www.index.date_clause_1 {	dar.publish_date + 1 > sysdate

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/download/www/index-oracle.xql}
dbqd.download.www.index.date_clause_7 {dbqd.download.www.index.date_clause_7 {	dar.publish_date + 7 > sysdate

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/download/www/index-oracle.xql}
dbqd.download.www.index.date_clause_30 {dbqd.download.www.index.date_clause_30 {	dar.publish_date + 30 > sysdate

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/download/www/index-oracle.xql}
dbqd.download.www.index.archive_type {dbqd.download.www.index.archive_type {    select archive_type_id as at_id, pretty_name from download_archive_types where repository_id = :repository_id

      } {} {} {} F:/temp/openacs-4/packages/download/www/index.xql}
dbqd.download.www.index.metadata {dbqd.download.www.index.metadata {    select dam.metadata_id,
           dam.pretty_name,
           dam.data_type,
           dam.linked_p
    from download_archive_metadata dam
    where dam.mainpage_p = 't' and
          dam.repository_id = :repository_id and
          (dam.archive_type_id = :archive_type_id or dam.archive_type_id is null)
    order by sort_key

      } {} {} {} F:/temp/openacs-4/packages/download/www/index.xql}
dbqd.download.www.index.types_select {dbqd.download.www.index.types_select {    select archive_type_id, pretty_name, description from download_archive_types where repository_id = :repository_id

      } {} {} {} F:/temp/openacs-4/packages/download/www/index.xql}
dbqd.download.www.one-archive.archive_info_select {dbqd.download.www.one-archive.archive_info_select {   select da.archive_name, 
          da.summary,
          da.description, 
          da.description_type, 
          u.last_name || ', ' || u.first_names as creation_user_name,
          da.creation_user, 
          to_char(da.creation_date,'Mon DD, YYYY') as creation_date
     from download_archives_obj da, cc_users u
    where da.archive_id = :archive_id
      and u.user_id = da.creation_user

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/download/www/one-archive-oracle.xql}
dbqd.download.www.one-archive.rep_get_revisions {dbqd.download.www.one-archive.rep_get_revisions {    select dar.file_name,
           dar.version_name,
           dar.revision_id,
           u.last_name || ', ' || u.first_names as creation_user_name,
           dar.creation_user, 
           to_char(dar.creation_date,'Mon DD, YYYY') as creation_date
           
    from download_arch_revisions_obj dar, cc_users u
    where dar.archive_id = :archive_id
          and approved_p = 't' and
          u.user_id = dar.creation_user
    order by version_name

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/download/www/one-archive-oracle.xql}
dbqd.download.www.one-archive.pending_count_select {dbqd.download.www.one-archive.pending_count_select {        select count(*)
          from download_arch_revisions_obj dar
         where dar.archive_id = :archive_id
           and approved_p is null
    
      } {} {} {} F:/temp/openacs-4/packages/download/www/one-archive.xql}
dbqd.download.www.one-metadata.metadata {dbqd.download.www.one-metadata.metadata {    select dam.pretty_name,
           dam.data_type
    from download_archive_metadata dam
    where dam.linked_p = 't' and
          dam.metadata_id = :metadata_id

      } {} {} {} F:/temp/openacs-4/packages/download/www/one-metadata.xql}
dbqd.download.www.one-metadata.archives {dbqd.download.www.one-metadata.archives {        select da.archive_name,
               da.archive_id,
               count(dar.revision_id) as num_versions
        from download_arch_revisions_obj dar, download_archives_obj da
        where dar.archive_id = da.archive_id and
              dar.revision_id in (select revision_id from download_revision_data where $answer_column = :value and metadata_id = :metadata_id)
        group by da.archive_name, da.archive_id

      } {} {} {} F:/temp/openacs-4/packages/download/www/one-metadata.xql}
dbqd.download.www.one-revision.revision_info_select {dbqd.download.www.one-revision.revision_info_select {select da.archive_id,
       dat.pretty_name as archive_type,
       da.archive_type_id,
       da.archive_name,
       da.summary,
       da.description,
       da.description_type,
       dar.revision_id,
       dar.file_name,
       dar.version_name,
       dar.version_name,
       round(dbms_lob.getlength(dar.content) / 1024) as file_size,       
       (select count(*) from download_downloads where revision_id = dar.revision_id) as downloads,
       dar.approved_p,
       u.last_name || ', ' || u.first_names as creation_user_name,
       dar.creation_user, 
       dar.creation_date 
       $metadata_selects
from   download_archives_obj da,
       download_archive_types dat,
       download_arch_revisions_obj dar,
       cc_users u
where  da.repository_id = :repository_id and
       dat.archive_type_id = da.archive_type_id and
       da.archive_id = dar.archive_id and
       dar.revision_id = :revision_id and
       dar.creation_user = u.user_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/download/www/one-revision-oracle.xql}
dbqd.download.www.one-revision.get_archive_type {dbqd.download.www.one-revision.get_archive_type {      select archive_type_id from download_arch_revisions_obj dar, download_archives da where dar.archive_id = da.archive_id and dar.revision_id = :revision_id
      } {} {} {} F:/temp/openacs-4/packages/download/www/one-revision.xql}
dbqd.download.www.one-revision.metadata {dbqd.download.www.one-revision.metadata {    select dam.metadata_id,
           dam.pretty_name,
           dam.data_type
    from download_archive_metadata dam
    where dam.repository_id = :repository_id and
          (dam.archive_type_id = :archive_type_id or dam.archive_type_id is null)
    order by sort_key

      } {} {} {} F:/temp/openacs-4/packages/download/www/one-revision.xql}
dbqd.ecommerce.tcl.ec-audit-trail-procs.ec_audit_delete_row.audit_table_insert {dbqd.ecommerce.tcl.ec-audit-trail-procs.ec_audit_delete_row.audit_table_insert {    insert into $audit_table_name
           ($id_column_join last_modified,
           last_modifying_user, modified_ip_address, delete_p)
    values ($id_column_bind_join sysdate,
            :last_modifying_user, :modified_ip_address, :delete_p)
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ec-audit-trail-procs-oracle.xql}
dbqd.ecommerce.tcl.ec-audit-trail-procs.ec_audit_trail.get_entries_sql {dbqd.ecommerce.tcl.ec-audit-trail-procs.ec_audit_trail.get_entries_sql {      select $audit_table_name.*,
           $audit_table_name.rowid,
           to_char($audit_table_name.last_modified,
                   'Mon DD, YYYY HH12:MI AM') as last_modified,
           users.first_names || ' ' || users.last_name
                   as modifying_user_name
      from $audit_table_name, cc_users users
     where users.user_id = $audit_table_name.last_modifying_user $audit_table_id_clause $date_clause
  order by $audit_table_name.last_modified asc

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ec-audit-trail-procs-oracle.xql}
dbqd.ecommerce.tcl.ec-audit-trail-procs.ec_audit_process_row.audit_table_column_select {dbqd.ecommerce.tcl.ec-audit-trail-procs.ec_audit_process_row.audit_table_column_select {        select distinct $id_column
          from $main_table_name
         where [join $date_clause_list "\nand "]
    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ec-audit-trail-procs.xql}
dbqd.ecommerce.tcl.ec-audit-trail-procs.ec_audit_process_row.audit_table_column_select {dbqd.ecommerce.tcl.ec-audit-trail-procs.ec_audit_process_row.audit_table_column_select {        select distinct $id_column
          from $main_table_name
         where [join $date_clause_list "\nand "]
    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ec-audit-trail-procs.xql}
dbqd.ecommerce.tcl.ec-style-procs.ec_style_user_preferences_from_db.preference_select {dbqd.ecommerce.tcl.ec-style-procs.ec_style_user_preferences_from_db.preference_select {	select prefer_text_only_p, language_preference 
	from user_preferences 
	where user_id = :user_id
    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ec-style-procs.xql}
dbqd.ecommerce.tcl.ecommerce-credit-procs.ec_creditcard_authorization.order_data_select {dbqd.ecommerce.tcl.ecommerce-credit-procs.ec_creditcard_authorization.order_data_select {	    select ec_order_cost(:order_id) as total_amount,
	           creditcard_id,
	           case when sign(sysdate - confirmed_date - .95) = -1 then 1 else 0 end as youth
	      from ec_orders
	     where order_id = :order_id
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-credit-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-credit-procs.ec_creditcard_authorization.transaction_data_select {dbqd.ecommerce.tcl.ecommerce-credit-procs.ec_creditcard_authorization.transaction_data_select {	    select transaction_amount as total_amount,
	           creditcard_id,
	           case when sign(sysdate-inserted_date-.95) = -1 then 1 else 0 end as youth
	    from ec_financial_transactions
	    where transaction_id = :transaction_id
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-credit-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-credit-procs.ec_talk_to_cybercash.cybercash_log_insert {dbqd.ecommerce.tcl.ecommerce-credit-procs.ec_talk_to_cybercash.cybercash_log_insert {	insert into ec_cybercash_log ([join [ad_ns_set_keys -exclude "cc_time" $bind_vars] ", "], cc_time, txn_attempted_time)
        values ([join [ad_ns_set_keys -exclude "cc_time" -colon $bind_vars] ", "], to_date(:cc_time, 'YYYYMMDDHH24MISS'), sysdate)
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-credit-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-credit-procs.ec_date_to_cybercash_date_for_query.cybercash_date_create {dbqd.ecommerce.tcl.ecommerce-credit-procs.ec_date_to_cybercash_date_for_query.cybercash_date_create {	select to_char(:n_hours_to_add / 24 + to_date(:the_date, 'YYYY-MM-DD HH24:MI:SS'), 'YYYYMMDDHH24MISS') from dual
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-credit-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-credit-procs.ec_creditcard_authorization.creditcard_data_select {dbqd.ecommerce.tcl.ecommerce-credit-procs.ec_creditcard_authorization.creditcard_data_select {	    select creditcard_number, creditcard_expire,
	           billing_zip_code
	      from ec_creditcards
	     where creditcard_id = :creditcard_id
	
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-credit-procs.xql}
dbqd.ecommerce.tcl.ecommerce-credit-procs.ec_creditcard_authorization.latest_transaction_select {dbqd.ecommerce.tcl.ecommerce-credit-procs.ec_creditcard_authorization.latest_transaction_select {		select max(transaction_id) from ec_financial_transactions where order_id = :order_id
	    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-credit-procs.xql}
dbqd.ecommerce.tcl.ecommerce-credit-procs.ec_creditcard_marking.transaction_amount_select {dbqd.ecommerce.tcl.ecommerce-credit-procs.ec_creditcard_marking.transaction_amount_select {	select transaction_amount from ec_financial_transactions where transaction_id = :transaction_id
    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-credit-procs.xql}
dbqd.ecommerce.tcl.ecommerce-credit-procs.ec_creditcard_return.transaction_info_select {dbqd.ecommerce.tcl.ecommerce-credit-procs.ec_creditcard_return.transaction_info_select {	    select t.transaction_amount,
	           c.creditcard_number,
	           c.creditcard_expire,
	           c.billing_zip_code
	      from ec_financial_transactions t,
	           ec_creditcards c
	     where t.transaction_id = :transaction_id
	       and c.creditcard_id = t.creditcard_id
	
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-credit-procs.xql}
dbqd.ecommerce.tcl.ecommerce-customer-service-procs.ec_customer_service_simple_issue.get_ec_issue_seq {dbqd.ecommerce.tcl.ecommerce-customer-service-procs.ec_customer_service_simple_issue.get_ec_issue_seq {      select ec_issue_id_sequence.NEXTVAL from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-customer-service-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-customer-service-procs.ec_customer_service_simple_issue.customer_service_interaction_insert {dbqd.ecommerce.tcl.ecommerce-customer-service-procs.ec_customer_service_simple_issue.customer_service_interaction_insert {	insert into ec_customer_serv_interactions
	(interaction_id, customer_service_rep, user_identification_id, interaction_date, interaction_originator, interaction_type, interaction_headers)
	values
	(:interaction_id, :customer_service_rep, :user_identification_id, sysdate, :interaction_originator, :interaction_type, :interaction_headers)
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-customer-service-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-customer-service-procs.ec_customer_service_simple_issue.customer_service_issue_insert {dbqd.ecommerce.tcl.ecommerce-customer-service-procs.ec_customer_service_simple_issue.customer_service_issue_insert {        insert into ec_customer_service_issues
	(issue_id, user_identification_id, order_id, open_date, close_date, closed_by, gift_certificate_id)
        values
	(:issue_id, :user_identification_id, :order_id, sysdate, sysdate, :customer_service_rep, :gift_certificate_id)
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-customer-service-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-customer-service-procs.ec_customer_service_simple_issue.user_identification_select {dbqd.ecommerce.tcl.ecommerce-customer-service-procs.ec_customer_service_simple_issue.user_identification_select {	    select user_identification_id from ec_user_identification where user_id = :user_id
	
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-customer-service-procs.xql}
dbqd.ecommerce.tcl.ecommerce-customer-service-procs.ec_customer_service_simple_issue.user_identification_insert {dbqd.ecommerce.tcl.ecommerce-customer-service-procs.ec_customer_service_simple_issue.user_identification_insert {                insert into ec_user_identification
		(user_identification_id, user_id)
                values
		(:user_identification_id, :user_id)
            
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-customer-service-procs.xql}
dbqd.ecommerce.tcl.ecommerce-customer-service-procs.ec_customer_service_simple_issue.issue_type_map_insert {dbqd.ecommerce.tcl.ecommerce-customer-service-procs.ec_customer_service_simple_issue.issue_type_map_insert {            insert into ec_cs_issue_type_map
	    (issue_id, issue_type)
            values
	    (:issue_id, :issue_type)
	
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-customer-service-procs.xql}
dbqd.ecommerce.tcl.ecommerce-customer-service-procs.ec_customer_service_simple_issue.customer_service_action_insert {dbqd.ecommerce.tcl.ecommerce-customer-service-procs.ec_customer_service_simple_issue.customer_service_action_insert {      insert into ec_customer_service_actions
      (action_id, issue_id, interaction_id, action_details)
      values
      (:action_id, :issue_id, :interaction_id, :action_details)

      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-customer-service-procs.xql}
dbqd.ecommerce.tcl.ecommerce-email-procs.ec_email_new_order.email_info_select {dbqd.ecommerce.tcl.ecommerce-email-procs.ec_email_new_order.email_info_select {      select u.email,
      to_char(confirmed_date,'MM/DD/YY') as confirmed_date,
      shipping_address, u.user_id
      from ec_orders, cc_users u
      where ec_orders.user_id = u.user_id
      and order_id = :order_id
    } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-email-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-email-procs.ec_email_new_order.email_log_insert_1 {dbqd.ecommerce.tcl.ecommerce-email-procs.ec_email_new_order.email_log_insert_1 {      insert into ec_automatic_email_log
      (user_identification_id, email_template_id, order_id, date_sent)
      values
      (:user_identification_id, 1, :order_id, sysdate)
    } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-email-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-email-procs.ec_email_order_shipped.email_log_insert_2 {dbqd.ecommerce.tcl.ecommerce-email-procs.ec_email_order_shipped.email_log_insert_2 {      insert into ec_automatic_email_log
      (user_identification_id, email_template_id, order_id, shipment_id, date_sent)
      values
      (:user_identification_id, 2, :order_id, :shipment_id, sysdate)
    } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-email-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-email-procs.ec_email_delayed_credit_denied.email_log_insert_3 {dbqd.ecommerce.tcl.ecommerce-email-procs.ec_email_delayed_credit_denied.email_log_insert_3 {      insert into ec_automatic_email_log
      (user_identification_id, email_template_id, order_id, date_sent)
      values
      (:user_identification_id, 3, :order_id, sysdate)
    } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-email-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-email-procs.ec_email_new_gift_certificate_order.email_log_insert_4 {dbqd.ecommerce.tcl.ecommerce-email-procs.ec_email_new_gift_certificate_order.email_log_insert_4 {      insert into ec_automatic_email_log
      (user_identification_id, email_template_id, gift_certificate_id, date_sent)
      values
      (:user_identification_id, 4, :gift_certificate_id, sysdate)
    } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-email-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-email-procs.ec_email_gift_certificate_recipient.email_log_insert_5 {dbqd.ecommerce.tcl.ecommerce-email-procs.ec_email_gift_certificate_recipient.email_log_insert_5 {      insert into ec_automatic_email_log
      (user_identification_id, email_template_id, gift_certificate_id, date_sent)
      values
      (:user_identification_id, 5, :gift_certificate_id, sysdate)
    } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-email-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-email-procs.ec_email_gift_certificate_order_failure.email_log_insert_6 {dbqd.ecommerce.tcl.ecommerce-email-procs.ec_email_gift_certificate_order_failure.email_log_insert_6 {      insert into ec_automatic_email_log
      (user_identification_id, email_template_id, gift_certificate_id, date_sent)
      values
      (:user_identification_id, 6, :gift_certificate_id, sysdate)
    } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-email-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-email-procs.template_select_1 {dbqd.ecommerce.tcl.ecommerce-email-procs.template_select_1 {	select subject as email_subject, message as email_body, issue_type_list
	from ec_email_templates
	where email_template_id = 1
    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-email-procs.xql}
dbqd.ecommerce.tcl.ecommerce-email-procs.notification_select {dbqd.ecommerce.tcl.ecommerce-email-procs.notification_select {      select ep.email_on_purchase_list, ep.product_name
      from ec_items ei, ec_products ep
      where ei.product_id = ep.product_id
      and ei.order_id = :order_id
      group by ep.email_on_purchase_list, ep.product_name
  
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-email-procs.xql}
dbqd.ecommerce.tcl.ecommerce-email-procs.user_select {dbqd.ecommerce.tcl.ecommerce-email-procs.user_select {	select u.email, u.user_id
          from ec_orders, cc_users u
         where ec_orders.user_id = u.user_id
           and order_id = :order_id
    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-email-procs.xql}
dbqd.ecommerce.tcl.ecommerce-email-procs.template_select_3 {dbqd.ecommerce.tcl.ecommerce-email-procs.template_select_3 {	select subject as email_subject, message as email_body, issue_type_list
	from ec_email_templates
	where email_template_id = 3
    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-email-procs.xql}
dbqd.ecommerce.tcl.ecommerce-email-procs.shipment_select {dbqd.ecommerce.tcl.ecommerce-email-procs.shipment_select {	select u.email, u.user_id, s.shipment_date, s.address_id, o.order_state, o.order_id
          from ec_orders o, cc_users u, ec_shipments s
	 where o.user_id = u.user_id
	   and o.order_id = s.order_id
	   and s.shipment_id = :shipment_id
    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-email-procs.xql}
dbqd.ecommerce.tcl.ecommerce-email-procs.item_summary_select {dbqd.ecommerce.tcl.ecommerce-email-procs.item_summary_select {	select p.product_name, p.one_line_description, p.product_id, i.price_charged, i.price_name, count(*) as quantity
	from ec_items i, ec_products p
	where i.product_id=p.product_id
	and i.shipment_id=:shipment_id
	group by p.product_name, p.one_line_description, p.product_id, i.price_charged, i.price_name
    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-email-procs.xql}
dbqd.ecommerce.tcl.ecommerce-email-procs.template_select_2 {dbqd.ecommerce.tcl.ecommerce-email-procs.template_select_2 {	select subject as email_subject, message as email_body, issue_type_list
	from ec_email_templates
	where email_template_id = 2
    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-email-procs.xql}
dbqd.ecommerce.tcl.ecommerce-email-procs.gift_certificate_select {dbqd.ecommerce.tcl.ecommerce-email-procs.gift_certificate_select {    select g.purchased_by as user_id, u.email, g.recipient_email, g.amount
      from ec_gift_certificates g, cc_users u
     where g.purchased_by=u.user_id
       and g.gift_certificate_id=:gift_certificate_id
    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-email-procs.xql}
dbqd.ecommerce.tcl.ecommerce-email-procs.template_select_4 {dbqd.ecommerce.tcl.ecommerce-email-procs.template_select_4 {	select subject as email_subject, message as email_body, issue_type_list
	from ec_email_templates
	where email_template_id = 4
    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-email-procs.xql}
dbqd.ecommerce.tcl.ecommerce-email-procs.gift_certificate_select_2 {dbqd.ecommerce.tcl.ecommerce-email-procs.gift_certificate_select_2 {	select g.purchased_by as user_id, u.email, g.recipient_email, g.amount, g.certificate_to, g.certificate_from, g.certificate_message
          from ec_gift_certificates g, cc_users u
         where g.purchased_by=u.user_id
           and g.gift_certificate_id=:gift_certificate_id
    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-email-procs.xql}
dbqd.ecommerce.tcl.ecommerce-email-procs.template_select_6 {dbqd.ecommerce.tcl.ecommerce-email-procs.template_select_6 {	select subject as email_subject, message as email_body, issue_type_list
	from ec_email_templates
	where email_template_id = 6
    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-email-procs.xql}
dbqd.ecommerce.tcl.ecommerce-email-procs.gift_certificate_select_3 {dbqd.ecommerce.tcl.ecommerce-email-procs.gift_certificate_select_3 {        select g.recipient_email as email, g.amount, g.certificate_to, g.certificate_from, g.certificate_message, g.claim_check
          from ec_gift_certificates g
         where g.gift_certificate_id=:gift_certificate_id
      
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-email-procs.xql}
dbqd.ecommerce.tcl.ecommerce-email-procs.template_select_5 {dbqd.ecommerce.tcl.ecommerce-email-procs.template_select_5 {      select subject as email_subject, message as email_body, issue_type_list from ec_email_templates where email_template_id=5
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-email-procs.xql}
dbqd.ecommerce.tcl.ecommerce-email-procs.user_id_select {dbqd.ecommerce.tcl.ecommerce-email-procs.user_id_select {    select user_id
      from cc_users
     where email=lower(:email)
    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-email-procs.xql}
dbqd.ecommerce.tcl.ecommerce-email-procs.user_identification_id_select {dbqd.ecommerce.tcl.ecommerce-email-procs.user_identification_id_select {      select user_identification_id from ec_user_identification where email=lower(:email)
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-email-procs.xql}
dbqd.ecommerce.tcl.ecommerce-email-procs.user_identification_id_insert {dbqd.ecommerce.tcl.ecommerce-email-procs.user_identification_id_insert {		insert into ec_user_identification
		(user_identification_id, email)
		values
		(:user_identification_id, :trimmed_email)
	    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-email-procs.xql}
dbqd.ecommerce.tcl.ecommerce-money-computations-procs.ec_price_shipping_gift_certificate_and_tax_in_an_order.get_ec_gc_bal {dbqd.ecommerce.tcl.ecommerce-money-computations-procs.ec_price_shipping_gift_certificate_and_tax_in_an_order.get_ec_gc_bal {      select ec_gift_certificate_balance(:user_id) from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-money-computations-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-money-computations-procs.ec_price_shipping_gift_certificate_and_tax_in_an_order.get_gc_amount {dbqd.ecommerce.tcl.ecommerce-money-computations-procs.ec_price_shipping_gift_certificate_and_tax_in_an_order.get_gc_amount {      select ec_order_gift_cert_amount(:order_id) from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-money-computations-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-money-computations-procs.ec_lowest_price_and_price_name_for_an_item.get_price {dbqd.ecommerce.tcl.ecommerce-money-computations-procs.ec_lowest_price_and_price_name_for_an_item.get_price {      select price from ec_products where product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-money-computations-procs.xql}
dbqd.ecommerce.tcl.ecommerce-money-computations-procs.ec_lowest_price_and_price_name_for_an_item.get_product_infos {dbqd.ecommerce.tcl.ecommerce-money-computations-procs.ec_lowest_price_and_price_name_for_an_item.get_product_infos {        select p.price, c.user_class_name
        from ec_product_user_class_prices p, ec_user_classes c
        where p.product_id=:product_id
        and p.user_class_id=c.user_class_id
        and p.user_class_id in (select m.user_class_id from ec_user_class_user_map m where m.user_id=:user_id $additional_user_class_restriction)
    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-money-computations-procs.xql}
dbqd.ecommerce.tcl.ecommerce-money-computations-procs.ec_lowest_price_and_price_name_for_an_item.get_sale_prices {dbqd.ecommerce.tcl.ecommerce-money-computations-procs.ec_lowest_price_and_price_name_for_an_item.get_sale_prices {      select sale_price, sale_name
    from ec_sale_prices_current
    where product_id=:product_id
    and (offer_code is null $or_part_of_query)
    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-money-computations-procs.xql}
dbqd.ecommerce.tcl.ecommerce-money-computations-procs.ec_shipping_price_for_one_item.get_shipping_info {dbqd.ecommerce.tcl.ecommerce-money-computations-procs.ec_shipping_price_for_one_item.get_shipping_info {      select shipping, shipping_additional, weight from ec_products where product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-money-computations-procs.xql}
dbqd.ecommerce.tcl.ecommerce-money-computations-procs.ec_shipping_price_for_one_item.get_default_shipping_info {dbqd.ecommerce.tcl.ecommerce-money-computations-procs.ec_shipping_price_for_one_item.get_default_shipping_info {      select default_shipping_per_item, weight_shipping_cost from ec_admin_settings
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-money-computations-procs.xql}
dbqd.ecommerce.tcl.ecommerce-money-computations-procs.ec_shipping_price_for_one_item.get_first_item {dbqd.ecommerce.tcl.ecommerce-money-computations-procs.ec_shipping_price_for_one_item.get_first_item {      select min(item_id) from ec_items where product_id=:product_id and order_id:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-money-computations-procs.xql}
dbqd.ecommerce.tcl.ecommerce-money-computations-procs.ec_shipping_price_for_one_item.get_exp_info {dbqd.ecommerce.tcl.ecommerce-money-computations-procs.ec_shipping_price_for_one_item.get_exp_info {      select add_exp_amount_per_item, add_exp_amount_by_weight from ec_admin_settings
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-money-computations-procs.xql}
dbqd.ecommerce.tcl.ecommerce-money-computations-procs.ec_price_price_name_shipping_price_tax_shipping_tax_for_one_item.get_item_price {dbqd.ecommerce.tcl.ecommerce-money-computations-procs.ec_price_price_name_shipping_price_tax_shipping_tax_for_one_item.get_item_price {      select price from ec_products where product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-money-computations-procs.xql}
dbqd.ecommerce.tcl.ecommerce-money-computations-procs.ec_price_price_name_shipping_price_tax_shipping_tax_for_one_item.get_price_and_name {dbqd.ecommerce.tcl.ecommerce-money-computations-procs.ec_price_price_name_shipping_price_tax_shipping_tax_for_one_item.get_price_and_name {      select p.price, c.user_class_name
	from ec_product_user_class_prices p, ec_user_classes c
	where p.product_id=:product_id
	and p.user_class_id=c.user_class_id
	and p.user_class_id in ([join $user_class_id_list ", "])
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-money-computations-procs.xql}
dbqd.ecommerce.tcl.ecommerce-money-computations-procs.ec_lowest_price_and_price_name_for_an_item.get_sale_prices {dbqd.ecommerce.tcl.ecommerce-money-computations-procs.ec_lowest_price_and_price_name_for_an_item.get_sale_prices {      select sale_price, sale_name
    from ec_sale_prices_current
    where product_id=:product_id
    and (offer_code is null $or_part_of_query)
    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-money-computations-procs.xql}
dbqd.ecommerce.tcl.ecommerce-money-computations-procs.ec_price_price_name_shipping_price_tax_shipping_tax_for_one_item.get_shipping_costs {dbqd.ecommerce.tcl.ecommerce-money-computations-procs.ec_price_price_name_shipping_price_tax_shipping_tax_for_one_item.get_shipping_costs {      select shipping, shipping_additional, weight from ec_products where product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-money-computations-procs.xql}
dbqd.ecommerce.tcl.ecommerce-money-computations-procs.ec_price_price_name_shipping_price_tax_shipping_tax_for_one_item.get_first_instance {dbqd.ecommerce.tcl.ecommerce-money-computations-procs.ec_price_price_name_shipping_price_tax_shipping_tax_for_one_item.get_first_instance {      select min(item_id) from ec_items where product_id=:product_id and order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-money-computations-procs.xql}
dbqd.ecommerce.tcl.ecommerce-money-computations-procs.ec_price_shipping_gift_certificate_and_tax_in_an_order.get_confirmed_info {dbqd.ecommerce.tcl.ecommerce-money-computations-procs.ec_price_shipping_gift_certificate_and_tax_in_an_order.get_confirmed_info {	select confirmed_date, user_id,
	       ec_total_price(:order_id) as total_price,
	       ec_total_shipping(:order_id) as total_shipping,
	       ec_total_tax(:order_id) as total_tax
	from ec_orders
	where order_id = :order_id
    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-money-computations-procs.xql}
dbqd.ecommerce.tcl.ecommerce-procs.ec_url_mem.ec_mountpoint {dbqd.ecommerce.tcl.ecommerce-procs.ec_url_mem.ec_mountpoint {            select site_node.url(s.node_id)
              from site_nodes s, apm_packages a
             where s.object_id = a.package_id
               and a.package_key = 'ecommerce'
        
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-procs.ec_package_url_lookup_mem.ec_mountpoint {dbqd.ecommerce.tcl.ecommerce-procs.ec_package_url_lookup_mem.ec_mountpoint {            select site_node.url(s.node_id)
              from site_nodes s, apm_packages a
             where s.object_id = a.package_id
               and a.package_key = '$package_key'
        
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-procs.ec_customer_comments.product_comment_info_select {dbqd.ecommerce.tcl.ecommerce-procs.ec_customer_comments.product_comment_info_select {	select c.one_line_summary,
	       c.rating,
	       c.user_comment,
 	       to_char(c.last_modified,'Day Month DD, YYYY') as last_modified_pretty,
	       u.email,
	       u.user_id
	  from ec_product_comments c,
	       cc_users u
	 where c.user_id = u.user_id
	   and c.product_id = :product_id
	   $end_of_comment_query
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-procs.ec_add_to_cart_link.get_product_info_1 {dbqd.ecommerce.tcl.ecommerce-procs.ec_add_to_cart_link.get_product_info_1 {	select decode(sign(sysdate-available_date),1,1,null,1,0) as available_p,
               color_list, size_list, style_list, no_shipping_avail_p
          from ec_products
         where product_id = :product_id
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-procs.ec_add_to_cart_link.available_date_select {dbqd.ecommerce.tcl.ecommerce-procs.ec_add_to_cart_link.available_date_select {        select to_char(available_date,'Month DD, YYYY') available_date
          from ec_products
         where product_id = :product_id
        
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-procs.ec_order_summary_for_customer.order_info_select {dbqd.ecommerce.tcl.ecommerce-procs.ec_order_summary_for_customer.order_info_select {	select eco.confirmed_date, eco.creditcard_id, eco.shipping_method,
	       u.email,
	       eca.line1, eca.line2, eca.city, eca.usps_abbrev, eca.zip_code, eca.country_code,
	       eca.full_state_name, eca.attn, eca.phone, eca.phone_time
	  from ec_orders eco,
	       cc_users u,
	       ec_addresses eca
	 where eco.order_id = :order_id
	       and eco.user_id = u.user_id(+)
	       and eco.shipping_address = eca.address_id(+)
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-procs.ec_create_new_session_if_necessary.insert_user_session_sql {dbqd.ecommerce.tcl.ecommerce-procs.ec_create_new_session_if_necessary.insert_user_session_sql {                    insert into ec_user_sessions
                    (user_session_id, ip_address, start_time, http_user_agent)
                    values
                    (:user_session_id, :ip_address , sysdate, :http_user_agent)
                
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-procs.ec_id_mem.acs_ec_id_get {dbqd.ecommerce.tcl.ecommerce-procs.ec_id_mem.acs_ec_id_get {            select package_id from apm_packages
            where package_key = 'ecommerce'
        
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-procs.xql}
dbqd.ecommerce.tcl.ecommerce-procs.ec_category_subcategory_and_subsubcategory_display.subcategories_select {dbqd.ecommerce.tcl.ecommerce-procs.ec_category_subcategory_and_subsubcategory_display.subcategories_select {		select subcategory_id from ec_subcategories where category_id = :category_id and subcategory_id in ([join $subcategory_list ", "]) order by subcategory_name
            
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-procs.xql}
dbqd.ecommerce.tcl.ecommerce-procs.ec_category_subcategory_and_subsubcategory_display.category_name_select_1 {dbqd.ecommerce.tcl.ecommerce-procs.ec_category_subcategory_and_subsubcategory_display.category_name_select_1 {                select category_name from ec_categories where category_id = :category_id
            
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-procs.xql}
dbqd.ecommerce.tcl.ecommerce-procs.ec_category_subcategory_and_subsubcategory_display.category_name_select_2 {dbqd.ecommerce.tcl.ecommerce-procs.ec_category_subcategory_and_subsubcategory_display.category_name_select_2 {                select category_name from ec_categories where category_id = :category_id
            
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-procs.xql}
dbqd.ecommerce.tcl.ecommerce-procs.ec_category_subcategory_and_subsubcategory_display.subcategory_name_select_1 {dbqd.ecommerce.tcl.ecommerce-procs.ec_category_subcategory_and_subsubcategory_display.subcategory_name_select_1 {                    select subcategory_name from ec_subcategories where subcategory_id = :subcategory_id
                
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-procs.xql}
dbqd.ecommerce.tcl.ecommerce-procs.ec_category_subcategory_and_subsubcategory_display.subcategory_name_select_2 {dbqd.ecommerce.tcl.ecommerce-procs.ec_category_subcategory_and_subsubcategory_display.subcategory_name_select_2 {			select subsubcategory_name from ec_subsubcategories where subcategory_id = :subcategory_id and subsubcategory_id in ([join $subsubcategory_list ","]) order by subsubcategory_name
                    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-procs.xql}
dbqd.ecommerce.tcl.ecommerce-procs.ec_product_name_internal.product_name_select {dbqd.ecommerce.tcl.ecommerce-procs.ec_product_name_internal.product_name_select {	select product_name from ec_products where product_id = :product_id
    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-procs.xql}
dbqd.ecommerce.tcl.ecommerce-procs.ec_full_categorization_display.subcategory_id_select {dbqd.ecommerce.tcl.ecommerce-procs.ec_full_categorization_display.subcategory_id_select {		select subcategory_id from ec_subsubcategories where subsubcategory_id = :subsubcategory_id
	    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-procs.xql}
dbqd.ecommerce.tcl.ecommerce-procs.ec_full_categorization_display.category_id_select {dbqd.ecommerce.tcl.ecommerce-procs.ec_full_categorization_display.category_id_select {		select category_id from ec_subcategories where subcategory_id = :subcategory_id
	    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-procs.xql}
dbqd.ecommerce.tcl.ecommerce-procs.ec_full_categorization_display.category_name_select {dbqd.ecommerce.tcl.ecommerce-procs.ec_full_categorization_display.category_name_select {      select category_name from ec_categories where category_id = :category_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-procs.xql}
dbqd.ecommerce.tcl.ecommerce-procs.ec_full_categorization_display.subcategory_name_select {dbqd.ecommerce.tcl.ecommerce-procs.ec_full_categorization_display.subcategory_name_select {      select subcategory_name from ec_subcategories where subcategory_id = :subcategory_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-procs.xql}
dbqd.ecommerce.tcl.ecommerce-procs.ec_full_categorization_display.subsubcategory_name_select {dbqd.ecommerce.tcl.ecommerce-procs.ec_full_categorization_display.subsubcategory_name_select {      select subsubcategory_name from ec_subsubcategories where subsubcategory_id = :subsubcategory_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-procs.xql}
dbqd.ecommerce.tcl.ecommerce-procs.ec_full_categorization_display.category_id_select {dbqd.ecommerce.tcl.ecommerce-procs.ec_full_categorization_display.category_id_select {		select category_id from ec_subcategories where subcategory_id = :subcategory_id
	    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-procs.xql}
dbqd.ecommerce.tcl.ecommerce-procs.ec_full_categorization_display.category_name_select {dbqd.ecommerce.tcl.ecommerce-procs.ec_full_categorization_display.category_name_select {      select category_name from ec_categories where category_id = :category_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-procs.xql}
dbqd.ecommerce.tcl.ecommerce-procs.ec_full_categorization_display.subcategory_name_select {dbqd.ecommerce.tcl.ecommerce-procs.ec_full_categorization_display.subcategory_name_select {      select subcategory_name from ec_subcategories where subcategory_id = :subcategory_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-procs.xql}
dbqd.ecommerce.tcl.ecommerce-procs.ec_full_categorization_display.category_name_select {dbqd.ecommerce.tcl.ecommerce-procs.ec_full_categorization_display.category_name_select {      select category_name from ec_categories where category_id = :category_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-procs.xql}
dbqd.ecommerce.tcl.ecommerce-procs.ec_full_categorization_display.category_id_select {dbqd.ecommerce.tcl.ecommerce-procs.ec_full_categorization_display.category_id_select {	    select category_id from ec_category_product_map where product_id = :product_id
	
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-procs.xql}
dbqd.ecommerce.tcl.ecommerce-procs.ec_full_categorization_display.subcategory_id_select {dbqd.ecommerce.tcl.ecommerce-procs.ec_full_categorization_display.subcategory_id_select {		select s.subcategory_id
		  from ec_subcategory_product_map m,
		       ec_subcategories s
		 where m.subcategory_id = s.subcategory_id
		   and s.category_id = :category_id
		   and m.product_id = :product_id
	    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-procs.xql}
dbqd.ecommerce.tcl.ecommerce-procs.ec_mailing_list_link_for_a_product.subsubcategory_id_select {dbqd.ecommerce.tcl.ecommerce-procs.ec_mailing_list_link_for_a_product.subsubcategory_id_select {		select ss.subsubcategory_id
		  from ec_subsubcategory_product_map m,
		       ec_subsubcategories ss
		 where m.subsubcategory_id = ss.subsubcategory_id
		   and ss.subcategory_id = :subcategory_id
		   and m.product_id = :product_id
	    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-procs.xql}
dbqd.ecommerce.tcl.ecommerce-procs.ec_product_links_if_they_exist.product_link_info_select {dbqd.ecommerce.tcl.ecommerce-procs.ec_product_links_if_they_exist.product_link_info_select {	select p.product_id, p.product_name from ec_products_displayable p, ec_product_links l where l.product_a = :product_id and l.product_b = p.product_id
    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-procs.xql}
dbqd.ecommerce.tcl.ecommerce-procs.ec_professional_reviews_if_they_exist.professional_reviews_info_select {dbqd.ecommerce.tcl.ecommerce-procs.ec_professional_reviews_if_they_exist.professional_reviews_info_select {	select publication, author_name, review_date, review from ec_product_reviews where product_id = :product_id and display_p = 't'
    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-procs.xql}
dbqd.ecommerce.tcl.ecommerce-procs.ec_customer_comments.avg_rating_select {dbqd.ecommerce.tcl.ecommerce-procs.ec_customer_comments.avg_rating_select {            select avg(rating) from ec_product_comments where product_id = :product_id and approved_p = 't'
        
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-procs.xql}
dbqd.ecommerce.tcl.ecommerce-procs.ec_customer_comments.n_reviews_select {dbqd.ecommerce.tcl.ecommerce-procs.ec_customer_comments.n_reviews_select {            select count(*) from ec_product_comments where product_id = :product_id and (approved_p='t' [ec_decode [util_memoize {ad_parameter -package_id [ec_id] ProductCommentsNeedApprovalP ecommerce} [ec_cache_refresh]] "0" "or approved_p is null" ""])
        
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-procs.xql}
dbqd.ecommerce.tcl.ecommerce-procs.ec_navbar.category_select {dbqd.ecommerce.tcl.ecommerce-procs.ec_navbar.category_select {            select category_id, category_name from ec_categories order by sort_key
        
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-procs.xql}
dbqd.ecommerce.tcl.ecommerce-procs.ec_order_summary_for_customer.correct_user_id {dbqd.ecommerce.tcl.ecommerce-procs.ec_order_summary_for_customer.correct_user_id {	select user_id as correct_user_id from ec_orders where order_id = :order_id
    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-procs.xql}
dbqd.ecommerce.tcl.ecommerce-procs.ec_order_summary_for_customer.order_info_select {dbqd.ecommerce.tcl.ecommerce-procs.ec_order_summary_for_customer.order_info_select {	select eco.confirmed_date, eco.creditcard_id, eco.shipping_method,
	       u.email,
	       eca.line1, eca.line2, eca.city, eca.usps_abbrev, eca.zip_code, eca.country_code,
	       eca.full_state_name, eca.attn, eca.phone, eca.phone_time
	  from ec_orders eco,
	       cc_users u,
	       ec_addresses eca
	 where eco.order_id = :order_id
	       and eco.user_id = u.user_id(+)
	       and eco.shipping_address = eca.address_id(+)
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-procs.ec_order_summary_for_customer.order_details_select {dbqd.ecommerce.tcl.ecommerce-procs.ec_order_summary_for_customer.order_details_select {	select i.price_name, i.price_charged, i.color_choice, i.size_choice, i.style_choice,
	       p.product_name, p.one_line_description, p.product_id,
	       count(*) as quantity
	  from ec_items i,
	       ec_products p
	 where i.order_id = :order_id
	   and i.product_id = p.product_id
         group by p.product_name, p.one_line_description, p.product_id,
	       i.price_name, i.price_charged, i.color_choice, i.size_choice, i.style_choice
    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-procs.xql}
dbqd.ecommerce.tcl.ecommerce-procs.ec_item_summary_in_confirmed_order.item_summary_info_select {dbqd.ecommerce.tcl.ecommerce-procs.ec_item_summary_in_confirmed_order.item_summary_info_select {	select i.price_charged, i.price_name, i.color_choice, i.size_choice, i.style_choice,
	       p.product_name, p.one_line_description, p.product_id,
	       count(*) as quantity
	  from ec_items i,
	       ec_products p
	 where i.order_id = :order_id
	   and i.product_id = p.product_id
	 group by p.product_name, p.one_line_description, p.product_id,
	       i.price_charged, i.price_name, i.color_choice, i.size_choice, i.style_choice
    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-procs.xql}
dbqd.ecommerce.tcl.ecommerce-procs.ec_item_summary_in_confirmed_order.item_summary_info_select {dbqd.ecommerce.tcl.ecommerce-procs.ec_item_summary_in_confirmed_order.item_summary_info_select {	select i.price_charged, i.price_name, i.color_choice, i.size_choice, i.style_choice,
	       p.product_name, p.one_line_description, p.product_id,
	       count(*) as quantity
	  from ec_items i,
	       ec_products p
	 where i.order_id = :order_id
	   and i.product_id = p.product_id
	 group by p.product_name, p.one_line_description, p.product_id,
	       i.price_charged, i.price_name, i.color_choice, i.size_choice, i.style_choice
    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-procs.xql}
dbqd.ecommerce.tcl.ecommerce-procs.ec_items_for_fulfillment_or_return.n_items_in_an_order_select {dbqd.ecommerce.tcl.ecommerce-procs.ec_items_for_fulfillment_or_return.n_items_in_an_order_select {      select count(*) from $item_view where order_id = :order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-procs.xql}
dbqd.ecommerce.tcl.ecommerce-procs.ec_all_orders_by_one_user.all_orders_one_user_select {dbqd.ecommerce.tcl.ecommerce-procs.ec_all_orders_by_one_user.all_orders_one_user_select {	select o.order_id, o.confirmed_date, o.order_state
	  from ec_orders o
	 where o.user_id = :user_id
	 order by o.order_id
    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-procs.xql}
dbqd.ecommerce.tcl.ecommerce-procs.ec_display_product_purchase_combinations.get_pp_combs {dbqd.ecommerce.tcl.ecommerce-procs.ec_display_product_purchase_combinations.get_pp_combs {	    select * from ec_product_purchase_comb where product_id = :product_id
	
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-procs.xql}
dbqd.ecommerce.tcl.ecommerce-procs.ec_product_name_internal.product_name_select {dbqd.ecommerce.tcl.ecommerce-procs.ec_product_name_internal.product_name_select {	select product_name from ec_products where product_id = :product_id
    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-procs.xql}
dbqd.ecommerce.tcl.ecommerce-procs.ec_product_name_internal.product_name_select {dbqd.ecommerce.tcl.ecommerce-procs.ec_product_name_internal.product_name_select {	select product_name from ec_products where product_id = :product_id
    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-procs.xql}
dbqd.ecommerce.tcl.ecommerce-procs.ec_shipment_summary_sub.items_shipped_select {dbqd.ecommerce.tcl.ecommerce-procs.ec_shipment_summary_sub.items_shipped_select {	select s.shipment_date, s.carrier, s.tracking_number, s.shipment_id, s.shippable_p, count(*) as n_items
          from ec_items i,
               ec_shipments s
         where i.order_id = :order_id
	   and i.shipment_id = s.shipment_id
	   and i.product_id = :product_id
	   and i.color_choice [ec_decode $color_choice "" "is null" "= :color_choice"]
	   and i.size_choice [ec_decode $size_choice "" "is null" "= :size_choice"]
	   and i.style_choice [ec_decode $style_choice "" "is null" "= :style_choice"]
	   and i.price_charged [ec_decode $price_charged "" "is null" "= :price_charged"]
	   and i.price_name [ec_decode $price_name "" "is null" "= :price_name"]
	 group by s.shipment_date, s.carrier, s.tracking_number, s.shipment_id, s.shippable_p
    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-procs.xql}
dbqd.ecommerce.tcl.ecommerce-procs.ec_canned_response_selector.canned_response_select {dbqd.ecommerce.tcl.ecommerce-procs.ec_canned_response_selector.canned_response_select {	select response_id, one_line, response_text
	  from ec_canned_responses
	 order by one_line
    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-procs.xql}
dbqd.ecommerce.tcl.ecommerce-procs.ec_user_class_display.user_class_info_select {dbqd.ecommerce.tcl.ecommerce-procs.ec_user_class_display.user_class_info_select {	select c.user_class_name, m.user_class_approved_p, c.user_class_id
	  from ec_user_classes c, ec_user_class_user_map m
	 where m.user_id = :user_id
	   and m.user_class_id = c.user_class_id
	 order by c.user_class_id
    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-procs.xql}
dbqd.ecommerce.tcl.ecommerce-procs.ec_log_user_as_user_id_for_this_session.user_session_update {dbqd.ecommerce.tcl.ecommerce-procs.ec_log_user_as_user_id_for_this_session.user_session_update {		update ec_user_sessions 
                   set user_id = :user_id 
                 where user_session_id = :user_session_id
	    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-procs.xql}
dbqd.ecommerce.tcl.ecommerce-procs.ec_state_name_from_usps_abbrev.state_name_from_usps_abbrev {dbqd.ecommerce.tcl.ecommerce-procs.ec_state_name_from_usps_abbrev.state_name_from_usps_abbrev {	select state_name from us_states where abbrev =:usps_abbrev
    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-procs.xql}
dbqd.ecommerce.tcl.ecommerce-procs.ec_country_name_from_country_code.country_name_from_country_code {dbqd.ecommerce.tcl.ecommerce-procs.ec_country_name_from_country_code.country_name_from_country_code {	select default_name from countries where iso=:country_code
    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-procs.xql}
dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_sweep_for_cybercash_zombies.confirmed_orders_select {dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_sweep_for_cybercash_zombies.confirmed_orders_select {      select order_id, ec_order_cost(order_id) as total_order_price
      from ec_orders
      where order_state = 'confirmed' 
      and (sysdate - confirmed_date) > 1/96
  
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-scheduled-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_sweep_for_cybercash_zombies.problems_log_insert {dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_sweep_for_cybercash_zombies.problems_log_insert {		  insert into ec_problems_log
		  (problem_id, problem_date, problem_details, order_id)
		  values
		  (ec_problem_id_sequence.nextval, sysdate, :problem_details, :order_id)
	      
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-scheduled-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_sweep_for_cybercash_zombie_gift_certificates.gift_certificate_select {dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_sweep_for_cybercash_zombie_gift_certificates.gift_certificate_select {      select g.gift_certificate_id, t.transaction_id
      from ec_gift_certificates g, ec_financial_transactions t
      where g.gift_certificate_id=t.gift_certificate_id
      and g.gift_certificate_state = 'confirmed' 
      and (sysdate - g.issue_date) > 1/96
  
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-scheduled-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_sweep_for_cybercash_zombie_gift_certificates.financial_transactions_update {dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_sweep_for_cybercash_zombie_gift_certificates.financial_transactions_update {	      update ec_financial_transactions
	      set authorized_date=sysdate,
	      to_be_captured_p='t'
	      where transaction_id = :transaction_id
	  
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-scheduled-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_sweep_for_cybercash_zombie_gift_certificates.gift_certificate_state_update {dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_sweep_for_cybercash_zombie_gift_certificates.gift_certificate_state_update {	      update ec_gift_certificates
	         set authorized_date = sysdate,
	             gift_certificate_state = :cc_result
	       where gift_certificate_id = :gift_certificate_id
	  
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-scheduled-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_expire_old_carts.expired_carts_update {dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_expire_old_carts.expired_carts_update {      update ec_orders set order_state='expired', expired_date=sysdate where order_state='in_basket' and sysdate-in_basket_date > [util_memoize {ad_parameter -package_id [ec_id] CartDuration ecommerce} [ec_cache_refresh]]
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-scheduled-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_expire_old_carts.item_state_update {dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_expire_old_carts.item_state_update {      update ec_items set item_state='expired', expired_date=sysdate where item_state='in_basket' and order_id in (select order_id from ec_orders where order_state='expired')
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-scheduled-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_unauthorized_transactions.unauthorized_transactions_select {dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_unauthorized_transactions.unauthorized_transactions_select {	select transaction_id, order_id from ec_financial_transactions
	where to_be_captured_p='t'
	and sysdate-to_be_captured_date > 1/48
	and authorized_date is null
	and failed_p='f'
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-scheduled-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_unauthorized_transactions.problems_log_insert {dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_unauthorized_transactions.problems_log_insert {		 insert into ec_problems_log
                 (problem_id, problem_date, problem_details, order_id)
                 values
                (ec_problem_id_sequence.nextval, sysdate, 'invalid input to ec_creditcard_authorization in ec_unauthorized_transactions', :order_id)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-scheduled-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_unauthorized_transactions.problems_insert {dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_unauthorized_transactions.problems_insert {		insert into ec_problems_log
		(problem_id, problem_date, problem_details, order_id)
		values
		(ec_problem_id_sequence.nextval, sysdate, :problem_details, :order_id)
	    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-scheduled-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_unauthorized_transactions.transaction_success_update {dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_unauthorized_transactions.transaction_success_update {      update ec_financial_transactions set authorized_date=sysdate where transaction_id=:transaction_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-scheduled-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_unauthorized_transactions.problems_log_insert {dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_unauthorized_transactions.problems_log_insert {		    insert into ec_problems_log
		    (problem_id, problem_date, problem_details, order_id)
		    values
		    (ec_problem_id_sequence.nextval, sysdate, :problem_details, :order_id)
		
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-scheduled-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_unmarked_transactions.financial_transaction_success_update {dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_unmarked_transactions.financial_transaction_success_update {      update ec_financial_transactions set marked_date=sysdate where transaction_id=:transaction_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-scheduled-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_unauthorized_transactions.problems_log_insert {dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_unauthorized_transactions.problems_log_insert {		  insert into ec_problems_log
		  (problem_id, problem_date, problem_details, order_id)
		  values
		  (ec_problem_id_sequence.nextval, sysdate, :problem_details, :order_id)
	      
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-scheduled-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_unsettled_transactions.settled_date_update {dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_unsettled_transactions.settled_date_update {      update ec_financial_transactions set settled_date=sysdate where transaction_id=:transaction_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-scheduled-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_unsettled_transactions.two_days_since_order_was_marked_p {dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_unsettled_transactions.two_days_since_order_was_marked_p {      select case when sign(1 - ((sysdate-marked_date)/2)) = -1 then 1 else 0 end from ec_financial_transactions where transaction_id=:transaction_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-scheduled-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_unsettled_transactions.problems_log_insert {dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_unsettled_transactions.problems_log_insert {		  insert into ec_problems_log
		  (problem_id, problem_date, problem_details, order_id)
		  values
		  (ec_problem_id_sequence.nextval, sysdate, :problem_details, :order_id)
	      
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-scheduled-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_unrefunded_transactions.unrefunded_transactions_select {dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_unrefunded_transactions.unrefunded_transactions_select {	select transaction_id, order_id from ec_financial_transactions
	where transaction_type='refund'
	and sysdate - inserted_date > 1/48
	and refunded_date is null
	and failed_p='f'
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-scheduled-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_unrefunded_transactions.financial_transactions_update {dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_unrefunded_transactions.financial_transactions_update {      update ec_financial_transactions set refunded_date=sysdate where transaction_id=:transaction_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-scheduled-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_unrefunded_transactions.problems_log_insert {dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_unrefunded_transactions.problems_log_insert {		  insert into ec_problems_log
		  (problem_id, problem_date, problem_details, order_id)
		  values
		  (ec_problem_id_sequence.nextval, sysdate, :problem_details, :order_id)
	      
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-scheduled-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_unrefunded_transactions.financial_transaction_refund_update {dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_unrefunded_transactions.financial_transaction_refund_update {      update ec_financial_transactions set refunded_date=sysdate where transaction_id=:transaction_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-scheduled-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_unrefund_settled_transactions.financial_transaction_refund_settled_update {dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_unrefund_settled_transactions.financial_transaction_refund_settled_update {      update ec_financial_transactions set refund_settled_date=sysdate where transaction_id=:transaction_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-scheduled-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_unrefund_settled_transactions.two_days_since_order_was_refunded_p {dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_unrefund_settled_transactions.two_days_since_order_was_refunded_p {      select case when sign(1 - ((sysdate-refunded_date)/2)) = -1 then 1 else 0 end from ec_financial_transactions where transaction_id=:transaction_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-scheduled-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_calculate_product_purchase_combinations.problems_log_insert {dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_calculate_product_purchase_combinations.problems_log_insert {      insert into ec_problems_log
	  (problem_id, problem_date, problem_details, order_id)
	  values
	  (ec_problem_id_sequence.nextval, sysdate, :problem_details, :order_id)
	  
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-scheduled-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_calculate_product_purchase_combinations.products_select {dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_calculate_product_purchase_combinations.products_select {      select product_id from ec_products
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-scheduled-procs.xql}
dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_calculate_product_purchase_combinations.correlated_products_select {dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_calculate_product_purchase_combinations.correlated_products_select {	    select i2.product_id as correlated_product_id,
	           count(*) as n_product_occurrences
	      from ec_items i2
	     where i2.order_id in (select o2.order_id
				     from ec_orders o2
				    where o2.user_id in (select user_id
							   from ec_orders o
							  where o.order_id in (select i.order_id
									         from ec_items i
									        where product_id = :product_id)))
	       and i2.product_id <> :product_id
	     group by i2.product_id
	     order by n_product_occurrences desc
	
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-scheduled-procs.xql}
dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_calculate_product_purchase_combinations.product_purchase_comb_select {dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_calculate_product_purchase_combinations.product_purchase_comb_select {      select count(*) from ec_product_purchase_comb where product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-scheduled-procs.xql}
dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_calculate_product_purchase_combinations.product_purchase_comb_insert {dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_calculate_product_purchase_combinations.product_purchase_comb_insert {		    insert into ec_product_purchase_comb
		    (product_id, [join $insert_cols ", "])
		    values
		    (:product_id, [join $insert_vals ", "])
		
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-scheduled-procs.xql}
dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_calculate_product_purchase_combinations.product_purchase_comb_update {dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_calculate_product_purchase_combinations.product_purchase_comb_update {		    update ec_product_purchase_comb
		    set [join $update_items ", "]
		    where product_id=:product_id
		
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-scheduled-procs.xql}
dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_sweep_for_cybercash_zombies.transaction_id_select {dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_sweep_for_cybercash_zombies.transaction_id_select {	      select max(transaction_id)
	      from ec_financial_transactions
	      where order_id = :order_id
	  
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-scheduled-procs.xql}
dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_sweep_for_cybercash_zombies.avs_code_select {dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_sweep_for_cybercash_zombies.avs_code_select {		  select avs_code 
		    from ec_cybercash_log
		   where transaction_id = :transaction_id 
		     and avs_code != ''
		     and txn_attempted_time = (select MAX(txn_attempted_time)
					         from ec_cybercash_log log2
					        where log2.transaction_id = :transaction_id)
	      
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-scheduled-procs.xql}
dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_sweep_for_cybercash_zombies.order_state_update {dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_sweep_for_cybercash_zombies.order_state_update {      update ec_orders set order_state=:new_order_state where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-scheduled-procs.xql}
dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_sweep_for_cybercash_zombie_gift_certificates.transaction_id_select {dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_sweep_for_cybercash_zombie_gift_certificates.transaction_id_select {      select transaction_id from ec_financial_transactions where gift_certificate_id=:gift_certificate_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-scheduled-procs.xql}
dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_sweep_for_cybercash_zombie_gift_certificates.financial_transactions_update_1 {dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_sweep_for_cybercash_zombie_gift_certificates.financial_transactions_update_1 {      update ec_financial_transactions set failed_p='t', to_be_captured_p='f' where transaction_id=:transaction_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-scheduled-procs.xql}
dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_sweep_for_cybercash_zombie_gift_certificates.gift_certificate_state_update_1 {dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_sweep_for_cybercash_zombie_gift_certificates.gift_certificate_state_update_1 {      update ec_gift_certificates set gift_certificate_state='failed_authorization' where gift_certificate_id=:gift_certificate_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-scheduled-procs.xql}
dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_send_unsent_new_order_email.unsent_orders_select {dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_send_unsent_new_order_email.unsent_orders_select {	select order_id
	from ec_orders o
	where (order_state='authorized_plus_avs' or order_state='authorized_minus_avs')
	and (0=(select count(*) from ec_automatic_email_log log where log.order_id=o.order_id and email_template_id=1))
    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-scheduled-procs.xql}
dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_send_unsent_new_gift_certificate_order_email.unsent_gift_certificate_email {dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_send_unsent_new_gift_certificate_order_email.unsent_gift_certificate_email {	select gift_certificate_id
	from ec_gift_certificates g
	where (gift_certificate_state='authorized_plus_avs' or gift_certificate_state='authorized_minus_avs')
	and (0=(select count(*) from ec_automatic_email_log log where log.gift_certificate_id=g.gift_certificate_id and email_template_id=4))
    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-scheduled-procs.xql}
dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_send_unsent_gift_certificate_recipient_email.unsent_gift_certificate_select {dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_send_unsent_gift_certificate_recipient_email.unsent_gift_certificate_select {	select gift_certificate_id
	from ec_gift_certificates g
	where (gift_certificate_state='authorized_plus_avs' or gift_certificate_state='authorized_minus_avs')
	and (0=(select count(*) from ec_automatic_email_log log where log.gift_certificate_id=g.gift_certificate_id and email_template_id=5))
    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-scheduled-procs.xql}
dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_delayed_credit_denied.denied_orders_select {dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_delayed_credit_denied.denied_orders_select {      select order_id from ec_orders where order_state='failed_authorization'
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-scheduled-procs.xql}
dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_delayed_credit_denied.order_state_update {dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_delayed_credit_denied.order_state_update {      update ec_orders set order_state='in_basket', saved_p='t' where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-scheduled-procs.xql}
dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_remove_creditcard_data.creditcard_update {dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_remove_creditcard_data.creditcard_update {	    update ec_creditcards
	    set creditcard_number=null
	    where creditcard_id in (select unique c.creditcard_id
				    from ec_creditcards c, ec_orders o
				    where c.creditcard_id = o.creditcard_id
				    and c.creditcard_number is not null
				    and 0=(select count(*)
					   from ec_orders o2
					   where o2.creditcard_id=c.creditcard_id
					   and o2.order_state not in ('fulfilled','returned','void','expired')))
	
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-scheduled-procs.xql}
dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_unauthorized_transactions.transaction_failed_update {dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_unauthorized_transactions.transaction_failed_update {      update ec_financial_transactions set failed_p='t' where transaction_id=:transaction_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-scheduled-procs.xql}
dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_unmarked_transactions.unmarked_transactions_select {dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_unmarked_transactions.unmarked_transactions_select {	select transaction_id, order_id from ec_financial_transactions
	where to_be_captured_p='t'
	and authorized_date is not null
	and marked_date is null
	and failed_p='f'
    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-scheduled-procs.xql}
dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_unmarked_transactions.financial_transaction_failed_update {dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_unmarked_transactions.financial_transaction_failed_update {      update ec_financial_transactions set failed_p='t' where transaction_id=:transaction_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-scheduled-procs.xql}
dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_unmarked_transactions.financial_transactions_update {dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_unmarked_transactions.financial_transactions_update {      financial_transactions set marked_date=sysdate where transaction_id=:transaction_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-scheduled-procs.xql}
dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_unsettled_transactions.unsettled_transactions_select {dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_unsettled_transactions.unsettled_transactions_select {	select transaction_id, order_id from ec_financial_transactions
	where marked_date is not null
	and settled_date is null
	and failed_p='f'
    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-scheduled-procs.xql}
dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_unsettled_transactions.transaction_failed_update {dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_unsettled_transactions.transaction_failed_update {      update ec_financial_transactions set failed_p='t' where transaction_id=:transaction_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-scheduled-procs.xql}
dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_unmarked_transactions.financial_transaction_failed_update {dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_unmarked_transactions.financial_transaction_failed_update {      update ec_financial_transactions set failed_p='t' where transaction_id=:transaction_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-scheduled-procs.xql}
dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_unrefund_settled_transactions.unrefund_settled_transactions_select {dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_unrefund_settled_transactions.unrefund_settled_transactions_select {      select transaction_id, order_id from ec_financial_transactions
  where refunded_date is not null
  and refund_settled_date is null
  and failed_p='f'
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-scheduled-procs.xql}
dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_unauthorized_transactions.transaction_failed_update {dbqd.ecommerce.tcl.ecommerce-scheduled-procs.ec_unauthorized_transactions.transaction_failed_update {      update ec_financial_transactions set failed_p='t' where transaction_id=:transaction_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-scheduled-procs.xql}
dbqd.ecommerce.tcl.ecommerce-state-changes-procs.ec_update_state_to_in_basket.reinst_gift_cert_on_order {dbqd.ecommerce.tcl.ecommerce-state-changes-procs.ec_update_state_to_in_basket.reinst_gift_cert_on_order {      declare begin ec_reinst_gift_cert_on_order (:order_id); end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-state-changes-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-state-changes-procs.ec_update_state_to_authorized.order_cost_select {dbqd.ecommerce.tcl.ecommerce-state-changes-procs.ec_update_state_to_authorized.order_cost_select {      select ec_order_cost(:order_id) from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-state-changes-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-state-changes-procs.ec_update_state_to_authorized.order_state_update {dbqd.ecommerce.tcl.ecommerce-state-changes-procs.ec_update_state_to_authorized.order_state_update {      update ec_orders set order_state=:new_state, authorized_date=sysdate where order_id=:order_id                                                                   } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-state-changes-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-state-changes-procs.ec_update_state_to_authorized.authorized_date_update {dbqd.ecommerce.tcl.ecommerce-state-changes-procs.ec_update_state_to_authorized.authorized_date_update {      update ec_financial_transactions set authorized_date=sysdate where transaction_id=:transaction_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-state-changes-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-state-changes-procs.ec_update_state_to_confirmed.order_state_update {dbqd.ecommerce.tcl.ecommerce-state-changes-procs.ec_update_state_to_confirmed.order_state_update {      update ec_orders set order_state='confirmed', confirmed_date=sysdate where order_id=:order_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-state-changes-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-state-changes-procs.ec_update_state_to_confirmed.total_amount_select {dbqd.ecommerce.tcl.ecommerce-state-changes-procs.ec_update_state_to_confirmed.total_amount_select {      select ec_order_cost(:order_id) from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-state-changes-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-state-changes-procs.ec_update_state_to_confirmed.financial_transaction_insert {dbqd.ecommerce.tcl.ecommerce-state-changes-procs.ec_update_state_to_confirmed.financial_transaction_insert {      insert into ec_financial_transactions
    (transaction_id, order_id, transaction_amount, transaction_type, inserted_date)
    values
    (:transaction_id, :order_id, :total_amount, 'charge', sysdate)
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-state-changes-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-state-changes-procs.ec_apply_gift_certificate_balance.certificates_to_use_select {dbqd.ecommerce.tcl.ecommerce-state-changes-procs.ec_apply_gift_certificate_balance.certificates_to_use_select {  select gift_certificate_id
  from ec_gift_certificates_approved
  where user_id=:user_id
  and sysdate - expires < 0
  and amount_remaining_p = 't'
  order by expires
  
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-state-changes-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-state-changes-procs.ec_apply_gift_certificate_balance.gift_certificate_balance_select {dbqd.ecommerce.tcl.ecommerce-state-changes-procs.ec_apply_gift_certificate_balance.gift_certificate_balance_select {      select ec_gift_certificate_balance(:user_id) from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-state-changes-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-state-changes-procs.ec_apply_gift_certificate_balance.amount_owed_select {dbqd.ecommerce.tcl.ecommerce-state-changes-procs.ec_apply_gift_certificate_balance.amount_owed_select {      select ec_order_amount_owed(:order_id) from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-state-changes-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-state-changes-procs.ec_apply_gift_certificate_balance.gift_certificate_amount_left_select {dbqd.ecommerce.tcl.ecommerce-state-changes-procs.ec_apply_gift_certificate_balance.gift_certificate_amount_left_select {      select gift_certificate_amount_left(:gift_certificate_id) from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-state-changes-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-state-changes-procs.ec_apply_gift_certificate_balance.gift_certificate_usage_insert {dbqd.ecommerce.tcl.ecommerce-state-changes-procs.ec_apply_gift_certificate_balance.gift_certificate_usage_insert {      insert into ec_gift_certificate_usage
      (gift_certificate_id, order_id, amount_used, used_date)
      VALUES
	(:gift_certificate_id, :order_id, least(to_number(:gift_certificate_amount_left),
        to_number(:amount_owed)), sysdate)
        
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-state-changes-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-state-changes-procs.ec_apply_gift_certificate_balance.gift_certificate_balance_select {dbqd.ecommerce.tcl.ecommerce-state-changes-procs.ec_apply_gift_certificate_balance.gift_certificate_balance_select {      select ec_gift_certificate_balance(:user_id) from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-state-changes-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-state-changes-procs.ec_apply_gift_certificate_balance.amount_owed_select {dbqd.ecommerce.tcl.ecommerce-state-changes-procs.ec_apply_gift_certificate_balance.amount_owed_select {      select ec_order_amount_owed(:order_id) from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-state-changes-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-state-changes-procs.ec_update_state_to_in_basket.credit_user_select {dbqd.ecommerce.tcl.ecommerce-state-changes-procs.ec_update_state_to_in_basket.credit_user_select {      select creditcard_id, user_id from ec_orders where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-state-changes-procs.xql}
dbqd.ecommerce.tcl.ecommerce-state-changes-procs.ec_update_state_to_in_basket.order_state_update {dbqd.ecommerce.tcl.ecommerce-state-changes-procs.ec_update_state_to_in_basket.order_state_update {      update ec_orders set order_state='in_basket', confirmed_date=null where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-state-changes-procs.xql}
dbqd.ecommerce.tcl.ecommerce-state-changes-procs.ec_update_state_to_in_basket.creditcard_update {dbqd.ecommerce.tcl.ecommerce-state-changes-procs.ec_update_state_to_in_basket.creditcard_update {      update ec_creditcards set failed_p='t' where creditcard_id=:creditcard_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-state-changes-procs.xql}
dbqd.ecommerce.tcl.ecommerce-state-changes-procs.ec_update_state_to_authorized.transaction_select {dbqd.ecommerce.tcl.ecommerce-state-changes-procs.ec_update_state_to_authorized.transaction_select {      select max(transaction_id) from ec_financial_transactions where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-state-changes-procs.xql}
dbqd.ecommerce.tcl.ecommerce-state-changes-procs.ec_update_state_to_in_basket.order_state_update {dbqd.ecommerce.tcl.ecommerce-state-changes-procs.ec_update_state_to_in_basket.order_state_update {      update ec_orders set order_state='in_basket', confirmed_date=null where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-state-changes-procs.xql}
dbqd.ecommerce.tcl.ecommerce-state-changes-procs.ec_update_state_to_authorized.set_to_be_shipped {dbqd.ecommerce.tcl.ecommerce-state-changes-procs.ec_update_state_to_authorized.set_to_be_shipped {      update ec_items set item_state='to_be_shipped' where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-state-changes-procs.xql}
dbqd.ecommerce.tcl.ecommerce-state-changes-procs.ec_update_state_to_confirmed.user_id_select {dbqd.ecommerce.tcl.ecommerce-state-changes-procs.ec_update_state_to_confirmed.user_id_select {      select user_id from ec_orders where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-state-changes-procs.xql}
dbqd.ecommerce.tcl.ecommerce-state-changes-procs.ec_update_state_to_in_basket.order_state_update {dbqd.ecommerce.tcl.ecommerce-state-changes-procs.ec_update_state_to_in_basket.order_state_update {      update ec_orders set order_state='in_basket', confirmed_date=null where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-state-changes-procs.xql}
dbqd.ecommerce.tcl.ecommerce-styles-procs.get_cat_id {dbqd.ecommerce.tcl.ecommerce-styles-procs.get_cat_id {      select category_id from ec_categories where category_name = :category
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-styles-procs.xql}
dbqd.ecommerce.tcl.ecommerce-styles-procs.get_cat_id {dbqd.ecommerce.tcl.ecommerce-styles-procs.get_cat_id {      select category_id from ec_categories where category_name = :category
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-styles-procs.xql}
dbqd.ecommerce.tcl.ecommerce-user-contributions-summary-procs.ecommerce_user_contributions.get_gift_certificate_balances {dbqd.ecommerce.tcl.ecommerce-user-contributions-summary-procs.ecommerce_user_contributions.get_gift_certificate_balances {      select ec_gift_certificate_balance(:user_id) from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-user-contributions-summary-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-user-contributions-summary-procs.ecommerce_user_contributions.get_addresses {dbqd.ecommerce.tcl.ecommerce-user-contributions-summary-procs.ecommerce_user_contributions.get_addresses {      select address_id
from ec_addresses where user_id = :user_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-user-contributions-summary-procs.xql}
dbqd.ecommerce.tcl.ecommerce-user-contributions-summary-procs.ecommerce_user_contributions.get_product_reviews_for_user {dbqd.ecommerce.tcl.ecommerce-user-contributions-summary-procs.ecommerce_user_contributions.get_product_reviews_for_user {      select c.comment_id, p.product_name, comment_date
    from ec_product_comments c, ec_products p
    where c.product_id = p.product_id
    and user_id = :user_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-user-contributions-summary-procs.xql}
dbqd.ecommerce.tcl.ecommerce-utilities-procs.ec_best_price.get_min_price {dbqd.ecommerce.tcl.ecommerce-utilities-procs.ec_best_price.get_min_price {      select min(price) from ec_offers where product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-utilities-procs.xql}
dbqd.ecommerce.tcl.ecommerce-utilities-procs.ec_savings.get_retailprice {dbqd.ecommerce.tcl.ecommerce-utilities-procs.ec_savings.get_retailprice {      select retailprice from ec_custom_product_field_values where product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-utilities-procs.xql}
dbqd.ecommerce.tcl.ecommerce-utilities-procs.ec_savings.get_best_price {dbqd.ecommerce.tcl.ecommerce-utilities-procs.ec_savings.get_best_price {      select min(price) from ec_offers where product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-utilities-procs.xql}
dbqd.ecommerce.tcl.ecommerce-utilities-procs.ec_user_identification_summary.get_row_exists {dbqd.ecommerce.tcl.ecommerce-utilities-procs.ec_user_identification_summary.get_row_exists {      select user_id,first_names,last_name,email,other_id_info,postal_code from ec_user_identification where user_identification_id=:user_identification_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-utilities-procs.xql}
dbqd.ecommerce.tcl.ecommerce-utilities-procs.ec_user_identification_summary.get_user_name {dbqd.ecommerce.tcl.ecommerce-utilities-procs.ec_user_identification_summary.get_user_name {      select first_names || ' ' || last_name from cc_users where user_id=:user_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-utilities-procs.xql}
dbqd.ecommerce.tcl.ecommerce-utilities-procs.ec_pretty_mailing_address_from_ec_addresses.get_row_exists_p {dbqd.ecommerce.tcl.ecommerce-utilities-procs.ec_pretty_mailing_address_from_ec_addresses.get_row_exists_p {      select line1, line2, city, usps_abbrev, zip_code, country_code, full_state_name, attn, phone, phone_time from ec_addresses where address_id=:address_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-utilities-procs.xql}
dbqd.ecommerce.tcl.ecommerce-utilities-procs.ec_creditcard_summary.get_creditcard_summary {dbqd.ecommerce.tcl.ecommerce-utilities-procs.ec_creditcard_summary.get_creditcard_summary {      select creditcard_type, creditcard_last_four, creditcard_expire, billing_zip_code from ec_creditcards where creditcard_id=:creditcard_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-utilities-procs.xql}
dbqd.ecommerce.tcl.ecommerce-utilities-procs.ec_country_name_from_country_code.country_name {dbqd.ecommerce.tcl.ecommerce-utilities-procs.ec_country_name_from_country_code.country_name {      select default_name from countries where iso=:country_code
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-utilities-procs.xql}
dbqd.ecommerce.tcl.ecommerce-utilities-procs.ec_order_status.get_shippable_p {dbqd.ecommerce.tcl.ecommerce-utilities-procs.ec_order_status.get_shippable_p {      select case when shipping_method = 'no shipping' then 0 else 1 end as shippable_p from ec_orders where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-utilities-procs.xql}
dbqd.ecommerce.tcl.ecommerce-utilities-procs.ec_gift_certificate_status.get_gift_certificate_info {dbqd.ecommerce.tcl.ecommerce-utilities-procs.ec_gift_certificate_status.get_gift_certificate_info {      select 
    gift_certificate_state, user_id
    from ec_gift_certificates
    where gift_certificate_id=:gift_certificate_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-utilities-procs.xql}
dbqd.ecommerce.tcl.ecommerce-widgets-procs.ec_gift_certificate_expires_widget.now {dbqd.ecommerce.tcl.ecommerce-widgets-procs.ec_gift_certificate_expires_widget.now {      sysdate
    } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-widgets-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-widgets-procs.ec_date_widget.date_widget_select {dbqd.ecommerce.tcl.ecommerce-widgets-procs.ec_date_widget.date_widget_select {      select to_char(sysdate, 'YYYY-MM-DD') from dual
    } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-widgets-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-widgets-procs.ec_time_widget.time_widget_select {dbqd.ecommerce.tcl.ecommerce-widgets-procs.ec_time_widget.time_widget_select {      select to_char(sysdate, 'HH24:MI:SS') from dual
    } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-widgets-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-widgets-procs.ec_category_widget.get_category_info_joined_w_children {dbqd.ecommerce.tcl.ecommerce-widgets-procs.ec_category_widget.get_category_info_joined_w_children {      select c.category_id, c.category_name,
      s.subcategory_id, s.subcategory_name,
      ss.subsubcategory_id, ss.subsubcategory_name
      from ec_categories c, ec_subcategories s, ec_subsubcategories ss
      where c.category_id = s.category_id (+)
      and s.subcategory_id = ss.subcategory_id (+)
      order by c.sort_key, s.sort_key, ss.sort_key
    } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-widgets-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-widgets-procs.ec_mailing_list_widget.get_category_children {dbqd.ecommerce.tcl.ecommerce-widgets-procs.ec_mailing_list_widget.get_category_children {      select c.category_id, c.category_name, s.subcategory_id, s.subcategory_name, ss.subsubcategory_id, ss.subsubcategory_name
      from ec_categories c, ec_subcategories s, ec_subsubcategories ss, ec_cat_mailing_lists m
      where m.category_id=c.category_id(+)
      and m.subcategory_id=s.subcategory_id(+)
      and m.subsubcategory_id=ss.subsubcategory_id(+)
      order by decode(c.category_id, null, 0, c.sort_key), decode(s.subcategory_id, null, 0, s.sort_key), decode(ss.subcategory_id, null, 0, ss.sort_key)
    } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-widgets-procs-oracle.xql}
dbqd.ecommerce.tcl.ecommerce-widgets-procs.ec_only_category_widget.get_ec_categories {dbqd.ecommerce.tcl.ecommerce-widgets-procs.ec_only_category_widget.get_ec_categories {      select category_id, category_name from ec_categories order by category_name
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-widgets-procs.xql}
dbqd.ecommerce.tcl.ecommerce-widgets-procs.ec_combocategory_widget.get_combocategories {dbqd.ecommerce.tcl.ecommerce-widgets-procs.ec_combocategory_widget.get_combocategories {      select s.category_id, s.subcategory_id, category_name, subcategory_name from ec_categories c, ec_subcategories s where c.category_id=s.category_id order by s.category_id, s.subcategory_id
    } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-widgets-procs.xql}
dbqd.ecommerce.tcl.ecommerce-widgets-procs.ec_subcategory_widget.get_subcats_by_name {dbqd.ecommerce.tcl.ecommerce-widgets-procs.ec_subcategory_widget.get_subcats_by_name {      select subcategory_id, subcategory_name from ec_subcategories where category_id=:category_id order by subcategory_name
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-widgets-procs.xql}
dbqd.ecommerce.tcl.ecommerce-widgets-procs.ec_subcategory_with_subsubcategories_widget.get_subcategory_ids {dbqd.ecommerce.tcl.ecommerce-widgets-procs.ec_subcategory_with_subsubcategories_widget.get_subcategory_ids {      select subcategory_id from ec_subcategories where category_id=:category_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-widgets-procs.xql}
dbqd.ecommerce.tcl.ecommerce-widgets-procs.ec_subcategory_with_subsubcategories_widget.get_subcategory_names {dbqd.ecommerce.tcl.ecommerce-widgets-procs.ec_subcategory_with_subsubcategories_widget.get_subcategory_names {      select subcategory_name from ec_subcategories where subcategory_id=:subcategory_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-widgets-procs.xql}
dbqd.ecommerce.tcl.ecommerce-widgets-procs.ec_determine_categorization_widget_defaults.get_sub_list {dbqd.ecommerce.tcl.ecommerce-widgets-procs.ec_determine_categorization_widget_defaults.get_sub_list {      select subcategory_id from ec_subcategories where category_id=:category_id and subcategory_id in ([join $subcategory_list ","]) order by subcategory_name
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-widgets-procs.xql}
dbqd.ecommerce.tcl.ecommerce-widgets-procs.ec_determine_categorization_widget_defaults.get_subsub_list {dbqd.ecommerce.tcl.ecommerce-widgets-procs.ec_determine_categorization_widget_defaults.get_subsub_list {      select subsubcategory_id from ec_subsubcategories where subcategory_id=:subcategory_id and subsubcategory_id in ([join $subsubcategory_list ","]) order by subsubcategory_name
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-widgets-procs.xql}
dbqd.ecommerce.tcl.ecommerce-widgets-procs.ec_issue_type_widget.get_picklist_items {dbqd.ecommerce.tcl.ecommerce-widgets-procs.ec_issue_type_widget.get_picklist_items {      select picklist_item from ec_picklist_items where picklist_name='issue_type' order by sort_key
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-widgets-procs.xql}
dbqd.ecommerce.tcl.ecommerce-widgets-procs.ec_info_used_widget.get_info_used_list {dbqd.ecommerce.tcl.ecommerce-widgets-procs.ec_info_used_widget.get_info_used_list {      select picklist_item from ec_picklist_items where picklist_name='info_used' order by sort_key
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-widgets-procs.xql}
dbqd.ecommerce.tcl.ecommerce-widgets-procs.ec_interaction_type_widget.get_interaction_type_list {dbqd.ecommerce.tcl.ecommerce-widgets-procs.ec_interaction_type_widget.get_interaction_type_list {    select picklist_item
      from ec_picklist_items
     where picklist_name='interaction_type'
  order by sort_key
    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/tcl/ecommerce-widgets-procs.xql}
dbqd.ecommerce.www.account.get_gift_certificate_balance {dbqd.ecommerce.www.account.get_gift_certificate_balance {      select ec_gift_certificate_balance(:user_id) from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/account-oracle.xql}
dbqd.ecommerce.www.account.get_user_view_classes {dbqd.ecommerce.www.account.get_user_view_classes {      select 1 from dual where exists (select 1 from ec_user_classes)
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/account-oracle.xql}
dbqd.ecommerce.www.account.get_mailing_lists {dbqd.ecommerce.www.account.get_mailing_lists {      select 
 ml.category_id, 
 c.category_name,
 ml.subcategory_id, 
 s.subcategory_name, 
 ml.subsubcategory_id,
 ss.subsubcategory_name
from ec_cat_mailing_lists ml, 
 ec_categories c,
 ec_subcategories s,
 ec_subsubcategories ss
where ml.user_id = :user_id
and ml.category_id = c.category_id(+)
and ml.subcategory_id = s.subcategory_id(+)
and ml.subsubcategory_id = ss.subsubcategory_id(+)
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/account-oracle.xql}
dbqd.ecommerce.www.account.get_orders {dbqd.ecommerce.www.account.get_orders {      select order_id, confirmed_date from ec_orders
where user_id=:user_id
and order_state not in ('in_basket','void','expired')
order by order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/account.xql}
dbqd.ecommerce.www.account.get_gift_certificates {dbqd.ecommerce.www.account.get_gift_certificates {      select 
gift_certificate_id, issue_date, amount
from ec_gift_certificates
where purchased_by=:user_id
and gift_certificate_state in ('authorized','authorized_plus_avs','authorized_minus_avs', 'confirmed')
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/account.xql}
dbqd.ecommerce.www.account.get_mailing_lists {dbqd.ecommerce.www.account.get_mailing_lists {      select 
 ml.category_id, 
 c.category_name,
 ml.subcategory_id, 
 s.subcategory_name, 
 ml.subsubcategory_id,
 ss.subsubcategory_name
from ec_cat_mailing_lists ml, 
 ec_categories c,
 ec_subcategories s,
 ec_subsubcategories ss
where ml.user_id = :user_id
and ml.category_id = c.category_id(+)
and ml.subcategory_id = s.subcategory_id(+)
and ml.subsubcategory_id = ss.subsubcategory_id(+)
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/account-oracle.xql}
dbqd.ecommerce.www.admin.audit-table.select_one {dbqd.ecommerce.www.admin.audit-table.select_one {    select 1
      from dual
     where to_date('$start_date(date)','YYYY-MM-DD HH24:MI:SS')  > to_date('$end_date(date)', 'YYYY-MM-DD HH24:MI:SS')
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/audit-table-oracle.xql}
dbqd.ecommerce.www.admin.cat.category-add-0.get_n_conflicts {dbqd.ecommerce.www.admin.cat.category-add-0.get_n_conflicts {      select count(*)
from ec_categories
where sort_key = :sort_key
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/cat/category-add-0.xql}
dbqd.ecommerce.www.admin.cat.category-add-2.insert_into_ec_categories {dbqd.ecommerce.www.admin.cat.category-add-2.insert_into_ec_categories {      insert into ec_categories
(category_id, category_name, sort_key, last_modified, last_modifying_user, modified_ip_address)
values
(:category_id, :category_name, :sort_key, sysdate, :user_id, :peeraddr)
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/cat/category-add-2-oracle.xql}
dbqd.ecommerce.www.admin.cat.category-add-2.get_category_confirmation {dbqd.ecommerce.www.admin.cat.category-add-2.get_category_confirmation {      select category_id from ec_categories
where category_id=:category_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/cat/category-add-2.xql}
dbqd.ecommerce.www.admin.cat.category-add-2.get_n_conflicts {dbqd.ecommerce.www.admin.cat.category-add-2.get_n_conflicts {      select count(*)
from ec_categories
where sort_key = :sort_key
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/cat/category-add-2.xql}
dbqd.ecommerce.www.admin.cat.category-add.get_n_conflicts {dbqd.ecommerce.www.admin.cat.category-add.get_n_conflicts {      select count(*)
from ec_categories
where sort_key = :sort_key
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/cat/category-add.xql}
dbqd.ecommerce.www.admin.cat.category-delete-2.get_subcategory_list {dbqd.ecommerce.www.admin.cat.category-delete-2.get_subcategory_list {      select subsubcategory_id from ec_subsubcategories where subcategory_id in (select subcategory_id from ec_subcategories where category_id=:category_id)
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/cat/category-delete-2.xql}
dbqd.ecommerce.www.admin.cat.category-delete-2.get_subcategory_list_2 {dbqd.ecommerce.www.admin.cat.category-delete-2.get_subcategory_list_2 {      select subcategory_id from ec_subcategories where category_id=:category_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/cat/category-delete-2.xql}
dbqd.ecommerce.www.admin.cat.category-delete-2.delete_ec_subcat_map {dbqd.ecommerce.www.admin.cat.category-delete-2.delete_ec_subcat_map {      delete from ec_subsubcategory_product_map 
where subsubcategory_id in (select subsubcategory_id from ec_subsubcategories where subcategory_id in (select subcategory_id from ec_subcategories where category_id=:category_id))
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/cat/category-delete-2.xql}
dbqd.ecommerce.www.admin.cat.category-delete-2.delete_ec_subcats {dbqd.ecommerce.www.admin.cat.category-delete-2.delete_ec_subcats {      delete from ec_subsubcategories where subcategory_id in (select subcategory_id from ec_subcategories where category_id=:category_id)
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/cat/category-delete-2.xql}
dbqd.ecommerce.www.admin.cat.category-delete-2.delete_ec_subcat_map_1 {dbqd.ecommerce.www.admin.cat.category-delete-2.delete_ec_subcat_map_1 {      delete from ec_subcategory_product_map
where subcategory_id in (select subcategory_id from ec_subcategories where category_id=:category_id)
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/cat/category-delete-2.xql}
dbqd.ecommerce.www.admin.cat.category-delete-2.delete_ec_subcats {dbqd.ecommerce.www.admin.cat.category-delete-2.delete_ec_subcats {      delete from ec_subsubcategories where subcategory_id in (select subcategory_id from ec_subcategories where category_id=:category_id)
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/cat/category-delete-2.xql}
dbqd.ecommerce.www.admin.cat.category-delete-2.delete_ec_cat_prodmap {dbqd.ecommerce.www.admin.cat.category-delete-2.delete_ec_cat_prodmap {      delete from ec_category_product_map where category_id=:category_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/cat/category-delete-2.xql}
dbqd.ecommerce.www.admin.cat.category-delete-2.delete_ec_cat_templates {dbqd.ecommerce.www.admin.cat.category-delete-2.delete_ec_cat_templates {      delete from ec_category_template_map where category_id=:category_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/cat/category-delete-2.xql}
dbqd.ecommerce.www.admin.cat.category-delete-2.delete_from_session_info {dbqd.ecommerce.www.admin.cat.category-delete-2.delete_from_session_info {      delete from ec_user_session_info where category_id=:category_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/cat/category-delete-2.xql}
dbqd.ecommerce.www.admin.cat.category-delete-2.delete_ec_categories {dbqd.ecommerce.www.admin.cat.category-delete-2.delete_ec_categories {      delete from ec_categories where category_id=:category_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/cat/category-delete-2.xql}
dbqd.ecommerce.www.admin.cat.category-edit.update_ec_categories {dbqd.ecommerce.www.admin.cat.category-edit.update_ec_categories {      update ec_categories
set category_name=:category_name,
last_modified=sysdate,
last_modifying_user=:user_id,
modified_ip_address=:address
where category_id=:category_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/cat/category-edit-oracle.xql}
dbqd.ecommerce.www.admin.cat.category-swap.get_item_match_count {dbqd.ecommerce.www.admin.cat.category-swap.get_item_match_count {      select count(*) from ec_categories where category_id=:category_id and sort_key=:sort_key
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/cat/category-swap.xql}
dbqd.ecommerce.www.admin.cat.category-swap.get_next_item_match_count {dbqd.ecommerce.www.admin.cat.category-swap.get_next_item_match_count {      select count(*) from ec_categories where category_id=:next_category_id and sort_key=:next_sort_key
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/cat/category-swap.xql}
dbqd.ecommerce.www.admin.cat.category-swap.update_swap_cat_1 {dbqd.ecommerce.www.admin.cat.category-swap.update_swap_cat_1 {      update ec_categories set sort_key=:next_sort_key where category_id=:category_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/cat/category-swap.xql}
dbqd.ecommerce.www.admin.cat.category-swap.update_swap_cat_2 {dbqd.ecommerce.www.admin.cat.category-swap.update_swap_cat_2 {      update ec_categories set sort_key=:sort_key where category_id=:next_category_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/cat/category-swap.xql}
dbqd.ecommerce.www.admin.cat.category.get_subcat_info_loop {dbqd.ecommerce.www.admin.cat.category.get_subcat_info_loop {      select subcategory_id, sort_key, subcategory_name from ec_subcategories where category_id=:category_id order by sort_key
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/cat/category.xql}
dbqd.ecommerce.www.admin.cat.index.get_categories_loop {dbqd.ecommerce.www.admin.cat.index.get_categories_loop {      select category_id, sort_key, category_name from ec_categories order by sort_key
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/cat/index.xql}
dbqd.ecommerce.www.admin.cat.subcategory-add-0.get_n_conflicts {dbqd.ecommerce.www.admin.cat.subcategory-add-0.get_n_conflicts {      select count(*)
from ec_subcategories
where category_id=:category_id
and sort_key = :sort_key
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/cat/subcategory-add-0.xql}
dbqd.ecommerce.www.admin.cat.subcategory-add-2.ec_subcat_insert {dbqd.ecommerce.www.admin.cat.subcategory-add-2.ec_subcat_insert {      insert into ec_subcategories
    (category_id, subcategory_id, subcategory_name, sort_key, last_modified, last_modifying_user, modified_ip_address)
    values
    (:category_id, :subcategory_id, :subcategory_name, :sort_key, sysdate, :user_id, :address)
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/cat/subcategory-add-2-oracle.xql}
dbqd.ecommerce.www.admin.cat.subcategory-add-2.sub_id_select {dbqd.ecommerce.www.admin.cat.subcategory-add-2.sub_id_select {      select subcategory_id from ec_subcategories
where subcategory_id=:subcategory_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/cat/subcategory-add-2.xql}
dbqd.ecommerce.www.admin.cat.subcategory-add-2.get_n_conflicts {dbqd.ecommerce.www.admin.cat.subcategory-add-2.get_n_conflicts {      select count(*)
from ec_subcategories
where category_id=:category_id
and sort_key = :sort_key
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/cat/subcategory-add-2.xql}
dbqd.ecommerce.www.admin.cat.subcategory-add.get_n_conflicts {dbqd.ecommerce.www.admin.cat.subcategory-add.get_n_conflicts {      select count(*)
from ec_subcategories
where category_id=:category_id
and sort_key = :sort_key
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/cat/subcategory-add.xql}
dbqd.ecommerce.www.admin.cat.subcategory-delete-2.get_subsublist {dbqd.ecommerce.www.admin.cat.subcategory-delete-2.get_subsublist {      select subsubcategory_id from ec_subsubcategories where subcategory_id=:subcategory_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/cat/subcategory-delete-2.xql}
dbqd.ecommerce.www.admin.cat.subcategory-delete-2.delete_from_subsubmap {dbqd.ecommerce.www.admin.cat.subcategory-delete-2.delete_from_subsubmap {      delete from ec_subsubcategory_product_map 
    where subsubcategory_id in (select subsubcategory_id from ec_subsubcategories where subcategory_id=:subcategory_id)
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/cat/subcategory-delete-2.xql}
dbqd.ecommerce.www.admin.cat.subcategory-delete-2.delete_from_ecsubsub {dbqd.ecommerce.www.admin.cat.subcategory-delete-2.delete_from_ecsubsub {      delete from ec_subsubcategories where subcategory_id=:subcategory_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/cat/subcategory-delete-2.xql}
dbqd.ecommerce.www.admin.cat.subcategory-delete-2.delete_from_ec_sub_map {dbqd.ecommerce.www.admin.cat.subcategory-delete-2.delete_from_ec_sub_map {      delete from ec_subcategory_product_map where subcategory_id=:subcategory_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/cat/subcategory-delete-2.xql}
dbqd.ecommerce.www.admin.cat.subcategory-delete-2.delete_from_ec_subcats {dbqd.ecommerce.www.admin.cat.subcategory-delete-2.delete_from_ec_subcats {      delete from ec_subcategories where subcategory_id=:subcategory_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/cat/subcategory-delete-2.xql}
dbqd.ecommerce.www.admin.cat.subcategory-edit.update_ec_subcats {dbqd.ecommerce.www.admin.cat.subcategory-edit.update_ec_subcats {      update ec_subcategories
set subcategory_name=:subcategory_name,
last_modified=sysdate,
last_modifying_user=:user_id,
modified_ip_address=:address
where subcategory_id=:subcategory_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/cat/subcategory-edit-oracle.xql}
dbqd.ecommerce.www.admin.cat.subcategory-swap.get_item_match {dbqd.ecommerce.www.admin.cat.subcategory-swap.get_item_match {      select count(*) from ec_subcategories where subcategory_id=:subcategory_id and sort_key=:sort_key
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/cat/subcategory-swap.xql}
dbqd.ecommerce.www.admin.cat.subcategory-swap.get_next_item_match {dbqd.ecommerce.www.admin.cat.subcategory-swap.get_next_item_match {      select count(*) from ec_subcategories where subcategory_id=:next_subcategory_id and sort_key=:next_sort_key
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/cat/subcategory-swap.xql}
dbqd.ecommerce.www.admin.cat.subcategory-swap.update_swap_subcat {dbqd.ecommerce.www.admin.cat.subcategory-swap.update_swap_subcat {      update ec_subcategories set sort_key=:next_sort_key where subcategory_id=:subcategory_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/cat/subcategory-swap.xql}
dbqd.ecommerce.www.admin.cat.subcategory-swap.update_swap_subcat_2 {dbqd.ecommerce.www.admin.cat.subcategory-swap.update_swap_subcat_2 {      update ec_subcategories set sort_key=:sort_key where subcategory_id=:next_subcategory_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/cat/subcategory-swap.xql}
dbqd.ecommerce.www.admin.cat.subcategory.get_subcategory_infos {dbqd.ecommerce.www.admin.cat.subcategory.get_subcategory_infos {      select subsubcategory_id, sort_key, subsubcategory_name from ec_subsubcategories where subcategory_id=:subcategory_id order by sort_key
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/cat/subcategory.xql}
dbqd.ecommerce.www.admin.cat.subsubcategory-add-0.get_n_conflicts {dbqd.ecommerce.www.admin.cat.subsubcategory-add-0.get_n_conflicts {      select count(*)
from ec_subsubcategories
where subcategory_id=:subcategory_id
and sort_key = :sort_key
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/cat/subsubcategory-add-0.xql}
dbqd.ecommerce.www.admin.cat.subsubcategory-add-2.insert_ec_subsubcat {dbqd.ecommerce.www.admin.cat.subsubcategory-add-2.insert_ec_subsubcat {      insert into ec_subsubcategories
(subcategory_id, subsubcategory_id, subsubcategory_name, sort_key, last_modified, last_modifying_user, modified_ip_address)
values
(:subcategory_id, :subsubcategory_id, :subsubcategory_name, :sort_key, sysdate, :user_id,:address)
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/cat/subsubcategory-add-2-oracle.xql}
dbqd.ecommerce.www.admin.cat.subsubcategory-add-2.get_subcat_id {dbqd.ecommerce.www.admin.cat.subsubcategory-add-2.get_subcat_id {      select subsubcategory_id from ec_subsubcategories
where subsubcategory_id=:subsubcategory_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/cat/subsubcategory-add-2.xql}
dbqd.ecommerce.www.admin.cat.subsubcategory-add-2.get_n_conflicts {dbqd.ecommerce.www.admin.cat.subsubcategory-add-2.get_n_conflicts {      select count(*)
from ec_subsubcategories
where subcategory_id=:subcategory_id
and sort_key = :sort_key
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/cat/subsubcategory-add-2.xql}
dbqd.ecommerce.www.admin.cat.subsubcategory-add.get_n_conflicts {dbqd.ecommerce.www.admin.cat.subsubcategory-add.get_n_conflicts {      select count(*)
from ec_subsubcategories
where subcategory_id=:subcategory_id
and sort_key = :sort_key
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/cat/subsubcategory-add.xql}
dbqd.ecommerce.www.admin.cat.subsubcategory-delete-2.delete_subsub_map {dbqd.ecommerce.www.admin.cat.subsubcategory-delete-2.delete_subsub_map {      delete from ec_subsubcategory_product_map where subsubcategory_id=:subsubcategory_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/cat/subsubcategory-delete-2.xql}
dbqd.ecommerce.www.admin.cat.subsubcategory-delete-2.delete_subsubcats {dbqd.ecommerce.www.admin.cat.subsubcategory-delete-2.delete_subsubcats {      delete from ec_subsubcategories where subsubcategory_id = :subsubcategory_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/cat/subsubcategory-delete-2.xql}
dbqd.ecommerce.www.admin.cat.subsubcategory-edit.update_subsubcategory {dbqd.ecommerce.www.admin.cat.subsubcategory-edit.update_subsubcategory {      update ec_subsubcategories
set subsubcategory_name=:subsubcategory_name,
last_modified=sysdate,
last_modifying_user=:user_id,
modified_ip_address=:address
where subsubcategory_id=:subsubcategory_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/cat/subsubcategory-edit-oracle.xql}
dbqd.ecommerce.www.admin.cat.subsubcategory-swap.get_item_match_no {dbqd.ecommerce.www.admin.cat.subsubcategory-swap.get_item_match_no {      select count(*) from ec_subsubcategories where subsubcategory_id=:subsubcategory_id and sort_key=:sort_key
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/cat/subsubcategory-swap.xql}
dbqd.ecommerce.www.admin.cat.subsubcategory-swap.get_next_item_match {dbqd.ecommerce.www.admin.cat.subsubcategory-swap.get_next_item_match {      select count(*) from ec_subsubcategories where subsubcategory_id=:next_subsubcategory_id and sort_key=:next_sort_key
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/cat/subsubcategory-swap.xql}
dbqd.ecommerce.www.admin.cat.subsubcategory-swap.update_ec_subsubcat {dbqd.ecommerce.www.admin.cat.subsubcategory-swap.update_ec_subsubcat {      update ec_subsubcategories set sort_key=:next_sort_key where subsubcategory_id=:subsubcategory_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/cat/subsubcategory-swap.xql}
dbqd.ecommerce.www.admin.cat.subsubcategory-swap.update_ec_subsubcat_2 {dbqd.ecommerce.www.admin.cat.subsubcategory-swap.update_ec_subsubcat_2 {      update ec_subsubcategories set sort_key=:sort_key where subsubcategory_id=:next_subsubcategory_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/cat/subsubcategory-swap.xql}
dbqd.ecommerce.www.admin.customer-reviews.approval-change.update_set_approved_satus {dbqd.ecommerce.www.admin.customer-reviews.approval-change.update_set_approved_satus {      update ec_product_comments set 
approved_p=:approved_p,
last_modified = sysdate,
last_modifying_user = :user_id,
modified_ip_address = '[ns_conn peeraddr]'
where comment_id=:comment_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-reviews/approval-change-oracle.xql}
dbqd.ecommerce.www.admin.customer-reviews.one.get_product_info {dbqd.ecommerce.www.admin.customer-reviews.one.get_product_info {      select c.product_id, c.user_id, c.user_comment, c.one_line_summary, c.rating, p.product_name, u.email, c.comment_date, c.approved_p
from ec_product_comments c, ec_products p, cc_users u
where c.product_id = p.product_id
and c. user_id = u.user_id 
and c.comment_id=:comment_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-reviews/one.xql}
dbqd.ecommerce.www.admin.customer-service.actions.none_sql {dbqd.ecommerce.www.admin.customer-service.actions.none_sql {select a.action_id, a.interaction_id, a.issue_id,
           i.interaction_date, i.customer_service_rep, i.interaction_originator, i.interaction_type,
           to_char(i.interaction_date,'YYYY-MM-DD HH24:MI:SS') as full_interaction_date,
           reps.first_names as rep_first_names, reps.last_name as rep_last_name,
           i.user_identification_id, customer_info.user_id as customer_user_id,
           customer_info.first_names as customer_first_names, customer_info.last_name as customer_last_name
      from ec_customer_service_actions a, ec_customer_serv_interactions i, cc_users reps,
           (select id.user_identification_id, id.user_id, u2.first_names, u2.last_name
              from ec_user_identification id, cc_users u2
             where id.user_id=u2.user_id(+)) customer_info
     where a.interaction_id = i.interaction_id
       and i.user_identification_id=customer_info.user_identification_id
       and i.customer_service_rep=reps.user_id(+)
       and 0 = (select count(*) from ec_cs_action_info_used_map map where map.action_id=a.action_id)
           $interaction_date_query_bit $rep_query_bit
  order by $order_by

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/actions-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.actions.all_others_sql {dbqd.ecommerce.www.admin.customer-service.actions.all_others_sql {      select a.action_id, a.interaction_id, a.issue_id,
           i.interaction_date, i.customer_service_rep, i.user_identification_id, i.interaction_originator, i.interaction_type,
           to_char(i.interaction_date,'YYYY-MM-DD HH24:MI:SS') as full_interaction_date,
           reps.first_names as rep_first_names, reps.last_name as rep_last_name,
           customer_info.user_id as customer_user_id, customer_info.first_names as customer_first_names, customer_info.last_name as customer_last_name
      from ec_customer_service_actions a, ec_customer_serv_interactions i, ec_cs_action_info_used_map map, cc_users reps,
           (select id.user_identification_id, id.user_id, u2.first_names, u2.last_name
              from ec_user_identification id, cc_users u2
             where id.user_id=u2.user_id(+)) customer_info
     where a.interaction_id = i.interaction_id
       and i.user_identification_id=customer_info.user_identification_id
       and a.action_id=map.action_id
       and i.customer_service_rep=reps.user_id(+) $info_used_query_bit
           $interaction_date_query_bit $rep_query_bit
  order by $order_by

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/actions-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.actions.default_sql {dbqd.ecommerce.www.admin.customer-service.actions.default_sql {      select a.action_id, a.interaction_id, a.issue_id,
             i.interaction_date, i.customer_service_rep, i.user_identification_id, i.interaction_originator, i.interaction_type,
             to_char(i.interaction_date,'YYYY-MM-DD HH24:MI:SS') as full_interaction_date,
             reps.first_names as rep_first_names, reps.last_name as rep_last_name,
             customer_info.user_id as customer_user_id, customer_info.first_names as customer_first_names, customer_info.last_name as customer_last_name
       from ec_customer_service_actions a, ec_customer_serv_interactions i, ec_cs_action_info_used_map map, cc_users reps,
            (select id.user_identification_id, id.user_id, u2.first_names, u2.last_name
               from ec_user_identification id, cc_users u2
              where id.user_id=u2.user_id(+)) customer_info
      where a.interaction_id = i.interaction_id
        and i.user_identification_id=customer_info.user_identification_id
        and reps.user_id=i.customer_service_rep
        and a.action_id=map.action_id
        and map.info_used=:view_info_used
           $interaction_date_query_bit $rep_query_bit
  order by $order_by


      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/actions-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.actions.last_24 {dbqd.ecommerce.www.admin.customer-service.actions.last_24 {      and sysdate-i.interaction_date <= 1

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/actions-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.actions.last_week {dbqd.ecommerce.www.admin.customer-service.actions.last_week {      and sysdate-i.interaction_date <= 7

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/actions-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.actions.last_month {dbqd.ecommerce.www.admin.customer-service.actions.last_month {      and months_between(sysdate,i.interaction_date) <= 1

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/actions-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.actions.get_picklist_items {dbqd.ecommerce.www.admin.customer-service.actions.get_picklist_items {  select picklist_item
    from ec_picklist_items
   where picklist_name='info_used'
order by sort_key

      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/actions.xql}
dbqd.ecommerce.www.admin.customer-service.actions.get_customer_service_data_sql {dbqd.ecommerce.www.admin.customer-service.actions.get_customer_service_data_sql {select i.customer_service_rep as rep, u.first_names as rep_first_names, u.last_name as rep_last_name
    from ec_customer_serv_interactions i, cc_users u
   where i.customer_service_rep=u.user_id
group by i.customer_service_rep, u.first_names, u.last_name
order by u.last_name, u.first_names

      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/actions.xql}
dbqd.ecommerce.www.admin.customer-service.active-toggle.update_customer_service_table {dbqd.ecommerce.www.admin.customer-service.active-toggle.update_customer_service_table {      update $table_name
set active_p=:active_p
where $primary_key_name=:primary_key_value
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/active-toggle.xql}
dbqd.ecommerce.www.admin.customer-service.canned-response-add-2.get_response_id {dbqd.ecommerce.www.admin.customer-service.canned-response-add-2.get_response_id {      select response_id from ec_canned_responses where one_line = :one_line
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/canned-response-add-2.xql}
dbqd.ecommerce.www.admin.customer-service.canned-response-add-2.insert_new_canned_response {dbqd.ecommerce.www.admin.customer-service.canned-response-add-2.insert_new_canned_response {      insert into ec_canned_responses (response_id, one_line, response_text)
values (ec_canned_response_id_sequence.nextval, :one_line, :response_text)
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/canned-response-add-2.xql}
dbqd.ecommerce.www.admin.customer-service.canned-response-delete-2.delete_a_canned_response {dbqd.ecommerce.www.admin.customer-service.canned-response-delete-2.delete_a_canned_response {      delete from ec_canned_responses where response_id = :response_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/canned-response-delete-2.xql}
dbqd.ecommerce.www.admin.customer-service.canned-response-delete.get_response_info {dbqd.ecommerce.www.admin.customer-service.canned-response-delete.get_response_info {      select one_line, response_text
from ec_canned_responses
where response_id = :response_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/canned-response-delete.xql}
dbqd.ecommerce.www.admin.customer-service.canned-response-edit-2.update_cs_canned_response {dbqd.ecommerce.www.admin.customer-service.canned-response-edit-2.update_cs_canned_response {      update ec_canned_responses
set one_line = :one_line, response_text = :response_text
where response_id = :response_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/canned-response-edit-2.xql}
dbqd.ecommerce.www.admin.customer-service.canned-response-edit.get_response_info {dbqd.ecommerce.www.admin.customer-service.canned-response-edit.get_response_info {      select one_line, response_text
from ec_canned_responses
where response_id = :response_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/canned-response-edit.xql}
dbqd.ecommerce.www.admin.customer-service.customer-search.user_id_sql {dbqd.ecommerce.www.admin.customer-service.customer-search.user_id_sql {      select unique o.user_id, u.first_names, u.last_name, u.email
      from ec_orders o, cc_users u
      where o.user_id=u.user_id
      and o.order_state not in ('void','in_basket')
      and sysdate - o.confirmed_date <= :days
      and :amount <= (select sum(i.price_charged) from ec_items i where i.order_id=o.order_id and (i.item_state is null or i.item_state not in ('void','received_back')))

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/customer-search-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.email-send-2.insert_new_cs_interaction {dbqd.ecommerce.www.admin.customer-service.email-send-2.insert_new_cs_interaction {      insert into ec_customer_serv_interactions
(interaction_id, customer_service_rep, user_identification_id, interaction_date, interaction_originator, interaction_type)
values
(:interaction_id, :customer_service_rep, :user_identification_id, sysdate, 'rep', 'email')

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/email-send-2-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.email-send-2.check_csa_doubleclick {dbqd.ecommerce.www.admin.customer-service.email-send-2.check_csa_doubleclick {      select count(*) from ec_customer_service_actions where action_id=:action_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/email-send-2.xql}
dbqd.ecommerce.www.admin.customer-service.email-send-2.insert_new_action_into_actions {dbqd.ecommerce.www.admin.customer-service.email-send-2.insert_new_action_into_actions {      insert into ec_customer_service_actions
(action_id, issue_id, interaction_id, action_details)
values
(:action_id, :issue_id, :interaction_id, :action_details)

      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/email-send-2.xql}
dbqd.ecommerce.www.admin.customer-service.email-send.get_user_information {dbqd.ecommerce.www.admin.customer-service.email-send.get_user_information {      select u.email as user_email, id.email as id_email
      from cc_users u, ec_user_identification id
      where id.user_id = u.user_id(+)
      and id.user_identification_id=:user_identification_id
    } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/email-send-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.email-send.get_full_name {dbqd.ecommerce.www.admin.customer-service.email-send.get_full_name {      select first_names || ' ' || last_name 
      from cc_users 
      where user_id=:customer_service_rep
    } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/email-send.xql}
dbqd.ecommerce.www.admin.customer-service.gift-certificate-add-2.insert_new_ec_gift_cert {dbqd.ecommerce.www.admin.customer-service.gift-certificate-add-2.insert_new_ec_gift_cert {      insert into ec_gift_certificates
(gift_certificate_id, user_id, amount, expires, issue_date, issued_by, gift_certificate_state, last_modified, last_modifying_user, modified_ip_address)
values
(ec_gift_cert_id_sequence.nextval, :user_id, :amount, :expires_to_insert, sysdate, :customer_service_rep, 'authorized', sysdate, :customer_service_rep, address)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/gift-certificate-add-2-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.gift-certificate-add.get_exipre_from_Db {dbqd.ecommerce.www.admin.customer-service.gift-certificate-add.get_exipre_from_Db {      select [ec_decode $expires "" "null" $expires] from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/gift-certificate-add-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.gift-certificate-add.get_full_name {dbqd.ecommerce.www.admin.customer-service.gift-certificate-add.get_full_name {      select first_names || ' ' || last_name from cc_users where user_id=:user_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/gift-certificate-add.xql}
dbqd.ecommerce.www.admin.customer-service.gift-certificate-edit.update_ec_gc_info {dbqd.ecommerce.www.admin.customer-service.gift-certificate-edit.update_ec_gc_info {      update ec_gift_certificates
set expires=sysdate, last_modified=sysdate, last_modifying_user=:customer_service_rep, 
modified_ip_address= :address
where gift_certificate_id=:gift_certificate_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/gift-certificate-edit-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.gift-certificate-void-2.update_void_gift_c {dbqd.ecommerce.www.admin.customer-service.gift-certificate-void-2.update_void_gift_c {      update ec_gift_certificates set gift_certificate_state='void', voided_date=sysdate, voided_by=:customer_service_rep, reason_for_void=:reason_for_void where gift_certificate_id=:gift_certificate_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/gift-certificate-void-2-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.gift-certificate-void-2.get_the_user_id {dbqd.ecommerce.www.admin.customer-service.gift-certificate-void-2.get_the_user_id {      select user_id from ec_gift_certificates where gift_certificate_id=:gift_certificate_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/gift-certificate-void-2.xql}
dbqd.ecommerce.www.admin.customer-service.gift-certificates.get_pretty_price {dbqd.ecommerce.www.admin.customer-service.gift-certificates.get_pretty_price {      select ec_gift_certificate_balance(:user_id) from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/gift-certificates-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.gift-certificates.get_customer_info {dbqd.ecommerce.www.admin.customer-service.gift-certificates.get_customer_info {      select first_names || ' ' || last_name from cc_users where user_id=:user_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/gift-certificates.xql}
dbqd.ecommerce.www.admin.customer-service.index.get_open_issues {dbqd.ecommerce.www.admin.customer-service.index.get_open_issues {      select count(*) 
from ec_customer_service_issues issues, ec_user_identification id
where issues.user_identification_id = id.user_identification_id
and close_date is NULL 
and deleted_p = 'f'
and 0 = (select count(*) from ec_cs_issue_type_map map where map.issue_id=issues.issue_id)
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/index.xql}
dbqd.ecommerce.www.admin.customer-service.index.get_issue_type_list {dbqd.ecommerce.www.admin.customer-service.index.get_issue_type_list {      select picklist_item from ec_picklist_items where picklist_name='issue_type' order by sort_key
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/index.xql}
dbqd.ecommerce.www.admin.customer-service.index.get_open_issues_of_type {dbqd.ecommerce.www.admin.customer-service.index.get_open_issues_of_type {      select count(*) 
from ec_customer_service_issues issues, ec_user_identification id
where issues.user_identification_id = id.user_identification_id
and close_date is NULL 
and deleted_p = 'f'
and 1 <= (select count(*) from ec_cs_issue_type_map map where map.issue_id=issues.issue_id and map.issue_type=:issue_type)
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/index.xql}
dbqd.ecommerce.www.admin.customer-service.index.get_num_open_issues_2 {dbqd.ecommerce.www.admin.customer-service.index.get_num_open_issues_2 {      select count(*) 
from ec_customer_service_issues issues, ec_user_identification id
where issues.user_identification_id = id.user_identification_id
and close_date is NULL 
and deleted_p = 'f'
$last_bit_of_query
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/index.xql}
dbqd.ecommerce.www.admin.customer-service.interaction-add-2.select_time {dbqd.ecommerce.www.admin.customer-service.interaction-add-2.select_time {      select to_char(sysdate, 'YYYY-MM-DD HH24:MI:SS') from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/interaction-add-2-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.interaction-add-2.get_order_id {dbqd.ecommerce.www.admin.customer-service.interaction-add-2.get_order_id {      select order_id from ec_customer_service_issues where issue_id=:issue_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/interaction-add-2.xql}
dbqd.ecommerce.www.admin.customer-service.interaction-add-2.get_issue_type_list {dbqd.ecommerce.www.admin.customer-service.interaction-add-2.get_issue_type_list {      select issue_type from ec_cs_issue_type_map where issue_id=:issue_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/interaction-add-2.xql}
dbqd.ecommerce.www.admin.customer-service.interaction-add-2.get_does_row_exist_p {dbqd.ecommerce.www.admin.customer-service.interaction-add-2.get_does_row_exist_p {      select first_names as d_first_names, last_name as d_last_name, user_id as d_user_id from cc_users where email =lower(:email)
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/interaction-add-2.xql}
dbqd.ecommerce.www.admin.customer-service.interaction-add-3.get_interaction_date {dbqd.ecommerce.www.admin.customer-service.interaction-add-3.get_interaction_date {      select to_char(interaction_date, 'YYYY-MM-DD HH24:MI:SS') as open_date_str from ec_customer_serv_interactions where interaction_id=:interaction_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/interaction-add-3-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.interaction-add-3.date_string_sql {dbqd.ecommerce.www.admin.customer-service.interaction-add-3.date_string_sql {      to_date(:open_date_str,'YYYY-MM-DD HH24:MI:SS')

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/interaction-add-3-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.interaction-add-3.customer_service_rep_bit_null_sql {dbqd.ecommerce.www.admin.customer-service.interaction-add-3.customer_service_rep_bit_null_sql {      null

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/interaction-add-3-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.interaction-add-3.close_date_null_sql {dbqd.ecommerce.www.admin.customer-service.interaction-add-3.close_date_null_sql {      null                                                                      
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/interaction-add-3-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.interaction-add-3.insert_new_ec_cs_issue {dbqd.ecommerce.www.admin.customer-service.interaction-add-3.insert_new_ec_cs_issue {      insert into ec_customer_service_issues
      (issue_id, user_identification_id, order_id, open_date, close_date, closed_by)
      values
      (:issue_id, :uiid_to_insert, :order_id, $date_string, $close_date, $customer_service_rep_bit)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/interaction-add-3-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.interaction-add-3.get_service_action_count {dbqd.ecommerce.www.admin.customer-service.interaction-add-3.get_service_action_count {      select count(*) from ec_customer_service_actions where action_id=:action_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/interaction-add-3.xql}
dbqd.ecommerce.www.admin.customer-service.interaction-add-3.get_user_id_info {dbqd.ecommerce.www.admin.customer-service.interaction-add-3.get_user_id_info {      select i.user_identification_id as c_user_identification_id, a.interaction_id
	from ec_customer_service_actions a, ec_customer_serv_interactions i
	where i.interaction_id=a.interaction_id
	and a.action_id=:action_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/interaction-add-3.xql}
dbqd.ecommerce.www.admin.customer-service.interaction-add-3.get_user_issue_id_info {dbqd.ecommerce.www.admin.customer-service.interaction-add-3.get_user_issue_id_info {      select u.user_id as issue_user_id, u.user_identification_id as issue_user_identification_id
    from ec_user_identification u, ec_customer_service_issues i
    where u.user_identification_id = i.user_identification_id
    and i.issue_id=:issue_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/interaction-add-3.xql}
dbqd.ecommerce.www.admin.customer-service.interaction-add-3.get_full_name {dbqd.ecommerce.www.admin.customer-service.interaction-add-3.get_full_name {      select first_names || ' ' || last_name from cc_users where user_id=:issue_user_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/interaction-add-3.xql}
dbqd.ecommerce.www.admin.customer-service.interaction-add-3.get_user_id {dbqd.ecommerce.www.admin.customer-service.interaction-add-3.get_user_id {      select user_id from ec_user_identification where user_identification_id=:c_user_identification_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/interaction-add-3.xql}
dbqd.ecommerce.www.admin.customer-service.interaction-add-3.get_full_name {dbqd.ecommerce.www.admin.customer-service.interaction-add-3.get_full_name {      select first_names || ' ' || last_name from cc_users where user_id=:issue_user_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/interaction-add-3.xql}
dbqd.ecommerce.www.admin.customer-service.interaction-add-3.get_order_owner {dbqd.ecommerce.www.admin.customer-service.interaction-add-3.get_order_owner {      select user_id as order_user_id from ec_orders where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/interaction-add-3.xql}
dbqd.ecommerce.www.admin.customer-service.interaction-add-3.get_user_name {dbqd.ecommerce.www.admin.customer-service.interaction-add-3.get_user_name {      select first_names || ' ' || last_name from cc_users where user_id=:order_user_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/interaction-add-3.xql}
dbqd.ecommerce.www.admin.customer-service.interaction-add-3.get_user_id_user {dbqd.ecommerce.www.admin.customer-service.interaction-add-3.get_user_id_user {      select user_id from ec_user_identification where user_identification_id=:c_user_identification_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/interaction-add-3.xql}
dbqd.ecommerce.www.admin.customer-service.interaction-add-3.get_uiid_to_insert {dbqd.ecommerce.www.admin.customer-service.interaction-add-3.get_uiid_to_insert {      select user_identification_id as uiid_to_insert from ec_user_identification where user_id=:d_user_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/interaction-add-3.xql}
dbqd.ecommerce.www.admin.customer-service.interaction-add-3.insert_new_uiid {dbqd.ecommerce.www.admin.customer-service.interaction-add-3.insert_new_uiid {      insert into ec_user_identification
	    (user_identification_id, user_id, email, first_names, last_name, postal_code, other_id_info)
	    values
	    (:uiid_to_insert, :user_id_to_insert, :email,:first_names,:last_name,:postal_code,:other_id_info)
	    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/interaction-add-3.xql}
dbqd.ecommerce.www.admin.customer-service.interaction-add-3.insert_new_cs_interaction {dbqd.ecommerce.www.admin.customer-service.interaction-add-3.insert_new_cs_interaction {      insert into ec_customer_serv_interactions
    (interaction_id, customer_service_rep, user_identification_id, interaction_date, interaction_originator, interaction_type)
    values
    (:interaction_id, :customer_service_rep, :uiid_to_insert, $date_string, :interaction_originator, [ec_decode $interaction_type "other" ":interaction_type_other" ":interaction_type"])
    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/interaction-add-3.xql}
dbqd.ecommerce.www.admin.customer-service.interaction-add-3.insert_into_issue_tm {dbqd.ecommerce.www.admin.customer-service.interaction-add-3.insert_into_issue_tm {      insert into ec_cs_issue_type_map
	(issue_id, issue_type)
	values
	(:issue_id, :issue_type)
	
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/interaction-add-3.xql}
dbqd.ecommerce.www.admin.customer-service.interaction-add-3.insert_new_ec_service_action {dbqd.ecommerce.www.admin.customer-service.interaction-add-3.insert_new_ec_service_action {      insert into ec_customer_service_actions
(action_id, issue_id, interaction_id, action_details, follow_up_required)
values
(:action_id, :issue_id, :interaction_id, :action_details,:follow_up_required)

      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/interaction-add-3.xql}
dbqd.ecommerce.www.admin.customer-service.interaction-add-3.insert_into_cs_action_info_map {dbqd.ecommerce.www.admin.customer-service.interaction-add-3.insert_into_cs_action_info_map {      insert into ec_cs_action_info_used_map
    (action_id, info_used)
    values
    (:action_id, :info_used)
    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/interaction-add-3.xql}
dbqd.ecommerce.www.admin.customer-service.interaction-add.get_full_name {dbqd.ecommerce.www.admin.customer-service.interaction-add.get_full_name {      select first_names || ' ' || last_name from cc_users where user_id=:customer_service_rep
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/interaction-add.xql}
dbqd.ecommerce.www.admin.customer-service.interaction.get_one_interaction_info {dbqd.ecommerce.www.admin.customer-service.interaction.get_one_interaction_info {      select user_identification_id, customer_service_rep, to_char(interaction_date,'YYYY-MM-DD HH24:MI:SS') as full_interaction_date, interaction_originator, interaction_type, interaction_headers from ec_customer_serv_interactions where interaction_id=:interaction_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/interaction-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.interaction-summary.get_full_name {dbqd.ecommerce.www.admin.customer-service.interaction-summary.get_full_name {      select first_names || ' ' || last_name from cc_users where user_id=:user_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/interaction-summary.xql}
dbqd.ecommerce.www.admin.customer-service.interactions.get_interation_originator_list {dbqd.ecommerce.www.admin.customer-service.interactions.get_interation_originator_list {      select unique interaction_originator from ec_customer_serv_interactions 

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/interactions-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.interactions.get_customer_interaction_detail {dbqd.ecommerce.www.admin.customer-service.interactions.get_customer_interaction_detail {      select i.interaction_id, i.customer_service_rep, i.interaction_date,            to_char(i.interaction_date,'YYYY-MM-DD HH24:MI:SS') as full_interaction_date, i.interaction_originator,                                                         i.interaction_type, i.user_identification_id, reps.first_names as rep_first_names,                                                                              reps.last_name as rep_last_name, customer_info.user_identification_id,
      customer_info.user_id as customer_user_id, customer_info.first_names as customer_first_names,                                                                   customer_info.last_name as customer_last_name
      from ec_customer_serv_interactions i, cc_users reps,
      (select id.user_identification_id, id.user_id, u2.first_names, u2.last_name from ec_user_identification id, cc_users u2 where id.user_id=u2.user_id(+)) customer_info                                                                           where i.customer_service_rep=reps.user_id(+)
      and i.user_identification_id=customer_info.user_identification_id
      $rep_query_bit $interaction_originator_query_bit $interaction_type_query_bit $interaction_date_query_bit                                                        order by $order_by

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/interactions-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.interactions.last_24 {dbqd.ecommerce.www.admin.customer-service.interactions.last_24 {      and sysdate-i.interaction_date <= 1

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/interactions-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.interactions.last_week {dbqd.ecommerce.www.admin.customer-service.interactions.last_week {      and sysdate-i.interaction_date <= 7

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/interactions-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.interactions.last_month {dbqd.ecommerce.www.admin.customer-service.interactions.last_month {      and months_between(sysdate,i.interaction_date) <= 1

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/interactions-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.interactions.get_interaction_type_list {dbqd.ecommerce.www.admin.customer-service.interactions.get_interaction_type_list {      select picklist_item from ec_picklist_items where picklist_name='interaction_type' order by sort_key
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/interactions.xql}
dbqd.ecommerce.www.admin.customer-service.interactions.get_rep_info_by_rep_sql {dbqd.ecommerce.www.admin.customer-service.interactions.get_rep_info_by_rep_sql {      select i.customer_service_rep as rep, u.first_names as rep_first_names, 
      u.last_name as rep_last_name 
      from ec_customer_serv_interactions i, cc_users u 
      where i.customer_service_rep=u.user_id
      group by i.customer_service_rep, u.first_names, u.last_name 
      order by u.last_name, u.first_names

      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/interactions.xql}
dbqd.ecommerce.www.admin.customer-service.issue-edit-2.delete_from_issue_type_map {dbqd.ecommerce.www.admin.customer-service.issue-edit-2.delete_from_issue_type_map {      delete from ec_cs_issue_type_map where issue_id=:issue_id
    } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/issue-edit-2.xql}
dbqd.ecommerce.www.admin.customer-service.issue-edit-2.insert_into_type_map {dbqd.ecommerce.www.admin.customer-service.issue-edit-2.insert_into_type_map {      insert into ec_cs_issue_type_map (issue_id, issue_type) values (:issue_id,:issue_type)
    } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/issue-edit-2.xql}
dbqd.ecommerce.www.admin.customer-service.issue-edit.get_issue_types {dbqd.ecommerce.www.admin.customer-service.issue-edit.get_issue_types {      select issue_type from ec_cs_issue_type_map where issue_id=:issue_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/issue-edit.xql}
dbqd.ecommerce.www.admin.customer-service.issue-edit.get_user_name {dbqd.ecommerce.www.admin.customer-service.issue-edit.get_user_name {      select first_names || ' ' || last_name from cc_users where user_id=:customer_service_rep
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/issue-edit.xql}
dbqd.ecommerce.www.admin.customer-service.issue-open-or-close-2.update_service_issue {dbqd.ecommerce.www.admin.customer-service.issue-open-or-close-2.update_service_issue {      update ec_customer_service_issues set close_date=sysdate, closed_by=:customer_service_rep where issue_id=:issue_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/issue-open-or-close-2-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.issue-open-or-close-2.update_service_issue_state {dbqd.ecommerce.www.admin.customer-service.issue-open-or-close-2.update_service_issue_state {      update ec_customer_service_issues set close_date=null where issue_id=:issue_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/issue-open-or-close-2.xql}
dbqd.ecommerce.www.admin.customer-service.issue-open-or-close.get_user_name {dbqd.ecommerce.www.admin.customer-service.issue-open-or-close.get_user_name {      select first_names || ' ' || last_name from cc_users where user_id=:customer_service_rep
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/issue-open-or-close.xql}
dbqd.ecommerce.www.admin.customer-service.issue.get_user_info {dbqd.ecommerce.www.admin.customer-service.issue.get_user_info {      select i.user_identification_id, i.order_id, i.closed_by, i.deleted_p, i.open_date, i.close_date, to_char(i.open_date,'YYYY-MM-DD HH24:MI:SS') as full_open_date, to_char(i.close_date,'YYYY-MM-DD HH24:MI:SS') as full_close_date, u.first_names || ' ' || u.last_name as closed_rep_name
from ec_customer_service_issues i, cc_users u
where i.closed_by=u.user_id(+)
and issue_id=:issue_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/issue-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.issue.get_actions_assoc_w_user {dbqd.ecommerce.www.admin.customer-service.issue.get_actions_assoc_w_user {select a.action_id, a.interaction_id, a.action_details, a.follow_up_required, i.customer_service_rep, i.interaction_date, to_char(i.interaction_date,'YYYY-MM-DD HH24:MI:SS') as full_interaction_date, i.interaction_originator, i.interaction_type, m.info_used
from ec_customer_service_actions a, ec_customer_serv_interactions i, ec_cs_action_info_used_map m
where a.interaction_id=i.interaction_id
and a.action_id=m.action_id(+)
and a.issue_id=:issue_id
order by a.action_id desc
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/issue-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.issue.get_issue_type_list {dbqd.ecommerce.www.admin.customer-service.issue.get_issue_type_list {      select issue_type from ec_cs_issue_type_map where issue_id=:issue_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/issue.xql}
dbqd.ecommerce.www.admin.customer-service.issues.last_24 {dbqd.ecommerce.www.admin.customer-service.issues.last_24 {        and sysdate-i.open_date <= 1
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/issues-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.issues.last_week {dbqd.ecommerce.www.admin.customer-service.issues.last_week {        and sysdate-i.open_date <= 7
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/issues-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.issues.last_month {dbqd.ecommerce.www.admin.customer-service.issues.last_month {        and months_between(sysdate,i.open_date) <= 1
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/issues-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.issues.uncategorized {dbqd.ecommerce.www.admin.customer-service.issues.uncategorized {    select i.issue_id, u.user_id, u.first_names as users_first_names,
    u.last_name as users_last_name, id.user_identification_id, i.order_id,
    to_char(open_date,'YYYY-MM-DD HH24:MI:SS') as full_open_date,
    to_char(close_date,'YYYY-MM-DD HH24:MI:SS') as full_close_date
    from ec_customer_service_issues i, cc_users u, ec_user_identification id
    where i.user_identification_id = id.user_identification_id
    and id.user_id = u.user_id(+)
    and 0 = (select count(*) from ec_cs_issue_type_map m where m.issue_id=i.issue_id)
    $open_date_query_bit $status_query_bit
    order by i.issue_id desc

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/issues-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.issues.all_others {dbqd.ecommerce.www.admin.customer-service.issues.all_others {    select i.issue_id, u.user_id, u.first_names as users_first_names,
    u.last_name as users_last_name, id.user_identification_id, i.order_id,
    to_char(open_date,'YYYY-MM-DD HH24:MI:SS') as full_open_date,
    to_char(close_date,'YYYY-MM-DD HH24:MI:SS') as full_close_date,
    m.issue_type
    from ec_customer_service_issues i, cc_users u, ec_user_identification id, ec_cs_issue_type_map m
    where i.user_identification_id = id.user_identification_id
    and id.user_id = u.user_id (+)
    and i.issue_id = m.issue_id
    $open_date_query_bit $status_query_bit
    $issue_type_query_bit
    order by $order_by_sql

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/issues-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.issues.default_query {dbqd.ecommerce.www.admin.customer-service.issues.default_query {    select i.issue_id, u.user_id, u.first_names as users_first_names,
    u.last_name as users_last_name, id.user_identification_id, i.order_id,
    to_char(open_date,'YYYY-MM-DD HH24:MI:SS') as full_open_date,
    to_char(close_date,'YYYY-MM-DD HH24:MI:SS') as full_close_date,
    m.issue_type
    from ec_customer_service_issues i, cc_users u, ec_user_identification id, ec_cs_issue_type_map m
    where i.user_identification_id = id.user_identification_id
    and id.user_id = u.user_id (+)
    and i.issue_id = m.issue_id
    and m.issue_type=:view_issue_type
    $open_date_query_bit $status_query_bit
    order by $order_by_sql

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/issues-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.issues.get_issue_type_list {dbqd.ecommerce.www.admin.customer-service.issues.get_issue_type_list {      select picklist_item from ec_picklist_items where picklist_name='issue_type' order by sort_key
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/issues.xql}
dbqd.ecommerce.www.admin.customer-service.picklist-item-add-2.insert_new_picklist_item {dbqd.ecommerce.www.admin.customer-service.picklist-item-add-2.insert_new_picklist_item {      insert into ec_picklist_items
(picklist_item_id, picklist_item, picklist_name, sort_key, last_modified, last_modifying_user, modified_ip_address)
values
(:picklist_item_id, :picklist_item, :picklist_name, (:prev_sort_key + :next_sort_key)/2, sysdate, :user_id,:address)
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/picklist-item-add-2-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.picklist-item-add-2.get_picklist_item_id {dbqd.ecommerce.www.admin.customer-service.picklist-item-add-2.get_picklist_item_id {      select picklist_item_id from ec_picklist_items
where picklist_item_id=:picklist_item_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/picklist-item-add-2.xql}
dbqd.ecommerce.www.admin.customer-service.picklist-item-add-2.get_n_conflicts {dbqd.ecommerce.www.admin.customer-service.picklist-item-add-2.get_n_conflicts {      select count(*)
from ec_picklist_items
where picklist_name=:picklist_name
and sort_key = :sort_key
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/picklist-item-add-2.xql}
dbqd.ecommerce.www.admin.customer-service.picklist-item-add.get_count_items {dbqd.ecommerce.www.admin.customer-service.picklist-item-add.get_count_items {      select count(*)
from ec_picklist_items
where picklist_name=:picklist_name
and sort_key = :sort_key
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/picklist-item-add.xql}
dbqd.ecommerce.www.admin.customer-service.picklist-item-delete-2.delete_item_from_picklist {dbqd.ecommerce.www.admin.customer-service.picklist-item-delete-2.delete_item_from_picklist {      delete from ec_picklist_items where picklist_item_id=:picklist_item_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/picklist-item-delete-2.xql}
dbqd.ecommerce.www.admin.customer-service.picklist-item-swap.get_item_match {dbqd.ecommerce.www.admin.customer-service.picklist-item-swap.get_item_match {      select count(*) from ec_picklist_items where picklist_item_id=:picklist_item_id and sort_key=:sort_key
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/picklist-item-swap.xql}
dbqd.ecommerce.www.admin.customer-service.picklist-item-swap.get_next_item_match {dbqd.ecommerce.www.admin.customer-service.picklist-item-swap.get_next_item_match {      select count(*) from ec_picklist_items where picklist_item_id=:next_picklist_item_id and sort_key=:next_sort_key
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/picklist-item-swap.xql}
dbqd.ecommerce.www.admin.customer-service.picklist-item-swap.update_current_item {dbqd.ecommerce.www.admin.customer-service.picklist-item-swap.update_current_item {      update ec_picklist_items set sort_key=:next_sort_key where picklist_item_id=:picklist_item_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/picklist-item-swap.xql}
dbqd.ecommerce.www.admin.customer-service.picklist-item-swap.update_next_item {dbqd.ecommerce.www.admin.customer-service.picklist-item-swap.update_next_item {      update ec_picklist_items set sort_key=:sort_key where picklist_item_id=:next_picklist_item_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/picklist-item-swap.xql}
dbqd.ecommerce.www.admin.customer-service.picklist-row-delete.telere_from_picklist_table {dbqd.ecommerce.www.admin.customer-service.picklist-row-delete.telere_from_picklist_table {      delete from $table_name where rowid=:rowid
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/picklist-row-delete-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.picklist-value-add.insert_new_picklist_value {dbqd.ecommerce.www.admin.customer-service.picklist-value-add.insert_new_picklist_value {      insert into $table_name
($col_to_insert)
values
(:val_to_insert)

      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/picklist-value-add.xql}
dbqd.ecommerce.www.admin.customer-service.spam-2.bought_product {dbqd.ecommerce.www.admin.customer-service.spam-2.bought_product {      select unique u.user_id, first_names, last_name from cc_users u, ec_items i, ec_orders o, ec_products p where i.order_id=o.order_id and o.user_id=u.user_id and i.product_id = p.product_id and p.sku=:product_sku
    } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/spam-2-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.spam-2.viewed_product {dbqd.ecommerce.www.admin.customer-service.spam-2.viewed_product {      select unique u.user_id, first_names, last_name from cc_users u, ec_user_session_info ui, ec_user_sessions us, ec_products p where us.user_session_id=ui.user_session_id and us.user_id=u.user_id and ui.product_id = p.product_id and p.sku=:viewed_product_sku
    } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/spam-2-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.spam-2.viewed_category {dbqd.ecommerce.www.admin.customer-service.spam-2.viewed_category {      select unique u.user_id, first_names, last_name from cc_users u, ec_user_session_info ui, ec_user_sessions us where us.user_session_id=ui.user_session_id and us.user_id=u.user_id and ui.category_id=:category_id
    } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/spam-2-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.spam-2.mailing_list {dbqd.ecommerce.www.admin.customer-service.spam-2.mailing_list {      select user_id, first_names, last_name from cc_users where user_id in ([join $user_id_list ", "])
    } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/spam-2.xql}
dbqd.ecommerce.www.admin.customer-service.spam-2.null_categories {dbqd.ecommerce.www.admin.customer-service.spam-2.null_categories {      (category_id is null and subcategory_id is null and subsubcategory_id is null)
    } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/spam-2.xql}
dbqd.ecommerce.www.admin.customer-service.spam-2.null_subcategory {dbqd.ecommerce.www.admin.customer-service.spam-2.null_subcategory {      (category_id=:mailing_list and subcategory_id is null)
    } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/spam-2.xql}
dbqd.ecommerce.www.admin.customer-service.spam-2.null_subsubcategory {dbqd.ecommerce.www.admin.customer-service.spam-2.null_subsubcategory {      (subcategory_id=[lindex $mailing_list 1] and subsubcategory_id is null)
    } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/spam-2.xql}
dbqd.ecommerce.www.admin.customer-service.spam-2.subsubcategory {dbqd.ecommerce.www.admin.customer-service.spam-2.subsubcategory {      subsubcategory_id=[lindex $mailing_list 2]
    } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/spam-2.xql}
dbqd.ecommerce.www.admin.customer-service.spam-2.null_categories {dbqd.ecommerce.www.admin.customer-service.spam-2.null_categories {      select users.user_id, first_names, last_name from cc_users, ec_cat_mailing_lists where users.user_id=ec_cat_mailing_lists.user_id
    } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/spam-2.xql}
dbqd.ecommerce.www.admin.customer-service.spam-2.user_class {dbqd.ecommerce.www.admin.customer-service.spam-2.user_class {      select u.user_id, first_names, last_name from cc_users u, ec_user_class_user_map m where m.user_class_id=:user_class_id and m.user_id=u.user_id
    } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/spam-2.xql}
dbqd.ecommerce.www.admin.customer-service.spam-2.all_users {dbqd.ecommerce.www.admin.customer-service.spam-2.all_users {      select user_id, first_names, last_name from cc_users
    } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/spam-2.xql}
dbqd.ecommerce.www.admin.customer-service.spam-2.last_visit {dbqd.ecommerce.www.admin.customer-service.spam-2.last_visit {      select user_id, first_names, last_name from cc_users where last_visit >= to_date(:start,'YYYY-MM-DD HH24:MI:SS') and last_visit <= to_date(:end,'YYYY-MM-DD HH24:MI:SS')
    } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/spam-2.xql}
dbqd.ecommerce.www.admin.customer-service.spam-3.bought_product {dbqd.ecommerce.www.admin.customer-service.spam-3.bought_product {      select unique u.user_id as user_id, first_names, last_name, email 
      from cc_users u, ec_items 1, ec_orders o, ec_products p 
      where i.order_id=o.order_id and o.user_id=u.user_id and i_items.product_id=p.product_id and p.sku=:product_sku
    } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/spam-3-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.spam-3.viewed_product {dbqd.ecommerce.www.admin.customer-service.spam-3.viewed_product {      select unique u.user_id as user_id, first_names, last_name, email 
      from cc_users u, ec_user_session_info ui, ec_user_sessions us, ec_products p 
      where us.user_session_id=ui.user_session_id and us.user_id=u.user_id and ui.product_id=p.product_ud and p.sku=:viewed_product_sku
    } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/spam-3-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.spam-3.viewed_category {dbqd.ecommerce.www.admin.customer-service.spam-3.viewed_category {      select unique u.user_id as user_id, first_names, last_name, email 
      from cc_users u, ec_user_session_info ui, ec_user_sessions us 
      where us.user_session_id=ui.user_session_id and us.user_id=u.user_id and ui.category_id=:category_id
    } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/spam-3-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.spam-3.insert_record_for_gift_certificates {dbqd.ecommerce.www.admin.customer-service.spam-3.insert_record_for_gift_certificates {      insert into ec_gift_certificates
      (gift_certificate_id, user_id, amount, 
      expires, 
      issue_date, issued_by, gift_certificate_state, 
      last_modified, last_modifying_user, modified_ip_address)
      values
      (ec_gift_cert_id_sequence.nextval, :user_id, :amount, 
      $expires_to_insert, 
      sysdate, :customer_service_rep, 'authorized', 
      sysdate, :customer_service_rep, '[ns_conn peeraddr]')
    } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/spam-3-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.spam-3.insert_log_for_spam {dbqd.ecommerce.www.admin.customer-service.spam-3.insert_log_for_spam {      insert into ec_spam_log
      (spam_id, spam_date, spam_text, mailing_list_category_id, 
      mailing_list_subcategory_id, mailing_list_subsubcategory_id, 
      user_class_id, product_id, 
      last_visit_start_date, last_visit_end_date)
      values
      (:spam_id, sysdate, :message, :mailing_list_category_id, 
      :mailing_list_subcategory_id, :mailing_list_subsubcategory_id, 
      :user_class_id, :product_id, 
      to_date(:start,'YYYY-MM-DD HH24:MI:SS'), 
      to_date(:end,'YYYY-MM-DD HH24:MI:SS'))
    } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/spam-3-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.spam-3.users_list {dbqd.ecommerce.www.admin.customer-service.spam-3.users_list {      select user_id, email from cc_users where user_id in ([join $user_id_list ", "])
    } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/spam-3.xql}
dbqd.ecommerce.www.admin.customer-service.spam-3.null_categories {dbqd.ecommerce.www.admin.customer-service.spam-3.null_categories {      (category_id is null and subcategory_id is null and subsubcategory_id is null)
    } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/spam-3.xql}
dbqd.ecommerce.www.admin.customer-service.spam-3.null_subcategory {dbqd.ecommerce.www.admin.customer-service.spam-3.null_subcategory {      (category_id=:mailing_list and subcategory_id is null)
    } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/spam-3.xql}
dbqd.ecommerce.www.admin.customer-service.spam-3.null_subsubcategory {dbqd.ecommerce.www.admin.customer-service.spam-3.null_subsubcategory {      (subcategory_id=[lindex $mailing_list 1] and subsubcategory_id is null)
    } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/spam-3.xql}
dbqd.ecommerce.www.admin.customer-service.spam-3.null_subsubcategory {dbqd.ecommerce.www.admin.customer-service.spam-3.null_subsubcategory {      (subcategory_id=[lindex $mailing_list 1] and subsubcategory_id is null)
    } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/spam-3.xql}
dbqd.ecommerce.www.admin.customer-service.spam-3.users_email {dbqd.ecommerce.www.admin.customer-service.spam-3.users_email {      select u.user_id as user_id, email from cc_users u, ec_cat_mailing_lists l where u.user_id=l.user_id 
    } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/spam-3.xql}
dbqd.ecommerce.www.admin.customer-service.spam-3.user_class {dbqd.ecommerce.www.admin.customer-service.spam-3.user_class {      select u.user_id as user_id, first_names, last_name, email from cc_users u, ec_user_class_user_map m where m.user_class_id=:user_class_id and m.user_id=u.user_id
    } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/spam-3.xql}
dbqd.ecommerce.www.admin.customer-service.spam-3.all_users {dbqd.ecommerce.www.admin.customer-service.spam-3.all_users {      select user_id, first_names, last_name, email from cc_users
    } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/spam-3.xql}
dbqd.ecommerce.www.admin.customer-service.spam-3.last_visit {dbqd.ecommerce.www.admin.customer-service.spam-3.last_visit {      select user_id, first_names, last_name, email 
      from cc_users 
      where last_visit >= to_date(:start,'YYYY-MM-DD HH24:MI:SS') and last_visit <= to_date(:end,'YYYY-MM-DD HH24:MI:SS')
    } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/spam-3.xql}
dbqd.ecommerce.www.admin.customer-service.spam-3.get_log_entries_cnt {dbqd.ecommerce.www.admin.customer-service.spam-3.get_log_entries_cnt {      select count(*) from ec_spam_log where spam_id=:spam_id
    } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/spam-3.xql}
dbqd.ecommerce.www.admin.customer-service.spam-log.get_spam_people {dbqd.ecommerce.www.admin.customer-service.spam-log.get_spam_people {      select spam_text, mailing_list_category_id, mailing_list_subcategory_id, mailing_list_subsubcategory_id, user_class_id, product_id, to_char(last_visit_start_date,'YYYY-MM-DD HH24:MI:SS') as full_last_visit_start_date, to_char(last_visit_end_date,'YYYY-MM-DD HH24:MI:SS') as full_last_visit_end_date, to_char(spam_date,'YYYY-MM-DD HH24:MI:SS') as full_spam_date 
      from ec_spam_log 
      where (spam_date >= to_date('$start 00:00:00','YYYY-MM-DD HH24:MI:SS') and spam_date <= to_date('$end 23:59:59','YYYY-MM-DD HH24:MI:SS')) 
      order by spam_date desc
    } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/spam-log-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.spam-log.get_user_class_name {dbqd.ecommerce.www.admin.customer-service.spam-log.get_user_class_name {      select user_class_name from ec_user_classes where user_class_id=:user_class_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/spam-log.xql}
dbqd.ecommerce.www.admin.customer-service.spam-log.get_product_name {dbqd.ecommerce.www.admin.customer-service.spam-log.get_product_name {      select product_name from ec_products where product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/spam-log.xql}
dbqd.ecommerce.www.admin.customer-service.statistics.get_issues_type_counts_sql {dbqd.ecommerce.www.admin.customer-service.statistics.get_issues_type_counts_sql {      select issue_type, count(*) as n_issues
from ec_customer_service_issues, ec_cs_issue_type_map
where ec_customer_service_issues.issue_id=ec_cs_issue_type_map.issue_id(+)
group by issue_type
order by decode(issue_type,null,1,0) $issue_type_decode

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/statistics-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.statistics.get_info_used_query_sql {dbqd.ecommerce.www.admin.customer-service.statistics.get_info_used_query_sql {select info_used, count(*) as n_actions
from ec_customer_service_actions, ec_cs_action_info_used_map
where ec_customer_service_actions.action_id=ec_cs_action_info_used_map.action_id(+)
group by info_used
order by decode(info_used,null,1,0) $info_used_decode

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/statistics-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.statistics.get_actions_by_originator_sql {dbqd.ecommerce.www.admin.customer-service.statistics.get_actions_by_originator_sql {      select interaction_originator, count(*) as n_interactions
      from ec_customer_serv_interactions
      group by interaction_originator
      order by decode(interaction_originator,'customer',0,'rep',1,'automatic',2)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/statistics-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.statistics.initial_issue_type_decode_bit {dbqd.ecommerce.www.admin.customer-service.statistics.initial_issue_type_decode_bit {      , decode(issue_type,

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/statistics-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.statistics.middle_issue_type_decode_bit {dbqd.ecommerce.www.admin.customer-service.statistics.middle_issue_type_decode_bit {      '[DoubleApos $issue_type]',$issue_type_counter,

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/statistics-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.statistics.end_issue_type_decode_bit {dbqd.ecommerce.www.admin.customer-service.statistics.end_issue_type_decode_bit {      $issue_type_counter)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/statistics-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.statistics.initial_info_used_decode_bit {dbqd.ecommerce.www.admin.customer-service.statistics.initial_info_used_decode_bit {      , decode(info_used,

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/statistics-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.statistics.middle_info_used_decode_bit {dbqd.ecommerce.www.admin.customer-service.statistics.middle_info_used_decode_bit {      '[DoubleApos $info_used]',$info_used_counter,

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/statistics-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.statistics.end_info_used_decode_bit {dbqd.ecommerce.www.admin.customer-service.statistics.end_info_used_decode_bit {      $info_used_counter)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/statistics-oracle.xql}
dbqd.ecommerce.www.admin.customer-service.statistics.get_actions_by_cs_rep_sql {dbqd.ecommerce.www.admin.customer-service.statistics.get_actions_by_cs_rep_sql {      select customer_service_rep, first_names, last_name, count(*) as n_interactions
      from ec_customer_serv_interactions, cc_users
      where ec_customer_serv_interactions.customer_service_rep=cc_users.user_id
      group by customer_service_rep, first_names, last_name
      order by count(*) desc

      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/statistics.xql}
dbqd.ecommerce.www.admin.customer-service.statistics.get_issue_type_list {dbqd.ecommerce.www.admin.customer-service.statistics.get_issue_type_list {      select picklist_item from ec_picklist_items where picklist_name='issue_type' order by sort_key

      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/statistics.xql}
dbqd.ecommerce.www.admin.customer-service.statistics.get_important_info_list {dbqd.ecommerce.www.admin.customer-service.statistics.get_important_info_list {      select picklist_item from ec_picklist_items where picklist_name='info_used' order by sort_key

      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/statistics.xql}
dbqd.ecommerce.www.admin.customer-service.user-identification-edit.unused {dbqd.ecommerce.www.admin.customer-service.user-identification-edit.unused {      update ec_user_identification
set first_names=:first_names,
last_name=:last_name,
email=:email,
postal_code=:postal_code,
other_id_info=:other_id_info
where user_identification_id=:user_identification_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/user-identification-edit.xql}
dbqd.ecommerce.www.admin.customer-service.user-identification-match-2.update_user_id_set_new_uid {dbqd.ecommerce.www.admin.customer-service.user-identification-match-2.update_user_id_set_new_uid {      update ec_user_identification set user_id=:d_user_id where user_identification_id=:user_identification_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/user-identification-match-2.xql}
dbqd.ecommerce.www.admin.customer-service.user-identification.get_user_id_info {dbqd.ecommerce.www.admin.customer-service.user-identification.get_user_id_info {      select * from ec_user_identification where user_identification_id=:user_identification_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/user-identification.xql}
dbqd.ecommerce.www.admin.customer-service.user-identification.get_row_exists_name {dbqd.ecommerce.www.admin.customer-service.user-identification.get_row_exists_name {      select first_names as d_first_names, last_name as d_last_name, user_id as d_user_id from cc_users where email = lower(:email)
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/customer-service/user-identification.xql}
dbqd.ecommerce.www.admin.email-templates.add-2.unused {dbqd.ecommerce.www.admin.email-templates.add-2.unused {      insert into ec_email_templates
(email_template_id, title, subject, message, variables, when_sent, issue_type_list, last_modified, last_modifying_user, modified_ip_address)
values
(ec_email_template_id_sequence.nextval, :title, :subject, :message, :variables, :when_sent, :issue_type, sysdate, :user_id, '[DoubleApos [ns_conn peeraddr]]')
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/email-templates/add-2-oracle.xql}
dbqd.ecommerce.www.admin.email-templates.edit-2.update_ec_email_template {dbqd.ecommerce.www.admin.email-templates.edit-2.update_ec_email_template {     update ec_email_templates
     set title=:title, 
         subject=:subject, 
         message=:message, 
         variables=:variables, 
         when_sent=:when_sent, 
         issue_type_list=:issue_type, 
         last_modified=sysdate, 
         last_modifying_user=:user_id, 
         modified_ip_address='[DoubleApos [ns_conn peeraddr]]'
     where email_template_id=:email_template_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/email-templates/edit-2-oracle.xql}
dbqd.ecommerce.www.admin.email-templates.edit.unused {dbqd.ecommerce.www.admin.email-templates.edit.unused {      select * from ec_email_templates where email_template_id=:email_template_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/email-templates/edit.xql}
dbqd.ecommerce.www.admin.index.unresolved_problem_count_select {dbqd.ecommerce.www.admin.index.unresolved_problem_count_select {      select count(*) from ec_problems_log where resolved_date is null
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/index.xql}
dbqd.ecommerce.www.admin.index.num_orders_select {dbqd.ecommerce.www.admin.index.num_orders_select {select 
  sum(one_if_within_n_days(confirmed_date,1)) as n_in_last_24_hours,
  sum(one_if_within_n_days(confirmed_date,7)) as n_in_last_7_days
from ec_orders_reportable
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/index.xql}
dbqd.ecommerce.www.admin.index.num_products_select {dbqd.ecommerce.www.admin.index.num_products_select {      select count(*) as n_products, round(avg(price),2) as avg_price from ec_products_displayable
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/index.xql}
dbqd.ecommerce.www.admin.index.open_issues_select {dbqd.ecommerce.www.admin.index.open_issues_select {      select count(*) from ec_customer_service_issues where close_date is null
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/index.xql}
dbqd.ecommerce.www.admin.index.non_approved_comments_select {dbqd.ecommerce.www.admin.index.non_approved_comments_select {      select count(*) from ec_product_comments where approved_p is null
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/index.xql}
dbqd.ecommerce.www.admin.index.non_approved_users_select {dbqd.ecommerce.www.admin.index.non_approved_users_select {      select count(*) from ec_user_class_user_map where user_class_approved_p is null or user_class_approved_p='f'
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/index.xql}
dbqd.ecommerce.www.admin.mailing-lists.member-add.get_user_info {dbqd.ecommerce.www.admin.mailing-lists.member-add.get_user_info {select user_id, first_names, last_name, email
  from cc_users
 where $last_bit_of_query

      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/mailing-lists/member-add.xql}
dbqd.ecommerce.www.admin.mailing-lists.member-remove-2.delete_from_mailing_lists {dbqd.ecommerce.www.admin.mailing-lists.member-remove-2.delete_from_mailing_lists {      delete from ec_cat_mailing_lists where user_id=:user_id and subsubcategory_id=:subsubcategory_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/mailing-lists/member-remove-2.xql}
dbqd.ecommerce.www.admin.mailing-lists.member-remove-2.delete_from_mailing_lists_2 {dbqd.ecommerce.www.admin.mailing-lists.member-remove-2.delete_from_mailing_lists_2 {      delete from ec_cat_mailing_lists where user_id=:user_id and subcategory_id=:subcategory_id and subsubcategory_id is null
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/mailing-lists/member-remove-2.xql}
dbqd.ecommerce.www.admin.mailing-lists.member-remove-2.delete_just_from_category {dbqd.ecommerce.www.admin.mailing-lists.member-remove-2.delete_just_from_category {      delete from ec_cat_mailing_lists where user_id=:user_id and category_id is null
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/mailing-lists/member-remove-2.xql}
dbqd.ecommerce.www.admin.orders.address-add-3.user_id_select {dbqd.ecommerce.www.admin.orders.address-add-3.user_id_select {      select user_id from ec_orders where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/address-add-3.xql}
dbqd.ecommerce.www.admin.orders.address-add-3.address_insert {dbqd.ecommerce.www.admin.orders.address-add-3.address_insert {      insert into ec_addresses
  (address_id, user_id, address_type, attn, line1, line2, city, usps_abbrev, full_state_name, zip_code, country_code, phone, phone_time)
  values
  (:address_id, :user_id, 'shipping', :attn, :line1, :line2, :city, :usps_abbrev, :full_state_name, :zip_code, :country_code, :phone, :phone_time)
  
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/address-add-3.xql}
dbqd.ecommerce.www.admin.orders.address-add-3.ec_orders_update {dbqd.ecommerce.www.admin.orders.address-add-3.ec_orders_update {      update ec_orders set shipping_address=:address_id where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/address-add-3.xql}
dbqd.ecommerce.www.admin.orders.address-add.user_name_select {dbqd.ecommerce.www.admin.orders.address-add.user_name_select {      select first_names || ' ' || last_name from cc_users, ec_orders where ec_orders.user_id=cc_users.user_id and order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/address-add.xql}
dbqd.ecommerce.www.admin.orders.by-order-state-and-time.last_24 {dbqd.ecommerce.www.admin.orders.by-order-state-and-time.last_24 {      and sysdate-o.confirmed_date <= 1
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/by-order-state-and-time-oracle.xql}
dbqd.ecommerce.www.admin.orders.by-order-state-and-time.last_week {dbqd.ecommerce.www.admin.orders.by-order-state-and-time.last_week {      and sysdate-o.confirmed_date <= 7
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/by-order-state-and-time-oracle.xql}
dbqd.ecommerce.www.admin.orders.by-order-state-and-time.last_month {dbqd.ecommerce.www.admin.orders.by-order-state-and-time.last_month {      and months_between(sysdate,o.confirmed_date) <= 1
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/by-order-state-and-time-oracle.xql}
dbqd.ecommerce.www.admin.orders.by-order-state-and-time.orders_select {dbqd.ecommerce.www.admin.orders.by-order-state-and-time.orders_select {      select o.order_id, o.confirmed_date, o.order_state, ec_total_price(o.order_id) as price_to_display, o.user_id, u.first_names, u.last_name, count(*) as n_items
from ec_orders o, cc_users u, ec_items i
where o.user_id=u.user_id(+)
and o.order_id=i.order_id
$confirmed_query_bit $order_state_query_bit
group by o.order_id, o.confirmed_date, o.order_state, ec_total_price(o.order_id), o.user_id, u.first_names, u.last_name
order by $order_by_clause

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/by-order-state-and-time-oracle.xql}
dbqd.ecommerce.www.admin.orders.by-order-state-and-time.orders_select {dbqd.ecommerce.www.admin.orders.by-order-state-and-time.orders_select {      select o.order_id, o.confirmed_date, o.order_state, ec_total_price(o.order_id) as price_to_display, o.user_id, u.first_names, u.last_name, count(*) as n_items
from ec_orders o, cc_users u, ec_items i
where o.user_id=u.user_id(+)
and o.order_id=i.order_id
$confirmed_query_bit $order_state_query_bit
group by o.order_id, o.confirmed_date, o.order_state, ec_total_price(o.order_id), o.user_id, u.first_names, u.last_name
order by $order_by_clause

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/by-order-state-and-time-oracle.xql}
dbqd.ecommerce.www.admin.orders.comments-edit.cs_comments_update {dbqd.ecommerce.www.admin.orders.comments-edit.cs_comments_update {      update ec_orders set cs_comments=:cs_comments where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/comments-edit.xql}
dbqd.ecommerce.www.admin.orders.comments.comments_select {dbqd.ecommerce.www.admin.orders.comments.comments_select {      select cs_comments from ec_orders where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/comments.xql}
dbqd.ecommerce.www.admin.orders.creditcard-add-3.user_id_select {dbqd.ecommerce.www.admin.orders.creditcard-add-3.user_id_select {      select user_id from ec_orders where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/creditcard-add-3.xql}
dbqd.ecommerce.www.admin.orders.creditcard-add-3.creditcard_insert_select {dbqd.ecommerce.www.admin.orders.creditcard-add-3.creditcard_insert_select {      insert into ec_creditcards
  (creditcard_id, user_id, creditcard_number, creditcard_last_four, creditcard_type, creditcard_expire, billing_zip_code)
  values
  (:creditcard_id, :user_id, :creditcard_number, :creditcard_last_four, :creditcard_type, :creditcard_expire, :billing_zip_code)
  
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/creditcard-add-3.xql}
dbqd.ecommerce.www.admin.orders.creditcard-add-3.ec_orders_update {dbqd.ecommerce.www.admin.orders.creditcard-add-3.ec_orders_update {      update ec_orders set creditcard_id=:creditcard_id where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/creditcard-add-3.xql}
dbqd.ecommerce.www.admin.orders.creditcard-add.zip_code_select {dbqd.ecommerce.www.admin.orders.creditcard-add.zip_code_select {      select zip_code from ec_addresses a, ec_orders o where a.address_id=o.shipping_address and order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/creditcard-add.xql}
dbqd.ecommerce.www.admin.orders.fulfill-2.shipping_method_select {dbqd.ecommerce.www.admin.orders.fulfill-2.shipping_method_select {select shipping_method
  from ec_orders
 where order_id=:order_id

      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/fulfill-2.xql}
dbqd.ecommerce.www.admin.orders.fulfill-2.get_pretty_mailing_address {dbqd.ecommerce.www.admin.orders.fulfill-2.get_pretty_mailing_address {      select shipping_address from ec_orders where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/fulfill-2.xql}
dbqd.ecommerce.www.admin.orders.fulfill-3.total_price_of_items_select {dbqd.ecommerce.www.admin.orders.fulfill-3.total_price_of_items_select {      select nvl(sum(price_charged),0) from ec_items where item_id in ([join $item_id_vars ", "])
    } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/fulfill-3-oracle.xql}
dbqd.ecommerce.www.admin.orders.fulfill-3.shipping_of_items_select {dbqd.ecommerce.www.admin.orders.fulfill-3.shipping_of_items_select {      select nvl(sum(shipping_charged),0) from ec_items where item_id in ([join $item_id_vars ", "])
    } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/fulfill-3-oracle.xql}
dbqd.ecommerce.www.admin.orders.fulfill-3.total_tax_of_items_select {dbqd.ecommerce.www.admin.orders.fulfill-3.total_tax_of_items_select {      select ec_tax(:total_price_of_items, :total_shipping_of_items, :order_id) from dual
    } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/fulfill-3-oracle.xql}
dbqd.ecommerce.www.admin.orders.fulfill-3.insert_shipment_info {dbqd.ecommerce.www.admin.orders.fulfill-3.insert_shipment_info {      insert into ec_shipments
      (shipment_id, order_id, shipment_date, expected_arrival_date, carrier, tracking_number, shippable_p, last_modified, last_modifying_user, modified_ip_address)
      values
      (:shipment_id, :order_id, to_date(:shipment_date, 'YYYY-MM-DD HH12:MI:SSAM'), to_date(:expected_arrival_date, 'YYYY-MM-DD HH12:MI:SSAM'), :carrier, :tracking_number, :shippable_p_tf, sysdate, :customer_service_rep, :peeraddr)
    } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/fulfill-3-oracle.xql}
dbqd.ecommerce.www.admin.orders.fulfill-3.shipment_cost_select {dbqd.ecommerce.www.admin.orders.fulfill-3.shipment_cost_select {      select ec_shipment_cost(:shipment_id) from dual
    } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/fulfill-3-oracle.xql}
dbqd.ecommerce.www.admin.orders.fulfill-3.order_cost_select {dbqd.ecommerce.www.admin.orders.fulfill-3.order_cost_select {      select ec_order_cost(:order_id) from dual
    } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/fulfill-3-oracle.xql}
dbqd.ecommerce.www.admin.orders.fulfill-3.transaction_update {dbqd.ecommerce.www.admin.orders.fulfill-3.transaction_update {      update ec_financial_transactions set shipment_id=:shipment_id, to_be_captured_p='t', to_be_captured_date=sysdate where transaction_id=:transaction_id
    } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/fulfill-3-oracle.xql}
dbqd.ecommerce.www.admin.orders.fulfill-3.transaction_insert {dbqd.ecommerce.www.admin.orders.fulfill-3.transaction_insert {      insert into ec_financial_transactions
      (transaction_id, order_id, shipment_id, transaction_amount, transaction_type, to_be_captured_p, inserted_date, to_be_captured_date)
      values
      (:transaction_id, :order_id, :shipment_id, :shipment_cost, 'charge','t',sysdate, sysdate)
    } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/fulfill-3-oracle.xql}
dbqd.ecommerce.www.admin.orders.fulfill-3.problems_log_insert {dbqd.ecommerce.www.admin.orders.fulfill-3.problems_log_insert {      insert into ec_problems_log
      (problem_id, problem_date, problem_details, order_id)
      values
      (ec_problem_id_sequence.nextval, sysdate, :problem_details, :order_id)
    } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/fulfill-3-oracle.xql}
dbqd.ecommerce.www.admin.orders.fulfill-3.transaction_success_update {dbqd.ecommerce.www.admin.orders.fulfill-3.transaction_success_update {      update ec_financial_transactions set marked_date=sysdate where transaction_id=:transaction_id
    } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/fulfill-3-oracle.xql}
dbqd.ecommerce.www.admin.orders.fulfill-3.problems_insert {dbqd.ecommerce.www.admin.orders.fulfill-3.problems_insert {      insert into ec_problems_log
      (problem_id, problem_date, problem_details, order_id)
      values
      (ec_problem_id_sequence.nextval, sysdate, :problem_details, :order_id)
    } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/fulfill-3-oracle.xql}
dbqd.ecommerce.www.admin.orders.fulfill-3.transaction_authorized_udpate {dbqd.ecommerce.www.admin.orders.fulfill-3.transaction_authorized_udpate {      update ec_financial_transactions set authorized_date=sysdate where transaction_id=:transaction_id
    } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/fulfill-3-oracle.xql}
dbqd.ecommerce.www.admin.orders.fulfill-3.problems_insert {dbqd.ecommerce.www.admin.orders.fulfill-3.problems_insert {      insert into ec_problems_log
      (problem_id, problem_date, problem_details, order_id)
      values
      (ec_problem_id_sequence.nextval, sysdate, :problem_details, :order_id)
    } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/fulfill-3-oracle.xql}
dbqd.ecommerce.www.admin.orders.fulfill-3.transaction_success_update {dbqd.ecommerce.www.admin.orders.fulfill-3.transaction_success_update {      update ec_financial_transactions set marked_date=sysdate where transaction_id=:transaction_id
    } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/fulfill-3-oracle.xql}
dbqd.ecommerce.www.admin.orders.fulfill-3.doubleclick_select {dbqd.ecommerce.www.admin.orders.fulfill-3.doubleclick_select {      select count(*) from ec_shipments where shipment_id=:shipment_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/fulfill-3.xql}
dbqd.ecommerce.www.admin.orders.fulfill-3.shipping_method_select {dbqd.ecommerce.www.admin.orders.fulfill-3.shipping_method_select {      select shipping_method from ec_orders where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/fulfill-3.xql}
dbqd.ecommerce.www.admin.orders.fulfill-3.shippable_p_select {dbqd.ecommerce.www.admin.orders.fulfill-3.shippable_p_select {      select shipping_method from ec_orders where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/fulfill-3.xql}
dbqd.ecommerce.www.admin.orders.fulfill-3.total_price_of_items_select {dbqd.ecommerce.www.admin.orders.fulfill-3.total_price_of_items_select {      select nvl(sum(price_charged),0) from ec_items where item_id in ([join $item_id_vars ", "])
    } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/fulfill-3-oracle.xql}
dbqd.ecommerce.www.admin.orders.fulfill-3.n_shipments_already_select {dbqd.ecommerce.www.admin.orders.fulfill-3.n_shipments_already_select {      select count(*) from ec_shipments where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/fulfill-3.xql}
dbqd.ecommerce.www.admin.orders.fulfill-3.shipping_of_items_select {dbqd.ecommerce.www.admin.orders.fulfill-3.shipping_of_items_select {      select nvl(sum(shipping_charged),0) from ec_items where item_id in ([join $item_id_vars ", "])
    } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/fulfill-3-oracle.xql}
dbqd.ecommerce.www.admin.orders.fulfill-3.total_shipping_of_items_select {dbqd.ecommerce.www.admin.orders.fulfill-3.total_shipping_of_items_select {      select ${shipping_of_items}::numeric + shipping_charged from ec_orders where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/fulfill-3.xql}
dbqd.ecommerce.www.admin.orders.fulfill-3.item_state_update {dbqd.ecommerce.www.admin.orders.fulfill-3.item_state_update {  update ec_items
  set item_state='shipped', shipment_id=:shipment_id
  where item_id in ([join $item_id_vars ", "])
  
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/fulfill-3.xql}
dbqd.ecommerce.www.admin.orders.fulfill-3.to_be_captured_p_select {dbqd.ecommerce.www.admin.orders.fulfill-3.to_be_captured_p_select {      select count(*) from ec_financial_transactions where order_id=:order_id and to_be_captured_p='t'
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/fulfill-3.xql}
dbqd.ecommerce.www.admin.orders.fulfill-3.transaction_id_select {dbqd.ecommerce.www.admin.orders.fulfill-3.transaction_id_select {      select max(transaction_id) from ec_financial_transactions where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/fulfill-3.xql}
dbqd.ecommerce.www.admin.orders.fulfill-3.transaction_id_select {dbqd.ecommerce.www.admin.orders.fulfill-3.transaction_id_select {      select max(transaction_id) from ec_financial_transactions where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/fulfill-3.xql}
dbqd.ecommerce.www.admin.orders.fulfill-3.transaction_failed_update {dbqd.ecommerce.www.admin.orders.fulfill-3.transaction_failed_update {      update ec_financial_transactions set failed_p='t' where transaction_id=:transaction_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/fulfill-3.xql}
dbqd.ecommerce.www.admin.orders.fulfill.user_id_select {dbqd.ecommerce.www.admin.orders.fulfill.user_id_select {select user_id
  from ec_orders
 where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/fulfill.xql}
dbqd.ecommerce.www.admin.orders.fulfill.shipping_method_select {dbqd.ecommerce.www.admin.orders.fulfill.shipping_method_select {select shipping_method
  from ec_orders
 where order_id=:order_id

      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/fulfill.xql}
dbqd.ecommerce.www.admin.orders.fulfillment-items-needed.items_needed_select {dbqd.ecommerce.www.admin.orders.fulfillment-items-needed.items_needed_select {    select p.product_id, p.product_name, p.sku, 
           i.color_choice, i.size_choice, i.style_choice,
           count(*) as quantity
      from ec_products p, ec_items_shippable i
     where p.product_id=i.product_id
  group by p.product_id, p.product_name, p.sku, 
           i.color_choice, i.size_choice, i.style_choice
  order by quantity desc

      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/fulfillment-items-needed.xql}
dbqd.ecommerce.www.admin.orders.fulfillment.orders_select {dbqd.ecommerce.www.admin.orders.fulfillment.orders_select {    select o.order_id, to_char(o.confirmed_date, 'YYYY-MM-DD') as confirmed_date, o.order_state, o.shipping_method,
           u.first_names, u.last_name, u.user_id
      from ec_orders_shippable o, cc_users u
     where o.user_id=u.user_id
  order by o.shipping_method, o.order_state, o.order_id

      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/fulfillment.xql}
dbqd.ecommerce.www.admin.orders.gift-certificate.gift_certificate_select {dbqd.ecommerce.www.admin.orders.gift-certificate.gift_certificate_select {select c.*, i.first_names || ' ' || i.last_name as issuer, i.user_id as issuer_user_id, p.first_names || ' ' || p.last_name as purchaser, p.user_id as purchaser_user_id, gift_certificate_amount_left(c.gift_certificate_id) as amount_left, decode(sign(sysdate-expires),1,'t',0,'t','f') as expired_p, v.first_names as voided_by_first_names, v.last_name as voided_by_last_name, o.first_names || ' ' || o.last_name as owned_by
from ec_gift_certificates c, cc_users i, cc_users p, cc_users v, cc_users o
where c.issued_by=i.user_id(+)
and c.purchased_by=p.user_id(+)
and c.voided_by=v.user_id(+)
and c.user_id=o.user_id(+)
and c.gift_certificate_id=:gift_certificate_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/gift-certificate-oracle.xql}
dbqd.ecommerce.www.admin.orders.gift-certificate-void-2.gift_certificate_void {dbqd.ecommerce.www.admin.orders.gift-certificate-void-2.gift_certificate_void {update ec_gift_certificates
set gift_certificate_state='void',
    voided_date=sysdate,
    voided_by=:customer_service_rep,
    reason_for_void=:reason_for_void
where gift_certificate_id=:gift_certificate_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/gift-certificate-void-2-oracle.xql}
dbqd.ecommerce.www.admin.orders.gift-certificates-issued.last_24 {dbqd.ecommerce.www.admin.orders.gift-certificates-issued.last_24 {      and sysdate-g.issue_date <= 1
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/gift-certificates-issued-oracle.xql}
dbqd.ecommerce.www.admin.orders.gift-certificates-issued.last_week {dbqd.ecommerce.www.admin.orders.gift-certificates-issued.last_week {      and sysdate-g.issue_date <= 7
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/gift-certificates-issued-oracle.xql}
dbqd.ecommerce.www.admin.orders.gift-certificates-issued.last_month {dbqd.ecommerce.www.admin.orders.gift-certificates-issued.last_month {      and months_between(sysdate,g.issue_date) <= 1
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/gift-certificates-issued-oracle.xql}
dbqd.ecommerce.www.admin.orders.gift-certificates-issued.ec_customer_service_reps_select {dbqd.ecommerce.www.admin.orders.gift-certificates-issued.ec_customer_service_reps_select {SELECT user_id as rep, first_names as rep_first_names, last_name as rep_last_name
FROM ec_customer_service_reps
ORDER BY last_name, first_names

      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/gift-certificates-issued.xql}
dbqd.ecommerce.www.admin.orders.gift-certificates-issued.gift_certificates_select {dbqd.ecommerce.www.admin.orders.gift-certificates-issued.gift_certificates_select {SELECT g.gift_certificate_id, g.issue_date, g.amount,
       g.issued_by, u.first_names, u.last_name,
       g.user_id as issued_to, r.first_names as issued_to_first_names, r.last_name as issued_to_last_name
from ec_gift_certificates_issued g, cc_users u, cc_users r
where g.issued_by=u.user_id and g.user_id=r.user_id
$issue_date_query_bit $rep_query_bit
order by $order_by_clause

      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/gift-certificates-issued.xql}
dbqd.ecommerce.www.admin.orders.gift-certificates.last_24 {dbqd.ecommerce.www.admin.orders.gift-certificates.last_24 {      and sysdate-g.issue_date <= 1
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/gift-certificates-oracle.xql}
dbqd.ecommerce.www.admin.orders.gift-certificates.last_week {dbqd.ecommerce.www.admin.orders.gift-certificates.last_week {      and sysdate-g.issue_date <= 7
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/gift-certificates-oracle.xql}
dbqd.ecommerce.www.admin.orders.gift-certificates.last_month {dbqd.ecommerce.www.admin.orders.gift-certificates.last_month {      and months_between(sysdate,g.issue_date) <= 1
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/gift-certificates-oracle.xql}
dbqd.ecommerce.www.admin.orders.gift-certificates.gift_certificates_select {dbqd.ecommerce.www.admin.orders.gift-certificates.gift_certificates_select {      select g.gift_certificate_id, g.issue_date, g.gift_certificate_state, g.recipient_email, g.purchased_by, g.amount, u.first_names, u.last_name
from ec_gift_certificates g, cc_users u
where g.purchased_by=u.user_id
$issue_date_query_bit $gift_certificate_state_query_bit
order by $order_by_clause

      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/gift-certificates.xql}
dbqd.ecommerce.www.admin.orders.index.recent_orders_select {dbqd.ecommerce.www.admin.orders.index.recent_orders_select {      select 
      	sum(one_if_within_n_days(confirmed_date,1)) as n_o_in_last_24_hours,
      	sum(one_if_within_n_days(confirmed_date,7)) as n_o_in_last_7_days
      from ec_orders_reportable
    } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/index.xql}
dbqd.ecommerce.www.admin.orders.index.recent_gift_certificates_purchased_select {dbqd.ecommerce.www.admin.orders.index.recent_gift_certificates_purchased_select {      select
      	sum(one_if_within_n_days(issue_date,1)) as n_g_in_last_24_hours,
      	sum(one_if_within_n_days(issue_date,7)) as n_g_in_last_7_days
      from ec_gift_certificates_purchased
    } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/index.xql}
dbqd.ecommerce.www.admin.orders.index.recent_gift_certificates_issued_select {dbqd.ecommerce.www.admin.orders.index.recent_gift_certificates_issued_select {      select
      	sum(one_if_within_n_days(issue_date,1)) as n_gi_in_last_24_hours,
      	sum(one_if_within_n_days(issue_date,7)) as n_gi_in_last_7_days
      from ec_gift_certificates_issued
    } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/index.xql}
dbqd.ecommerce.www.admin.orders.index.recent_shipments_select {dbqd.ecommerce.www.admin.orders.index.recent_shipments_select {      select
      	sum(one_if_within_n_days(shipment_date,1)) as n_s_in_last_24_hours,
      	sum(one_if_within_n_days(shipment_date,7)) as n_s_in_last_7_days
      from ec_shipments
    } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/index.xql}
dbqd.ecommerce.www.admin.orders.index.recent_refunds_select {dbqd.ecommerce.www.admin.orders.index.recent_refunds_select {      select
      	sum(one_if_within_n_days(refund_date,1)) as n_r_in_last_24_hours,
      	sum(one_if_within_n_days(refund_date,7)) as n_r_in_last_7_days
      from ec_refunds
    } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/index.xql}
dbqd.ecommerce.www.admin.orders.index.standard_shipping {dbqd.ecommerce.www.admin.orders.index.standard_shipping {      select count(*) 
      from ec_orders_shippable 
      where shipping_method='standard'
    } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/index.xql}
dbqd.ecommerce.www.admin.orders.index.express_shipping {dbqd.ecommerce.www.admin.orders.index.express_shipping {      select count(*) 
      from ec_orders_shippable 
      where shipping_method='express'
    } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/index.xql}
dbqd.ecommerce.www.admin.orders.items-add-2.products_select {dbqd.ecommerce.www.admin.orders.items-add-2.products_select {      select product_id, product_name from ec_products where $additional_query_part
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-add-2.xql}
dbqd.ecommerce.www.admin.orders.items-add-3.user_id_select {dbqd.ecommerce.www.admin.orders.items-add-3.user_id_select {      select user_id from ec_orders where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-add-3.xql}
dbqd.ecommerce.www.admin.orders.items-add-4.ec_items_insert {dbqd.ecommerce.www.admin.orders.items-add-4.ec_items_insert {      insert into ec_items
  (item_id, product_id, color_choice, size_choice, style_choice, order_id, in_cart_date, item_state, price_charged, price_name)
  values
  (:item_id, :product_id, :color_choice, :size_choice, :style_choice, :order_id, sysdate, 'to_be_shipped', :price_charged, :price_name)
  
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-add-4-oracle.xql}
dbqd.ecommerce.www.admin.orders.items-add-4.doublclick_select {dbqd.ecommerce.www.admin.orders.items-add-4.doublclick_select {      select count(*) from ec_items where item_id=:item_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-add-4.xql}
dbqd.ecommerce.www.admin.orders.items-add-4.creditcard_id_select {dbqd.ecommerce.www.admin.orders.items-add-4.creditcard_id_select {      select creditcard_id from ec_orders where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-add-4.xql}
dbqd.ecommerce.www.admin.orders.items-add-4.shipping_method_select {dbqd.ecommerce.www.admin.orders.items-add-4.shipping_method_select {      select shipping_method from ec_orders where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-add-4.xql}
dbqd.ecommerce.www.admin.orders.items-add-4.ec_items_update {dbqd.ecommerce.www.admin.orders.items-add-4.ec_items_update {      update ec_items set shipping_charged=:shipping_price where item_id=:item_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-add-4.xql}
dbqd.ecommerce.www.admin.orders.items-return-2.unused {dbqd.ecommerce.www.admin.orders.items-return-2.unused {      select nvl(shipping_charged,0) - nvl(shipping_refunded,0) from ec_orders where order_id=:order_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-return-2-oracle.xql}
dbqd.ecommerce.www.admin.orders.items-return-2.get_refund_count {dbqd.ecommerce.www.admin.orders.items-return-2.get_refund_count {      select count(*) from ec_refunds where refund_id=:refund_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-return-2.xql}
dbqd.ecommerce.www.admin.orders.items-return-2.unused {dbqd.ecommerce.www.admin.orders.items-return-2.unused {      select nvl(shipping_charged,0) - nvl(shipping_refunded,0) from ec_orders where order_id=:order_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-return-2-oracle.xql}
dbqd.ecommerce.www.admin.orders.items-return-3.get_ec_tax {dbqd.ecommerce.www.admin.orders.items-return-3.get_ec_tax {      select ec_tax(:tax_price_to_refund,0,:order_id) from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-return-3-oracle.xql}
dbqd.ecommerce.www.admin.orders.items-return-3.get_it_shipping_tax_refund {dbqd.ecommerce.www.admin.orders.items-return-3.get_it_shipping_tax_refund {      select ec_tax(0,$shipping_to_refund($item_id),$order_id) from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-return-3-oracle.xql}
dbqd.ecommerce.www.admin.orders.items-return-3.get_shipping_charged_values {dbqd.ecommerce.www.admin.orders.items-return-3.get_shipping_charged_values {      select nvl(shipping_charged,0) - nvl(shipping_refunded,0) as base_shipping, nvl(shipping_tax_charged,0) - nvl(shipping_tax_refunded,0) as base_shipping_tax from ec_orders where order_id=:order_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-return-3-oracle.xql}
dbqd.ecommerce.www.admin.orders.items-return-3.get_base_shipping_it_refund {dbqd.ecommerce.www.admin.orders.items-return-3.get_base_shipping_it_refund {      select ec_tax(0,:base_shipping,:order_id) from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-return-3-oracle.xql}
dbqd.ecommerce.www.admin.orders.items-return-3.get_cash_refunded {dbqd.ecommerce.www.admin.orders.items-return-3.get_cash_refunded {      select ec_cash_amount_to_refund(:total_amount_to_refund,:order_id) from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-return-3-oracle.xql}
dbqd.ecommerce.www.admin.orders.items-return-3.get_count_refunds {dbqd.ecommerce.www.admin.orders.items-return-3.get_count_refunds {      select count(*) from ec_refunds where refund_id=:refund_id
    } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-return-3.xql}
dbqd.ecommerce.www.admin.orders.items-return-3.get_items_for_return {dbqd.ecommerce.www.admin.orders.items-return-3.get_items_for_return {      select i.item_id, p.product_name, coalesce(i.price_charged,0) as price_charged, coalesce(i.shipping_charged,0) as shipping_charged, coalesce(i.price_tax_charged,0) as price_tax_charged, coalesce(i.shipping_tax_charged,0) as shipping_tax_charged
      from ec_items i, ec_products p
      where i.product_id=p.product_id
      and i.item_id in ([join $item_id_list ", "])
    } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-return-3.xql}
dbqd.ecommerce.www.admin.orders.items-return-3.get_shipping_charged_values {dbqd.ecommerce.www.admin.orders.items-return-3.get_shipping_charged_values {      select nvl(shipping_charged,0) - nvl(shipping_refunded,0) as base_shipping, nvl(shipping_tax_charged,0) - nvl(shipping_tax_refunded,0) as base_shipping_tax from ec_orders where order_id=:order_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-return-3-oracle.xql}
dbqd.ecommerce.www.admin.orders.items-return-3.get_cc_number {dbqd.ecommerce.www.admin.orders.items-return-3.get_cc_number {      select creditcard_number from ec_orders o, ec_creditcards c where o.creditcard_id=c.creditcard_id and o.order_id=:order_id
    } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-return-3.xql}
dbqd.ecommerce.www.admin.orders.items-return-3.get_zip_code {dbqd.ecommerce.www.admin.orders.items-return-3.get_zip_code {      select zip_code from ec_orders o, ec_addresses a where o.shipping_address=a.address_id and o.order_id=:order_id
    } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-return-3.xql}
dbqd.ecommerce.www.admin.orders.items-return-4.insert_new_ec_refund {dbqd.ecommerce.www.admin.orders.items-return-4.insert_new_ec_refund {      insert into ec_refunds
    (refund_id, order_id, refund_amount, refund_date, refunded_by, refund_reasons)
    values
    (:refund_id, :order_id, :cash_amount_to_refund, sysdate, :customer_service_rep,:reason_for_return)
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-return-4-oracle.xql}
dbqd.ecommerce.www.admin.orders.items-return-4.get_tax_charged_on_item {dbqd.ecommerce.www.admin.orders.items-return-4.get_tax_charged_on_item {      select nvl(price_tax_charged,0) as price_tax_charged, nvl(shipping_tax_charged,0) as shipping_tax_charged from ec_items where item_id=:item_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-return-4-oracle.xql}
dbqd.ecommerce.www.admin.orders.items-return-4.get_tax_charged {dbqd.ecommerce.www.admin.orders.items-return-4.get_tax_charged {      select ec_tax(:price_bind_variable,0,:order_id) from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-return-4-oracle.xql}
dbqd.ecommerce.www.admin.orders.items-return-4.get_tax_shipping_to_refund {dbqd.ecommerce.www.admin.orders.items-return-4.get_tax_shipping_to_refund {      select ec_tax(0,:shipping_bind_variable,:order_id) from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-return-4-oracle.xql}
dbqd.ecommerce.www.admin.orders.items-return-4.get_base_shipping_tax {dbqd.ecommerce.www.admin.orders.items-return-4.get_base_shipping_tax {      select nvl(shipping_tax_charged,0) from ec_orders where order_id=:order_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-return-4-oracle.xql}
dbqd.ecommerce.www.admin.orders.items-return-4.get_base_tax_to_refund {dbqd.ecommerce.www.admin.orders.items-return-4.get_base_tax_to_refund {      select ec_tax(0,:base_shipping_to_refund,:order_id) from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-return-4-oracle.xql}
dbqd.ecommerce.www.admin.orders.items-return-4.insert_new_financial_trans {dbqd.ecommerce.www.admin.orders.items-return-4.insert_new_financial_trans {      insert into ec_financial_transactions
	(transaction_id, order_id, refund_id, creditcard_id, transaction_amount, transaction_type, inserted_date)
	values
	(:transaction_id, :order_id, :refund_id, :creditcard_id, :cash_amount_to_refund, 'refund', sysdate)
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-return-4-oracle.xql}
dbqd.ecommerce.www.admin.orders.items-return-4.get_gc_amount_used {dbqd.ecommerce.www.admin.orders.items-return-4.get_gc_amount_used {      select ec_order_gift_cert_amount(:order_id) from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-return-4-oracle.xql}
dbqd.ecommerce.www.admin.orders.items-return-4.insert_too_little_gc {dbqd.ecommerce.www.admin.orders.items-return-4.insert_too_little_gc {      insert into ec_problems_log
	    (problem_id, problem_date, problem_details, order_id)
	    values
	    (ec_problem_id_sequence.nextval, sysdate, :errorstring, :order_id)
	    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-return-4-oracle.xql}
dbqd.ecommerce.www.admin.orders.items-return-4.get_gc_amt_left {dbqd.ecommerce.www.admin.orders.items-return-4.get_gc_amt_left {      select gift_certificate_amount_left(:cert) from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-return-4-oracle.xql}
dbqd.ecommerce.www.admin.orders.items-return-4.insert_new_gc_usage_reinstate {dbqd.ecommerce.www.admin.orders.items-return-4.insert_new_gc_usage_reinstate {      insert into ec_gift_certificate_usage
			(gift_certificate_id, order_id, amount_reinstated, reinstated_date)
			values
			(:cert, :order_id, :iteration_reinstate_amount, sysdate)
			
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-return-4-oracle.xql}
dbqd.ecommerce.www.admin.orders.items-return-4.insert_cc_refund_problem {dbqd.ecommerce.www.admin.orders.items-return-4.insert_cc_refund_problem {      insert into ec_problems_log
	(problem_id, problem_date, problem_details, order_id)
	values
	(ec_problem_id_sequence.nextval, sysdate, :errorstring, :order_id)
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-return-4-oracle.xql}
dbqd.ecommerce.www.admin.orders.items-return-4.update_ft_set_success {dbqd.ecommerce.www.admin.orders.items-return-4.update_ft_set_success {      update ec_financial_transactions set refunded_date=sysdate where transaction_id=:transaction_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-return-4-oracle.xql}
dbqd.ecommerce.www.admin.orders.items-return-4.get_user_id {dbqd.ecommerce.www.admin.orders.items-return-4.get_user_id {      select user_id from ec_orders where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-return-4.xql}
dbqd.ecommerce.www.admin.orders.items-return-4.get_refund_id_check {dbqd.ecommerce.www.admin.orders.items-return-4.get_refund_id_check {      select count(*) from ec_refunds where refund_id=:refund_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-return-4.xql}
dbqd.ecommerce.www.admin.orders.items-return-4.get_credit_card_id {dbqd.ecommerce.www.admin.orders.items-return-4.get_credit_card_id {      select creditcard_number from ec_orders o, ec_creditcards c where o.creditcard_id=c.creditcard_id and o.order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-return-4.xql}
dbqd.ecommerce.www.admin.orders.items-return-4.get_creditcard_id {dbqd.ecommerce.www.admin.orders.items-return-4.get_creditcard_id {      select creditcard_id from ec_orders where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-return-4.xql}
dbqd.ecommerce.www.admin.orders.items-return-4.get_transaction_to_query {dbqd.ecommerce.www.admin.orders.items-return-4.get_transaction_to_query {	select max(transaction_id)
	from ec_financial_transactions
	where creditcard_id=:creditcard_id
	 and (authorized_date is not null OR 0=(select count(*) from ec_financial_transactions where creditcard_id=:creditcard_id and authorized_date is not null)
	
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-return-4.xql}
dbqd.ecommerce.www.admin.orders.items-return-4.get_creditcard_id {dbqd.ecommerce.www.admin.orders.items-return-4.get_creditcard_id {      select creditcard_id from ec_orders where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-return-4.xql}
dbqd.ecommerce.www.admin.orders.items-return-4.update_cc_number_incctable {dbqd.ecommerce.www.admin.orders.items-return-4.update_cc_number_incctable {      update ec_creditcards set creditcard_number=:creditcard_number where creditcard_id=:creditcard_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-return-4.xql}
dbqd.ecommerce.www.admin.orders.items-return-4.insert_new_cc {dbqd.ecommerce.www.admin.orders.items-return-4.insert_new_cc {      insert into ec_creditcards
	(creditcard_id, user_id, creditcard_number, creditcard_last_four, creditcard_type, creditcard_expire, billing_zip_code)
	values
	(:creditcard_id, :user_id, :creditcard_number, :cc_thing, :creditcard_type,:expires,:billing_zip_code)
	
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-return-4.xql}
dbqd.ecommerce.www.admin.orders.items-return-4.get_tax_charged_on_item {dbqd.ecommerce.www.admin.orders.items-return-4.get_tax_charged_on_item {      select nvl(price_tax_charged,0) as price_tax_charged, nvl(shipping_tax_charged,0) as shipping_tax_charged from ec_items where item_id=:item_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-return-4-oracle.xql}
dbqd.ecommerce.www.admin.orders.items-return-4.update_item_return {dbqd.ecommerce.www.admin.orders.items-return-4.update_item_return {	update ec_items set item_state='received_back',
	                    received_back_date=to_date(:received_back_datetime,'YYYY-MM-DD HH12:MI:SSAM'),
                            price_refunded=:price_bind_variable,
                            shipping_refunded=:shipping_bind_variable,
                            price_tax_refunded=:price_tax_to_refund,
                            shipping_tax_refunded=:shipping_tax_to_refund,
                            refund_id=:refund_id
               where item_id=:item_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-return-4.xql}
dbqd.ecommerce.www.admin.orders.items-return-4.get_base_shipping_tax {dbqd.ecommerce.www.admin.orders.items-return-4.get_base_shipping_tax {      select nvl(shipping_tax_charged,0) from ec_orders where order_id=:order_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-return-4-oracle.xql}
dbqd.ecommerce.www.admin.orders.items-return-4.update_ec_order_set_shipping_refunds {dbqd.ecommerce.www.admin.orders.items-return-4.update_ec_order_set_shipping_refunds {      update ec_orders set shipping_refunded=:base_shipping_to_refund, shipping_tax_refunded=:base_shipping_tax_to_refund where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-return-4.xql}
dbqd.ecommerce.www.admin.orders.items-return.doubleclick_select {dbqd.ecommerce.www.admin.orders.items-return.doubleclick_select {      select count(*) from ec_items_refundable where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-return.xql}
dbqd.ecommerce.www.admin.orders.items-void-2.gift_certificate_amount_select {dbqd.ecommerce.www.admin.orders.items-void-2.gift_certificate_amount_select {      select ec_order_gift_cert_amount(:order_id) from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-void-2-oracle.xql}
dbqd.ecommerce.www.admin.orders.items-void-2.item_state_update {dbqd.ecommerce.www.admin.orders.items-void-2.item_state_update {      update ec_items set item_state='void', voided_date=sysdate, voided_by=:customer_service_rep where item_id in ([join $item_id_list ", "])
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-void-2-oracle.xql}
dbqd.ecommerce.www.admin.orders.items-void-2.item_state_update2 {dbqd.ecommerce.www.admin.orders.items-void-2.item_state_update2 {      update ec_items set item_state='void', voided_date=sysdate, voided_by=:customer_service_rep where order_id=:order_id and product_id=:product_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-void-2-oracle.xql}
dbqd.ecommerce.www.admin.orders.items-void-2.amount_charged_minus_refunded_for_nonvoid_items_select {dbqd.ecommerce.www.admin.orders.items-void-2.amount_charged_minus_refunded_for_nonvoid_items_select {      select nvl(sum(nvl(price_charged,0)) + sum(nvl(shipping_charged,0)) + sum(nvl(price_tax_charged,0)) + sum(nvl(shipping_tax_charged,0)) - sum(nvl(price_refunded,0)) - sum(nvl(shipping_refunded,0)) + sum(nvl(price_tax_refunded,0)) - sum(nvl(shipping_tax_refunded,0)),0) from ec_items where item_state <> 'void' and order_id=:order_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-void-2-oracle.xql}
dbqd.ecommerce.www.admin.orders.items-void-2.certificate_amount_used_select {dbqd.ecommerce.www.admin.orders.items-void-2.certificate_amount_used_select {      select ec_order_gift_cert_amount(:order_id) from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-void-2-oracle.xql}
dbqd.ecommerce.www.admin.orders.items-void-2.problems_log_insert {dbqd.ecommerce.www.admin.orders.items-void-2.problems_log_insert {      insert into ec_problems_log
      (problem_id, problem_date, problem_details, order_id)
      values
      (ec_problem_id_sequence.nextval, sysdate, 'We were unable to reinstate the customer''s gift certificate balance because the amount to be reinstated was larger than the original amount used.  This shouldn''t have happened unless there was a programming error or unless the database was incorrectly updated manually.  The voiding of this order has been aborted.', :order_id)
      
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-void-2-oracle.xql}
dbqd.ecommerce.www.admin.orders.items-void-2.reinstatable_amount_select {dbqd.ecommerce.www.admin.orders.items-void-2.reinstatable_amount_select {      select ec_one_gift_cert_on_one_order(:cert,:order_id) from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-void-2-oracle.xql}
dbqd.ecommerce.www.admin.orders.items-void-2.reinstate_gift_certificate_insert {dbqd.ecommerce.www.admin.orders.items-void-2.reinstate_gift_certificate_insert {      insert into ec_gift_certificate_usage
	    (gift_certificate_id, order_id, amount_reinstated, reinstated_date)
	    values
	    (:cert, :order_id, :iteration_reinstate_amount, sysdate)
	    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-void-2-oracle.xql}
dbqd.ecommerce.www.admin.orders.items-void-2.num_items_select {dbqd.ecommerce.www.admin.orders.items-void-2.num_items_select {      select count(*) from ec_items where order_id=:order_id and product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-void-2.xql}
dbqd.ecommerce.www.admin.orders.items-void-2.amount_charged_minus_refunded_for_nonvoid_items_select {dbqd.ecommerce.www.admin.orders.items-void-2.amount_charged_minus_refunded_for_nonvoid_items_select {      select nvl(sum(nvl(price_charged,0)) + sum(nvl(shipping_charged,0)) + sum(nvl(price_tax_charged,0)) + sum(nvl(shipping_tax_charged,0)) - sum(nvl(price_refunded,0)) - sum(nvl(shipping_refunded,0)) + sum(nvl(price_tax_refunded,0)) - sum(nvl(shipping_tax_refunded,0)),0) from ec_items where item_state <> 'void' and order_id=:order_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-void-2-oracle.xql}
dbqd.ecommerce.www.admin.orders.items-void-2.certs_to_reinstate_list_select {dbqd.ecommerce.www.admin.orders.items-void-2.certs_to_reinstate_list_select {      select u.gift_certificate_id
    from ec_gift_certificate_usage u, ec_gift_certificates c
    where u.gift_certificate_id = c.gift_certificate_id
    and u.order_id = :order_id
    order by expires desc
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-void-2.xql}
dbqd.ecommerce.www.admin.orders.items-void.num_non_void_items_select {dbqd.ecommerce.www.admin.orders.items-void.num_non_void_items_select {      select count(*) from ec_items where order_id=:order_id and product_id=:product_id and item_state<>'void'
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-void.xql}
dbqd.ecommerce.www.admin.orders.items-void.num_items_select {dbqd.ecommerce.www.admin.orders.items-void.num_items_select {      select count(*) from ec_items where order_id=:order_id and product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-void.xql}
dbqd.ecommerce.www.admin.orders.items-void.item_state_select {dbqd.ecommerce.www.admin.orders.items-void.item_state_select {      select item_state from ec_items where order_id=:order_id and product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-void.xql}
dbqd.ecommerce.www.admin.orders.items-void.num_shipped_items_select {dbqd.ecommerce.www.admin.orders.items-void.num_shipped_items_select {      select count(*) from ec_items where order_id=:order_id and product_id=:product_id and item_state in ('shipped','arrived','received_back')
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-void.xql}
dbqd.ecommerce.www.admin.orders.items-void.order_products_select {dbqd.ecommerce.www.admin.orders.items-void.order_products_select {      select i.item_id, i.item_state, p.product_name, i.price_name, i.price_charged
    from ec_items i, ec_products p
    where i.product_id=p.product_id
    and i.order_id=:order_id
    and i.product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/items-void.xql}
dbqd.ecommerce.www.admin.orders.one.order_select {dbqd.ecommerce.www.admin.orders.one.order_select {select o.order_state, o.creditcard_id, o.confirmed_date, o.cs_comments,
       o.shipping_method, o.shipping_address, o.in_basket_date,
       o.authorized_date, o.shipping_charged, o.voided_by, o.voided_date,
       o.reason_for_void, u.user_id, u.first_names, u.last_name
from ec_orders o, cc_users u
where order_id=:order_id
and o.user_id = u.user_id(+)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/one-oracle.xql}
dbqd.ecommerce.www.admin.orders.one.order_select {dbqd.ecommerce.www.admin.orders.one.order_select {select o.order_state, o.creditcard_id, o.confirmed_date, o.cs_comments,
       o.shipping_method, o.shipping_address, o.in_basket_date,
       o.authorized_date, o.shipping_charged, o.voided_by, o.voided_date,
       o.reason_for_void, u.user_id, u.first_names, u.last_name
from ec_orders o, cc_users u
where order_id=:order_id
and o.user_id = u.user_id(+)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/one-oracle.xql}
dbqd.ecommerce.www.admin.orders.one.voided_by_name_select {dbqd.ecommerce.www.admin.orders.one.voided_by_name_select {      select first_names || ' ' || last_name from cc_users where user_id=:voided_by
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/one.xql}
dbqd.ecommerce.www.admin.orders.one.products_select {dbqd.ecommerce.www.admin.orders.one.products_select {      select p.product_name, p.product_id, i.price_name, i.price_charged, count(*) as quantity, i.item_state, i.color_choice, i.size_choice, i.style_choice
from ec_items i, ec_products p
where i.product_id=p.product_id
and i.order_id=:order_id
group by p.product_name, p.product_id, i.price_name, i.price_charged, i.item_state, i.color_choice, i.size_choice, i.style_choice
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/one.xql}
dbqd.ecommerce.www.admin.orders.one.financial_transactions_select {dbqd.ecommerce.www.admin.orders.one.financial_transactions_select {      select t.transaction_id, t.inserted_date, t.transaction_amount, t.transaction_type, t.to_be_captured_p, t.authorized_date, t.marked_date, t.settled_date, t.refunded_date, t.refund_settled_date, t.failed_p, c.creditcard_last_four
from ec_financial_transactions t, ec_creditcards c
where t.creditcard_id=c.creditcard_id
and t.order_id=:order_id
order by transaction_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/one.xql}
dbqd.ecommerce.www.admin.orders.one.shipments_items_products_select {dbqd.ecommerce.www.admin.orders.one.shipments_items_products_select {      select s.shipment_id, s.address_id, s.shipment_date, s.expected_arrival_date, s.carrier, s.tracking_number, s.actual_arrival_date, s.actual_arrival_detail, p.product_name, p.product_id, i.price_name, i.price_charged, count(*) as quantity
from ec_shipments s, ec_items i, ec_products p
where i.shipment_id=s.shipment_id
and i.product_id=p.product_id
and s.order_id=:order_id
group by s.shipment_id, s.address_id, s.shipment_date, s.expected_arrival_date, s.carrier, s.tracking_number, s.actual_arrival_date, s.actual_arrival_detail, p.product_name, p.product_id, i.price_name, i.price_charged
order by s.shipment_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/one.xql}
dbqd.ecommerce.www.admin.orders.one.refunds_select {dbqd.ecommerce.www.admin.orders.one.refunds_select {      select r.refund_id, r.refund_date, r.refunded_by, r.refund_reasons, r.refund_amount, u.first_names, u.last_name, p.product_name, p.product_id, i.price_name, i.price_charged, count(*) as quantity
from ec_refunds r, cc_users u, ec_items i, ec_products p
where r.order_id=:order_id
and r.refunded_by=u.user_id
and i.refund_id=r.refund_id
and p.product_id=i.product_id
group by r.refund_id, r.refund_date, r.refunded_by, r.refund_reasons, r.refund_amount, u.first_names, u.last_name, p.product_name, p.product_id, i.price_name, i.price_charged
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/one.xql}
dbqd.ecommerce.www.admin.orders.refunds.last_24 {dbqd.ecommerce.www.admin.orders.refunds.last_24 {      and sysdate-r.refund_date <= 1
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/refunds-oracle.xql}
dbqd.ecommerce.www.admin.orders.refunds.last_week {dbqd.ecommerce.www.admin.orders.refunds.last_week {      and sysdate-r.refund_date <= 7
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/refunds-oracle.xql}
dbqd.ecommerce.www.admin.orders.refunds.last_month {dbqd.ecommerce.www.admin.orders.refunds.last_month {      and months_between(sysdate,r.refund_date) <= 1
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/refunds-oracle.xql}
dbqd.ecommerce.www.admin.orders.refunds.refunds_select {dbqd.ecommerce.www.admin.orders.refunds.refunds_select {      select r.refund_id, r.refund_date, r.order_id, r.refund_amount, r.refunded_by, u.first_names, u.last_name, count(*) as n_items
from ec_refunds r, cc_users u, ec_items i
where r.refunded_by=u.user_id
and i.refund_id=r.refund_id
$refund_date_query_bit
group by r.refund_id, r.refund_date, r.order_id, r.refund_amount, r.refunded_by, u.first_names, u.last_name
order by $order_by_clause
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/refunds.xql}
dbqd.ecommerce.www.admin.orders.revenue.reportable_transactions_select {dbqd.ecommerce.www.admin.orders.revenue.reportable_transactions_select {      select to_char(inserted_date,'YYYY') as transaction_year, to_char(inserted_date,'Q') as transaction_quarter, sum(case when transaction_type = 'charge' then transaction_amount else -1*transaction_amount end) as revenue
from ec_fin_transactions_reportable
group by to_char(inserted_date,'YYYY'), to_char(inserted_date,'Q')
order by to_char(inserted_date,'YYYY') || to_char(inserted_date,'Q')
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/revenue-oracle.xql}
dbqd.ecommerce.www.admin.orders.revenue.money_select {dbqd.ecommerce.www.admin.orders.revenue.money_select {      select to_char(shipment_date,'YYYY') as shipment_year,
to_char(shipment_date,'Q') as shipment_quarter,
nvl(sum(bal_price_charged),0) as total_price_charged,
nvl(sum(bal_shipping_charged + case when mv.shipment_id = (select min(s2.shipment_id) from ec_shipments s2 where s2.order_id=mv.order_id) then (select nvl(o.shipping_charged else 0 end-nvl(o.shipping_refunded,0) from ec_orders o where o.order_id=mv.order_id),0)),0) as total_shipping_charged,
nvl(sum(bal_tax_charged + case when mv.shipment_id = (select min(s2.shipment_id) from ec_shipments s2 where s2.order_id=mv.order_id) then (select nvl(o.shipping_tax_charged else 0 end-nvl(o.shipping_tax_refunded,0) from ec_orders o where o.order_id=mv.order_id),0)),0) as total_tax_charged
from ec_items_money_view mv
group by to_char(shipment_date,'YYYY'), to_char(shipment_date,'Q')
order by to_char(shipment_date,'YYYY') || to_char(shipment_date,'Q')
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/revenue-oracle.xql}
dbqd.ecommerce.www.admin.orders.revenue.gift_certificates_select {dbqd.ecommerce.www.admin.orders.revenue.gift_certificates_select {      select to_char(issue_date,'YYYY') as issue_year,
to_char(issue_date,'Q') as issue_quarter,
nvl(sum(amount),0) as amount
from ec_gift_certificates where gift_certificate_state in ('authorized_plus_avs','authorized_minus_avs')
group by to_char(issue_date,'YYYY'), to_char(issue_date,'Q')
order by to_char(issue_date,'YYYY') || to_char(issue_date,'Q')
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/revenue-oracle.xql}
dbqd.ecommerce.www.admin.orders.revenue.gift_certificates_select {dbqd.ecommerce.www.admin.orders.revenue.gift_certificates_select {      select to_char(issue_date,'YYYY') as issue_year,
to_char(issue_date,'Q') as issue_quarter,
nvl(sum(amount),0) as amount
from ec_gift_certificates where gift_certificate_state in ('authorized_plus_avs','authorized_minus_avs')
group by to_char(issue_date,'YYYY'), to_char(issue_date,'Q')
order by to_char(issue_date,'YYYY') || to_char(issue_date,'Q')
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/revenue-oracle.xql}
dbqd.ecommerce.www.admin.orders.revenue.gift_certificates_approved_select {dbqd.ecommerce.www.admin.orders.revenue.gift_certificates_approved_select {      select to_char(expires,'YYYY') as expires_year,
to_char(expires,'Q') as expires_quarter,
nvl(sum(gift_certificate_amount_left(gift_certificate_id)),0) + nvl(sum(ec_gift_cert_unshipped_amount(gift_certificate_id)),0) as amount_outstanding
from ec_gift_certificates_approved
group by to_char(expires,'YYYY'), to_char(expires,'Q')
order by to_char(expires,'YYYY') || to_char(expires,'Q')
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/revenue-oracle.xql}
dbqd.ecommerce.www.admin.orders.search.order_id_query_string_sql {dbqd.ecommerce.www.admin.orders.search.order_id_query_string_sql {    select o.order_id, o.confirmed_date, o.order_state,
           ec_total_price(o.order_id) as price_to_display,
           o.user_id,
           u.first_names, u.last_name,
           count(*) as n_items
      from ec_orders o, cc_users u, ec_items i
     where o.order_id like :order_id_query_string
       and o.user_id=u.user_id(+)
       and o.order_id=i.order_id
  group by o.order_id, o.confirmed_date, o.order_state,
           ec_total_price(o.order_id), o.user_id,
           u.first_names, u.last_name
  order by order_id
  
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/search-oracle.xql}
dbqd.ecommerce.www.admin.orders.search.product_sku_query_string_sql {dbqd.ecommerce.www.admin.orders.search.product_sku_query_string_sql {    select o.order_id, o.confirmed_date, o.order_state,
           ec_total_price(o.order_id) as price_to_display,
           o.user_id,
           u.first_names, u.last_name,
           p.product_name,
           count(*) as n_items
      from ec_orders o, cc_users u, ec_items i, ec_products p
     where upper(p.sku) like upper(:product_sku_query_string)
       and i.product_id=p.product_id
       and o.user_id=u.user_id(+)
       and o.order_id=i.order_id
  group by o.order_id, o.confirmed_date, o.order_state,
           ec_total_price(o.order_id),
           o.user_id,
           u.first_names, u.last_name, p.product_name
  order by order_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/search-oracle.xql}
dbqd.ecommerce.www.admin.orders.search.product_name_query_string_sql {dbqd.ecommerce.www.admin.orders.search.product_name_query_string_sql {    select o.order_id, o.confirmed_date, o.order_state,
           ec_total_price(o.order_id) as price_to_display,
           o.user_id,
           u.first_names, u.last_name,
           p.product_name,
           count(*) as n_items
      from ec_orders o, cc_users u, ec_items i, ec_products p
     where upper(p.product_name) like upper(:product_name_query_string)
       and i.product_id=p.product_id
       and o.user_id=u.user_id(+)
       and o.order_id=i.order_id
  group by o.order_id, o.confirmed_date, o.order_state,
           ec_total_price(o.order_id),
           o.user_id,
           u.first_names, u.last_name, p.product_name
  order by order_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/search-oracle.xql}
dbqd.ecommerce.www.admin.orders.search.default_sql {dbqd.ecommerce.www.admin.orders.search.default_sql {    select o.order_id, o.confirmed_date, o.order_state,
           ec_total_price(o.order_id) as price_to_display,
           o.user_id,
           u.first_names, u.last_name,
           count(*) as n_items
      from ec_orders o, cc_users u, ec_items i
     where upper(u.last_name) like upper(:cust_last_name_query_string)
       and o.user_id=u.user_id(+)
       and o.order_id=i.order_id
  group by o.order_id, o.confirmed_date, o.order_state,
           ec_total_price(o.order_id),
           o.user_id,
           u.first_names, u.last_name
  order by order_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/search-oracle.xql}
dbqd.ecommerce.www.admin.orders.shipments.get_carrier_list {dbqd.ecommerce.www.admin.orders.shipments.get_carrier_list {      select unique carrier from ec_shipments where carrier is not null order by carrier
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/shipments-oracle.xql}
dbqd.ecommerce.www.admin.orders.shipments.shipments_select {dbqd.ecommerce.www.admin.orders.shipments.shipments_select {select s.shipment_id,
       s.shipment_date,
       s.order_id,
       s.carrier,
       decode(nvl((select count(*) from ec_items where order_id=s.order_id),0),nvl((select count(*) from ec_items where shipment_id=s.shipment_id),0),'Full','Partial') as full_or_partial,
       nvl((select count(*) from ec_items where shipment_id=s.shipment_id),0) as n_items
from ec_shipments s
$where_clause
order by $order_by_clause

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/shipments-oracle.xql}
dbqd.ecommerce.www.admin.orders.track.shipment_select {dbqd.ecommerce.www.admin.orders.track.shipment_select {select to_char(shipment_date, 'MMDDYY') as ship_date_for_fedex, to_char(shipment_date, 'MM/DD/YYYY') as pretty_ship_date, carrier, tracking_number
from ec_shipments
where shipment_id = :shipment_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/track-oracle.xql}
dbqd.ecommerce.www.admin.orders.void-2.order_update {dbqd.ecommerce.www.admin.orders.void-2.order_update {  update ec_orders
  set order_state='void',
  reason_for_void=:reason_for_void,
  voided_by=:customer_service_rep,
  voided_date=sysdate
  where order_id=:order_id
  
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/void-2-oracle.xql}
dbqd.ecommerce.www.admin.orders.void-2.gift_certificates_reinst {dbqd.ecommerce.www.admin.orders.void-2.gift_certificates_reinst {      declare begin ec_reinst_gift_cert_on_order(:order_id); end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/void-2-oracle.xql}
dbqd.ecommerce.www.admin.orders.void-2.items_update {dbqd.ecommerce.www.admin.orders.void-2.items_update {  update ec_items
  set item_state='void',
  voided_by=:customer_service_rep
  where order_id=:order_id
  
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/void-2.xql}
dbqd.ecommerce.www.admin.orders.void.shipped_items_count {dbqd.ecommerce.www.admin.orders.void.shipped_items_count {      select count(*) from ec_items where order_id=:order_id and item_state in ('shipped', 'arrived', 'received_back')
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/orders/void.xql}
dbqd.ecommerce.www.admin.problems.index.problems_select {dbqd.ecommerce.www.admin.problems.index.problems_select { select 
      l.*, 
      u.first_names || ' ' || u.last_name as user_name
 from ec_problems_log l, 
      cc_users u
 where l.resolved_by = u.user_id(+)
      $sql_clause
 order by problem_date asc
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/problems/index-oracle.xql}
dbqd.ecommerce.www.admin.problems.index.unused_all {dbqd.ecommerce.www.admin.problems.index.unused_all {      select count(*) from ec_problems_log
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/problems/index.xql}
dbqd.ecommerce.www.admin.problems.index.unused_null {dbqd.ecommerce.www.admin.problems.index.unused_null {      select count(*) from ec_problems_log where resolved_date is null
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/problems/index.xql}
dbqd.ecommerce.www.admin.problems.index.problems_select {dbqd.ecommerce.www.admin.problems.index.problems_select { select 
      l.*, 
      u.first_names || ' ' || u.last_name as user_name
 from ec_problems_log l, 
      cc_users u
 where l.resolved_by = u.user_id(+)
      $sql_clause
 order by problem_date asc
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/problems/index-oracle.xql}
dbqd.ecommerce.www.admin.problems.resolve-2.unused {dbqd.ecommerce.www.admin.problems.resolve-2.unused {      update ec_problems_log set resolved_by=:user_id, resolved_date=sysdate where problem_id = :problem_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/problems/resolve-2-oracle.xql}
dbqd.ecommerce.www.admin.problems.resolve.problem_select {dbqd.ecommerce.www.admin.problems.resolve.problem_select {      select problem_details, problem_date from ec_problems_log where problem_id = :problem_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/problems/resolve.xql}
dbqd.ecommerce.www.admin.products.add-2.all_date_and_integer_custom_fields {dbqd.ecommerce.www.admin.products.add-2.all_date_and_integer_custom_fields {	select column_type, field_identifier, field_name
	from ec_custom_product_fields
	where column_type in ('date','integer')
	and active_p='t'
      
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/add-2.xql}
dbqd.ecommerce.www.admin.products.add-2.custom_fields_select {dbqd.ecommerce.www.admin.products.add-2.custom_fields_select {      select field_identifier from ec_custom_product_fields where active_p='t'
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/add-2.xql}
dbqd.ecommerce.www.admin.products.add-2.user_class_select {dbqd.ecommerce.www.admin.products.add-2.user_class_select {      select user_class_id from ec_user_classes
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/add-2.xql}
dbqd.ecommerce.www.admin.products.add-3.user_class_select {dbqd.ecommerce.www.admin.products.add-3.user_class_select {      select user_class_id, user_class_name from ec_user_classes order by user_class_name
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/add-3.xql}
dbqd.ecommerce.www.admin.products.add-3.custom_fields_select {dbqd.ecommerce.www.admin.products.add-3.custom_fields_select {  select field_identifier, field_name, column_type
  from ec_custom_product_fields
  where active_p = 't'

      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/add-3.xql}
dbqd.ecommerce.www.admin.products.add-3.template_name_select {dbqd.ecommerce.www.admin.products.add-3.template_name_select {      select template_name from ec_templates where template_id=:template_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/add-3.xql}
dbqd.ecommerce.www.admin.products.add-3.custom_fields_select {dbqd.ecommerce.www.admin.products.add-3.custom_fields_select {  select field_identifier, field_name, column_type
  from ec_custom_product_fields
  where active_p = 't'

      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/add-3.xql}
dbqd.ecommerce.www.admin.products.add-3.user_class_select {dbqd.ecommerce.www.admin.products.add-3.user_class_select {      select user_class_id from ec_user_classes
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/add-3.xql}
dbqd.ecommerce.www.admin.products.add-4.product_insert {dbqd.ecommerce.www.admin.products.add-4.product_insert {	begin
	:1 := ec_product.new(product_id => :product_id,
	object_type => 'ec_product',
	creation_date => sysdate,
	creation_user => :user_id,
	creation_ip => :peeraddr,
	context_id => :context_id,
	product_name => :product_name, 
	price => :price, 
	sku => :sku,
	one_line_description => :one_line_description, 
	detailed_description => :detailed_description, 
	search_keywords => :search_keywords, 
	present_p => :present_p, 
	stock_status => :stock_status,
	dirname => :dirname, 
	available_date => to_date(:available_date, 'YYYY-MM-DD'), 
	color_list => :color_list, 
	size_list => :size_list, 
	style_list => :style_list, 
	email_on_purchase_list => :email_on_purchase_list, 
	url => :url,
	no_shipping_avail_p => :no_shipping_avail_p, 
	shipping => :shipping,
	shipping_additional => :shipping_additional, 
	weight => :weight, 
	active_p => 't',
	template_id => :template_id
	);
	end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/products/add-4-oracle.xql}
dbqd.ecommerce.www.admin.products.add-4.audit_info_sql {dbqd.ecommerce.www.admin.products.add-4.audit_info_sql {      sysdate, :user_id, :peeraddr

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/products/add-4-oracle.xql}
dbqd.ecommerce.www.admin.products.add-4.doubleclick_select {dbqd.ecommerce.www.admin.products.add-4.doubleclick_select {      select count(*) from ec_products where product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/add-4.xql}
dbqd.ecommerce.www.admin.products.add-4.user_class_select {dbqd.ecommerce.www.admin.products.add-4.user_class_select {      select user_class_id from ec_user_classes
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/add-4.xql}
dbqd.ecommerce.www.admin.products.add-4.custom_columns_select {dbqd.ecommerce.www.admin.products.add-4.custom_columns_select {    select field_identifier
    from ec_custom_product_fields
    where active_p='t'
  
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/add-4.xql}
dbqd.ecommerce.www.admin.products.add-4.custom_fields_insert {dbqd.ecommerce.www.admin.products.add-4.custom_fields_insert {  insert into ec_custom_product_field_values
  ([join $custom_columns_to_insert ", "], $audit_fields)
  values
  ([join $custom_column_values_to_insert ","], $audit_info)
  
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/add-4.xql}
dbqd.ecommerce.www.admin.products.add-4.category_insert {dbqd.ecommerce.www.admin.products.add-4.category_insert {    insert into ec_category_product_map (product_id, category_id, $audit_fields)
    values
    (:product_id, :category_id, $audit_info)
    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/add-4.xql}
dbqd.ecommerce.www.admin.products.add-4.subcategory_insert {dbqd.ecommerce.www.admin.products.add-4.subcategory_insert {    insert into ec_subcategory_product_map (
     product_id, subcategory_id, $audit_fields) values (
     :product_id, :subcategory_id, $audit_info)
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/add-4.xql}
dbqd.ecommerce.www.admin.products.add-4.subsubcategory_insert {dbqd.ecommerce.www.admin.products.add-4.subsubcategory_insert {    insert into ec_subsubcategory_product_map (
     product_id, subsubcategory_id, $audit_fields) values (
     :product_id, :subsubcategory_id, $audit_info)
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/add-4.xql}
dbqd.ecommerce.www.admin.products.add-4.user_class_insert {dbqd.ecommerce.www.admin.products.add-4.user_class_insert {      insert into ec_product_user_class_prices (
      product_id, user_class_id, price, $audit_fields) values (
      :product_id, :user_class_id, :uc_price, $audit_info)
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/add-4.xql}
dbqd.ecommerce.www.admin.products.add.num_user_classes_select {dbqd.ecommerce.www.admin.products.add.num_user_classes_select {      select count(*) from ec_user_classes
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/add.xql}
dbqd.ecommerce.www.admin.products.add.user_class_select {dbqd.ecommerce.www.admin.products.add.user_class_select {    select user_class_id, 
           user_class_name 
    from ec_user_classes 
    order by user_class_name
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/add.xql}
dbqd.ecommerce.www.admin.products.add.num_custom_product_fields_select {dbqd.ecommerce.www.admin.products.add.num_custom_product_fields_select {      select count(*) from ec_custom_product_fields where active_p='t'
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/add.xql}
dbqd.ecommerce.www.admin.products.add.custom_fields_select {dbqd.ecommerce.www.admin.products.add.custom_fields_select {    select field_identifier, 
           field_name, 
           default_value, 
           column_type 
    from ec_custom_product_fields 
    where active_p='t' order by creation_date
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/add.xql}
dbqd.ecommerce.www.admin.products.by-category.product_categories_select {dbqd.ecommerce.www.admin.products.by-category.product_categories_select {select cats.category_id, cats.sort_key, cats.category_name, count(cat_view.product_id) as n_products, sum(cat_view.n_sold) as total_sold_in_category
from 
  ec_categories cats, 
  (select map.product_id, map.category_id, count(i.item_id) as n_sold
   from ec_category_product_map map, ec_items_reportable i
   where map.product_id = i.product_id(+)
   group by map.product_id, map.category_id) cat_view
where cats.category_id = cat_view.category_id(+)
group by cats.category_id, cats.sort_key, cats.category_name
order by cats.sort_key
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/products/by-category-oracle.xql}
dbqd.ecommerce.www.admin.products.by-category.product_categories_select {dbqd.ecommerce.www.admin.products.by-category.product_categories_select {select cats.category_id, cats.sort_key, cats.category_name, count(cat_view.product_id) as n_products, sum(cat_view.n_sold) as total_sold_in_category
from 
  ec_categories cats, 
  (select map.product_id, map.category_id, count(i.item_id) as n_sold
   from ec_category_product_map map, ec_items_reportable i
   where map.product_id = i.product_id(+)
   group by map.product_id, map.category_id) cat_view
where cats.category_id = cat_view.category_id(+)
group by cats.category_id, cats.sort_key, cats.category_name
order by cats.sort_key
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/products/by-category-oracle.xql}
dbqd.ecommerce.www.admin.products.categories-upload-2.subcategories_select {dbqd.ecommerce.www.admin.products.categories-upload-2.subcategories_select {    select c.category_id, c.category_name, s.subcategory_id,
           s.subcategory_name from ec_subcategories s, ec_categories c
    where c.category_id = s.category_id
    and upper(:category) like upper(subcategory_name) || '%'
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/categories-upload-2.xql}
dbqd.ecommerce.www.admin.products.categories-upload-2.category_match_select {dbqd.ecommerce.www.admin.products.categories-upload-2.category_match_select {      select category_id, category_name from ec_categories where upper(:category) like upper(category_name) || '%'
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/categories-upload-2.xql}
dbqd.ecommerce.www.admin.products.custom-field-add-2.dupliciate_field_identifier_select {dbqd.ecommerce.www.admin.products.custom-field-add-2.dupliciate_field_identifier_select {      select count(*) from ec_custom_product_fields where field_identifier=:field_identifier
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/custom-field-add-2.xql}
dbqd.ecommerce.www.admin.products.custom-field-add-2.ec_products_column_conflict_select {dbqd.ecommerce.www.admin.products.custom-field-add-2.ec_products_column_conflict_select {      select count(*) from user_tab_columns where column_name=upper(:field_identifier) and table_name='EC_PRODUCTS'
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/custom-field-add-2.xql}
dbqd.ecommerce.www.admin.products.custom-field-add-3.audit_info_sql {dbqd.ecommerce.www.admin.products.custom-field-add-3.audit_info_sql {      sysdate, :user_id, :peeraddr
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/products/custom-field-add-3-oracle.xql}
dbqd.ecommerce.www.admin.products.custom-field-add-3.alter_statement_sql {dbqd.ecommerce.www.admin.products.custom-field-add-3.alter_statement_sql {      alter table ec_custom_product_field_values add (
      $field_identifier $column_type $end_of_alter)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/products/custom-field-add-3-oracle.xql}
dbqd.ecommerce.www.admin.products.custom-field-add-3.alter_statement_2 {dbqd.ecommerce.www.admin.products.custom-field-add-3.alter_statement_2 {      alter table ec_custom_p_field_values_audit add (
      $field_identifier $column_type)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/products/custom-field-add-3-oracle.xql}
dbqd.ecommerce.www.admin.products.custom-field-add-3.custom_field_drop {dbqd.ecommerce.www.admin.products.custom-field-add-3.custom_field_drop {      alter table ec_custom_product_field_values drop column $field_identifier

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/products/custom-field-add-3-oracle.xql}
dbqd.ecommerce.www.admin.products.custom-field-add-3.doubleclick_select {dbqd.ecommerce.www.admin.products.custom-field-add-3.doubleclick_select {      select count(*) from ec_custom_product_fields where field_identifier=:field_identifier
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/custom-field-add-3.xql}
dbqd.ecommerce.www.admin.products.custom-field-add-3.custom_field_delete {dbqd.ecommerce.www.admin.products.custom-field-add-3.custom_field_delete {      delete from ec_custom_product_fields where field_identifier=:field_identifier
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/custom-field-add-3.xql}
dbqd.ecommerce.www.admin.products.custom-field-add-3.custom_field_delete {dbqd.ecommerce.www.admin.products.custom-field-add-3.custom_field_delete {      delete from ec_custom_product_fields where field_identifier=:field_identifier
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/custom-field-add-3.xql}
dbqd.ecommerce.www.admin.products.custom-field-add-3.custom_field_drop {dbqd.ecommerce.www.admin.products.custom-field-add-3.custom_field_drop {      alter table ec_custom_product_field_values drop column $field_identifier

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/products/custom-field-add-3-oracle.xql}
dbqd.ecommerce.www.admin.products.custom-field-edit-2.custom_fields_update {dbqd.ecommerce.www.admin.products.custom-field-edit-2.custom_fields_update {  update ec_custom_product_fields
  set field_name = :field_name,
      default_value = :default_value,
      column_type = :column_type, 
      last_modified = sysdate, 
      last_modifying_user = :user_id,
      modified_ip_address = :peeraddr
  where field_identifier = :field_identifier

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/products/custom-field-edit-2-oracle.xql}
dbqd.ecommerce.www.admin.products.custom-field-edit-2.alter_table_drop {dbqd.ecommerce.www.admin.products.custom-field-edit-2.alter_table_drop {      alter table ec_custom_product_field_values drop constraint ${field_identifier}_constraint
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/custom-field-edit-2.xql}
dbqd.ecommerce.www.admin.products.custom-field-edit-2.alter_table_modify {dbqd.ecommerce.www.admin.products.custom-field-edit-2.alter_table_modify {      alter table ec_custom_product_field_values
	modify ($field_identifier $column_type)
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/custom-field-edit-2.xql}
dbqd.ecommerce.www.admin.products.custom-field-edit-2.alter_table_modify_audit {dbqd.ecommerce.www.admin.products.custom-field-edit-2.alter_table_modify_audit {      alter table ec_custom_p_field_values_audit
	modify ($field_identifier $column_type)
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/custom-field-edit-2.xql}
dbqd.ecommerce.www.admin.products.custom-field-edit.custom_field_select {dbqd.ecommerce.www.admin.products.custom-field-edit.custom_field_select {select field_name, default_value, column_type, active_p
from ec_custom_product_fields
where field_identifier=:field_identifier

      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/custom-field-edit.xql}
dbqd.ecommerce.www.admin.products.custom-field-status-change.status_update {dbqd.ecommerce.www.admin.products.custom-field-status-change.status_update {update ec_custom_product_fields
set active_p = :active_p,
    last_modified = sysdate,
    last_modifying_user = :user_id,
    modified_ip_address = :peeraddr
where field_identifier = :field_identifier

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/products/custom-field-status-change-oracle.xql}
dbqd.ecommerce.www.admin.products.custom-field.custom_field_select {dbqd.ecommerce.www.admin.products.custom-field.custom_field_select {select field_name, default_value, column_type, active_p
from ec_custom_product_fields
where field_identifier=:field_identifier

      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/custom-field.xql}
dbqd.ecommerce.www.admin.products.custom-fields.custom_fields_select {dbqd.ecommerce.www.admin.products.custom-fields.custom_fields_select {select field_identifier, field_name, active_p
from ec_custom_product_fields
order by active_p desc, field_name

      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/custom-fields.xql}
dbqd.ecommerce.www.admin.products.delete-2.product_delete {dbqd.ecommerce.www.admin.products.delete-2.product_delete {      begin
      ec_product.delete(:product_id);
      end;
  
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/products/delete-2-oracle.xql}
dbqd.ecommerce.www.admin.products.delete-2.order_count_select {dbqd.ecommerce.www.admin.products.delete-2.order_count_select {      select count(*) from ec_items where product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/delete-2.xql}
dbqd.ecommerce.www.admin.products.delete-2.offer_list_select {dbqd.ecommerce.www.admin.products.delete-2.offer_list_select {      select offer_id from ec_offers where product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/delete-2.xql}
dbqd.ecommerce.www.admin.products.delete-2.offers_delete {dbqd.ecommerce.www.admin.products.delete-2.offers_delete {      delete from ec_offers where product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/delete-2.xql}
dbqd.ecommerce.www.admin.products.delete-2.custom_product_fields_delete {dbqd.ecommerce.www.admin.products.delete-2.custom_product_fields_delete {      delete from ec_custom_product_field_values where product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/delete-2.xql}
dbqd.ecommerce.www.admin.products.delete-2.subsubcategory_list_select {dbqd.ecommerce.www.admin.products.delete-2.subsubcategory_list_select {      select subsubcategory_id from ec_subsubcategory_product_map where product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/delete-2.xql}
dbqd.ecommerce.www.admin.products.delete-2.subsubcategory_delete {dbqd.ecommerce.www.admin.products.delete-2.subsubcategory_delete {      delete from ec_subsubcategory_product_map where product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/delete-2.xql}
dbqd.ecommerce.www.admin.products.delete-2.subcategory_list_select {dbqd.ecommerce.www.admin.products.delete-2.subcategory_list_select {      select subcategory_id from ec_subcategory_product_map where product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/delete-2.xql}
dbqd.ecommerce.www.admin.products.delete-2.subcategory_delete {dbqd.ecommerce.www.admin.products.delete-2.subcategory_delete {      delete from ec_subcategory_product_map where product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/delete-2.xql}
dbqd.ecommerce.www.admin.products.delete-2.category_list_select {dbqd.ecommerce.www.admin.products.delete-2.category_list_select {      select category_id from ec_category_product_map where product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/delete-2.xql}
dbqd.ecommerce.www.admin.products.delete-2.category_delete {dbqd.ecommerce.www.admin.products.delete-2.category_delete {      delete from ec_category_product_map where product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/delete-2.xql}
dbqd.ecommerce.www.admin.products.delete-2.review_list_select {dbqd.ecommerce.www.admin.products.delete-2.review_list_select {      select review_id from ec_product_reviews where product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/delete-2.xql}
dbqd.ecommerce.www.admin.products.delete-2.review_delete {dbqd.ecommerce.www.admin.products.delete-2.review_delete {      delete from ec_product_reviews where product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/delete-2.xql}
dbqd.ecommerce.www.admin.products.delete-2.product_comments_delete {dbqd.ecommerce.www.admin.products.delete-2.product_comments_delete {      delete from ec_product_comments where product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/delete-2.xql}
dbqd.ecommerce.www.admin.products.delete-2.product_a_list_select {dbqd.ecommerce.www.admin.products.delete-2.product_a_list_select {      select product_a from ec_product_links where product_b=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/delete-2.xql}
dbqd.ecommerce.www.admin.products.delete-2.product_b_list_select {dbqd.ecommerce.www.admin.products.delete-2.product_b_list_select {      select product_b from ec_product_links where product_a=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/delete-2.xql}
dbqd.ecommerce.www.admin.products.delete-2.links_delete {dbqd.ecommerce.www.admin.products.delete-2.links_delete {      delete from ec_product_links where product_a=:product_id or product_b=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/delete-2.xql}
dbqd.ecommerce.www.admin.products.delete-2.user_class_select {dbqd.ecommerce.www.admin.products.delete-2.user_class_select {      select user_class_id, price from ec_product_user_class_prices where product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/delete-2.xql}
dbqd.ecommerce.www.admin.products.delete-2.delete_from_session_info {dbqd.ecommerce.www.admin.products.delete-2.delete_from_session_info {      delete from ec_user_session_info where product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/delete-2.xql}
dbqd.ecommerce.www.admin.products.delete-2.user_class_prices_delete {dbqd.ecommerce.www.admin.products.delete-2.user_class_prices_delete {      delete from ec_product_user_class_prices where product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/delete-2.xql}
dbqd.ecommerce.www.admin.products.delete-2.series_id_list_select {dbqd.ecommerce.www.admin.products.delete-2.series_id_list_select {      select series_id from ec_product_series_map where component_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/delete-2.xql}
dbqd.ecommerce.www.admin.products.delete-2.component_id_list_select {dbqd.ecommerce.www.admin.products.delete-2.component_id_list_select {      select component_id from ec_product_series_map where series_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/delete-2.xql}
dbqd.ecommerce.www.admin.products.delete-2.series_delete {dbqd.ecommerce.www.admin.products.delete-2.series_delete {      delete from ec_product_series_map where series_id=:product_id or component_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/delete-2.xql}
dbqd.ecommerce.www.admin.products.delete-2.sale_price_list_select {dbqd.ecommerce.www.admin.products.delete-2.sale_price_list_select {      select sale_price_id from ec_sale_prices where product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/delete-2.xql}
dbqd.ecommerce.www.admin.products.delete-2.sale_price_delete {dbqd.ecommerce.www.admin.products.delete-2.sale_price_delete {      delete from ec_sale_prices where product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/delete-2.xql}
dbqd.ecommerce.www.admin.products.edit-2.all_date_and_integer_custom_fields {dbqd.ecommerce.www.admin.products.edit-2.all_date_and_integer_custom_fields {	select column_type, field_identifier, field_name
	from ec_custom_product_fields
	where column_type in ('date','integer')
	and active_p='t'
      
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/edit-2.xql}
dbqd.ecommerce.www.admin.products.edit-2.dirname_select {dbqd.ecommerce.www.admin.products.edit-2.dirname_select {      select dirname from ec_products where product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/edit-2.xql}
dbqd.ecommerce.www.admin.products.edit-2.user_classes_select {dbqd.ecommerce.www.admin.products.edit-2.user_classes_select {      select user_class_id, user_class_name from ec_user_classes order by user_class_name
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/edit-2.xql}
dbqd.ecommerce.www.admin.products.edit-2.custom_fields_select {dbqd.ecommerce.www.admin.products.edit-2.custom_fields_select {  select field_identifier, field_name, column_type
  from ec_custom_product_fields
  where active_p = 't'

      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/edit-2.xql}
dbqd.ecommerce.www.admin.products.edit-2.template_name_select {dbqd.ecommerce.www.admin.products.edit-2.template_name_select {      select template_name from ec_templates where template_id=:template_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/edit-2.xql}
dbqd.ecommerce.www.admin.products.edit-2.custom_fields_select {dbqd.ecommerce.www.admin.products.edit-2.custom_fields_select {      select field_identifier from ec_custom_product_fields where active_p='t'
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/edit-2.xql}
dbqd.ecommerce.www.admin.products.edit-2.user_class_select {dbqd.ecommerce.www.admin.products.edit-2.user_class_select {      select user_class_id from ec_user_classes
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/edit-2.xql}
dbqd.ecommerce.www.admin.products.edit-3.audit_info_sql {dbqd.ecommerce.www.admin.products.edit-3.audit_info_sql {      sysdate, :user_id, :peeraddr
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/products/edit-3-oracle.xql}
dbqd.ecommerce.www.admin.products.edit-3.audit_update_sql {dbqd.ecommerce.www.admin.products.edit-3.audit_update_sql {      last_modified=sysdate, last_modifying_user=:user_id, modified_ip_address=:peeraddr
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/products/edit-3-oracle.xql}
dbqd.ecommerce.www.admin.products.edit-3.product_update {dbqd.ecommerce.www.admin.products.edit-3.product_update {  update ec_products
  set product_name=:product_name,
      sku=:sku,
      one_line_description=:one_line_description,
      detailed_description=:detailed_description,
      color_list=:color_list,
      size_list=:size_list,
      style_list=:style_list,
      email_on_purchase_list=:email_on_purchase_list,
      search_keywords=:search_keywords,
      url=:url,
      price=:price,
      no_shipping_avail_p=:no_shipping_avail_p,
      present_p=:present_p,
      available_date=:available_date,
      shipping=:shipping,
      shipping_additional=:shipping_additional,
      weight=:weight,
      template_id=:template_id,
      stock_status=:stock_status,
      $audit_update
  where product_id=:product_id
  
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/edit-3.xql}
dbqd.ecommerce.www.admin.products.edit-3.custom_columns_select {dbqd.ecommerce.www.admin.products.edit-3.custom_columns_select {      select field_identifier from ec_custom_product_fields where active_p='t'
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/edit-3.xql}
dbqd.ecommerce.www.admin.products.edit-3.num_custom_columns {dbqd.ecommerce.www.admin.products.edit-3.num_custom_columns {      select count(*) from ec_custom_product_field_values where product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/edit-3.xql}
dbqd.ecommerce.www.admin.products.edit-3.custom_field_insert {dbqd.ecommerce.www.admin.products.edit-3.custom_field_insert {    insert into ec_custom_product_field_values
    ([join $custom_columns_to_insert ", "], $audit_fields)
    values
    ([join $custom_column_values_to_insert ","], $audit_info)
    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/edit-3.xql}
dbqd.ecommerce.www.admin.products.edit-3.custom_fields_update {dbqd.ecommerce.www.admin.products.edit-3.custom_fields_update {      update ec_custom_product_field_values set [join $update_list ", "], $audit_update where product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/edit-3.xql}
dbqd.ecommerce.www.admin.products.edit-3.old_category_id_list_select {dbqd.ecommerce.www.admin.products.edit-3.old_category_id_list_select {      select category_id from ec_category_product_map where product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/edit-3.xql}
dbqd.ecommerce.www.admin.products.edit-3.old_subcategory_id_list_select {dbqd.ecommerce.www.admin.products.edit-3.old_subcategory_id_list_select {      select subcategory_id from ec_subcategory_product_map where product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/edit-3.xql}
dbqd.ecommerce.www.admin.products.edit-3.old_subsubcategory_id_list_select {dbqd.ecommerce.www.admin.products.edit-3.old_subsubcategory_id_list_select {      select subsubcategory_id from ec_subsubcategory_product_map where product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/edit-3.xql}
dbqd.ecommerce.www.admin.products.edit-3.subsubcategory_delete {dbqd.ecommerce.www.admin.products.edit-3.subsubcategory_delete {      delete from ec_subsubcategory_product_map where product_id=$product_id and subsubcategory_id=:old_subsubcategory_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/edit-3.xql}
dbqd.ecommerce.www.admin.products.edit-3.subcategory_delete {dbqd.ecommerce.www.admin.products.edit-3.subcategory_delete {      delete from ec_subcategory_product_map where product_id=:product_id and subcategory_id=:old_subcategory_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/edit-3.xql}
dbqd.ecommerce.www.admin.products.edit-3.category_delete {dbqd.ecommerce.www.admin.products.edit-3.category_delete {      delete from ec_category_product_map where product_id=:product_id and category_id=:old_category_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/edit-3.xql}
dbqd.ecommerce.www.admin.products.edit-3.category_insert {dbqd.ecommerce.www.admin.products.edit-3.category_insert {      insert into ec_category_product_map (product_id, category_id, $audit_fields) values (:product_id, :new_category_id, $audit_info)
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/edit-3.xql}
dbqd.ecommerce.www.admin.products.edit-3.subcategory_insert {dbqd.ecommerce.www.admin.products.edit-3.subcategory_insert {      insert into ec_subcategory_product_map (product_id, subcategory_id, $audit_fields) values (:product_id, :new_subcategory_id, $audit_info)
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/edit-3.xql}
dbqd.ecommerce.www.admin.products.edit-3.subsubcategory_insert {dbqd.ecommerce.www.admin.products.edit-3.subsubcategory_insert {      insert into ec_subsubcategory_product_map (product_id, subsubcategory_id, $audit_fields) values (:product_id, :new_subsubcategory_id, $audit_info)
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/edit-3.xql}
dbqd.ecommerce.www.admin.products.edit-3.all_user_class_id_list_select {dbqd.ecommerce.www.admin.products.edit-3.all_user_class_id_list_select {      select user_class_id from ec_user_classes
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/edit-3.xql}
dbqd.ecommerce.www.admin.products.edit-3.user_class_select {dbqd.ecommerce.www.admin.products.edit-3.user_class_select {      select user_class_id, price from ec_product_user_class_prices where product_id=$product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/edit-3.xql}
dbqd.ecommerce.www.admin.products.edit-3.user_class_price_delete {dbqd.ecommerce.www.admin.products.edit-3.user_class_price_delete {      delete from ec_product_user_class_prices where user_class_id = :user_class_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/edit-3.xql}
dbqd.ecommerce.www.admin.products.edit-3.user_class_price_insert {dbqd.ecommerce.www.admin.products.edit-3.user_class_price_insert {      insert into ec_product_user_class_prices (product_id, user_class_id, price, $audit_fields) values (:product_id, :user_class_id, :user_class_price, $audit_info)
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/edit-3.xql}
dbqd.ecommerce.www.admin.products.edit-3.user_class_price_update {dbqd.ecommerce.www.admin.products.edit-3.user_class_price_update {      update ec_product_user_class_prices set price=:user_class_price, $audit_update where user_class_id = :user_class_id and product_id = :product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/edit-3.xql}
dbqd.ecommerce.www.admin.products.edit.product_select {dbqd.ecommerce.www.admin.products.edit.product_select {select product_id, sku, product_name,                                           to_char(creation_date, 'YYYY-MM-DD') as creation_date, one_line_description,    detailed_description, search_keywords, price, no_shipping_avail_p, shipping,    shipping_additional, weight, dirname, present_p, active_p,                      to_char(available_date, 'YYYY-MM-DD') as available_date, announcements,         to_char(announcements_expire, 'YYYY-MM-DD') as announcements_expire, url,       template_id, stock_status, color_list, size_list, style_list,                   email_on_purchase_list, to_char(last_modified, 'YYYY-MM-DD') as last_modified,  last_modifying_user, modified_ip_address                                        from ec_products where product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/edit.xql}
dbqd.ecommerce.www.admin.products.edit.category_list_select {dbqd.ecommerce.www.admin.products.edit.category_list_select {      select category_id from ec_category_product_map where product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/edit.xql}
dbqd.ecommerce.www.admin.products.edit.subcategory_list_select {dbqd.ecommerce.www.admin.products.edit.subcategory_list_select {      select subcategory_id from ec_subcategory_product_map where product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/edit.xql}
dbqd.ecommerce.www.admin.products.edit.subsubcategory_list_select {dbqd.ecommerce.www.admin.products.edit.subsubcategory_list_select {      select subsubcategory_id from ec_subsubcategory_product_map where product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/edit.xql}
dbqd.ecommerce.www.admin.products.edit.num_user_classes_select {dbqd.ecommerce.www.admin.products.edit.num_user_classes_select {      select count(*) from ec_user_classes
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/edit.xql}
dbqd.ecommerce.www.admin.products.edit.user_classes_select {dbqd.ecommerce.www.admin.products.edit.user_classes_select {      select user_class_id, user_class_name from ec_user_classes order by user_class_name
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/edit.xql}
dbqd.ecommerce.www.admin.products.edit.price_select {dbqd.ecommerce.www.admin.products.edit.price_select {      select price from ec_product_user_class_prices where product_id=:product_id and user_class_id=:user_class_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/edit.xql}
dbqd.ecommerce.www.admin.products.edit.num_custom_product_fields_select {dbqd.ecommerce.www.admin.products.edit.num_custom_product_fields_select {      select count(*) from ec_custom_product_fields where active_p='t'
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/edit.xql}
dbqd.ecommerce.www.admin.products.edit.custom_fields_select {dbqd.ecommerce.www.admin.products.edit.custom_fields_select {      select field_identifier, field_name, default_value, column_type from ec_custom_product_fields where active_p='t' order by creation_date
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/edit.xql}
dbqd.ecommerce.www.admin.products.edit.custom_field_value_select {dbqd.ecommerce.www.admin.products.edit.custom_field_value_select {      select $field_identifier from ec_custom_product_field_values where product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/edit.xql}
dbqd.ecommerce.www.admin.products.index.products_select {dbqd.ecommerce.www.admin.products.index.products_select {      select count(*) as n_products, round(avg(price),2) as avg_price from ec_products_displayable
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/index.xql}
dbqd.ecommerce.www.admin.products.link-add-3.to_link_insert {dbqd.ecommerce.www.admin.products.link-add-3.to_link_insert {      insert into ec_product_links
      (product_a, product_b, last_modified, last_modifying_user, modified_ip_address)
      values
      (:link_product_id, :product_id, sysdate, :user_id, :peeraddr)
      
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/products/link-add-3-oracle.xql}
dbqd.ecommerce.www.admin.products.link-add-3.from_link_insert {dbqd.ecommerce.www.admin.products.link-add-3.from_link_insert {      insert into ec_product_links
      (product_a, product_b, last_modified, last_modifying_user, modified_ip_address)
      values
      (:product_id, :link_product_id, sysdate, :user_id, :peeraddr)
      
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/products/link-add-3-oracle.xql}
dbqd.ecommerce.www.admin.products.link-add-3.both_or_to_duplicate_check {dbqd.ecommerce.www.admin.products.link-add-3.both_or_to_duplicate_check {      select count(*) from ec_product_links where product_a=:link_product_id and product_b=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/link-add-3.xql}
dbqd.ecommerce.www.admin.products.link-add-3.both_or_from_duplicate_check {dbqd.ecommerce.www.admin.products.link-add-3.both_or_from_duplicate_check {      select count(*) from ec_product_links where product_a=:product_id and product_b=:link_product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/link-add-3.xql}
dbqd.ecommerce.www.admin.products.link-add.product_search_select {dbqd.ecommerce.www.admin.products.link-add.product_search_select {      select product_id as link_product_id, product_name as link_product_name from ec_products where $additional_query_part
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/link-add.xql}
dbqd.ecommerce.www.admin.products.link-delete-2.link_delete {dbqd.ecommerce.www.admin.products.link-delete-2.link_delete {      delete from ec_product_links where product_a=:product_a and product_b=:product_b
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/link-delete-2.xql}
dbqd.ecommerce.www.admin.products.link.linked_products_select {dbqd.ecommerce.www.admin.products.link.linked_products_select {select product_b, product_name as product_b_name
from ec_product_links, ec_products
where product_a=:product_id
and product_b=ec_products.product_id

      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/link.xql}
dbqd.ecommerce.www.admin.products.link.more_links_select {dbqd.ecommerce.www.admin.products.link.more_links_select {select product_a, product_name as product_a_name
from ec_product_links, ec_products
where product_b=:product_id
and ec_product_links.product_a=ec_products.product_id

      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/link.xql}
dbqd.ecommerce.www.admin.products.list.product_select {dbqd.ecommerce.www.admin.products.list.product_select {      select ep.product_id, ep.product_name, ep.available_date, count(distinct eir.item_id) as n_items_ordered, count(distinct epc.comment_id) as n_comments
from ec_products ep, ec_items_reportable eir, ec_product_comments epc
where ep.product_id = eir.product_id(+) 
and ep.product_id = epc.product_id(+) $category_exclusion_clause
group by ep.product_id, ep.product_name, ep.available_date
$order_by_clause
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/products/list-oracle.xql}
dbqd.ecommerce.www.admin.products.list.category_name_select {dbqd.ecommerce.www.admin.products.list.category_name_select {      select category_name from ec_categories where category_id = :category_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/list.xql}
dbqd.ecommerce.www.admin.products.list.product_select {dbqd.ecommerce.www.admin.products.list.product_select {      select ep.product_id, ep.product_name, ep.available_date, count(distinct eir.item_id) as n_items_ordered, count(distinct epc.comment_id) as n_comments
from ec_products ep, ec_items_reportable eir, ec_product_comments epc
where ep.product_id = eir.product_id(+) 
and ep.product_id = epc.product_id(+) $category_exclusion_clause
group by ep.product_id, ep.product_name, ep.available_date
$order_by_clause
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/products/list-oracle.xql}
dbqd.ecommerce.www.admin.products.offer-add-2.offer_insert {dbqd.ecommerce.www.admin.products.offer-add-2.offer_insert {insert into ec_offers
(offer_id, product_id, retailer_id, price, shipping, stock_status,
 special_offer_p, special_offer_html, offer_begins,
 offer_ends $additional_column, last_modified, last_modifying_user,
 modified_ip_address)
values
(:offer_id, :product_id, :retailer_id, :price, :shipping, :stock_status,
 :special_offer_p, :special_offer_html,
 to_date(:offer_begins, 'YYYY-MM-DD HH24:MI:SS'),
 to_date(:offer_ends,'YYYY-MM-DD HH24:MI:SS') $additional_value, sysdate,
 :user_id, :peeraddr)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/products/offer-add-2-oracle.xql}
dbqd.ecommerce.www.admin.products.offer-add-2.doubleclick_select {dbqd.ecommerce.www.admin.products.offer-add-2.doubleclick_select {      select count(*) from ec_offers where offer_id=:offer_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/offer-add-2.xql}
dbqd.ecommerce.www.admin.products.offer-add.duplicate_offer_select {dbqd.ecommerce.www.admin.products.offer-add.duplicate_offer_select {select count(*) from ec_offers
where product_id=:product_id
and retailer_id=:retailer_id
and deleted_p='f'
and (($to_date_offer_begins >= offer_begins and $to_date_offer_begins <= offer_ends) or ($to_date_offer_ends >= offer_begins and $to_date_offer_ends <= offer_ends) or ($to_date_offer_begins <= offer_ends and $to_date_offer_ends >= offer_ends))

      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/offer-add.xql}
dbqd.ecommerce.www.admin.products.offer-add.retailer_name_select {dbqd.ecommerce.www.admin.products.offer-add.retailer_name_select {select retailer_name || ' (' || case when reach = 'web' then url else city || ', ' || usps_abbrev end || ')'  from ec_retailers where retailer_id=:retailer_id

      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/offer-add.xql}
dbqd.ecommerce.www.admin.products.offer-delete-2.offer_delete_update {dbqd.ecommerce.www.admin.products.offer-delete-2.offer_delete_update {update ec_offers
set deleted_p=:deleted_p,
    last_modified=sysdate,
    last_modifying_user=:user_id,
    modified_ip_address=:peeraddr
where product_id=:product_id
and retailer_id=:retailer_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/products/offer-delete-2-oracle.xql}
dbqd.ecommerce.www.admin.products.offer-edit-2.duplicate_offer_select {dbqd.ecommerce.www.admin.products.offer-edit-2.duplicate_offer_select {      select count(*) from ec_offers
where product_id=:product_id
and retailer_id=:retailer_id
and offer_id != :offer_id
and deleted_p='f'
and (($to_date_offer_begins >= offer_begins and $to_date_offer_begins <= offer_ends) or ($to_date_offer_ends >= offer_begins and $to_date_offer_ends <= offer_ends) or ($to_date_offer_begins <= offer_ends and $to_date_offer_ends >= offer_ends))

      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/offer-edit-2.xql}
dbqd.ecommerce.www.admin.products.offer-edit-2.retailer_name_select {dbqd.ecommerce.www.admin.products.offer-edit-2.retailer_name_select {      select retailer_name || ' (' || city || ', ' || usps_abbrev || ')' as retailer_name_to_print from ec_retailers where retailer_id=:retailer_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/offer-edit-2.xql}
dbqd.ecommerce.www.admin.products.offer-edit-3.unused {dbqd.ecommerce.www.admin.products.offer-edit-3.unused {update ec_offers
set retailer_id = :retailer_id,
    price = :price,
    shipping = :shipping,
    stock_status = :stock_status,
    special_offer_p = :special_offer_p,
    special_offer_html = :special_offer_html,
    offer_begins = to_date(:offer_begins, 'YYYY-MM-DD HH24:MI:SS'),
    offer_ends = to_date(:offer_ends, 'YYYY-MM-DD HH24:MI:SS') $additional_thing_to_insert,
    last_modified = sysdate,
    last_modifying_user = :user_id,
    modified_ip_address = :peeraddr
where offer_id = :offer_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/products/offer-edit-3-oracle.xql}
dbqd.ecommerce.www.admin.products.offer-edit.retailer_select {dbqd.ecommerce.www.admin.products.offer-edit.retailer_select {select retailer_name, retailer_id, city, usps_abbrev
from ec_retailers
order by retailer_name

      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/offer-edit.xql}
dbqd.ecommerce.www.admin.products.offer-edit.offer_select {dbqd.ecommerce.www.admin.products.offer-edit.offer_select {select price, shipping, stock_status, shipping_unavailable_p, offer_begins,
       offer_ends, special_offer_p, special_offer_html from ec_offers
where offer_id=:offer_id

      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/offer-edit.xql}
dbqd.ecommerce.www.admin.products.offers.offers_select {dbqd.ecommerce.www.admin.products.offers.offers_select {select o.offer_id, o.retailer_id, r.retailer_name, price, shipping,
       stock_status, special_offer_p, special_offer_html,
       shipping_unavailable_p, offer_begins, offer_ends, o.deleted_p,
       case when sign(sysdate-offer_begins) = 1 then 1 else 0 end as offer_begun_p,
       case when sign(sysdate-offer_ends) = 1 then 1 else 0 end as offer_expired_p
from ec_offers_current o, ec_retailers r
where o.retailer_id=r.retailer_id
and o.product_id=:product_id
order by o.last_modified desc

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/products/offers-oracle.xql}
dbqd.ecommerce.www.admin.products.offers.non_current_offers_select {dbqd.ecommerce.www.admin.products.offers.non_current_offers_select {select o.offer_id, o.retailer_id, retailer_name, price, shipping,
       stock_status, special_offer_p, special_offer_html,
       shipping_unavailable_p, offer_begins, offer_ends, o.deleted_p,
       case when sign(sysdate-offer_begins) = 1 then 1 else 0 end as offer_begun_p,
       case when sign(sysdate-offer_ends) = 1 then 1 else 0 end as offer_expired_p
from ec_offers o, ec_retailers r
where o.retailer_id=r.retailer_id
    and o.product_id=:product_id
    and (o.deleted_p='t' or o.offer_begins - sysdate > 0 or o.offer_ends - sysdate < 0)
order by o.last_modified desc
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/products/offers-oracle.xql}
dbqd.ecommerce.www.admin.products.offers.retailer_select {dbqd.ecommerce.www.admin.products.offers.retailer_select {select retailer_name, retailer_id, case when reach = 'web' then url else city || ', ' || usps_abbrev end as location
from ec_retailers order by retailer_name

      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/offers.xql}
dbqd.ecommerce.www.admin.products.one.product_select {dbqd.ecommerce.www.admin.products.one.product_select {      select * from ec_products where product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/one.xql}
dbqd.ecommerce.www.admin.products.one.custom_fields_select {dbqd.ecommerce.www.admin.products.one.custom_fields_select {      select * from ec_custom_product_field_values where product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/one.xql}
dbqd.ecommerce.www.admin.products.one.categories_select {dbqd.ecommerce.www.admin.products.one.categories_select {      select category_id from ec_category_product_map where product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/one.xql}
dbqd.ecommerce.www.admin.products.one.subcategories_select {dbqd.ecommerce.www.admin.products.one.subcategories_select {      select subcategory_id from ec_subcategory_product_map where product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/one.xql}
dbqd.ecommerce.www.admin.products.one.subsubcategories_select {dbqd.ecommerce.www.admin.products.one.subsubcategories_select {      select subsubcategory_id from ec_subsubcategory_product_map where product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/one.xql}
dbqd.ecommerce.www.admin.products.one.n_professional_reviews_select {dbqd.ecommerce.www.admin.products.one.n_professional_reviews_select {      select count(*) from ec_product_reviews where product_id = :product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/one.xql}
dbqd.ecommerce.www.admin.products.one.n_customer_reviews_select {dbqd.ecommerce.www.admin.products.one.n_customer_reviews_select {      select count(*) from ec_product_comments where product_id = :product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/one.xql}
dbqd.ecommerce.www.admin.products.one.n_links_to_select {dbqd.ecommerce.www.admin.products.one.n_links_to_select {      select count(*) from ec_product_links where product_b = :product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/one.xql}
dbqd.ecommerce.www.admin.products.one.n_links_from_select {dbqd.ecommerce.www.admin.products.one.n_links_from_select {      select count(*) from ec_product_links where product_a = :product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/one.xql}
dbqd.ecommerce.www.admin.products.one.sale_select {dbqd.ecommerce.www.admin.products.one.sale_select {      select count(*) from ec_sale_prices_current where product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/one.xql}
dbqd.ecommerce.www.admin.products.one.user_class_select {dbqd.ecommerce.www.admin.products.one.user_class_select {      select user_class_id, user_class_name from ec_user_classes order by user_class_name
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/one.xql}
dbqd.ecommerce.www.admin.products.one.temp_price_select {dbqd.ecommerce.www.admin.products.one.temp_price_select {      select price from ec_product_user_class_prices where product_id=:product_id and user_class_id=:user_class_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/one.xql}
dbqd.ecommerce.www.admin.products.one.custom_fields_select {dbqd.ecommerce.www.admin.products.one.custom_fields_select {      select field_identifier, field_name, column_type from ec_custom_product_fields where active_p = 't'
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/one.xql}
dbqd.ecommerce.www.admin.products.one.template_name_select {dbqd.ecommerce.www.admin.products.one.template_name_select {      select template_name from ec_templates where template_id=:template_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/one.xql}
dbqd.ecommerce.www.admin.products.recommendation-add-3.user_class_select {dbqd.ecommerce.www.admin.products.recommendation-add-3.user_class_select {      select user_class_name from ec_user_classes where user_class_id=:user_class_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/recommendation-add-3.xql}
dbqd.ecommerce.www.admin.products.recommendation-add-4.recommendation_insert {dbqd.ecommerce.www.admin.products.recommendation-add-4.recommendation_insert {      insert into ec_product_recommendations
(recommendation_id, product_id, user_class_id, recommendation_text, active_p, category_id, subcategory_id, subsubcategory_id, 
last_modified, last_modifying_user, modified_ip_address)
values
(:recommendation_id, :product_id, :user_class_id, :recommendation_text, 't', :category_id, :subcategory_id, :subsubcategory_id,
sysdate, :user_id, :peeraddr)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/products/recommendation-add-4-oracle.xql}
dbqd.ecommerce.www.admin.products.recommendation-add-4.n_occurrences_select {dbqd.ecommerce.www.admin.products.recommendation-add-4.n_occurrences_select {      select count(*) from ec_product_recommendations where recommendation_id=:recommendation_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/recommendation-add-4.xql}
dbqd.ecommerce.www.admin.products.recommendation-add.product_search_select {dbqd.ecommerce.www.admin.products.recommendation-add.product_search_select {select product_name, product_id
from ec_products
where upper(product_name) like '%' || upper(:product_name_query) || '%'

      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/recommendation-add.xql}
dbqd.ecommerce.www.admin.products.recommendation-delete-2.recommendation_delete {dbqd.ecommerce.www.admin.products.recommendation-delete-2.recommendation_delete {      delete from ec_product_recommendations where recommendation_id=:recommendation_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/recommendation-delete-2.xql}
dbqd.ecommerce.www.admin.products.recommendation-delete.recommendation_select {dbqd.ecommerce.www.admin.products.recommendation-delete.recommendation_select {      select r.*, p.product_name
from ec_product_recommendations r, ec_products p
where recommendation_id=:recommendation_id
and r.product_id=p.product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/recommendation-delete.xql}
dbqd.ecommerce.www.admin.products.recommendation-delete.user_class_name_select {dbqd.ecommerce.www.admin.products.recommendation-delete.user_class_name_select {      select user_class_name from ec_user_classes where user_class_id=:user_class_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/recommendation-delete.xql}
dbqd.ecommerce.www.admin.products.recommendation-text-edit-2.recommendation_text_update {dbqd.ecommerce.www.admin.products.recommendation-text-edit-2.recommendation_text_update {update ec_product_recommendations 
set recommendation_text = :recommendation_text,
    last_modified=sysdate,
    last_modifying_user=:user_id,
    modified_ip_address=:peeraddr
where recommendation_id=:recommendation_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/products/recommendation-text-edit-2-oracle.xql}
dbqd.ecommerce.www.admin.products.recommendation-text-edit.recommendation_select {dbqd.ecommerce.www.admin.products.recommendation-text-edit.recommendation_select {      select r.*, p.product_name
from ec_product_recommendations r, ec_products p
where recommendation_id=$recommendation_id

and r.product_id=p.product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/recommendation-text-edit.xql}
dbqd.ecommerce.www.admin.products.recommendation.recommendation_select {dbqd.ecommerce.www.admin.products.recommendation.recommendation_select {      select r.*, p.product_name
from  ec_recommendations_cats_view r, ec_products p
where recommendation_id=:recommendation_id
and r.product_id=p.product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/recommendation.xql}
dbqd.ecommerce.www.admin.products.recommendation.user_class_name_select {dbqd.ecommerce.www.admin.products.recommendation.user_class_name_select {      select user_class_name from ec_user_classes where user_class_id=:user_class_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/recommendation.xql}
dbqd.ecommerce.www.admin.products.recommendations.recommendations_select {dbqd.ecommerce.www.admin.products.recommendations.recommendations_select {select 
  r.recommendation_id, r.the_category_name, r.the_subcategory_name, r.the_subsubcategory_name,
  p.product_name, 
  c.user_class_name
from ec_recommendations_cats_view r, ec_products p, ec_user_classes c
where r.active_p='t'
and r.user_class_id = c.user_class_id(+)
and r.product_id = p.product_id
order by case when the_category_name = NULL then 0 else 1 end, upper(the_category_name), upper(the_subcategory_name), upper(the_subsubcategory_name)
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/products/recommendations-oracle.xql}
dbqd.ecommerce.www.admin.products.recommendations.recommendations_select {dbqd.ecommerce.www.admin.products.recommendations.recommendations_select {select 
  r.recommendation_id, r.the_category_name, r.the_subcategory_name, r.the_subsubcategory_name,
  p.product_name, 
  c.user_class_name
from ec_recommendations_cats_view r, ec_products p, ec_user_classes c
where r.active_p='t'
and r.user_class_id = c.user_class_id(+)
and r.product_id = p.product_id
order by case when the_category_name = NULL then 0 else 1 end, upper(the_category_name), upper(the_subcategory_name), upper(the_subsubcategory_name)
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/products/recommendations-oracle.xql}
dbqd.ecommerce.www.admin.products.review-add-2.review_insert {dbqd.ecommerce.www.admin.products.review-add-2.review_insert {      insert into ec_product_reviews
(review_id, product_id, publication, author_name, review, display_p, review_date, last_modified, last_modifying_user, modified_ip_address)
values
(:review_id, :product_id, :publication, :author_name, :review, :display_p, to_date(:review_date, 'YYYY-MM-DD HH24:MI:SS'), sysdate, :user_id, :peeraddr)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/products/review-add-2-oracle.xql}
dbqd.ecommerce.www.admin.products.review-add-2.doubleclick_select {dbqd.ecommerce.www.admin.products.review-add-2.doubleclick_select {      select count(*) from ec_product_reviews where review_id=:review_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/review-add-2.xql}
dbqd.ecommerce.www.admin.products.review-edit.product_review_update {dbqd.ecommerce.www.admin.products.review-edit.product_review_update {update ec_product_reviews
set product_id=:product_id,
    publication=:publication,
    author_name=:author_name,
    review_date=[ec_datetime_sql review_date],
    review=:review,
    display_p=:display_p,
    last_modified=sysdate,
    last_modifying_user=:user_id,
    modified_ip_address=:peeraddr
where review_id=:review_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/products/review-edit-oracle.xql}
dbqd.ecommerce.www.admin.products.review.review_select {dbqd.ecommerce.www.admin.products.review.review_select {      select * from ec_product_reviews where review_id=:review_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/review.xql}
dbqd.ecommerce.www.admin.products.reviews.product_reviews_select {dbqd.ecommerce.www.admin.products.reviews.product_reviews_select {select review_id, author_name, publication, review_date, display_p
from ec_product_reviews
where product_id=:product_id

      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/reviews.xql}
dbqd.ecommerce.www.admin.products.sale-price-add-2.sale_insert {dbqd.ecommerce.www.admin.products.sale-price-add-2.sale_insert {      insert into ec_sale_prices
(sale_price_id, product_id, sale_price, sale_begins, sale_ends, sale_name, offer_code, last_modified, last_modifying_user, modified_ip_address)
values
(:sale_price_id, :product_id, :sale_price, to_date(:sale_begins,'YYYY-MM-DD HH24:MI:SS'), to_date(:sale_ends,'YYYY-MM-DD HH24:MI:SS'), :sale_name, :offer_code, sysdate, :user_id, :peeraddr)
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/products/sale-price-add-2-oracle.xql}
dbqd.ecommerce.www.admin.products.sale-price-add-2.doubleclick_select {dbqd.ecommerce.www.admin.products.sale-price-add-2.doubleclick_select {      select count(*) from ec_sale_prices where sale_price_id=:sale_price_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/sale-price-add-2.xql}
dbqd.ecommerce.www.admin.products.sale-price-add.select_one {dbqd.ecommerce.www.admin.products.sale-price-add.select_one {      select 1 from dual where to_date('$sale_begins(date)','YYYY-MM-DD HH24:MI:SS')  >to_date('$sale_ends(date)', 'YYYY-MM-DD HH24:MI:SS')
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/products/sale-price-add-oracle.xql}
dbqd.ecommerce.www.admin.products.sale-price-edit-3.sale_price_update {dbqd.ecommerce.www.admin.products.sale-price-edit-3.sale_price_update {update ec_sale_prices
set sale_price=:sale_price,
    sale_begins=to_date(:sale_begins,'YYYY-MM-DD HH24:MI:SS'),
    sale_ends=to_date(:sale_ends,'YYYY-MM-DD HH24:MI:SS'),
    sale_name=:sale_name,
    offer_code=:offer_code,
    last_modified=sysdate,
    last_modifying_user=:user_id,
    modified_ip_address=:peeraddr
where sale_price_id=:sale_price_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/products/sale-price-edit-3-oracle.xql}
dbqd.ecommerce.www.admin.products.sale-price-edit.sale_price_select {dbqd.ecommerce.www.admin.products.sale-price-edit.sale_price_select {      select sale_price, to_char(sale_begins,'YYYY-MM-DD HH24:MI:SS') as sale_begins, to_char(sale_ends,'YYYY-MM-DD HH24:MI:SS') as sale_ends, sale_name, offer_code from ec_sale_prices where sale_price_id=:sale_price_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/products/sale-price-edit-oracle.xql}
dbqd.ecommerce.www.admin.products.sale-price-expire-2.expire_sale_update {dbqd.ecommerce.www.admin.products.sale-price-expire-2.expire_sale_update {update ec_sale_prices
set sale_ends=sysdate,
    last_modified=sysdate,
    last_modifying_user=:user_id,
    modified_ip_address=:peeraddr
where sale_price_id=:sale_price_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/products/sale-price-expire-2-oracle.xql}
dbqd.ecommerce.www.admin.products.sale-prices.current_sales_select {dbqd.ecommerce.www.admin.products.sale-prices.current_sales_select {      select sale_price_id, sale_name, sale_price, offer_code, to_char(sale_begins,'YYYY-MM-DD HH24:MI:SS') as sale_begins, to_char(sale_ends,'YYYY-MM-DD HH24:MI:SS') as sale_ends, case when sign(sysdate-sale_begins) = 1 then 1 else 0 end as sale_begun_p, case when sign(sysdate-sale_ends) = 1 then 1 else 0 end as sale_expired_p
from ec_sale_prices_current
where product_id=:product_id
order by last_modified desc
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/products/sale-prices-oracle.xql}
dbqd.ecommerce.www.admin.products.sale-prices.non_current_sales_select {dbqd.ecommerce.www.admin.products.sale-prices.non_current_sales_select {      select sale_price_id, sale_name, sale_price, offer_code, to_char(sale_begins,'YYYY-MM-DD HH24:MI:SS') as sale_begins, to_char(sale_ends,'YYYY-MM-DD HH24:MI:SS') as sale_ends, case when sign(sysdate-sale_begins) = 1 then 1 else 0 end as sale_begun_p, case when sign(sysdate-sale_ends) = 1 then 1 else 0 end as sale_expired_p
from ec_sale_prices
where product_id=:product_id
and (sale_begins - sysdate > 0 or sale_ends - sysdate < 0)
order by last_modified desc
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/products/sale-prices-oracle.xql}
dbqd.ecommerce.www.admin.products.search.product_search_select {dbqd.ecommerce.www.admin.products.search.product_search_select {      select product_id, product_name from ec_products where $additional_query_part
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/search.xql}
dbqd.ecommerce.www.admin.products.subsubcategory-property-toggle.update_subsub_product_map {dbqd.ecommerce.www.admin.products.subsubcategory-property-toggle.update_subsub_product_map {      update ec_subsubcategory_product_map
set $thing_to_update
where product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/subsubcategory-property-toggle.xql}
dbqd.ecommerce.www.admin.products.supporting-file-delete-2.dirname_select {dbqd.ecommerce.www.admin.products.supporting-file-delete-2.dirname_select {      select dirname from ec_products where product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/supporting-file-delete-2.xql}
dbqd.ecommerce.www.admin.products.supporting-files-upload-2.dirname_select {dbqd.ecommerce.www.admin.products.supporting-files-upload-2.dirname_select {      select dirname from ec_products where product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/supporting-files-upload-2.xql}
dbqd.ecommerce.www.admin.products.supporting-files-upload.dirname_select {dbqd.ecommerce.www.admin.products.supporting-files-upload.dirname_select {      select dirname from ec_products where product_id=$product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/products/supporting-files-upload.xql}
dbqd.ecommerce.www.admin.products.toggle-active-p.toggle_active_p_update {dbqd.ecommerce.www.admin.products.toggle-active-p.toggle_active_p_update {update ec_products 
set active_p = logical_negation(active_p),
    last_modified = sysdate, 
    last_modifying_user = :user_id,
    modified_ip_address = :peeraddr
where product_id = :product_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/products/toggle-active-p-oracle.xql}
dbqd.ecommerce.www.admin.products.toggle-no-shipping-avail-p.toggle_no_shipping_avail_p_update {dbqd.ecommerce.www.admin.products.toggle-no-shipping-avail-p.toggle_no_shipping_avail_p_update {update ec_products 
set no_shipping_avail_p = logical_negation(no_shipping_avail_p),
    last_modified = sysdate, 
    last_modifying_user = :user_id,
    modified_ip_address = :peeraddr
where product_id = :product_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/products/toggle-no-shipping-avail-p-oracle.xql}
dbqd.ecommerce.www.admin.products.upload-2.custom_product_field_insert {dbqd.ecommerce.www.admin.products.upload-2.custom_product_field_insert {      insert into ec_custom_product_field_values (product_id, last_modified, last_modifying_user, modified_ip_address) values (:val_$product_id_column, sysdate, :user_id, :peeraddr)
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/products/upload-2-oracle.xql}
dbqd.ecommerce.www.admin.restore-one-id.get_audit_rows {dbqd.ecommerce.www.admin.restore-one-id.get_audit_rows {      select * from $audit_table_name where rowid = :rowid
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/restore-one-id-oracle.xql}
dbqd.ecommerce.www.admin.retailers.add-3.insert_new_retailer {dbqd.ecommerce.www.admin.retailers.add-3.insert_new_retailer {      insert into ec_retailers
(retailer_id, retailer_name, primary_contact_name, secondary_contact_name, primary_contact_info, secondary_contact_info, line1, line2, city, usps_abbrev, zip_code, phone, fax, url, country_code, reach, nexus_states, financing_policy, return_policy, price_guarantee_policy, delivery_policy, installation_policy, $audit_fields)
values 
(:retailer_id, :retailer_name, :primary_contact_name, :secondary_contact_name, :primary_contact_info, :secondary_contact_info, :line1, :line2, :city, :usps_abbrev, :zip_code, :phone, :fax, :url, :country_code, :reach, :nexus_states, :financing_policy, :return_policy, :price_guarantee_policy, :delivery_policy, :installation_policy, $audit_info)

      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/retailers/add-3.xql}
dbqd.ecommerce.www.admin.retailers.edit-2.unused {dbqd.ecommerce.www.admin.retailers.edit-2.unused {update ec_retailers
   set retailer_name=:retailer_name, 
       primary_contact_name=:primary_contact_name, 
       secondary_contact_name=:secondary_contact_name, 
       primary_contact_info=:primary_contact_info, 
       secondary_contact_info=:secondary_contact_info, 
       line1=:line1, 
       line2=:line2, 
       city=:city, 
       usps_abbrev=:usps_abbrev, 
       zip_code=:zip_code, 
       phone=:phone, 
       fax=:fax, 
       url=:url, 
       country_code=:country_code, 
       reach=:reach, 
       nexus_states=:nexus_states, 
       financing_policy=:financing_policy, 
       return_policy=:return_policy, 
       price_guarantee_policy=:price_guarantee_policy, 
       delivery_policy=:delivery_policy, 
       installation_policy=:installation_policy, 
       $audit_update
where retailer_id=:retailer_id

      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/retailers/edit-2.xql}
dbqd.ecommerce.www.admin.retailers.edit.get_retailer_details {dbqd.ecommerce.www.admin.retailers.edit.get_retailer_details {select retailer_id ,
    retailer_name,
    primary_contact_name,
    secondary_contact_name,
    primary_contact_info,
    secondary_contact_info,
    line1,
    line2,
    city ,
    usps_abbrev,
    zip_code,
    phone,
    fax,
    url,
    country_code,
    reach,
    nexus_states,
    financing_policy,
    return_policy,
    
    price_guarantee_policy,
    delivery_policy,
    installation_policy
from ec_retailers 
where retailer_id=:retailer_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/retailers/edit.xql}
dbqd.ecommerce.www.admin.retailers.index.get_retailer_list {dbqd.ecommerce.www.admin.retailers.index.get_retailer_list {   select retailer_id, 
          retailer_name, 
	  case when reach = 'web' then url else city || ', ' || usps_abbrev end as location
   from ec_retailers 
   order by retailer_name

      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/retailers/index.xql}
dbqd.ecommerce.www.admin.retailers.one.get_retailer_details {dbqd.ecommerce.www.admin.retailers.one.get_retailer_details {select retailer_id ,
    retailer_name,
    primary_contact_name,
    secondary_contact_name,
    primary_contact_info,
    secondary_contact_info,
    line1,
    line2,
    city ,
    usps_abbrev,
    zip_code,
    phone,
    fax,
    url,
    country_code,
    reach,
    nexus_states,
    financing_policy,
    return_policy,
    
    price_guarantee_policy,
    delivery_policy,
    installation_policy
 from ec_retailers where retailer_id=:retailer_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/retailers/one.xql}
dbqd.ecommerce.www.admin.sales-tax.clear-2.clear_sales_taxes_audit {dbqd.ecommerce.www.admin.sales-tax.clear-2.clear_sales_taxes_audit {        select usps_abbrev
          from ec_sales_tax_by_state
    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/sales-tax/clear-2.xql}
dbqd.ecommerce.www.admin.sales-tax.clear-2.clear_sales_taxes {dbqd.ecommerce.www.admin.sales-tax.clear-2.clear_sales_taxes {      delete from ec_sales_tax_by_state
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/sales-tax/clear-2.xql}
dbqd.ecommerce.www.admin.sales-tax.edit-2.sales_tax_update {dbqd.ecommerce.www.admin.sales-tax.edit-2.sales_tax_update {		update ec_sales_tax_by_state 
		set tax_rate=:state_tax_rate,
		shipping_p=:ship_status,
		last_modified=sysdate, 
		last_modifying_user=:user_id, 
		modified_ip_address=:ip_addr 
		where usps_abbrev=:usps_abbrev
	    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/sales-tax/edit-2-oracle.xql}
dbqd.ecommerce.www.admin.sales-tax.edit-2.sales_tax_insert {dbqd.ecommerce.www.admin.sales-tax.edit-2.sales_tax_insert {		insert into ec_sales_tax_by_state
		(usps_abbrev, tax_rate, shipping_p, last_modified, last_modifying_user, modified_ip_address)
		values
		(:usps_abbrev, :state_tax_rate, :ship_status, sysdate, :user_id, :ip_addr)
	    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/sales-tax/edit-2-oracle.xql}
dbqd.ecommerce.www.admin.sales-tax.edit-2.unused {dbqd.ecommerce.www.admin.sales-tax.edit-2.unused {      select usps_abbrev from ec_sales_tax_by_state
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/sales-tax/edit-2.xql}
dbqd.ecommerce.www.admin.sales-tax.edit-2.states_with_tax_count {dbqd.ecommerce.www.admin.sales-tax.edit-2.states_with_tax_count {	    select count(*) 
	    from ec_sales_tax_by_state 
	    where usps_abbrev=:usps_abbrev
	
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/sales-tax/edit-2.xql}
dbqd.ecommerce.www.admin.sales-tax.edit-2. {dbqd.ecommerce.www.admin.sales-tax.edit-2. {		delete from ec_sales_tax_by_state 
		where usps_abbrev=:old_state
	    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/sales-tax/edit-2.xql}
dbqd.ecommerce.www.admin.sales-tax.edit.get_tax_rate {dbqd.ecommerce.www.admin.sales-tax.edit.get_tax_rate {      select tax_rate*100 from ec_sales_tax_by_state where usps_abbrev=:usps_abbrev
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/sales-tax/edit.xql}
dbqd.ecommerce.www.admin.sales-tax.edit.get_shipping_ps {dbqd.ecommerce.www.admin.sales-tax.edit.get_shipping_ps {      select shipping_p from ec_sales_tax_by_state where usps_abbrev=:usps_abbrev
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/sales-tax/edit.xql}
dbqd.ecommerce.www.admin.sales-tax.index.get_sales_taxes {dbqd.ecommerce.www.admin.sales-tax.index.get_sales_taxes {      select state_name, tax_rate*100 as tax_rate_in_percent, case when shipping_p = 't' then 'Yes' else 'No' end as shipping_p
from ec_sales_tax_by_state, us_states
where ec_sales_tax_by_state.usps_abbrev = us_states.abbrev
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/sales-tax/index.xql}
dbqd.ecommerce.www.admin.sales-tax.index.get_abbrevs {dbqd.ecommerce.www.admin.sales-tax.index.get_abbrevs {      select usps_abbrev from ec_sales_tax_by_state
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/sales-tax/index.xql}
dbqd.ecommerce.www.admin.shipping-costs.edit-2.update_shipping_cost_settings {dbqd.ecommerce.www.admin.shipping-costs.edit-2.update_shipping_cost_settings {      update ec_admin_settings
set base_shipping_cost = :base_shipping_cost,
default_shipping_per_item = :default_shipping_per_item,
weight_shipping_cost = :weight_shipping_cost,
add_exp_base_shipping_cost = :add_exp_base_shipping_cost,
add_exp_amount_per_item = :add_exp_amount_per_item,
add_exp_amount_by_weight = :add_exp_amount_by_weight
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/shipping-costs/edit-2.xql}
dbqd.ecommerce.www.admin.shipping-costs.index.get_shipping_costs {dbqd.ecommerce.www.admin.shipping-costs.index.get_shipping_costs {      select base_shipping_cost, default_shipping_per_item, weight_shipping_cost, add_exp_base_shipping_cost, add_exp_amount_per_item, add_exp_amount_by_weight
from ec_admin_settings
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/shipping-costs/index.xql}
dbqd.ecommerce.www.admin.templates.add-3.insert_new_template {dbqd.ecommerce.www.admin.templates.add-3.insert_new_template {      insert into ec_templates
(template_id, template_name, template, last_modified, last_modifying_user, modified_ip_address)
values
(:template_id, :template_name, :template, sysdate, :user_id, '[DoubleApos [ns_conn peeraddr]]')
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/templates/add-3-oracle.xql}
dbqd.ecommerce.www.admin.templates.add-3.get_dclick_temp {dbqd.ecommerce.www.admin.templates.add-3.get_dclick_temp {      select count(*) from ec_templates where template_id=:template_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/templates/add-3.xql}
dbqd.ecommerce.www.admin.templates.add.get_template {dbqd.ecommerce.www.admin.templates.add.get_template {      select template from ec_templates where template_id=:based_on
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/templates/add.xql}
dbqd.ecommerce.www.admin.templates.category-associate-2.check_existence_t {dbqd.ecommerce.www.admin.templates.category-associate-2.check_existence_t {      select template_name as old_template from
ec_templates, ec_category_template_map m
where ec_templates.template_id = m.template_id
and m.category_id=:category_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/templates/category-associate-2.xql}
dbqd.ecommerce.www.admin.templates.category-associate-2.insert_cat_temp_map {dbqd.ecommerce.www.admin.templates.category-associate-2.insert_cat_temp_map {      insert into ec_category_template_map (category_id, template_id) values (:category_id, :template_id)
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/templates/category-associate-2.xql}
dbqd.ecommerce.www.admin.templates.category-associate-2.update_cat_temp_map {dbqd.ecommerce.www.admin.templates.category-associate-2.update_cat_temp_map {      update ec_category_template_map set template_id=:template_id where category_id=:category_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/templates/category-associate-2.xql}
dbqd.ecommerce.www.admin.templates.category-associate-2.get_template_name {dbqd.ecommerce.www.admin.templates.category-associate-2.get_template_name {      select template_name from ec_templates where template_id=:template_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/templates/category-associate-2.xql}
dbqd.ecommerce.www.admin.templates.category-associate-2.unused {dbqd.ecommerce.www.admin.templates.category-associate-2.unused {      select category_name from ec_categories where category_id=:category_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/templates/category-associate-2.xql}
dbqd.ecommerce.www.admin.templates.category-associate.get_template_data {dbqd.ecommerce.www.admin.templates.category-associate.get_template_data {select template_name, template
  from ec_templates
  where template_id=:template_id

      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/templates/category-associate.xql}
dbqd.ecommerce.www.admin.templates.category-associate.get_n_category_assocs {dbqd.ecommerce.www.admin.templates.category-associate.get_n_category_assocs {select count(*)
  from ec_category_template_map
 where template_id=:template_id

      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/templates/category-associate.xql}
dbqd.ecommerce.www.admin.templates.category-associate.get_each_template_assoc {dbqd.ecommerce.www.admin.templates.category-associate.get_each_template_assoc {    select m.category_id, c.category_name
      from ec_category_template_map m, ec_categories c
     where m.category_id = c.category_id
       and m.template_id = :template_id
    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/templates/category-associate.xql}
dbqd.ecommerce.www.admin.templates.category-associate.get_n_left {dbqd.ecommerce.www.admin.templates.category-associate.get_n_left {select count(*)
  from ec_categories
 where category_id not in (select category_id
                             from ec_category_template_map
                            where template_id=:template_id)

      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/templates/category-associate.xql}
dbqd.ecommerce.www.admin.templates.category-associate.get_remaining_categories {dbqd.ecommerce.www.admin.templates.category-associate.get_remaining_categories {    select category_id, category_name
      from ec_categories
     where category_id not in (select category_id
                                 from ec_category_template_map
                                where template_id=:template_id)
    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/templates/category-associate.xql}
dbqd.ecommerce.www.admin.templates.delete-2.delete_product_refs {dbqd.ecommerce.www.admin.templates.delete-2.delete_product_refs {      update ec_products set template_id=null, last_modified=sysdate, last_modifying_user=:user_id, modified_ip_address='[DoubleApos [ns_conn peeraddr]]' where template_id=:template_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/templates/delete-2-oracle.xql}
dbqd.ecommerce.www.admin.templates.delete-2.get_default_template {dbqd.ecommerce.www.admin.templates.delete-2.get_default_template {      select default_template
from ec_admin_settings
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/templates/delete-2.xql}
dbqd.ecommerce.www.admin.templates.delete-2.delete_from_ec_template_map {dbqd.ecommerce.www.admin.templates.delete-2.delete_from_ec_template_map {      delete from ec_category_template_map where template_id=:template_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/templates/delete-2.xql}
dbqd.ecommerce.www.admin.templates.delete-2.delete_from_ec_templates {dbqd.ecommerce.www.admin.templates.delete-2.delete_from_ec_templates {      delete from ec_templates where template_id=:template_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/templates/delete-2.xql}
dbqd.ecommerce.www.admin.templates.delete.get_default_id {dbqd.ecommerce.www.admin.templates.delete.get_default_id {      select default_template
from ec_admin_settings
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/templates/delete.xql}
dbqd.ecommerce.www.admin.templates.edit-2.update_ec_templates {dbqd.ecommerce.www.admin.templates.edit-2.update_ec_templates {      update ec_templates
set template_name=:template_name, template=:template
where template_id=:template_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/templates/edit-2.xql}
dbqd.ecommerce.www.admin.templates.edit.get_template_info {dbqd.ecommerce.www.admin.templates.edit.get_template_info {      select template_name, template from ec_templates where template_id=:template_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/templates/edit.xql}
dbqd.ecommerce.www.admin.templates.index.get_templates_info {dbqd.ecommerce.www.admin.templates.index.get_templates_info {SELECT t.template_id, t.template_name, c.category_id, c.category_name
  FROM ec_templates t, ec_category_template_map m, ec_categories c
 WHERE t.template_id = m.template_id (+)
   and m.category_id = c.category_id (+)
  ORDER BY template_name, category_name
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/templates/index-oracle.xql}
dbqd.ecommerce.www.admin.templates.index.get_templates_info {dbqd.ecommerce.www.admin.templates.index.get_templates_info {SELECT t.template_id, t.template_name, c.category_id, c.category_name
  FROM ec_templates t, ec_category_template_map m, ec_categories c
 WHERE t.template_id = m.template_id (+)
   and m.category_id = c.category_id (+)
  ORDER BY template_name, category_name
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/templates/index-oracle.xql}
dbqd.ecommerce.www.admin.templates.make-default-2.update_set_default_template {dbqd.ecommerce.www.admin.templates.make-default-2.update_set_default_template {      update ec_admin_settings set default_template = :template_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/templates/make-default-2.xql}
dbqd.ecommerce.www.admin.templates.make-default.get_template_info {dbqd.ecommerce.www.admin.templates.make-default.get_template_info {      select template_name, template from ec_templates where template_id=:template_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/templates/make-default.xql}
dbqd.ecommerce.www.admin.templates.one. {dbqd.ecommerce.www.admin.templates.one. {      select template_name, template from ec_templates where template_id=:template_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/templates/one.xql}
dbqd.ecommerce.www.admin.templates.one.get_default_template {dbqd.ecommerce.www.admin.templates.one.get_default_template {      select default_template from ec_admin_settings
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/templates/one.xql}
dbqd.ecommerce.www.admin.user-classes.add-2.insert_new_uc {dbqd.ecommerce.www.admin.user-classes.add-2.insert_new_uc {      insert into ec_user_classes
(user_class_id, user_class_name, last_modified, last_modifying_user, modified_ip_address)
values
(:user_class_id,:user_class_name, sysdate, :user_id, '[DoubleApos [ns_conn peeraddr]]')

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/user-classes/add-2-oracle.xql}
dbqd.ecommerce.www.admin.user-classes.add-2.get_uc_count {dbqd.ecommerce.www.admin.user-classes.add-2.get_uc_count {      select count(*) from ec_user_classes where user_class_id=:user_class_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/user-classes/add-2.xql}
dbqd.ecommerce.www.admin.user-classes.approve-toggle.update_ec_class_map {dbqd.ecommerce.www.admin.user-classes.approve-toggle.update_ec_class_map {      update ec_user_class_user_map
set user_class_approved_p=[ec_decode $user_class_approved_p "t" "'f'" "'t'"], last_modified=sysdate, last_modifying_user=:admin_user_id, modified_ip_address='[DoubleApos [ns_conn peeraddr]]'
where user_id=:user_id and user_class_id=:user_class_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/user-classes/approve-toggle-oracle.xql}
dbqd.ecommerce.www.admin.user-classes.delete-2.get_user_id_list {dbqd.ecommerce.www.admin.user-classes.delete-2.get_user_id_list {      select user_id from ec_user_class_user_map where user_class_id = :user_class_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/user-classes/delete-2.xql}
dbqd.ecommerce.www.admin.user-classes.delete-2.delete_unmap_users {dbqd.ecommerce.www.admin.user-classes.delete-2.delete_unmap_users {      delete from ec_user_class_user_map where user_class_id=:user_class_id

      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/user-classes/delete-2.xql}
dbqd.ecommerce.www.admin.user-classes.delete-2.delete_from_user_class {dbqd.ecommerce.www.admin.user-classes.delete-2.delete_from_user_class {      delete from ec_user_classes
where user_class_id=:user_class_id

      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/user-classes/delete-2.xql}
dbqd.ecommerce.www.admin.user-classes.delete.get_ucname {dbqd.ecommerce.www.admin.user-classes.delete.get_ucname {      select user_class_name from ec_user_classes where user_class_id=:user_class_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/user-classes/delete.xql}
dbqd.ecommerce.www.admin.user-classes.edit.update_ec_user_classes {dbqd.ecommerce.www.admin.user-classes.edit.update_ec_user_classes {      update ec_user_classes
set user_class_name=:user_class_name
where user_class_id=:user_class_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/user-classes/edit.xql}
dbqd.ecommerce.www.admin.user-classes.index.get_uc_info_lines {dbqd.ecommerce.www.admin.user-classes.index.get_uc_info_lines {   select ec_user_classes.user_class_id, 
          ec_user_classes.user_class_name,
          count(user_id) as n_users
     from ec_user_classes, ec_user_class_user_map m
    where ec_user_classes.user_class_id = m.user_class_id(+)
 group by ec_user_classes.user_class_id, ec_user_classes.user_class_name
 order by user_class_name

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/user-classes/index-oracle.xql}
dbqd.ecommerce.www.admin.user-classes.index.get_uc_info_lines {dbqd.ecommerce.www.admin.user-classes.index.get_uc_info_lines {   select ec_user_classes.user_class_id, 
          ec_user_classes.user_class_name,
          count(user_id) as n_users
     from ec_user_classes, ec_user_class_user_map m
    where ec_user_classes.user_class_id = m.user_class_id(+)
 group by ec_user_classes.user_class_id, ec_user_classes.user_class_name
 order by user_class_name

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/user-classes/index-oracle.xql}
dbqd.ecommerce.www.admin.user-classes.index.get_n_approved_users {dbqd.ecommerce.www.admin.user-classes.index.get_n_approved_users {        select count(*) as approved_n_users
          from ec_user_class_user_map
         where user_class_approved_p = 't'
          and user_class_id=:user_class_id
        
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/user-classes/index.xql}
dbqd.ecommerce.www.admin.user-classes.member-add-2.update_ec_user_class_map {dbqd.ecommerce.www.admin.user-classes.member-add-2.update_ec_user_class_map {      update ec_user_class_user_map
set user_class_approved_p='t', last_modified=sysdate, last_modifying_user=:admin_user_id, modified_ip_address='[DoubleApos [ns_conn peeraddr]]'
where user_id=:user_id and user_class_id=:user_class_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/user-classes/member-add-2-oracle.xql}
dbqd.ecommerce.www.admin.user-classes.member-add-2.insert_new_ucm_mapping {dbqd.ecommerce.www.admin.user-classes.member-add-2.insert_new_ucm_mapping {      insert into ec_user_class_user_map
(user_id, user_class_id, user_class_approved_p, last_modified, last_modifying_user, modified_ip_address) 
values
(:user_id, :user_class_id, 't', sysdate, :user_id, '[DoubleApos [ns_conn peeraddr]]')

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/admin/user-classes/member-add-2-oracle.xql}
dbqd.ecommerce.www.admin.user-classes.member-add-2.get_ucm_count {dbqd.ecommerce.www.admin.user-classes.member-add-2.get_ucm_count {      select count(*) from ec_user_class_user_map where user_id=:user_id and user_class_id=:user_class_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/user-classes/member-add-2.xql}
dbqd.ecommerce.www.admin.user-classes.member-add.get_users_for_map {dbqd.ecommerce.www.admin.user-classes.member-add.get_users_for_map {      select user_id, first_names, last_name, email
from cc_users
where $last_bit_of_query
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/user-classes/member-add.xql}
dbqd.ecommerce.www.admin.user-classes.member-delete-2.delete_user_from_eccmap {dbqd.ecommerce.www.admin.user-classes.member-delete-2.delete_user_from_eccmap {      delete from ec_user_class_user_map where user_id=:user_id and user_class_id=:user_class_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/user-classes/member-delete-2.xql}
dbqd.ecommerce.www.admin.user-classes.members.get_uc_name {dbqd.ecommerce.www.admin.user-classes.members.get_uc_name {      select user_class_name from ec_user_classes where user_class_id = :user_class_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/user-classes/members.xql}
dbqd.ecommerce.www.admin.user-classes.members.get_users_in_ec_user_class {dbqd.ecommerce.www.admin.user-classes.members.get_users_in_ec_user_class {      select 
cc.user_id, first_names, last_name, email,
m.user_class_approved_p
from cc_users cc, ec_user_class_user_map m
where cc.user_id = m.user_id
and m.user_class_id=:user_class_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/admin/user-classes/members.xql}
dbqd.ecommerce.www.category-browse-subcategory.get_user_name {dbqd.ecommerce.www.category-browse-subcategory.get_user_name {      select first_names || ' ' || last_name from cc_users where user_id=:user_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/category-browse-subcategory.xql}
dbqd.ecommerce.www.category-browse-subcategory.grab_new_session_id {dbqd.ecommerce.www.category-browse-subcategory.grab_new_session_id {    insert into ec_user_session_info (user_session_id, category_id)
    values (:user_session_id, :category_id)
    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/category-browse-subcategory.xql}
dbqd.ecommerce.www.category-browse-subcategory.get_category_name {dbqd.ecommerce.www.category-browse-subcategory.get_category_name {      select category_name from ec_categories where category_id=:category_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/category-browse-subcategory.xql}
dbqd.ecommerce.www.category-browse-subcategory.get_subcat_name {dbqd.ecommerce.www.category-browse-subcategory.get_subcat_name {      select subcategory_name from ec_subcategories where subcategory_id=:subcategory_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/category-browse-subcategory.xql}
dbqd.ecommerce.www.category-browse-subcategory.get_subsubcat_name {dbqd.ecommerce.www.category-browse-subcategory.get_subsubcat_name {      select subsubcategory_name from ec_subsubcategories where subsubcategory_id=:subsubcategory_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/category-browse-subcategory.xql}
dbqd.ecommerce.www.category-browse-subcategory.get_recommended_products {dbqd.ecommerce.www.category-browse-subcategory.get_recommended_products {      select 
 p.product_name, p.product_id, p.dirname, r.recommendation_text
from ec_products_displayable p, ec_product_recommendations r
where p.product_id = r.product_id
and r.${sub}category_id=:${sub}category_id
and r.active_p='t'
and (r.user_class_id is null or r.user_class_id in 
      (select user_class_id 
       from ec_user_class_user_map m 
       where user_id=:user_id
       $user_class_approved_p_clause))
order by p.product_name
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/category-browse-subcategory.xql}
dbqd.ecommerce.www.category-browse-subcategory.get_regular_product_list {dbqd.ecommerce.www.category-browse-subcategory.get_regular_product_list {      select p.product_id, p.product_name, p.one_line_description
from ec_products_searchable p, $product_map($sub) m
where p.product_id = m.product_id
and m.${sub}category_id = :${sub}category_id
$exclude_subproducts
order by p.product_name

      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/category-browse-subcategory.xql}
dbqd.ecommerce.www.category-browse-subcategory.get_subcategories {dbqd.ecommerce.www.category-browse-subcategory.get_subcategories {SELECT * from ec_sub${sub}categories c
 WHERE ${sub}category_id = :${sub}category_id
   AND exists (
       SELECT 'x' from ec_products_displayable p, $product_map(sub$sub) s
        where p.product_id = s.product_id
          and s.sub${sub}category_id = c.sub${sub}category_id
     )
 ORDER BY sort_key, sub${sub}category_name

      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/category-browse-subcategory.xql}
dbqd.ecommerce.www.category-browse-subsubcategory.get_full_name {dbqd.ecommerce.www.category-browse-subsubcategory.get_full_name {      select first_names || ' ' || last_name from cc_users where user_id=:user_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/category-browse-subsubcategory.xql}
dbqd.ecommerce.www.category-browse-subsubcategory.grab_new_session_id {dbqd.ecommerce.www.category-browse-subsubcategory.grab_new_session_id {      insert into ec_user_session_info (user_session_id, category_id) values (:user_session_id, :category_id)
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/category-browse-subsubcategory.xql}
dbqd.ecommerce.www.category-browse-subsubcategory.get_category_name {dbqd.ecommerce.www.category-browse-subsubcategory.get_category_name {      select category_name from ec_categories where category_id=:category_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/category-browse-subsubcategory.xql}
dbqd.ecommerce.www.category-browse-subsubcategory.get_subcat_name {dbqd.ecommerce.www.category-browse-subsubcategory.get_subcat_name {      select subcategory_name from ec_subcategories where subcategory_id=:subcategory_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/category-browse-subsubcategory.xql}
dbqd.ecommerce.www.category-browse-subsubcategory.get_subsubcat_name {dbqd.ecommerce.www.category-browse-subsubcategory.get_subsubcat_name {      select subsubcategory_name from ec_subsubcategories where subsubcategory_id=:subsubcategory_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/category-browse-subsubcategory.xql}
dbqd.ecommerce.www.category-browse-subsubcategory.get_recommended_products {dbqd.ecommerce.www.category-browse-subsubcategory.get_recommended_products {      select 
 p.product_name, p.product_id, p.dirname, r.recommendation_text
from ec_products_displayable p, ec_product_recommendations r
where p.product_id = r.product_id
and r.${sub}category_id=:${sub}category_id
and r.active_p='t'
and (r.user_class_id is null or r.user_class_id in 
      (select user_class_id 
       from ec_user_class_user_map m 
       where user_id=:user_id
       $user_class_approved_p_clause))
order by p.product_name
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/category-browse-subsubcategory.xql}
dbqd.ecommerce.www.category-browse-subsubcategory.get_regular_product_list {dbqd.ecommerce.www.category-browse-subsubcategory.get_regular_product_list {      select p.product_id, p.product_name, p.one_line_description
from ec_products_searchable p, $product_map($sub) m
where p.product_id = m.product_id
and m.${sub}category_id = :${sub}category_id
$exclude_subproducts
order by p.product_name

      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/category-browse-subsubcategory.xql}
dbqd.ecommerce.www.category-browse-subsubcategory.get_subcategories {dbqd.ecommerce.www.category-browse-subsubcategory.get_subcategories {SELECT * from ec_sub${sub}categories c
 WHERE ${sub}category_id = :${sub}category_id
   AND exists (
       SELECT 'x' from ec_products_displayable p, $product_map(sub$sub) s
        where p.product_id = s.product_id
          and s.sub${sub}category_id = c.sub${sub}category_id
     )
 ORDER BY sort_key, sub${sub}category_name

      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/category-browse-subsubcategory.xql}
dbqd.ecommerce.www.category-browse.get_full_name {dbqd.ecommerce.www.category-browse.get_full_name {      select first_names || ' ' || last_name from cc_users where user_id=:user_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/category-browse.xql}
dbqd.ecommerce.www.category-browse.grab_new_session_id {dbqd.ecommerce.www.category-browse.grab_new_session_id {      insert into ec_user_session_info (user_session_id, category_id) values (:user_session_id, :category_id)
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/category-browse.xql}
dbqd.ecommerce.www.category-browse.get_category_name {dbqd.ecommerce.www.category-browse.get_category_name {      select category_name from ec_categories where category_id=:category_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/category-browse.xql}
dbqd.ecommerce.www.category-browse.get_subcat_name {dbqd.ecommerce.www.category-browse.get_subcat_name {      select subcategory_name from ec_subcategories where subcategory_id=:subcategory_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/category-browse.xql}
dbqd.ecommerce.www.category-browse.get_subsubcat_name {dbqd.ecommerce.www.category-browse.get_subsubcat_name {      select subsubcategory_name from ec_subsubcategories where subsubcategory_id=:subsubcategory_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/category-browse.xql}
dbqd.ecommerce.www.category-browse.get_recommended_products {dbqd.ecommerce.www.category-browse.get_recommended_products {      select 
 p.product_name, p.product_id, p.dirname, r.recommendation_text
from ec_products_displayable p, ec_product_recommendations r
where p.product_id = r.product_id
and r.${sub}category_id=:${sub}category_id
and r.active_p='t'
and (r.user_class_id is null or r.user_class_id in 
      (select user_class_id 
       from ec_user_class_user_map m 
       where user_id=:user_id
       $user_class_approved_p_clause))
order by p.product_name
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/category-browse.xql}
dbqd.ecommerce.www.category-browse.get_regular_product_list {dbqd.ecommerce.www.category-browse.get_regular_product_list {      select p.product_id, p.product_name, p.one_line_description
from ec_products_searchable p, $product_map($sub) m
where p.product_id = m.product_id
and m.${sub}category_id = :${sub}category_id
$exclude_subproducts
order by p.product_name

      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/category-browse.xql}
dbqd.ecommerce.www.category-browse.get_subcategories {dbqd.ecommerce.www.category-browse.get_subcategories {SELECT * from ec_sub${sub}categories c
 WHERE ${sub}category_id = :${sub}category_id
   AND exists (
       SELECT 'x' from ec_products_displayable p, $product_map(sub$sub) s
        where p.product_id = s.product_id
          and s.sub${sub}category_id = c.sub${sub}category_id
     )
 ORDER BY sort_key, sub${sub}category_name

      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/category-browse.xql}
dbqd.ecommerce.www.checkout-2.get_shipping_data {dbqd.ecommerce.www.checkout-2.get_shipping_data {    select p.no_shipping_avail_p, p.product_name, p.one_line_description, p.product_id,
           count(*) as quantity,
           u.offer_code,
           i.color_choice, i.size_choice, i.style_choice
      from ec_orders o, ec_items i, ec_products p, 
           (select offer_code, product_id
              from ec_user_session_offer_codes usoc
             where usoc.user_session_id=:user_session_id) u
     where i.product_id=p.product_id
       and o.order_id=i.order_id
       and p.product_id= u.product_id(+)
       and o.user_session_id=:user_session_id and o.order_state='in_basket'
  group by p.no_shipping_avail_p, p.product_name, p.one_line_description, p.product_id,
           u.offer_code,
           i.color_choice, i.size_choice, i.style_choice
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/checkout-2-oracle.xql}
dbqd.ecommerce.www.checkout-2.get_order_id_and_order_owner {dbqd.ecommerce.www.checkout-2.get_order_id_and_order_owner {       select order_id, 
              user_id as order_owner
         from ec_orders 
        where user_session_id=:user_session_id 
          and order_state='in_basket'
       
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/checkout-2.xql}
dbqd.ecommerce.www.checkout-2.get_ec_item_count {dbqd.ecommerce.www.checkout-2.get_ec_item_count {      select count(*) from ec_items where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/checkout-2.xql}
dbqd.ecommerce.www.checkout-2.get_an_address_id {dbqd.ecommerce.www.checkout-2.get_an_address_id {      select count(*) from ec_addresses where address_id=:address_id and user_id=:user_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/checkout-2.xql}
dbqd.ecommerce.www.checkout-2.update_ec_order_address {dbqd.ecommerce.www.checkout-2.update_ec_order_address {      update ec_orders set shipping_address=:address_id where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/checkout-2.xql}
dbqd.ecommerce.www.checkout-2.get_address_id {dbqd.ecommerce.www.checkout-2.get_address_id {      select shipping_address from ec_orders where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/checkout-2.xql}
dbqd.ecommerce.www.checkout-2.get_shipping_data {dbqd.ecommerce.www.checkout-2.get_shipping_data {    select p.no_shipping_avail_p, p.product_name, p.one_line_description, p.product_id,
           count(*) as quantity,
           u.offer_code,
           i.color_choice, i.size_choice, i.style_choice
      from ec_orders o, ec_items i, ec_products p, 
           (select offer_code, product_id
              from ec_user_session_offer_codes usoc
             where usoc.user_session_id=:user_session_id) u
     where i.product_id=p.product_id
       and o.order_id=i.order_id
       and p.product_id= u.product_id(+)
       and o.user_session_id=:user_session_id and o.order_state='in_basket'
  group by p.no_shipping_avail_p, p.product_name, p.one_line_description, p.product_id,
           u.offer_code,
           i.color_choice, i.size_choice, i.style_choice
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/checkout-2-oracle.xql}
dbqd.ecommerce.www.checkout-3.get_pre_gc_price {dbqd.ecommerce.www.checkout-3.get_pre_gc_price {      select ec_order_cost(:order_id) from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/checkout-3-oracle.xql}
dbqd.ecommerce.www.checkout-3.get_gc_balance {dbqd.ecommerce.www.checkout-3.get_gc_balance {      select ec_gift_certificate_balance(:user_id) from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/checkout-3-oracle.xql}
dbqd.ecommerce.www.checkout-3.get_order_id {dbqd.ecommerce.www.checkout-3.get_order_id {      select order_id from ec_orders where user_session_id=:user_session_id and order_state='in_basket'
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/checkout-3.xql}
dbqd.ecommerce.www.checkout-3.get_ec_item_count {dbqd.ecommerce.www.checkout-3.get_ec_item_count {      select count(*) from ec_items where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/checkout-3.xql}
dbqd.ecommerce.www.checkout-3.get_order_owner {dbqd.ecommerce.www.checkout-3.get_order_owner {      select user_id from ec_orders where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/checkout-3.xql}
dbqd.ecommerce.www.checkout-3.get_address_id {dbqd.ecommerce.www.checkout-3.get_address_id {      select shipping_address from ec_orders where order_id=$order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/checkout-3.xql}
dbqd.ecommerce.www.checkout-3.get_creditcard_id {dbqd.ecommerce.www.checkout-3.get_creditcard_id {      select creditcard_id from ec_orders where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/checkout-3.xql}
dbqd.ecommerce.www.checkout-3.get_shipping_method {dbqd.ecommerce.www.checkout-3.get_shipping_method {      select shipping_method from ec_orders where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/checkout-3.xql}
dbqd.ecommerce.www.checkout.check_order_shippable {dbqd.ecommerce.www.checkout.check_order_shippable {        select count(*)
        from dual
        where exists (select 1
                      from ec_products p, ec_items i
                      where i.product_id = p.product_id
                      and i.order_id = :order_id
                      and no_shipping_avail_p = 't')
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/checkout-oracle.xql}
dbqd.ecommerce.www.checkout.get_order_id {dbqd.ecommerce.www.checkout.get_order_id {      select order_id from ec_orders where user_session_id=:user_session_id and order_state='in_basket'
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/checkout.xql}
dbqd.ecommerce.www.checkout.update_ec_order_set_uid {dbqd.ecommerce.www.checkout.update_ec_order_set_uid {      update ec_orders set user_id=:user_id where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/checkout.xql}
dbqd.ecommerce.www.checkout.get_user_addresses {dbqd.ecommerce.www.checkout.get_user_addresses {select address_id, attn,
       line1,
       line2,
       city, usps_abbrev, zip_code,
       phone, country_code, full_state_name,
       phone_time
  from ec_addresses
 where user_id=:user_id
   and address_type='shipping'

      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/checkout.xql}
dbqd.ecommerce.www.credit-card-correction-2.get_order_id_from_basket {dbqd.ecommerce.www.credit-card-correction-2.get_order_id_from_basket {      select order_id from ec_orders where user_session_id=:user_session_id and order_state='in_basket'
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/credit-card-correction-2.xql}
dbqd.ecommerce.www.credit-card-correction-2.get_mrc_order {dbqd.ecommerce.www.credit-card-correction-2.get_mrc_order {      select order_id from ec_orders where user_id=:user_id and confirmed_date is not null and order_id=(select max(o2.order_id) from ec_orders o2 where o2.user_id=:user_id and o2.confirmed_date is not null)
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/credit-card-correction-2.xql}
dbqd.ecommerce.www.credit-card-correction-2.get_ec_item_count {dbqd.ecommerce.www.credit-card-correction-2.get_ec_item_count {      select count(*) from ec_items where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/credit-card-correction-2.xql}
dbqd.ecommerce.www.credit-card-correction-2.get_order_owner {dbqd.ecommerce.www.credit-card-correction-2.get_order_owner {      select user_id from ec_orders where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/credit-card-correction-2.xql}
dbqd.ecommerce.www.credit-card-correction-2.insert_new_creditcard {dbqd.ecommerce.www.credit-card-correction-2.insert_new_creditcard {      insert into ec_creditcards
(creditcard_id, user_id, creditcard_number, creditcard_last_four, creditcard_type, creditcard_expire, billing_zip_code)
values
(:creditcard_id, :user_id, :creditcard_number,:cc_fmt , :creditcard_type,:expiry,:billing_zip_code)

      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/credit-card-correction-2.xql}
dbqd.ecommerce.www.credit-card-correction-2.update_order_cc_info {dbqd.ecommerce.www.credit-card-correction-2.update_order_cc_info {      update ec_orders set creditcard_id=:creditcard_id where order_id=:order_id and order_state='in_basket'
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/credit-card-correction-2.xql}
dbqd.ecommerce.www.credit-card-correction.get_order_id {dbqd.ecommerce.www.credit-card-correction.get_order_id {      select order_id from ec_orders where user_session_id=:user_session_id and order_state='in_basket'
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/credit-card-correction.xql}
dbqd.ecommerce.www.credit-card-correction.get_ec_item_count_inbasket {dbqd.ecommerce.www.credit-card-correction.get_ec_item_count_inbasket {      select count(*) from ec_items where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/credit-card-correction.xql}
dbqd.ecommerce.www.credit-card-correction.get_order_owner {dbqd.ecommerce.www.credit-card-correction.get_order_owner {      select user_id from ec_orders where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/credit-card-correction.xql}
dbqd.ecommerce.www.credit-card-correction.get_cc_info {dbqd.ecommerce.www.credit-card-correction.get_cc_info {      select creditcard_type, creditcard_number, creditcard_expire, billing_zip_code from 
ec_creditcards, ec_orders
where ec_creditcards.creditcard_id=ec_orders.creditcard_id
and order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/credit-card-correction.xql}
dbqd.ecommerce.www.delete-shipping-address.delete_address {dbqd.ecommerce.www.delete-shipping-address.delete_address {       update ec_addresses set address_type='deleted' where address_id=:address_id
    } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/delete-shipping-address.xql}
dbqd.ecommerce.www.finalize-order.get_gc_balance {dbqd.ecommerce.www.finalize-order.get_gc_balance {      select ec_gift_certificate_balance(:user_id) from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/finalize-order-oracle.xql}
dbqd.ecommerce.www.finalize-order.get_order_id {dbqd.ecommerce.www.finalize-order.get_order_id {      select order_id from ec_orders where user_session_id=:user_session_id and order_state='in_basket'
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/finalize-order.xql}
dbqd.ecommerce.www.finalize-order.get_mrc_order {dbqd.ecommerce.www.finalize-order.get_mrc_order {      select order_id 
        from ec_orders
       where user_id=:user_id
         and confirmed_date is not null
         and order_id=(
                       select max(o2.order_id)
                         from ec_orders o2
                        where o2.user_id=:user_id
                          and o2.confirmed_date is not null
                       )
    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/finalize-order.xql}
dbqd.ecommerce.www.finalize-order.get_in_basket_count {dbqd.ecommerce.www.finalize-order.get_in_basket_count {      select count(*) from ec_items where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/finalize-order.xql}
dbqd.ecommerce.www.finalize-order.get_order_owner {dbqd.ecommerce.www.finalize-order.get_order_owner {      select user_id from ec_orders where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/finalize-order.xql}
dbqd.ecommerce.www.finalize-order.get_a_shipping_address {dbqd.ecommerce.www.finalize-order.get_a_shipping_address {      select shipping_address from ec_orders where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/finalize-order.xql}
dbqd.ecommerce.www.finalize-order.get_creditcard_id {dbqd.ecommerce.www.finalize-order.get_creditcard_id {      select creditcard_id from ec_orders where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/finalize-order.xql}
dbqd.ecommerce.www.finalize-order.get_shipping_method {dbqd.ecommerce.www.finalize-order.get_shipping_method {      select shipping_method from ec_orders where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/finalize-order.xql}
dbqd.ecommerce.www.gift-certificate-claim-2.insert_error_failed_gc_claim {dbqd.ecommerce.www.gift-certificate-claim-2.insert_error_failed_gc_claim {      insert into ec_problems_log
    (problem_id, problem_date, problem_details)
    values
    (ec_problem_id_sequence.nextval, sysdate,:prob_details )
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/gift-certificate-claim-2-oracle.xql}
dbqd.ecommerce.www.gift-certificate-claim-2.update_ec_cert_set_user {dbqd.ecommerce.www.gift-certificate-claim-2.update_ec_cert_set_user {      update ec_gift_certificates set user_id=:user_id, claimed_date=sysdate where gift_certificate_id=:gift_certificate_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/gift-certificate-claim-2-oracle.xql}
dbqd.ecommerce.www.gift-certificate-claim-2.insert_other_claim_prob {dbqd.ecommerce.www.gift-certificate-claim-2.insert_other_claim_prob {      insert into ec_problems_log
	(problem_id, problem_date, gift_certificate_id, problem_details)
	values
	(ec_problem_id_sequence.nextval, sysdate, :gift_certificate_id, :prob_details)
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/gift-certificate-claim-2-oracle.xql}
dbqd.ecommerce.www.gift-certificate-claim-2.get_order_id {dbqd.ecommerce.www.gift-certificate-claim-2.get_order_id {      select order_id from ec_orders where user_session_id=:user_session_id and order_state='in_basket'
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/gift-certificate-claim-2.xql}
dbqd.ecommerce.www.gift-certificate-claim-2.get_gc_id {dbqd.ecommerce.www.gift-certificate-claim-2.get_gc_id {      select gift_certificate_id from ec_gift_certificates where claim_check=:claim_check
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/gift-certificate-claim-2.xql}
dbqd.ecommerce.www.gift-certificate-claim-2.get_gc_user_id {dbqd.ecommerce.www.gift-certificate-claim-2.get_gc_user_id {      select user_id as gift_certificate_user_id, amount from ec_gift_certificates where gift_certificate_id=:gift_certificate_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/gift-certificate-claim-2.xql}
dbqd.ecommerce.www.gift-certificate-claim.get_order_id_for_claim {dbqd.ecommerce.www.gift-certificate-claim.get_order_id_for_claim {      select order_id from ec_orders where user_session_id=:user_session_id and order_state='in_basket'
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/gift-certificate-claim.xql}
dbqd.ecommerce.www.gift-certificate-finalize-order.report_gc_error_into_log {dbqd.ecommerce.www.gift-certificate-finalize-order.report_gc_error_into_log {      insert into ec_problems_log
	(problem_id, problem_date, problem_details, gift_certificate_id)
	values
	(ec_problem_id_sequence.nextval, sysdate, 'Customer pushed reload on gift-certificate-finalize-order.tcl but gift_certificate_state wasn't authorized_plus_avs, authorized_minus_avs, failed_authorization, or confirmed',:gift_certificate_id)
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/gift-certificate-finalize-order-oracle.xql}
dbqd.ecommerce.www.gift-certificate-finalize-order. {dbqd.ecommerce.www.gift-certificate-finalize-order. {      insert into ec_gift_certificates
    (gift_certificate_id, gift_certificate_state, amount, issue_date, purchased_by, expires, claim_check, certificate_message, certificate_to, certificate_from, recipient_email, last_modified, last_modifying_user, modified_ip_address)
    values
    (:gift_certificate_id, 'confirmed', :amount, sysdate, :user_id, add_months(sysdate,:gc_months),:claim_check, :certificate_message, :certificate_to, :certificate_from, :recipient_email, sysdate, :user_id, :peeraddr)
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/gift-certificate-finalize-order-oracle.xql}
dbqd.ecommerce.www.gift-certificate-finalize-order.insert_ec_financial_trans {dbqd.ecommerce.www.gift-certificate-finalize-order.insert_ec_financial_trans {      insert into ec_financial_transactions
    (transaction_id, gift_certificate_id, creditcard_id, transaction_amount, transaction_type, inserted_date)
    values
    (:transaction_id, :gift_certificate_id, :creditcard_id, :amount, 'charge', sysdate)
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/gift-certificate-finalize-order-oracle.xql}
dbqd.ecommerce.www.gift-certificate-finalize-order.update_ft_set_status {dbqd.ecommerce.www.gift-certificate-finalize-order.update_ft_set_status {      update ec_financial_transactions set authorized_date=sysdate, to_be_captured_p='t' where transaction_id=:transaction_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/gift-certificate-finalize-order-oracle.xql}
dbqd.ecommerce.www.gift-certificate-finalize-order.upate_ec_gc_status {dbqd.ecommerce.www.gift-certificate-finalize-order.upate_ec_gc_status {      update ec_gift_certificates set authorized_date=sysdate, gift_certificate_state=:cc_result where gift_certificate_id=:gift_certificate_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/gift-certificate-finalize-order-oracle.xql}
dbqd.ecommerce.www.gift-certificate-finalize-order.get_n_seconds {dbqd.ecommerce.www.gift-certificate-finalize-order.get_n_seconds {      select round((sysdate-issue_date)*86400) as n_seconds from ec_gift_certificates where gift_certificate_id = :gift_certificate_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/gift-certificate-finalize-order-oracle.xql}
dbqd.ecommerce.www.gift-certificate-finalize-order.get_gift_c_id {dbqd.ecommerce.www.gift-certificate-finalize-order.get_gift_c_id {      select count(*) from ec_gift_certificates where gift_certificate_id=:gift_certificate_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/gift-certificate-finalize-order.xql}
dbqd.ecommerce.www.gift-certificate-finalize-order.get_gift_c_status {dbqd.ecommerce.www.gift-certificate-finalize-order.get_gift_c_status {      select gift_certificate_state from ec_gift_certificates where gift_certificate_id=:gift_certificate_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/gift-certificate-finalize-order.xql}
dbqd.ecommerce.www.gift-certificate-finalize-order.get_ec_credit_card {dbqd.ecommerce.www.gift-certificate-finalize-order.get_ec_credit_card {      insert into ec_creditcards
    (creditcard_id, user_id, creditcard_number, creditcard_last_four, creditcard_type, creditcard_expire, billing_zip_code)
    values
    (:creditcard_id, :user_id, :creditcard_number, :ccstuff_1, :creditcard_type,:expiry,:billing_zip_code)
    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/gift-certificate-finalize-order.xql}
dbqd.ecommerce.www.gift-certificate-finalize-order.set_ft_failure {dbqd.ecommerce.www.gift-certificate-finalize-order.set_ft_failure {      update ec_financial_transactions set failed_p='t', to_be_captured_p='f' where transaction_id=:transaction_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/gift-certificate-finalize-order.xql}
dbqd.ecommerce.www.gift-certificate-finalize-order.set_gc_failure {dbqd.ecommerce.www.gift-certificate-finalize-order.set_gc_failure {      update ec_gift_certificates set gift_certificate_state='failed_authorization' where gift_certificate_id=:gift_certificate_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/gift-certificate-finalize-order.xql}
dbqd.ecommerce.www.gift-certificate-order-2.gco_email {dbqd.ecommerce.www.gift-certificate-order-2.gco_email {        select email
          from persons, parties
         where person_id = :mightbe
           and person_id = party_id
        
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/gift-certificate-order-2.xql}
dbqd.ecommerce.www.gift-certificate-order-3.get_zip_code {dbqd.ecommerce.www.gift-certificate-order-3.get_zip_code {      select zip_code from ec_addresses where address_id=(select max(address_id) from ec_addresses where user_id=:user_id)
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/gift-certificate-order-3.xql}
dbqd.ecommerce.www.gift-certificate-order-4.get_email_for_user {dbqd.ecommerce.www.gift-certificate-order-4.get_email_for_user {      select email from cc_users where user_id=:user_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/gift-certificate-order-4.xql}
dbqd.ecommerce.www.gift-certificate.get_gc_info {dbqd.ecommerce.www.gift-certificate.get_gc_info {      select purchased_by, amount, recipient_email, certificate_to, certificate_from, certificate_message from ec_gift_certificates where gift_certificate_id=:gift_certificate_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/gift-certificate.xql}
dbqd.ecommerce.www.index.get_check_of_categories {dbqd.ecommerce.www.index.get_check_of_categories {      select 1 from dual where exists (select 1 from ec_categories)
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/index-oracle.xql}
dbqd.ecommerce.www.index.get_user_name {dbqd.ecommerce.www.index.get_user_name {      select first_names || ' ' || last_name from cc_users where user_id=:user_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/index.xql}
dbqd.ecommerce.www.index.update_session_user_id {dbqd.ecommerce.www.index.update_session_user_id {      update ec_user_sessions set user_id=:user_id where user_session_id = :user_session_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/index.xql}
dbqd.ecommerce.www.index.get_produc_recs {dbqd.ecommerce.www.index.get_produc_recs {      select p.product_name, p.product_id, p.dirname, r.recommendation_text
from ec_products_displayable p, ec_product_recommendations r
where p.product_id=r.product_id
and category_id is null 
and subcategory_id is null 
and subsubcategory_id is null
and (r.user_class_id is null or r.user_class_id in (select user_class_id
     from ec_user_class_user_map 
     where user_id = :user_id
     $user_class_approved_p_clause))
and r.active_p='t'
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/index.xql}
dbqd.ecommerce.www.index.get_tl_products {dbqd.ecommerce.www.index.get_tl_products {      select
p.product_name, p.product_id, p.one_line_description
from ec_products_searchable p
where not exists (select 1 from ec_category_product_map m where p.product_id = m.product_id)
order by p.product_name
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/index.xql}
dbqd.ecommerce.www.mailing-list-add-2.get_list_name {dbqd.ecommerce.www.mailing-list-add-2.get_list_name {      select category_name from ec_categories where category_id=:category_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/mailing-list-add-2.xql}
dbqd.ecommerce.www.mailing-list-add-2.get_mailing_list_name {dbqd.ecommerce.www.mailing-list-add-2.get_mailing_list_name {      select category_name from ec_categories where category_id=:category_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/mailing-list-add-2.xql}
dbqd.ecommerce.www.mailing-list-add-2.get_subcat_listname {dbqd.ecommerce.www.mailing-list-add-2.get_subcat_listname {      select subcategory_name from ec_subcategories where subcategory_id=:subcategory_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/mailing-list-add-2.xql}
dbqd.ecommerce.www.mailing-list-add-2.get_category_name {dbqd.ecommerce.www.mailing-list-add-2.get_category_name {      select category_name from ec_categories where category_id=:category_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/mailing-list-add-2.xql}
dbqd.ecommerce.www.mailing-list-add-2.get_subcategory_name {dbqd.ecommerce.www.mailing-list-add-2.get_subcategory_name {      select subcategory_name from ec_subcategories where subcategory_id=:subcategory_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/mailing-list-add-2.xql}
dbqd.ecommerce.www.mailing-list-add-2.get_subsubcategory_name {dbqd.ecommerce.www.mailing-list-add-2.get_subsubcategory_name {      select subsubcategory_name from ec_subsubcategories where subsubcategory_id=:subsubcategory_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/mailing-list-add-2.xql}
dbqd.ecommerce.www.mailing-list-add.get_user_name {dbqd.ecommerce.www.mailing-list-add.get_user_name {      select first_names || ' ' || last_name as user_name from cc_users where user_id=:user_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/mailing-list-add.xql}
dbqd.ecommerce.www.mailing-list-add.get_cat_name {dbqd.ecommerce.www.mailing-list-add.get_cat_name {      select category_name from ec_categories where category_id=:category_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/mailing-list-add.xql}
dbqd.ecommerce.www.mailing-list-add.get_cat_name {dbqd.ecommerce.www.mailing-list-add.get_cat_name {      select category_name from ec_categories where category_id=:category_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/mailing-list-add.xql}
dbqd.ecommerce.www.mailing-list-add.get_subcat_name {dbqd.ecommerce.www.mailing-list-add.get_subcat_name {      select subcategory_name from ec_subcategories where subcategory_id=:subcategory_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/mailing-list-add.xql}
dbqd.ecommerce.www.mailing-list-add.get_cat_name {dbqd.ecommerce.www.mailing-list-add.get_cat_name {      select category_name from ec_categories where category_id=:category_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/mailing-list-add.xql}
dbqd.ecommerce.www.mailing-list-add.get_subcat_name {dbqd.ecommerce.www.mailing-list-add.get_subcat_name {      select subcategory_name from ec_subcategories where subcategory_id=:subcategory_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/mailing-list-add.xql}
dbqd.ecommerce.www.mailing-list-add.get_subsubcat_name {dbqd.ecommerce.www.mailing-list-add.get_subsubcat_name {      select subsubcategory_name from ec_subsubcategories where subsubcategory_id=:subsubcategory_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/mailing-list-add.xql}
dbqd.ecommerce.www.mailing-list-remove.get_mailing_list_name {dbqd.ecommerce.www.mailing-list-remove.get_mailing_list_name {      select category_name from ec_categories where category_id=:category_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/mailing-list-remove.xql}
dbqd.ecommerce.www.mailing-list-remove.get_mailing_list_name {dbqd.ecommerce.www.mailing-list-remove.get_mailing_list_name {      select category_name from ec_categories where category_id=:category_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/mailing-list-remove.xql}
dbqd.ecommerce.www.mailing-list-remove.get_subcat_ml_name {dbqd.ecommerce.www.mailing-list-remove.get_subcat_ml_name {      select subcategory_name from ec_subcategories where subcategory_id=:subcategory_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/mailing-list-remove.xql}
dbqd.ecommerce.www.mailing-list-remove.get_cat_ml_name {dbqd.ecommerce.www.mailing-list-remove.get_cat_ml_name {      select category_name from ec_categories where category_id=:category_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/mailing-list-remove.xql}
dbqd.ecommerce.www.mailing-list-remove.get_ml_subcat_name {dbqd.ecommerce.www.mailing-list-remove.get_ml_subcat_name {      select subcategory_name from ec_subcategories where subcategory_id=:subcategory_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/mailing-list-remove.xql}
dbqd.ecommerce.www.mailing-list-remove.get_subsub_ml_name {dbqd.ecommerce.www.mailing-list-remove.get_subsub_ml_name {      select subsubcategory_name from ec_subsubcategories where subsubcategory_id=:subsubcategory_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/mailing-list-remove.xql}
dbqd.ecommerce.www.payment.get_order_cost {dbqd.ecommerce.www.payment.get_order_cost {     select ec_order_cost(:order_id) as otppgc,
            ec_gift_certificate_balance(:user_id) as user_gift_certificate_balance
       from dual
     
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/payment-oracle.xql}
dbqd.ecommerce.www.payment.get_order_id_and_order_owner {dbqd.ecommerce.www.payment.get_order_id_and_order_owner {       select order_id, 
              shipping_address as address_id,
              user_id as order_owner
         from ec_orders 
        where user_session_id=:user_session_id 
          and order_state='in_basket'
       
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/payment.xql}
dbqd.ecommerce.www.payment.get_ec_item_cart_count {dbqd.ecommerce.www.payment.get_ec_item_cart_count {      select count(*) from ec_items where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/payment.xql}
dbqd.ecommerce.www.payment.get_creditcards_onfile {dbqd.ecommerce.www.payment.get_creditcards_onfile {      select c.creditcard_id, c.creditcard_type, c.creditcard_last_four, c.creditcard_expire
	from ec_creditcards c
	where c.user_id=:user_id
	and c.creditcard_number is not null
	and c.failed_p='f'
	and 0 < (select count(*) from ec_orders o where o.creditcard_id=c.creditcard_id and o.shipping_address=$address_id)
	order by c.creditcard_id desc
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/payment.xql}
dbqd.ecommerce.www.payment.get_zip_code {dbqd.ecommerce.www.payment.get_zip_code {      select zip_code from ec_addresses where address_id=:address_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/payment.xql}
dbqd.ecommerce.www.process-order-quantity-shipping.get_items_in_cart {dbqd.ecommerce.www.process-order-quantity-shipping.get_items_in_cart {      select i.item_id, i.product_id, u.offer_code
from ec_items i,
(select * from ec_user_session_offer_codes usoc where usoc.user_session_id=:user_session_id) u
where i.product_id=u.product_id(+)
and i.order_id=:order_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/process-order-quantity-shipping-oracle.xql}
dbqd.ecommerce.www.process-order-quantity-shipping.get_base_ship_cost {dbqd.ecommerce.www.process-order-quantity-shipping.get_base_ship_cost {      select nvl(base_shipping_cost,0) from ec_admin_settings
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/process-order-quantity-shipping-oracle.xql}
dbqd.ecommerce.www.process-order-quantity-shipping.get_exp_base_cost {dbqd.ecommerce.www.process-order-quantity-shipping.get_exp_base_cost {      select nvl(add_exp_base_shipping_cost,0) from ec_admin_settings
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/process-order-quantity-shipping-oracle.xql}
dbqd.ecommerce.www.process-order-quantity-shipping.get_shipping_tax {dbqd.ecommerce.www.process-order-quantity-shipping.get_shipping_tax {      select ec_tax(0,:order_shipping_cost,:order_id) from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/process-order-quantity-shipping-oracle.xql}
dbqd.ecommerce.www.process-order-quantity-shipping.get_order_id {dbqd.ecommerce.www.process-order-quantity-shipping.get_order_id {      select order_id from ec_orders where user_session_id=:user_session_id and order_state='in_basket'
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/process-order-quantity-shipping.xql}
dbqd.ecommerce.www.process-order-quantity-shipping.get_count_cart {dbqd.ecommerce.www.process-order-quantity-shipping.get_count_cart {      select count(*) from ec_items where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/process-order-quantity-shipping.xql}
dbqd.ecommerce.www.process-order-quantity-shipping.get_order_owner {dbqd.ecommerce.www.process-order-quantity-shipping.get_order_owner {      select user_id from ec_orders where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/process-order-quantity-shipping.xql}
dbqd.ecommerce.www.process-order-quantity-shipping.get_address_id {dbqd.ecommerce.www.process-order-quantity-shipping.get_address_id {      select shipping_address from ec_orders where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/process-order-quantity-shipping.xql}
dbqd.ecommerce.www.process-order-quantity-shipping.update_shipping_method {dbqd.ecommerce.www.process-order-quantity-shipping.update_shipping_method {      update ec_orders
set shipping_method=:shipping_method,
    tax_exempt_p=:tax_exempt_p
where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/process-order-quantity-shipping.xql}
dbqd.ecommerce.www.process-order-quantity-shipping.get_list_user_classes {dbqd.ecommerce.www.process-order-quantity-shipping.get_list_user_classes {      select user_class_id from ec_user_class_user_map where user_id=:user_id $additional_user_class_restriction
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/process-order-quantity-shipping.xql}
dbqd.ecommerce.www.process-order-quantity-shipping.get_shipping_per_item {dbqd.ecommerce.www.process-order-quantity-shipping.get_shipping_per_item {      select default_shipping_per_item, weight_shipping_cost from ec_admin_settings
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/process-order-quantity-shipping.xql}
dbqd.ecommerce.www.process-order-quantity-shipping.get_exp_amt_peritem {dbqd.ecommerce.www.process-order-quantity-shipping.get_exp_amt_peritem {      select add_exp_amount_per_item, add_exp_amount_by_weight from ec_admin_settings
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/process-order-quantity-shipping.xql}
dbqd.ecommerce.www.process-order-quantity-shipping.get_usps_abbrev {dbqd.ecommerce.www.process-order-quantity-shipping.get_usps_abbrev {      select usps_abbrev from ec_addresses where address_id=:address_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/process-order-quantity-shipping.xql}
dbqd.ecommerce.www.process-order-quantity-shipping.get_tax_rate {dbqd.ecommerce.www.process-order-quantity-shipping.get_tax_rate {      select tax_rate, shipping_p from ec_sales_tax_by_state where usps_abbrev=:usps_abbrev
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/process-order-quantity-shipping.xql}
dbqd.ecommerce.www.process-order-quantity-shipping.get_items_in_cart {dbqd.ecommerce.www.process-order-quantity-shipping.get_items_in_cart {      select i.item_id, i.product_id, u.offer_code
from ec_items i,
(select * from ec_user_session_offer_codes usoc where usoc.user_session_id=:user_session_id) u
where i.product_id=u.product_id(+)
and i.order_id=:order_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/process-order-quantity-shipping-oracle.xql}
dbqd.ecommerce.www.process-order-quantity-shipping.update_ec_items {dbqd.ecommerce.www.process-order-quantity-shipping.update_ec_items {      update ec_items set price_charged=round(:price_charged,2), price_name=:price_name, shipping_charged=round(:shipping_charged,2), price_tax_charged=round(:tax_charged,2), shipping_tax_charged=round(:shipping_tax,2) where item_id=:item_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/process-order-quantity-shipping.xql}
dbqd.ecommerce.www.process-order-quantity-shipping.get_base_ship_cost {dbqd.ecommerce.www.process-order-quantity-shipping.get_base_ship_cost {      select nvl(base_shipping_cost,0) from ec_admin_settings
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/process-order-quantity-shipping-oracle.xql}
dbqd.ecommerce.www.process-order-quantity-shipping.get_exp_base_cost {dbqd.ecommerce.www.process-order-quantity-shipping.get_exp_base_cost {      select nvl(add_exp_base_shipping_cost,0) from ec_admin_settings
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/process-order-quantity-shipping-oracle.xql}
dbqd.ecommerce.www.process-order-quantity-shipping.set_shipping_charges {dbqd.ecommerce.www.process-order-quantity-shipping.set_shipping_charges {      update ec_orders set shipping_charged=round(:order_shipping_cost,2), shipping_tax_charged=round(:tax_on_order_shipping_cost,2) where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/process-order-quantity-shipping.xql}
dbqd.ecommerce.www.process-payment.get_gc_balance {dbqd.ecommerce.www.process-payment.get_gc_balance {      select ec_gift_certificate_balance(:user_id) from dual
    } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/process-payment-oracle.xql}
dbqd.ecommerce.www.process-payment.get_order_id {dbqd.ecommerce.www.process-payment.get_order_id {      select order_id from ec_orders where user_session_id=:user_session_id and order_state='in_basket'
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/process-payment.xql}
dbqd.ecommerce.www.process-payment.get_shopping_cart_no {dbqd.ecommerce.www.process-payment.get_shopping_cart_no {      select count(*) from ec_items where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/process-payment.xql}
dbqd.ecommerce.www.process-payment.get_order_owner {dbqd.ecommerce.www.process-payment.get_order_owner {      select user_id from ec_orders where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/process-payment.xql}
dbqd.ecommerce.www.process-payment.get_address_id {dbqd.ecommerce.www.process-payment.get_address_id {      select shipping_address from ec_orders where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/process-payment.xql}
dbqd.ecommerce.www.process-payment.get_shipping_method {dbqd.ecommerce.www.process-payment.get_shipping_method {      select shipping_method from ec_orders where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/process-payment.xql}
dbqd.ecommerce.www.process-payment.get_cc_owner {dbqd.ecommerce.www.process-payment.get_cc_owner {      select user_id from ec_creditcards where creditcard_id=:creditcard_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/process-payment.xql}
dbqd.ecommerce.www.process-payment.use_existing_cc_for_order {dbqd.ecommerce.www.process-payment.use_existing_cc_for_order {      update ec_orders set creditcard_id=:creditcard_id where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/process-payment.xql}
dbqd.ecommerce.www.process-payment.insert_new_cc {dbqd.ecommerce.www.process-payment.insert_new_cc {      insert into ec_creditcards
	(creditcard_id, user_id, creditcard_number, creditcard_last_four, creditcard_type, creditcard_expire, billing_zip_code)
	values
	(:creditcard_id, :user_id, :creditcard_number,:cc_no , :creditcard_type,:expiry,:billing_zip_code)
	
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/process-payment.xql}
dbqd.ecommerce.www.process-payment.update_order_set_cc {dbqd.ecommerce.www.process-payment.update_order_set_cc {      update ec_orders set creditcard_id=:creditcard_id where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/process-payment.xql}
dbqd.ecommerce.www.process-payment.set_null_cc_in_order {dbqd.ecommerce.www.process-payment.set_null_cc_in_order {      update ec_orders set creditcard_id=null where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/process-payment.xql}
dbqd.ecommerce.www.product.get_ec_product_info {dbqd.ecommerce.www.product.get_ec_product_info {select *
  from ec_products p, ec_custom_product_field_values v
 where p.product_id = :product_id
   and p.product_id = v.product_id(+)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/product-oracle.xql}
dbqd.ecommerce.www.product.find_a_good_category {dbqd.ecommerce.www.product.find_a_good_category {    select * from 
        (select category_id,
               (select count(*)
                  from ec_subcategories s
                 where s.category_id = m.category_id) subcount,
               (select count(*)
                  from ec_subsubcategories ss
                 where ss.subcategory_id = m.category_id) subsubcount
          from ec_category_product_map m
         where product_id = :product_id
      order by subcount, subsubcount, category_id)
    where rownum = 1

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/product-oracle.xql}
dbqd.ecommerce.www.product-search.search_category {dbqd.ecommerce.www.product-search.search_category {      select p.product_name, p.product_id, p.dirname, p.one_line_description,pseudo_contains(p.product_name || p.one_line_description || p.detailed_description || p.search_keywords, :search_text) as score
      from ec_products_searchable p, ec_category_product_map c
      where c.category_id=:category_id
      and p.product_id=c.product_id
      and pseudo_contains(p.product_name || p.one_line_description ||  p.detailed_description || p.search_keywords, :search_text) > 0
      order by score desc
    } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/product-search-oracle.xql}
dbqd.ecommerce.www.product-search.search_subcategory {dbqd.ecommerce.www.product-search.search_subcategory {      select p.product_name, p.product_id, p.dirname, p.one_line_description,pseudo_contains(p.product_name || p.one_line_description || p.detailed_description || p.search_keywords, :search_text) as score
      from ec_products_searchable p, ec_subcategory_product_map c
      where c.subcategory_id=:subcategory_id
      and p.product_id=c.product_id
      and pseudo_contains(p.product_name || p.one_line_description ||  p.detailed_description || p.search_keywords, :search_text) > 0
      order by score desc
    } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/product-search-oracle.xql}
dbqd.ecommerce.www.product-search.search_all {dbqd.ecommerce.www.product-search.search_all {      select p.product_name, p.product_id, p.dirname, p.one_line_description,pseudo_contains(p.product_name || p.one_line_description || p.detailed_description || p.search_keywords, :search_text) as score
      from ec_products_searchable p
      where pseudo_contains(p.product_name || p.one_line_description ||  p.detailed_description || p.search_keywords, :search_text) > 0
      order by score desc
    } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/product-search-oracle.xql}
dbqd.ecommerce.www.product-search.insert_search_text_to_session_info {dbqd.ecommerce.www.product-search.insert_search_text_to_session_info {      insert into ec_user_session_info (user_session_id, category_id, search_text) values (:user_session_id, :category_id, :search_text)
    } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/product-search.xql}
dbqd.ecommerce.www.product-search.get_category_name {dbqd.ecommerce.www.product-search.get_category_name {      select category_name from ec_categories where category_id=:category_id
    } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/product-search.xql}
dbqd.ecommerce.www.product-search.get_subcategory_name {dbqd.ecommerce.www.product-search.get_subcategory_name {      select category_name || ' > ' || subcategory_name from ec_categories c, ec_subcategories s where s.subcategory_id=:subcategory_id and c.category_id=s.category_id
    } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/product-search.xql}
dbqd.ecommerce.www.product.insert_user_session_info {dbqd.ecommerce.www.product.insert_user_session_info {      insert into ec_user_session_info (user_session_id, product_id) values (:user_session_id, :product_id)
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/product.xql}
dbqd.ecommerce.www.product.get_offer_code_p {dbqd.ecommerce.www.product.get_offer_code_p {      select count(*) from ec_user_session_offer_codes where user_session_id=:user_session_id and product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/product.xql}
dbqd.ecommerce.www.product.inert_uc_offer_code {dbqd.ecommerce.www.product.inert_uc_offer_code {      insert into ec_user_session_offer_codes (user_session_id, product_id, offer_code) values (:user_session_id, :product_id, :offer_code)
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/product.xql}
dbqd.ecommerce.www.product.update_ec_us_offers {dbqd.ecommerce.www.product.update_ec_us_offers {      update ec_user_session_offer_codes set offer_code=:offer_code where user_session_id=:user_session_id and product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/product.xql}
dbqd.ecommerce.www.product.get_offer_code {dbqd.ecommerce.www.product.get_offer_code {      select offer_code from ec_user_session_offer_codes where user_session_id=:user_session_id and product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/product.xql}
dbqd.ecommerce.www.product.get_ec_product_info {dbqd.ecommerce.www.product.get_ec_product_info {select *
  from ec_products p, ec_custom_product_field_values v
 where p.product_id = :product_id
   and p.product_id = v.product_id(+)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/product-oracle.xql}
dbqd.ecommerce.www.product.get_template {dbqd.ecommerce.www.product.get_template {    select template
      from ec_templates
     where template_id=:template_id
    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/product.xql}
dbqd.ecommerce.www.product.get_template_list {dbqd.ecommerce.www.product.get_template_list {SELECT template
  FROM ec_templates t, ec_category_template_map ct, ec_category_product_map cp
 WHERE t.template_id = ct.template_id
   AND ct.category_id = cp.category_id
   AND cp.product_id = :product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/product.xql}
dbqd.ecommerce.www.product.get_template_finally {dbqd.ecommerce.www.product.get_template_finally {        select template
          from ec_templates
         where template_id=(select default_template
                              from ec_admin_settings)
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/product.xql}
dbqd.ecommerce.www.register.awaiting-approval.register_member_state_information {dbqd.ecommerce.www.register.awaiting-approval.register_member_state_information {      select member_state, email, email_verified_p, rel_id
from cc_users where user_id = :user_id 
and  (member_state is null or member_state = 'rejected')
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/register/awaiting-approval.xql}
dbqd.ecommerce.www.register.awaiting-approval.register_member_state_authorized_set {dbqd.ecommerce.www.register.awaiting-approval.register_member_state_authorized_set {      update membership_rels set member_state = 'approved' where rel_id = :rel_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/register/awaiting-approval.xql}
dbqd.ecommerce.www.register.awaiting-email-verification.register_user_state_properties {dbqd.ecommerce.www.register.awaiting-email-verification.register_user_state_properties {    select member_state, email, rowid 
    from cc_users
    where user_id = :user_id and
    email_verified_p = 'f' 
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/register/awaiting-email-verification-oracle.xql}
dbqd.ecommerce.www.register.awaiting-email-verification.register_member_state_authorized_set {dbqd.ecommerce.www.register.awaiting-email-verification.register_member_state_authorized_set {      update users set 
email_verified_p = 't'
where user_id = :user_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/register/awaiting-email-verification.xql}
dbqd.ecommerce.www.register.banned-user.register_banned_member_state {dbqd.ecommerce.www.register.banned-user.register_banned_member_state {    select member_state from cc_users 
    where user_id = :user_id 
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/register/banned-user.xql}
dbqd.ecommerce.www.register.deleted-user.register_deleted_member_state {dbqd.ecommerce.www.register.deleted-user.register_deleted_member_state {    select member_state from cc_users where user_id = :user_id

      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/register/deleted-user.xql}
dbqd.ecommerce.www.register.email-confirm.register_email_user_update {dbqd.ecommerce.www.register.email-confirm.register_email_user_update {      update users 
                        set email_verified_p = 't'
                        where user_id = :user_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/register/email-confirm.xql}
dbqd.ecommerce.www.register.email-confirm.register_email_confirm_update3 {dbqd.ecommerce.www.register.email-confirm.register_email_confirm_update3 {      update users
                        set email_verified_p = 't'
                        where user_id = :user_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/register/email-confirm.xql}
dbqd.ecommerce.www.register.email-password-2.users_state_authorized_or_deleted {dbqd.ecommerce.www.register.email-password-2.users_state_authorized_or_deleted {      select 
email from cc_users where user_id=:user_id
-- and user_state in ('authorized','deleted')
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/register/email-password-2.xql}
dbqd.ecommerce.www.register.email-password-2.password_answer {dbqd.ecommerce.www.register.email-password-2.password_answer {      select password_answer from users where user_id = :user_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/register/email-password-2.xql}
dbqd.ecommerce.www.register.email-password-2.first_last_name {dbqd.ecommerce.www.register.email-password-2.first_last_name {      select first_names db_first_names, last_name db_last_name from cc_users where user_id = $user_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/register/email-password-2.xql}
dbqd.ecommerce.www.register.email-password-3.first_last_names {dbqd.ecommerce.www.register.email-password-3.first_last_names {      select first_names db_first_names, last_name db_last_name, password_question from cc_users where user_id = :user_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/register/email-password-3.xql}
dbqd.ecommerce.www.register.email-password-3.update_question {dbqd.ecommerce.www.register.email-password-3.update_question {      update users set password_question = :question, password_answer = :answer where user_id = :user_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/register/email-password-3.xql}
dbqd.ecommerce.www.register.email-password.question {dbqd.ecommerce.www.register.email-password.question {      select password_question from users where user_id = :user_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/register/email-password.xql}
dbqd.ecommerce.www.register.restore-user.user_state_info {dbqd.ecommerce.www.register.restore-user.user_state_info {    select member_state, email, rel_id from cc_users where user_id = :user_id

      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/register/restore-user.xql}
dbqd.ecommerce.www.register.restore-user.member_state_authorized_transistion {dbqd.ecommerce.www.register.restore-user.member_state_authorized_transistion {	update membership_rels
	set member_state = 'approved'  
	where rel_id = :rel_id
    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/register/restore-user.xql}
dbqd.ecommerce.www.register.user-login.user_login_user_id_from_email {dbqd.ecommerce.www.register.user-login.user_login_user_id_from_email {    select user_id, member_state, email_verified_p
    from cc_users
    where email = :email
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/register/user-login.xql}
dbqd.ecommerce.www.register.user-new-2.user_new_2_rowid_for_email {dbqd.ecommerce.www.register.user-new-2.user_new_2_rowid_for_email {      select rowid from users where user_id = :user_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/register/user-new-2-oracle.xql}
dbqd.ecommerce.www.register.user-new-2.user_exists {dbqd.ecommerce.www.register.user-new-2.user_exists {      select count(*) from registered_users where user_id = :user_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/register/user-new-2.xql}
dbqd.ecommerce.www.review-submit-2.get_product_and_user_info {dbqd.ecommerce.www.review-submit-2.get_product_and_user_info {    select product_name,
           ec_product_comment_id_sequence.nextval as comment_id,
           user_email,
           to_char(sysdate,'Day Month DD, YYYY') as current_date
    from ec_products,
         (select email as user_email
          from   cc_users
          where  user_id = :user_id)
    where product_id=:product_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/review-submit-2-oracle.xql}
dbqd.ecommerce.www.review-submit-3.insert_new_comment {dbqd.ecommerce.www.review-submit-3.insert_new_comment {    insert into ec_product_comments
    (comment_id, product_id, user_id, user_comment, one_line_summary,
     rating, comment_date, last_modified, last_modifying_user, modified_ip_address)
    values
    (:comment_id, :product_id, :user_id, :user_comment, :one_line_summary,
     :rating, sysdate, sysdate, :user_id, :ns_conn_peeraddr)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/review-submit-3-oracle.xql}
dbqd.ecommerce.www.review-submit-3.product_name_and_double_click_check {dbqd.ecommerce.www.review-submit-3.product_name_and_double_click_check {select product_name,
       comment_found_p
from   ec_products,
       (select count(*) as comment_found_p
        from   ec_product_comments
        where  comment_id = :comment_id) ec_comments_count
where  product_id = :product_id

      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/review-submit-3.xql}
dbqd.ecommerce.www.review-submit.get_product_name {dbqd.ecommerce.www.review-submit.get_product_name {      select product_name from ec_products where product_id=:product_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/review-submit.xql}
dbqd.ecommerce.www.select-shipping.get_order_id_and_order_owner {dbqd.ecommerce.www.select-shipping.get_order_id_and_order_owner {       select order_id, user_id as order_owner
       from ec_orders 
       where user_session_id=:user_session_id and order_state='in_basket'
    } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/select-shipping.xql}
dbqd.ecommerce.www.select-shipping.get_an_address_id {dbqd.ecommerce.www.select-shipping.get_an_address_id {      select count(*) from ec_addresses where address_id=:address_id and user_id=:user_id
    } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/select-shipping.xql}
dbqd.ecommerce.www.select-shipping.update_ec_order_address {dbqd.ecommerce.www.select-shipping.update_ec_order_address {      update ec_orders set shipping_address=:address_id where order_id=:order_id
    } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/select-shipping.xql}
dbqd.ecommerce.www.select-shipping.get_address_id {dbqd.ecommerce.www.select-shipping.get_address_id {      select shipping_address from ec_orders where order_id=:order_id
    } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/select-shipping.xql}
dbqd.ecommerce.www.select-shipping.shipping_avail {dbqd.ecommerce.www.select-shipping.shipping_avail {      select distinct p.no_shipping_avail_p from ec_items i, ec_products p where i.product_id = p.product_id and p.no_shipping_avail_p = 't' and i.order_id = :order_id
    } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/select-shipping.xql}
dbqd.ecommerce.www.shipping-address-2.get_order_id {dbqd.ecommerce.www.shipping-address-2.get_order_id {      select order_id from ec_orders where user_session_id=:user_session_id and order_state='in_basket'
    } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/shipping-address-2.xql}
dbqd.ecommerce.www.shipping-address-2.update_address {dbqd.ecommerce.www.shipping-address-2.update_address {      update ec_addresses 
      set attn=:attn, line1=:line1, line2=:line2, city=:city, usps_abbrev=:usps_abbrev, zip_code=:zip_code, phone=:phone, phone_time=:phone_time
      where address_id=:address_id
    } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/shipping-address-2.xql}
dbqd.ecommerce.www.shipping-address-2.insert_new_address {dbqd.ecommerce.www.shipping-address-2.insert_new_address {      insert into ec_addresses
      (address_id, user_id, address_type, attn, line1, line2, city, usps_abbrev, zip_code, country_code, phone, phone_time)
      values
      (:address_id, :user_id, 'shipping', :attn, :line1,:line2,:city,:usps_abbrev,:zip_code,'US',:phone,:phone_time)
    } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/shipping-address-2.xql}
dbqd.ecommerce.www.shipping-address-2.set_shipping_on_order {dbqd.ecommerce.www.shipping-address-2.set_shipping_on_order {    update ec_orders set shipping_address=:address_id where order_id=:order_id
    } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/shipping-address-2.xql}
dbqd.ecommerce.www.shipping-address-international-2.get_order_id {dbqd.ecommerce.www.shipping-address-international-2.get_order_id {      select order_id from ec_orders where user_session_id=:user_session_id and order_state='in_basket'
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/shipping-address-international-2.xql}
dbqd.ecommerce.www.shipping-address-international-2.insert_new_address {dbqd.ecommerce.www.shipping-address-international-2.insert_new_address {      insert into ec_addresses
    (address_id, user_id, address_type, attn, line1, line2, city, full_state_name, zip_code, country_code, phone, phone_time)
    values
    (:address_id, :user_id, 'shipping', :attn, :line1,:line2,:city,:full_state_name,:zip_code,:country_code,:phone,:phone_time)
    
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/shipping-address-international-2.xql}
dbqd.ecommerce.www.shipping-address-international-2.update_order_shipping_address {dbqd.ecommerce.www.shipping-address-international-2.update_order_shipping_address {      update ec_orders set shipping_address=:address_id where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/shipping-address-international-2.xql}
dbqd.ecommerce.www.shipping-address-international.get_full_name {dbqd.ecommerce.www.shipping-address-international.get_full_name {      select first_names || ' ' || last_name as name from cc_users where user_id=:user_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/shipping-address-international.xql}
dbqd.ecommerce.www.shipping-address.get_full_name {dbqd.ecommerce.www.shipping-address.get_full_name {       select first_names || ' ' || last_name as name from cc_users where user_id=:user_id
     } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/shipping-address.xql}
dbqd.ecommerce.www.shipping-address.shipping_address {dbqd.ecommerce.www.shipping-address.shipping_address {       select attn, line1, line2, city, usps_abbrev, zip_code, phone, country_code, full_state_name, phone_time from ec_addresses where address_id=:address_id
     } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/shipping-address.xql}
dbqd.ecommerce.www.shopping-cart-add.insert_new_ec_order {dbqd.ecommerce.www.shopping-cart-add.insert_new_ec_order {      insert into ec_orders
      (order_id, user_session_id, order_state, in_basket_date)
      select :order_id, :user_session_id, 'in_basket', sysdate from dual
      where not exists (select 1 from ec_orders where user_session_id=:user_session_id and order_state='in_basket')
    } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/shopping-cart-add-oracle.xql}
dbqd.ecommerce.www.shopping-cart-add.insert_problem_into_log {dbqd.ecommerce.www.shopping-cart-add.insert_problem_into_log {      insert into ec_problems_log
      (problem_id, problem_date, problem_details)
      values
      (ec_problem_id_sequence.nextval, sysdate,:errormsg)
    } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/shopping-cart-add-oracle.xql}
dbqd.ecommerce.www.shopping-cart-add.insert_new_item_in_order {dbqd.ecommerce.www.shopping-cart-add.insert_new_item_in_order {      insert into ec_items
     (item_id, product_id, color_choice, size_choice, style_choice, order_id, in_cart_date)
     (select ec_item_id_sequence.nextval, :product_id, :color_choice, :size_choice, :style_choice, :order_id, sysdate from dual
     where not exists (select 1 from ec_items where order_id=:order_id and product_id=:product_id and color_choice  [ec_decode $color_choice "" "is null" "= :color_choice"]  and size_choice [ec_decode $size_choice "" "is null" "= :size_choice"] and style_choice [ec_decode $style_choice "" "is null" "= :style_choice"] and ((sysdate() - in_cart_date) * 86400 < 5)))
    } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/shopping-cart-add-oracle.xql}
dbqd.ecommerce.www.shopping-cart-add.get_n_confirmed_orders {dbqd.ecommerce.www.shopping-cart-add.get_n_confirmed_orders {      select count(*) from ec_orders where user_session_id=:user_session_id and order_state='confirmed'
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/shopping-cart-add.xql}
dbqd.ecommerce.www.shopping-cart-add.get_order_id {dbqd.ecommerce.www.shopping-cart-add.get_order_id {      select order_id from ec_orders where user_session_id=:user_session_id and order_state='in_basket'
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/shopping-cart-add.xql}
dbqd.ecommerce.www.shopping-cart-add.get_order_id {dbqd.ecommerce.www.shopping-cart-add.get_order_id {      select order_id from ec_orders where user_session_id=:user_session_id and order_state='in_basket'
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/shopping-cart-add.xql}
dbqd.ecommerce.www.shopping-cart-delete-from.get_order_id {dbqd.ecommerce.www.shopping-cart-delete-from.get_order_id {      select order_id from ec_orders where user_session_id=:user_session_id and order_state='in_basket'
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/shopping-cart-delete-from.xql}
dbqd.ecommerce.www.shopping-cart-delete-from.delete_item_from_cart {dbqd.ecommerce.www.shopping-cart-delete-from.delete_item_from_cart {      delete from ec_items where order_id=:order_id and product_id=:product_id and color_choice [ec_decode $color_choice "" "is null" "= :color_choice"] and size_choice [ec_decode $size_choice "" "is null" "= :size_choice"] and style_choice [ec_decode $style_choice "" "is null" "= :style_choice"]
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/shopping-cart-delete-from.xql}
dbqd.ecommerce.www.shopping-cart.get_products_in_cart {dbqd.ecommerce.www.shopping-cart.get_products_in_cart {      select p.product_name, p.one_line_description, p.product_id, count(*) as quantity, u.offer_code, i.color_choice, i.size_choice, i.style_choice
from ec_orders o, ec_items i, ec_products p, 
(select product_id, offer_code from ec_user_session_offer_codes usoc where usoc.user_session_id=:user_session_id) u
where i.product_id=p.product_id
and o.order_id=i.order_id
and p.product_id=u.product_id(+)
and o.user_session_id=:user_session_id and o.order_state='in_basket'
group by p.product_name, p.one_line_description, p.product_id, u.offer_code, i.color_choice, i.size_choice, i.style_choice
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/shopping-cart-oracle.xql}
dbqd.ecommerce.www.shopping-cart.check_for_saved_carts {dbqd.ecommerce.www.shopping-cart.check_for_saved_carts {      select 1 from dual where exists (select 1 from ec_orders where user_id=:user_id and order_state='in_basket' and saved_p='t')
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/shopping-cart-oracle.xql}
dbqd.ecommerce.www.shopping-cart-quantities-change.insert_new_quantity_to_add {dbqd.ecommerce.www.shopping-cart-quantities-change.insert_new_quantity_to_add {      insert into ec_items
		(item_id, product_id, color_choice, size_choice, style_choice, order_id, in_cart_date)
		values
		(ec_item_id_sequence.nextval, :product_id, :color_choice, :size_choice, :style_choice, :order_id, sysdate)
		
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/shopping-cart-quantities-change-oracle.xql}
dbqd.ecommerce.www.shopping-cart-quantities-change.get_order_id {dbqd.ecommerce.www.shopping-cart-quantities-change.get_order_id {      select order_id from ec_orders where order_state='in_basket' and user_session_id=:user_session_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/shopping-cart-quantities-change.xql}
dbqd.ecommerce.www.shopping-cart-quantities-change. {dbqd.ecommerce.www.shopping-cart-quantities-change. {    select i.product_id, 
           i.color_choice, 
           i.size_choice, 
           i.style_choice, 
           count(*) as r_quantity
      from ec_orders o, 
           ec_items i
     where o.order_id=i.order_id
       and o.user_session_id=:user_session_id
       and o.order_state='in_basket'
  group by i.product_id, 
           i.color_choice, 
           i.size_choice, 
           i.style_choice
         
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/shopping-cart-quantities-change.xql}
dbqd.ecommerce.www.shopping-cart-quantities-change.get_rows_to_delete {dbqd.ecommerce.www.shopping-cart-quantities-change.get_rows_to_delete {         select max(item_id) 
           from ec_items 
          where product_id=:product_id
            and color_choice [ec_decode $color_choice "" "is null" "= :color_choice"]
            and size_choice [ec_decode $size_choice "" "is null" "= :size_choice"]
            and style_choice [ec_decode $style_choice "" "is null" "= :style_choice"]
            and order_id=:order_id $extra_condition
            
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/shopping-cart-quantities-change.xql}
dbqd.ecommerce.www.shopping-cart-quantities-change.delete_from_ec_items {dbqd.ecommerce.www.shopping-cart-quantities-change.delete_from_ec_items {      delete from ec_items where item_id in ([join $rows_to_delete ", "])
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/shopping-cart-quantities-change.xql}
dbqd.ecommerce.www.shopping-cart-retrieve-2.get_basket_info {dbqd.ecommerce.www.shopping-cart-retrieve-2.get_basket_info {      select to_char(o.in_basket_date,'Month DD, YYYY') as formatted_in_basket_date, o.in_basket_date, o.order_id, count(*) as n_products
from ec_orders o, ec_items i
where user_id=:user_id
and order_state='in_basket'
and saved_p='t'
and i.order_id=o.order_id
group by o.order_id, to_char(o.in_basket_date,'Month DD, YYYY'), o.in_basket_date
order by o.in_basket_date
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/shopping-cart-retrieve-2-oracle.xql}
dbqd.ecommerce.www.shopping-cart-retrieve-3.get_saved_date {dbqd.ecommerce.www.shopping-cart-retrieve-3.get_saved_date {      select to_char(in_basket_date,'Month DD, YYYY') as formatted_in_basket_date from ec_orders where order_id=:order_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/shopping-cart-retrieve-3-oracle.xql}
dbqd.ecommerce.www.shopping-cart-retrieve-3.get_order_exists_p {dbqd.ecommerce.www.shopping-cart-retrieve-3.get_order_exists_p {      select count(*) from ec_orders where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/shopping-cart-retrieve-3.xql}
dbqd.ecommerce.www.shopping-cart-retrieve-3.get_order_is_theirs {dbqd.ecommerce.www.shopping-cart-retrieve-3.get_order_is_theirs {      select count(*) from ec_orders where order_id=:order_id and user_id=:user_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/shopping-cart-retrieve-3.xql}
dbqd.ecommerce.www.shopping-cart-retrieve-3.confirm_have_basket {dbqd.ecommerce.www.shopping-cart-retrieve-3.confirm_have_basket {      select count(*) from ec_orders where order_id=:order_id and order_state='in_basket' and saved_p='t'
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/shopping-cart-retrieve-3.xql}
dbqd.ecommerce.www.shopping-cart-retrieve-3.get_saved_shopping_cart {dbqd.ecommerce.www.shopping-cart-retrieve-3.get_saved_shopping_cart {      select p.product_name, p.one_line_description, p.product_id, i.color_choice, i.size_choice, i.style_choice, count(*) as quantity
    from ec_orders o, ec_items i, ec_products p
    where i.product_id=p.product_id
    and o.order_id=i.order_id
    and o.order_id=:order_id
    group by p.product_name, p.one_line_description, p.product_id, i.color_choice, i.size_choice, i.style_choice
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/shopping-cart-retrieve-3.xql}
dbqd.ecommerce.www.shopping-cart-retrieve-3.get_n_baskets {dbqd.ecommerce.www.shopping-cart-retrieve-3.get_n_baskets {      select count(*) from ec_orders where order_state='in_basket' and user_session_id=:user_session_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/shopping-cart-retrieve-3.xql}
dbqd.ecommerce.www.shopping-cart-retrieve-3.update_ec_orders {dbqd.ecommerce.www.shopping-cart-retrieve-3.update_ec_orders {      update ec_orders set user_session_id=:user_session_id, saved_p='f' where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/shopping-cart-retrieve-3.xql}
dbqd.ecommerce.www.shopping-cart-retrieve-3.get_special_offers {dbqd.ecommerce.www.shopping-cart-retrieve-3.get_special_offers {      select o.offer_code, o.product_id
	from ec_user_sessions s, ec_user_session_offer_codes o, ec_sale_prices_current p
	where p.offer_code=o.offer_code
	and s.user_session_id=o.user_session_id
	and s.user_id=:user_id
	order by p.sale_price
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/shopping-cart-retrieve-3.xql}
dbqd.ecommerce.www.shopping-cart-retrieve-3.delete_previous_offer_codes {dbqd.ecommerce.www.shopping-cart-retrieve-3.delete_previous_offer_codes {      delete from ec_user_session_offer_codes where user_session_id=:user_session_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/shopping-cart-retrieve-3.xql}
dbqd.ecommerce.www.shopping-cart-retrieve-3.insert_session_offer {dbqd.ecommerce.www.shopping-cart-retrieve-3.insert_session_offer {      insert into ec_user_session_offer_codes
		(user_session_id, product_id, offer_code)
		values
		(:user_session_id, :temp_pd, :offprod)
		
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/shopping-cart-retrieve-3.xql}
dbqd.ecommerce.www.shopping-cart-retrieve-3.get_current_basket {dbqd.ecommerce.www.shopping-cart-retrieve-3.get_current_basket {      select order_id from ec_orders where user_session_id=:user_session_id and order_state='in_basket'
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/shopping-cart-retrieve-3.xql}
dbqd.ecommerce.www.shopping-cart-retrieve-3.update_order_basket_pr {dbqd.ecommerce.www.shopping-cart-retrieve-3.update_order_basket_pr {      update ec_items set order_id=:current_basket where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/shopping-cart-retrieve-3.xql}
dbqd.ecommerce.www.shopping-cart-retrieve-3.get_product_offer_codes {dbqd.ecommerce.www.shopping-cart-retrieve-3.get_product_offer_codes {      select o.offer_code, o.product_id
    from ec_user_sessions s, ec_user_session_offer_codes o, ec_sale_prices_current p
    where p.offer_code=o.offer_code
    and s.user_session_id=o.user_session_id
    and s.user_id=:user_id
    order by p.sale_price
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/shopping-cart-retrieve-3.xql}
dbqd.ecommerce.www.shopping-cart-retrieve-3.delete_session_offer_codes {dbqd.ecommerce.www.shopping-cart-retrieve-3.delete_session_offer_codes {      delete from ec_user_session_offer_codes where user_session_id=:user_session_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/shopping-cart-retrieve-3.xql}
dbqd.ecommerce.www.shopping-cart-retrieve-3.insert_session_offer {dbqd.ecommerce.www.shopping-cart-retrieve-3.insert_session_offer {      insert into ec_user_session_offer_codes
		(user_session_id, product_id, offer_code)
		values
		(:user_session_id, :temp_pd, :offprod)
		
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/shopping-cart-retrieve-3.xql}
dbqd.ecommerce.www.shopping-cart-retrieve-3.get_current_baskey {dbqd.ecommerce.www.shopping-cart-retrieve-3.get_current_baskey {      select order_id from ec_orders where user_session_id=:user_session_id and order_state='in_basket'
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/shopping-cart-retrieve-3.xql}
dbqd.ecommerce.www.shopping-cart-retrieve-3.delete_current_items {dbqd.ecommerce.www.shopping-cart-retrieve-3.delete_current_items {      delete from ec_items where order_id=:current_basket
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/shopping-cart-retrieve-3.xql}
dbqd.ecommerce.www.shopping-cart-retrieve-3.update_items {dbqd.ecommerce.www.shopping-cart-retrieve-3.update_items {      update ec_items set order_id=:current_basket where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/shopping-cart-retrieve-3.xql}
dbqd.ecommerce.www.shopping-cart-retrieve-3. {dbqd.ecommerce.www.shopping-cart-retrieve-3. {      select o.offer_code, o.product_id
    from ec_user_sessions s, ec_user_session_offer_codes o, ec_sale_prices_current p
    where p.offer_code=o.offer_code
    and s.user_session_id=o.user_session_id
    and s.user_id=:user_id
    order by p.sale_price
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/shopping-cart-retrieve-3.xql}
dbqd.ecommerce.www.shopping-cart-retrieve-3.delete_uc_offer_codes {dbqd.ecommerce.www.shopping-cart-retrieve-3.delete_uc_offer_codes {      delete from ec_user_session_offer_codes where user_session_id=:user_session_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/shopping-cart-retrieve-3.xql}
dbqd.ecommerce.www.shopping-cart-retrieve-3.insert_session_offer {dbqd.ecommerce.www.shopping-cart-retrieve-3.insert_session_offer {      insert into ec_user_session_offer_codes
		(user_session_id, product_id, offer_code)
		values
		(:user_session_id, :temp_pd, :offprod)
		
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/shopping-cart-retrieve-3.xql}
dbqd.ecommerce.www.shopping-cart-retrieve-3.delete_current_cart {dbqd.ecommerce.www.shopping-cart-retrieve-3.delete_current_cart {      delete from ec_items where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/shopping-cart-retrieve-3.xql}
dbqd.ecommerce.www.shopping-cart-retrieve-3.delete_current_cart {dbqd.ecommerce.www.shopping-cart-retrieve-3.delete_current_cart {      delete from ec_items where order_id=:order_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/shopping-cart-retrieve-3.xql}
dbqd.ecommerce.www.shopping-cart-retrieve.get_user_name {dbqd.ecommerce.www.shopping-cart-retrieve.get_user_name {      select first_names || ' ' || last_name as user_name from cc_users where user_id=:user_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/shopping-cart-retrieve.xql}
dbqd.ecommerce.www.shopping-cart-save-2.update_ec_orders {dbqd.ecommerce.www.shopping-cart-save-2.update_ec_orders {      update ec_orders set user_id=:user_id, user_session_id=null, saved_p='t'
where user_session_id=:user_session_id and order_state='in_basket'
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/shopping-cart-save-2.xql}
dbqd.ecommerce.www.shopping-cart-save.get_full_name {dbqd.ecommerce.www.shopping-cart-save.get_full_name {      select first_names || ' ' || last_name as user_name from cc_users where user_id=:user_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/shopping-cart-save.xql}
dbqd.ecommerce.www.shopping-cart.get_n_items {dbqd.ecommerce.www.shopping-cart.get_n_items {      select count(*) 
      from ec_orders o, ec_items i
      where o.order_id=i.order_id
      and o.user_session_id=:user_session_id and o.order_state='in_basket'
    } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/shopping-cart.xql}
dbqd.ecommerce.www.shopping-cart.get_products_in_cart {dbqd.ecommerce.www.shopping-cart.get_products_in_cart {      select p.product_name, p.one_line_description, p.product_id, count(*) as quantity, u.offer_code, i.color_choice, i.size_choice, i.style_choice
from ec_orders o, ec_items i, ec_products p, 
(select product_id, offer_code from ec_user_session_offer_codes usoc where usoc.user_session_id=:user_session_id) u
where i.product_id=p.product_id
and o.order_id=i.order_id
and p.product_id=u.product_id(+)
and o.user_session_id=:user_session_id and o.order_state='in_basket'
group by p.product_name, p.one_line_description, p.product_id, u.offer_code, i.color_choice, i.size_choice, i.style_choice
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/shopping-cart-oracle.xql}
dbqd.ecommerce.www.shopping-cart.tax_states {dbqd.ecommerce.www.shopping-cart.tax_states {      select tax_rate, initcap(state_name) as state 
      from ec_sales_tax_by_state tax, us_states state 
      where state.abbrev = tax.usps_abbrev
    } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/shopping-cart.xql}
dbqd.ecommerce.www.thank-you.get_order_id_info {dbqd.ecommerce.www.thank-you.get_order_id_info {      select order_id from ec_orders where user_id=:user_id and confirmed_date is not null and order_id=(select max(o2.order_id) from ec_orders o2 where o2.user_id=$user_id and o2.confirmed_date is not null)
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/thank-you.xql}
dbqd.ecommerce.www.track.get_order_info {dbqd.ecommerce.www.track.get_order_info {      select to_char(shipment_date, 'MMDDYY') as ship_date_for_fedex, to_char(shipment_date, 'MM/DD/YYYY') as pretty_ship_date, carrier, tracking_number
from ec_shipments
where shipment_id = :shipment_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ecommerce/www/track-oracle.xql}
dbqd.ecommerce.www.track.assure_order_is_this_user {dbqd.ecommerce.www.track.assure_order_is_this_user {      select user_id from ec_orders o, ec_shipments s
where o.order_id = s.order_id
and s.shipment_id = :shipment_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/track.xql}
dbqd.ecommerce.www.update-user-classes-2.get_old_class_ids {dbqd.ecommerce.www.update-user-classes-2.get_old_class_ids {      select user_class_id 
    from ec_user_class_user_map 
    where user_id = :user_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/update-user-classes-2.xql}
dbqd.ecommerce.www.update-user-classes.get_user_class_list_for_uid {dbqd.ecommerce.www.update-user-classes.get_user_class_list_for_uid {      select user_class_id 
from ec_user_class_user_map 
where user_id = :user_id
      } {} {} {} F:/temp/openacs-4/packages/ecommerce/www/update-user-classes.xql}
dbqd.edit-this-page.tcl.etp-procs.etp::define_content_type.object_type_create {dbqd.edit-this-page.tcl.etp-procs.etp::define_content_type.object_type_create {	begin
	    acs_object_type.create_type (
	        object_type    => :content_type,
	        pretty_name    => :pretty_name,
	        pretty_plural  => :pretty_plural,
	        supertype      => 'content_revision',
	        table_name     => :content_type,
	        id_column      => :content_type
	    );
	end;
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/edit-this-page/tcl/etp-procs-oracle.xql}
dbqd.edit-this-page.tcl.etp-procs.etp::define_content_type.attribute_create {dbqd.edit-this-page.tcl.etp-procs.etp::define_content_type.attribute_create {	begin
		:1 := acs_attribute.create_attribute (
		    object_type      => :content_type,
		    attribute_name   => :a_name,
		    datatype         => :a_datatype,
		    pretty_name      => :a_pretty_name,
		    pretty_plural    => :a_pretty_plural,
		    default_value    => :a_default,
		    min_n_values     => 1,
		    max_n_values     => 1,
		    storage          => 'generic'
		);
	end;
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/edit-this-page/tcl/etp-procs-oracle.xql}
dbqd.edit-this-page.tcl.etp-procs.etp::make_page.page_create {dbqd.edit-this-page.tcl.etp-procs.etp::make_page.page_create {	begin
	  :1 := etp.create_page(
	           package_id     => :package_id,
	           name           => :name,
                   title          => :title,
	           content_type   => :content_type
	        );
	end;
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/edit-this-page/tcl/etp-procs-oracle.xql}
dbqd.edit-this-page.tcl.etp-procs.etp::register-page.package_id_from_url {dbqd.edit-this-page.tcl.etp-procs.etp::register-page.package_id_from_url {	    select object_id as package_id
	      from site_nodes
	     where node_id = site_node.node_id(:url_stub, null)
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/edit-this-page/tcl/etp-procs-oracle.xql}
dbqd.edit-this-page.tcl.etp-procs.etp::make_page.page_exists {dbqd.edit-this-page.tcl.etp-procs.etp::make_page.page_exists {	    select 1 from cr_items
	     where parent_id = etp.get_folder_id(:package_id)
	       and name = :name
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/edit-this-page/tcl/etp-procs-oracle.xql}
dbqd.edit-this-page.tcl.etp-procs.etp::get_pa.get_page_attributes {dbqd.edit-this-page.tcl.etp-procs.etp::get_pa.get_page_attributes {	select i.item_id, i.name, r.revision_id, r.title, 
	       r.description, r.publish_date, r.content $extended_attributes
	  from cr_items i, cr_revisions r
	 where i.parent_id = etp.get_folder_id(:package_id)
	   and i.name = :name
	   and i.item_id = r.item_id
	   and r.revision_id = i.live_revision
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/edit-this-page/tcl/etp-procs-oracle.xql}
dbqd.edit-this-page.tcl.etp-procs.etp::get_pa.get_page_attributes_other_revision {dbqd.edit-this-page.tcl.etp-procs.etp::get_pa.get_page_attributes_other_revision {	select i.item_id, i.name, r.revision_id, r.title, 
	       r.description, r.publish_date, r.content $extended_attributes
	  from cr_items i, cr_revisions r
	 where i.parent_id = etp.get_folder_id(:package_id)
	   and i.name = :name
	   and i.item_id = r.item_id
	   and r.revision_id = :revision_id
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/edit-this-page/tcl/etp-procs-oracle.xql}
dbqd.edit-this-page.tcl.etp-procs.etp::get_latest_revision_id.get_latest_revision_id {dbqd.edit-this-page.tcl.etp-procs.etp::get_latest_revision_id.get_latest_revision_id {	select max(revision_id) as revision_id
          from cr_revisions r, cr_items i
         where i.parent_id = etp.get_folder_id(:package_id)
           and i.name = :name
           and i.item_id = r.item_id
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/edit-this-page/tcl/etp-procs-oracle.xql}
dbqd.edit-this-page.tcl.etp-procs.etp::get_live_revision_id.get_live_revision_id {dbqd.edit-this-page.tcl.etp-procs.etp::get_live_revision_id.get_live_revision_id {	select live_revision as revision_id
          from cr_items i
         where i.parent_id = etp.get_folder_id(:package_id)
           and i.name = :name
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/edit-this-page/tcl/etp-procs-oracle.xql}
dbqd.edit-this-page.tcl.etp-procs.etp::get_content_items.get_content_items {dbqd.edit-this-page.tcl.etp-procs.etp::get_content_items.get_content_items {   select * from
     (select * from (
	select $columns
          from cr_items i, cr_revisions r
         where i.parent_id = etp.get_folder_id(:package_id)
	   and i.name != 'index'
           and i.live_revision = r.revision_id(+)
     ) attributes
     where $extra_where_clauses
     order by $orderby)
   $limit_clause
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/edit-this-page/tcl/etp-procs-oracle.xql}
dbqd.edit-this-page.tcl.etp-procs.etp::get_subtopics.get_subtopics {dbqd.edit-this-page.tcl.etp-procs.etp::get_subtopics.get_subtopics {select child.name, child.node_id, child.object_id as package_id,
                   etp.package_title(child.object_id) as title,
                   etp.package_description(child.object_id) as description
  from site_nodes parent, site_nodes child, apm_packages p
 where parent.object_id = :package_id
   and child.parent_id = parent.node_id
   and child.object_id = p.package_id
   and p.package_key = 'edit-this-page'
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/edit-this-page/tcl/etp-procs-oracle.xql}
dbqd.edit-this-page.tcl.etp-procs.etp::get_attribute_lookup_sql.lookup_sql_clause {dbqd.edit-this-page.tcl.etp-procs.etp::get_attribute_lookup_sql.lookup_sql_clause {    etp.get_attribute_value(r.revision_id, $attribute_id)
  } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/edit-this-page/tcl/etp-procs-oracle.xql}
dbqd.edit-this-page.tcl.etp-procs.etp::get_content_items.gci_orderby {dbqd.edit-this-page.tcl.etp-procs.etp::get_content_items.gci_orderby {	sort_order
  } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/edit-this-page/tcl/etp-procs-oracle.xql}
dbqd.edit-this-page.tcl.etp-procs.etp::get_content_items.gci_columns_clause {dbqd.edit-this-page.tcl.etp-procs.etp::get_content_items.gci_columns_clause {   i.item_id, i.name,
             to_char(r.publish_date, 'Mon DD, YYYY') as publish_date, rownum as sort_order,
             (select object_type from acs_objects 
               where object_id = i.item_id) as object_type,
             etp.get_relative_url(i.item_id, i.name) as url,
             etp.get_title(i.item_id, r.title) as title,
             etp.get_description(i.item_id, r.description) as description
  } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/edit-this-page/tcl/etp-procs-oracle.xql}
dbqd.edit-this-page.tcl.etp-procs.etp::define_content_type.object_type_exists {dbqd.edit-this-page.tcl.etp-procs.etp::define_content_type.object_type_exists {	select 1 from acs_object_types
	 where object_type = :content_type
} {} {} {} F:/temp/openacs-4/packages/edit-this-page/tcl/etp-procs.xql}
dbqd.edit-this-page.tcl.etp-procs.etp::define_content_type.attribute_exists {dbqd.edit-this-page.tcl.etp-procs.etp::define_content_type.attribute_exists {	    select attribute_id from acs_attributes
	     where object_type = :content_type
	       and attribute_name = :a_name
} {} {} {} F:/temp/openacs-4/packages/edit-this-page/tcl/etp-procs.xql}
dbqd.edit-this-page.tcl.etp-procs.etp::get_content_items.gci_where_clause {dbqd.edit-this-page.tcl.etp-procs.etp::get_content_items.gci_where_clause {   1 = 1
} {} {} {} F:/temp/openacs-4/packages/edit-this-page/tcl/etp-procs.xql}
dbqd.edit-this-page.templates.news-index.archive_where_clause {dbqd.edit-this-page.templates.news-index.archive_where_clause {         sysdate between to_date(attributes.release_date, 'Month DD, YYYY') and
           to_date(attributes.archive_date, 'Month DD, YYYY')
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/edit-this-page/templates/news-index-oracle.xql}
dbqd.edit-this-page.templates.news-index.no_archive_where_clause {dbqd.edit-this-page.templates.news-index.no_archive_where_clause {         sysdate >= to_date(attributes.archive_date, 'Month DD, YYYY')
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/edit-this-page/templates/news-index-oracle.xql}
dbqd.edit-this-page.templates.news-index.orderby_clause {dbqd.edit-this-page.templates.news-index.orderby_clause {         to_date(attributes.release_date, 'Month DD, YYYY') desc
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/edit-this-page/templates/news-index-oracle.xql}
dbqd.edit-this-page.www.etp-delete.revert_to_revision {dbqd.edit-this-page.www.etp-delete.revert_to_revision {begin
  content_item.delete(:revision_id)
end;
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/edit-this-page/www/etp-delete-oracle.xql}
dbqd.edit-this-page.www.etp-delete.get_title {dbqd.edit-this-page.www.etp-delete.get_title {  select title
    from cr_revisions r, cr_items i
   where i.parent_id = etp.get_folder_id(:package_id)
     and i.name = :name
     and r.item_id = i.item_id
     and r.revision_id = i.live_revision
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/edit-this-page/www/etp-delete-oracle.xql}
dbqd.edit-this-page.www.etp-delete.get_item_id {dbqd.edit-this-page.www.etp-delete.get_item_id {  select item_id
    from cr_items
   where parent_id = etp.get_folder_id(:package_id)
     and name = :name
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/edit-this-page/www/etp-delete-oracle.xql}
dbqd.edit-this-page.www.etp-delete.clear_revisions {dbqd.edit-this-page.www.etp-delete.clear_revisions {update cr_items set live_revision=null, latest_revision=null
where item_id = :item_id
} {} {} {} F:/temp/openacs-4/packages/edit-this-page/www/etp-delete.xql}
dbqd.edit-this-page.www.etp-edit-2.create_new_revision {dbqd.edit-this-page.www.etp-edit-2.create_new_revision {begin
  :1 := etp.create_new_revision(:package_id, :name, :user_id);
end;
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/edit-this-page/www/etp-edit-2-oracle.xql}
dbqd.edit-this-page.www.etp-edit-2.update_content_attribute_clob {dbqd.edit-this-page.www.etp-edit-2.update_content_attribute_clob {    update cr_revisions
    set    content = empty_blob()
    where  revision_id = :latest_revision_id
    returning content into :1
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/edit-this-page/www/etp-edit-2-oracle.xql}
dbqd.edit-this-page.www.etp-edit-2.transform_date {dbqd.edit-this-page.www.etp-edit-2.transform_date {select to_char(to_date(:date_string, 'YYYY-MM-DD'), :date_format)
from dual
} {} {} {} F:/temp/openacs-4/packages/edit-this-page/www/etp-edit-2.xql}
dbqd.edit-this-page.www.etp-edit-2.update_attribute {dbqd.edit-this-page.www.etp-edit-2.update_attribute {update cr_revisions
set $attribute = :value
where revision_id = :latest_revision_id
} {} {} {} F:/temp/openacs-4/packages/edit-this-page/www/etp-edit-2.xql}
dbqd.edit-this-page.www.etp-edit-2.delete_ext_attribute {dbqd.edit-this-page.www.etp-edit-2.delete_ext_attribute {delete from acs_attribute_values
where object_id = :latest_revision_id
and attribute_id = :attribute_id
} {} {} {} F:/temp/openacs-4/packages/edit-this-page/www/etp-edit-2.xql}
dbqd.edit-this-page.www.etp-edit-2.insert_ext_attribute {dbqd.edit-this-page.www.etp-edit-2.insert_ext_attribute {insert into acs_attribute_values (object_id, attribute_id, attr_value)
values (:latest_revision_id, :attribute_id, :value)
} {} {} {} F:/temp/openacs-4/packages/edit-this-page/www/etp-edit-2.xql}
dbqd.edit-this-page.www.etp-edit-2.update_package_instance_name {dbqd.edit-this-page.www.etp-edit-2.update_package_instance_name {update apm_packages
set instance_name = :value
where package_id = :package_id
} {} {} {} F:/temp/openacs-4/packages/edit-this-page/www/etp-edit-2.xql}
dbqd.edit-this-page.www.etp-edit.transform_date {dbqd.edit-this-page.www.etp-edit.transform_date {	select to_char(to_date(:value, :date_format), 'YYYY-MM-DD')
	from dual
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/edit-this-page/www/etp-edit-oracle.xql}
dbqd.edit-this-page.www.etp-edit.get_standard_attribute {dbqd.edit-this-page.www.etp-edit.get_standard_attribute {        select $attribute as value, r.title as page_title
          from cr_revisions r, cr_items i
         where i.parent_id = etp.get_folder_id(:package_id)
           and i.name = :name
           and i.item_id = r.item_id
	   and r.revision_id = :revision_id
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/edit-this-page/www/etp-edit-oracle.xql}
dbqd.edit-this-page.www.etp-edit.get_extended_attribute {dbqd.edit-this-page.www.etp-edit.get_extended_attribute {	select etp.get_attribute_value(r.revision_id, :attribute_id) as value,
	       r.title as page_title
	  from cr_items i, cr_revisions r
	 where i.parent_id = etp.get_folder_id(:package_id)
	   and i.name = :name
	   and i.item_id = r.item_id
	   and r.revision_id = :revision_id
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/edit-this-page/www/etp-edit-oracle.xql}
dbqd.edit-this-page.www.etp-extlink.create_extlink {dbqd.edit-this-page.www.etp-extlink.create_extlink {  begin
    :1 := etp.create_extlink(:package_id, :url, :label, :description);
  end;
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/edit-this-page/www/etp-extlink-oracle.xql}
dbqd.edit-this-page.www.etp-history.get_revisions {dbqd.edit-this-page.www.etp-history.get_revisions {select o.creation_user as creation_user_id,
       person.name(o.creation_user) as creation_user_name,
       to_char(o.creation_date, 'Mon DD') as creation_date,
       o.modifying_user as publish_user_id, 
       person.name(o.modifying_user) as publish_user_name,
       to_char(r.publish_date, 'Mon DD') as publish_date,
       r.revision_id, 
       content_revision.get_number(r.revision_id) as version_number
from cr_revisions r, cr_items i, acs_objects o
where r.item_id = i.item_id
and o.object_id = r.revision_id
and i.parent_id = etp.get_folder_id(:package_id)
and i.name = :name
order by r.revision_id

} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/edit-this-page/www/etp-history-oracle.xql}
dbqd.edit-this-page.www.etp.get_current_page_attributes {dbqd.edit-this-page.www.etp.get_current_page_attributes {	select i.item_id, i.name, r.revision_id, r.title, 
               content_revision.get_number(r.revision_id) as latest_revision,
               content_revision.get_number(i.live_revision) as live_revision,
	       r.description, r.publish_date, r.content $extended_attributes
	  from cr_items i, cr_revisions r
	 where i.parent_id = etp.get_folder_id(:package_id)
	   and i.name = :name
	   and i.item_id = r.item_id
	   and r.revision_id = :revision_id
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/edit-this-page/www/etp-oracle.xql}
dbqd.edit-this-page.www.etp.get_content_pages {dbqd.edit-this-page.www.etp.get_content_pages {  select name, title, rownum as sort_order
    from cr_items i, cr_revisions r
   where i.parent_id = etp.get_folder_id(:package_id)
     and i.name != 'index'
     and i.item_id = r.item_id
     and i.latest_revision = r.revision_id
   order by sort_order
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/edit-this-page/www/etp-oracle.xql}
dbqd.edit-this-page.www.etp-publish.set_publish_date {dbqd.edit-this-page.www.etp-publish.set_publish_date {update cr_revisions
set publish_date = sysdate
where revision_id = :latest_revision_id
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/edit-this-page/www/etp-publish-oracle.xql}
dbqd.edit-this-page.www.etp-publish.set_audit_info {dbqd.edit-this-page.www.etp-publish.set_audit_info {update acs_objects
set modifying_user = :user_id,
    last_modified = sysdate
where object_id = :latest_revision_id
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/edit-this-page/www/etp-publish-oracle.xql}
dbqd.edit-this-page.www.etp-publish.publish_latest_revision {dbqd.edit-this-page.www.etp-publish.publish_latest_revision {update cr_items
set live_revision = :latest_revision_id
where live_revision = :live_revision_id
} {} {} {} F:/temp/openacs-4/packages/edit-this-page/www/etp-publish.xql}
dbqd.edit-this-page.www.etp-revert.delete_revision {dbqd.edit-this-page.www.etp-revert.delete_revision {begin
  content_revision.delete(:revision_id);
end;
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/edit-this-page/www/etp-revert-oracle.xql}
dbqd.edit-this-page.www.etp-revert.get_item_id {dbqd.edit-this-page.www.etp-revert.get_item_id {  select item_id
    from cr_items
   where parent_id = etp.get_folder_id(:package_id)
     and name = :name
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/edit-this-page/www/etp-revert-oracle.xql}
dbqd.edit-this-page.www.etp-revert.get_revision_count {dbqd.edit-this-page.www.etp-revert.get_revision_count {    select count(1) as revision_count
    from cr_revisions r, cr_items i
    where r.item_id = i.item_id
    and i.parent_id = etp.get_folder_id(:package_id)
    and i.name = :name
    and r.revision_id > :revision_id
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/edit-this-page/www/etp-revert-oracle.xql}
dbqd.edit-this-page.www.etp-revert.set_live_revision {dbqd.edit-this-page.www.etp-revert.set_live_revision {  update cr_items
     set live_revision = :revision_id, latest_revision = :revision_id
   where item_id = :item_id
} {} {} {} F:/temp/openacs-4/packages/edit-this-page/www/etp-revert.xql}
dbqd.edit-this-page.www.etp-revert.revisions_to_delete {dbqd.edit-this-page.www.etp-revert.revisions_to_delete {  select revision_id
    from cr_revisions
   where item_id = :item_id
     and revision_id > :revision_id
   order by revision_id
} {} {} {} F:/temp/openacs-4/packages/edit-this-page/www/etp-revert.xql}
dbqd.edit-this-page.www.etp-setup-2.create_folder {dbqd.edit-this-page.www.etp-setup-2.create_folder {   begin
     :1 := content_folder.new(
              name        => :name,
              label       => :title,
              description => '',
              parent_id   => etp.get_folder_id(:parent_package_id)
           );
   end;
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/edit-this-page/www/etp-setup-2-oracle.xql}
dbqd.edit-this-page.www.etp-setup-2.get_section_name {dbqd.edit-this-page.www.etp-setup-2.get_section_name {   select acs_object.name(:package_id) as title from dual
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/edit-this-page/www/etp-setup-2-oracle.xql}
dbqd.edit-this-page.www.etp-setup-2.site_node_name {dbqd.edit-this-page.www.etp-setup-2.site_node_name {	select name
          from site_nodes
         where node_id = :node_id

} {} {} {} F:/temp/openacs-4/packages/edit-this-page/www/etp-setup-2.xql}
dbqd.edit-this-page.www.etp-setup-2.set_folder_package {dbqd.edit-this-page.www.etp-setup-2.set_folder_package {	update cr_folders
           set package_id = :package_id
         where folder_id = :folder_id

} {} {} {} F:/temp/openacs-4/packages/edit-this-page/www/etp-setup-2.xql}
dbqd.edit-this-page.www.etp-setup.get_section_name {dbqd.edit-this-page.www.etp-setup.get_section_name {select acs_object.name(:package_id) as title from dual
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/edit-this-page/www/etp-setup-oracle.xql}
dbqd.edit-this-page.www.etp-setup.set_app_param {dbqd.edit-this-page.www.etp-setup.set_app_param {	update apm_parameter_values
           set attr_value = :app
         where package_id = :package_id
           and parameter_id = (select parameter_id
                                 from apm_parameters
                                where package_key=(select package_key 
                                                     from apm_packages
                                                    where package_id = :package_id)
                                  and parameter_name = 'application')

} {} {} {} F:/temp/openacs-4/packages/edit-this-page/www/etp-setup.xql}
dbqd.edit-this-page.www.etp-setup.set_subtopic_app_param {dbqd.edit-this-page.www.etp-setup.set_subtopic_app_param {	update apm_parameter_values
           set attr_value = :subtopic_app
         where package_id = :package_id
           and parameter_id = (select parameter_id
                                 from apm_parameters p
                                where package_key=(select package_key 
                                                     from apm_packages
                                                    where package_id = :package_id)
                                  and parameter_name = 'subtopic_application')

} {} {} {} F:/temp/openacs-4/packages/edit-this-page/www/etp-setup.xql}
dbqd.edit-this-page.www.etp-subtopic-create.old_package_parameters {dbqd.edit-this-page.www.etp-subtopic-create.old_package_parameters {select attr_value, parameter_id
  from apm_parameter_values 
 where package_id = :curr_package_id

} {} {} {} F:/temp/openacs-4/packages/edit-this-page/www/etp-subtopic-create.xql}
dbqd.edit-this-page.www.etp-subtopic-create.copy_parameter {dbqd.edit-this-page.www.etp-subtopic-create.copy_parameter {update apm_parameter_values 
set attr_value = :attr_value
where package_id = :new_package_id
and parameter_id = :parameter_id

} {} {} {} F:/temp/openacs-4/packages/edit-this-page/www/etp-subtopic-create.xql}
dbqd.edit-this-page.www.etp-subtopic-create.get_subtopic_application {dbqd.edit-this-page.www.etp-subtopic-create.get_subtopic_application {select v.attr_value as subtopic_application
  from apm_parameter_values v, apm_parameters p
 where v.parameter_id = p.parameter_id
   and v.package_id = :curr_package_id
   and p.parameter_name = 'subtopic_application'

} {} {} {} F:/temp/openacs-4/packages/edit-this-page/www/etp-subtopic-create.xql}
dbqd.edit-this-page.www.etp-subtopic-create.get_application_parameter_id {dbqd.edit-this-page.www.etp-subtopic-create.get_application_parameter_id {select parameter_id
  from apm_parameters p
 where p.parameter_name = 'application'
   and package_key = 'edit-this-page'

} {} {} {} F:/temp/openacs-4/packages/edit-this-page/www/etp-subtopic-create.xql}
dbqd.edit-this-page.www.etp-subtopic-create.set_subtopic_application {dbqd.edit-this-page.www.etp-subtopic-create.set_subtopic_application {update apm_parameter_values 
set attr_value = :subtopic_application
where package_id = :new_package_id
and parameter_id = :parameter_id

} {} {} {} F:/temp/openacs-4/packages/edit-this-page/www/etp-subtopic-create.xql}
dbqd.edit-this-page.www.etp-swap.get_prev_key {dbqd.edit-this-page.www.etp-swap.get_prev_key {  select tree_sortkey, item_id
    from cr_items
   where parent_id = etp.get_folder_id(:package_id)
     and tree_sortkey < :sort_key
   order by tree_sortkey desc
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/edit-this-page/www/etp-swap-oracle.xql}
dbqd.edit-this-page.www.etp-swap.get_all_keys {dbqd.edit-this-page.www.etp-swap.get_all_keys {  select tree_sortkey, item_id
    from cr_items
   where tree_sortkey >= :prev_sort_key
   order by tree_sortkey
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/edit-this-page/www/etp-swap-oracle.xql}
dbqd.edit-this-page.www.etp-swap.update_key {dbqd.edit-this-page.www.etp-swap.update_key {  update cr_items
     set tree_sortkey = :new_sortkey
   where item_id = :item_id
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/edit-this-page/www/etp-swap-oracle.xql}
dbqd.edit-this-page.www.etp-symlink.create_symlink {dbqd.edit-this-page.www.etp-symlink.create_symlink {   begin
     :1 := etp.create_symlink(:package_id, :target_id);
   end;
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/edit-this-page/www/etp-symlink-oracle.xql}
dbqd.edit-this-page.www.etp-symlink.all_pages {dbqd.edit-this-page.www.etp-symlink.all_pages {	select i.item_id, i.name, etp.get_title(i.item_id, null) as title,
           replace(lpad(' ', (level - 1) * 4), ' ', '&nbsp;') as indent
        from cr_items i, acs_objects o
        where i.item_id = o.object_id
           and o.object_type in ('content_item', 'content_folder')
           and i.name != 'index'
           and i.item_id not in (select item_id 
                                 from cr_items
                                 start with parent_id = i.item_id
                                 connect by parent_id = prior item_id)
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/edit-this-page/www/etp-symlink-oracle.xql}
dbqd.edit-this-page.www.etp-trash.site_node_children {dbqd.edit-this-page.www.etp-trash.site_node_children {  select count(1)
    from site_nodes
   where parent_id = :node_id
} {} {} {} F:/temp/openacs-4/packages/edit-this-page/www/etp-trash.xql}
dbqd.edit-this-page.www.etp-trash.get_node_id {dbqd.edit-this-page.www.etp-trash.get_node_id {  select node_id
    from site_nodes sn, cr_folders f
   where f.folder_id = :item_id
     and sn.object_id = f.package_id
} {} {} {} F:/temp/openacs-4/packages/edit-this-page/www/etp-trash.xql}
dbqd.edit-this-page.www.etp-trash.matching_name {dbqd.edit-this-page.www.etp-trash.matching_name {  select count(1)
    from cr_items
   where parent_id = -400
     and name = (select name from cr_items where item_id = :item_id)
} {} {} {} F:/temp/openacs-4/packages/edit-this-page/www/etp-trash.xql}
dbqd.edit-this-page.www.etp-trash.update_name {dbqd.edit-this-page.www.etp-trash.update_name {  update cr_items 
     set name = 'Copy of ' || name
   where item_id = :item_id
} {} {} {} F:/temp/openacs-4/packages/edit-this-page/www/etp-trash.xql}
dbqd.edit-this-page.www.etp-trash.trash_item {dbqd.edit-this-page.www.etp-trash.trash_item {  update cr_items
     set parent_id = -400
   where item_id = :item_id
} {} {} {} F:/temp/openacs-4/packages/edit-this-page/www/etp-trash.xql}
dbqd.email-handler.tcl.email-handler-procs.email_handler_process_email_queue.email_handler_get_ids {dbqd.email-handler.tcl.email-handler-procs.email_handler_process_email_queue.email_handler_get_ids {      select id from incoming_email_queue
      } {} {} {} F:/temp/openacs-4/packages/email-handler/tcl/email-handler-procs.xql}
dbqd.email-handler.tcl.email-handler-procs.email_handler_process_email_queue.get_message_info {dbqd.email-handler.tcl.email-handler-procs.email_handler_process_email_queue.get_message_info {              select tag, content  from incoming_email_queue
		where id = :id
	    
      } {} {} {} F:/temp/openacs-4/packages/email-handler/tcl/email-handler-procs.xql}
dbqd.email-handler.tcl.email-handler-procs.email_handler_process_email_queue.delete_from_queue {dbqd.email-handler.tcl.email-handler-procs.email_handler_process_email_queue.delete_from_queue {      delete from incoming_email_queue where id = :id
      } {} {} {} F:/temp/openacs-4/packages/email-handler/tcl/email-handler-procs.xql}
dbqd.email-handler.tcl.email-handler-procs.email_handler_process_email_queue.delete_from_queue {dbqd.email-handler.tcl.email-handler-procs.email_handler_process_email_queue.delete_from_queue {      delete from incoming_email_queue where id = :id
      } {} {} {} F:/temp/openacs-4/packages/email-handler/tcl/email-handler-procs.xql}
dbqd.email-handler.tcl.email-handler-procs.email_handler_package_id_mem.email_handler_id_get {dbqd.email-handler.tcl.email-handler-procs.email_handler_package_id_mem.email_handler_id_get {	select package_id from apm_packages
	where package_key = 'email-handler'
    
      } {} {} {} F:/temp/openacs-4/packages/email-handler/tcl/email-handler-procs.xql}
dbqd.email-handler.www.index.test_items {dbqd.email-handler.www.index.test_items {    select from_header, subject, body from email_handler_test

      } {} {} {} F:/temp/openacs-4/packages/email-handler/www/index.xql}
dbqd.file-storage.tcl.file-storage-procs.fs::new_root_folder.new_root_folder {dbqd.file-storage.tcl.file-storage-procs.fs::new_root_folder.new_root_folder {            begin
                :1 := file_storage.new_root_folder(
                    package_id => :package_id,
                    folder_name => :pretty_name,
                    description => :description
                );
            end;
        } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/file-storage/tcl/file-storage-procs-oracle.xql}
dbqd.file-storage.tcl.file-storage-procs.fs::get_root_folder.get_root_folder {dbqd.file-storage.tcl.file-storage-procs.fs::get_root_folder.get_root_folder {            begin
                :1 := file_storage.get_root_folder(
                    package_id => :package_id
                );
            end;
        } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/file-storage/tcl/file-storage-procs-oracle.xql}
dbqd.file-storage.tcl.file-storage-procs.fs::new_folder.new_folder {dbqd.file-storage.tcl.file-storage-procs.fs::new_folder.new_folder {            begin
                :1 := file_storage.new_folder(
                    name => :name,
                    folder_name => :pretty_name,
                    parent_id => :parent_id,
                    creation_user => :creation_user,
                    creation_ip => :creation_ip
                );
            end;
        } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/file-storage/tcl/file-storage-procs-oracle.xql}
dbqd.file-storage.tcl.file-storage-procs.fs::get_folder_contents.get_folder_contents {dbqd.file-storage.tcl.file-storage-procs.fs::get_folder_contents.get_folder_contents {            select fs_folders_and_files.file_id,
                   fs_folders_and_files.name,
                   fs_folders_and_files.live_revision,
                   fs_folders_and_files.type,
                   to_char(fs_folders_and_files.last_modified, 'YYYY-MM-DD HH24:MI') as last_modified,
                   fs_folders_and_files.content_size
            from fs_folders_and_files
            where fs_folders_and_files.parent_id = :folder_id
            and 't' = acs_permission.permission_p(fs_folders_and_files.file_id, :user_id, 'read')
            order by fs_folders_and_files.sort_key,
                     fs_folders_and_files.name
        } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/file-storage/tcl/file-storage-procs-oracle.xql}
dbqd.file-storage.tcl.file-storage-procs.fs_get_folder_name.folder_name {dbqd.file-storage.tcl.file-storage-procs.fs_get_folder_name.folder_name {    	begin
        	:1 := file_storage.get_folder_name(:folder_id);
    	end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/file-storage/tcl/file-storage-procs-oracle.xql}
dbqd.file-storage.tcl.file-storage-procs.children_have_permission_p.child_perms {dbqd.file-storage.tcl.file-storage-procs.children_have_permission_p.child_perms {    	select count(*)
    	from   cr_items
    	where  item_id in (select item_id
                       	   from   cr_items
                       	   connect by prior item_id = parent_id
                           start with item_id = :item_id)
    	and    acs_permission.permission_p(item_id,:user_id,:privilege) = 'f'

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/file-storage/tcl/file-storage-procs-oracle.xql}
dbqd.file-storage.tcl.file-storage-procs.children_have_permission_p.child_items {dbqd.file-storage.tcl.file-storage-procs.children_have_permission_p.child_items {	select item_id as child_item_id
	from   cr_items
	connect by prior item_id = parent_id
	start with item_id = :item_id
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/file-storage/tcl/file-storage-procs-oracle.xql}
dbqd.file-storage.tcl.file-storage-procs.children_have_permission_p.revision_perms {dbqd.file-storage.tcl.file-storage-procs.children_have_permission_p.revision_perms {	select count(*)
	from   cr_revisions
	where  item_id = :child_item_id
	and    acs_permission.permission_p(revision_id,:user_id,:privilege) = 'f'

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/file-storage/tcl/file-storage-procs-oracle.xql}
dbqd.file-storage.tcl.file-storage-procs.fs_context_bar_list.title {dbqd.file-storage.tcl.file-storage-procs.fs_context_bar_list.title {      	begin
	    :1 := file_storage.get_title(:item_id);
	end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/file-storage/tcl/file-storage-procs-oracle.xql}
dbqd.file-storage.tcl.file-storage-procs.fs_context_bar_list.context_bar {dbqd.file-storage.tcl.file-storage-procs.fs_context_bar_list.context_bar {    	select case when file_storage.get_content_type(i.item_id) = 'content_folder' 
	            then 'index?folder_id=' 
	            else 'file?file_id=' 
	       end || i.item_id,
               file_storage.get_title(i.item_id)
    	from   cr_items i
    	where  item_id not in (
        		       	select i2.item_id
        			from   cr_items i2
        			connect by prior i2.parent_id = i2.item_id
        			start with i2.item_id = 
				    file_storage.get_root_folder([ad_conn package_id]))
    	connect by prior i.parent_id = i.item_id
    	start with item_id = :start_id
    	order by level desc

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/file-storage/tcl/file-storage-procs-oracle.xql}
dbqd.file-storage.tcl.file-storage-procs.fs_folder_p.object_type {dbqd.file-storage.tcl.file-storage-procs.fs_folder_p.object_type {       	select object_type 
       	from   acs_objects
       	where  object_id = :folder_id

      } {} {} {} F:/temp/openacs-4/packages/file-storage/tcl/file-storage-procs.xql}
dbqd.file-storage.tcl.file-storage-procs.fs_context_bar_list.parent_id {dbqd.file-storage.tcl.file-storage-procs.fs_context_bar_list.parent_id {	select parent_id from cr_items where item_id = :item_id

      } {} {} {} F:/temp/openacs-4/packages/file-storage/tcl/file-storage-procs.xql}
dbqd.file-storage.tcl.file-storage-procs.fs_maybe_create_new_mime_type.mime_type_exists {dbqd.file-storage.tcl.file-storage-procs.fs_maybe_create_new_mime_type.mime_type_exists {	select count(*) from cr_mime_types
    	where  mime_type = :mime_type

      } {} {} {} F:/temp/openacs-4/packages/file-storage/tcl/file-storage-procs.xql}
dbqd.file-storage.tcl.file-storage-procs.fs_maybe_create_new_mime_type.new_mime_type {dbqd.file-storage.tcl.file-storage-procs.fs_maybe_create_new_mime_type.new_mime_type {	insert into cr_mime_types
	(mime_type, file_extension)
	values
	(:mime_type, :extension)

      } {} {} {} F:/temp/openacs-4/packages/file-storage/tcl/file-storage-procs.xql}
dbqd.file-storage.tcl.file-storage-procs.fs::get_folder.get_folder {dbqd.file-storage.tcl.file-storage-procs.fs::get_folder.get_folder {            select item_id
            from cr_items
            where parent_id = :parent_id
            and name = :name
        } {} {} {} F:/temp/openacs-4/packages/file-storage/tcl/file-storage-procs.xql}
dbqd.file-storage.tcl.file-storage-procs.fs::get_folder_contents_count.get_folder_contents_count {dbqd.file-storage.tcl.file-storage-procs.fs::get_folder_contents_count.get_folder_contents_count {            select count(*)
            from cr_items
            where cr_items.parent_id = :folder_id
        } {} {} {} F:/temp/openacs-4/packages/file-storage/tcl/file-storage-procs.xql}
dbqd.file-storage.www.file-add-2.new_lob_file {dbqd.file-storage.www.file-add-2.new_lob_file {	begin
    		:1 := file_storage.new_file (
        		title => :title,
        		folder_id => :folder_id,
        		creation_user => :user_id,
        		creation_ip => :creation_ip,
		        indb_p => 't'
   			);
	end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/file-storage/www/file-add-2-oracle.xql}
dbqd.file-storage.www.file-add-2.new_fs_file {dbqd.file-storage.www.file-add-2.new_fs_file {	begin
    		:1 := file_storage.new_file (
        		title => :title,
        		folder_id => :folder_id,
        		creation_user => :user_id,
        		creation_ip => :creation_ip,
		        indb_p => 'f'
   			);

	end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/file-storage/www/file-add-2-oracle.xql}
dbqd.file-storage.www.file-add-2.new_version {dbqd.file-storage.www.file-add-2.new_version {	begin
    		:1 := file_storage.new_version (
        		filename => :filename,
        		description => :description,
        		mime_type => :mime_type,
        		item_id => :file_id,
        		creation_user => :user_id,
        		creation_ip => :creation_ip
    			);

	end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/file-storage/www/file-add-2-oracle.xql}
dbqd.file-storage.www.file-add-2.lob_content {dbqd.file-storage.www.file-add-2.lob_content {	update cr_revisions
	set    content = empty_blob()
	where  revision_id = :version_id
	returning content into :1

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/file-storage/www/file-add-2-oracle.xql}
dbqd.file-storage.www.file-add-2.lob_size {dbqd.file-storage.www.file-add-2.lob_size {	update cr_revisions
 	set content_length = dbms_lob.getlength(content) 
	where revision_id = :version_id

     } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/file-storage/www/file-add-2-oracle.xql}
dbqd.file-storage.www.file-add-2.fs_content_size {dbqd.file-storage.www.file-add-2.fs_content_size {	update cr_revisions
 	set filename = '$tmp_filename',
	    content_length = $tmp_size
	where revision_id = :version_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/file-storage/www/file-add-2-oracle.xql}
dbqd.file-storage.www.file-add-2.duplicate_check {dbqd.file-storage.www.file-add-2.duplicate_check {    	select count(*)
   	from   cr_items
	where  name = :filename
    	and    parent_id = :folder_id

      } {} {} {} F:/temp/openacs-4/packages/file-storage/www/file-add-2.xql}
dbqd.file-storage.www.file-copy-2.file_copy {dbqd.file-storage.www.file-copy-2.file_copy {   	 begin
          :1 :=	file_storage.copy_file(
            		file_id => :file_id,
            		target_folder_id => :parent_id,
            		creation_user => :user_id,
            		creation_ip => :ip_address
            		);
    	 end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/file-storage/www/file-copy-2-oracle.xql}
dbqd.file-storage.www.file-copy-2.item_info {dbqd.file-storage.www.file-copy-2.item_info {    	select name, content_type from cr_items where item_id = :file_id

      } {} {} {} F:/temp/openacs-4/packages/file-storage/www/file-copy-2.xql}
dbqd.file-storage.www.file-copy.file_name {dbqd.file-storage.www.file-copy.file_name {	select name as title
	from   cr_items
	where  item_id = :file_id

      } {} {} {} F:/temp/openacs-4/packages/file-storage/www/file-copy.xql}
dbqd.file-storage.www.file-delete.blockers {dbqd.file-storage.www.file-delete.blockers {	select count(*) 
	from   cr_revisions
	where  item_id = :file_id
	and    acs_permission.permission_p(revision_id,:user_id,'delete') = 'f'

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/file-storage/www/file-delete-oracle.xql}
dbqd.file-storage.www.file-delete.delete_file {dbqd.file-storage.www.file-delete.delete_file {	begin
        	file_storage.delete_file(:file_id);
	end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/file-storage/www/file-delete-oracle.xql}
dbqd.file-storage.www.file-delete.parent_id {dbqd.file-storage.www.file-delete.parent_id {	select parent_id from cr_items where item_id = :file_id

      } {} {} {} F:/temp/openacs-4/packages/file-storage/www/file-delete.xql}
dbqd.file-storage.www.file-delete.file_name {dbqd.file-storage.www.file-delete.file_name {    	select name as title
    	from   cr_items
    	where  item_id = :file_id

      } {} {} {} F:/temp/openacs-4/packages/file-storage/www/file-delete.xql}
dbqd.file-storage.www.file-edit-2.rename_file {dbqd.file-storage.www.file-edit-2.rename_file {	begin
    		file_storage.rename_file (
        		file_id => :file_id,
        		title => :title
    			);
	end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/file-storage/www/file-edit-2-oracle.xql}
dbqd.file-storage.www.file-edit-2.duplicate_check {dbqd.file-storage.www.file-edit-2.duplicate_check {    	select count(*)
    	from   cr_items
    	where  name = :title
    	and    parent_id = content_item.get_parent_folder(:file_id)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/file-storage/www/file-edit-2-oracle.xql}
dbqd.file-storage.www.file-edit.file_info {dbqd.file-storage.www.file-edit.file_info {	select name as title
	from   cr_items
	where  item_id = :file_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/file-storage/www/file-edit-oracle.xql}
dbqd.file-storage.www.file-move-2.file_move {dbqd.file-storage.www.file-move-2.file_move {	begin
    		file_storage.move_file (
    			file_id => :file_id,
    			target_folder_id => :parent_id
    			);
	end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/file-storage/www/file-move-2-oracle.xql}
dbqd.file-storage.www.file-move-2.context_update {dbqd.file-storage.www.file-move-2.context_update {	update acs_objects
	set    context_id = :parent_id
	where  object_id = :file_id

      } {} {} {} F:/temp/openacs-4/packages/file-storage/www/file-move-2.xql}
dbqd.file-storage.www.file-move-2.filename {dbqd.file-storage.www.file-move-2.filename {    	select name from cr_items where item_id = :file_id

      } {} {} {} F:/temp/openacs-4/packages/file-storage/www/file-move-2.xql}
dbqd.file-storage.www.file-move-2.duplicate_check {dbqd.file-storage.www.file-move-2.duplicate_check {    	select count(*)
    	from   cr_items
    	where  name = :filename
    	and    parent_id = :parent_id

      } {} {} {} F:/temp/openacs-4/packages/file-storage/www/file-move-2.xql}
dbqd.file-storage.www.file-move.file_name {dbqd.file-storage.www.file-move.file_name {	begin
    		:1 := file_storage.get_title(:file_id);
	end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/file-storage/www/file-move-oracle.xql}
dbqd.file-storage.www.file.file_info {dbqd.file-storage.www.file.file_info {	select person.name(o.creation_user) as owner,
       		i.name as title,
       		r.title as name,
       		acs_permission.permission_p(:file_id,:user_id,'write') as write_p,
       		acs_permission.permission_p(:file_id,:user_id,'delete') as delete_p,
       		acs_permission.permission_p(:file_id,:user_id,'admin') as admin_p
	from   acs_objects o, cr_revisions r, cr_items i
	where  o.object_id = :file_id
	and    i.item_id   = o.object_id
	and    r.revision_id = i.live_revision
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/file-storage/www/file-oracle.xql}
dbqd.file-storage.www.file.version_info {dbqd.file-storage.www.file.version_info {	select  r.title,
       		r.revision_id as version_id,
       		person.name(o.creation_user) as author,
       		r.mime_type as type,
       		to_char(o.last_modified,'YYYY-MM-DD HH24:MI') as last_modified,
       		r.description,
       		acs_permission.permission_p(r.revision_id,:user_id,'admin') as admin_p,
       		acs_permission.permission_p(r.revision_id,:user_id,'delete') as delete_p,
       		r.content_length as content_size
	from   acs_objects o, cr_revisions r, cr_items i
	where  o.object_id = r.revision_id
	and    acs_permission.permission_p(r.revision_id, :user_id, 'read') = 't'
	and    r.item_id = i.item_id
	and    r.item_id = :file_id
	$show_versions

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/file-storage/www/file-oracle.xql}
dbqd.file-storage.www.file.show_all_versions {dbqd.file-storage.www.file.show_all_versions {} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/file-storage/www/file-oracle.xql}
dbqd.file-storage.www.file.show_live_version {dbqd.file-storage.www.file.show_live_version {	and r.revision_id = i.live_revision

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/file-storage/www/file-oracle.xql}
dbqd.file-storage.www.folder-create-2.folder_create {dbqd.file-storage.www.folder-create-2.folder_create {begin
    :1 := file_storage.new_folder (
        name => :name,
        folder_name => :folder_name,
        parent_id => :parent_id,
        creation_user => :user_id,
        creation_ip => :creation_ip
    );
end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/file-storage/www/folder-create-2-oracle.xql}
dbqd.file-storage.www.folder-create-2.duplicate_check {dbqd.file-storage.www.folder-create-2.duplicate_check {    select count(*)
    from   cr_items
    where  name = :name
    and    parent_id = :parent_id
      } {} {} {} F:/temp/openacs-4/packages/file-storage/www/folder-create-2.xql}
dbqd.file-storage.www.folder-delete.folder_delete {dbqd.file-storage.www.folder-delete.folder_delete {    begin
        file_storage.delete_folder(:folder_id);
    end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/file-storage/www/folder-delete-oracle.xql}
dbqd.file-storage.www.folder-delete.child_count {dbqd.file-storage.www.folder-delete.child_count {	select count(*) from cr_items where parent_id = :folder_id
      } {} {} {} F:/temp/openacs-4/packages/file-storage/www/folder-delete.xql}
dbqd.file-storage.www.folder-delete.parent_id {dbqd.file-storage.www.folder-delete.parent_id {    select parent_id from cr_items where item_id = :folder_id
      } {} {} {} F:/temp/openacs-4/packages/file-storage/www/folder-delete.xql}
dbqd.file-storage.www.folder-delete.folder_name {dbqd.file-storage.www.folder-delete.folder_name {    select label from cr_folders where folder_id = :folder_id
      } {} {} {} F:/temp/openacs-4/packages/file-storage/www/folder-delete.xql}
dbqd.file-storage.www.folder-list.folder {dbqd.file-storage.www.folder-list.folder {	select lpad('&nbsp;&nbsp;',12 * level,'&nbsp;&nbsp;') as spaces,
     		(select f.label from cr_folders f where f.folder_id = i.item_id) as label,
     		(select f.folder_id from cr_folders f where f.folder_id = i.item_id) as new_parent
	from   cr_items i
	where  acs_permission.permission_p(i.item_id,:user_id,'write') = 't'
	and    exists (select 1 from cr_folders f where f.folder_id = i.item_id)
	$children_clause
	connect by prior item_id = parent_id
	start with item_id = file_storage.get_root_folder([ad_conn package_id])

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/file-storage/www/folder-list-oracle.xql}
dbqd.file-storage.www.folder-list.children_clause {dbqd.file-storage.www.folder-list.children_clause {    	and item_id not in (select item_id
    	from cr_items
    	where item_id != :file_id
    	connect by prior item_id = parent_id
    	start with item_id = :file_id)


      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/file-storage/www/folder-list-oracle.xql}
dbqd.file-storage.www.search.results {dbqd.file-storage.www.search.results {    	select item_id as file_id,
           	content_item.get_title(item_id) as title
    	from   cr_items
    	where  lower(content_item.get_title(item_id)) like :query
    	and    acs_permission.permission_p(item_id,:user_id,'read') = 't'

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/file-storage/www/search-oracle.xql}
dbqd.file-storage.www.version-add-2.new_version {dbqd.file-storage.www.version-add-2.new_version {	begin
    	:1 := file_storage.new_version(
        	filename => :filename,
        	description => :description,
        	mime_type => :mime_type,
        	item_id => :file_id,
        	creation_user => :user_id,
        	creation_ip => :creation_ip
   		);
	end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/file-storage/www/version-add-2-oracle.xql}
dbqd.file-storage.www.version-add-2.lob_content {dbqd.file-storage.www.version-add-2.lob_content {	update cr_revisions
	set    content = empty_blob()
	where  revision_id = :version_id
	returning content into :1

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/file-storage/www/version-add-2-oracle.xql}
dbqd.file-storage.www.version-add-2.lob_size {dbqd.file-storage.www.version-add-2.lob_size {	update cr_revisions
 	set content_length = dbms_lob.getlength(content) 
	where revision_id = :version_id

     } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/file-storage/www/version-add-2-oracle.xql}
dbqd.file-storage.www.version-add-2.fs_content_size {dbqd.file-storage.www.version-add-2.fs_content_size {	update cr_revisions
 	set filename = '$tmp_filename',
	    content_length = $tmp_size
	where revision_id = :version_id

     } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/file-storage/www/version-add-2-oracle.xql}
dbqd.file-storage.www.version-add.file_name {dbqd.file-storage.www.version-add.file_name {	select name as title
        from   cr_items
        where  item_id = :file_id

      } {} {} {} F:/temp/openacs-4/packages/file-storage/www/version-add.xql}
dbqd.file-storage.www.version-delete.delete_version {dbqd.file-storage.www.version-delete.delete_version {	begin
	   :1 := file_storage.delete_version(
			:item_id,
			:version_id
			);
	end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/file-storage/www/version-delete-oracle.xql}
dbqd.file-storage.www.version-delete.delete_file {dbqd.file-storage.www.version-delete.delete_file {	begin
		file_storage.delete_file(
			:item_id
			);
	end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/file-storage/www/version-delete-oracle.xql}
dbqd.file-storage.www.version-delete.item_select {dbqd.file-storage.www.version-delete.item_select {	select item_id
	from   cr_revisions
	where  revision_id = :version_id

      } {} {} {} F:/temp/openacs-4/packages/file-storage/www/version-delete.xql}
dbqd.file-storage.www.version-delete.version_name {dbqd.file-storage.www.version-delete.version_name {    	select i.name as title, r.title as version_name 
	from cr_items i, cr_revisions r
	where i.item_id = r.item_id
	and r.revision_id = :version_id

      } {} {} {} F:/temp/openacs-4/packages/file-storage/www/version-delete.xql}
dbqd.general-comments.tcl.general-comments-procs.general_comments_get_comments.get_comments {dbqd.general-comments.tcl.general-comments-procs.general_comments_get_comments.get_comments {             select g.comment_id,
                    r.title,
                    r.mime_type,
                    o.creation_user,
                    acs_object.name(o.creation_user) as author,
                    to_char(o.creation_date, 'MM-DD-YYYY') as pretty_date,
                    to_char(o.creation_date, 'Month DD, YYYY HH12:MI PM') as pretty_date2
                    $content_select
               from general_comments g,
                    cr_revisions r,
                    acs_objects o
              where g.object_id = :object_id and
                    r.revision_id = content_item.get_live_revision(g.comment_id) and
                    o.object_id = g.comment_id
              order by o.creation_date
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/general-comments/tcl/general-comments-procs-oracle.xql}
dbqd.general-comments.tcl.general-comments-procs.general_comments_package_url.get_package_url {dbqd.general-comments.tcl.general-comments-procs.general_comments_package_url.get_package_url {             select site_node.url(s.node_id) as package_url
               from site_nodes s, apm_packages a
              where s.object_id = a.package_id and
                    lower(a.package_key) = 'general-comments' and
                    RowNum = 1
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/general-comments/tcl/general-comments-procs-oracle.xql}
dbqd.general-comments.tcl.general-comments-procs.get_comments.get_package_url_deprecated {dbqd.general-comments.tcl.general-comments-procs.get_comments.get_package_url_deprecated {             select site_node.url(s.node_id)
               from site_nodes s, apm_packages a
              where s.object_id = a.package_id and
                    a.package_key = 'general-comments'
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/general-comments/tcl/general-comments-procs-oracle.xql}
dbqd.general-comments.tcl.general-comments-procs.get_comments.get_comments_deprecated {dbqd.general-comments.tcl.general-comments-procs.get_comments.get_comments_deprecated {             select g.comment_id,
                    r.title,
                    r.content,
                    r.mime_type,
                    o.creation_user,
                    to_char(o.creation_date, 'MM-DD-YYYY') as creation_date,
                    p.first_names || ' ' || p.last_name as author
               from general_comments g,
                    cr_items i,
                    cr_revisions r,
                    acs_objects o,
                    persons p
              where g.object_id = :object_id and
                    i.item_id = g.comment_id and
                    r.revision_id = i.live_revision and
                    o.object_id = g.comment_id and
                    p.person_id = o.creation_user
              order by creation_date
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/general-comments/tcl/general-comments-procs-oracle.xql}
dbqd.general-comments.tcl.general-comments-procs.get_comments.get_package_url_deprecated {dbqd.general-comments.tcl.general-comments-procs.get_comments.get_package_url_deprecated {             select site_node.url(s.node_id)
               from site_nodes s, apm_packages a
              where s.object_id = a.package_id and
                    a.package_key = 'general-comments'
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/general-comments/tcl/general-comments-procs-oracle.xql}
dbqd.general-comments.tcl.general-comments-procs.general_comments_get_comments.content_select {dbqd.general-comments.tcl.general-comments-procs.general_comments_get_comments.content_select {		, r.content

       } {} {} {} F:/temp/openacs-4/packages/general-comments/tcl/general-comments-procs.xql}
dbqd.general-comments.tcl.general-comments-procs.general_comments_print_comment.get_attachments {dbqd.general-comments.tcl.general-comments-procs.general_comments_print_comment.get_attachments {	                    select r.title, r.mime_type,  i.name, i.item_id
	                      from cr_items i, cr_revisions r
	                     where i.parent_id = :comment_id 
                               and r.revision_id = i.live_revision
      } {} {} {} F:/temp/openacs-4/packages/general-comments/tcl/general-comments-procs.xql}
dbqd.general-comments.tcl.general-comments-procs.general_comments_print_comment.get_links {dbqd.general-comments.tcl.general-comments-procs.general_comments_print_comment.get_links {	              select i.item_id, e.label, e.url
	                from cr_items i, cr_extlinks e
	               where i.parent_id = :comment_id and e.extlink_id = i.item_id
      } {} {} {} F:/temp/openacs-4/packages/general-comments/tcl/general-comments-procs.xql}
dbqd.general-comments.www.admin.delete-2.delete_comment {dbqd.general-comments.www.admin.delete-2.delete_comment {    begin
        acs_message.delete(:comment_id);
    end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/general-comments/www/admin/delete-2-oracle.xql}
dbqd.general-comments.www.admin.delete-2.delete_image_attachments {dbqd.general-comments.www.admin.delete-2.delete_image_attachments {    delete from images
    where image_id in (select latest_revision
                         from cr_items
                        where parent_id = :comment_id)

      } {} {} {} F:/temp/openacs-4/packages/general-comments/www/admin/delete-2.xql}
dbqd.general-comments.www.admin.delete.get_comment {dbqd.general-comments.www.admin.delete.get_comment {    select r.title,
           r.content,
           r.mime_type,
           o.creation_user,
           to_char(o.creation_date, 'MM-DD-YYYY') as pretty_date,
           acs_object.name(o.creation_user) as author
      from acs_objects o, 
           cr_revisions r, 
	   general_comments g
     where g.comment_id = :comment_id and 	 
           g.comment_id = o.object_id and
	   r.revision_id = content_item.get_latest_revision(g.comment_id)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/general-comments/www/admin/delete-oracle.xql}
dbqd.general-comments.www.admin.index.comments_select {dbqd.general-comments.www.admin.index.comments_select {    select g.comment_id,
           r.title, 
           acs_object.name(o.creation_user) as author,
           o.creation_user, 
           case when i.live_revision = null then 0 else 1 end as live_version_p,
           case when i.live_revision = r.revision_id then 1 else 0 end as approved_p, 
           to_char(o.creation_date, 'MM-DD-YYYY HH12:MI:AM') as pretty_date
      from general_comments g,
           cr_items i,
           cr_revisions r,
           acs_objects o
     where g.comment_id = i.item_id and
           r.revision_id = o.object_id and
           r.revision_id = content_item.get_latest_revision(g.comment_id)
          [ad_dimensional_sql $dimensional]
    [ad_order_by_from_sort_spec $orderby $table_def]

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/general-comments/www/admin/index-oracle.xql}
dbqd.general-comments.www.admin.index.modified_last_24hours {dbqd.general-comments.www.admin.index.modified_last_24hours {		creation_date + 1 > sysdate

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/general-comments/www/admin/index-oracle.xql}
dbqd.general-comments.www.admin.index.modified_last_week {dbqd.general-comments.www.admin.index.modified_last_week {		creation_date + 7 > sysdate

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/general-comments/www/admin/index-oracle.xql}
dbqd.general-comments.www.admin.index.modified_last_month {dbqd.general-comments.www.admin.index.modified_last_month {		creation_date + 30 > sysdate

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/general-comments/www/admin/index-oracle.xql}
dbqd.general-comments.www.admin.index.status_approved {dbqd.general-comments.www.admin.index.status_approved {	      	i.live_revision is not null

      } {} {} {} F:/temp/openacs-4/packages/general-comments/www/admin/index.xql}
dbqd.general-comments.www.admin.index.status_unapproved {dbqd.general-comments.www.admin.index.status_unapproved {	      	i.live_revision is null

      } {} {} {} F:/temp/openacs-4/packages/general-comments/www/admin/index.xql}
dbqd.general-comments.www.admin.index.modified_show_all {dbqd.general-comments.www.admin.index.modified_show_all {		1 = 1

      } {} {} {} F:/temp/openacs-4/packages/general-comments/www/admin/index.xql}
dbqd.general-comments.www.admin.toggle-approval.get_live_revision {dbqd.general-comments.www.admin.toggle-approval.get_live_revision {      select content_item.get_live_revision(:comment_id) from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/general-comments/www/admin/toggle-approval-oracle.xql}
dbqd.general-comments.www.admin.toggle-approval.get_latest_revision {dbqd.general-comments.www.admin.toggle-approval.get_latest_revision {      select content_item.get_latest_revision(:comment_id) from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/general-comments/www/admin/toggle-approval-oracle.xql}
dbqd.general-comments.www.admin.toggle-approval.set_live_revisions {dbqd.general-comments.www.admin.toggle-approval.set_live_revisions {	begin
	  content_item.set_live_revision(:revision_id);
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/general-comments/www/admin/toggle-approval-oracle.xql}
dbqd.general-comments.www.admin.toggle-approval.unset_live_revisions {dbqd.general-comments.www.admin.toggle-approval.unset_live_revisions {	begin
	  content_item.unset_live_revision(:comment_id);
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/general-comments/www/admin/toggle-approval-oracle.xql}
dbqd.general-comments.www.comment-add-3.insert_comment {dbqd.general-comments.www.comment-add-3.insert_comment {        begin
            :1 := acs_message.new (
                message_id    => :comment_id,
                title         => :title,
                mime_type     => :comment_mime_type,
                data          => empty_blob(),
                context_id    => :context_id,
                creation_user => :user_id, 
                creation_ip   => :creation_ip,
                is_live       => :is_live
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/general-comments/www/comment-add-3-oracle.xql}
dbqd.general-comments.www.comment-add-3.get_revision {dbqd.general-comments.www.comment-add-3.get_revision {        select content_item.get_latest_revision(:comment_id) as revision_id
        from dual
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/general-comments/www/comment-add-3-oracle.xql}
dbqd.general-comments.www.comment-add-3.set_content {dbqd.general-comments.www.comment-add-3.set_content {        update cr_revisions
           set content = empty_blob()
         where revision_id = :revision_id
     returning content into :1
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/general-comments/www/comment-add-3-oracle.xql}
dbqd.general-comments.www.comment-add-3.grant_permission {dbqd.general-comments.www.comment-add-3.grant_permission {        begin
            acs_permission.grant_permission (
                object_id  => :comment_id,
                grantee_id => :user_id,
                privilege  => 'read'
            );
            acs_permission.grant_permission (
                object_id  => :comment_id,
                grantee_id => :user_id,
                privilege  => 'write'
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/general-comments/www/comment-add-3-oracle.xql}
dbqd.general-comments.www.comment-add-3.add_entry {dbqd.general-comments.www.comment-add-3.add_entry {        insert into general_comments
            (comment_id,
             object_id,
             category)
        values
            (:comment_id,
             :object_id,
             :category)
    
      } {} {} {} F:/temp/openacs-4/packages/general-comments/www/comment-add-3.xql}
dbqd.general-comments.www.comment-edit-3.insert_comment {dbqd.general-comments.www.comment-edit-3.insert_comment {    begin
        :1 := acs_message.edit (
            message_id    => :comment_id,
            title         => :title,
            mime_type     => :comment_mime_type,
            data          => empty_blob(),
            creation_user => :user_id,
            creation_ip   => :creation_ip,
            is_live       => :is_live
        );
    end;
  
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/general-comments/www/comment-edit-3-oracle.xql}
dbqd.general-comments.www.comment-edit-3.get_revision {dbqd.general-comments.www.comment-edit-3.get_revision {    select content_item.get_latest_revision(:comment_id) as revision_id
    from dual
  
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/general-comments/www/comment-edit-3-oracle.xql}
dbqd.general-comments.www.comment-edit-3.set_content {dbqd.general-comments.www.comment-edit-3.set_content {    update cr_revisions
    set content = empty_blob()
    where revision_id = :revision_id
    returning content into :1
  
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/general-comments/www/comment-edit-3-oracle.xql}
dbqd.general-comments.www.comment-edit.get_latest_revision {dbqd.general-comments.www.comment-edit.get_latest_revision {      select content_item.get_latest_revision(:comment_id) from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/general-comments/www/comment-edit-oracle.xql}
dbqd.general-comments.www.comment-edit.get_comment {dbqd.general-comments.www.comment-edit.get_comment {    select g.object_id,
           r.title,
           r.content,
           r.mime_type as comment_mime_type
      from general_comments g,
           cr_revisions r
     where g.comment_id = :comment_id and
           r.revision_id = :revision_id

      } {} {} {} F:/temp/openacs-4/packages/general-comments/www/comment-edit.xql}
dbqd.general-comments.www.delete-attachment-2.get_mime_type {dbqd.general-comments.www.delete-attachment-2.get_mime_type {            select mime_type
              from cr_revisions
             where item_id = :attach_id
               and revision_id = content_item.get_latest_revision (:attach_id)
        
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/general-comments/www/delete-attachment-2-oracle.xql}
dbqd.general-comments.www.delete-attachment-2.delete_image_row {dbqd.general-comments.www.delete-attachment-2.delete_image_row {                delete from images
                 where image_id = content_item.get_latest_revision(:attach_id)
            
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/general-comments/www/delete-attachment-2-oracle.xql}
dbqd.general-comments.www.delete-attachment-2.delete_image {dbqd.general-comments.www.delete-attachment-2.delete_image {                begin
                    acs_message.delete_image(:attach_id);
                end;
            
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/general-comments/www/delete-attachment-2-oracle.xql}
dbqd.general-comments.www.delete-attachment-2.delete_attachment {dbqd.general-comments.www.delete-attachment-2.delete_attachment {                begin
                   acs_message.delete_file(:attach_id);
                end;
            
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/general-comments/www/delete-attachment-2-oracle.xql}
dbqd.general-comments.www.delete-attachment-2.delete_extlink {dbqd.general-comments.www.delete-attachment-2.delete_extlink {            begin
                content_extlink.delete(:attach_id);
            end;
        
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/general-comments/www/delete-attachment-2-oracle.xql}
dbqd.general-comments.www.delete-attachment-2.get_type {dbqd.general-comments.www.delete-attachment-2.get_type {        select content_type
          from cr_items
         where item_id = :attach_id
    
      } {} {} {} F:/temp/openacs-4/packages/general-comments/www/delete-attachment-2.xql}
dbqd.general-comments.www.file-add-2.insert_image {dbqd.general-comments.www.file-add-2.insert_image {             begin
                :1 := acs_message.new_image (
                    message_id     => :parent_id,
                    image_id       => :attach_id,
                    file_name      => :client_filename,
                    title          => :title,
                    mime_type      => :guessed_file_type,
                    content        => empty_blob(),
                    width          => :original_width,
                    height         => :original_height,
                    creation_user  => :user_id,
                    creation_ip    => :creation_ip,
                    is_live        => :is_live
            );
            end;
        
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/general-comments/www/file-add-2-oracle.xql}
dbqd.general-comments.www.file-add-2.insert_file {dbqd.general-comments.www.file-add-2.insert_file {            begin
                :1 := acs_message.new_file (
                    message_id     => :parent_id,
                    file_id        => :attach_id,
                    file_name      => :client_filename,
                    title          => :title,
                    mime_type      => :guessed_file_type,
                    content        => empty_blob(),
                    creation_user  => :user_id,
                    creation_ip    => :creation_ip,
                    is_live        => :is_live
            );
            end;
        
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/general-comments/www/file-add-2-oracle.xql}
dbqd.general-comments.www.file-add-2.get_revision {dbqd.general-comments.www.file-add-2.get_revision {        select content_item.get_latest_revision(:attach_id) as revision_id
        from dual
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/general-comments/www/file-add-2-oracle.xql}
dbqd.general-comments.www.file-add-2.set_content_size {dbqd.general-comments.www.file-add-2.set_content_size {	update cr_revisions
 	set filename = '$tmp_filename',
	    content_length = $tmp_size
	where revision_id = :revision_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/general-comments/www/file-add-2-oracle.xql}
dbqd.general-comments.www.file-add-2.is_mime_type_valid {dbqd.general-comments.www.file-add-2.is_mime_type_valid {    select mime_type
      from cr_mime_types
    where mime_type = :guessed_file_type 
      } {} {} {} F:/temp/openacs-4/packages/general-comments/www/file-add-2.xql}
dbqd.general-comments.www.file-edit-2.get_revision_id {dbqd.general-comments.www.file-edit-2.get_revision_id {    select content_item.get_latest_revision(:attach_id) as revision_id from dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/general-comments/www/file-edit-2-oracle.xql}
dbqd.general-comments.www.file-edit-2.edit_title {dbqd.general-comments.www.file-edit-2.edit_title {    update cr_revisions
       set title = :title
     where revision_id = :revision_id

      } {} {} {} F:/temp/openacs-4/packages/general-comments/www/file-edit-2.xql}
dbqd.general-comments.www.file-edit.get_comment {dbqd.general-comments.www.file-edit.get_comment {  select r.title,
         i.name as file_name
    from cr_items i, cr_revisions r
   where i.item_id = :attach_id and
         r.revision_id = content_item.get_latest_revision(i.item_id)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/general-comments/www/file-edit-oracle.xql}
dbqd.general-comments.www.index.comments_select {dbqd.general-comments.www.index.comments_select {    select g.comment_id,
           r.title, 
           acs_object.name(o.creation_user) as author,
           o.creation_user, 
           decode(i.live_revision,null,0,1) as live_version_p,
           decode(i.live_revision,r.revision_id,1,0) as approved_p, 
           to_char(o.creation_date, 'MM-DD-YYYY HH12:MI:AM') as pretty_date
      from general_comments g,
           cr_items i,
           cr_revisions r,
           acs_objects o
     where g.comment_id = i.item_id and
           r.revision_id = o.object_id and
           r.revision_id = content_item.get_latest_revision(g.comment_id) and
           o.creation_user = :user_id
          [ad_dimensional_sql $dimensional]
    [ad_order_by_from_sort_spec $orderby $table_def]
     
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/general-comments/www/index-oracle.xql}
dbqd.general-comments.www.index.modified_last_24hours {dbqd.general-comments.www.index.modified_last_24hours {		creation_date + 1 > sysdate

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/general-comments/www/index-oracle.xql}
dbqd.general-comments.www.index.modified_last_week {dbqd.general-comments.www.index.modified_last_week {		creation_date + 7 > sysdate

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/general-comments/www/index-oracle.xql}
dbqd.general-comments.www.index.modified_last_month {dbqd.general-comments.www.index.modified_last_month {		creation_date + 30 > sysdate

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/general-comments/www/index-oracle.xql}
dbqd.general-comments.www.index.status_approved {dbqd.general-comments.www.index.status_approved {	      	i.live_revision is not null

      } {} {} {} F:/temp/openacs-4/packages/general-comments/www/index.xql}
dbqd.general-comments.www.index.status_unapproved {dbqd.general-comments.www.index.status_unapproved {	      	i.live_revision is null

      } {} {} {} F:/temp/openacs-4/packages/general-comments/www/index.xql}
dbqd.general-comments.www.url-add-2.insert_comment {dbqd.general-comments.www.url-add-2.insert_comment {    begin
        :1 := content_extlink.new (
                name            => :name,
                url             => :url,
                label           => :label,
                parent_id       => :parent_id,
                extlink_id      => :attach_id,
                creation_user   => :user_id,
                creation_ip     => :creation_ip
         );
    end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/general-comments/www/url-add-2-oracle.xql}
dbqd.general-comments.www.url-edit-2.edit_url {dbqd.general-comments.www.url-edit-2.edit_url {    update cr_extlinks
       set label = :label,
           url = :url
     where extlink_id = :attach_id

      } {} {} {} F:/temp/openacs-4/packages/general-comments/www/url-edit-2.xql}
dbqd.general-comments.www.url-edit.get_comment {dbqd.general-comments.www.url-edit.get_comment {          select label,
                 url
            from cr_extlinks
           where extlink_id = :attach_id

      } {} {} {} F:/temp/openacs-4/packages/general-comments/www/url-edit.xql}
dbqd.general-comments.www.view-comment.get_latest_revision {dbqd.general-comments.www.view-comment.get_latest_revision {            select content_item.get_latest_revision(:comment_id) from dual
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/general-comments/www/view-comment-oracle.xql}
dbqd.general-comments.www.view-comment.get_revision_comment {dbqd.general-comments.www.view-comment.get_revision_comment {           select g.object_id,
	          g.comment_id,
	          content_item.get_live_revision(g.comment_id) as live_revision,
                  r.revision_id,
                  r.title,
	          r.content, 
	          r.mime_type, 
	          o.creation_user,
	          o.creation_date,
	          acs_object.name(o.creation_user) as author
             from general_comments g,
                  cr_revisions r,
                  acs_objects o
            where g.comment_id = o.object_id and
                  g.comment_id = r.item_id and
	          r.revision_id = :revision_id
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/general-comments/www/view-comment-oracle.xql}
dbqd.general-comments.www.view-comment.get_comment {dbqd.general-comments.www.view-comment.get_comment {           select g.object_id,
	          g.comment_id,
	          r.revision_id as live_revision,
	          r.revision_id,
                  r.title,
	          r.content, 
	          r.mime_type, 
	          o.creation_user,
	          o.creation_date,
	          acs_object.name(o.creation_user) as author
             from general_comments g,
                  acs_objects o, 
	          cr_revisions r
            where g.comment_id = :comment_id and
                  g.comment_id = o.object_id and
                  g.comment_id = r.item_id and
	          r.revision_id = content_item.get_live_revision(:comment_id)
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/general-comments/www/view-comment-oracle.xql}
dbqd.general-comments.www.view-comment.get_revisions {dbqd.general-comments.www.view-comment.get_revisions {    select r.revision_id,
           to_char(o.creation_date, 'MM-DD-YY HH24:MI:SS') as revision_date
      from cr_revisions r,
           acs_objects o
     where r.item_id = :comment_id and
           o.object_id = r.revision_id
     order by o.creation_date desc

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/general-comments/www/view-comment-oracle.xql}
dbqd.general-comments.www.view-comment.get_attachments {dbqd.general-comments.www.view-comment.get_attachments {   select r.title,
          r.mime_type,
          i.name,
          i.item_id
     from cr_items i,
          cr_revisions r
    where i.parent_id = :comment_id and
          r.revision_id = i.live_revision

      } {} {} {} F:/temp/openacs-4/packages/general-comments/www/view-comment.xql}
dbqd.general-comments.www.view-comment.get_links {dbqd.general-comments.www.view-comment.get_links {    select i.item_id,
           e.label,
           e.url
      from cr_items i, cr_extlinks e
     where i.parent_id = :comment_id and
           e.extlink_id = i.item_id

      } {} {} {} F:/temp/openacs-4/packages/general-comments/www/view-comment.xql}
dbqd.general-comments.www.view-comment.get_object_id {dbqd.general-comments.www.view-comment.get_object_id {      select object_id from general_comments where comment_id = :comment_id
      } {} {} {} F:/temp/openacs-4/packages/general-comments/www/view-comment.xql}
dbqd.general-comments.www.view-image.get_image {dbqd.general-comments.www.view-image.get_image {    select i.name,
           r.title,
           m.width,
           m.height
      from cr_items i, 
           cr_revisions r, 
           images m
     where i.item_id = :image_id and
           r.revision_id = i.live_revision and
           r.revision_id = m.image_id

      } {} {} {} F:/temp/openacs-4/packages/general-comments/www/view-image.xql}
dbqd.glossary.tcl.glossary-init.glossary_direct_lookup.definition_display_1 {dbqd.glossary.tcl.glossary-init.glossary_direct_lookup.definition_display_1 {	    select content 
              from cr_revisions cr, glossary_terms gt
             where cr.title = :term 
               and cr.revision_id = gt.term_id
	
      } {} {} {} F:/temp/openacs-4/packages/glossary/tcl/glossary-init.xql}
dbqd.glossary.tcl.glossary-init.glossary_direct_lookup.definition_display_2 {dbqd.glossary.tcl.glossary-init.glossary_direct_lookup.definition_display_2 {	    select content 
              from cr_revisions cr, glossary_terms gt
             where lower(cr.title) = :caseless_term 
               and cr.revision_id = gt.term_id
	
      } {} {} {} F:/temp/openacs-4/packages/glossary/tcl/glossary-init.xql}
dbqd.glossary.www.disable.get_item_title {dbqd.glossary.www.disable.get_item_title {    select title
    from cr_revisions
    where item_id = :item_id 
    and revision_id = content_item.get_live_revision(:item_id)
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/glossary/www/disable-oracle.xql}
dbqd.glossary.www.disable.unset_live_content_item {dbqd.glossary.www.disable.unset_live_content_item {		begin
	            content_item.unset_live_revision(:item_id);
		end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/glossary/www/disable-oracle.xql}
dbqd.glossary.www.disable.audit_update_object {dbqd.glossary.www.disable.audit_update_object {	    update acs_objects
	    set last_modified = sysdate,
	    modifying_user = :user_id,
	    modifying_ip = :peeraddr
	    where object_id = :item_id
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/glossary/www/disable-oracle.xql}
dbqd.glossary.www.glossary-add-edit.glossary_workflow_info {dbqd.glossary.www.glossary-add-edit.glossary_workflow_info {	select g.workflow_key, wf.description as workflow_description, pretty_name as workflow_name
	from glossariesx g, wf_workflows wf, acs_object_types ot
	where g.workflow_key = wf.workflow_key
	and wf.workflow_key = ot.object_type
	and g.item_id = :item_id
        and g.revision_id = content_item.get_live_revision(:item_id)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/glossary/www/glossary-add-edit-oracle.xql}
dbqd.glossary.www.glossary-add-edit.get_pending_terms_p {dbqd.glossary.www.glossary-add-edit.get_pending_terms_p {	select case when count(*) = 0 then 0 else 1 end
	from glossary_termsx
	where ( acs_permission.permission_p(item_id, :user_id, 'glossary_term_modify') = 't' or acs_permission.permission_p(item_id, :user_id, 'glossary_term_illustration_add') = 't' or acs_permission.permission_p(item_id, :user_id, 'glossary_term_illustration_modify') = 't')
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/glossary/www/glossary-add-edit-oracle.xql}
dbqd.glossary.www.glossary-add-edit.glossary_select {dbqd.glossary.www.glossary-add-edit.glossary_select {	select g.title, i.name, g.description, g.owner_id,  i.publish_status,
	decode(acs_permission.permission_p(i.item_id,
	:user_id,
	'glossary_admin'),
	't', 1,
	'f', 0) as glossary_admin_p
	from glossariesx g, cr_items i
	where i.item_id = :item_id
	and i.publish_status = 'live'
	and i.content_type = 'glossary'
	and i.live_revision = g.revision_id
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/glossary/www/glossary-add-edit-oracle.xql}
dbqd.glossary.www.glossary-add-edit.get_next_revision_id {dbqd.glossary.www.glossary-add-edit.get_next_revision_id {	    select acs_object_id_seq.nextval from dual
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/glossary/www/glossary-add-edit-oracle.xql}
dbqd.glossary.www.glossary-add-edit.new_glossary {dbqd.glossary.www.glossary-add-edit.new_glossary {	    begin
	    :1 := glossary.new (
	    owner_id => :owner_id,
	    title => :title,
            description => :description,
	    package_id => :package_id,
	    creation_user => :user_id,
	    creation_ip => :peeraddr,
	    context_id => :context_id,
	    is_live => :is_live
	    );
	    acs_permission.grant_permission(:1,:owner_id, 'glossary_admin');
	    end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/glossary/www/glossary-add-edit-oracle.xql}
dbqd.glossary.www.glossary-add-edit.glossary_update {dbqd.glossary.www.glossary-add-edit.glossary_update {	    insert into glossariesi (
	    item_id, revision_id, title, description, context_id, creation_user, creation_ip, package_id, workflow_key
	    ) values (
	    :item_id, :revision_id, :title, :description, :context_id, :user_id, :peeraddr, :package_id, :workflow_key
	    )
	
      } {} {} {} F:/temp/openacs-4/packages/glossary/www/glossary-add-edit.xql}
dbqd.glossary.www.glossary-add-edit.set_revision_live {dbqd.glossary.www.glossary-add-edit.set_revision_live {	    update cr_items
	    set live_revision = :revision_id,
	    name = :package_id || '_' || :item_id,
	    publish_status = 'live'
	    where item_id = :item_id
	
      } {} {} {} F:/temp/openacs-4/packages/glossary/www/glossary-add-edit.xql}
dbqd.glossary.www.glossary.glossary_item_select {dbqd.glossary.www.glossary.glossary_item_select {    select i.item_id as glossary_item_id, title as glossary_title,
    description as glossary_description,
    decode(acs_permission.permission_p(i.item_id,
                                       :user_id,
                                       'glossary_modify'),
           't', 1,
           'f', 0) as glossary_edit_p
    from glossariesx g, cr_items i
    where g.item_id = :item_id 
    and g.item_id = i.item_id
    and i.publish_status = 'live'
    and i.content_type = 'glossary'
    and publish_date < sysdate
    and i.live_revision = g.revision_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/glossary/www/glossary-oracle.xql}
dbqd.glossary.www.glossary.glossary_term_items_select {dbqd.glossary.www.glossary.glossary_term_items_select {    select i.item_id as glossary_term_item_id , title as term,
    decode(acs_permission.permission_p(i.item_id,
                                       :user_id,
                                       'glossary_term_modify'),
           't', 1,
           'f', 0) as term_edit_p
    from glossary_termsx gt, cr_items i, cr_child_rels ch
    where ch.parent_id = :item_id
    and ch.child_id = gt.item_id
    and i.publish_status = 'live'
    and i.content_type = 'glossary_term'
    and i.live_revision = gt.revision_id
    and publish_date > sysdate -1
    and acs_permission.permission_p(i.item_id, :user_id, 'read') = 't'
    order by term

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/glossary/www/glossary-oracle.xql}
dbqd.glossary.www.illustration-add-edit-2.get_next_revision_id {dbqd.glossary.www.illustration-add-edit-2.get_next_revision_id {	select acs_object_id_seq.nextval from dual
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/glossary/www/illustration-add-edit-2-oracle.xql}
dbqd.glossary.www.illustration-add-edit-2.image_blob_update_1 {dbqd.glossary.www.illustration-add-edit-2.image_blob_update_1 {	       update cr_revisions
	       set mime_type = :mime_type,
	       content = empty_blob()
	       where revision_id = :revision_id
	       returning content into :1
	   
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/glossary/www/illustration-add-edit-2-oracle.xql}
dbqd.glossary.www.illustration-add-edit-2.image_blob_size_1 {dbqd.glossary.www.illustration-add-edit-2.image_blob_size_1 {         update cr_revisions
         set content_length = dbms_lob.getlength(content)
         where revision_id = :revision_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/glossary/www/illustration-add-edit-2-oracle.xql}
dbqd.glossary.www.illustration-add-edit-2.new_term_illustration_item {dbqd.glossary.www.illustration-add-edit-2.new_term_illustration_item {	    begin
	    :1 := content_item.new (
	    name => :name,
	    content_type => 'image',
	    context_id => :term_item_id,
	    creation_user => :user_id,
	    creation_ip => :peeraddr
	    );
	    end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/glossary/www/illustration-add-edit-2-oracle.xql}
dbqd.glossary.www.illustration-add-edit-2.term_new_content_revision_1 {dbqd.glossary.www.illustration-add-edit-2.term_new_content_revision_1 {	    begin
	    :1 := content_revision.new(
	    item_id => :new_item_id,
	    title => :title,
	    description => :description,
	    creation_user => :user_id,
	    creation_ip => :peeraddr
	    );
	    end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/glossary/www/illustration-add-edit-2-oracle.xql}
dbqd.glossary.www.illustration-add-edit-2.image_blob_update_2 {dbqd.glossary.www.illustration-add-edit-2.image_blob_update_2 {        update cr_revisions
        set mime_type = :mime_type,
        content = empty_blob()
        where revision_id = :new_revision_id
        returning content into :1
	   
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/glossary/www/illustration-add-edit-2-oracle.xql}
dbqd.glossary.www.illustration-add-edit-2.image_blob_size_2 {dbqd.glossary.www.illustration-add-edit-2.image_blob_size_2 {         update cr_revisions
         set content_length = dbms_lob.getlength(content)
         where revision_id = :new_revision_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/glossary/www/illustration-add-edit-2-oracle.xql}
dbqd.glossary.www.illustration-add-edit-2.term_new_content_revision_2 {dbqd.glossary.www.illustration-add-edit-2.term_new_content_revision_2 {         begin
           :1 := acs_object.new(
                   object_type => 'cr_item_child_rel',
                   context_id  => :term_item_id
                 );
         end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/glossary/www/illustration-add-edit-2-oracle.xql}
dbqd.glossary.www.illustration-add-edit-2.illustration_update {dbqd.glossary.www.illustration-add-edit-2.illustration_update {	   insert into imagesi (
	   item_id, revision_id, title, description, context_id, 
	   creation_user, creation_ip
	   ) values (
	   :item_id, :revision_id,:title, :description,
	   :term_item_id, :user_id, :peeraddr
	   )
       
      } {} {} {} F:/temp/openacs-4/packages/glossary/www/illustration-add-edit-2.xql}
dbqd.glossary.www.illustration-add-edit-2.set_revision_live_1 {dbqd.glossary.www.illustration-add-edit-2.set_revision_live_1 {	       update images
	       set width =:original_width,
	       height = :original_height
	       where image_id = :revision_id
	   
      } {} {} {} F:/temp/openacs-4/packages/glossary/www/illustration-add-edit-2.xql}
dbqd.glossary.www.illustration-add-edit-2.set_revision_live_2 {dbqd.glossary.www.illustration-add-edit-2.set_revision_live_2 {	   update cr_items
	   set live_revision = :revision_id,
	   name = :name,
	   publish_status = 'live'
	   where item_id = :item_id
	   
      } {} {} {} F:/temp/openacs-4/packages/glossary/www/illustration-add-edit-2.xql}
dbqd.glossary.www.illustration-add-edit-2.term_insert {dbqd.glossary.www.illustration-add-edit-2.term_insert {	     insert into images(
	     image_id
	     ) values (
	     :new_revision_id
	     )
	 
      } {} {} {} F:/temp/openacs-4/packages/glossary/www/illustration-add-edit-2.xql}
dbqd.glossary.www.illustration-add-edit-2.set_revision_live_3 {dbqd.glossary.www.illustration-add-edit-2.set_revision_live_3 {        update images
        set width =:original_width,
        height = :original_height
        where image_id = :new_revision_id
	   
      } {} {} {} F:/temp/openacs-4/packages/glossary/www/illustration-add-edit-2.xql}
dbqd.glossary.www.illustration-add-edit-2.set_revision_live_4 {dbqd.glossary.www.illustration-add-edit-2.set_revision_live_4 {	update cr_items
	set live_revision = :new_revision_id,
	name = :name, 
	publish_status = 'live'
	where item_id = :new_item_id
	   
      } {} {} {} F:/temp/openacs-4/packages/glossary/www/illustration-add-edit-2.xql}
dbqd.glossary.www.illustration-add-edit-2.set_parent_glossary {dbqd.glossary.www.illustration-add-edit-2.set_parent_glossary {	     insert into cr_child_rels (
	     rel_id, parent_id, child_id, relation_tag
	     ) values (
	     :rel_id, :term_item_id, :new_item_id, 'illustration'
	     )
	 
      } {} {} {} F:/temp/openacs-4/packages/glossary/www/illustration-add-edit-2.xql}
dbqd.glossary.www.illustration-add-edit.illustration_select {dbqd.glossary.www.illustration-add-edit.illustration_select {	select title, description, name
	from imagesx
	where item_id = :item_id
	and revision_id = content_item.get_latest_revision(:item_id)
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/glossary/www/illustration-add-edit-oracle.xql}
dbqd.glossary.www.index.get_workflow_p_2 {dbqd.glossary.www.index.get_workflow_p_2 {	select decode(count(*), 0, 0, 1)
	from wf_user_tasks t, wf_cases c, cr_items i
	where t.user_id = :user_id
	and t.state in ('enabled','started')
	and i.content_type = 'glossary_term'
	and i.item_id = c.object_id
	and t.case_id = c.case_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/glossary/www/index-oracle.xql}
dbqd.glossary.www.index.package_info {dbqd.glossary.www.index.package_info {    select package_key, acs_object.name(package_id) package_title
    from apm_packages
    where package_id = :package_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/glossary/www/index-oracle.xql}
dbqd.glossary.www.index.glossary_items_select {dbqd.glossary.www.index.glossary_items_select {    select i.item_id, title, party.name(owner_id) as owner_name, 
    decode(acs_permission.permission_p(i.item_id,
                                       :user_id,
                                       'glossary_admin'),
           't', 1,
           'f', 0) as admin_p
    from glossariesx g, cr_items i
    where i.publish_status = 'live'
    and i.content_type = 'glossary'
    and i.live_revision = g.revision_id
    and publish_date < sysdate
    and acs_permission.permission_p(i.item_id, :user_id, 'read') = 't'
    and g.package_id = :package_id
    order by title

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/glossary/www/index-oracle.xql}
dbqd.glossary.www.index.get_admin_p {dbqd.glossary.www.index.get_admin_p {    select case when count(*) = 0 then 0 else 1 end
    from acs_permissions p, cr_items i
    where grantee_id = :user_id
    and i.content_type = 'glossary'
    and item_id = object_id

      } {} {} {} F:/temp/openacs-4/packages/glossary/www/index.xql}
dbqd.glossary.www.index.get_workflow_p_1 {dbqd.glossary.www.index.get_workflow_p_1 {	select case when count(*) = 0 then 0 else 1 end
	from wf_user_tasks t, wf_cases c, cr_items i
	where t.state in ('enabled','started')
	and i.content_type = 'glossary_term'
	and i.item_id = c.object_id
	and t.case_id = c.case_id
    
      } {} {} {} F:/temp/openacs-4/packages/glossary/www/index.xql}
dbqd.glossary.www.index.get_workflow_link {dbqd.glossary.www.index.get_workflow_link {    select s1.name
    from site_nodes s1, site_nodes s2, apm_packages p
    where package_key = 'acs-workflow'
    and s1.object_id = :package_id
    and s1.parent_id = s2.parent_id
    and s2.node_id = :node_id

      } {} {} {} F:/temp/openacs-4/packages/glossary/www/index.xql}
dbqd.glossary.www.package-administer.glossary_items_select {dbqd.glossary.www.package-administer.glossary_items_select {    select i.item_id, title, party.name(owner_id) as owner_name, publish_date, publish_status, live_revision
    from glossariesx g, cr_items i
    where i.content_type = 'glossary'
    and i.item_id = g.item_id
    and acs_permission.permission_p(i.item_id, :user_id, 'glossary_admin') = 't'
    and g.package_id = :package_id
    and g.revision_id = content_item.get_latest_revision(i.item_id)
    order by title

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/glossary/www/package-administer-oracle.xql}
dbqd.glossary.www.publish.get_item_title_and_revision_id {dbqd.glossary.www.publish.get_item_title_and_revision_id {    select title, revision_id
    from cr_revisions
    where item_id = :item_id 
    and revision_id = content_item.get_latest_revision(:item_id)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/glossary/www/publish-oracle.xql}
dbqd.glossary.www.publish.set_live_content_item {dbqd.glossary.www.publish.set_live_content_item {		begin
	            content_item.set_live_revision(:revision_id, 'live');
		end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/glossary/www/publish-oracle.xql}
dbqd.glossary.www.publish.audit_update_object {dbqd.glossary.www.publish.audit_update_object {	    update acs_objects
	    set last_modified = sysdate,
	    modifying_user = :user_id,
	    modifying_ip = :peeraddr
	    where object_id = :item_id
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/glossary/www/publish-oracle.xql}
dbqd.glossary.www.term-add-edit.get_glossary_workflow_1 {dbqd.glossary.www.term-add-edit.get_glossary_workflow_1 {	select workflow_key 
	from glossariesx 
	where item_id = :glossary_item_id and
          revision_id = content_item.get_live_revision(:glossary_item_id)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/glossary/www/term-add-edit-oracle.xql}
dbqd.glossary.www.term-add-edit.get_glossary_workflow_2 {dbqd.glossary.www.term-add-edit.get_glossary_workflow_2 {	select workflow_key 
	from glossariesx g, cr_child_rels ch
	where g.item_id = ch.parent_id
	and ch.child_id = :item_id
	and revision_id = content_item.get_live_revision(g.item_id)
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/glossary/www/term-add-edit-oracle.xql}
dbqd.glossary.www.term-add-edit.term_select {dbqd.glossary.www.term-add-edit.term_select {	select term, definition, publish_status,
	live_revision, latest_revision, name, mime_type,
	decode(acs_permission.permission_p(item_id,
	:user_id,
	'glossary_term_add_illustration'),
	't', 1,
	'f', 0) as illustration_add_p
	from glossary_terms_latest
	where item_id = :item_id
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/glossary/www/term-add-edit-oracle.xql}
dbqd.glossary.www.term-add-edit.get_next_revision_id {dbqd.glossary.www.term-add-edit.get_next_revision_id {	    select acs_object_id_seq.nextval from dual
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/glossary/www/term-add-edit-oracle.xql}
dbqd.glossary.www.term-add-edit.term_definition_update_1 {dbqd.glossary.www.term-add-edit.term_definition_update_1 {		    update cr_revisions
		    set content = empty_blob()
		    where revision_id = :revision_id
		    returning content into :1
		
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/glossary/www/term-add-edit-oracle.xql}
dbqd.glossary.www.term-add-edit.new_glossary_term {dbqd.glossary.www.term-add-edit.new_glossary_term {         begin
	  :1 := glossary_term.new (
           term => :term,
           definition => :definition,
           mime_type => :mime_type,
           package_id => :package_id,
           creation_user => :user_id,
           creation_ip => :peeraddr,
           context_id => :glossary_item_id,
           publish_status => :publish_status
	  );
         end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/glossary/www/term-add-edit-oracle.xql}
dbqd.glossary.www.term-add-edit.illuststration_exists {dbqd.glossary.www.term-add-edit.illuststration_exists {	select child_id as illustration_item_id from cr_child_rels 
	where relation_tag = 'illustration' and parent_id = :item_id
      } {} {} {} F:/temp/openacs-4/packages/glossary/www/term-add-edit.xql}
dbqd.glossary.www.term-add-edit.get_parent_glossary_item_id {dbqd.glossary.www.term-add-edit.get_parent_glossary_item_id {	select parent_id from cr_child_rels 
	where child_id = :item_id and relation_tag = 'parent glossary'
      } {} {} {} F:/temp/openacs-4/packages/glossary/www/term-add-edit.xql}
dbqd.glossary.www.term-add-edit.term_update {dbqd.glossary.www.term-add-edit.term_update {		insert into glossary_termsi (
		item_id, revision_id, title, context_id, 
		creation_user, creation_ip, mime_type
		) values (
		:item_id, :revision_id, 
		:term, :glossary_item_id, :user_id, :peeraddr, :mime_type
		)
	    
      } {} {} {} F:/temp/openacs-4/packages/glossary/www/term-add-edit.xql}
dbqd.glossary.www.term-add-edit.set_revision_live_1 {dbqd.glossary.www.term-add-edit.set_revision_live_1 {	        update cr_items
		set live_revision = :revision_id,
		publish_status = :publish_status
		where item_id = :item_id
	    
      } {} {} {} F:/temp/openacs-4/packages/glossary/www/term-add-edit.xql}
dbqd.glossary.www.term-add-edit.term_insert {dbqd.glossary.www.term-add-edit.term_insert {		insert into glossary_terms (
		term_id
		) values (
		:new_revision_id
		)
	    
      } {} {} {} F:/temp/openacs-4/packages/glossary/www/term-add-edit.xql}
dbqd.glossary.www.term-add-edit.set_revision_live_2 {dbqd.glossary.www.term-add-edit.set_revision_live_2 {	        update cr_items
		set live_revision = :new_revision_id,
		name = :name,
		publish_status = :publish_status
		where item_id = :new_item_id
	    
      } {} {} {} F:/temp/openacs-4/packages/glossary/www/term-add-edit.xql}
dbqd.glossary.www.term-add-edit.set_parent_glossary {dbqd.glossary.www.term-add-edit.set_parent_glossary {		insert into cr_child_rels (
		rel_id, parent_id, child_id, relation_tag
		) values (
		:rel_id, :glossary_item_id, :new_item_id, 'parent glossary'
		)
	    
      } {} {} {} F:/temp/openacs-4/packages/glossary/www/term-add-edit.xql}
dbqd.glossary.www.term.glossary_term_item_select {dbqd.glossary.www.term.glossary_term_item_select {    select term, definition,
    revision_id, item_id, name, mime_type,
    decode(acs_permission.permission_p(item_id,
                                       :user_id,
                                       'glossary_term_modify'),
           't', 1,
           'f', 0) as term_modify_p
    from glossary_terms_live_definition
    where item_id = :item_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/glossary/www/term-oracle.xql}
dbqd.glossary.www.term.get_glossary_title {dbqd.glossary.www.term.get_glossary_title {select title from glossariesx
where revision_id = content_item.get_live_revision(:glossary_item_id)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/glossary/www/term-oracle.xql}
dbqd.glossary.www.term.illuststration_exists {dbqd.glossary.www.term.illuststration_exists {    select i.item_id as illustration_item_id, 
    live_revision as illustration_revision_id
    from cr_child_rels ch, cr_items i
    where relation_tag = 'illustration' 
    and ch.parent_id = :item_id
    and ch.child_id = i.item_id
    and publish_status = 'live'
      } {} {} {} F:/temp/openacs-4/packages/glossary/www/term.xql}
dbqd.glossary.www.term.get_picture_info {dbqd.glossary.www.term.get_picture_info {	select i.width, i.height, cr.title as ill_title, 
	cr.description as ill_description, cr.publish_date
	from images i, cr_revisions cr
	where i.image_id = cr.revision_id
	and image_id = :illustration_revision_id
   
      } {} {} {} F:/temp/openacs-4/packages/glossary/www/term.xql}
dbqd.glossary.www.term.get_live_p_and_glossary_item_id {dbqd.glossary.www.term.get_live_p_and_glossary_item_id {    select ch.parent_id as glossary_item_id
    from cr_child_rels ch, cr_items i
    where child_id = :item_id 
    and relation_tag = 'parent glossary'
    and ch.parent_id = item_id
    and live_revision is not null
      } {} {} {} F:/temp/openacs-4/packages/glossary/www/term.xql}
dbqd.glossary.www.terms-pending.glossary_item_select {dbqd.glossary.www.terms-pending.glossary_item_select {    select i.item_id as glossary_item_id, title as glossary_title,
    description as glossary_description, i.publish_status as glossary_status,
    decode(acs_permission.permission_p(i.item_id,
                                       :user_id,
                                       'glossary_modify'),
           't', 1,
           'f', 0) as glossary_edit_p
    from glossariesx g, cr_items i
    where g.item_id = :item_id 
    and g.item_id = i.item_id
    and i.content_type = 'glossary'
    and i.live_revision = g.revision_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/glossary/www/terms-pending-oracle.xql}
dbqd.glossary.www.terms-pending.glossary_pending_term_items_select {dbqd.glossary.www.terms-pending.glossary_pending_term_items_select {    select i.item_id as glossary_term_item_id , title as term, publish_status as term_status
    from glossary_termsx gt, cr_items i, cr_child_rels ch
    where ch.parent_id = :item_id
    and ch.child_id = gt.item_id
    and i.publish_status != 'live'
    and i.content_type = 'glossary_term'
    and i.live_revision = gt.revision_id
    and acs_permission.permission_p(i.item_id, :user_id, 'glossary_term_modify') = 't'
    order by term

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/glossary/www/terms-pending-oracle.xql}
dbqd.glossary.www.workflow-add-edit.glossary_workflow_info {dbqd.glossary.www.workflow-add-edit.glossary_workflow_info {    select g.title as glossary_title, g.revision_id
    from glossariesx g
    where g.item_id = :item_id
    and g.revision_id = content_item.get_latest_revision(:item_id)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/glossary/www/workflow-add-edit-oracle.xql}
dbqd.glossary.www.workflow-add-edit.glossary_workflow_audit_update {dbqd.glossary.www.workflow-add-edit.glossary_workflow_audit_update {	update acs_objects 
	set last_modified = sysdate,
	modifying_user = :user_id,
	modifying_ip = :peeraddr
	where object_id = :item_id
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/glossary/www/workflow-add-edit-oracle.xql}
dbqd.glossary.www.workflow-add-edit.get_workflow_process {dbqd.glossary.www.workflow-add-edit.get_workflow_process {	select wf.workflow_key as possible_workflow_key, 
	wf.description as possible_description, pretty_name as possible_workflow_name
	from wf_workflows wf, acs_object_types ot
	where workflow_key like '%term%' 
	and wf.workflow_key = ot.object_type
    
      } {} {} {} F:/temp/openacs-4/packages/glossary/www/workflow-add-edit.xql}
dbqd.glossary.www.workflow-add-edit.glossary_workflow_update {dbqd.glossary.www.workflow-add-edit.glossary_workflow_update {	update glossaries
	set workflow_key = :new_workflow_key
	where glossary_id = :revision_id
    
      } {} {} {} F:/temp/openacs-4/packages/glossary/www/workflow-add-edit.xql}
dbqd.mp3-jukebox.www.admin.file-search.mp3_search {dbqd.mp3-jukebox.www.admin.file-search.mp3_search {      $select_sql
      } {} {} {} F:/temp/openacs-4/packages/mp3-jukebox/www/admin/file-search.xql}
dbqd.mp3-jukebox.www.admin.index.playlist_info {dbqd.mp3-jukebox.www.admin.index.playlist_info {    select name, mp.playlist_id, nvl(sc.songs,0) as songs 
    from   acs_objects, mp3_playlists mp,
           mp3_playlist_song_count sc
    where object_id = mp.playlist_id
     and context_id = :package_id
     and mp.playlist_id = sc.playlist_id(+)
    order by name

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/mp3-jukebox/www/admin/index-oracle.xql}
dbqd.mp3-jukebox.www.admin.index.mp3_info {dbqd.mp3-jukebox.www.admin.index.mp3_info {select title, mp3_id, creation_date
from   (select title, mp3_id, creation_date
        from   mp3_mp3s_not_deleted, acs_objects
        where  mp3_id = object_id
        and    creation_date > sysdate - 1
        order by creation_date desc)
where  rownum < 10

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/mp3-jukebox/www/admin/index-oracle.xql}
dbqd.mp3-jukebox.www.admin.index.playlist_info {dbqd.mp3-jukebox.www.admin.index.playlist_info {    select name, mp.playlist_id, nvl(sc.songs,0) as songs 
    from   acs_objects, mp3_playlists mp,
           mp3_playlist_song_count sc
    where object_id = mp.playlist_id
     and context_id = :package_id
     and mp.playlist_id = sc.playlist_id(+)
    order by name

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/mp3-jukebox/www/admin/index-oracle.xql}
dbqd.mp3-jukebox.www.admin.mp3-add-2.fix_creation {dbqd.mp3-jukebox.www.admin.mp3-add-2.fix_creation {update acs_objects
set    creation_user = :creation_user,
       creation_ip = :creation_ip,
       creation_date = sysdate,
       context_id = :package_id
where object_id = :mp3_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/mp3-jukebox/www/admin/mp3-add-2-oracle.xql}
dbqd.mp3-jukebox.www.admin.mp3-add-2.add_mp3 {dbqd.mp3-jukebox.www.admin.mp3-add-2.add_mp3 {begin
   :1 := mp3.new(
      mp3_id => :mp3_id,
      file_path => :client_filename,
      title => :mp3_title,
      $extra_vars
      creation_user => :creation_user,
      creation_ip => :creation_ip,
      creation_date => sysdate,
      context_id => :package_id
);
end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/mp3-jukebox/www/admin/mp3-add-2-oracle.xql}
dbqd.mp3-jukebox.www.admin.mp3-add-2.undelete_mp3 {dbqd.mp3-jukebox.www.admin.mp3-add-2.undelete_mp3 {update mp3_mp3s
set    title = :mp3_title,
       $extra_vars
       deleted_p = 'f'
where  mp3_id = :mp3_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/mp3-jukebox/www/admin/mp3-add-2-oracle.xql}
dbqd.mp3-jukebox.www.admin.mp3-add-2.update_mp3_info {dbqd.mp3-jukebox.www.admin.mp3-add-2.update_mp3_info {} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/mp3-jukebox/www/admin/mp3-add-2-oracle.xql}
dbqd.mp3-jukebox.www.admin.mp3-add-2.check_file_name {dbqd.mp3-jukebox.www.admin.mp3-add-2.check_file_name {        select deleted_p 
        from   mp3_mp3s
        where  file_path = :client_filename
      } {} {} {} F:/temp/openacs-4/packages/mp3-jukebox/www/admin/mp3-add-2.xql}
dbqd.mp3-jukebox.www.admin.mp3-add-2.get_mp3_id {dbqd.mp3-jukebox.www.admin.mp3-add-2.get_mp3_id {select mp3_id 
from   mp3_mp3s 
where  file_path = :client_filename
      } {} {} {} F:/temp/openacs-4/packages/mp3-jukebox/www/admin/mp3-add-2.xql}
dbqd.mp3-jukebox.www.admin.mp3-delete.delete_mp3 {dbqd.mp3-jukebox.www.admin.mp3-delete.delete_mp3 {	begin
	   mp3.mark_as_deleted (
		mp3_id => :mp3_id
		);
	end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/mp3-jukebox/www/admin/mp3-delete-oracle.xql}
dbqd.mp3-jukebox.www.admin.mp3-edit-2.mp3_edit {dbqd.mp3-jukebox.www.admin.mp3-edit-2.mp3_edit {      update mp3_mp3s
set 
     file_path = :file_path,
     title = :title,
     artist = :artist,
     bitrate = :bitrate,
     album = :album,
     genre = :genre,
     year = :year,
     tracknum = :tracknum,
     layer = :layer,
     copyright_p = :copyright_p,
     version = :version,
     mode_num = :mode_num,
     stereo_p = :stereo_p,
     frequency = :frequency,
     minutes = :minutes,
     seconds = :seconds,
     comments = :comments,
     vbr_p = :vbr_p
where mp3_id = :mp3_id

      } {} {} {} F:/temp/openacs-4/packages/mp3-jukebox/www/admin/mp3-edit-2.xql}
dbqd.mp3-jukebox.www.admin.mp3-edit.mp3_information {dbqd.mp3-jukebox.www.admin.mp3-edit.mp3_information {        select * from mp3_mp3s where mp3_id=:mp3_id

      } {} {} {} F:/temp/openacs-4/packages/mp3-jukebox/www/admin/mp3-edit.xql}
dbqd.mp3-jukebox.www.admin.mp3-mark-as-deleted.mark_mp3_as_deleted {dbqd.mp3-jukebox.www.admin.mp3-mark-as-deleted.mark_mp3_as_deleted {	begin
	   mp3_mp3s.mark_as_deleted (
		mp3_id => :mp3_id
		);
	end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/mp3-jukebox/www/admin/mp3-mark-as-deleted-oracle.xql}
dbqd.mp3-jukebox.www.admin.one-playlist.playlist_info {dbqd.mp3-jukebox.www.admin.one-playlist.playlist_info {    select name, remove_threshold, nvl(sc.songs,0) as songs, mp.playlist_id
     from mp3_playlists mp,
          mp3_playlist_song_count sc
     where mp.playlist_id=:playlist_id
     and   sc.playlist_id(+) = mp.playlist_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/mp3-jukebox/www/admin/one-playlist-oracle.xql}
dbqd.mp3-jukebox.www.admin.one-playlist.playlist_info {dbqd.mp3-jukebox.www.admin.one-playlist.playlist_info {    select name, remove_threshold, nvl(sc.songs,0) as songs, mp.playlist_id
     from mp3_playlists mp,
          mp3_playlist_song_count sc
     where mp.playlist_id=:playlist_id
     and   sc.playlist_id(+) = mp.playlist_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/mp3-jukebox/www/admin/one-playlist-oracle.xql}
dbqd.mp3-jukebox.www.admin.one-playlist.mp3_info {dbqd.mp3-jukebox.www.admin.one-playlist.mp3_info {    select sort_key,
    mp.title as title, map.mp3_id as mp3_id, total,
    case when sign (total - :remove_threshold) = 1 then 't' else 'f' end as active_p
    from mp3_mp3_playlist_map_view map, 
    mp3_mp3s_not_deleted mp
    where playlist_id=:playlist_id
     and map.mp3_id=mp.mp3_id
    order by sort_key

      } {} {} {} F:/temp/openacs-4/packages/mp3-jukebox/www/admin/one-playlist.xql}
dbqd.mp3-jukebox.www.admin.one-playlist.order_maxkey_get {dbqd.mp3-jukebox.www.admin.one-playlist.order_maxkey_get {      select max(sort_key)
	    from mp3_mp3_playlist_map 
            where playlist_id=:playlist_id
            
      } {} {} {} F:/temp/openacs-4/packages/mp3-jukebox/www/admin/one-playlist.xql}
dbqd.mp3-jukebox.www.admin.order-choose.playlist_name {dbqd.mp3-jukebox.www.admin.order-choose.playlist_name {      select name from mp3_playlists where playlist_id=$playlist_id
      } {} {} {} F:/temp/openacs-4/packages/mp3-jukebox/www/admin/order-choose.xql}
dbqd.mp3-jukebox.www.admin.order-choose.mp3_name {dbqd.mp3-jukebox.www.admin.order-choose.mp3_name {      select title from mp3_mp3s where mp3_id=:new_mp3
      } {} {} {} F:/temp/openacs-4/packages/mp3-jukebox/www/admin/order-choose.xql}
dbqd.mp3-jukebox.www.admin.order-choose.mp3_info {dbqd.mp3-jukebox.www.admin.order-choose.mp3_info {    select sort_key,
    mp.title as title, map.mp3_id as mp3_id
    from mp3_mp3_playlist_map map, 
    mp3_mp3s mp
    where playlist_id=:playlist_id 
    and map.mp3_id=mp.mp3_id
    order by sort_key

      } {} {} {} F:/temp/openacs-4/packages/mp3-jukebox/www/admin/order-choose.xql}
dbqd.mp3-jukebox.www.admin.playlist-create-2.create_playlist {dbqd.mp3-jukebox.www.admin.playlist-create-2.create_playlist {    begin
       :1 := mp3_playlist.new(
       playlist_id => :playlist_id,
       name => :playlist_name,
       remove_threshold => :neg_remove_threshold,
       creation_ip => :creation_ip,
       creation_user => :creation_user,
       creation_date => sysdate,
       context_id => :package_id
);
end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/mp3-jukebox/www/admin/playlist-create-2-oracle.xql}
dbqd.mp3-jukebox.www.admin.playlist-delete-2.delete_playlist {dbqd.mp3-jukebox.www.admin.playlist-delete-2.delete_playlist {	begin
	   mp3_playlist.delete (
		playlist_id => :playlist_id
		);
	end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/mp3-jukebox/www/admin/playlist-delete-2-oracle.xql}
dbqd.mp3-jukebox.www.admin.playlist-delete.playlist_info {dbqd.mp3-jukebox.www.admin.playlist-delete.playlist_info {      select name from mp3_playlists where playlist_id=:playlist_id
      } {} {} {} F:/temp/openacs-4/packages/mp3-jukebox/www/admin/playlist-delete.xql}
dbqd.mp3-jukebox.www.admin.playlist-edit-2.update_playlist {dbqd.mp3-jukebox.www.admin.playlist-edit-2.update_playlist {    update mp3_playlists set 
    name=:playlist_name, 
    remove_threshold=:neg_remove_threshold
    where playlist_id=:playlist_id

      } {} {} {} F:/temp/openacs-4/packages/mp3-jukebox/www/admin/playlist-edit-2.xql}
dbqd.mp3-jukebox.www.admin.playlist-edit.playlist_info {dbqd.mp3-jukebox.www.admin.playlist-edit.playlist_info {        select name, remove_threshold
        from mp3_playlists
        where playlist_id=:playlist_id

      } {} {} {} F:/temp/openacs-4/packages/mp3-jukebox/www/admin/playlist-edit.xql}
dbqd.mp3-jukebox.www.admin.playlist-item-add-2.add_item {dbqd.mp3-jukebox.www.admin.playlist-item-add-2.add_item {	begin
	  mp3_playlist.item_add (
		mp3_id => :mp3_id,
		playlist_id   => :playlist_id,
		sort_key => :insert_after_sort_key
		);
	end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/mp3-jukebox/www/admin/playlist-item-add-2-oracle.xql}
dbqd.mp3-jukebox.www.admin.playlist-item-add-2.sort_key {dbqd.mp3-jukebox.www.admin.playlist-item-add-2.sort_key {      select sort_key from mp3_mp3_playlist_map 
            where mp3_id=:insert_after_id
            and playlist_id=:playlist_id
      } {} {} {} F:/temp/openacs-4/packages/mp3-jukebox/www/admin/playlist-item-add-2.xql}
dbqd.mp3-jukebox.www.admin.playlist-item-add.playlist_name {dbqd.mp3-jukebox.www.admin.playlist-item-add.playlist_name {      select name from mp3_playlists where playlist_id=:playlist_id
      } {} {} {} F:/temp/openacs-4/packages/mp3-jukebox/www/admin/playlist-item-add.xql}
dbqd.mp3-jukebox.www.admin.playlist-item-remove.remove_item {dbqd.mp3-jukebox.www.admin.playlist-item-remove.remove_item {	begin
	  mp3_playlist.item_remove (
		mp3_id => :mp3_id,
		playlist_id => :playlist_id
		);
	end;
   
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/mp3-jukebox/www/admin/playlist-item-remove-oracle.xql}
dbqd.mp3-jukebox.www.admin.scanner.fix_creation {dbqd.mp3-jukebox.www.admin.scanner.fix_creation {update acs_objects
set    creation_user = :creation_user,
       creation_ip = :creation_ip,
       creation_date = sysdate,
       context_id = :package_id
where object_id = :mp3_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/mp3-jukebox/www/admin/scanner-oracle.xql}
dbqd.mp3-jukebox.www.admin.scanner.add_mp3 {dbqd.mp3-jukebox.www.admin.scanner.add_mp3 {begin
   :1 := mp3.new(
      file_path => :client_filename,
      $extra_vars
      creation_user => :creation_user,
      creation_ip => :creation_ip,
      creation_date => sysdate,
      context_id => :package_id
      );
end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/mp3-jukebox/www/admin/scanner-oracle.xql}
dbqd.mp3-jukebox.www.admin.scanner.update_mp3_info {dbqd.mp3-jukebox.www.admin.scanner.update_mp3_info {} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/mp3-jukebox/www/admin/scanner-oracle.xql}
dbqd.mp3-jukebox.www.admin.scanner.check_file_name {dbqd.mp3-jukebox.www.admin.scanner.check_file_name {        select deleted_p 
        from   mp3_mp3s
        where  file_path = :client_filename
      } {} {} {} F:/temp/openacs-4/packages/mp3-jukebox/www/admin/scanner.xql}
dbqd.mp3-jukebox.www.admin.scanner.get_mp3_id {dbqd.mp3-jukebox.www.admin.scanner.get_mp3_id {select mp3_id 
from   mp3_mp3s 
where  file_path = :client_filename
      } {} {} {} F:/temp/openacs-4/packages/mp3-jukebox/www/admin/scanner.xql}
dbqd.mp3-jukebox.www.admin.scanner.undelete_mp3 {dbqd.mp3-jukebox.www.admin.scanner.undelete_mp3 {update mp3_mp3s
set	file_path = :client_filename,
	title = :mp3_title,
	artist = :artist,
	bitrate = :bitrate,
	album = :album,
	tracknum = :tracknum,
	genre = :genre,
	year = :year,
	layer = :layer,
	copyright_p = :copyright_p,
	version = :version,
	mode_num = :mode_num,
	stereo_p = :stereo_p,
	frequency = :frequency,
	minutes = :minutes,
        deleted_p = 'f'
where  mp3_id = :mp3_id

      } {} {} {} F:/temp/openacs-4/packages/mp3-jukebox/www/admin/scanner.xql}
dbqd.mp3-jukebox.www.admin.scanner.fix_creation {dbqd.mp3-jukebox.www.admin.scanner.fix_creation {update acs_objects
set    creation_user = :creation_user,
       creation_ip = :creation_ip,
       creation_date = sysdate,
       context_id = :package_id
where object_id = :mp3_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/mp3-jukebox/www/admin/scanner-oracle.xql}
dbqd.mp3-jukebox.www.admin.swap.swap_item {dbqd.mp3-jukebox.www.admin.swap.swap_item {	begin
	  mp3_playlist.item_order_swap (
		playlist_id => :playlist_id,
		sort_key => :sort_key
		);
	end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/mp3-jukebox/www/admin/swap-oracle.xql}
dbqd.mp3-jukebox.www.admin.swap.get_sort_key {dbqd.mp3-jukebox.www.admin.swap.get_sort_key {      select sort_key from mp3_mp3_playlist_map 
where playlist_id=:playlist_id and mp3_id=:mp3_id
      } {} {} {} F:/temp/openacs-4/packages/mp3-jukebox/www/admin/swap.xql}
dbqd.mp3-jukebox.www.index.playlist_info {dbqd.mp3-jukebox.www.index.playlist_info {    select name, mp.playlist_id, nvl(sc.songs,0) as songs 
    from   acs_objects, mp3_playlists mp,
           mp3_playlist_song_count sc
    where object_id = mp.playlist_id
     and context_id = :package_id
     and mp.playlist_id = sc.playlist_id(+)
    order by name

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/mp3-jukebox/www/index-oracle.xql}
dbqd.mp3-jukebox.www.index.playlist_info {dbqd.mp3-jukebox.www.index.playlist_info {    select name, mp.playlist_id, nvl(sc.songs,0) as songs 
    from   acs_objects, mp3_playlists mp,
           mp3_playlist_song_count sc
    where object_id = mp.playlist_id
     and context_id = :package_id
     and mp.playlist_id = sc.playlist_id(+)
    order by name

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/mp3-jukebox/www/index-oracle.xql}
dbqd.mp3-jukebox.www.one-playlist.playlist_info {dbqd.mp3-jukebox.www.one-playlist.playlist_info {    select name, remove_threshold, nvl(sc.songs,0) as songs, mp.playlist_id
     from mp3_playlists mp,
          mp3_playlist_song_count sc
     where mp.playlist_id=:playlist_id
     and   sc.playlist_id(+) = mp.playlist_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/mp3-jukebox/www/one-playlist-oracle.xql}
dbqd.mp3-jukebox.www.one-playlist.playlist_info {dbqd.mp3-jukebox.www.one-playlist.playlist_info {    select name, remove_threshold, nvl(sc.songs,0) as songs, mp.playlist_id
     from mp3_playlists mp,
          mp3_playlist_song_count sc
     where mp.playlist_id=:playlist_id
     and   sc.playlist_id(+) = mp.playlist_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/mp3-jukebox/www/one-playlist-oracle.xql}
dbqd.mp3-jukebox.www.one-playlist.vote_info {dbqd.mp3-jukebox.www.one-playlist.vote_info {   select remove_threshold 
     from mp3_playlists
   where playlist_id=:playlist_id

      } {} {} {} F:/temp/openacs-4/packages/mp3-jukebox/www/one-playlist.xql}
dbqd.mp3-jukebox.www.one-playlist.mp3_info {dbqd.mp3-jukebox.www.one-playlist.mp3_info {    select sort_key,
    mp.title as title, map.mp3_id as mp3_id, total, artist,
    case when sign (total - :remove_threshold) = 1 then 't' else 'f' end as active_p
    from mp3_mp3_playlist_map_view map, 
    mp3_mp3s_not_deleted mp
    where map.playlist_id = :playlist_id
    and   map.mp3_id=mp.mp3_id
    order by sort_key

      } {} {} {} F:/temp/openacs-4/packages/mp3-jukebox/www/one-playlist.xql}
dbqd.mp3-jukebox.www.vote.vote_cast {dbqd.mp3-jukebox.www.vote.vote_cast {	begin
	  :1 := mp3_playlist.vote_cast (
		mp3_id => :mp3_id,
		playlist_id => :playlist_id,
		user_id => :user_id,
		vote_date => sysdate,
		vote => :vote_num
		);
	end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/mp3-jukebox/www/vote-oracle.xql}
dbqd.mp3-jukebox.www.vote-thankyou.name_info {dbqd.mp3-jukebox.www.vote-thankyou.name_info {      select title as mp3_title, name
 from mp3_mp3s, 
  mp3_playlists
   where playlist_id=:playlist_id and mp3_id=:mp3_id
      } {} {} {} F:/temp/openacs-4/packages/mp3-jukebox/www/vote-thankyou.xql}
dbqd.news.tcl.news-procs.news_items_archive.news_item_archive {dbqd.news.tcl.news-procs.news_items_archive.news_item_archive {	    begin
	    news.archive(
	        item_id => :id,
	        archive_date => :when);
	    end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/news/tcl/news-procs-oracle.xql}
dbqd.news.tcl.news-procs.news_items_make_permanent.news_item_make_permanent {dbqd.news.tcl.news-procs.news_items_make_permanent.news_item_make_permanent {	    begin
	        news.make_permanent(:id);
	    end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/news/tcl/news-procs-oracle.xql}
dbqd.news.tcl.news-procs.news_items_delete.news_item_delete {dbqd.news.tcl.news-procs.news_items_delete.news_item_delete {	    begin
	        news.delete(:id);
	    end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/news/tcl/news-procs-oracle.xql}
dbqd.news.tcl.news-procs.news_util_get_url.get_url_stub {dbqd.news.tcl.news-procs.news_util_get_url.get_url_stub {	    select site_node.url(node_id) as url_stub
            from site_nodes
            where object_id=:package_id      
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/news/tcl/news-procs-oracle.xql}
dbqd.news.tcl.news-procs.news__url.get_item_id {dbqd.news.tcl.news-procs.news__url.get_item_id {	select item_id
        from cr_revisions
        where revision_id=:object_id

      } {} {} {} F:/temp/openacs-4/packages/news/tcl/news-procs.xql}
dbqd.news.www.admin.approve-2.news_item_approve_publish {dbqd.news.www.admin.approve-2.news_item_approve_publish {	begin
        news.set_approve(
	    approve_p       => 't',
	    revision_id     => :id,
	    publish_date    => :publish_date_ansi,
            archive_date    => :archive_date_ansi,
            approval_user   => :approval_user,
            approval_date   => :approval_date,
            approval_ip     => :approval_ip,
            live_revision_p => :live_revision_p
         );
    end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/news/www/admin/approve-2-oracle.xql}
dbqd.news.www.admin.approve.week {dbqd.news.www.admin.approve.week {      select sysdate + [ad_parameter ActiveDays "news" 14] from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/news/www/admin/approve-oracle.xql}
dbqd.news.www.admin.approve.revision_select {dbqd.news.www.admin.approve.revision_select {    content_item.get_best_revision(item_id) as revision_id,

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/news/www/admin/approve-oracle.xql}
dbqd.news.www.admin.approve.item_list {dbqd.news.www.admin.approve.item_list {        select    
        item_id, 
        $revision_select
        publish_title,
        creation_date,
        item_creator
    from 
        news_items_live_or_submitted
    where 
        item_id in ([join $bind_id_list ","])
      } {} {} {} F:/temp/openacs-4/packages/news/www/admin/approve.xql}
dbqd.news.www.admin.index.itemlist {dbqd.news.www.admin.index.itemlist {select
    item_id,
    content_item.get_best_revision(item_id) as revision_id,
    content_revision.get_number(news_id) as revision_no,
    publish_title,
    html_p,
    publish_date,
    archive_date,
    creation_user,
    item_creator,
    package_id,
    status
from 
    news_items_live_or_submitted
where 
    package_id = :package_id    
    $view_option
order by item_id desc
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/news/www/admin/index-oracle.xql}
dbqd.news.www.admin.item.item_revs_list {dbqd.news.www.admin.item.item_revs_list {select 
    item_id,
    revision_id,
    live_revision as item_live_revision_id,
    publish_title,
    log_entry,
    package_id,
    approval_needed_p,
    creation_user,
    item_creator,
    status
from 
    news_item_revisions
where 
    item_id = :item_id
order by revision_id desc

      } {} {} {} F:/temp/openacs-4/packages/news/www/admin/item.xql}
dbqd.news.www.admin.process-2.archive_now {dbqd.news.www.admin.process-2.archive_now {      select sysdate from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/news/www/admin/process-2-oracle.xql}
dbqd.news.www.admin.process-2.archive_next_week {dbqd.news.www.admin.process-2.archive_next_week {      select next_day(sysdate,'Monday') from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/news/www/admin/process-2-oracle.xql}
dbqd.news.www.admin.process-2.archive_next_month {dbqd.news.www.admin.process-2.archive_next_month {      select last_day(sysdate)+1 from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/news/www/admin/process-2-oracle.xql}
dbqd.news.www.admin.process.item_list {dbqd.news.www.admin.process.item_list {    select
        item_id,
        content_item.get_best_revision(item_id) as revision_id,
        package_id,
        publish_title,
        creation_date,
        item_creator
    from 
        news_items_live_or_submitted
    where
        item_id in ([join  $bind_id_list ","])
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/news/www/admin/process-oracle.xql}
dbqd.news.www.admin.process.unapproved_list {dbqd.news.www.admin.process.unapproved_list {    select    
        item_id,
        publish_title,
        creation_date,
        item_creator
    from 
        news_items_unapproved
    where 
        item_id in ([join $bind_id_list ","])
      } {} {} {} F:/temp/openacs-4/packages/news/www/admin/process.xql}
dbqd.news.www.admin.revision-add-3.create_news_item_revision {dbqd.news.www.admin.revision-add-3.create_news_item_revision {    begin
        :1 := news.revision_new(
            item_id       => :item_id,
            publish_date  => :publish_date_ansi,
            title         => :publish_title,   
            description   => :revision_log,
            mime_type     => :mime_type,
            package_id    => [ad_conn package_id],
            archive_date  => :archive_date_ansi,
            approval_user => :approval_user,
            approval_date => :approval_date,
            approval_ip   => :approval_ip,
            creation_ip   => :creation_ip,
            creation_user => :creation_user,
            make_active_revision_p => :active_revision_p);
    end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/news/www/admin/revision-add-3-oracle.xql}
dbqd.news.www.admin.revision-add-3.content_add {dbqd.news.www.admin.revision-add-3.content_add {    update cr_revisions
    set    content = empty_blob()
    where  revision_id = :revision_id
    returning content into :1
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/news/www/admin/revision-add-3-oracle.xql}
dbqd.news.www.admin.revision-add.item {dbqd.news.www.admin.revision-add.item {select
    item_id, 
    package_id,   
    revision_id,
    publish_title,
    html_p,
    publish_date,
    NVL(archive_date, sysdate+[ad_parameter ActiveDays "news" 14]) as archive_date,
    status
from   
    news_item_full_active    
where  
    item_id = :item_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/news/www/admin/revision-add-oracle.xql}
dbqd.news.www.admin.revision-add.get_content {dbqd.news.www.admin.revision-add.get_content {      select  content
from    cr_revisions
where   revision_id = :revision_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/news/www/admin/revision-add-oracle.xql}
dbqd.news.www.admin.revision-add.news_item_info {dbqd.news.www.admin.revision-add.news_item_info {    select
        item_name,
        creator_id,
        item_creator
    from
        news_item_full_active
    where item_id = :item_id

      } {} {} {} F:/temp/openacs-4/packages/news/www/admin/revision-add.xql}
dbqd.news.www.admin.revision.one_item {dbqd.news.www.admin.revision.one_item {    select item_id,
           revision_id,
           content_revision.get_number(:revision_id) as revision_no,
           publish_title,
           html_p,
           publish_date,
           archive_date,
           creation_ip,
           creation_date,
           '<a href=/shared/community-member?user_id=' || creation_user || '>' || item_creator ||  '</a>' as creator_link
    from   news_item_revisions
    where  item_id = :item_id
    and    revision_id = :revision_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/news/www/admin/revision-oracle.xql}
dbqd.news.www.admin.revision.get_content {dbqd.news.www.admin.revision.get_content {      select  content
    from    cr_revisions
    where   revision_id = :revision_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/news/www/admin/revision-oracle.xql}
dbqd.news.www.admin.revision-set-active.update_forum {dbqd.news.www.admin.revision-set-active.update_forum {    begin
       news.revision_set_active (:new_rev_id);
    end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/news/www/admin/revision-set-active-oracle.xql}
dbqd.news.www.admin.revoke.news_item_revoke {dbqd.news.www.admin.revoke.news_item_revoke {    begin
        news.set_approve(
            approve_p    => 'f',
            revision_id  => :revision_id
        );
    end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/news/www/admin/revoke-oracle.xql}
dbqd.news.www.index.archived_p {dbqd.news.www.index.archived_p {    select case when count(*) = 0 then 0 else 1 end 
    from   news_items_approved
    where  publish_date < sysdate 
    and    archive_date < sysdate
    and    package_id = :package_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/news/www/index-oracle.xql}
dbqd.news.www.index.live_p {dbqd.news.www.index.live_p {    select case when count(*) = 0 then 0 else 1 end 
    from   news_items_approved
    where  publish_date < sysdate 
    and    (archive_date is null 
            or archive_date > sysdate) 
    and    package_id = :package_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/news/www/index-oracle.xql}
dbqd.news.www.index.view_clause_live {dbqd.news.www.index.view_clause_live {    publish_date < sysdate 
    and (archive_date is null or archive_date > sysdate)      
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/news/www/index-oracle.xql}
dbqd.news.www.index.view_clause_archived {dbqd.news.www.index.view_clause_archived {    publish_date < sysdate
    and archive_date < sysdate
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/news/www/index-oracle.xql}
dbqd.news.www.index.item_list {dbqd.news.www.index.item_list {select item_id,
       package_id,
       publish_title,
       publish_date
from   news_items_approved
where  $view_clause   
and    package_id = :package_id
order  by publish_date desc, item_id desc
      } {} {} {} F:/temp/openacs-4/packages/news/www/index.xql}
dbqd.news.www.item-create-3.create_news_item {dbqd.news.www.item-create-3.create_news_item {begin
:1 := news.new(
title           => :publish_title,
publish_date    => :publish_date_ansi, 
archive_date    => :archive_date_ansi,
mime_type       => :mime_type,        
package_id      => :package_id,       
approval_user   => :approval_user,     
approval_date   => :approval_date,      
approval_ip     => :approval_ip,   
creation_ip     => :creation_ip,    
creation_user   => :user_id,     
is_live_p       => :live_revision_p    
);
end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/news/www/item-create-3-oracle.xql}
dbqd.news.www.item-create-3.content_add {dbqd.news.www.item-create-3.content_add {update cr_revisions
set    content = empty_blob()
where  revision_id = :news_id
returning content into :1
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/news/www/item-create-3-oracle.xql}
dbqd.news.www.item-create.week {dbqd.news.www.item-create.week {      select sysdate + [ad_parameter ActiveDays "news" 14] from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/news/www/item-create-oracle.xql}
dbqd.news.www.item.one_item {dbqd.news.www.item.one_item {select item_id,
       live_revision,
       publish_title,
       html_p,
       publish_date,
       '<a href=/shared/community-member?user_id=' || creation_user || '>' || item_creator ||  '</a>' as creator_link
from   news_items_live_or_submitted
where  item_id = :item_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/news/www/item-oracle.xql}
dbqd.news.www.item.get_content {dbqd.news.www.item.get_content {      select  content
    from    cr_revisions
    where   revision_id = :live_revision
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/news/www/item-oracle.xql}
dbqd.news.www.preview.creator {dbqd.news.www.preview.creator {select first_names || ' ' || last_name 
from   cc_users 
where  user_id = :user_id
      } {} {} {} F:/temp/openacs-4/packages/news/www/preview.xql}
dbqd.notes.www.add-edit.new_note {dbqd.notes.www.add-edit.new_note {      declare
        id integer;
      begin
        id := note.new(
          owner_id => :user_id,
          title => :title,
          body => :body,
          creation_user => :user_id,
          creation_ip => :peeraddr,
          context_id => :package_id
        );
	  end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/notes/www/add-edit-oracle.xql}
dbqd.notes.www.add-edit.note_select {dbqd.notes.www.add-edit.note_select {    select title, body
    from notes
    where note_id = :note_id
  
      } {} {} {} F:/temp/openacs-4/packages/notes/www/add-edit.xql}
dbqd.notes.www.add-edit.note_update {dbqd.notes.www.add-edit.note_update {      update notes
      set title = :title,
          body = :body
      where note_id = :note_id
    
      } {} {} {} F:/temp/openacs-4/packages/notes/www/add-edit.xql}
dbqd.notes.www.delete.note_delete {dbqd.notes.www.delete.note_delete {  begin
    note.delete(:note_id);
  end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/notes/www/delete-oracle.xql}
dbqd.notes.www.index.notes {dbqd.notes.www.index.notes {  select note_id, owner_id, title, body,
         decode(acs_permission.permission_p(note_id,
                                            :user_id,
                                            'write'),
                't', 1,
                'f', 0) as write_p,
         decode(acs_permission.permission_p(note_id,
                                            :user_id,
                                            'admin'),
                't', 1,
                'f', 0) as admin_p,
         decode(acs_permission.permission_p(note_id,
                                            :user_id,
                                            'delete'),
                't', 1,
                'f', 0) as delete_p
  from notes n, acs_objects o
  where n.note_id = o.object_id
  and o.context_id = :package_id
  and acs_permission.permission_p(note_id, :user_id, 'read') = 't'
  order by creation_date

      } {} {} {} F:/temp/openacs-4/packages/notes/www/index-oracle.xql}
dbqd.photo-album.tcl.photo-album-procs.pa_get_root_folder_internal.pa_root_folder {dbqd.photo-album.tcl.photo-album-procs.pa_get_root_folder_internal.pa_root_folder {      select photo_album.get_root_folder(:package_id) from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/photo-album/tcl/photo-album-procs-oracle.xql}
dbqd.photo-album.tcl.photo-album-procs.pa_new_root_folder.make_new_root {dbqd.photo-album.tcl.photo-album-procs.pa_new_root_folder.make_new_root {       begin
	:1 := photo_album.new_root_folder(:package_id);
       end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/photo-album/tcl/photo-album-procs-oracle.xql}
dbqd.photo-album.tcl.photo-album-procs.pa_new_root_folder.get_grantee_id {dbqd.photo-album.tcl.photo-album-procs.pa_new_root_folder.get_grantee_id {      select acs.magic_object_id('$party') from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/photo-album/tcl/photo-album-procs-oracle.xql}
dbqd.photo-album.tcl.photo-album-procs.pa_new_root_folder.grant_default {dbqd.photo-album.tcl.photo-album-procs.pa_new_root_folder.grant_default {		begin
		  acs_permission.grant_permission (
	            object_id  => :new_folder_id,
	            grantee_id => :grantee_id,
	            privilege  => :privilege
		  );
		end;
	    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/photo-album/tcl/photo-album-procs-oracle.xql}
dbqd.photo-album.tcl.photo-album-procs.pa_get_folder_name.folder_name {dbqd.photo-album.tcl.photo-album-procs.pa_get_folder_name.folder_name {    select content_folder.get_label(:folder_id) from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/photo-album/tcl/photo-album-procs-oracle.xql}
dbqd.photo-album.tcl.photo-album-procs.pa_context_bar_list.get_start_and_final {dbqd.photo-album.tcl.photo-album-procs.pa_context_bar_list.get_start_and_final {      select parent_id as start_id,
	  content_item.get_title(item_id,'t') as final
	  from cr_items where item_id = :item_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/photo-album/tcl/photo-album-procs-oracle.xql}
dbqd.photo-album.tcl.photo-album-procs.pa_context_bar_list.context_bar {dbqd.photo-album.tcl.photo-album-procs.pa_context_bar_list.context_bar {    select decode(
             content_item.get_content_type(i.item_id),
             'content_folder',
             'index?folder_id=',
             'pa_album',             
             'album?album_id=',
             'photo?photo_id='
           ) || i.item_id,
           content_item.get_title(i.item_id,'t')
    from   cr_items i
    connect by prior i.parent_id = i.item_id
      and i.item_id != :root_folder_id
    start with item_id = :start_id
    order by level desc
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/photo-album/tcl/photo-album-procs-oracle.xql}
dbqd.photo-album.tcl.photo-album-procs.pa_is_type_in_package.check_is_type_in_package {dbqd.photo-album.tcl.photo-album-procs.pa_is_type_in_package.check_is_type_in_package {      select case when (select 1 
	from dual
	where exists (select 1 
	    from cr_items 
	    where item_id = :root_folder 
	    connect by prior parent_id = item_id 
	    start with item_id = :item_id)
	  and content_item.get_content_type(:item_id) = :content_type
	) = 1 then 't' else 'f' end
	from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/photo-album/tcl/photo-album-procs-oracle.xql}
dbqd.photo-album.tcl.photo-album-procs.pa_grant_privilege_to_creator.grant_privilege {dbqd.photo-album.tcl.photo-album-procs.pa_grant_privilege_to_creator.grant_privilege {	    begin
	      acs_permission.grant_permission (
	        object_id  => :object_id,
	        grantee_id => :user_id,
	        privilege  => :privilege
	      );
	    end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/photo-album/tcl/photo-album-procs-oracle.xql}
dbqd.photo-album.tcl.photo-album-procs.pa_get_folder_description.folder_description {dbqd.photo-album.tcl.photo-album-procs.pa_get_folder_description.folder_description {    select description from cr_folders where folder_id = :folder_id
      } {} {} {} F:/temp/openacs-4/packages/photo-album/tcl/photo-album-procs.xql}
dbqd.photo-album.tcl.photo-album-procs.pa_all_photos_in_album_internal.get_photo_ids {dbqd.photo-album.tcl.photo-album-procs.pa_all_photos_in_album_internal.get_photo_ids {      select 
  ci.item_id
from cr_items ci,
  cr_child_rels ccr
where ci.live_revision is not null
  and ci.content_type = 'pa_photo'
  and ccr.parent_id = :album_id
  and ci.item_id = ccr.child_id
order by ccr.order_n
      } {} {} {} F:/temp/openacs-4/packages/photo-album/tcl/photo-album-procs.xql}
dbqd.photo-album.tcl.photo-album-procs.pa_pagination_get_total_pages.get_total_pages {dbqd.photo-album.tcl.photo-album-procs.pa_pagination_get_total_pages.get_total_pages {	select 
	ceil(count(*) / [ad_parameter ThumbnailsPerPage])
	from
	($sql)
	
      } {} {} {} F:/temp/openacs-4/packages/photo-album/tcl/photo-album-procs.xql}
dbqd.photo-album.www.album-add.new_album {dbqd.photo-album.www.album-add.new_album {	    begin
	    :1 := pa_album.new (
	      name           => :name,
	      album_id       => :album_id,
	      parent_id	     => :parent_id,
      	      is_live	     => 't',
	      creation_user  => :user_id,
	      creation_ip    => :peeraddr,
	      title	     => :title,
	      description    => :description,
	      story	     => :story
	    );
	    end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/photo-album/www/album-add-oracle.xql}
dbqd.photo-album.www.album-add.duplicate_check {dbqd.photo-album.www.album-add.duplicate_check {	  select count(*)
	  from   cr_items
	  where  (item_id = :album_id or name = :name)
	  and    parent_id = :parent_id
      } {} {} {} F:/temp/openacs-4/packages/photo-album/www/album-add.xql}
dbqd.photo-album.www.album-delete.album_delete {dbqd.photo-album.www.album-delete.album_delete {    begin
        pa_album.delete(:album_id);
    end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/photo-album/www/album-delete-oracle.xql}
dbqd.photo-album.www.album-delete.album_name {dbqd.photo-album.www.album-delete.album_name {    select content_item.get_title(:album_id,'t') from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/photo-album/www/album-delete-oracle.xql}
dbqd.photo-album.www.album-delete.get_parent {dbqd.photo-album.www.album-delete.get_parent {      select parent_id from cr_items where item_id = :album_id
      } {} {} {} F:/temp/openacs-4/packages/photo-album/www/album-delete.xql}
dbqd.photo-album.www.album-edit.update_album_attributes {dbqd.photo-album.www.album-edit.update_album_attributes {	    declare
	      dummy integer;
	    begin

	    dummy := content_revision.new (
	      title         => :new_title,
	      description   => :new_desc,
	      item_id       => :album_id,
	      revision_id   => :revision_id,
	      creation_date => sysdate,
	      creation_user => :user_id,
	      creation_ip   => :peeraddr
	    );
	    end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/photo-album/www/album-edit-oracle.xql}
dbqd.photo-album.www.album-edit.set_live_album {dbqd.photo-album.www.album-edit.set_live_album {      begin	
	    content_item.set_live_revision (
	      revision_id => :revision_id
	    );
      end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/photo-album/www/album-edit-oracle.xql}
dbqd.photo-album.www.album-edit.get_album_info {dbqd.photo-album.www.album-edit.get_album_info {    select 
      cr.title,
      cr. description,
      pa.story,
      ci.live_revision as previous_revision
    from cr_items ci,
      cr_revisions cr,
      pa_albums pa
    where ci.live_revision = cr.revision_id
      and cr.revision_id = pa.pa_album_id
      and ci.item_id = :album_id

      } {} {} {} F:/temp/openacs-4/packages/photo-album/www/album-edit.xql}
dbqd.photo-album.www.album-edit.insert_pa_albums {dbqd.photo-album.www.album-edit.insert_pa_albums {      insert into pa_albums (pa_album_id, story)
      values 
      (:revision_id, :new_story)
      } {} {} {} F:/temp/openacs-4/packages/photo-album/www/album-edit.xql}
dbqd.photo-album.www.album-move.get_album_info {dbqd.photo-album.www.album-move.get_album_info {      select title, description, story from pa_albumsx where object_id = content_item.get_live_revision(:album_id)
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/photo-album/www/album-move-oracle.xql}
dbqd.photo-album.www.album-move.get_folders {dbqd.photo-album.www.album-move.get_folders {      select 
    lpad ('&nbsp;&nbsp;&nbsp;',((level - 1) * 18),'&nbsp;&nbsp;&nbsp;') || content_folder.get_label(ci.item_id) as padded_name,
    ci.item_id as folder_id
    from cr_items ci
    where ci.content_type = 'content_folder'
      -- do not include the albums current folder in move to list
      and ci.item_id != :old_folder_id
      and acs_permission.permission_p(ci.item_id, :user_id, 'pa_create_album') = 't'
    connect by prior ci.item_id = ci.parent_id
    start with ci.item_id = :root_folder_id
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/photo-album/www/album-move-oracle.xql}
dbqd.photo-album.www.album-move.album_move {dbqd.photo-album.www.album-move.album_move {	begin 
	content_item.move (
	  item_id           => :album_id,
	  target_folder_id  => :new_folder_id
	);
	end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/photo-album/www/album-move-oracle.xql}
dbqd.photo-album.www.album-move.get_parent_folder {dbqd.photo-album.www.album-move.get_parent_folder {      select parent_id from cr_items where item_id = :album_id
      } {} {} {} F:/temp/openacs-4/packages/photo-album/www/album-move.xql}
dbqd.photo-album.www.album-move.context_update {dbqd.photo-album.www.album-move.context_update {	update acs_objects
	set    context_id = :new_folder_id
	where  object_id = :album_id
	
      } {} {} {} F:/temp/openacs-4/packages/photo-album/www/album-move.xql}
dbqd.photo-album.www.album-move.folder_name {dbqd.photo-album.www.album-move.folder_name {	select name from cr_items where item_id = :album_id
      } {} {} {} F:/temp/openacs-4/packages/photo-album/www/album-move.xql}
dbqd.photo-album.www.album-move.duplicate_check {dbqd.photo-album.www.album-move.duplicate_check {	select count(*)
	from   cr_items
	where  name = :folder_name
	and    parent_id = :new_folder_id
      } {} {} {} F:/temp/openacs-4/packages/photo-album/www/album-move.xql}
dbqd.photo-album.www.album.get_album_info {dbqd.photo-album.www.album.get_album_info {select cr.title,
  cr.description,
  pa.story,
  ci.parent_id as parent_folder_id,
  decode(acs_permission.permission_p(ci.item_id, :user_id, 'admin'),'t',1,0) as admin_p,
  decode(acs_permission.permission_p(ci.item_id, :user_id, 'pa_create_photo'),'t',1,0) as photo_p,
  decode(acs_permission.permission_p(ci.item_id, :user_id, 'write'),'t',1,0) as write_p,
  decode(acs_permission.permission_p(ci.parent_id, :user_id, 'write'),'t',1,0) as folder_write_p,
  decode(acs_permission.permission_p(ci.item_id, :user_id, 'delete'),'t',1,0) as album_delete_p
from cr_items ci,
  cr_revisions cr,
  pa_albums pa
where ci.live_revision = cr.revision_id
  and ci.live_revision = pa_album_id
  and ci.item_id = :album_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/photo-album/www/album-oracle.xql}
dbqd.photo-album.www.album.get_child_photos {dbqd.photo-album.www.album.get_child_photos {      select ci.item_id as photo_id,
      (select pp.caption from pa_photos pp where pp.pa_photo_id = ci.live_revision) as caption,
      i.image_id as thumb_path,
      i.height as thumb_height,
      i.width as thumb_width
    from cr_items ci,
      cr_items ci2,
      cr_child_rels ccr2,
      imagesx i
    where ccr2.relation_tag = 'thumb'
      and ci.item_id = ccr2.parent_id
      and ccr2.child_id = ci2.item_id
      and ci2.live_revision = i.image_id
      and ci.item_id in ([join $photos_on_page ","])
      } {} {} {} F:/temp/openacs-4/packages/photo-album/www/album.xql}
dbqd.photo-album.www.base-photo.get_photo_info {dbqd.photo-album.www.base-photo.get_photo_info {      select
 pp.caption,
 pp.story,
 cr.title,
 cr.description,
 i.height as height,
 i.width as width,
 i.image_id as image_id,
 ci.parent_id as album_id
from cr_items ci,
  cr_revisions cr,
  pa_photos pp,
  cr_items ci2,
  cr_child_rels ccr2,
  images i
where cr.revision_id = pp.pa_photo_id
  and ci.live_revision = cr.revision_id
  and ci.item_id = ccr2.parent_id
  and ccr2.child_id = ci2.item_id
  and ccr2.relation_tag = 'base'
  and ci2.live_revision = i.image_id
  and ci.item_id = :photo_id

      } {} {} {} F:/temp/openacs-4/packages/photo-album/www/base-photo.xql}
dbqd.photo-album.www.folder-add.new_folder {dbqd.photo-album.www.folder-add.new_folder {	    declare
	      fldr_id    integer;
	    begin
	    
	    fldr_id :=content_folder.new (
	      name          => :name,
              label         => :label,
              description   => :description,
              parent_id     => :parent_id,
              folder_id     => :folder_id,
              creation_date => sysdate,
              creation_user => :user_id,
              creation_ip   => :peeraddr
	    );

	    -- content_folder.new automatically registers 
	    -- the content_types of the parent to the new folder
	
	    end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/photo-album/www/folder-add-oracle.xql}
dbqd.photo-album.www.folder-add.duplicate_check {dbqd.photo-album.www.folder-add.duplicate_check {	  select count(*)
	  from   cr_items
	  where  (item_id = :folder_id or name = :name)
	  and    parent_id = :parent_id
      } {} {} {} F:/temp/openacs-4/packages/photo-album/www/folder-add.xql}
dbqd.photo-album.www.folder-delete.folder_delete {dbqd.photo-album.www.folder-delete.folder_delete {    begin
        content_folder.delete(:folder_id);
    end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/photo-album/www/folder-delete-oracle.xql}
dbqd.photo-album.www.folder-delete.child_count {dbqd.photo-album.www.folder-delete.child_count {	select count(*) from cr_items where parent_id = :folder_id
      } {} {} {} F:/temp/openacs-4/packages/photo-album/www/folder-delete.xql}
dbqd.photo-album.www.folder-delete.get_parent {dbqd.photo-album.www.folder-delete.get_parent {      select parent_id from cr_items where item_id = :folder_id
      } {} {} {} F:/temp/openacs-4/packages/photo-album/www/folder-delete.xql}
dbqd.photo-album.www.folder-delete.folder_name {dbqd.photo-album.www.folder-delete.folder_name {    select label from cr_folders where folder_id = :folder_id
      } {} {} {} F:/temp/openacs-4/packages/photo-album/www/folder-delete.xql}
dbqd.photo-album.www.folder-edit.edit_folder {dbqd.photo-album.www.folder-edit.edit_folder {	    begin
	    content_folder.rename (
            folder_id  => :folder_id,
            label => :label,
            description  => :description
	    );
	    end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/photo-album/www/folder-edit-oracle.xql}
dbqd.photo-album.www.folder-move.get_folder_info {dbqd.photo-album.www.folder-move.get_folder_info {      select content_folder.get_label(:folder_id) as title from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/photo-album/www/folder-move-oracle.xql}
dbqd.photo-album.www.folder-move.get_folders {dbqd.photo-album.www.folder-move.get_folders {      select padded_name, folder_id from (select
    ci.item_id,
    lpad ('&nbsp;&nbsp;&nbsp;',((level - 1) * 18),'&nbsp;&nbsp;&nbsp;') || content_folder.get_label(ci.item_id) as padded_name,
    ci.item_id as folder_id
    from cr_items ci
    where ci.content_type = 'content_folder'
    start with ci.item_id = :root_folder_id
    connect by prior ci.item_id = ci.parent_id
      and ci.item_id != :folder_id
    )
    where acs_permission.permission_p(item_id, :user_id, 'pa_create_folder') = 't'
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/photo-album/www/folder-move-oracle.xql}
dbqd.photo-album.www.folder-move.folder_move {dbqd.photo-album.www.folder-move.folder_move {	begin 
	content_folder.move (
	  folder_id           => :folder_id,
	  target_folder_id  => :new_folder_id
	);
	end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/photo-album/www/folder-move-oracle.xql}
dbqd.photo-album.www.folder-move.get_parent_folder {dbqd.photo-album.www.folder-move.get_parent_folder {      select parent_id from cr_items where item_id = :folder_id
      } {} {} {} F:/temp/openacs-4/packages/photo-album/www/folder-move.xql}
dbqd.photo-album.www.folder-move.context_update {dbqd.photo-album.www.folder-move.context_update {	update acs_objects
	set    context_id = :new_folder_id
	where  object_id = :folder_id
	
      } {} {} {} F:/temp/openacs-4/packages/photo-album/www/folder-move.xql}
dbqd.photo-album.www.folder-move.folder_name {dbqd.photo-album.www.folder-move.folder_name {	select name from cr_items where item_id = :folder_id
      } {} {} {} F:/temp/openacs-4/packages/photo-album/www/folder-move.xql}
dbqd.photo-album.www.folder-move.duplicate_check {dbqd.photo-album.www.folder-move.duplicate_check {	select count(*)
	from   cr_items
	where  name = :folder_name
	and    parent_id = :new_folder_id
      } {} {} {} F:/temp/openacs-4/packages/photo-album/www/folder-move.xql}
dbqd.photo-album.www.index.get_folder_info {dbqd.photo-album.www.index.get_folder_info {    select 
      cf.label as folder_name,
      cf.description as folder_description,
      decode(acs_permission.permission_p(cf.folder_id, :user_id, 'admin'),'t',1,0) as admin_p,
      decode(acs_permission.permission_p(cf.folder_id, :user_id, 'pa_create_folder'),'t',1,0) as subfolder_p,
      decode(acs_permission.permission_p(cf.folder_id, :user_id, 'pa_create_album'),'t',1,0) as album_p,
      decode(acs_permission.permission_p(cf.folder_id, :user_id, 'write'),'t',1,0) as write_p,
      decode(acs_permission.permission_p(ci.parent_id, :user_id, 'write'),'t',1,0) as parent_folder_write_p,
      (select count(*) from dual where exists (select 1 from cr_items ci2 where ci2.parent_id = cf.folder_id)) as has_children_p,
      decode(acs_permission.permission_p(cf.folder_id, :user_id, 'delete'),'t',1,0) as folder_delete_p
    from cr_folders cf,
      cr_items ci 
    where ci.item_id = cf.folder_id
      and ci.item_id = :folder_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/photo-album/www/index-oracle.xql}
dbqd.photo-album.www.index.get_children {dbqd.photo-album.www.index.get_children {    select * from (
      select i.item_id,
        r.title as name,
        r.description,
        'Album' as type,
        1 as ordering_key
      from   cr_items i,
        cr_revisions r
      where i.content_type = 'pa_album'
        and i.parent_id     = :folder_id
        and i.live_revision = r.revision_id
      UNION ALL
      select i.item_id,
        f.label as name,
        f.description,
        'Folder',
        0
      from cr_items i,
        cr_folders f
      where i.parent_id = :folder_id      
        and i.item_id = f.folder_id
      )
    where acs_permission.permission_p(item_id, :user_id, 'read') = 't'
    order by ordering_key,name
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/photo-album/www/index-oracle.xql}
dbqd.photo-album.www.photo-add-2.insert_photo {dbqd.photo-album.www.photo-add-2.insert_photo {	declare 
	  dummy  integer;
	begin

	dummy := pa_photo.new (
	  name            => :client_filename,
	  parent_id       => :album_id,
	  item_id         => :photo_id,
	  revision_id     => :photo_rev_id,
	  creation_date   => sysdate,
	  creation_user   => :user_id,
	  creation_ip     => :peeraddr,
	  context_id      => :album_id,
	  title           => :client_filename,
	  description     => :description,
	  is_live         => 't',
	  caption         => :caption,
	  story           => :story,
	  user_filename   => :client_filename
	);
	
	end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/photo-album/www/photo-add-2-oracle.xql}
dbqd.photo-album.www.photo-add-2.insert_base_image {dbqd.photo-album.www.photo-add-2.insert_base_image {	declare 
	  dummy  integer;
	begin
	dummy := image.new (
	  name            => 'base_' || :client_filename,
	  parent_id       => :photo_id,
	  item_id         => :base_item_id,
	  revision_id     => :base_rev_id,
	  creation_date   => sysdate,
	  creation_user   => :user_id,
	  creation_ip     => :peeraddr,
	  context_id      => :photo_id,
	  title           => :client_filename,
	  description     => :description,
	  mime_type       => :base_mime_type,
	  relation_tag    => 'base',
	  is_live         => 't',
	  filename        => :base_filename_with_rel_path,
	  height          => :base_height,
	  width           => :base_width,
	  file_size       => :base_n_bytes
	);
	
	end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/photo-album/www/photo-add-2-oracle.xql}
dbqd.photo-album.www.photo-add-2.insert_thumb_image {dbqd.photo-album.www.photo-add-2.insert_thumb_image {	declare 
	  dummy  integer;
	begin

	dummy := image.new (
	  name            => 'th_' || :client_filename,
	  parent_id       => :photo_id,
	  item_id         => :thumb_item_id,
	  revision_id     => :thumb_rev_id,
	  creation_date   => sysdate,
	  creation_user   => :user_id,
	  creation_ip     => :peeraddr,
	  context_id      => :photo_id,
	  title           => :client_filename,
	  description     => :description,
	  mime_type       => :thumb_mime_type,
	  relation_tag    => 'thumb',
	  is_live         => 't',
	  filename        => :thumb_filename_with_rel_path,
	  height          => :thumb_height,
	  width           => :thumb_width,
	  file_size       => :thumb_n_bytes
	);

	
	end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/photo-album/www/photo-add-2-oracle.xql}
dbqd.photo-album.www.photo-add-2.insert_viewer_image {dbqd.photo-album.www.photo-add-2.insert_viewer_image {	declare 
	  dummy  integer;
	begin

	dummy := image.new (
	  name            => 'vw_' || :client_filename,
	  parent_id       => :photo_id,
	  item_id         => :viewer_item_id,
	  revision_id     => :viewer_rev_id,
	  creation_date   => sysdate,
	  creation_user   => :user_id,
	  creation_ip     => :peeraddr,
	  context_id      => :photo_id,
	  title           => :client_filename,
	  description     => :description,
	  mime_type       => :viewer_mime_type,
	  relation_tag    => 'viewer',
	  is_live         => 't',
	  filename        => :viewer_filename_with_rel_path,
	  height          => :viewer_height,
	  width           => :viewer_width,
	  file_size       => :viewer_n_bytes
	);
	
	end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/photo-album/www/photo-add-2-oracle.xql}
dbqd.photo-album.www.photo-add-2.check_photo_id {dbqd.photo-album.www.photo-add-2.check_photo_id {      select count(*) from cr_items where item_id = :photo_id
      } {} {} {} F:/temp/openacs-4/packages/photo-album/www/photo-add-2.xql}
dbqd.photo-album.www.photo-add-2.duplicate_check {dbqd.photo-album.www.photo-add-2.duplicate_check {    select count(*)
    from   cr_items
    where  (item_id = :photo_id or name = :client_filename)
    and    parent_id = :album_id
      } {} {} {} F:/temp/openacs-4/packages/photo-album/www/photo-add-2.xql}
dbqd.photo-album.www.photo-add.get_next_object_id {dbqd.photo-album.www.photo-add.get_next_object_id {      select acs_object_id_seq.nextval from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/photo-album/www/photo-add-oracle.xql}
dbqd.photo-album.www.photo-delete.drop_pa_image {dbqd.photo-album.www.photo-delete.drop_pa_image {	begin
	pa_photo.delete (:photo_id);
	end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/photo-album/www/photo-delete-oracle.xql}
dbqd.photo-album.www.photo-delete.get_parent_album {dbqd.photo-album.www.photo-delete.get_parent_album {      select parent_id from cr_items where item_id = :photo_id
      } {} {} {} F:/temp/openacs-4/packages/photo-album/www/photo-delete.xql}
dbqd.photo-album.www.photo-delete.get_photo_info {dbqd.photo-album.www.photo-delete.get_photo_info {      select 
      cr.title,
      i.height as height,
      i.width as width,
      i.image_id as image_id
    from cr_items ci,
      cr_revisions cr,
      cr_items ci2,
      cr_child_rels ccr2,
      images i
    where ci.live_revision = cr.revision_id
      and ci.item_id = ccr2.parent_id
      and ccr2.child_id = ci2.item_id
      and ccr2.relation_tag = 'thumb'
      and ci2.live_revision = i.image_id
      and ci.item_id = :photo_id
     
      } {} {} {} F:/temp/openacs-4/packages/photo-album/www/photo-delete.xql}
dbqd.photo-album.www.photo-edit.get_next_object_id {dbqd.photo-album.www.photo-edit.get_next_object_id {      select acs_object_id_seq.nextval from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/photo-album/www/photo-edit-oracle.xql}
dbqd.photo-album.www.photo-edit.update_photo_attributes {dbqd.photo-album.www.photo-edit.update_photo_attributes {	    declare
	      dummy integer;
	    begin

	    dummy := content_revision.new (
	      title => :new_title,
  	      description => :new_desc,
	      item_id => :photo_id,
	      revision_id => :revision_id,
	      creation_date => sysdate,
	      creation_user => :user_id,
	      creation_ip => :peeraddr
	    );
	    end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/photo-album/www/photo-edit-oracle.xql}
dbqd.photo-album.www.photo-edit.update_photo_user_filename {dbqd.photo-album.www.photo-edit.update_photo_user_filename {	    update pa_photos
	    set (user_filename) = (select user_filename
	      from pa_photos 
	      where pa_photo_id = :previous_revision)
	    where pa_photo_id = :revision_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/photo-album/www/photo-edit-oracle.xql}
dbqd.photo-album.www.photo-edit.set_live_revision {dbqd.photo-album.www.photo-edit.set_live_revision {            begin	
	    content_item.set_live_revision (
	      revision_id => :revision_id
            );

	    end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/photo-album/www/photo-edit-oracle.xql}
dbqd.photo-album.www.photo-edit.get_photo_info {dbqd.photo-album.www.photo-edit.get_photo_info {      select 
      ci.live_revision as previous_revision,
      pp.caption,
      pp.story,
      cr.title,
      cr.description,
      i.height as height,
      i.width as width,
      i.image_id as image_id
    from cr_items ci,
      cr_revisions cr,
      pa_photos pp,
      cr_items ci2,
      cr_child_rels ccr2,
      images i
    where ci.live_revision = pp.pa_photo_id
      and ci.live_revision = cr.revision_id
      and ci.item_id = ccr2.parent_id
      and ccr2.child_id = ci2.item_id
      and ccr2.relation_tag = 'thumb'
      and ci2.live_revision = i.image_id
      and ci.item_id = :photo_id

      } {} {} {} F:/temp/openacs-4/packages/photo-album/www/photo-edit.xql}
dbqd.photo-album.www.photo-edit.insert_photo_attributes {dbqd.photo-album.www.photo-edit.insert_photo_attributes {	    insert into pa_photos (pa_photo_id, story, caption)
	    values 
	    (:revision_id, :new_story, :new_caption)
      } {} {} {} F:/temp/openacs-4/packages/photo-album/www/photo-edit.xql}
dbqd.photo-album.www.photo-move.get_albums {dbqd.photo-album.www.photo-move.get_albums {      select r.title as name, i.item_id
    from cr_items i, cr_revisions r
    where i.live_revision = r.revision_id
      and i.parent_id = (select parent_id from cr_items where item_id = :old_album_id)
      and acs_permission.permission_p(i.item_id, :user_id, 'read') = 't'
      and i.content_type = 'pa_album'
      and i.item_id != :old_album_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/photo-album/www/photo-move-oracle.xql}
dbqd.photo-album.www.photo-move.get_parent_album {dbqd.photo-album.www.photo-move.get_parent_album {      select parent_id from cr_items where item_id = :photo_id
      } {} {} {} F:/temp/openacs-4/packages/photo-album/www/photo-move.xql}
dbqd.photo-album.www.photo-move.get_photo_info {dbqd.photo-album.www.photo-move.get_photo_info {      select 
      cr.title,
      i.height as height,
      i.width as width,
      i.image_id as image_id
    from cr_items ci,
      cr_revisions cr,
      cr_items ci2,
      cr_child_rels ccr2,
      images i
    where ci.live_revision = cr.revision_id
      and ci.item_id = ccr2.parent_id
      and ccr2.child_id = ci2.item_id
      and ccr2.relation_tag = 'thumb'
      and ci2.live_revision = i.image_id
      and ci.item_id = :photo_id

      } {} {} {} F:/temp/openacs-4/packages/photo-album/www/photo-move.xql}
dbqd.photo-album.www.photo-move.photo_move {dbqd.photo-album.www.photo-move.photo_move {	update cr_items
	set parent_id = :new_album_id
	where item_id = :photo_id
	
      } {} {} {} F:/temp/openacs-4/packages/photo-album/www/photo-move.xql}
dbqd.photo-album.www.photo-move.photo_move2 {dbqd.photo-album.www.photo-move.photo_move2 {	update cr_child_rels 
	set parent_id = :new_album_id
	where parent_id = :old_album_id
	  and child_id = :photo_id
	
      } {} {} {} F:/temp/openacs-4/packages/photo-album/www/photo-move.xql}
dbqd.photo-album.www.photo-move.context_update {dbqd.photo-album.www.photo-move.context_update {	update acs_objects
	set    context_id = :new_album_id
	where  object_id = :photo_id
	
      } {} {} {} F:/temp/openacs-4/packages/photo-album/www/photo-move.xql}
dbqd.photo-album.www.photo-move.filename {dbqd.photo-album.www.photo-move.filename {	select name from cr_items where item_id = :photo_id
      } {} {} {} F:/temp/openacs-4/packages/photo-album/www/photo-move.xql}
dbqd.photo-album.www.photo-move.duplicate_check {dbqd.photo-album.www.photo-move.duplicate_check {	select count(*)
	from   cr_items
	where  name = :filename
	and    parent_id = :new_album_id
      } {} {} {} F:/temp/openacs-4/packages/photo-album/www/photo-move.xql}
dbqd.photo-album.www.photo.get_photo_info {dbqd.photo-album.www.photo.get_photo_info {      select
 pp.caption,
 pp.story,
 cr.title,
 cr.description,
 i.height as height,
 i.width as width,
 i.image_id as image_id,
 ci.parent_id as album_id,
 decode(acs_permission.permission_p(ci.item_id, :user_id, 'admin'),'t',1,0) as admin_p,
 decode(acs_permission.permission_p(ci.item_id, :user_id, 'write'),'t',1,0) as write_p,
 decode(acs_permission.permission_p(ci.parent_id, :user_id, 'write'),'t',1,0) as album_write_p,
 decode(acs_permission.permission_p(ci.item_id, :user_id, 'delete'),'t',1,0) as photo_delete_p
from cr_items ci,
  cr_revisions cr,
  pa_photos pp,
  cr_items ci2,
  cr_child_rels ccr2,
  images i
where cr.revision_id = pp.pa_photo_id
  and ci.live_revision = cr.revision_id
  and ci.item_id = ccr2.parent_id
  and ccr2.child_id = ci2.item_id
  and ccr2.relation_tag = 'viewer'
  and ci2.live_revision = i.image_id
  and ci.item_id = :photo_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/photo-album/www/photo-oracle.xql}
dbqd.portal.tcl.portal-procs.portal_get_element_data.select_element_data {dbqd.portal.tcl.portal-procs.portal_get_element_data.select_element_data {	select
	element_id,
	name,
	datasource_id,
	template_id,
	description,
	config_id,
	exportable_p,
	filename,
	decode(acs_permission.permission_p(element_id, :user_id, 'read'), 't', 1, 'f', 0) as element_read_p,
	decode(acs_permission.permission_p(template_id, :user_id, 'read'), 't', 1, 'f', 0) as template_read_p
	from portal_elem_tmpl
	where
	element_id = :element_id 
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/portal/tcl/portal-procs-oracle.xql}
dbqd.portal.tcl.portal-procs.portal_get_element_parameters.select_element_params {dbqd.portal.tcl.portal-procs.portal_get_element_parameters.select_element_params {    select key, value
    from portal_element_parameters
    where
      config_id = :config_id and
      acs_permission.permission_p(config_id, :user_id, 'read') = 't'
    order by key
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/portal/tcl/portal-procs-oracle.xql}
dbqd.portal.tcl.portal-procs.portal_get_datasource.select_datasource_data {dbqd.portal.tcl.portal-procs.portal_get_datasource.select_datasource_data {	select
        datasource_id,
        name,
        description,
        content,
        mime_type,
        data_type,
        default_config_id,
	decode(acs_permission.permission_p(datasource_id, :user_id, 'read'), 't', 1, 'f', 0) as datasource_read_p
	from portal_datasources
	where datasource_id = :datasource_id 
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/portal/tcl/portal-procs-oracle.xql}
dbqd.portal.tcl.portal-procs.portal_get_elements.select_p_e_map {dbqd.portal.tcl.portal-procs.portal_get_elements.select_p_e_map {    select m.element_id, m.region, m.sort_key
    from portal_element_map m
    where m.portal_id = :portal_id and
    acs_permission.permission_p(m.element_id, :user_id, 'read') = 't'
    order by region, sort_key, element_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/portal/tcl/portal-procs-oracle.xql}
dbqd.portal.tcl.portal-procs.portal_info.get_parent {dbqd.portal.tcl.portal-procs.portal_info.get_parent {      select portal.parent(default_portal_id) as info_value
                 from (
                   select portal_id as default_portal_id
                   from portals
                   where package_id = :package_id and owner_id is null
                 )
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/portal/tcl/portal-procs-oracle.xql}
dbqd.portal.tcl.portal-procs.portal_get_regions.get_regions {dbqd.portal.tcl.portal-procs.portal_get_regions.get_regions {	    select
	    region,
	    decode(immutable_p, 't', 1, 'f', 0) as immutable_p
	    from portal_supported_regions
	    where template_id = :template_id
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/portal/tcl/portal-procs-oracle.xql}
dbqd.portal.tcl.portal-procs.portal_data_type.select_data_type {dbqd.portal.tcl.portal-procs.portal_data_type.select_data_type {      select pretty_name as data_type_pretty, secure_p, sort_key as data_type_sort_key
                 from portal_data_types
                 where name = :name
      } {} {} {} F:/temp/openacs-4/packages/portal/tcl/portal-procs.xql}
dbqd.portal.tcl.portal-procs.portal_data_type.select_mime_type {dbqd.portal.tcl.portal-procs.portal_data_type.select_mime_type {      select pretty_name as mime_type_pretty, sort_key as mime_type_sort_key
                 from portal_mime_types
                 where name = :name
      } {} {} {} F:/temp/openacs-4/packages/portal/tcl/portal-procs.xql}
dbqd.portal.tcl.portal-procs.portal_data_types.select_all_data_types {dbqd.portal.tcl.portal-procs.portal_data_types.select_all_data_types {      select name, pretty_name, secure_p, sort_key
                 from portal_data_types
                 order by sort_key
      } {} {} {} F:/temp/openacs-4/packages/portal/tcl/portal-procs.xql}
dbqd.portal.tcl.portal-procs.portal_data_types.select_all_mime_types {dbqd.portal.tcl.portal-procs.portal_data_types.select_all_mime_types {      select name, pretty_name, sort_key
                 from portal_mime_types
                 order by sort_key
      } {} {} {} F:/temp/openacs-4/packages/portal/tcl/portal-procs.xql}
dbqd.portal.tcl.portal-procs.portal_default_p.check_default {dbqd.portal.tcl.portal-procs.portal_default_p.check_default {      select case when owner_id = null then 1 else 0 end as default_portal_p from portals where portal_id = :portal_id
      } {} {} {} F:/temp/openacs-4/packages/portal/tcl/portal-procs.xql}
dbqd.portal.tcl.portal-procs.portal_info.get_default {dbqd.portal.tcl.portal-procs.portal_info.get_default {      select portal_id as info_value
                 from portals
                 where package_id = :package_id and owner_id is null
      } {} {} {} F:/temp/openacs-4/packages/portal/tcl/portal-procs.xql}
dbqd.portal.tcl.portal-procs.portal_get_template_id.get_template_id {dbqd.portal.tcl.portal-procs.portal_get_template_id.get_template_id {	select template_id from portals where portal_id = :portal_id
    
      } {} {} {} F:/temp/openacs-4/packages/portal/tcl/portal-procs.xql}
dbqd.portal.www.admin.element-ae-2.check_existence_and_perms {dbqd.portal.www.admin.element-ae-2.check_existence_and_perms {      select
           1 as element_exists_p,
           controlling_portal_id,
           decode(acs_permission.permission_p(:element_id, :user_id, 'read'), 't', 1, 'f', 0) as element_write_p
         from portal_elements
         where element_id = :element_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/portal/www/admin/element-ae-2-oracle.xql}
dbqd.portal.www.admin.element-ae-2.insert_element {dbqd.portal.www.admin.element-ae-2.insert_element {      declare
               eid portal_elements.element_id%TYPE;
             begin
               eid := portal_element.new (
                 element_id => :element_id,
                 name => :name,
                 description => :description,
                 exportable_p => :exportable_p,
                 datasource_id => :datasource_id,
                 template_id => :template_id,
                 controlling_portal_id => :default_portal_id
               );
             end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/portal/www/admin/element-ae-2-oracle.xql}
dbqd.portal.www.admin.element-ae-2.make_element_available {dbqd.portal.www.admin.element-ae-2.make_element_available {      begin
           portal_element.make_available( element_id => :element_id, portal_id => :default_portal_id );
         end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/portal/www/admin/element-ae-2-oracle.xql}
dbqd.portal.www.admin.element-ae-2.update_element {dbqd.portal.www.admin.element-ae-2.update_element {      update portal_elements set
               name = :name,
               description = :description,
               exportable_p = :exportable_p,
               datasource_id = :datasource_id,
               template_id = :template_id
             where
               element_id = :element_id
      } {} {} {} F:/temp/openacs-4/packages/portal/www/admin/element-ae-2.xql}
dbqd.portal.www.admin.element-ae.select_element {dbqd.portal.www.admin.element-ae.select_element {      select
           name,
           description,
           exportable_p,
           datasource_id,
           template_id,
           config_id,
           default_config_id
         from portal_elements
         where element_id = :element_id
      } {} {} {} F:/temp/openacs-4/packages/portal/www/admin/element-ae.xql}
dbqd.portal.www.admin.element-ae.select_datasources {dbqd.portal.www.admin.element-ae.select_datasources {      select
       datasource_id,
       data_type,
       mime_type,
       name,
       description,
       package_key
     from portal_datasources
     order by name
      } {} {} {} F:/temp/openacs-4/packages/portal/www/admin/element-ae.xql}
dbqd.portal.www.admin.element-ae.select_themes {dbqd.portal.www.admin.element-ae.select_themes {      select template_id,name,description,filename,resource_dir
     from portal_templates
     where type = 'theme'
     order by name
      } {} {} {} F:/temp/openacs-4/packages/portal/www/admin/element-ae.xql}
dbqd.portal.www.admin.element-config-2.get_element_info {dbqd.portal.www.admin.element-config-2.get_element_info {	select
           e.config_id,
           d.default_config_id,
           decode(e.config_id, d.default_config_id, 1, 0) as default_config_p,
           decode(d.configurable_p, 't', 1, 'f', 0) as configurable_p
         from portal_datasources d, portal_elements e
         where e.datasource_id = d.datasource_id and e.element_id = :element_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/portal/www/admin/element-config-2-oracle.xql}
dbqd.portal.www.admin.element-config-2.insert_new_config {dbqd.portal.www.admin.element-config-2.insert_new_config {      declare
               v_config_id portal_element_configs.config_id%TYPE;
             begin
               v_config_id := portal_element_config.new(config_id => :config_id);
             end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/portal/www/admin/element-config-2-oracle.xql}
dbqd.portal.www.admin.element-config-2.get_default_keys {dbqd.portal.www.admin.element-config-2.get_default_keys {      select key from portal_element_parameters where config_id = :default_config_id
      } {} {} {} F:/temp/openacs-4/packages/portal/www/admin/element-config-2.xql}
dbqd.portal.www.admin.element-config-2.update_element {dbqd.portal.www.admin.element-config-2.update_element {      update portal_elements set config_id = :config_id where element_id = :element_id
      } {} {} {} F:/temp/openacs-4/packages/portal/www/admin/element-config-2.xql}
dbqd.portal.www.admin.element-config-2.delete_parameters {dbqd.portal.www.admin.element-config-2.delete_parameters {      delete from portal_element_parameters where config_id = :config_id
      } {} {} {} F:/temp/openacs-4/packages/portal/www/admin/element-config-2.xql}
dbqd.portal.www.admin.element-config-2.insert_parameter {dbqd.portal.www.admin.element-config-2.insert_parameter {      insert into portal_element_parameters
               (parameter_id, config_id, key, value)
             values
               (acs_object_id_seq.nextval, :config_id, :key, :value)
      } {} {} {} F:/temp/openacs-4/packages/portal/www/admin/element-config-2.xql}
dbqd.portal.www.admin.element-config.config {dbqd.portal.www.admin.element-config.config {     select
       p.key,
       p.value,
       decode(e.config_id, d.default_config_id, 1, 0) as default_config_p
     from portal_element_parameters p, portal_elements e, portal_datasources d
     where
       e.datasource_id = d.datasource_id and
       e.config_id = p.config_id and
       e.element_id = :element_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/portal/www/admin/element-config-oracle.xql}
dbqd.portal.www.admin.element-config-revert.get_element_info {dbqd.portal.www.admin.element-config-revert.get_element_info {      select
           e.config_id,
           d.default_config_id,
           decode(acs_permission.permission_p(e.config_id, :user_id, 'write'), 't', 1, 'f', 0) as write_p,
           decode(d.configurable_p, 't', 1, 'f', 0) as configurable_p
         from portal_datasources d, portal_elements e
         where e.datasource_id = d.datasource_id and e.element_id = :element_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/portal/www/admin/element-config-revert-oracle.xql}
dbqd.portal.www.admin.element-config-revert.revert_element {dbqd.portal.www.admin.element-config-revert.revert_element {      update portal_elements set config_id = :default_config_id where element_id = :element_id
      } {} {} {} F:/temp/openacs-4/packages/portal/www/admin/element-config-revert.xql}
dbqd.portal.www.admin.element-delete.determine_ownership {dbqd.portal.www.admin.element-delete.determine_ownership {	select
	case when m.element_id = e.element_id then 1 else 0 end as local_p,
	decode(acs_permission.permission_p(:element_id, :user_id, 'delete'), 't', 1, 'f', 0) as element_delete_p
	from portal_available_element_map m, portal_elements e
	where
	m.element_id = e.element_id and
	m.element_id = :element_id and
	m.portal_id = :default_portal_id
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/portal/www/admin/element-delete-oracle.xql}
dbqd.portal.www.admin.element-delete.delete_element {dbqd.portal.www.admin.element-delete.delete_element {      begin
               portal_element.delete(:element_id);
             end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/portal/www/admin/element-delete-oracle.xql}
dbqd.portal.www.admin.element-delete.remove_availability {dbqd.portal.www.admin.element-delete.remove_availability {      delete from portal_available_element_map where element_id = :element_id and portal_id = :default_portal_id
      } {} {} {} F:/temp/openacs-4/packages/portal/www/admin/element-delete.xql}
dbqd.portal.www.admin.index.element_list {dbqd.portal.www.admin.index.element_list {     select
       e.element_id,
       e.name,
       e.description,
       decode(e.exportable_p, 't', 1, 'f', 0) as exportable_p,
       decode(d.configurable_p, 't', 1, 'f', 0) as configurable_p,
       decode(acs_permission.permission_p(e.element_id, :user_id, 'write'), 't', 1, 'f', 0) as write_p,
       decode(m.portal_id, e.controlling_portal_id, 1, 0) as local_p
     from portal_elements e, portal_available_element_map m, portal_datasources d
     where
       m.portal_id = :default_portal_id and
       m.element_id = e.element_id and
       e.datasource_id = d.datasource_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/portal/www/admin/index-oracle.xql}
dbqd.portal.www.element-add-2.insert_into_map {dbqd.portal.www.element-add-2.insert_into_map {      insert into portal_element_map
        (sort_key, portal_id, element_id, region)
      values
        (nvl((select max(sort_key) + 1 from portal_element_map where region = :region), 1), :portal_id, :element_id, :region)
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/portal/www/element-add-2-oracle.xql}
dbqd.portal.www.element-add-2.insert_into_map {dbqd.portal.www.element-add-2.insert_into_map {      insert into portal_element_map
        (sort_key, portal_id, element_id, region)
      values
        (nvl((select max(sort_key) + 1 from portal_element_map where region = :region), 1), :portal_id, :element_id, :region)
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/portal/www/element-add-2-oracle.xql}
dbqd.portal.www.element-add.select_elements {dbqd.portal.www.element-add.select_elements {      select element_id, name, description
     from portal_elements
     where element_id in (
         select element_id
         from portal_available_element_map
         where acs_permission.permission_p(element_id, :user_id, 'read') = 't' and portal_id = :default_portal_id
       minus
         select element_id from portal_element_map where portal_id = :portal_id
     )
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/portal/www/element-add-oracle.xql}
dbqd.portal.www.element-layout-2.move_elements_insert {dbqd.portal.www.element-layout-2.move_elements_insert {	begin
      insert into portal_element_map (sort_key, region, portal_id, element_id)
          select
            nvl((select max(sort_key) from portal_element_map where region = :region), 1) + rownum, :region, :portal_id, element_id
             from
               (select element_id from portal_element_map m where $where order by region,sort_key)
	end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/portal/www/element-layout-2-oracle.xql}
dbqd.portal.www.element-layout-2.remove_elements_region {dbqd.portal.www.element-layout-2.remove_elements_region {      delete from portal_element_map m
          where m.portal_id = :portal_id and
          m.region = :region and
          $skip_region_sql
          m.element_id in ($element_id_list)
      } {} {} {} F:/temp/openacs-4/packages/portal/www/element-layout-2.xql}
dbqd.portal.www.element-layout-2.remove_elements_all {dbqd.portal.www.element-layout-2.remove_elements_all {      delete from portal_element_map m
          where m.portal_id = :portal_id and
          m.region = :region and
          $skip_region_sql
          m.element_id in ($element_id_list)
      } {} {} {} F:/temp/openacs-4/packages/portal/www/element-layout-2.xql}
dbqd.portal.www.element-layout-2.move_elements_delete {dbqd.portal.www.element-layout-2.move_elements_delete {      delete from portal_element_map m where $where
      } {} {} {} F:/temp/openacs-4/packages/portal/www/element-layout-2.xql}
dbqd.portal.www.element-layout.select_portal {dbqd.portal.www.element-layout.select_portal {    select
    p.portal_id,
    p.name,
    t.filename as template,
    t.template_id,
    case when p.owner_id = null then 1 else 0 end as default_portal_p,
    decode(acs_permission.permission_p(p.template_id, :user_id, 'read'), 't', 1, 'f', 0) as template_read_p
    from portals p, portal_templates t
    where p.template_id = t.template_id and p.portal_id = :portal_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/portal/www/element-layout-oracle.xql}
dbqd.portal.www.element-move.move_element {dbqd.portal.www.element-move.move_element {      begin
       portal_element.move(portal_id => :portal_id, region => :region, sort_key => :sort_key, direction => :direction);
     end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/portal/www/element-move-oracle.xql}
dbqd.portal.www.index.restrict_to_user_portal {dbqd.portal.www.index.restrict_to_user_portal {	p.template_id = t.template_id and p.portal_id = portal.id_for_user(:package_id,:user_id)
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/portal/www/index-oracle.xql}
dbqd.portal.www.index.select_portal_and_layout {dbqd.portal.www.index.select_portal_and_layout {  select
    p.portal_id,
    p.name,
    p.owner_id,
    t.filename as template,
    decode(acs_permission.permission_p(p.portal_id, :user_id, 'read'), 't', 1, 'f', 0) as portal_read_p,
    decode(acs_permission.permission_p(t.template_id, :user_id, 'read'), 't', 1, 'f', 0) as layout_read_p
  from portals p, portal_templates t
  where $where
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/portal/www/index-oracle.xql}
dbqd.portal.www.place-element.select_elements_by_region {dbqd.portal.www.place-element.select_elements_by_region {      select e.element_id, e.name, m.sort_key
     from portal_elements e, portal_element_map m
     where
       e.element_id = m.element_id and
       m.portal_id = :portal_id and
       m.region = :region and
       acs_permission.permission_p(e.element_id, :user_id, 'read') = 't'
     order by m.sort_key
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/portal/www/place-element-oracle.xql}
dbqd.portal.www.place-element.select_all_count {dbqd.portal.www.place-element.select_all_count {      select count(*) as all_count
         from portal_element_map
         where portal_id = :portal_id and acs_permission.permission_p(element_id, :user_id, 'read') = 't'
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/portal/www/place-element-oracle.xql}
dbqd.portal.www.place-element.select_all_noimm_count {dbqd.portal.www.place-element.select_all_noimm_count {      select count(*) as all_count
         from portal_element_map
         where
           portal_id = :portal_id and acs_permission.permission_p(element_id, :user_id, 'read') = 't'
           and region not like 'i%'
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/portal/www/place-element-oracle.xql}
dbqd.portal.www.portal-ae-2.check_tmpl_availability {dbqd.portal.www.portal-ae-2.check_tmpl_availability {      select 1 as available_p
         from portal_available_template_map
         where
           portal_id = portal.parent(:default_portal_id) and
           template_id = :template_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/portal/www/portal-ae-2-oracle.xql}
dbqd.portal.www.portal-ae-2.determine_portal_existence {dbqd.portal.www.portal-ae-2.determine_portal_existence {      select
           1 as portal_exists_p,
           decode(portal.root_p(portal_id), 't', 1, 'f', 0) as portal_root_p,
           decode(acs_permission.permission_p(portal_id, :user_id, 'write'), 't', 1, 'f', 0) as portal_write_p
         from portals
         where portal_id = :portal_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/portal/www/portal-ae-2-oracle.xql}
dbqd.portal.www.portal-ae-2.insert_def_portal {dbqd.portal.www.portal-ae-2.insert_def_portal {      declare
                   pid portals.portal_id%TYPE;
                 begin
                   pid := portal.new (
                     portal_id => :portal_id,
                     name => :name,
                     template_id => :template_id,
                     package_id => :package_id
                   );
                 end;
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/portal/www/portal-ae-2-oracle.xql}
dbqd.portal.www.portal-ae-2.insert_user_portal {dbqd.portal.www.portal-ae-2.insert_user_portal {		declare
		pid portals.portal_id%TYPE;
		begin
		pid := portal.new ( portal_id => :portal_id,
				    name => :name,
				    owner_id => :user_id,
				    parent_portal_id => :default_portal_id );

		acs_permission.grant_permission ( object_id => pid,
						  grantee_id => :user_id,
						  privilege => 'read' );
		
		acs_permission.grant_permission ( object_id => pid,
						  grantee_id => :user_id,
						  privilege => 'write' );

		acs_permission.grant_permission ( object_id => pid,
						  grantee_id => :user_id,
						  privilege => 'admin' );
		end;
	    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/portal/www/portal-ae-2-oracle.xql}
dbqd.portal.www.portal-ae-2.update_portal {dbqd.portal.www.portal-ae-2.update_portal {      update portals set [join $things_to_set ","] where portal_id = :portal_id
      } {} {} {} F:/temp/openacs-4/packages/portal/www/portal-ae-2.xql}
dbqd.portal.www.portal-ae-2.delete_available {dbqd.portal.www.portal-ae-2.delete_available {      delete from portal_available_template_map where portal_id = :portal_id
      } {} {} {} F:/temp/openacs-4/packages/portal/www/portal-ae-2.xql}
dbqd.portal.www.portal-ae-2.insert_available {dbqd.portal.www.portal-ae-2.insert_available {      insert into portal_available_template_map (portal_id,template_id) values (:portal_id, :tid)
      } {} {} {} F:/temp/openacs-4/packages/portal/www/portal-ae-2.xql}
dbqd.portal.www.portal-ae.get_layouts_for_default {dbqd.portal.www.portal-ae.get_layouts_for_default {	 select
           t.template_id,
           t.name,
           t.description,
           t.filename,
           t.resource_dir,
           decode(m.template_id, null, ' ', 'checked') as checked
         from portal_templates t, portal_available_template_map m
         where
           t.type = 'layout' and
           t.template_id = m.template_id(+) and
           m.portal_id(+) = :default_portal_id
         order by t.name
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/portal/www/portal-ae-oracle.xql}
dbqd.portal.www.portal-ae.select_portal_id {dbqd.portal.www.portal-ae.select_portal_id {      select portal_id from portals where package_id = :package_id and $owner_where
      } {} {} {} F:/temp/openacs-4/packages/portal/www/portal-ae.xql}
dbqd.portal.www.portal-ae.select_owner_id {dbqd.portal.www.portal-ae.select_owner_id {      select owner_id from portals where package_id = :package_id and portal_id = :portal_id
      } {} {} {} F:/temp/openacs-4/packages/portal/www/portal-ae.xql}
dbqd.portal.www.portal-ae.get_default_portal {dbqd.portal.www.portal-ae.get_default_portal {      select
           name,
           template_id
         from portals
         where portal_id = :default_portal_id
      } {} {} {} F:/temp/openacs-4/packages/portal/www/portal-ae.xql}
dbqd.portal.www.portal-ae.get_portal {dbqd.portal.www.portal-ae.get_portal {      select
       portal_id,
       name,
       template_id
     from portals
     where package_id = :package_id and $owner_where
      } {} {} {} F:/temp/openacs-4/packages/portal/www/portal-ae.xql}
dbqd.portal.www.portal-ae.get_layouts_for_user {dbqd.portal.www.portal-ae.get_layouts_for_user {	 select t.template_id, t.name, t.description, t.filename, t.resource_dir, ' ' as checked
         from portal_templates t, portal_available_template_map m
         where type = 'layout' and t.template_id = m.template_id and m.portal_id = :default_portal_id
         order by t.name
      } {} {} {} F:/temp/openacs-4/packages/portal/www/portal-ae.xql}
dbqd.portal.www.revert.delete_portal {dbqd.portal.www.revert.delete_portal {      delete from portals where portal_id = :portal_id and owner_id is not null
      } {} {} {} F:/temp/openacs-4/packages/portal/www/revert.xql}
dbqd.postcard.www.add-picture-2.add_picture {dbqd.postcard.www.add-picture-2.add_picture {    insert into postcard_images (card_image_id, image, mime_type, title, description)
    values (postcard_image_seq.nextval, empty_blob(), :mime_type, :title, :description)
    returning image into :1

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/postcard/www/add-picture-2-oracle.xql}
dbqd.postcard.www.dump-cards.cards {dbqd.postcard.www.dump-cards.cards {    select card_id, card_picture, recipient, sender, message
    from postcards
    order by card_id

      } {} {} {} F:/temp/openacs-4/packages/postcard/www/dump-cards.xql}
dbqd.postcard.www.index.get_all_images {dbqd.postcard.www.index.get_all_images {    select card_image_id, mime_type, title, description
    from postcard_images
    order by card_image_id
      } {} {} {} F:/temp/openacs-4/packages/postcard/www/index.xql}
dbqd.postcard.www.postcard-picture.select_image {dbqd.postcard.www.postcard-picture.select_image {select image
    from postcard_images
    where card_image_id = $image_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/postcard/www/postcard-picture-oracle.xql}
dbqd.postcard.www.postcard-picture.mime_type {dbqd.postcard.www.postcard-picture.mime_type {  select mime_type
    from postcard_images
   where card_image_id = :image_id
      } {} {} {} F:/temp/openacs-4/packages/postcard/www/postcard-picture.xql}
dbqd.postcard.www.send-card.add_message {dbqd.postcard.www.send-card.add_message {    insert into postcards (card_id, pickup_code, card_picture, recipient, sender, message)
    values (:card_id, :pickup_code, :image_id, :recipient, :sender, :message)

      } {} {} {} F:/temp/openacs-4/packages/postcard/www/send-card.xql}
dbqd.postcard.www.send-card.select_card_id {dbqd.postcard.www.send-card.select_card_id {    select max(card_id) as card_id from postcards

      } {} {} {} F:/temp/openacs-4/packages/postcard/www/send-card.xql}
dbqd.postcard.www.show-card.set_date {dbqd.postcard.www.show-card.set_date {	update postcards
	set picked_up = sysdate
	where pickup_code = :pickup_code
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/postcard/www/show-card-oracle.xql}
dbqd.postcard.www.show-card.select_card_id {dbqd.postcard.www.show-card.select_card_id {    select card_id, card_picture as image_id, recipient, sender, message, picked_up
    from postcards
    where pickup_code = :pickup_code

      } {} {} {} F:/temp/openacs-4/packages/postcard/www/show-card.xql}
dbqd.robot-detection.tcl.robot-detection-init.robot_detection_id {dbqd.robot-detection.tcl.robot-detection-init.robot_detection_id {select package_id from apm_packages 
where package_key = 'robot-detection'
      } {} {} {} F:/temp/openacs-4/packages/robot-detection/tcl/robot-detection-init.xql}
dbqd.robot-detection.tcl.robot-detection-procs.ad_update_robot_list.days_since_last_update {dbqd.robot-detection.tcl.robot-detection-procs.ad_update_robot_list.days_since_last_update {	    select trunc(sysdate - max(nvl(modified_date, insertion_date))) from robots
      } {} {} {} F:/temp/openacs-4/packages/robot-detection/tcl/robot-detection-procs-oracle.xql}
dbqd.robot-detection.tcl.robot-detection-procs.ad_replicate_web_robots_db.delete_old_robots_table {dbqd.robot-detection.tcl.robot-detection-procs.ad_replicate_web_robots_db.delete_old_robots_table {	    delete from robots
	
      } {} {} {} F:/temp/openacs-4/packages/robot-detection/tcl/robot-detection-procs.xql}
dbqd.robot-detection.tcl.robot-detection-procs.ad_replicate_web_robots_db.insert_new_robot {dbqd.robot-detection.tcl.robot-detection-procs.ad_replicate_web_robots_db.insert_new_robot {                        insert into robots(robot_id, robot_name, robot_details_url, robot_useragent)
                        values
                        (:robot_id, :robot_name, :robot_details_url, :robot_useragent)
                    
      } {} {} {} F:/temp/openacs-4/packages/robot-detection/tcl/robot-detection-procs.xql}
dbqd.robot-detection.tcl.robot-detection-procs.ad_replicate_web_robots_db.num_of_robots {dbqd.robot-detection.tcl.robot-detection-procs.ad_replicate_web_robots_db.num_of_robots {      select count(*) from robots
      } {} {} {} F:/temp/openacs-4/packages/robot-detection/tcl/robot-detection-procs.xql}
dbqd.robot-detection.tcl.robot-detection-procs.ad_cache_robot_useragents.populate_useragents_cache {dbqd.robot-detection.tcl.robot-detection-procs.ad_cache_robot_useragents.populate_useragents_cache {      select robot_useragent from robots
      } {} {} {} F:/temp/openacs-4/packages/robot-detection/tcl/robot-detection-procs.xql}
dbqd.robot-detection.tcl.robot-detection-procs.ad_robot_filter.robot_detection_id {dbqd.robot-detection.tcl.robot-detection-procs.ad_robot_filter.robot_detection_id {      select package_id from apm_packages where package_key = 'robot-detection'
      } {} {} {} F:/temp/openacs-4/packages/robot-detection/tcl/robot-detection-procs.xql}
dbqd.robot-detection.tcl.robot-detection-procs.ad_update_robot_list.robot_count {dbqd.robot-detection.tcl.robot-detection-procs.ad_update_robot_list.robot_count {      select count(*) from robots
      } {} {} {} F:/temp/openacs-4/packages/robot-detection/tcl/robot-detection-procs.xql}
dbqd.robot-detection.www.admin.index.robots_query {dbqd.robot-detection.www.admin.index.robots_query {      select robot_name, robot_details_url from robots order by robot_name
      } {} {} {} F:/temp/openacs-4/packages/robot-detection/www/admin/index.xql}
dbqd.schema-browser.www.column-comments-2.comment_add {dbqd.schema-browser.www.column-comments-2.comment_add {      comment on column ${table_name}.$column_name is :comments
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/schema-browser/www/column-comments-2-oracle.xql}
dbqd.schema-browser.www.trigger.unused {dbqd.schema-browser.www.trigger.unused {    select
        table_name,
        trigger_type,
        triggering_event,
        status,
        trigger_body
    from
        user_triggers
    where
        trigger_name = upper(:trigger_name)
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/schema-browser/www/trigger-oracle.xql}
dbqd.simple-survey.tcl.survsimp-procs.get_date {dbqd.simple-survey.tcl.survsimp-procs.get_date {            select to_char(creation_date, 'DD/MM/YYYY')
            from acs_objects
            where object_id = :response_id
        
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/simple-survey/tcl/survsimp-procs-oracle.xql}
dbqd.simple-survey.tcl.survsimp-procs.survsimp_question_properties {dbqd.simple-survey.tcl.survsimp-procs.survsimp_question_properties {select
  survey_id,
  sort_key,
  question_text,
  abstract_data_type,
  required_p,
  active_p,
  presentation_type,
  presentation_options,
  presentation_alignment,
  creation_user,
  creation_date
from
  survsimp_questions, acs_objects
where
  object_id = question_id
  and question_id = :question_id
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/tcl/survsimp-procs.xql}
dbqd.simple-survey.tcl.survsimp-procs.survsimp_question_choices {dbqd.simple-survey.tcl.survsimp-procs.survsimp_question_choices {      select choice_id, label
from survsimp_question_choices
where question_id = :question_id
order by sort_order
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/tcl/survsimp-procs.xql}
dbqd.simple-survey.tcl.survsimp-procs.sursimp_question_choices_2 {dbqd.simple-survey.tcl.survsimp-procs.sursimp_question_choices_2 {      select choice_id, label
from survsimp_question_choices
where question_id = :question_id
order by sort_order
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/tcl/survsimp-procs.xql}
dbqd.simple-survey.tcl.survsimp-procs.sursimp_question_choices_3 {dbqd.simple-survey.tcl.survsimp-procs.sursimp_question_choices_3 {      select * from survsimp_question_choices
where question_id = :question_id
order by sort_order
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/tcl/survsimp-procs.xql}
dbqd.simple-survey.tcl.survsimp-procs.survsimp_label_list {dbqd.simple-survey.tcl.survsimp-procs.survsimp_label_list {      select label
	    from survsimp_question_choices, survsimp_question_responses
	    where survsimp_question_responses.question_id = :question_id
	    and survsimp_question_responses.response_id = :response_id
	    and survsimp_question_choices.choice_id = survsimp_question_responses.choice_id
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/tcl/survsimp-procs.xql}
dbqd.simple-survey.tcl.survsimp-procs.survsimp_creator_p {dbqd.simple-survey.tcl.survsimp-procs.survsimp_creator_p {    select creation_user
    from   survsimp_surveys
    where  survey_id = :survey_id
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/tcl/survsimp-procs.xql}
dbqd.simple-survey.tcl.survsimp-procs.survsimp_responses_new {dbqd.simple-survey.tcl.survsimp-procs.survsimp_responses_new {      select survey_id, name, description, u.user_id, first_names || ' ' || last_name as creator_name, creation_date
from survsimp_surveys s, $users_table u
where s.creation_user = u.user_id
and creation_date> :since_when
order by creation_date desc
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/tcl/survsimp-procs.xql}
dbqd.simple-survey.tcl.survsimp-procs.survsimp_id_from_shortname {dbqd.simple-survey.tcl.survsimp-procs.survsimp_id_from_shortname {      select survey_id from survsimp_surveys where lower(short_name) = lower(:short_name)
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/tcl/survsimp-procs.xql}
dbqd.simple-survey.tcl.survsimp-procs.get_response_id {dbqd.simple-survey.tcl.survsimp-procs.get_response_id {        select response_id
        from acs_objects, survsimp_responses
        where object_id = response_id
        and creation_user = :user_id
        and survey_id = :survey_id
        and creation_date = (select max(creation_date)
                             from survsimp_responses, acs_objects
                             where object_id = response_id
                             and creation_user = :user_id
                             and survey_id = :survey_id)                          
    
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/tcl/survsimp-procs.xql}
dbqd.simple-survey.tcl.survsimp-procs.get_score {dbqd.simple-survey.tcl.survsimp-procs.get_score {            select 
            sum(score) 
            from survsimp_choice_scores,
            survsimp_question_responses, survsimp_variables
            where
            survsimp_choice_scores.choice_id = survsimp_question_responses.choice_id
            and survsimp_choice_scores.variable_id = survsimp_variables.variable_id
            and survsimp_question_responses.response_id = :response_id 
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/tcl/survsimp-procs.xql}
dbqd.simple-survey.www.admin.description-edit-2.survsimp_update_description {dbqd.simple-survey.www.admin.description-edit-2.survsimp_update_description {      update survsimp_surveys 
      set description = :description,
          description_html_p = :desc_html
          where survey_id = :survey_id
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/description-edit-2.xql}
dbqd.simple-survey.www.admin.description-edit.survey_properites {dbqd.simple-survey.www.admin.description-edit.survey_properites {      select name as survey_name, description, description_html_p as desc_html
from survsimp_surveys
where survey_id = :survey_id
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/description-edit.xql}
dbqd.simple-survey.www.admin.edit-logic-2.update_logic {dbqd.simple-survey.www.admin.edit-logic-2.update_logic {update survsimp_logic
set logic = empty_clob()
where logic_id = :logic_id
returning logic into :1
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/simple-survey/www/admin/edit-logic-2-oracle.xql}
dbqd.simple-survey.www.admin.edit-logic.get_survey_type {dbqd.simple-survey.www.admin.edit-logic.get_survey_type {      select type from survsimp_surveys where survey_id = :survey_id
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/edit-logic.xql}
dbqd.simple-survey.www.admin.edit-logic.set_survey_name {dbqd.simple-survey.www.admin.edit-logic.set_survey_name {      select name from survsimp_surveys where survey_id = :survey_id
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/edit-logic.xql}
dbqd.simple-survey.www.admin.edit-logic.get_logic {dbqd.simple-survey.www.admin.edit-logic.get_logic {      select logic, survsimp_logic.logic_id from survsimp_logic, survsimp_logic_surveys_map
where survsimp_logic.logic_id = survsimp_logic_surveys_map.logic_id
and survey_id = :survey_id
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/edit-logic.xql}
dbqd.simple-survey.www.admin.index.survsimp_surveys {dbqd.simple-survey.www.admin.index.survsimp_surveys {      select survey_id, name, enabled_p
from survsimp_surveys
order by enabled_p desc, upper(name)
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/index.xql}
dbqd.simple-survey.www.admin.modify-responses-2.update_survsimp_question_choice {dbqd.simple-survey.www.admin.modify-responses-2.update_survsimp_question_choice {      update survsimp_question_choices
          set label = :trimmed_response
          where choice_id = :choice_id
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/modify-responses-2.xql}
dbqd.simple-survey.www.admin.modify-responses-2.update_survsimp_scores {dbqd.simple-survey.www.admin.modify-responses-2.update_survsimp_scores {      update survsimp_choice_scores
                                           set score = :score
                                           where choice_id = :choice_id
                                           and variable_id = :variable_id
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/modify-responses-2.xql}
dbqd.simple-survey.www.admin.modify-responses.survey_name_from_id {dbqd.simple-survey.www.admin.modify-responses.survey_name_from_id {      select name from survsimp_surveys where survey_id=:survey_id
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/modify-responses.xql}
dbqd.simple-survey.www.admin.modify-responses.survsimp_question_text_from_id {dbqd.simple-survey.www.admin.modify-responses.survsimp_question_text_from_id {      select question_text
from survsimp_questions
where question_id = :question_id
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/modify-responses.xql}
dbqd.simple-survey.www.admin.modify-responses.get_variable_names {dbqd.simple-survey.www.admin.modify-responses.get_variable_names {      select variable_name, survsimp_variables.variable_id as variable_id
  from survsimp_variables, survsimp_variables_surveys_map
  where survsimp_variables.variable_id = survsimp_variables_surveys_map.variable_id
  and survey_id = :survey_id
  order by variable_name
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/modify-responses.xql}
dbqd.simple-survey.www.admin.modify-responses.get_choices {dbqd.simple-survey.www.admin.modify-responses.get_choices {      select choice_id, label from survsimp_question_choices where question_id = :question_id order by choice_id
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/modify-responses.xql}
dbqd.simple-survey.www.admin.modify-responses.get_scores {dbqd.simple-survey.www.admin.modify-responses.get_scores {      select score, survsimp_variables.variable_id as variable_id
      from survsimp_choice_scores, survsimp_variables
      where survsimp_choice_scores.choice_id = :choice_id
      and survsimp_choice_scores.variable_id = survsimp_variables.variable_id
      order by variable_name
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/modify-responses.xql}
dbqd.simple-survey.www.admin.one-respondent.survsimp_survey_properties {dbqd.simple-survey.www.admin.one-respondent.survsimp_survey_properties {      select name as survey_name, description, type
from survsimp_surveys
where survey_id = :survey_id
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/one-respondent.xql}
dbqd.simple-survey.www.admin.one-respondent.user_name_from_id {dbqd.simple-survey.www.admin.one-respondent.user_name_from_id {      select first_names, last_name from persons where person_id = :user_id
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/one-respondent.xql}
dbqd.simple-survey.www.admin.one-respondent.survsimp_survey_response_dates_for_users {dbqd.simple-survey.www.admin.one-respondent.survsimp_survey_response_dates_for_users {      select response_id, creation_date 
from survsimp_responses, acs_objects
where response_id = object_id
and creation_user = :user_id
and survey_id = :survey_id
order by creation_date desc
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/one-respondent.xql}
dbqd.simple-survey.www.admin.one-respondent.get_survey_scores {dbqd.simple-survey.www.admin.one-respondent.get_survey_scores {      select variable_name, sum(score) as sum_score
	      from survsimp_choice_scores, survsimp_question_responses, survsimp_variables
	      where survsimp_choice_scores.choice_id = survsimp_question_responses.choice_id
	      and survsimp_choice_scores.variable_id = survsimp_variables.variable_id
	      and survsimp_question_responses.response_id = :response_id
	      group by variable_name
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/one-respondent.xql}
dbqd.simple-survey.www.admin.one.survsimp_properties {dbqd.simple-survey.www.admin.one.survsimp_properties {select name as survey_name, 
short_name, description as survey_description, 
first_names || ' ' || last_name as creator_name, creation_user, 
creation_date, (case when enabled_p = 't' then 'Enabled' when enabled_p = 'f' then 'Disabled' end) as survey_status, enabled_p,
(case when single_response_p = 't' then 'One' when single_response_p = 'f' then 'Multiple' end) as survey_response_limit,
(case when single_editable_p = 't' then 'Editable' when single_editable_p = 'f' then 'Non-editable' end) as survey_editable_single, type
from survsimp_surveys, acs_objects, persons
where object_id = survey_id
and person_id = creation_user
and survey_id = :survey_id
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/one.xql}
dbqd.simple-survey.www.admin.one.sursimp_survey_questions {dbqd.simple-survey.www.admin.one.sursimp_survey_questions {      select question_id, sort_key, active_p, required_p
from survsimp_questions
where survey_id = :survey_id  
order by sort_key
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/one.xql}
dbqd.simple-survey.www.admin.question-active-toggle.survsimp_question_required_toggle {dbqd.simple-survey.www.admin.question-active-toggle.survsimp_question_required_toggle {      update survsimp_questions set active_p = util.logical_negation(active_p)
where survey_id = :survey_id
and question_id = :question_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/simple-survey/www/admin/question-active-toggle-oracle.xql}
dbqd.simple-survey.www.admin.question-add-2.survsimp_survey_properties {dbqd.simple-survey.www.admin.question-add-2.survsimp_survey_properties {      select name, description, type
    from survsimp_surveys
    where survey_id = :survey_id
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/question-add-2.xql}
dbqd.simple-survey.www.admin.question-add-2.count_variable_names {dbqd.simple-survey.www.admin.question-add-2.count_variable_names {      select count(variable_name) as n_variables
	from survsimp_variables, survsimp_variables_surveys_map
        where survsimp_variables.variable_id = survsimp_variables_surveys_map.variable_id
        and survey_id = :survey_id
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/question-add-2.xql}
dbqd.simple-survey.www.admin.question-add-3.create_question {dbqd.simple-survey.www.admin.question-add-3.create_question {	    begin
		:1 := survsimp_question.new (
		    question_id => :question_id,
		    survey_id => :survey_id,
                    sort_key => :sort_key,
                    question_text => empty_clob(),
                    abstract_data_type => :abstract_data_type,
                    presentation_type => :presentation_type,
                    presentation_alignment => :presentation_alignment,
                    active_p => :active_p,
                    required_p => :required_p,
		    context_id => :survey_id,
		    creation_user => :user_id
		);
	    end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/simple-survey/www/admin/question-add-3-oracle.xql}
dbqd.simple-survey.www.admin.question-add-3.get_choice_id {dbqd.simple-survey.www.admin.question-add-3.get_choice_id {      select survsimp_choice_id_sequence.nextval as choice_id from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/simple-survey/www/admin/question-add-3-oracle.xql}
dbqd.simple-survey.www.admin.question-add-3.renumber_sort_keys {dbqd.simple-survey.www.admin.question-add-3.renumber_sort_keys {      update survsimp_questions
                                   set sort_key = sort_key + 1
                                   where survey_id = :survey_id
                                   and sort_key > :after
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/question-add-3.xql}
dbqd.simple-survey.www.admin.question-add-3.add_question_text {dbqd.simple-survey.www.admin.question-add-3.add_question_text {	    update survsimp_questions
	    set question_text = :question_text
	    where question_id = :question_id
	
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/question-add-3.xql}
dbqd.simple-survey.www.admin.question-add-3.insert_survsimp_question_choice {dbqd.simple-survey.www.admin.question-add-3.insert_survsimp_question_choice {      insert into survsimp_question_choices
      (choice_id, question_id, label, sort_order)
      values
      (:choice_id, :question_id, :trimmed_response, :count)
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/question-add-3.xql}
dbqd.simple-survey.www.admin.question-add-3.insert_survsimp_scores {dbqd.simple-survey.www.admin.question-add-3.insert_survsimp_scores {      insert into survsimp_choice_scores
      (choice_id, variable_id, score)
      values
      (:choice_id, :variable_id, :score)
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/question-add-3.xql}
dbqd.simple-survey.www.admin.question-add-3.renumber_sort_keys {dbqd.simple-survey.www.admin.question-add-3.renumber_sort_keys {      update survsimp_questions
                                   set sort_key = sort_key + 1
                                   where survey_id = :survey_id
                                   and sort_key > :after
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/question-add-3.xql}
dbqd.simple-survey.www.admin.question-add-3.already_inserted_p {dbqd.simple-survey.www.admin.question-add-3.already_inserted_p {      select case when count(*) = 0 then 0 else 1 end from survsimp_questions where question_id = :question_id

      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/question-add-3.xql}
dbqd.simple-survey.www.admin.question-add.simpsurv_survey_properties {dbqd.simple-survey.www.admin.question-add.simpsurv_survey_properties {      select name, description, type
from survsimp_surveys
where survey_id = :survey_id
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/question-add.xql}
dbqd.simple-survey.www.admin.question-delete-2.survsimp_survey_id_from_question_id {dbqd.simple-survey.www.admin.question-delete-2.survsimp_survey_id_from_question_id {      select survey_id from survsimp_questions where question_id = :question_id
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/question-delete-2.xql}
dbqd.simple-survey.www.admin.question-delete-2.survsimp_question_responses_delete {dbqd.simple-survey.www.admin.question-delete-2.survsimp_question_responses_delete {      delete from survsimp_question_responses where question_id = :question_id
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/question-delete-2.xql}
dbqd.simple-survey.www.admin.question-delete-2.survsimp_question_choices_score_delete {dbqd.simple-survey.www.admin.question-delete-2.survsimp_question_choices_score_delete {      delete from survsimp_choice_scores
      where choice_id in (select choice_id from survsimp_question_choices
          where question_id = :question_id)

      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/question-delete-2.xql}
dbqd.simple-survey.www.admin.question-delete-2.survsimp_question_choices_delete {dbqd.simple-survey.www.admin.question-delete-2.survsimp_question_choices_delete {      delete from survsimp_question_choices where question_id = :question_id
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/question-delete-2.xql}
dbqd.simple-survey.www.admin.question-delete-2.survsimp_questions_delete {dbqd.simple-survey.www.admin.question-delete-2.survsimp_questions_delete {      delete from survsimp_questions where question_id = :question_id
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/question-delete-2.xql}
dbqd.simple-survey.www.admin.question-delete.survsimp_delete_question {dbqd.simple-survey.www.admin.question-delete.survsimp_delete_question {	    begin
        	survsimp_question.delete (:question_id);
	    end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/simple-survey/www/admin/question-delete-oracle.xql}
dbqd.simple-survey.www.admin.question-delete.survsimp_id_from_qeustion_id {dbqd.simple-survey.www.admin.question-delete.survsimp_id_from_qeustion_id {      select survey_id from survsimp_questions where question_id = :question_id
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/question-delete.xql}
dbqd.simple-survey.www.admin.question-delete.survsimp_number_responses {dbqd.simple-survey.www.admin.question-delete.survsimp_number_responses {      select count(*)
from survsimp_question_responses
where question_id = :question_id
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/question-delete.xql}
dbqd.simple-survey.www.admin.question-delete.survsimp_question_choices_score_delete {dbqd.simple-survey.www.admin.question-delete.survsimp_question_choices_score_delete {      delete from survsimp_choice_scores 
      where choice_id in (select choice_id from survsimp_question_choices
          where question_id = :question_id)

      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/question-delete.xql}
dbqd.simple-survey.www.admin.question-delete.survsimp_question_choices_delete {dbqd.simple-survey.www.admin.question-delete.survsimp_question_choices_delete {      delete from survsimp_question_choices where
         question_id = :question_id
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/question-delete.xql}
dbqd.simple-survey.www.admin.question-modify-text-2.survey_question_text_update {dbqd.simple-survey.www.admin.question-modify-text-2.survey_question_text_update {      update survsimp_questions set question_text=:question_text where question_id=:question_id
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/question-modify-text-2.xql}
dbqd.simple-survey.www.admin.question-modify-text.survey_name_from_id {dbqd.simple-survey.www.admin.question-modify-text.survey_name_from_id {      select name from survsimp_surveys where survey_id=:survey_id
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/question-modify-text.xql}
dbqd.simple-survey.www.admin.question-modify-text.survsimp_question_text_from_id {dbqd.simple-survey.www.admin.question-modify-text.survsimp_question_text_from_id {      select question_text
from survsimp_questions
where question_id = :question_id
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/question-modify-text.xql}
dbqd.simple-survey.www.admin.question-required-toggle.survsimp_question_required_toggle {dbqd.simple-survey.www.admin.question-required-toggle.survsimp_question_required_toggle {      update survsimp_questions set required_p = util.logical_negation(required_p)
where survey_id = :survey_id
and question_id = :question_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/simple-survey/www/admin/question-required-toggle-oracle.xql}
dbqd.simple-survey.www.admin.question-swap.swap_sort_keys {dbqd.simple-survey.www.admin.question-swap.swap_sort_keys {update survsimp_questions
set sort_key = (case when sort_key = :sort_key then :next_sort_key when sort_key = :next_sort_key then :sort_key end)
where survey_id = :survey_id
and sort_key in (:sort_key, :next_sort_key)
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/question-swap.xql}
dbqd.simple-survey.www.admin.respondents.survsimp_survey_respondents {dbqd.simple-survey.www.admin.respondents.survsimp_survey_respondents {      select first_names || ' ' || last_name as name, creation_user as user_id, email
from persons, parties, survsimp_responses, acs_objects
where person_id = creation_user
and person_id = party_id
and object_id = response_id
and survey_id = :survey_id
group by creation_user, email, first_names, last_name
order by last_name
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/respondents.xql}
dbqd.simple-survey.www.admin.respondents.survsimp_name_from_id {dbqd.simple-survey.www.admin.respondents.survsimp_name_from_id {      select name as survey_name
from survsimp_surveys
where survey_id = :survey_id
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/respondents.xql}
dbqd.simple-survey.www.admin.response-drill-down.get_question_text {dbqd.simple-survey.www.admin.response-drill-down.get_question_text {select survey_id, question_text
from survsimp_questions
where question_id = :question_id
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/response-drill-down.xql}
dbqd.simple-survey.www.admin.response-drill-down.get_response_text {dbqd.simple-survey.www.admin.response-drill-down.get_response_text {select label as response_text
from survsimp_question_choices
where choice_id = :choice_id
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/response-drill-down.xql}
dbqd.simple-survey.www.admin.response-drill-down.survey_name {dbqd.simple-survey.www.admin.response-drill-down.survey_name {      select name from survsimp_surveys where survey_id = :survey_id
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/response-drill-down.xql}
dbqd.simple-survey.www.admin.response-drill-down.all_users_for_response {dbqd.simple-survey.www.admin.response-drill-down.all_users_for_response {select
  first_names || ' ' || last_name as responder_name,
  person_id,
  creation_date
from
  acs_objects,
  survsimp_responses sr,
  persons u,
  survsimp_question_responses qr
where
  qr.response_id = sr.response_id
  and qr.response_id = object_id
  and creation_user = person_id
  and qr.question_id = :question_id
  and qr.choice_id = :choice_id
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/response-drill-down.xql}
dbqd.simple-survey.www.admin.response-editable-toggle.survsimp_response_editable_toggle {dbqd.simple-survey.www.admin.response-editable-toggle.survsimp_response_editable_toggle {      update survsimp_surveys set single_editable_p = util.logical_negation(single_editable_p)
where survey_id = :survey_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/simple-survey/www/admin/response-editable-toggle-oracle.xql}
dbqd.simple-survey.www.admin.response-limit-toggle.survsimp_reponse_toggle {dbqd.simple-survey.www.admin.response-limit-toggle.survsimp_reponse_toggle {      update survsimp_surveys 
set single_response_p = util.logical_negation(single_response_p)
where survey_id = :survey_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/simple-survey/www/admin/response-limit-toggle-oracle.xql}
dbqd.simple-survey.www.admin.responses.get_survey_scores_summary {dbqd.simple-survey.www.admin.responses.get_survey_scores_summary {      select variable_name, to_char(avg(sum_score), '9999.9') as mean_score,
                                          min(sum_score) as min_score,
                                          max(sum_score) as max_score,
                                          count(sum_score) as count_score,
                                          nvl(to_char(stddev_samp(sum_score), '9999.9'), '0.0') as sd_score                                           
                                          from
                                          (select variable_name, sum(score) as sum_score
	                                    from survsimp_choice_scores, survsimp_question_responses, survsimp_variables,
                                            survsimp_responses
                                            where survsimp_choice_scores.choice_id = survsimp_question_responses.choice_id
                                            and survsimp_choice_scores.variable_id = survsimp_variables.variable_id
                                            and survsimp_responses.response_id = survsimp_question_responses.response_id
                                            and survey_id = :local_survey_id
                                            group by survsimp_responses.response_id, variable_name)
                                          group by variable_name
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/simple-survey/www/admin/responses-oracle.xql}
dbqd.simple-survey.www.admin.responses.survey_name {dbqd.simple-survey.www.admin.responses.survey_name {      select type
  from survsimp_surveys
  where survey_id = :survey_id
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/responses.xql}
dbqd.simple-survey.www.admin.responses.survsimp_survey_question_list {dbqd.simple-survey.www.admin.responses.survsimp_survey_question_list {      select question_id, question_text, abstract_data_type
from survsimp_questions
where survey_id = :survey_id
order by sort_key
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/responses.xql}
dbqd.simple-survey.www.admin.responses.survsimp_boolean_summary {dbqd.simple-survey.www.admin.responses.survsimp_boolean_summary {select count(*) as n_responses, (case when boolean_answer = 't' then 'True' when boolean_answer = 'f' then 'False') as boolean_answer
from $question_responses_table
where question_id = :question_id
group by boolean_answer
order by boolean_answer desc
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/responses.xql}
dbqd.simple-survey.www.admin.responses.survsimp_number_summary {dbqd.simple-survey.www.admin.responses.survsimp_number_summary {      select count(*) as n_responses, number_answer
from $question_responses_table
where question_id = :question_id
group by number_answer
order by number_answer
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/responses.xql}
dbqd.simple-survey.www.admin.responses.survsimp_number_average {dbqd.simple-survey.www.admin.responses.survsimp_number_average {      select avg(number_answer) as mean, stddev(number_answer) as standard_deviation
from $question_responses_table
where question_id = :question_id
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/responses.xql}
dbqd.simple-survey.www.admin.responses.survsimp_survey_question_choices {dbqd.simple-survey.www.admin.responses.survsimp_survey_question_choices {      select count(*) as n_responses, label, qc.choice_id
from $question_responses_table qr, survsimp_question_choices qc
where qr.choice_id = qc.choice_id
  and qr.question_id = :question_id
group by label, sort_order, qc.choice_id
order by sort_order
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/responses.xql}
dbqd.simple-survey.www.admin.responses.survey_name {dbqd.simple-survey.www.admin.responses.survey_name {      select type
  from survsimp_surveys
  where survey_id = :survey_id
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/responses.xql}
dbqd.simple-survey.www.admin.responses.survsimp_number_responses {dbqd.simple-survey.www.admin.responses.survsimp_number_responses {      select count(*)
from $responses_table
where survey_id = :survey_id
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/responses.xql}
dbqd.simple-survey.www.admin.survey-category-add.category_id_next_sequence {dbqd.simple-survey.www.admin.survey-category-add.category_id_next_sequence {      select 
  category_id_sequence.nextval from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/simple-survey/www/admin/survey-category-add-oracle.xql}
dbqd.simple-survey.www.admin.survey-category-add.category_map_insert {dbqd.simple-survey.www.admin.survey-category-add.category_map_insert {      insert into site_wide_category_map 
  (map_id, category_id,
  on_which_table, on_what_id, mapping_date, one_line_item_desc) 
  values (site_wide_cat_map_id_seq.nextval, :category_id, 'survsimp_surveys',
  :survey_id, sysdate, :one_line_item_desc)
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/simple-survey/www/admin/survey-category-add-oracle.xql}
dbqd.simple-survey.www.admin.survey-category-add.category_insert {dbqd.simple-survey.www.admin.survey-category-add.category_insert {      insert into categories 
  (category_id, category,category_type)
  values (:category_id, :category, 'survsimp')
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/survey-category-add.xql}
dbqd.simple-survey.www.admin.survey-category-add.survey_name {dbqd.simple-survey.www.admin.survey-category-add.survey_name {  select name from survsimp_surveys where survey_id = :survey_id
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/survey-category-add.xql}
dbqd.simple-survey.www.admin.survey-create-2.create_survey {dbqd.simple-survey.www.admin.survey-create-2.create_survey {	    begin
	        :1 := survsimp_survey.new (
                    survey_id => :survey_id,
                    name => :name,
                    short_name => :name,
                    description => :description,
                    description_html_p => :description_html_p,
                    type => :type,
                    context_id => :package_id,
                    package_id => :package_id,
		    creation_user => :user_id
                );
            end;
        
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/simple-survey/www/admin/survey-create-2-oracle.xql}
dbqd.simple-survey.www.admin.survey-create-2.next_variable_id {dbqd.simple-survey.www.admin.survey-create-2.next_variable_id {      select survsimp_variable_id_sequence.nextval from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/simple-survey/www/admin/survey-create-2-oracle.xql}
dbqd.simple-survey.www.admin.survey-create-2.next_logic_id {dbqd.simple-survey.www.admin.survey-create-2.next_logic_id {      select survsimp_logic_id_sequence.nextval from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/simple-survey/www/admin/survey-create-2-oracle.xql}
dbqd.simple-survey.www.admin.survey-create-2.add_logic {dbqd.simple-survey.www.admin.survey-create-2.add_logic {      insert into survsimp_logic
      (logic_id, logic)
      values
      (:logic_id, empty_clob()) returning logic into :1
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/simple-survey/www/admin/survey-create-2-oracle.xql}
dbqd.simple-survey.www.admin.survey-create-2.short_name_uniqueness_check {dbqd.simple-survey.www.admin.survey-create-2.short_name_uniqueness_check {select count(short_name)
from survsimp_surveys
where lower(short_name) = lower(:short_name)
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/survey-create-2.xql}
dbqd.simple-survey.www.admin.survey-create-2.add_variable_name {dbqd.simple-survey.www.admin.survey-create-2.add_variable_name {      insert into survsimp_variables
                  (variable_id, variable_name)
                  values
                  (:variable_id, :variable_name)
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/survey-create-2.xql}
dbqd.simple-survey.www.admin.survey-create-2.map_variable_name {dbqd.simple-survey.www.admin.survey-create-2.map_variable_name {      insert into survsimp_variables_surveys_map
                  (variable_id, survey_id)
                  values
                  (:variable_id, :survey_id)
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/survey-create-2.xql}
dbqd.simple-survey.www.admin.survey-create-2.map_logic {dbqd.simple-survey.www.admin.survey-create-2.map_logic {      insert into survsimp_logic_surveys_map
              (logic_id, survey_id)
              values
              (:logic_id, :survey_id)
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/survey-create-2.xql}
dbqd.simple-survey.www.admin.survey-toggle.survey_active_toggle {dbqd.simple-survey.www.admin.survey-toggle.survey_active_toggle {      update survsimp_surveys 
    set enabled_p = :enabled_p 
    where survey_id = :survey_id
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/survey-toggle.xql}
dbqd.simple-survey.www.admin.view-text-responses.all_responses_to_question {dbqd.simple-survey.www.admin.view-text-responses.all_responses_to_question {select
  $column_name as response,
  person.name(o.creation_user) as respondent_name,
  o.creation_date as submission_date,
  o.creation_ip as ip_address
from
  survsimp_responses r,
  survsimp_question_responses qr,
  acs_objects o
where
  qr.response_id = r.response_id
  and qr.question_id = :question_id
  and o.object_id = qr.response_id
  order by submission_date

      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/view-text-responses-oracle.xql}
dbqd.simple-survey.www.admin.view-text-responses.one_question {dbqd.simple-survey.www.admin.view-text-responses.one_question {  select question_text, survey_id
  from survsimp_questions
  where question_id = :question_id
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/view-text-responses.xql}
dbqd.simple-survey.www.admin.view-text-responses.abstract_data_type {dbqd.simple-survey.www.admin.view-text-responses.abstract_data_type {      select abstract_data_type
from survsimp_questions q
where question_id = :question_id
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/admin/view-text-responses.xql}
dbqd.simple-survey.www.index.survey_select {dbqd.simple-survey.www.index.survey_select {    select survey_id, name
    from survsimp_surveys, acs_objects
    where object_id = survey_id
    and context_id = :package_id
    and acs_permission.permission_p(object_id, :user_id, 'survsimp_take_survey') = 't'
    and enabled_p = 't'
    order by upper(name)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/simple-survey/www/index-oracle.xql}
dbqd.simple-survey.www.one-respondent.response_ids_select {dbqd.simple-survey.www.one-respondent.response_ids_select {    select response_id, creation_date, to_char(creation_date, 'DD MONTH YYYY') as pretty_submission_date
    from survsimp_responses, acs_objects
    where survey_id = :survey_id
    and response_id = object_id
    and creation_user = :user_id
    order by creation_date desc

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/simple-survey/www/one-respondent-oracle.xql}
dbqd.simple-survey.www.one-respondent.survey_exists {dbqd.simple-survey.www.one-respondent.survey_exists {		select 1 from survsimp_surveys where survey_id = :survey_id
	    
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/one-respondent.xql}
dbqd.simple-survey.www.one-respondent.survey_info {dbqd.simple-survey.www.one-respondent.survey_info {       select name, description
    from survsimp_surveys
    where survey_id = :survey_id

      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/one-respondent.xql}
dbqd.simple-survey.www.one.survey_exists {dbqd.simple-survey.www.one.survey_exists {	    select 1 from survsimp_surveys where survey_id = :survey_id
	
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/one.xql}
dbqd.simple-survey.www.one.survey_info {dbqd.simple-survey.www.one.survey_info {      select name, description, single_response_p, single_editable_p
    from survsimp_surveys where survey_id = :survey_id
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/one.xql}
dbqd.simple-survey.www.one.responses_count {dbqd.simple-survey.www.one.responses_count {    select count(response_id)
    from survsimp_responses, acs_objects
    where response_id = object_id
    and creation_user = :user_id
    and survey_id = :survey_id

      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/one.xql}
dbqd.simple-survey.www.one.question_ids_select {dbqd.simple-survey.www.one.question_ids_select {    select question_id
    from survsimp_questions  
    where survey_id = :survey_id
    and active_p = 't'
    order by sort_key

      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/one.xql}
dbqd.simple-survey.www.process-response.create_response {dbqd.simple-survey.www.process-response.create_response {	begin
	    :1 := survsimp_response.new (
		response_id => :response_id,
		survey_id => :survey_id,		
		context_id => :survey_id,
		creation_user => :user_id
	    );
	end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/simple-survey/www/process-response-oracle.xql}
dbqd.simple-survey.www.process-response.survsimp_question_response_text_insert {dbqd.simple-survey.www.process-response.survsimp_question_response_text_insert {      insert into survsimp_question_responses
      (response_id, question_id, clob_answer)
      values 
      (:response_id, :question_id, empty_clob())
      returning clob_answer into :1

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/simple-survey/www/process-response-oracle.xql}
dbqd.simple-survey.www.process-response.create_item {dbqd.simple-survey.www.process-response.create_item {       begin
           :1 := content_item.new (
           name => :name,
           creation_ip => :creation_ip
	   );
       end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/simple-survey/www/process-response-oracle.xql}
dbqd.simple-survey.www.process-response.create_rel {dbqd.simple-survey.www.process-response.create_rel {      begin
 	  :1 := acs_rel.new (
 	  rel_type => 'user_blob_response_rel',
 	  object_id_one => :user_id,
 	  object_id_two => :item_id);
      end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/simple-survey/www/process-response-oracle.xql}
dbqd.simple-survey.www.process-response.create_revision {dbqd.simple-survey.www.process-response.create_revision {      begin
	  :1 := content_revision.new (
	  title => 'A Blob Response',
	  item_id => :item_id,
	  text => 'not_important',
	  mime_type => :guessed_file_type,
	  creation_date => sysdate,
	  creation_user => :user_id,
	  creation_ip => :creation_ip
	  );

          update cr_items
          set live_revision = :1
          where item_id = :item_id;

      end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/simple-survey/www/process-response-oracle.xql}
dbqd.simple-survey.www.process-response.update_response {dbqd.simple-survey.www.process-response.update_response {      update cr_revisions
      set content = empty_blob()
      where revision_id = :revision_id
      returning content into :1

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/simple-survey/www/process-response-oracle.xql}
dbqd.simple-survey.www.process-response.survey_exists {dbqd.simple-survey.www.process-response.survey_exists {	    select 1 from survsimp_surveys where survey_id = :survey_id
	
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/process-response.xql}
dbqd.simple-survey.www.process-response.survsimp_question_info_list {dbqd.simple-survey.www.process-response.survsimp_question_info_list {	    select question_id, question_text, abstract_data_type, presentation_type, required_p
	    from survsimp_questions
	    where survey_id = :survey_id
	    and active_p = 't'
	    order by sort_key
	
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/process-response.xql}
dbqd.simple-survey.www.process-response.survsimp_question_info_list {dbqd.simple-survey.www.process-response.survsimp_question_info_list {	    select question_id, question_text, abstract_data_type, presentation_type, required_p
	    from survsimp_questions
	    where survey_id = :survey_id
	    and active_p = 't'
	    order by sort_key
	
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/process-response.xql}
dbqd.simple-survey.www.process-response.survsimp_question_response_checkbox_insert {dbqd.simple-survey.www.process-response.survsimp_question_response_checkbox_insert {      insert into survsimp_question_responses (response_id, question_id, choice_id)
 values (:response_id, :question_id, :response_value)
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/process-response.xql}
dbqd.simple-survey.www.process-response.survsimp_question_response_choice_insert {dbqd.simple-survey.www.process-response.survsimp_question_response_choice_insert {      insert into survsimp_question_responses (response_id, question_id, choice_id)
 values (:response_id, :question_id, :response_value)
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/process-response.xql}
dbqd.simple-survey.www.process-response.survsimp_question_choice_shorttext_insert {dbqd.simple-survey.www.process-response.survsimp_question_choice_shorttext_insert {      insert into survsimp_question_responses (response_id, question_id, varchar_answer)
 values (:response_id, :question_id, :response_value)
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/process-response.xql}
dbqd.simple-survey.www.process-response.survsimp_question_response_boolean_insert {dbqd.simple-survey.www.process-response.survsimp_question_response_boolean_insert {      insert into survsimp_question_responses (response_id, question_id, boolean_answer)
 values (:response_id, :question_id, :response_value)
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/process-response.xql}
dbqd.simple-survey.www.process-response.survsimp_question_response_integer_insert {dbqd.simple-survey.www.process-response.survsimp_question_response_integer_insert {      insert into survsimp_question_responses (response_id, question_id, number_answer)
 values (:response_id, :question_id, :response_value)
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/process-response.xql}
dbqd.simple-survey.www.process-response.survsimp_question_response_date_insert {dbqd.simple-survey.www.process-response.survsimp_question_response_date_insert {      insert into survsimp_question_responses (response_id, question_id, date_answer)
 values (:response_id, :question_id, :response_value)
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/process-response.xql}
dbqd.simple-survey.www.process-response.get_type {dbqd.simple-survey.www.process-response.get_type {      select type from survsimp_surveys where survey_id = :survey_id
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/process-response.xql}
dbqd.simple-survey.www.process-response.survsimp_name_from_id {dbqd.simple-survey.www.process-response.survsimp_name_from_id {      select name from survsimp_surveys where survey_id = :survey_id
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/process-response.xql}
dbqd.simple-survey.www.process-response.get_score {dbqd.simple-survey.www.process-response.get_score {      select variable_name, sum(score) as sum_of_scores
                           from survsimp_choice_scores, survsimp_question_responses, survsimp_variables
                           where survsimp_choice_scores.choice_id = survsimp_question_responses.choice_id
                           and survsimp_choice_scores.variable_id = survsimp_variables.variable_id
                           and survsimp_question_responses.response_id = :response_id
                           group by variable_name
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/process-response.xql}
dbqd.simple-survey.www.process-response.get_logic {dbqd.simple-survey.www.process-response.get_logic {      select logic from survsimp_logic, survsimp_logic_surveys_map
          where survsimp_logic.logic_id = survsimp_logic_surveys_map.logic_id
          and survey_id = :survey_id
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/process-response.xql}
dbqd.simple-survey.www.process-response.survsimp_question_response_blob_insert {dbqd.simple-survey.www.process-response.survsimp_question_response_blob_insert {      insert into survsimp_question_responses
      (response_id, question_id, item_id,
      content_length,
      attachment_file_name, attachment_file_type,
      attachment_file_extension)
      values
      (:response_id, :question_id, :item_id,
      :content_length,
      :response_value, :guessed_file_type,
      :file_extension)

      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/process-response.xql}
dbqd.simple-survey.www.view-attachment.return_attachment {dbqd.simple-survey.www.view-attachment.return_attachment {      select attachment_answer  
    from survsimp_question_responses
    where response_id = $response_id and question_id = $question_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/simple-survey/www/view-attachment-oracle.xql}
dbqd.simple-survey.www.view-attachment.get_file_type {dbqd.simple-survey.www.view-attachment.get_file_type {      select attachment_file_type
	    from survsimp_question_responses
	    where response_id = :response_id and question_id = :question_id
      } {} {} {} F:/temp/openacs-4/packages/simple-survey/www/view-attachment.xql}
dbqd.spam.tcl.spam-procs.spam_base.spam_base_query {dbqd.spam.tcl.spam-procs.spam_base.spam_base_query {	select
	 site_node.url(node_id) 
 	from 
	 site_nodes, apm_packages 
	where
	 object_id=package_id and package_key='[spam_package_key]'
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/spam/tcl/spam-procs-oracle.xql}
dbqd.spam.tcl.spam-procs.spam_new_message.spam_insert_message {dbqd.spam.tcl.spam-procs.spam_new_message.spam_insert_message {    begin
      :1 := spam.new (
         spam_id => :spam_id,
         send_date => to_date(:send_date, 'yyyy-mm-dd hh:mi:ss AM'),
         title => :subject,
         sql_query => :sql,
         html_text => :html,
         plain_text => :plain,
         creation_user => [ad_get_user_id],
         creation_ip => '[ad_conn peeraddr]',
         context_id => :context_id,
         approved_p => :approved_p
     );
     end;

        } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/spam/tcl/spam-procs-oracle.xql}
dbqd.spam.tcl.spam-procs.spam_put_in_outgoing_queue.spam_insert_into_outgoing {dbqd.spam.tcl.spam-procs.spam_put_in_outgoing_queue.spam_insert_into_outgoing {	    begin
		  :1 := acs_mail_queue_message.new (
		    body_id => :body_id,
		    context_id => :context_id,
		    creation_date => :creation_date,
		    creation_user => :creation_user,
		    creation_ip => :creation_ip
		);
	    end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/spam/tcl/spam-procs-oracle.xql}
dbqd.spam.tcl.spam-procs.spam_sweeper.spam_get_list_of_outgoing_messages {dbqd.spam.tcl.spam-procs.spam_sweeper.spam_get_list_of_outgoing_messages {	select spam_id
	  from spam_messages
	where 
	    sysdate >= send_date
	and approved_p = 't'
	and sent_p = 'f'
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/spam/tcl/spam-procs-oracle.xql}
dbqd.spam.tcl.spam-procs.spam_package_id.spam_get_package_id {dbqd.spam.tcl.spam-procs.spam_package_id.spam_get_package_id {	select min(package_id) from apm_packages 
	  where package_key = '[spam_package_key]'
    
      } {} {} {} F:/temp/openacs-4/packages/spam/tcl/spam-procs.xql}
dbqd.spam.tcl.spam-procs.spam_send_immediate.spam_update_for_immediate_send {dbqd.spam.tcl.spam-procs.spam_send_immediate.spam_update_for_immediate_send {	spam_put_in_outgoing_queue $msg_id
	acs_mail_process_queue
    
      } {} {} {} F:/temp/openacs-4/packages/spam/tcl/spam-procs.xql}
dbqd.spam.tcl.spam-procs.spam_put_in_outgoing_queue.spam_get_outgoing_message {dbqd.spam.tcl.spam-procs.spam_put_in_outgoing_queue.spam_get_outgoing_message {	select body_id, send_date, sql_query, context_id, 
	    creation_date, creation_user, creation_ip
	from spam_messages, acs_objects, acs_mail_links
	where 
	    object_id = spam_id
	and mail_link_id = spam_id
	and spam_id = :spam_id
	and approved_p = 't'
    
      } {} {} {} F:/temp/openacs-4/packages/spam/tcl/spam-procs.xql}
dbqd.spam.tcl.spam-procs.spam_put_in_outgoing_queue.spam_get_recipients {dbqd.spam.tcl.spam-procs.spam_put_in_outgoing_queue.spam_get_recipients {	select email from parties, ($sql_query) p2
	where p2.party_id = parties.party_id
    
      } {} {} {} F:/temp/openacs-4/packages/spam/tcl/spam-procs.xql}
dbqd.spam.tcl.spam-procs.spam_put_in_outgoing_queue.spam_set_outgoing_addresses {dbqd.spam.tcl.spam-procs.spam_put_in_outgoing_queue.spam_set_outgoing_addresses {		insert into acs_mail_queue_outgoing 
		  (message_id, envelope_from, envelope_to)
		 values 
		  (:id, :spam_sender, :email)
	    
      } {} {} {} F:/temp/openacs-4/packages/spam/tcl/spam-procs.xql}
dbqd.spam.tcl.spam-procs.spam_put_in_outgoing_queue.spam_set_sent_p {dbqd.spam.tcl.spam-procs.spam_put_in_outgoing_queue.spam_set_sent_p {	    update spam_messages 
	    set sent_p = 't'
	    where spam_id = :spam_id
	
      } {} {} {} F:/temp/openacs-4/packages/spam/tcl/spam-procs.xql}
dbqd.spam.tcl.spam-procs.spam_p.spam_p_count {dbqd.spam.tcl.spam-procs.spam_p.spam_p_count {      select count(spam_id) from spam_messages where spam_id = :spam_id
      } {} {} {} F:/temp/openacs-4/packages/spam/tcl/spam-procs.xql}
dbqd.spam.www.admin.index.get_recipient_count {dbqd.spam.www.admin.index.get_recipient_count {	   select count(1) from ($__thisrow(sql_query))
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/spam/www/admin/index-oracle.xql}
dbqd.spam.www.admin.index.spam_queue {dbqd.spam.www.admin.index.spam_queue {    select sm.spam_id, 
  	   to_char(sm.send_date, 'Mon DD, YYYY HH:MI:SS PM') wait_until,
           decode (sm.approved_p, 't', 'Approved', 
                                  'f', 'Not Approved', 'Error') pretty_approved,
           approved_p,
           sm.sql_query,
           sm.header_subject as title,
           acs_permission.permission_p(sm.spam_id, :user_id, 'admin') 
             as admin_p
      from spam_messages_all sm
     where sent_p = 'f'
           and acs_permission.permission_p(sm.spam_id, :user_id, 'write') = 't'
 
     order by sm.send_date

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/spam/www/admin/index-oracle.xql}
dbqd.spam.www.admin.index.spam_sent {dbqd.spam.www.admin.index.spam_sent {    select sm.spam_id,
           sm.header_subject as title,
           sm.send_date
      from spam_messages_all sm
     where 
           sent_p = 't'
    order by sm.send_date

      } {} {} {} F:/temp/openacs-4/packages/spam/www/admin/index.xql}
dbqd.spam.www.admin.spam-edit.spam_get_multipart_plain_text {dbqd.spam.www.admin.spam-edit.spam_get_multipart_plain_text {        select cr.content as plain_text
        from acs_mail_multipart_parts mpp, cr_items ci,  cr_revisions cr
        where 
          mpp.content_item_id=ci.item_id and
          ci.live_revision=cr.revision_id and
          multipart_id=:content_item_id and cr.mime_type='text/plain'

        } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/spam/www/admin/spam-edit-oracle.xql}
dbqd.spam.www.admin.spam-edit.spam_get_multipart_html_text {dbqd.spam.www.admin.spam-edit.spam_get_multipart_html_text {        select cr.content as html_text
        from acs_mail_multipart_parts mpp, cr_items ci, cr_revisions cr
        where
          mpp.content_item_id=ci.item_id and
          ci.live_revision=cr.revision_id and
          multipart_id=:content_item_id and cr.mime_type='text/html' 

        } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/spam/www/admin/spam-edit-oracle.xql}
dbqd.spam.www.admin.spam-edit.spam_get_num_recipients {dbqd.spam.www.admin.spam-edit.spam_get_num_recipients {     select count(1) from ($sql_query)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/spam/www/admin/spam-edit-oracle.xql}
dbqd.spam.www.admin.spam-edit.spam_get_message {dbqd.spam.www.admin.spam-edit.spam_get_message {    select header_subject as title, 
      to_char(send_date, 'yyyy-mm-dd') as send_date, 
      to_char(send_date, 'hh24:mi:ss') as send_time, 
      sql_query, sent_p, content_item_id
    from spam_messages_all
    where spam_id = :spam_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/spam/www/admin/spam-edit-oracle.xql}
dbqd.spam.www.admin.spam-edit.spam_get_text {dbqd.spam.www.admin.spam-edit.spam_get_text {	select content, mime_type
	  from cr_revisions
	where revision_id = content_item.get_live_revision(:content_item_id)
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/spam/www/admin/spam-edit-oracle.xql}
dbqd.spam.www.admin.spam-edit.spam_get_num_recipients {dbqd.spam.www.admin.spam-edit.spam_get_num_recipients {     select count(1) from ($sql_query)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/spam/www/admin/spam-edit-oracle.xql}
dbqd.spam.www.admin.spam-edit.spam_get_multipart_plain_text {dbqd.spam.www.admin.spam-edit.spam_get_multipart_plain_text {        select cr.content as plain_text
        from acs_mail_multipart_parts mpp, cr_items ci,  cr_revisions cr
        where 
          mpp.content_item_id=ci.item_id and
          ci.live_revision=cr.revision_id and
          multipart_id=:content_item_id and cr.mime_type='text/plain'

        } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/spam/www/admin/spam-edit-oracle.xql}
dbqd.spam.www.admin.spam-edit.spam_get_multipart_html_text {dbqd.spam.www.admin.spam-edit.spam_get_multipart_html_text {        select cr.content as html_text
        from acs_mail_multipart_parts mpp, cr_items ci, cr_revisions cr
        where
          mpp.content_item_id=ci.item_id and
          ci.live_revision=cr.revision_id and
          multipart_id=:content_item_id and cr.mime_type='text/html' 

        } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/spam/www/admin/spam-edit-oracle.xql}
dbqd.spam.www.admin.spam-show-users.spam_get_party_list {dbqd.spam.www.admin.spam-show-users.spam_get_party_list {    select email, first_names || ' ' || last_name as name
      from parties, ($sql_query) p2, persons
    where parties.party_id = person_id(+) 
      and p2.party_id = parties.party_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/spam/www/admin/spam-show-users-oracle.xql}
dbqd.spam.www.admin.spam-show-users.spam_get_party_list {dbqd.spam.www.admin.spam-show-users.spam_get_party_list {    select email, first_names || ' ' || last_name as name
      from parties, ($sql_query) p2, persons
    where parties.party_id = person_id(+) 
      and p2.party_id = parties.party_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/spam/www/admin/spam-show-users-oracle.xql}
dbqd.spam.www.admin.spam-view.spam_get_text {dbqd.spam.www.admin.spam-view.spam_get_text {	select content, mime_type
	  from cr_revisions
	where revision_id = content_item.get_live_revision(:content_item_id)
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/spam/www/admin/spam-view-oracle.xql}
dbqd.spam.www.admin.spam-view.spam_get_message {dbqd.spam.www.admin.spam-view.spam_get_message {    select header_subject as title, 
           to_char(send_date, 'Month DD, YYYY HH:MI:SS') as send_date,
           content_item_id 
     from spam_messages_all
     where spam_id = :spam_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/spam/www/admin/spam-view-oracle.xql}
dbqd.spam.www.admin.spam-view.spam_get_multipart_plain_text {dbqd.spam.www.admin.spam-view.spam_get_multipart_plain_text {        select cr.content as plain_text
        from acs_mail_multipart_parts mpp 
        join cr_items ci on mpp.content_item_id=ci.item_id
        join cr_revisions cr on ci.live_revision=cr.revision_id
        where multipart_id=:content_item_id and cr.mime_type='text/plain'; 

        } {} {} {} F:/temp/openacs-4/packages/spam/www/admin/spam-view.xql}
dbqd.spam.www.admin.spam-view.spam_get_multipart_html_text {dbqd.spam.www.admin.spam-view.spam_get_multipart_html_text {        select cr.content as html_text
        from acs_mail_multipart_parts mpp 
        join cr_items ci on mpp.content_item_id=ci.item_id
        join cr_revisions cr on ci.live_revision=cr.revision_id
        where multipart_id=:content_item_id and cr.mime_type='text/html'; 

        } {} {} {} F:/temp/openacs-4/packages/spam/www/admin/spam-view.xql}
dbqd.spam.www.admin.toggle-approval.toggle_approval {dbqd.spam.www.admin.toggle-approval.toggle_approval {    update spam_messages
       set approved_p = util.logical_negation(approved_p)
     where spam_id = :spam_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/spam/www/admin/toggle-approval-oracle.xql}
dbqd.spam.www.admin.toggle-approval.spam_get_message_for_approval {dbqd.spam.www.admin.toggle-approval.spam_get_message_for_approval {    select to_char(send_date, 'yyyy-mm-dd hh24:mi:ss') as sql_send_time,
      sql_query, approved_p
    from spam_messages
    where spam_id = :spam_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/spam/www/admin/toggle-approval-oracle.xql}
dbqd.spam.www.index.get_recipient_count {dbqd.spam.www.index.get_recipient_count {	   select count(1) from ($__thisrow(sql_query))
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/spam/www/index-oracle.xql}
dbqd.spam.www.index.spam_queue {dbqd.spam.www.index.spam_queue {    select sm.spam_id, 
  	   to_char(sm.send_date, 'Mon DD, YYYY HH:MI:SS PM') wait_until,
           decode (sm.approved_p, 't', 'Approved', 
                                  'f', 'Not Approved', 'Error') pretty_approved,
           approved_p,
           sm.sql_query,
           sm.header_subject as title,
           acs_permission.permission_p(sm.spam_id, :user_id, 'admin') 
             as admin_p
      from spam_messages_all sm
     where sent_p = 'f'
           and acs_permission.permission_p(sm.spam_id, :user_id, 'write') = 't'
 
     order by sm.send_date

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/spam/www/index-oracle.xql}
dbqd.spam.www.index.spam_sent {dbqd.spam.www.index.spam_sent {    select sm.spam_id,
           sm.header_subject as title,
           sm.send_date
      from spam_messages_all sm
     where 
           sent_p = 't'
           and acs_permission.permission_p(sm.spam_id, :user_id, 'read') = 't'
    order by sm.send_date

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/spam/www/index-oracle.xql}
dbqd.spam.www.spam-add.get_num_recipients {dbqd.spam.www.spam-add.get_num_recipients {    select count(*) from ($sql_query) user_query

      } {} {} {} F:/temp/openacs-4/packages/spam/www/spam-add.xql}
dbqd.spam.www.spam-edit.spam_get_num_recipients {dbqd.spam.www.spam-edit.spam_get_num_recipients {     select count(1) from ($sql_query)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/spam/www/spam-edit-oracle.xql}
dbqd.spam.www.spam-edit.spam_get_multipart_plain_text {dbqd.spam.www.spam-edit.spam_get_multipart_plain_text {        select cr.content as plain_text
        from acs_mail_multipart_parts mpp, cr_items ci,  cr_revisions cr
        where 
          mpp.content_item_id=ci.item_id and
          ci.live_revision=cr.revision_id and
          multipart_id=:content_item_id and cr.mime_type='text/plain'

        } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/spam/www/spam-edit-oracle.xql}
dbqd.spam.www.spam-edit.spam_get_multipart_html_text {dbqd.spam.www.spam-edit.spam_get_multipart_html_text {        select cr.content as html_text
        from acs_mail_multipart_parts mpp, cr_items ci, cr_revisions cr
        where
          mpp.content_item_id=ci.item_id and
          ci.live_revision=cr.revision_id and
          multipart_id=:content_item_id and cr.mime_type='text/html' 

        } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/spam/www/spam-edit-oracle.xql}
dbqd.spam.www.spam-edit.spam_get_message {dbqd.spam.www.spam-edit.spam_get_message {    select header_subject as title, 
      to_char(send_date, 'yyyy-mm-dd') as send_date, 
      to_char(send_date, 'hh24:mi:ss') as send_time, 
      sql_query, sent_p, content_item_id
    from spam_messages_all
    where spam_id = :spam_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/spam/www/spam-edit-oracle.xql}
dbqd.spam.www.spam-edit.spam_get_text {dbqd.spam.www.spam-edit.spam_get_text {	select content, mime_type
	  from cr_revisions
	where revision_id = content_item.get_live_revision(:content_item_id)
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/spam/www/spam-edit-oracle.xql}
dbqd.spam.www.spam-edit.spam_get_multipart_plain_text {dbqd.spam.www.spam-edit.spam_get_multipart_plain_text {        select cr.content as plain_text
        from acs_mail_multipart_parts mpp, cr_items ci,  cr_revisions cr
        where 
          mpp.content_item_id=ci.item_id and
          ci.live_revision=cr.revision_id and
          multipart_id=:content_item_id and cr.mime_type='text/plain'

        } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/spam/www/spam-edit-oracle.xql}
dbqd.spam.www.spam-edit.spam_get_multipart_html_text {dbqd.spam.www.spam-edit.spam_get_multipart_html_text {        select cr.content as html_text
        from acs_mail_multipart_parts mpp, cr_items ci, cr_revisions cr
        where
          mpp.content_item_id=ci.item_id and
          ci.live_revision=cr.revision_id and
          multipart_id=:content_item_id and cr.mime_type='text/html' 

        } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/spam/www/spam-edit-oracle.xql}
dbqd.spam.www.spam-send.spam_check_double_click {dbqd.spam.www.spam-send.spam_check_double_click {  select count(1) from spam_messages where spam_id=:spam_id
      } {} {} {} F:/temp/openacs-4/packages/spam/www/spam-send.xql}
dbqd.spam.www.spam-show-users.spam_get_party_list {dbqd.spam.www.spam-show-users.spam_get_party_list {    select email, first_names || ' ' || last_name as name
      from parties, ($sql_query) p2, persons
    where parties.party_id = person_id(+) 
      and p2.party_id = parties.party_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/spam/www/spam-show-users-oracle.xql}
dbqd.spam.www.spam-show-users.spam_get_party_list {dbqd.spam.www.spam-show-users.spam_get_party_list {    select email, first_names || ' ' || last_name as name
      from parties, ($sql_query) p2, persons
    where parties.party_id = person_id(+) 
      and p2.party_id = parties.party_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/spam/www/spam-show-users-oracle.xql}
dbqd.spam.www.spam-view.spam_get_text {dbqd.spam.www.spam-view.spam_get_text {	select content, mime_type
	  from cr_revisions
	where revision_id = content_item.get_live_revision(:content_item_id)
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/spam/www/spam-view-oracle.xql}
dbqd.spam.www.spam-view.spam_get_message {dbqd.spam.www.spam-view.spam_get_message {    select header_subject as title, 
           to_char(send_date, 'Month DD, YYYY HH:MI:SS') as send_date,
           content_item_id 
     from spam_messages_all
     where spam_id = :spam_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/spam/www/spam-view-oracle.xql}
dbqd.spam.www.spam-view.spam_get_multipart_plain_text {dbqd.spam.www.spam-view.spam_get_multipart_plain_text {        select cr.content as plain_text
        from acs_mail_multipart_parts mpp, cr_items ci, cr_revisions cr
        where
        mpp.content_item_id=ci.item_id and
        ci.live_revision=cr.revision_id and
        multipart_id=:content_item_id and cr.mime_type='text/plain'

        } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/spam/www/spam-view-oracle.xql}
dbqd.spam.www.spam-view.spam_get_multipart_html_text {dbqd.spam.www.spam-view.spam_get_multipart_html_text {        select cr.content as html_text
        from acs_mail_multipart_parts mpp, cr_items ci, cr_revisions cr
        where
        mpp.content_item_id=ci.item_id and
        ci.live_revision=cr.revision_id and
        multipart_id=:content_item_id and cr.mime_type='text/html'

        } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/spam/www/spam-view-oracle.xql}
dbqd.spam.www.spam-view.spam_get_multipart_plain_text {dbqd.spam.www.spam-view.spam_get_multipart_plain_text {        select cr.content as plain_text
        from acs_mail_multipart_parts mpp, cr_items ci, cr_revisions cr
        where
        mpp.content_item_id=ci.item_id and
        ci.live_revision=cr.revision_id and
        multipart_id=:content_item_id and cr.mime_type='text/plain'

        } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/spam/www/spam-view-oracle.xql}
dbqd.spam.www.spam-view.spam_get_multipart_html_text {dbqd.spam.www.spam-view.spam_get_multipart_html_text {        select cr.content as html_text
        from acs_mail_multipart_parts mpp, cr_items ci, cr_revisions cr
        where
        mpp.content_item_id=ci.item_id and
        ci.live_revision=cr.revision_id and
        multipart_id=:content_item_id and cr.mime_type='text/html'

        } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/spam/www/spam-view-oracle.xql}
dbqd.spam.www.toggle-approval.toggle_approval {dbqd.spam.www.toggle-approval.toggle_approval {    update spam_messages
       set approved_p = util.logical_negation(approved_p)
     where spam_id = :spam_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/spam/www/toggle-approval-oracle.xql}
dbqd.spam.www.toggle-approval.spam_get_message_for_approval {dbqd.spam.www.toggle-approval.spam_get_message_for_approval {    select to_char(send_date, 'yyyy-mm-dd hh24:mi:ss') as sql_send_time,
      sql_query, approved_p
    from spam_messages
    where spam_id = :spam_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/spam/www/toggle-approval-oracle.xql}
dbqd.static-pages.tcl.static-pages-procs.sp_sync_cr_with_filesystem.create_new_folder {dbqd.static-pages.tcl.static-pages-procs.sp_sync_cr_with_filesystem.create_new_folder {			    begin
				    :1 := static_page.new_folder (
					    name	=> :directory,
					    label	=> :directory,
					    parent_id	=> :parent_folder_id,
					    description	=> 'Static pages folder'
				    );
			    end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/static-pages/tcl/static-pages-procs-oracle.xql}
dbqd.static-pages.tcl.static-pages-procs.sp_sync_cr_with_filesystem.update_db_file {dbqd.static-pages.tcl.static-pages-procs.sp_sync_cr_with_filesystem.update_db_file {			update cr_revisions set content = empty_blob()
			where revision_id = content_item.get_live_revision(:static_page_id)
			returning content into :1

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/static-pages/tcl/static-pages-procs-oracle.xql}
dbqd.static-pages.tcl.static-pages-procs.sp_sync_cr_with_filesystem.check_db_for_page {dbqd.static-pages.tcl.static-pages-procs.sp_sync_cr_with_filesystem.check_db_for_page {		select static_page_id from static_pages
		where filename = :sp_filename

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/static-pages/tcl/static-pages-procs-oracle.xql}
dbqd.static-pages.tcl.static-pages-procs.sp_sync_cr_with_filesystem.do_sp_new {dbqd.static-pages.tcl.static-pages-procs.sp_sync_cr_with_filesystem.do_sp_new {		    begin
			:1 := static_page.new(
				  filename => :sp_filename,
				  title => :page_title,
				  folder_id => :parent_folder_id
			      );
		    end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/static-pages/tcl/static-pages-procs-oracle.xql}
dbqd.static-pages.tcl.static-pages-procs.sp_sync_cr_with_filesystem.insert_file_contents {dbqd.static-pages.tcl.static-pages-procs.sp_sync_cr_with_filesystem.insert_file_contents {		    update cr_revisions set content = empty_blob()
		    where revision_id = content_item.get_live_revision(:static_page_id)
		    returning content into :1

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/static-pages/tcl/static-pages-procs-oracle.xql}
dbqd.static-pages.tcl.static-pages-procs.sp_sync_cr_with_filesystem.delete_old_files {dbqd.static-pages.tcl.static-pages-procs.sp_sync_cr_with_filesystem.delete_old_files {	begin
	    static_page.delete_stale_items(:sync_session_id,:package_id);

	    delete from sp_extant_folders where session_id = :sync_session_id;
	    delete from sp_extant_files where session_id = :sync_session_id;
	end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/static-pages/tcl/static-pages-procs-oracle.xql}
dbqd.static-pages.tcl.static-pages-procs.sp_root_folder_id.get_root_folder_id {dbqd.static-pages.tcl.static-pages-procs.sp_root_folder_id.get_root_folder_id {	begin
	    :1 := static_page.get_root_folder(:package_id);
	end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/static-pages/tcl/static-pages-procs-oracle.xql}
dbqd.static-pages.tcl.static-pages-procs.sp_sync_cr_with_filesystem.get_db_page {dbqd.static-pages.tcl.static-pages-procs.sp_sync_cr_with_filesystem.get_db_page {		    select content as file_from_db from cr_revisions
		    where revision_id = content_item.get_live_revision(:static_page_id)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/static-pages/tcl/static-pages-procs-oracle.xql}
dbqd.static-pages.tcl.static-pages-procs.sp_sync_cr_with_filesystem.get_folder_id {dbqd.static-pages.tcl.static-pages-procs.sp_sync_cr_with_filesystem.get_folder_id {        select nvl(content_item.get_id(:cumulative_path,:root_folder_id),0)
        from dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/static-pages/tcl/static-pages-procs-oracle.xql}
dbqd.static-pages.tcl.static-pages-procs.sp_change_matching_display.show_or_summarize_comments_matching {dbqd.static-pages.tcl.static-pages-procs.sp_change_matching_display.show_or_summarize_comments_matching {	    update static_pages set show_comments_p = :show_full_comments_p
                where static_page_id in (
		    select static_page_id from static_pages
		    where folder_id in (
			    select folder_id from sp_folders
			    start with folder_id = :root_folder_id
			    connect by parent_id = prior folder_id)
		    and filename like '%${contained_string}%'
	        )

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/static-pages/tcl/static-pages-procs-oracle.xql}
dbqd.static-pages.tcl.static-pages-procs.sp_change_matching_permissions.grant_or_revoke_matching_permissions {dbqd.static-pages.tcl.static-pages-procs.sp_change_matching_permissions.grant_or_revoke_matching_permissions {	    begin
	    for file_row in (
		    select static_page_id from static_pages
		    where folder_id in (
			    select folder_id from sp_folders
			    start with folder_id = :root_folder_id
			    connect by parent_id = prior folder_id)
		    and filename like '%${contained_string}%'
	    ) loop
		    acs_permission.${grant_or_revoke}_permission(
			    object_id => file_row.static_page_id,
			    grantee_id => acs.magic_object_id('the_public'),
			    privilege => 'general_comments_create'
		    );
	    end loop;
	    end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/static-pages/tcl/static-pages-procs-oracle.xql}
dbqd.static-pages.tcl.static-pages-procs.sp_change_matching_display.matching_static_page {dbqd.static-pages.tcl.static-pages-procs.sp_change_matching_display.matching_static_page {	select static_page_id from static_pages
	     where folder_id in (
		     select folder_id from sp_folders
		     start with folder_id = :root_folder_id
		     connect by parent_id = prior folder_id)
	     and filename like '%${contained_string}%'

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/static-pages/tcl/static-pages-procs-oracle.xql}
dbqd.static-pages.tcl.static-pages-procs.sp_get_page_info_query.get_page_info {dbqd.static-pages.tcl.static-pages-procs.sp_get_page_info_query.get_page_info {select '{'||content_item.get_title($page_id)||'} '||decode(show_comments_p,'t',1,0) from static_pages where static_page_id = :page_id

} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/static-pages/tcl/static-pages-procs-oracle.xql}
dbqd.static-pages.tcl.static-pages-procs.sp_sync_cr_with_filesystem.insert_path {dbqd.static-pages.tcl.static-pages-procs.sp_sync_cr_with_filesystem.insert_path {			insert into sp_extant_folders (session_id,folder_id)
			values (:sync_session_id,:folder_id)

      } {} {} {} F:/temp/openacs-4/packages/static-pages/tcl/static-pages-procs.xql}
dbqd.static-pages.tcl.static-pages-procs.sp_sync_cr_with_filesystem.get_storage_type {dbqd.static-pages.tcl.static-pages-procs.sp_sync_cr_with_filesystem.get_storage_type {		select storage_type from cr_items
			where item_id = :static_page_id
	} {} {} {} F:/temp/openacs-4/packages/static-pages/tcl/static-pages-procs.xql}
dbqd.static-pages.tcl.static-pages-procs.sp_sync_cr_with_filesystem.insert_file {dbqd.static-pages.tcl.static-pages-procs.sp_sync_cr_with_filesystem.insert_file {		    insert into sp_extant_files (session_id,static_page_id)
		    values (:sync_session_id,:static_page_id)

      } {} {} {} F:/temp/openacs-4/packages/static-pages/tcl/static-pages-procs.xql}
dbqd.static-pages.tcl.static-pages-procs.sp_sync_cr_with_filesystem.insert_file {dbqd.static-pages.tcl.static-pages-procs.sp_sync_cr_with_filesystem.insert_file {		    insert into sp_extant_files (session_id,static_page_id)
		    values (:sync_session_id,:static_page_id)

      } {} {} {} F:/temp/openacs-4/packages/static-pages/tcl/static-pages-procs.xql}
dbqd.static-pages.www.admin.commentability.select_static_page {dbqd.static-pages.www.admin.commentability.select_static_page {	select spf.folder_id,
		decode(spf.folder_id,:root_folder_id,'[acs_root_dir]/www/',content_item.get_title(spf.folder_id)||'/') as folder_name,
		static_page.five_n_spaces(lev) as spaces,
		static_page_id,
                substr(filename,instr(filename,'/',-1)+1) as filename,
                decode(p_file.grantee_id,NULL,'not commentable','commentable') as file_permission,
		decode(show_comments_p,'t','comments displayed','comments summarized') as display_policy,
                decode(p_folder.grantee_id,NULL,'children not commentable','children commentable') as folder_permission
from static_pages sp,
   (select folder_id,level as lev from sp_folders
    start with folder_id = :root_folder_id
    connect by parent_id = prior folder_id) spf,
   acs_permissions p_file,
   acs_permissions p_folder
where spf.folder_id=sp.folder_id(+)
  and p_file.grantee_id(+) = acs.magic_object_id('the_public')
  and p_file.privilege(+) = 'general_comments_create'
  and p_file.object_id(+) = static_page_id
  and p_folder.grantee_id(+) = acs.magic_object_id('the_public')
  and p_folder.privilege(+) = 'general_comments_create'
  and p_folder.object_id(+) = spf.folder_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/static-pages/www/admin/commentability-oracle.xql}
dbqd.static-pages.www.admin.commentability-toggle.revoke_commentability {dbqd.static-pages.www.admin.commentability-toggle.revoke_commentability {	begin
	    static_page.revoke_permission(:item_id,acs.magic_object_id('the_public'),'general_comments_create',
	        :recurse);
	end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/static-pages/www/admin/commentability-toggle-oracle.xql}
dbqd.static-pages.www.admin.commentability-toggle.grant_commentability {dbqd.static-pages.www.admin.commentability-toggle.grant_commentability {	begin
	    static_page.grant_permission(:item_id,acs.magic_object_id('the_public'),'general_comments_create',
                :recurse);
	end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/static-pages/www/admin/commentability-toggle-oracle.xql}
dbqd.static-pages.www.admin.display-policy-toggle-orcale.toggle_display_policy {dbqd.static-pages.www.admin.display-policy-toggle-orcale.toggle_display_policy {    update static_pages
        set show_comments_p = decode(show_comments_p,'t','f','t')
        where static_page_id = :item_id
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/static-pages/www/admin/display-policy-toggle-orcale.xql}
dbqd.static-pages.www.admin.index.count_static_pages {dbqd.static-pages.www.admin.index.count_static_pages {    select count(*) as n_static_pages from static_pages
    where folder_id in (
	select folder_id from sp_folders
	start with folder_id = :root_folder_id
	connect by parent_id = prior folder_id
    )

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/static-pages/www/admin/index-oracle.xql}
dbqd.static-pages.www.admin.index.count_static_pages {dbqd.static-pages.www.admin.index.count_static_pages {    select count(*) as n_static_pages from static_pages
    where folder_id in (
	select folder_id from sp_folders
	start with folder_id = :root_folder_id
	connect by parent_id = prior folder_id
    )

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/static-pages/www/admin/index-oracle.xql}
dbqd.static-pages.www.page-visit.sp_path {dbqd.static-pages.www.page-visit.sp_path {       select filename from static_pages where static_page_id = :page_id 
      } {} {} {} F:/temp/openacs-4/packages/static-pages/www/page-visit.xql}
dbqd.ticket-tracker.tcl.ttracker-procs.ad_page_contract_filter_proc_ttracker_ticket_id.check_ticket_id {dbqd.ticket-tracker.tcl.ttracker-procs.ad_page_contract_filter_proc_ttracker_ticket_id.check_ticket_id {select decode(ttracker_ticket.id_valid_p(:value, :package_id), 't', 1, 0) as id_valid_p from dual

} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker/tcl/ttracker-procs-oracle.xql}
dbqd.ticket-tracker.tcl.ttracker-procs.ttracker_workflow_url.get_url {dbqd.ticket-tracker.tcl.ttracker-procs.ttracker_workflow_url.get_url {       select ttracker_util.workflow_url(:absolute_p) from dual 
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker/tcl/ttracker-procs-oracle.xql}
dbqd.ticket-tracker.tcl.ttracker-procs.ttracker_install.install {dbqd.ticket-tracker.tcl.ttracker-procs.ttracker_install.install {        begin
            ttracker_util.install(:package_id);
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker/tcl/ttracker-procs-oracle.xql}
dbqd.ticket-tracker.tcl.ttracker-procs.ad_page_contract_filter_proc_ttracker_option_id.check_option_id {dbqd.ticket-tracker.tcl.ttracker-procs.ad_page_contract_filter_proc_ttracker_option_id.check_option_id {select count(option_id) as id_valid_p
  from ttracker_options
  where option_id = :value and 
        package_id = :package_id
    
} {} {} {} F:/temp/openacs-4/packages/ticket-tracker/tcl/ttracker-procs.xql}
dbqd.ticket-tracker.tcl.ttracker-procs.ad_page_contract_filter_proc_ttracker_task_id.check_task_id {dbqd.ticket-tracker.tcl.ttracker-procs.ad_page_contract_filter_proc_ttracker_task_id.check_task_id {select count(wt.task_id) as id_valid_p 
  from wf_tasks wt
  where exists (select wc.case_id
                  from wf_cases wc,
                       ttracker_tickets tt,
                       ttracker_categories tc 
                  where wt.case_id = wc.case_id
                    and wc.object_id = tt.ticket_id
                    and tt.category_id = tc.category_id
                    and tc.package_id = :package_id) 
    and wt.task_id = :value
    
} {} {} {} F:/temp/openacs-4/packages/ticket-tracker/tcl/ttracker-procs.xql}
dbqd.ticket-tracker.tcl.ttracker-procs.ttracker_category_exists_p.check_category {dbqd.ticket-tracker.tcl.ttracker-procs.ttracker_category_exists_p.check_category {        select case when count(1) = 0 then 0 else 1 end
        from ttracker_categories
        where package_id = :package_id
    
      } {} {} {} F:/temp/openacs-4/packages/ticket-tracker/tcl/ttracker-procs.xql}
dbqd.ticket-tracker.wf-templates.ticket-info.ticket_info_select {dbqd.ticket-tracker.wf-templates.ticket-info.ticket_info_select {  select tt.ticket_id,
         ttracker_option.option_name(tc.package_id, 'severity', tt.severity) as pretty_severity,
         ttracker_option.option_name(tc.package_id, 'priority', tt.priority) as pretty_priority,
         tt.subject,
         tc.name as category,
         cr.content as description,
         cr.mime_type
    from ttracker_tickets tt,
         ttracker_categories tc,
         cr_revisions cr
   where tt.ticket_id = :ticket_id
     and tt.category_id = tc.category_id
     and cr.revision_id = content_item.get_live_revision(:ticket_id)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker/wf-templates/ticket-info-oracle.xql}
dbqd.ticket-tracker.www.admin.category-add-2.create_new_category {dbqd.ticket-tracker.www.admin.category-add-2.create_new_category {    begin
    :1 := ttracker_category.new (
      context_id => :package_id,
      creation_user => :user_id,
      creation_ip => :creation_ip,
      package_id => :package_id,
      name => :name,
      default_assignee => :default_assignee,
      description => :description
    );
    end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker/www/admin/category-add-2-oracle.xql}
dbqd.ticket-tracker.www.admin.category-add-2.check_duplicate {dbqd.ticket-tracker.www.admin.category-add-2.check_duplicate {            select count(1) as duplicate
            from ttracker_categories 
            where upper(name) = upper(:name) and
                  package_id = :package_id
        
      } {} {} {} F:/temp/openacs-4/packages/ticket-tracker/www/admin/category-add-2.xql}
dbqd.ticket-tracker.www.admin.category-add.assignees_select {dbqd.ticket-tracker.www.admin.category-add.assignees_select {    select 0 as party_id, 'Nobody' as party_name from dual
    UNION ALL
    select p.party_id, acs_object.name(p.party_id) as party_name
    from parties p

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker/www/admin/category-add-oracle.xql}
dbqd.ticket-tracker.www.admin.category-delete-2.check_category {dbqd.ticket-tracker.www.admin.category-delete-2.check_category {        select count(category_id) as num_categories
          from ttracker_categories
         where package_id = :package_id
    
      } {} {} {} F:/temp/openacs-4/packages/ticket-tracker/www/admin/category-delete-2.xql}
dbqd.ticket-tracker.www.admin.category-delete-2.transfer_tickets {dbqd.ticket-tracker.www.admin.category-delete-2.transfer_tickets {                update ttracker_tickets
                   set category_id = :transfer_id
                 where category_id = :category_id
            
      } {} {} {} F:/temp/openacs-4/packages/ticket-tracker/www/admin/category-delete-2.xql}
dbqd.ticket-tracker.www.admin.category-delete-2.delete_category {dbqd.ticket-tracker.www.admin.category-delete-2.delete_category {                delete from ttracker_categories
                 where category_id = :category_id
            
      } {} {} {} F:/temp/openacs-4/packages/ticket-tracker/www/admin/category-delete-2.xql}
dbqd.ticket-tracker.www.admin.category-delete-2.check_category_again {dbqd.ticket-tracker.www.admin.category-delete-2.check_category_again {                      select count(category_id)
                        from ttracker_categories
                       where package_id = :package_id 
      } {} {} {} F:/temp/openacs-4/packages/ticket-tracker/www/admin/category-delete-2.xql}
dbqd.ticket-tracker.www.admin.category-delete.get_num_categories {dbqd.ticket-tracker.www.admin.category-delete.get_num_categories {    select count(category_id)
      from ttracker_categories
     where package_id = :package_id

      } {} {} {} F:/temp/openacs-4/packages/ticket-tracker/www/admin/category-delete.xql}
dbqd.ticket-tracker.www.admin.category-delete.get_num_tickets {dbqd.ticket-tracker.www.admin.category-delete.get_num_tickets {    select count(ticket_id)
      from ttracker_tickets
     where category_id = :category_id

      } {} {} {} F:/temp/openacs-4/packages/ticket-tracker/www/admin/category-delete.xql}
dbqd.ticket-tracker.www.admin.category-delete.category_select {dbqd.ticket-tracker.www.admin.category-delete.category_select {    select name, category_id
      from ttracker_categories
     where package_id = :package_id
       and category_id <> :category_id

      } {} {} {} F:/temp/openacs-4/packages/ticket-tracker/www/admin/category-delete.xql}
dbqd.ticket-tracker.www.admin.category-edit-2.check_duplicate {dbqd.ticket-tracker.www.admin.category-edit-2.check_duplicate {                  select category_id 
                    from ttracker_categories 
                   where upper(name) = upper(:name) and
                         package_id = :package_id and
                         category_id != :category_id
      } {} {} {} F:/temp/openacs-4/packages/ticket-tracker/www/admin/category-edit-2.xql}
dbqd.ticket-tracker.www.admin.category-edit-2.category_update {dbqd.ticket-tracker.www.admin.category-edit-2.category_update {    update ttracker_categories 
       set name = :name, 
           description = :description, 
           default_assignee = :default_assignee
     where category_id = :category_id

      } {} {} {} F:/temp/openacs-4/packages/ticket-tracker/www/admin/category-edit-2.xql}
dbqd.ticket-tracker.www.admin.category-edit.assignees_select {dbqd.ticket-tracker.www.admin.category-edit.assignees_select {    select 0 as party_id, 'Nobody' as party_name from dual
    UNION
    select p.party_id, acs_object.name(p.party_id) as party_name
    from parties p

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker/www/admin/category-edit-oracle.xql}
dbqd.ticket-tracker.www.admin.category-edit.category_info_select {dbqd.ticket-tracker.www.admin.category-edit.category_info_select {    select name, description, default_assignee
    from ttracker_categories
    where category_id = :category_id

      } {} {} {} F:/temp/openacs-4/packages/ticket-tracker/www/admin/category-edit.xql}
dbqd.ticket-tracker.www.admin.index.categories_select {dbqd.ticket-tracker.www.admin.index.categories_select {    select name, category_id 
      from ttracker_categories
     where package_id = :package_id
     order by name

      } {} {} {} F:/temp/openacs-4/packages/ticket-tracker/www/admin/index.xql}
dbqd.ticket-tracker.www.admin.index.options_select {dbqd.ticket-tracker.www.admin.index.options_select {    select name,
           value,
           function,
           option_id
      from ttracker_options
     where package_id = :package_id
     order by function,value

      } {} {} {} F:/temp/openacs-4/packages/ticket-tracker/www/admin/index.xql}
dbqd.ticket-tracker.www.admin.install.index.check_gc {dbqd.ticket-tracker.www.admin.install.index.check_gc {    select count(*) as gc_mounted_p
      from site_nodes sn,
           apm_packages ap
     where ap.package_key = 'general-comments'
       and sn.object_id = ap.package_id

      } {} {} {} F:/temp/openacs-4/packages/ticket-tracker/www/admin/install/index.xql}
dbqd.ticket-tracker.www.admin.install.index.check_workflow {dbqd.ticket-tracker.www.admin.install.index.check_workflow {    select count(*) as workflow_mounted_p
      from site_nodes sn,
           apm_packages ap
     where ap.package_key = 'acs-workflow'
       and sn.object_id = ap.package_id

      } {} {} {} F:/temp/openacs-4/packages/ticket-tracker/www/admin/install/index.xql}
dbqd.ticket-tracker.www.admin.install.index.default_url {dbqd.ticket-tracker.www.admin.install.index.default_url {    select default_value from apm_parameters 
      where package_key = 'acs-kernel' and 
            parameter_name='SystemURL'

      } {} {} {} F:/temp/openacs-4/packages/ticket-tracker/www/admin/install/index.xql}
dbqd.ticket-tracker.www.admin.install.index.check_sender {dbqd.ticket-tracker.www.admin.install.index.check_sender {	select email as good_email from parties 
	where party_id = :notification_sender 

      } {} {} {} F:/temp/openacs-4/packages/ticket-tracker/www/admin/install/index.xql}
dbqd.ticket-tracker.www.admin.option-add-2.duplicate_count {dbqd.ticket-tracker.www.admin.option-add-2.duplicate_count {            select count(*) as duplicate
              from dual
             where exists (select option_id
                             from ttracker_options 
                            where package_id = :package_id
                              and function = :function
                              and (value = :value or upper(name) = upper(:name)))
        
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker/www/admin/option-add-2-oracle.xql}
dbqd.ticket-tracker.www.admin.option-add-2.add_option {dbqd.ticket-tracker.www.admin.option-add-2.add_option {    begin
        ttracker_option.add_option (
            package_id => :package_id,
            function => :function,
            name => :name,
            value => :value
        );
    end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker/www/admin/option-add-2-oracle.xql}
dbqd.ticket-tracker.www.admin.option-delete.ticket_count {dbqd.ticket-tracker.www.admin.option-delete.ticket_count {	    select count(*) as in_use 
	      from dual
	     where exists (select tt.ticket_id
	                     from ttracker_options ts,
	                          ttracker_tickets tt,
	                          ttracker_categories tc
	                    where ts.option_id = :option_id
	                      and tt.category_id = tc.category_id
	                      and tc.package_id = ts.package_id
	                      and ((ts.function = 'severity' and ts.value = tt.severity) or
	                           (ts.function = 'priority' and ts.value = tt.priority)))
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker/www/admin/option-delete-oracle.xql}
dbqd.ticket-tracker.www.admin.option-delete.delete_option {dbqd.ticket-tracker.www.admin.option-delete.delete_option {    delete from ttracker_options 
     where option_id = :option_id
       and not exists (select tt.ticket_id
	                 from ttracker_options ts,
	                      ttracker_tickets tt,
	                      ttracker_categories tc
	                where ts.option_id = :option_id
	                  and tt.category_id = tc.category_id
	                  and tc.package_id = ts.package_id
	                  and ((ts.function = 'severity' and ts.value = tt.severity) or
	                       (ts.function = 'priority' and ts.value = tt.priority)))

      } {} {} {} F:/temp/openacs-4/packages/ticket-tracker/www/admin/option-delete.xql}
dbqd.ticket-tracker.www.admin.option-edit-2.duplicate_count {dbqd.ticket-tracker.www.admin.option-edit-2.duplicate_count {            select count(*) as duplicate
              from dual
             where exists (select option_id
                             from ttracker_options 
                            where package_id = :package_id
                              and function = :function
                              and option_id <> :option_id
                              and (value = :value or upper(name) = upper(:name)))
        
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker/www/admin/option-edit-2-oracle.xql}
dbqd.ticket-tracker.www.admin.option-edit-2.update_option {dbqd.ticket-tracker.www.admin.option-edit-2.update_option {    update ttracker_options
       set name = :name,
           value = :value
     where option_id = :option_id

      } {} {} {} F:/temp/openacs-4/packages/ticket-tracker/www/admin/option-edit-2.xql}
dbqd.ticket-tracker.www.admin.option-edit.option_select {dbqd.ticket-tracker.www.admin.option-edit.option_select {    select name,
           value,
           function
      from ttracker_options
     where option_id = :option_id

      } {} {} {} F:/temp/openacs-4/packages/ticket-tracker/www/admin/option-edit.xql}
dbqd.ticket-tracker.www.admin.sender-designate.sender_select {dbqd.ticket-tracker.www.admin.sender-designate.sender_select {      select ttracker_util.notification_sender(:package_id) as party_id,
             acs_object.name(ttracker_util.notification_sender(:package_id)) as name
        from dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker/www/admin/sender-designate-oracle.xql}
dbqd.ticket-tracker.www.admin.sender-designate.parties_select {dbqd.ticket-tracker.www.admin.sender-designate.parties_select {    select party_id, 
           acs_object.name(party_id) as name
      from parties 

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker/www/admin/sender-designate-oracle.xql}
dbqd.ticket-tracker.www.category.category_info_select {dbqd.ticket-tracker.www.category.category_info_select {    select name, 
           description, 
           nvl(acs_object.name(default_assignee), 'N/A') as assignee_name
      from ttracker_categories 
     where category_id = :category_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker/www/category-oracle.xql}
dbqd.ticket-tracker.www.category.tasks_select {dbqd.ticket-tracker.www.category.tasks_select {select ttracker_option.option_name(:package_id, 'severity', tt.severity) 
         as pretty_severity,
       ttracker_option.option_name(:package_id, 'priority', tt.priority) 
         as pretty_priority,
       tt.ticket_id,
       tt.subject,
       to_char(tt.creation_date, 'MM/DD/YYYY HH24:MI') as created,
       c.state,
       tt.creation_user as creator_id,
       acs_object.name(tt.creation_user) as creator_name
  from wf_cases c,
       ttracker_tickets tt
  where tt.category_id = :category_id and 
        c.object_id = tt.ticket_id
        [ad_dimensional_sql $dimensional]
  [ad_order_by_from_sort_spec $orderby $table_def]

} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker/www/category-oracle.xql}
dbqd.ticket-tracker.www.category.last_1_day {dbqd.ticket-tracker.www.category.last_1_day {tt.creation_date + 1 > sysdate

} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker/www/category-oracle.xql}
dbqd.ticket-tracker.www.category.last_7_days {dbqd.ticket-tracker.www.category.last_7_days {tt.creation_date + 7 > sysdate

} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker/www/category-oracle.xql}
dbqd.ticket-tracker.www.category.last_30_days {dbqd.ticket-tracker.www.category.last_30_days {tt.creation_date + 30 > sysdate

} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker/www/category-oracle.xql}
dbqd.ticket-tracker.www.category-summary.tasks_select {dbqd.ticket-tracker.www.category-summary.tasks_select {select * from 
  (select tc.category_id, 
          tc.name as category,
          count(tt.ticket_id) as total,
          sum(decode(lower(state),'active',1,0)) as active,
          sum(decode(lower(state),'suspended',1,0)) as suspended,
          sum(decode(lower(state),'canceled',1,0)) as canceled,
          sum(decode(lower(state),'finished',1,0)) as finished
     from ttracker_categories tc, ttracker_tickets tt, wf_cases wfc
     where tc.package_id = :package_id and
           tt.category_id = tc.category_id and
           tt.ticket_id = wfc.object_id
           [ad_dimensional_sql $dimensional]
     group by tc.category_id, tc.name                          
  union all
   select tc1.category_id, 
          tc1.name as category,
          0 as total,
          0 as active,
          0 as suspended,
          0 as canceled,
          0 as finished
     from ttracker_categories tc1
     where tc1.package_id = :package_id and 
           not exists (select tt1.ticket_id
                         from ttracker_tickets tt1 
                         where tt1.category_id = tc1.category_id
                         [ad_dimensional_sql $dimensional]))
[ad_order_by_from_sort_spec $orderby $table_def]    

} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker/www/category-summary-oracle.xql}
dbqd.ticket-tracker.www.category-summary.last_1_year {dbqd.ticket-tracker.www.category-summary.last_1_year {creation_date + 365 > sysdate

} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker/www/category-summary-oracle.xql}
dbqd.ticket-tracker.www.category-summary.last_3_months {dbqd.ticket-tracker.www.category-summary.last_3_months {creation_date + 90 > sysdate

} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker/www/category-summary-oracle.xql}
dbqd.ticket-tracker.www.category-summary.last_1_month {dbqd.ticket-tracker.www.category-summary.last_1_month {creation_date + 30 > sysdate

} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker/www/category-summary-oracle.xql}
dbqd.ticket-tracker.www.index.package_name {dbqd.ticket-tracker.www.index.package_name {      select apm_package.name(:package_id) from dual
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker/www/index-oracle.xql}
dbqd.ticket-tracker.www.index.tasks_select {dbqd.ticket-tracker.www.index.tasks_select {             select tt.ticket_id, 
                    tt.subject, 
                    ttracker_option.option_name(:package_id, 'severity', tt.severity) as pretty_severity,
                    ttracker_option.option_name(:package_id, 'priority', tt.priority) as pretty_priority,
                    tt.creation_date as created, 
                    ca.case_id, 
                    tc.name as category, 
                    ta.task_id,
                    ta.transition_key as to_do
               from ttracker_tickets tt, 
                    wf_cases ca, 
                    ttracker_categories tc,
                    wf_task_assignments w, 
                    wf_tasks ta, party_approved_member_map map
              where ca.object_id = tt.ticket_id
	        and ca.state = 'active'
                and tt.category_id = tc.category_id
                and tc.package_id = :package_id
                and w.party_id = map.party_id
                and map.member_id = :user_id 
                and ta.case_id = ca.case_id 
                and ta.task_id = w.task_id
                and (ta.state='enabled' or (ta.state='started' and ta.holding_user=:user_id))
               [ad_order_by_from_sort_spec $orderby $table_def]      

} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker/www/index-oracle.xql}
dbqd.ticket-tracker.www.index.unassigned_tasks_select {dbqd.ticket-tracker.www.index.unassigned_tasks_select {    select tt.ticket_id,
           ttracker_option.option_name(:package_id, 'severity', tt.severity) as pretty_severity,
           ttracker_option.option_name(:package_id, 'priority', tt.priority) as pretty_priority,
           tt.subject,
           to_char(tt.creation_date, 'MM/DD/YYYY HH24:MI') as created,
           tc.name as category,
           ta.task_id
      from ttracker_tickets tt,
           ttracker_categories tc,
           wf_cases ca,
           wf_tasks ta
     where tc.package_id = :package_id
       and tt.category_id = tc.category_id
       and ca.object_id = tt.ticket_id
       and ca.state = 'active'
       and ta.case_id = ca.case_id 
       and not exists (select tasn.task_id 
                         from wf_task_assignments tasn
                         where tasn.task_id = ta.task_id)           
    [ad_order_by_from_sort_spec $orderby $table_def]

} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker/www/index-oracle.xql}
dbqd.ticket-tracker.www.index.categories_select {dbqd.ticket-tracker.www.index.categories_select {    select category_id, name 
    from ttracker_categories
    where package_id = :package_id
    order by upper(name)

      } {} {} {} F:/temp/openacs-4/packages/ticket-tracker/www/index.xql}
dbqd.ticket-tracker.www.selection-bar.options_select {dbqd.ticket-tracker.www.selection-bar.options_select {    select name, 
           function,
           value
      from ttracker_options
     where package_id = :package_id
     order by function,value

      } {} {} {} F:/temp/openacs-4/packages/ticket-tracker/www/selection-bar.xql}
dbqd.ticket-tracker.www.state-change.case_id_select {dbqd.ticket-tracker.www.state-change.case_id_select {    select case_id, state
      from wf_cases
     where object_id = :ticket_id

      } {} {} {} F:/temp/openacs-4/packages/ticket-tracker/www/state-change.xql}
dbqd.ticket-tracker.www.ticket-add-2.insert_ticket {dbqd.ticket-tracker.www.ticket-add-2.insert_ticket {    declare
        v_ticket_id  acs_objects.object_id%TYPE;
    begin
        v_ticket_id := ttracker_ticket.new (
            context_id    => :package_id,                      
            subject       => :subject,
            description   => :description,
            mime_type     => :mime_type,
            category_id   => :category_id,
            severity      => :severity,
            priority      => :priority,
            creation_user => :user_id,
            creation_ip   => :creation_ip
        );

        acs_permission.grant_permission(
            object_id  => v_ticket_id,
            grantee_id => :user_id,
            privilege  => 'write'
        );        
    end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker/www/ticket-add-2-oracle.xql}
dbqd.ticket-tracker.www.ticket-add.get_categories {dbqd.ticket-tracker.www.ticket-add.get_categories {  select category_id, name
    from ttracker_categories
   where package_id = :package_id
   order by upper(name) 

      } {} {} {} F:/temp/openacs-4/packages/ticket-tracker/www/ticket-add.xql}
dbqd.ticket-tracker.www.ticket-add.get_options {dbqd.ticket-tracker.www.ticket-add.get_options {    select name, 
           value,
           function
      from ttracker_options
     where package_id = :package_id

      } {} {} {} F:/temp/openacs-4/packages/ticket-tracker/www/ticket-add.xql}
dbqd.ticket-tracker.www.ticket-edit-2.update_mime_subj_desc {dbqd.ticket-tracker.www.ticket-edit-2.update_mime_subj_desc {        begin
            ttracker_ticket.update_mime_subj_desc (
                ticket_id => :ticket_id,
                mime_type => :mime_type,
	            subject => :subject,
                description => :description
            );
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker/www/ticket-edit-2-oracle.xql}
dbqd.ticket-tracker.www.ticket-edit-2.update_ttracker_tickets {dbqd.ticket-tracker.www.ticket-edit-2.update_ttracker_tickets {        update ttracker_tickets 
           set category_id = :category_id,
               subject = :subject,
               severity = :severity,
               priority = :priority
         where ticket_id = :ticket_id
    
      } {} {} {} F:/temp/openacs-4/packages/ticket-tracker/www/ticket-edit-2.xql}
dbqd.ticket-tracker.www.ticket-edit.ticket_info_select {dbqd.ticket-tracker.www.ticket-edit.ticket_info_select {    select tt.ticket_id as id,
           tt.subject,
           tt.priority,
           tt.severity,
           tt.category_id,
           cr.mime_type,
           cr.content as description
      from ttracker_tickets tt,
           cr_revisions cr
     where tt.ticket_id = :ticket_id 
       and cr.revision_id = content_item.get_live_revision(:ticket_id)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker/www/ticket-edit-oracle.xql}
dbqd.ticket-tracker.www.ticket-edit.get_categories {dbqd.ticket-tracker.www.ticket-edit.get_categories {  select category_id, name
    from ttracker_categories
   where package_id = :package_id

      } {} {} {} F:/temp/openacs-4/packages/ticket-tracker/www/ticket-edit.xql}
dbqd.ticket-tracker.www.ticket-edit.get_options {dbqd.ticket-tracker.www.ticket-edit.get_options {    select name, 
           value,
           function
      from ttracker_options
     where package_id = :package_id

      } {} {} {} F:/temp/openacs-4/packages/ticket-tracker/www/ticket-edit.xql}
dbqd.ticket-tracker.www.ticket-view.get_permission {dbqd.ticket-tracker.www.ticket-view.get_permission {    select decode(acs_permission.permission_p(:ticket_id, :user_id, 'write'), 't', 1, 0) as write_p,
           decode(acs_permission.permission_p(:ticket_id, :user_id, 'admin'), 't', 1, 0) as admin_p 
      from dual

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker/www/ticket-view-oracle.xql}
dbqd.ticket-tracker.www.ticket-view.ticket_info_select {dbqd.ticket-tracker.www.ticket-view.ticket_info_select {    select tt.subject,
           cr.content as description,
           cr.mime_type,
           ttracker_option.option_name(:package_id, 'severity', tt.severity) as pretty_severity,
           ttracker_option.option_name(:package_id, 'priority', tt.priority) as pretty_priority,
           to_char(tt.creation_date, 'MM/DD/YYYY HH24:MI') as created,
           tc.name as category,
           tc.category_id,
           acs_object.name(tt.creation_user) as submitted_by,
           wc.state, 
           wc.case_id    
      from ttracker_tickets tt,
           ttracker_categories tc,
           wf_cases wc,
           cr_revisions cr
     where tt.ticket_id = :ticket_id 
       and tc.category_id = tt.category_id
       and wc.object_id = :ticket_id
       and cr.revision_id = content_item.get_live_revision(tt.ticket_id)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker/www/ticket-view-oracle.xql}
dbqd.ticket-tracker.www.ticket-view.assignees_select {dbqd.ticket-tracker.www.ticket-view.assignees_select {    select acs_object.name(wta.party_id) as name
      from wf_task_assignments wta
     where wta.task_id = (select max(wt.task_id) 
                            from wf_tasks wt,
                                 wf_cases wc
                           where wc.object_id = :ticket_id
                             and wt.case_id = wc.case_id
                             and wt.transition_key = 'resolve')

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker/www/ticket-view-oracle.xql}
dbqd.ticket-tracker.www.tickets.ticket_select_me {dbqd.ticket-tracker.www.tickets.ticket_select_me {select tt.ticket_id,
       ttracker_option.option_name(:package_id, 'severity', tt.severity) 
         as pretty_severity,
       ttracker_option.option_name(:package_id, 'priority', tt.priority) 
         as pretty_priority,
       tt.subject,
       to_char(tt.creation_date, 'MM/DD/YYYY HH24:MI') as created,
       tc.category_id,
       tc.name as category,
       tt.creation_user as creator_id,
       acs_object.name(tt.creation_user) as creator_name,
       wc.state,
       :user_id as assignee_id,
       'me' as assignee_name
       $view_select
  from ttracker_categories tc,
       ttracker_tickets tt,
       wf_cases wc
       $view_from
  where tc.package_id = :package_id and
        tt.category_id = tc.category_id and
        wc.object_id = tt.ticket_id and 
        exists (select wt.task_id 
                  from wf_task_assignments wta,
                       wf_tasks wt,
                       party_approved_member_map m
                  where wt.transition_key = 'resolve' and 
                        wt.task_id = wta.task_id and 
                        wta.party_id = m.party_id and 
                        m.member_id = :user_id and 
                        wt.case_id = wc.case_id and 
                        wt.task_id = (select max(wt1.task_id) 
                                        from wf_tasks wt1
                                        where wt1.case_id = wc.case_id and 
                                              wt1.transition_key = 'resolve'))
        $view_where
        [ad_dimensional_sql $dimensional] 
  [ad_order_by_from_sort_spec $orderby $table_def]

} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker/www/tickets-oracle.xql}
dbqd.ticket-tracker.www.tickets.ticket_select_noass {dbqd.ticket-tracker.www.tickets.ticket_select_noass {select tt.ticket_id,
       ttracker_option.option_name(:package_id, 'severity', tt.severity) 
         as pretty_severity,
       ttracker_option.option_name(:package_id, 'priority', tt.priority) 
         as pretty_priority,
       tt.subject,
       to_char(tt.creation_date, 'MM/DD/YYYY HH24:MI') as created,
       tc.category_id,
       tc.name as category,
       tt.creation_user as creator_id,
       acs_object.name(tt.creation_user) as creator_name,
       wc.state,
       0 as assignee_id,
       '' as assignee_name
       $view_select
  from ttracker_categories tc,
       ttracker_tickets tt,
       wf_cases wc
       $view_from
  where tc.package_id = :package_id and
        tt.category_id = tc.category_id and
        wc.object_id = tt.ticket_id and 
        not exists (select wta1.task_id 
                      from wf_task_assignments wta1 
                      where wta1.task_id = (select max(wt.task_id) 
                                              from wf_tasks wt
                                              where wt.case_id = wc.case_id and 
                                                    wt.transition_key = 'resolve'))
        $view_where
        [ad_dimensional_sql $dimensional] 
  [ad_order_by_from_sort_spec $orderby $table_def]"

} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker/www/tickets-oracle.xql}
dbqd.ticket-tracker.www.tickets.ticket_select_all {dbqd.ticket-tracker.www.tickets.ticket_select_all {select results.* from 
  (select tt.ticket_id,
          ttracker_option.option_name(:package_id, 'severity', tt.severity) 
            as pretty_severity,
          ttracker_option.option_name(:package_id, 'priority', tt.priority) 
            as pretty_priority,
          tt.subject,
          to_char(tt.creation_date, 'MM/DD/YYYY HH24:MI') as created,
          tc.category_id,
          tc.name as category,
          tt.creation_user as creator_id,
          acs_object.name(tt.creation_user) as creator_name,
          wc.state,
          wta.party_id as assignee_id, 
          acs_object.name(wta.party_id) as assignee_name
          $view_select
     from ttracker_categories tc,
          ttracker_tickets tt,
          wf_cases wc,
          wf_task_assignments wta
          $view_from
     where tc.package_id = :package_id and
           tt.category_id = tc.category_id and
           wc.object_id = tt.ticket_id and
           wta.task_id = (select max(wt.task_id) 
                            from wf_tasks wt
                            where wt.case_id = wc.case_id and 
                                  wt.transition_key = 'resolve')
           $view_where
           [ad_dimensional_sql $dimensional]                    
  union all
   select tt.ticket_id,
          ttracker_option.option_name(:package_id, 'severity', tt.severity) 
            as pretty_severity,
          ttracker_option.option_name(:package_id, 'priority', tt.priority) 
            as pretty_priority,
          tt.subject,
          to_char(tt.creation_date, 'MM/DD/YYYY HH24:MI') as created,
          tc.category_id,
          tc.name as category,
          tt.creation_user as creator_id,
          acs_object.name(tt.creation_user) as creator_name,
          wc.state,
          0 as assignee_id,
          '' as assignee_name
          $view_select
     from ttracker_categories tc,
          ttracker_tickets tt,
          wf_cases wc
          $view_from
     where tc.package_id = :package_id and
           tt.category_id = tc.category_id and
           wc.object_id = tt.ticket_id and
           not exists (select wta1.task_id 
                         from wf_task_assignments wta1 
                         where wta1.task_id = (select max(wt.task_id) 
                                                 from wf_tasks wt
                                                 where wt.case_id = wc.case_id and 
                                                       wt.transition_key = 'resolve'))
           $view_where
           [ad_dimensional_sql $dimensional]) results
[ad_order_by_from_sort_spec $orderby $table_def]

} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker/www/tickets-oracle.xql}
dbqd.ticket-tracker.www.tickets.last_1_day {dbqd.ticket-tracker.www.tickets.last_1_day {tt.creation_date + 1 > sysdate

} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker/www/tickets-oracle.xql}
dbqd.ticket-tracker.www.tickets.last_7_days {dbqd.ticket-tracker.www.tickets.last_7_days {tt.creation_date + 7 > sysdate

} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker/www/tickets-oracle.xql}
dbqd.ticket-tracker.www.tickets.last_30_days {dbqd.ticket-tracker.www.tickets.last_30_days {tt.creation_date + 30 > sysdate

} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker/www/tickets-oracle.xql}
dbqd.ticket-tracker.www.tickets.live_revision {dbqd.ticket-tracker.www.tickets.live_revision {and cr.revision_id = content_item.get_live_revision(tt.ticket_id) 

} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker/www/tickets-oracle.xql}
dbqd.ticket-tracker.www.tickets.get_priorities {dbqd.ticket-tracker.www.tickets.get_priorities {select name,
       value
  from ttracker_options
  where package_id = :package_id and 
        function = 'priority'

} {} {} {} F:/temp/openacs-4/packages/ticket-tracker/www/tickets.xql}
dbqd.ticket-tracker.www.tickets.get_severities {dbqd.ticket-tracker.www.tickets.get_severities {select name,
       value
  from ttracker_options
  where package_id = :package_id and 
        function = 'severity'

} {} {} {} F:/temp/openacs-4/packages/ticket-tracker/www/tickets.xql}
dbqd.ticket-tracker.www.tickets.creation_user {dbqd.ticket-tracker.www.tickets.creation_user {tt.creation_user = $user_id

} {} {} {} F:/temp/openacs-4/packages/ticket-tracker/www/tickets.xql}
dbqd.ticket-tracker.www.tickets.status_created {dbqd.ticket-tracker.www.tickets.status_created {wc.state = 'created'

} {} {} {} F:/temp/openacs-4/packages/ticket-tracker/www/tickets.xql}
dbqd.ticket-tracker.www.tickets.status_active {dbqd.ticket-tracker.www.tickets.status_active {wc.state = 'active'

} {} {} {} F:/temp/openacs-4/packages/ticket-tracker/www/tickets.xql}
dbqd.ticket-tracker.www.tickets.status_suspended {dbqd.ticket-tracker.www.tickets.status_suspended {wc.state = 'suspended'

} {} {} {} F:/temp/openacs-4/packages/ticket-tracker/www/tickets.xql}
dbqd.ticket-tracker.www.tickets.status_canceled {dbqd.ticket-tracker.www.tickets.status_canceled {wc.state = 'canceled'

} {} {} {} F:/temp/openacs-4/packages/ticket-tracker/www/tickets.xql}
dbqd.ticket-tracker.www.tickets.status_finished {dbqd.ticket-tracker.www.tickets.status_finished {wc.state = 'finished'

} {} {} {} F:/temp/openacs-4/packages/ticket-tracker/www/tickets.xql}
dbqd.ticket-tracker.www.user-assign-summary.tasks_select {dbqd.ticket-tracker.www.user-assign-summary.tasks_select {select wta.party_id, 
       acs_object.name(wta.party_id) as party_name,
       count(ticket_id) as total,
       sum(decode(lower(wc.state),'active',1,0)) as active,
       sum(decode(lower(wc.state),'suspended',1,0)) as suspended,
       sum(decode(lower(wc.state),'canceled',1,0)) as canceled,
       sum(decode(lower(wc.state),'finished',1,0)) as finished,
       max(tt.creation_date) as latest,
       min(tt.creation_date) as oldest
  from ttracker_tickets tt, 
       ttracker_categories tc, 
       wf_cases wc,
       wf_task_assignments wta
  where tc.package_id = :package_id and 
        tt.category_id = tc.category_id and 
        tt.ticket_id = wc.object_id and 
		wta.task_id = (select max(wt.task_id) 
                         from wf_tasks wt
                         where wt.case_id = wc.case_id and 
							   wt.transition_key = 'resolve')
        [ad_dimensional_sql $dimensional] 
   group by wta.party_id
   [ad_order_by_from_sort_spec $orderby $table_def]     
      
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker/www/user-assign-summary-oracle.xql}
dbqd.ticket-tracker.www.user-assign-summary.posted_last_year {dbqd.ticket-tracker.www.user-assign-summary.posted_last_year {tt.creation_date + 365 > sysdate

} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker/www/user-assign-summary-oracle.xql}
dbqd.ticket-tracker.www.user-assign-summary.posted_last_3mos {dbqd.ticket-tracker.www.user-assign-summary.posted_last_3mos {tt.creation_date + 90 > sysdate

} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker/www/user-assign-summary-oracle.xql}
dbqd.ticket-tracker.www.user-assign-summary.posted_last_month {dbqd.ticket-tracker.www.user-assign-summary.posted_last_month {tt.creation_date + 30 > sysdate

} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker/www/user-assign-summary-oracle.xql}
dbqd.ticket-tracker.www.user-summary.tasks_select {dbqd.ticket-tracker.www.user-summary.tasks_select {    select tt.creation_user as user_id,
           acs_object.name(tt.creation_user) as user_name,
           count(ticket_id) as total,
           sum(decode(lower(wfc.state),'active',1,0)) as active,
           sum(decode(lower(wfc.state),'suspended',1,0)) as suspended,
           sum(decode(lower(wfc.state),'canceled',1,0)) as canceled,
           sum(decode(lower(wfc.state),'finished',1,0)) as finished,
           max(tt.creation_date) as latest,
           min(tt.creation_date) as earliest
      from ttracker_tickets tt, 
           ttracker_categories tc, 
           wf_cases wfc
     where tc.package_id = :package_id and
           tt.category_id = tc.category_id and
           tt.ticket_id = wfc.object_id 
           [ad_dimensional_sql $dimensional] 
     group by tt.creation_user
     [ad_order_by_from_sort_spec $orderby $table_def]     
      
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker/www/user-summary-oracle.xql}
dbqd.ticket-tracker.www.user-summary.posted_last_year {dbqd.ticket-tracker.www.user-summary.posted_last_year {tt.creation_date + 365 > sysdate

} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker/www/user-summary-oracle.xql}
dbqd.ticket-tracker.www.user-summary.posted_last_3mos {dbqd.ticket-tracker.www.user-summary.posted_last_3mos {tt.creation_date + 90 > sysdate

} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker/www/user-summary-oracle.xql}
dbqd.ticket-tracker.www.user-summary.posted_last_month {dbqd.ticket-tracker.www.user-summary.posted_last_month {tt.creation_date + 30 > sysdate

} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker/www/user-summary-oracle.xql}
dbqd.ticket-tracker-lite.tcl.ticket-tracker-lite-procs.ttl_restrict_to_ttl_users.get_privilege {dbqd.ticket-tracker-lite.tcl.ticket-tracker-lite-procs.ttl_restrict_to_ttl_users.get_privilege {select ttl_top_privilege_for_object(:package_id, :user_id) as privilege from dual
    
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker-lite/tcl/ticket-tracker-lite-procs-oracle.xql}
dbqd.ticket-tracker-lite.www.admin.area-ae-2.new_area {dbqd.ticket-tracker-lite.www.admin.area-ae-2.new_area {begin
  :1 := acs_object.new(
          object_type   => 'ticket_tracker_lite_area',
          creation_user => :caller_id,
          creation_ip   => :caller_ip,
          context_id    => :package_id
        );
end;
        
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker-lite/www/admin/area-ae-2-oracle.xql}
dbqd.ticket-tracker-lite.www.admin.area-ae-2.insert_area {dbqd.ticket-tracker-lite.www.admin.area-ae-2.insert_area {insert into ttl_areas (area_id, name) values (:area_id, :name)
        
} {} {} {} F:/temp/openacs-4/packages/ticket-tracker-lite/www/admin/area-ae-2.xql}
dbqd.ticket-tracker-lite.www.admin.area-ae-2.update_area {dbqd.ticket-tracker-lite.www.admin.area-ae-2.update_area {update ttl_areas set name = :name where area_id = :area_id
 
} {} {} {} F:/temp/openacs-4/packages/ticket-tracker-lite/www/admin/area-ae-2.xql}
dbqd.ticket-tracker-lite.www.admin.area-ae.get_area {dbqd.ticket-tracker-lite.www.admin.area-ae.get_area {select name from ttl_v_areas where area_id = :area_id

} {} {} {} F:/temp/openacs-4/packages/ticket-tracker-lite/www/admin/area-ae.xql}
dbqd.ticket-tracker-lite.www.admin.area-delete.activate_area {dbqd.ticket-tracker-lite.www.admin.area-delete.activate_area {update ttl_areas set active_p = 't' where area_id = :area_id

} {} {} {} F:/temp/openacs-4/packages/ticket-tracker-lite/www/admin/area-delete.xql}
dbqd.ticket-tracker-lite.www.admin.area-delete.inactivate_area {dbqd.ticket-tracker-lite.www.admin.area-delete.inactivate_area {update ttl_areas 
set active_p = 'f'
where area_id = :area_id and 
      exists (select 1 from ttl_v_tickets
                where area_id = :area_id)
    
} {} {} {} F:/temp/openacs-4/packages/ticket-tracker-lite/www/admin/area-delete.xql}
dbqd.ticket-tracker-lite.www.admin.area-delete.delete_assignment {dbqd.ticket-tracker-lite.www.admin.area-delete.delete_assignment {delete from ttl_area_assignments where area_id = :area_id

} {} {} {} F:/temp/openacs-4/packages/ticket-tracker-lite/www/admin/area-delete.xql}
dbqd.ticket-tracker-lite.www.admin.area-delete.delete_area {dbqd.ticket-tracker-lite.www.admin.area-delete.delete_area {delete from ttl_areas where area_id = :area_id

} {} {} {} F:/temp/openacs-4/packages/ticket-tracker-lite/www/admin/area-delete.xql}
dbqd.ticket-tracker-lite.www.admin.default-assignee-ae.add_assignee {dbqd.ticket-tracker-lite.www.admin.default-assignee-ae.add_assignee {insert into ttl_area_assignments (area_id, user_id)
  select :area_id, :user_id from dual
    where not exists (select 1 from ttl_area_assignments
                        where user_id = :user_id and area_id = :area_id)
    
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker-lite/www/admin/default-assignee-ae-oracle.xql}
dbqd.ticket-tracker-lite.www.admin.default-assignee-ae.delete_assignee {dbqd.ticket-tracker-lite.www.admin.default-assignee-ae.delete_assignee {delete from ttl_area_assignments
  where user_id = :user_id and area_id = :area_id

} {} {} {} F:/temp/openacs-4/packages/ticket-tracker-lite/www/admin/default-assignee-ae.xql}
dbqd.ticket-tracker-lite.www.admin.deleted.get_inactive_areas {dbqd.ticket-tracker-lite.www.admin.deleted.get_inactive_areas {select area_id,
       name,
       'area-delete?area_id=' || area_id || '&action=restore' as restore_url
  from ttl_v_areas
  where context_id = :package_id and 
        active_p = 'f' 
  order by lower(name)

} {} {} {} F:/temp/openacs-4/packages/ticket-tracker-lite/www/admin/deleted.xql}
dbqd.ticket-tracker-lite.www.admin.index.get_users {dbqd.ticket-tracker-lite.www.admin.index.get_users {select v.area_id,
       v.name,
       v.full_name,
       v.user_id,
       decode(a.user_id, null, 0, 1) as already_assigned_p
  from ttl_area_assignments a,
       (select ta.area_id, 
               ta.name,
               p.first_names || ' ' || p.last_name as full_name,
               tu.user_id
          from ttl_va_areas ta, ttl_v_users tu, persons p
          where ta.context_id = :package_id and 
                tu.package_id = :package_id and 
                tu.user_id = p.person_id) v
  where v.area_id = a.area_id(+) and 
        v.user_id = a.user_id(+)
  order by v.name, v.full_name      

} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker-lite/www/admin/index-oracle.xql}
dbqd.ticket-tracker-lite.www.admin.index.count_users {dbqd.ticket-tracker-lite.www.admin.index.count_users {select count(*) as num_users from ttl_v_users where package_id = :package_id

} {} {} {} F:/temp/openacs-4/packages/ticket-tracker-lite/www/admin/index.xql}
dbqd.ticket-tracker-lite.www.admin.index.get_area {dbqd.ticket-tracker-lite.www.admin.index.get_area {select ta.area_id,
       ta.name
  from ttl_va_areas ta
  where ta.context_id = :package_id 
  order by ta.name

} {} {} {} F:/temp/openacs-4/packages/ticket-tracker-lite/www/admin/index.xql}
dbqd.ticket-tracker-lite.www.admin.member-ae.set_permission {dbqd.ticket-tracker-lite.www.admin.member-ae.set_permission {insert into acs_permissions (object_id, privilege, grantee_id) 
  select :package_id, 'write', :user_id from dual 
    where not exists (select 1 from ttl_v_users where user_id = :user_id and 
                                                      package_id = :package_id)

} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker-lite/www/admin/member-ae-oracle.xql}
dbqd.ticket-tracker-lite.www.admin.member-ae.delete_users {dbqd.ticket-tracker-lite.www.admin.member-ae.delete_users {delete from ttl_v_users where user_id = :user_id and package_id = :package_id
    
} {} {} {} F:/temp/openacs-4/packages/ticket-tracker-lite/www/admin/member-ae.xql}
dbqd.ticket-tracker-lite.www.admin.users.get_users {dbqd.ticket-tracker-lite.www.admin.users.get_users {select t.user_id,
       p1.first_names || ' ' || p1.last_name as full_name,
       p2.email,
       null as remove_link
  from ttl_v_users t, persons p1, parties p2
  where t.package_id = :package_id and 
        t.user_id = p1.person_id and 
        p1.person_id = p2.party_id
  order by lower(p1.first_names), lower(p1. last_name)

} {} {} {} F:/temp/openacs-4/packages/ticket-tracker-lite/www/admin/users.xql}
dbqd.ticket-tracker-lite.www.admin.users.search_users {dbqd.ticket-tracker-lite.www.admin.users.search_users {select u.user_id,
       p2.email,
       p1.first_names,
       p1.last_name,
       null as add_link
  from users u, persons p1, parties p2
  where u.user_id = p1.person_id and 
        p1.person_id = p2.party_id and 
        not exists (select 1 from ttl_v_users t
                      where t.package_id = :package_id and 
                            t.user_id = u.user_id) and 
        lower(last_name) like lower(:last_name_start) || '%'
  order by lower(last_name), lower(first_names)
    
} {} {} {} F:/temp/openacs-4/packages/ticket-tracker-lite/www/admin/users.xql}
dbqd.ticket-tracker-lite.www.assignment-ae.insert_assignment {dbqd.ticket-tracker-lite.www.assignment-ae.insert_assignment {insert into ttl_assignments (user_id, ticket_id)
  select :user_id, :ticket_id from dual
    where not exists (select 1 from ttl_assignments
                        where user_id = :user_id and ticket_id = :ticket_id)
    
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker-lite/www/assignment-ae-oracle.xql}
dbqd.ticket-tracker-lite.www.assignment-ae.delete_assignment {dbqd.ticket-tracker-lite.www.assignment-ae.delete_assignment {delete from ttl_assignments where user_id = :user_id and ticket_id = :ticket_id

} {} {} {} F:/temp/openacs-4/packages/ticket-tracker-lite/www/assignment-ae.xql}
dbqd.ticket-tracker-lite.www.comment-ae-2.get_recipient_info {dbqd.ticket-tracker-lite.www.comment-ae-2.get_recipient_info {select name as ticket_name,
       person.name(:caller_id) as sender_fullname,
       (select email from parties
          where party_id = :caller_id) as sender_email
  from ttl_v_tickets where ticket_id = :ticket_id
        
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker-lite/www/comment-ae-2-oracle.xql}
dbqd.ticket-tracker-lite.www.comment-ae-2.update_comment {dbqd.ticket-tracker-lite.www.comment-ae-2.update_comment {update ttl_comments 
set message = :message,
    message_format = :message_format
where comment_id = :comment_id

} {} {} {} F:/temp/openacs-4/packages/ticket-tracker-lite/www/comment-ae-2.xql}
dbqd.ticket-tracker-lite.www.comment-ae-2.insert_comment {dbqd.ticket-tracker-lite.www.comment-ae-2.insert_comment {insert into ttl_comments 
 (comment_id, ticket_id, creation_user, message, message_format) 
values 
 (:comment_id, :ticket_id, :caller_id, :message, :message_format)
    
} {} {} {} F:/temp/openacs-4/packages/ticket-tracker-lite/www/comment-ae-2.xql}
dbqd.ticket-tracker-lite.www.comment-ae-2.get_email {dbqd.ticket-tracker-lite.www.comment-ae-2.get_email {select p.email
  from parties p, ttl_assignments ta
  where ta.ticket_id = :ticket_id and 
        ta.user_id = p.party_id
UNION
select p.email
  from ttl_v_tickets t, parties p
  where t.ticket_id = :ticket_id and 
        t.creation_user = p.party_id
    
} {} {} {} F:/temp/openacs-4/packages/ticket-tracker-lite/www/comment-ae-2.xql}
dbqd.ticket-tracker-lite.www.comment-ae-2.get_ticket {dbqd.ticket-tracker-lite.www.comment-ae-2.get_ticket {select ticket_id from ttl_comments where comment_id = :comment_id
    
} {} {} {} F:/temp/openacs-4/packages/ticket-tracker-lite/www/comment-ae-2.xql}
dbqd.ticket-tracker-lite.www.comment-ae.get_comment {dbqd.ticket-tracker-lite.www.comment-ae.get_comment {select c.message,
       c.message_format,
       t.ticket_id,
       t.name as ticket_name
  from ttl_comments c, ttl_v_tickets t
  where comment_id = :comment_id and 
        c.ticket_id = t.ticket_id
    
} {} {} {} F:/temp/openacs-4/packages/ticket-tracker-lite/www/comment-ae.xql}
dbqd.ticket-tracker-lite.www.comment-ae.get_ticket {dbqd.ticket-tracker-lite.www.comment-ae.get_ticket {select acs_object_id_seq.nextval as comment_id,
       name as ticket_name
  from ttl_v_tickets t
  where ticket_id = :ticket_id
    
} {} {} {} F:/temp/openacs-4/packages/ticket-tracker-lite/www/comment-ae.xql}
dbqd.ticket-tracker-lite.www.comments.get_comments {dbqd.ticket-tracker-lite.www.comments.get_comments {select r.comment_id,
       p.first_names || ' ' || p.last_name as comment_username,
       r.message,
       r.message_format,
       ttl_relative_date(r.creation_date) as comment_date,
       case when :caller_id = r.creation_user then 1 else 0 end as can_edit_p,
       null as edit_url
   from ttl_va_comments r, persons p
   where r.ticket_id = :ticket_id and 
         r.creation_user = p.person_id

} {} {} {} F:/temp/openacs-4/packages/ticket-tracker-lite/www/comments.xql}
dbqd.ticket-tracker-lite.www.index.get_tickets {dbqd.ticket-tracker-lite.www.index.get_tickets {select t.ticket_id,
       a.name as area_name,
       decode(t.priority, 1, 'High',
                          2, 'Medium',
                          3, 'Low',
                          t.priority) as ticket_priority,
       t.status,
       s.sort_key,
       t.name as ticket_name,
       ttl_relative_date(nvl(c.creation_date, t.last_modified)) as last_comment,
       decode(deadline, null, null, to_char(deadline, 'Mon DD')) as ticket_deadline
    from ttl_va_tickets t, ttl_status s, ttl_va_areas a, ttl_v_comments_latest c
    where a.context_id = :package_id and 
          a.area_id = t.area_id and 
          t.status = s.status and 
          t.ticket_id = c.ticket_id(+) 
          $user_id_clause 
          $status_clause 
          $area_clause
    $order_clause

} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker-lite/www/index-oracle.xql}
dbqd.ticket-tracker-lite.www.index.order_deadline {dbqd.ticket-tracker-lite.www.index.order_deadline {order by deadline asc, nvl(c.creation_date, t.last_modified) desc

} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker-lite/www/index-oracle.xql}
dbqd.ticket-tracker-lite.www.index.order_activity {dbqd.ticket-tracker-lite.www.index.order_activity {order by nvl(c.creation_date, t.last_modified) desc

} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker-lite/www/index-oracle.xql}
dbqd.ticket-tracker-lite.www.index.order_area {dbqd.ticket-tracker-lite.www.index.order_area {order by lower(area_name) asc, priority asc, nvl(c.creation_date, t.last_modified) desc

} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker-lite/www/index-oracle.xql}
dbqd.ticket-tracker-lite.www.index.order_status {dbqd.ticket-tracker-lite.www.index.order_status {order by lower(s.sort_key) asc, priority asc, nvl(c.creation_date, t.last_modified) desc

} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker-lite/www/index-oracle.xql}
dbqd.ticket-tracker-lite.www.index.order_default {dbqd.ticket-tracker-lite.www.index.order_default {order by priority asc, nvl(c.creation_date, t.last_modified) desc

} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker-lite/www/index-oracle.xql}
dbqd.ticket-tracker-lite.www.index.get_prefs {dbqd.ticket-tracker-lite.www.index.get_prefs {select sort, mine_p, status, area_id,
       (select name from ttl_va_areas a
         where a.area_id = p.area_id) as area_name
  from ttl_prefs p
  where user_id = :caller_id

} {} {} {} F:/temp/openacs-4/packages/ticket-tracker-lite/www/index.xql}
dbqd.ticket-tracker-lite.www.prefs-ae.update_prefs {dbqd.ticket-tracker-lite.www.prefs-ae.update_prefs {update ttl_prefs set [string trimright $update_clause ,] where user_id = :caller_id

} {} {} {} F:/temp/openacs-4/packages/ticket-tracker-lite/www/prefs-ae.xql}
dbqd.ticket-tracker-lite.www.prefs-ae.insert_pref {dbqd.ticket-tracker-lite.www.prefs-ae.insert_pref {insert into ttl_prefs 
  (user_id, sort, status, mine_p, area_id) 
values 
  (:caller_id, :sort, :status, :mine_p, :area_id)

} {} {} {} F:/temp/openacs-4/packages/ticket-tracker-lite/www/prefs-ae.xql}
dbqd.ticket-tracker-lite.www.ticket-add-2.add_ticket {dbqd.ticket-tracker-lite.www.ticket-add-2.add_ticket {declare
  v_object_id     integer;
begin
  v_object_id := acs_object.new (
    object_id     => :ticket_id,
    object_type   => 'ticket_tracker_lite_ticket',
    creation_user => :caller_id,
    creation_ip   => :caller_ip,
    context_id    => :package_id
  );

  insert into ttl_tickets 
    (ticket_id, area_id, name, type, status, deadline, 
     message, message_format, priority) 
  values 
     (:ticket_id, :area_id, :name, :type, :status, :deadline_date, 
      :message, :message_format, :priority);
end;
    
} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker-lite/www/ticket-add-2-oracle.xql}
dbqd.ticket-tracker-lite.www.ticket-add-2.insert_assignment {dbqd.ticket-tracker-lite.www.ticket-add-2.insert_assignment {insert into ttl_assignments (user_id, ticket_id)
  select user_id, :ticket_id
    from ttl_area_assignments
    where area_id = :area_id
    
} {} {} {} F:/temp/openacs-4/packages/ticket-tracker-lite/www/ticket-add-2.xql}
dbqd.ticket-tracker-lite.www.ticket-add-2.get_recipient_email {dbqd.ticket-tracker-lite.www.ticket-add-2.get_recipient_email {select p.email 
  from parties p, ttl_assignments a
  where a.ticket_id = :ticket_id and 
        a.user_id = p.party_id

} {} {} {} F:/temp/openacs-4/packages/ticket-tracker-lite/www/ticket-add-2.xql}
dbqd.ticket-tracker-lite.www.ticket-add-2.get_sender_email {dbqd.ticket-tracker-lite.www.ticket-add-2.get_sender_email {select p1.first_names || ' ' || p1.last_name as ticket_creator_name,
       p2.email as ticket_creator_email,
       (select name from ttl_va_areas where area_id = :area_id) as area_name
          from persons p1, parties p2
          where p1.person_id = p2.party_id and 
                p1.person_id = :caller_id
    
} {} {} {} F:/temp/openacs-4/packages/ticket-tracker-lite/www/ticket-add-2.xql}
dbqd.ticket-tracker-lite.www.ticket-add.get_ticket_id {dbqd.ticket-tracker-lite.www.ticket-add.get_ticket_id {select acs_object_id_seq.nextval as ticket_id,
       (select count(*) from ttl_va_areas where context_id = :package_id) 
          as num_areas
  from dual

} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker-lite/www/ticket-add-oracle.xql}
dbqd.ticket-tracker-lite.www.ticket-edit-2.edit_ticket {dbqd.ticket-tracker-lite.www.ticket-edit-2.edit_ticket {begin
  update acs_objects 
  set last_modified = sysdate,
      modifying_user = :caller_id,
      modifying_ip = :caller_ip
      where object_id = :ticket_id;

  update ttl_tickets 
  set name = :name,
      message = :message,
      message_format = :message_format
  where ticket_id = :ticket_id;
end;

} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker-lite/www/ticket-edit-2-oracle.xql}
dbqd.ticket-tracker-lite.www.ticket-edit.get_ticket_info {dbqd.ticket-tracker-lite.www.ticket-edit.get_ticket_info {select t.name, t.message,t.message_format
  from ttl_v_tickets t, ttl_va_areas a
  where a.context_id = :package_id and 
        t.ticket_id = :ticket_id and 
        t.area_id = a.area_id

} {} {} {} F:/temp/openacs-4/packages/ticket-tracker-lite/www/ticket-edit.xql}
dbqd.ticket-tracker-lite.www.ticket.get_one_ticket {dbqd.ticket-tracker-lite.www.ticket.get_one_ticket {select  t.area_id,
        a.name as area_name,
        t.name,
        t.type,
        t.status,
        t.message,
        t.message_format,
        t.priority,
        t.deadline,
        t.url,
        ttl_relative_date(t.creation_date) as posting_date,
        person.name(t.creation_user) as posting_name
    from ttl_v_tickets t, ttl_va_areas a
    where a.context_id = :package_id and 
          t.ticket_id = :ticket_id and 
          t.area_id = a.area_id

} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker-lite/www/ticket-oracle.xql}
dbqd.ticket-tracker-lite.www.ticket.get_people {dbqd.ticket-tracker-lite.www.ticket.get_people {select * from (select p.first_names || ' ' || p.last_name as full_name,
                     t.user_id,
                     case when a.user_id = null then 0 else 1 end 
                       as already_assigned_p
                 from persons p, ttl_v_users t, (select user_id
                                                   from ttl_assignments
                                                   where ticket_id = :ticket_id) a
                 where t.package_id = :package_id and 
                       p.person_id = t.user_id and 
                       t.user_id = a.user_id(+)
                 order by upper(full_name)) 
  where rownum < 50

} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker-lite/www/ticket-oracle.xql}
dbqd.ticket-tracker-lite.www.ticket-update.update_ticket {dbqd.ticket-tracker-lite.www.ticket-update.update_ticket {begin
  update ttl_tickets 
  set area_id = :area_id,
      type = :type,
      status = :status,
      deadline = :deadline_date,
      priority = :priority
   where ticket_id = :ticket_id;

   update acs_objects 
   set last_modified = sysdate,
       modifying_user = :caller_id,
       modifying_ip = :caller_ip
   where object_id = :ticket_id;
end;

} {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/ticket-tracker-lite/www/ticket-update-oracle.xql}
dbqd.wf-ticket-tracker.www.panel-ticket.ticket {dbqd.wf-ticket-tracker.www.panel-ticket.ticket {      select subject, description, severity, priority from wf_tickets where ticket_id = :ticket_id
      } {} {} {} F:/temp/openacs-4/packages/wf-ticket-tracker/www/panel-ticket.xql}
dbqd.wf-ticket-tracker.www.ticket-new-2.new_ticket {dbqd.wf-ticket-tracker.www.ticket-new-2.new_ticket {    begin
        :1 := wf_ticket.new(
            ticket_id => :ticket_id,
            subject => :subject,
            description => :description,
            severity => :severity,
            priority => :priority,
            creation_user => :user_id,
            creation_ip => :creation_ip
        );
    end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/wf-ticket-tracker/www/ticket-new-2-oracle.xql}
dbqd.wp-slim.www.attach-del.revisions_and_item_delete {dbqd.wp-slim.www.attach-del.revisions_and_item_delete {    begin
        wp_attachment.delete(:attach_item_id);
    end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/wp-slim/www/attach-del-oracle.xql}
dbqd.wp-slim.www.attach-detail.info_get {dbqd.wp-slim.www.attach-detail.info_get {         select r.revision_id, a.display, r.mime_type
         from cr_items i, cr_wp_image_attachments a, cr_revisions r
         where i.item_id = :attach_item_id and
             i.live_revision = r.revision_id and
             r.revision_id = a.attach_id(+)
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/wp-slim/www/attach-detail-oracle.xql}
dbqd.wp-slim.www.attach-detail.pres_item_id_get {dbqd.wp-slim.www.attach-detail.pres_item_id_get {    select parent_id
    from cr_items
    where content_type = 'cr_wp_slide'
    and   item_id = :slide_item_id

      } {} {} {} F:/temp/openacs-4/packages/wp-slim/www/attach-detail.xql}
dbqd.wp-slim.www.attach-list.pres_item_id_get {dbqd.wp-slim.www.attach-list.pres_item_id_get {    select parent_id
    from cr_items
    where content_type = 'cr_wp_slide'
    and   item_id = :slide_item_id

      } {} {} {} F:/temp/openacs-4/packages/wp-slim/www/attach-list.xql}
dbqd.wp-slim.www.attach-list.attachments_get {dbqd.wp-slim.www.attach-list.attachments_get {    select name, item_id
    from cr_items
    where content_type in ('cr_wp_image_attachment', 'cr_wp_file_attachment')
    and   parent_id = :slide_item_id

      } {} {} {} F:/temp/openacs-4/packages/wp-slim/www/attach-list.xql}
dbqd.wp-slim.www.attach.attachment_insert {dbqd.wp-slim.www.attach.attachment_insert {begin
    select item_id into :1
    from cr_items
    where content_type = 'cr_wp_attachment'
    and   name = :client_filename
    and   parent_id = :slide_item_id;
exception
    when no_data_found then
        :1 := content_item.new(
              creation_user => :user_id,
              creation_ip   => :creation_ip,
              creation_date => sysdate,
              name          => :client_filename,
              parent_id     => :slide_item_id,
              content_type  => 'cr_wp_attachment'
              );
end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/wp-slim/www/attach-oracle.xql}
dbqd.wp-slim.www.attach.mime_type_insert {dbqd.wp-slim.www.attach.mime_type_insert {	insert into cr_mime_types (mime_type) 
	select :mime_type
	from dual
	where not exists (select 1 from cr_mime_types where mime_type = :mime_type)
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/wp-slim/www/attach-oracle.xql}
dbqd.wp-slim.www.attach.live_revision_set {dbqd.wp-slim.www.attach.live_revision_set {begin
    content_item.set_live_revision(:revision_id);
end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/wp-slim/www/attach-oracle.xql}
dbqd.wp-slim.www.attach.attributes_insert {dbqd.wp-slim.www.attach.attributes_insert {    insert into cr_wp_attachments
    (
    attach_id,
    display
    )
    select
    :revision_id,
    :display
    from dual
    where not exists (select 1 from cr_wp_attachments where attach_id = :revision_id)

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/wp-slim/www/attach-oracle.xql}
dbqd.wp-slim.www.attach.image_data {dbqd.wp-slim.www.attach.image_data {      insert into cr_wp_image_attachments
        (attach_id, display)
      values
        (:revision_id, :display)
   } {} {} {} F:/temp/openacs-4/packages/wp-slim/www/attach.xql}
dbqd.wp-slim.www.attach.file_data {dbqd.wp-slim.www.attach.file_data {      insert into cr_wp_file_attachments
        (attach_id)
      values
        (:revision_id)
   } {} {} {} F:/temp/openacs-4/packages/wp-slim/www/attach.xql}
dbqd.wp-slim.www.create-presentation-2.wp_presentation_insert {dbqd.wp-slim.www.create-presentation-2.wp_presentation_insert {    begin        
      :1 := wp_presentation.new(
      creation_user    => :user_id,
      creation_ip      => :creation_ip,
      creation_date    => sysdate,
      pres_title       => :pres_title,
      page_signature   => :page_signature,
      copyright_notice => :copyright_notice,
      style            => :style,
      public_p         => :public_p,
      show_modified_p  => :show_modified_p,
      audience         => :audience,
      background       => :background,
      parent_id       => :package_id
      );
    end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/wp-slim/www/create-presentation-2-oracle.xql}
dbqd.wp-slim.www.create-presentation-2.grant_owner_access {dbqd.wp-slim.www.create-presentation-2.grant_owner_access {    begin
      acs_permission.grant_permission(:pres_item_id,:user_id,'wp_admin_presentation');
      acs_permission.grant_permission(:pres_item_id,:user_id,'wp_view_presentation');
      acs_permission.grant_permission(:pres_item_id,:user_id,'wp_edit_presentation');
      acs_permission.grant_permission(:pres_item_id,:user_id,'wp_delete_presentation');
    end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/wp-slim/www/create-presentation-2-oracle.xql}
dbqd.wp-slim.www.create-presentation-2.make_wp_presentation_public {dbqd.wp-slim.www.create-presentation-2.make_wp_presentation_public {        begin
          acs_permission.grant_permission(:pres_item_id,acs.magic_object_id('the_public'),'wp_view_presentation');
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/wp-slim/www/create-presentation-2-oracle.xql}
dbqd.wp-slim.www.create-slide-2.wp_slide_insert {dbqd.wp-slim.www.create-slide-2.wp_slide_insert {    begin
      :1 := wp_slide.new(
      pres_item_id      => :pres_item_id,
      creation_user     => :user_id,
      creation_ip       => :creation_ip,
      creation_date     => sysdate,
      slide_title       => :slide_title,
      original_slide_id => -100,
      sort_key          => :sort_key,
      preamble          => :preamble,
      postamble         => :postamble,
      bullet_items      => :bullet_list
      );
    end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/wp-slim/www/create-slide-2-oracle.xql}
dbqd.wp-slim.www.create-slide.get_presentaiton {dbqd.wp-slim.www.create-slide.get_presentaiton {select pres_title
from cr_wp_presentations p,
     cr_items i
where i.item_id = :pres_item_id
and   i.live_revision = p.presentation_id

      } {} {} {} F:/temp/openacs-4/packages/wp-slim/www/create-slide.xql}
dbqd.wp-slim.www.create-slide.get_sort_key {dbqd.wp-slim.www.create-slide.get_sort_key {	select 1+max(sort_key)
        from cr_wp_slides s,
	     cr_items i,
             cr_revisions r
	where i.parent_id = :pres_item_id
	and   s.slide_id = i.live_revision
    
      } {} {} {} F:/temp/openacs-4/packages/wp-slim/www/create-slide.xql}
dbqd.wp-slim.www.delete-presentation-2.delete_presentation {dbqd.wp-slim.www.delete-presentation-2.delete_presentation {	begin
  	  wp_presentation.delete(:pres_item_id);
	end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/wp-slim/www/delete-presentation-2-oracle.xql}
dbqd.wp-slim.www.delete-slide-2.delete_slide {dbqd.wp-slim.www.delete-slide-2.delete_slide {    begin
      wp_slide.delete(:slide_item_id);
    end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/wp-slim/www/delete-slide-2-oracle.xql}
dbqd.wp-slim.www.display-change.get_mime_type {dbqd.wp-slim.www.display-change.get_mime_type {    select mime_type
    from cr_revisions
    where revision_id = :revision_id

      } {} {} {} F:/temp/openacs-4/packages/wp-slim/www/display-change.xql}
dbqd.wp-slim.www.display-change.display_change {dbqd.wp-slim.www.display-change.display_change {    update cr_wp_image_attachments
    set display = :display
    where attach_id = :revision_id

      } {} {} {} F:/temp/openacs-4/packages/wp-slim/www/display-change.xql}
dbqd.wp-slim.www.edit-presentation-2.update_wp_presentation {dbqd.wp-slim.www.edit-presentation-2.update_wp_presentation {    begin
      wp_presentation.new_revision(
      creation_user    => :user_id,
      creation_ip      => :creation_ip,
      creation_date    => sysdate,
      pres_item_id     => :pres_item_id,
      pres_title       => :pres_title,
      page_signature   => :page_signature,
      copyright_notice => :copyright_notice,
      public_p         => :public_p,
      show_modified_p  => :show_modified_p,
      style            => :style,
      audience         => :audience,
      background       => :background
      );
    end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/wp-slim/www/edit-presentation-2-oracle.xql}
dbqd.wp-slim.www.edit-presentation-2.grant_public_read {dbqd.wp-slim.www.edit-presentation-2.grant_public_read {        begin
          acs_permission.grant_permission(:pres_item_id,acs.magic_object_id('the_public'),'wp_view_presentation');
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/wp-slim/www/edit-presentation-2-oracle.xql}
dbqd.wp-slim.www.edit-presentation-2.grant_public_read {dbqd.wp-slim.www.edit-presentation-2.grant_public_read {        begin
          acs_permission.grant_permission(:pres_item_id,acs.magic_object_id('the_public'),'wp_view_presentation');
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/wp-slim/www/edit-presentation-2-oracle.xql}
dbqd.wp-slim.www.edit-presentation.get_presentation_data {dbqd.wp-slim.www.edit-presentation.get_presentation_data {    select p.pres_title, p.page_signature, p.copyright_notice, p.public_p, p.show_modified_p, wp_presentation.get_audience(:pres_item_id) as audience, wp_presentation.get_background(:pres_item_id) as background
    from cr_wp_presentations p, cr_items i
    where i.item_id = :pres_item_id
    and   i.live_revision = p.presentation_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/wp-slim/www/edit-presentation-oracle.xql}
dbqd.wp-slim.www.edit-presentation.get_presentation_data {dbqd.wp-slim.www.edit-presentation.get_presentation_data {    select p.pres_title, p.page_signature, p.copyright_notice, p.public_p, p.show_modified_p, wp_presentation.get_audience(:pres_item_id) as audience, wp_presentation.get_background(:pres_item_id) as background
    from cr_wp_presentations p, cr_items i
    where i.item_id = :pres_item_id
    and   i.live_revision = p.presentation_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/wp-slim/www/edit-presentation-oracle.xql}
dbqd.wp-slim.www.edit-presentation.get_aud_data {dbqd.wp-slim.www.edit-presentation.get_aud_data {    select content as audience
    from cr_revisions, cr_items
    where cr_items.content_type = 'cr_wp_presentation_aud' 
    and cr_items.parent_id = :pres_item_id
    and cr_revisions.revision_id = cr_items.live_revision
      } {} {} {} F:/temp/openacs-4/packages/wp-slim/www/edit-presentation.xql}
dbqd.wp-slim.www.edit-presentation.get_back_data {dbqd.wp-slim.www.edit-presentation.get_back_data {    select content as background   
    from cr_revisions r, cr_items i
    where i.content_type = 'cr_wp_presentation_back' 
    and i.parent_id = :pres_item_id
    and r.revision_id = i.live_revision 
      } {} {} {} F:/temp/openacs-4/packages/wp-slim/www/edit-presentation.xql}
dbqd.wp-slim.www.edit-slide-2.update_slide {dbqd.wp-slim.www.edit-slide-2.update_slide {    begin
      wp_slide.new_revision (
      creation_user     => :user_id,
      creation_ip       => :creation_ip,
      creation_date     => sysdate,
      slide_item_id     => :slide_item_id,
      slide_title       => :slide_title,
      preamble          => :preamble,
      postamble         => :postamble,
      bullet_items      => :bullet_items,
      original_slide_id => :original_slide_id,
      sort_key          => :sort_key
      );
    end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/wp-slim/www/edit-slide-2-oracle.xql}
dbqd.wp-slim.www.edit-slide-2.get_number_of_attachments {dbqd.wp-slim.www.edit-slide-2.get_number_of_attachments {	select count(1) 
	from cr_items
        where content_type in ('cr_wp_image_attachment', 'cr_wp_file_attachment')
	and   parent_id = :slide_item_id
    
      } {} {} {} F:/temp/openacs-4/packages/wp-slim/www/edit-slide-2.xql}
dbqd.wp-slim.www.edit-slide.get_slide_info {dbqd.wp-slim.www.edit-slide.get_slide_info {select s.slide_title,
       s.sort_key,
       s.original_slide_id,
       wp_slide.get_preamble(:slide_item_id) as preamble,
       wp_slide.get_postamble(:slide_item_id) as postamble,
       wp_slide.get_bullet_items(:slide_item_id) as bullet_items
from cr_wp_slides s, cr_items i
where i.item_id = :slide_item_id
and   i.live_revision = s.slide_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/wp-slim/www/edit-slide-oracle.xql}
dbqd.wp-slim.www.index.get_all_public_presentations {dbqd.wp-slim.www.index.get_all_public_presentations {	select i.item_id as pres_item_id,
	pres.pres_title,
	to_char(ao.creation_date, 'Month DD, YYYY') as creation_date,
	ao.creation_user,
	p.first_names || ' ' || p.last_name as full_name
	from cr_items i, cr_wp_presentations pres, persons p, acs_objects ao
	where i.live_revision = pres.presentation_id
	and   ao.object_id = i.item_id
	and   ao.creation_user = p.person_id
	and   pres.public_p = 't'
	and   ao.context_id = :package_id
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/wp-slim/www/index-oracle.xql}
dbqd.wp-slim.www.index.get_my_presentations {dbqd.wp-slim.www.index.get_my_presentations {	select i.item_id as pres_item_id,
	p.pres_title,
	to_char(ao.creation_date, 'Month DD, YYYY') as creation_date
	from cr_items i, cr_wp_presentations p, acs_objects ao
	where i.live_revision = p.presentation_id
	and   ao.object_id = i.item_id
	and   ao.creation_user = :user_id
	and   ao.context_id = :package_id
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/wp-slim/www/index-oracle.xql}
dbqd.wp-slim.www.index.get_all_visible_presentations {dbqd.wp-slim.www.index.get_all_visible_presentations {	select i.item_id as pres_item_id,
	pres.pres_title,
	to_char(ao.creation_date, 'Month DD, YYYY') as creation_date,
	ao.creation_user,
	p.first_names || ' ' || p.last_name as full_name,
	acs_permission.permission_p(i.item_id, :user_id, 'wp_edit_presentation') as edit_p
	from cr_items i, cr_wp_presentations pres, persons p, acs_objects ao
	where i.live_revision = pres.presentation_id
	and   ao.object_id = i.item_id
	and   ao.creation_user <> :user_id
	and   ao.creation_user = p.person_id
	and   acs_permission.permission_p(i.item_id, :user_id, 'wp_view_presentation') = 't'
	and   ao.context_id = :package_id
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/wp-slim/www/index-oracle.xql}
dbqd.wp-slim.www.invite-2.user_info_get {dbqd.wp-slim.www.invite-2.user_info_get {    select persons.first_names || ' ' || persons.last_name as user_name,
           parties.email as user_email
    from persons, parties
    where persons.person_id = :user_id
    and   parties.party_id = :user_id

      } {} {} {} F:/temp/openacs-4/packages/wp-slim/www/invite-2.xql}
dbqd.wp-slim.www.live-revision-set.live_revision_set {dbqd.wp-slim.www.live-revision-set.live_revision_set {    begin
      content_item.set_live_revision(:revision_id);
    end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/wp-slim/www/live-revision-set-oracle.xql}
dbqd.wp-slim.www.presentation-acl-add-2.privilege_check {dbqd.wp-slim.www.presentation-acl-add-2.privilege_check {    select 1
    from acs_permissions
    where object_id = :pres_item_id
    and   grantee_id = :user_id_from_search
    and   privilege = :privilege

      } {} {} {} F:/temp/openacs-4/packages/wp-slim/www/presentation-acl-add-2.xql}
dbqd.wp-slim.www.presentation-acl-add-3.grant_privilege {dbqd.wp-slim.www.presentation-acl-add-3.grant_privilege {	    begin
	        acs_permission.grant_permission(:pres_item_id, :user_id_from_search, 'wp_view_presentation');
	    end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/wp-slim/www/presentation-acl-add-3-oracle.xql}
dbqd.wp-slim.www.presentation-acl-add-3.grant_privilege {dbqd.wp-slim.www.presentation-acl-add-3.grant_privilege {	    begin
	        acs_permission.grant_permission(:pres_item_id, :user_id_from_search, 'wp_view_presentation');
	    end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/wp-slim/www/presentation-acl-add-3-oracle.xql}
dbqd.wp-slim.www.presentation-acl-add-3.grant_privilege {dbqd.wp-slim.www.presentation-acl-add-3.grant_privilege {	    begin
	        acs_permission.grant_permission(:pres_item_id, :user_id_from_search, 'wp_view_presentation');
	    end;
	
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/wp-slim/www/presentation-acl-add-3-oracle.xql}
dbqd.wp-slim.www.presentation-acl-add-3.email_get {dbqd.wp-slim.www.presentation-acl-add-3.email_get {	select email as sender_email
	from parties
	where party_id = :user_id
    
      } {} {} {} F:/temp/openacs-4/packages/wp-slim/www/presentation-acl-add-3.xql}
dbqd.wp-slim.www.presentation-acl-add-group-2.users_get {dbqd.wp-slim.www.presentation-acl-add-group-2.users_get {    select p.first_names,
           p.last_name
    from persons p,
         group_member_map m
    where m.group_id = :group_id
    and   m.member_id = p.person_id
    order by p.last_name

      } {} {} {} F:/temp/openacs-4/packages/wp-slim/www/presentation-acl-add-group-2.xql}
dbqd.wp-slim.www.presentation-acl-add-group-3.group_add {dbqd.wp-slim.www.presentation-acl-add-group-3.group_add {    declare
        cursor v_cursor is
        select member_id
        from group_member_map
        where group_id = :group_id;
    begin
        if :role = 'read' then
            for c in v_cursor loop
                acs_permission.grant_permission(:pres_item_id, c.member_id, 'wp_view_presentation');
            end loop;
        elsif (:role = 'write') then
            for c in v_cursor loop
                acs_permission.grant_permission(:pres_item_id, c.member_id, 'wp_view_presentation');
                acs_permission.grant_permission(:pres_item_id, c.member_id, 'wp_edit_presentation');
            end loop;
        else
            for c in v_cursor loop
                acs_permission.grant_permission(:pres_item_id, c.member_id, 'wp_view_presentation');
                acs_permission.grant_permission(:pres_item_id, c.member_id, 'wp_edit_presentation');
                acs_permission.grant_permission(:pres_item_id, c.member_id, 'wp_admin_presentation');
            end loop;
        end if;
    end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/wp-slim/www/presentation-acl-add-group-3-oracle.xql}
dbqd.wp-slim.www.presentation-acl-add-group.groups_get {dbqd.wp-slim.www.presentation-acl-add-group.groups_get {    select group_id, group_name
    from groups
    order by group_name

      } {} {} {} F:/temp/openacs-4/packages/wp-slim/www/presentation-acl-add-group.xql}
dbqd.wp-slim.www.presentation-acl-delete.revoke_privilege {dbqd.wp-slim.www.presentation-acl-delete.revoke_privilege {    declare
      owner_id  acs_objects.creation_user%TYPE;
    begin
      select creation_user into owner_id
      from acs_objects
      where object_id = :pres_item_id;
 
      if (owner_id <> :user_id) then
        acs_permission.revoke_permission(:pres_item_id, :user_id, :privilege);
      end if;
    end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/wp-slim/www/presentation-acl-delete-oracle.xql}
dbqd.wp-slim.www.presentation-acl.get_presentaiton {dbqd.wp-slim.www.presentation-acl.get_presentaiton {select p.pres_title as title,
       p.public_p,
       ao.creation_user
from cr_wp_presentations p,
     cr_items i,
     acs_objects ao
where i.item_id = :pres_item_id
and   i.live_revision = p.presentation_id
and   ao.object_id = i.item_id

      } {} {} {} F:/temp/openacs-4/packages/wp-slim/www/presentation-acl.xql}
dbqd.wp-slim.www.presentation-acl.read_users_get {dbqd.wp-slim.www.presentation-acl.read_users_get {    select p.person_id,
           p.first_names,
           p.last_name
    from persons p,
         acs_permissions perm
    where perm.object_id = :pres_item_id
    and   perm.grantee_id = p.person_id
    and   perm.privilege = 'wp_view_presentation'

      } {} {} {} F:/temp/openacs-4/packages/wp-slim/www/presentation-acl.xql}
dbqd.wp-slim.www.presentation-acl.write_users_get {dbqd.wp-slim.www.presentation-acl.write_users_get {    select p.person_id,
           p.first_names,
           p.last_name
    from persons p,
         acs_permissions perm
    where perm.object_id = :pres_item_id
    and   perm.grantee_id = p.person_id
    and   perm.privilege = 'wp_edit_presentation'

      } {} {} {} F:/temp/openacs-4/packages/wp-slim/www/presentation-acl.xql}
dbqd.wp-slim.www.presentation-acl.admin_users_get {dbqd.wp-slim.www.presentation-acl.admin_users_get {    select p.person_id,
           p.first_names,
           p.last_name
    from persons p,
         acs_permissions perm
    where perm.object_id = :pres_item_id
    and   perm.grantee_id = p.person_id
    and   perm.privilege = 'wp_admin_presentation'

      } {} {} {} F:/temp/openacs-4/packages/wp-slim/www/presentation-acl.xql}
dbqd.wp-slim.www.presentation-public.grant_public_read {dbqd.wp-slim.www.presentation-public.grant_public_read {        begin
          acs_permission.grant_permission(:pres_item_id,acs.magic_object_id('the_public'),'wp_view_presentation');
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/wp-slim/www/presentation-public-oracle.xql}
dbqd.wp-slim.www.presentation-public.grant_public_read {dbqd.wp-slim.www.presentation-public.grant_public_read {        begin
          acs_permission.grant_permission(:pres_item_id,acs.magic_object_id('the_public'),'wp_view_presentation');
        end;
    
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/wp-slim/www/presentation-public-oracle.xql}
dbqd.wp-slim.www.presentation-public.public_p_change {dbqd.wp-slim.www.presentation-public.public_p_change {    update cr_wp_presentations
    set public_p = :public_p
    where presentation_id = (select live_revision
                             from cr_items
                             where item_id = :pres_item_id)

      } {} {} {} F:/temp/openacs-4/packages/wp-slim/www/presentation-public.xql}
dbqd.wp-slim.www.presentation-publish.live_revision_set {dbqd.wp-slim.www.presentation-publish.live_revision_set {    declare
      v_revision_id  cr_revisions.revision_id%TYPE;
    begin
      content_item.set_live_revision(:revision_id);

      select id into v_revision_id
      from cr_wp_presentations_aud
      where presentation_id = :revision_id;
      content_item.set_live_revision(v_revision_id);

      select id into v_revision_id
      from cr_wp_presentations_back
      where presentation_id = :revision_id;
      content_item.set_live_revision(v_revision_id);
    end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/wp-slim/www/presentation-publish-oracle.xql}
dbqd.wp-slim.www.presentation-revisions.revisions_get {dbqd.wp-slim.www.presentation-revisions.revisions_get {    select r.revision_id,
           to_char(ao.creation_date, 'HH24:MI:SS Mon DD, YYYY') as creation_date,
           ao.creation_ip,
           i.live_revision,
           p.first_names || ' ' || p.last_name as full_name
    from cr_revisions r,
         cr_items i,
         acs_objects ao,
         persons p
    where r.item_id = :pres_item_id
    and   ao.object_id = r.revision_id
    and   i.item_id = r.item_id
    and   p.person_id = ao.creation_user
    order by creation_date

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/wp-slim/www/presentation-revisions-oracle.xql}
dbqd.wp-slim.www.presentation-top.get_presentaiton {dbqd.wp-slim.www.presentation-top.get_presentaiton {select p.public_p,
       p.pres_title as presentation_title,
       acs_permission.permission_p(:pres_item_id, :user_id, 'wp_admin_presentation') as admin_p,
       acs_permission.permission_p(:pres_item_id, :user_id, 'wp_delete_presentation') as delete_p,
       ao.creation_user
from cr_wp_presentations p,
     cr_items i,
     acs_objects ao
where i.item_id = :pres_item_id
and   i.live_revision = p.presentation_id
and   ao.object_id = :pres_item_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/wp-slim/www/presentation-top-oracle.xql}
dbqd.wp-slim.www.presentation-top.get_viewers {dbqd.wp-slim.www.presentation-top.get_viewers {    select first_names || ' ' || last_name as full_name,
           person_id,
           acs_permission.permission_p(:pres_item_id, person_id, 'wp_view_presentation') as view_p,
           acs_permission.permission_p(:pres_item_id, person_id, 'wp_edit_presentation') as edit_p,
           acs_permission.permission_p(:pres_item_id, person_id, 'wp_admin_presentation') as admin_p
    from persons
    where acs_permission.permission_p(:pres_item_id, person_id, 'wp_view_presentation') = 't'
    or    acs_permission.permission_p(:pres_item_id, person_id, 'wp_edit_presentation') = 't'
    or    acs_permission.permission_p(:pres_item_id, person_id, 'wp_admin_presentation') = 't'

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/wp-slim/www/presentation-top-oracle.xql}
dbqd.wp-slim.www.presentation-top.get_slides {dbqd.wp-slim.www.presentation-top.get_slides {select s.sort_key, s.slide_title, i.item_id as slide_item_id
from cr_wp_slides s,
     cr_items i
where i.parent_id = :pres_item_id
and   i.live_revision = s.slide_id
order by s.sort_key

      } {} {} {} F:/temp/openacs-4/packages/wp-slim/www/presentation-top.xql}
dbqd.wp-slim.www.serve-presentation-revision.get_presentation_data {dbqd.wp-slim.www.serve-presentation-revision.get_presentation_data {    select p.pres_title,
           p.page_signature,
           p.copyright_notice,
           p.public_p,
           p.show_modified_p, 
           wp_presentation.get_audience_revision(:pres_revision_id) as audience,
           wp_presentation.get_background_revision(:pres_revision_id) as background
    from cr_wp_presentations p, cr_items i
    where i.item_id = :pres_item_id
    and   p.presentation_id = :pres_revision_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/wp-slim/www/serve-presentation-revision-oracle.xql}
dbqd.wp-slim.www.serve-presentation-revision.get_presentation_data {dbqd.wp-slim.www.serve-presentation-revision.get_presentation_data {    select p.pres_title,
           p.page_signature,
           p.copyright_notice,
           p.public_p,
           p.show_modified_p, 
           wp_presentation.get_audience_revision(:pres_revision_id) as audience,
           wp_presentation.get_background_revision(:pres_revision_id) as background
    from cr_wp_presentations p, cr_items i
    where i.item_id = :pres_item_id
    and   p.presentation_id = :pres_revision_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/wp-slim/www/serve-presentation-revision-oracle.xql}
dbqd.wp-slim.www.serve-presentation-revision.get_audience_data {dbqd.wp-slim.www.serve-presentation-revision.get_audience_data {    select content as audience
    from cr_revisions r, cr_wp_presentations_aud pa
    where pa.presentation_id = :pres_revision_id
    and r.revision_id = pa.id
      } {} {} {} F:/temp/openacs-4/packages/wp-slim/www/serve-presentation-revision.xql}
dbqd.wp-slim.www.serve-presentation-revision.get_background_data {dbqd.wp-slim.www.serve-presentation-revision.get_background_data {    select content as background
    from cr_revisions r, cr_wp_presentations_back pb
    where pb.presentation_id = :pres_revision_id
    and r.revision_id = pb.id
      } {} {} {} F:/temp/openacs-4/packages/wp-slim/www/serve-presentation-revision.xql}
dbqd.wp-slim.www.serve-presentation.get_first_slide_item_id {dbqd.wp-slim.www.serve-presentation.get_first_slide_item_id {    select item_id as first_slide_item_id
    from cr_items
    where content_type = 'cr_wp_slide'
    and   parent_id    = :pres_item_id
    and   exists (select 1 from cr_wp_slides s where s.slide_id=cr_items.live_revision and s.sort_key=1)

      } {} {} {} F:/temp/openacs-4/packages/wp-slim/www/serve-presentation.xql}
dbqd.wp-slim.www.serve-presentation.get_presentation_info {dbqd.wp-slim.www.serve-presentation.get_presentation_info {    select p.pres_title, p.page_signature
    from cr_wp_presentations p, cr_items i
    where i.item_id = :pres_item_id
    and   i.live_revision = p.presentation_id

      } {} {} {} F:/temp/openacs-4/packages/wp-slim/www/serve-presentation.xql}
dbqd.wp-slim.www.serve-presentation.get_owner_name {dbqd.wp-slim.www.serve-presentation.get_owner_name {    select first_names || ' ' || last_name as owner_name, person_id as owner_id
    from persons, acs_objects
    where persons.person_id = acs_objects.creation_user
    and acs_objects.object_id = :pres_item_id

      } {} {} {} F:/temp/openacs-4/packages/wp-slim/www/serve-presentation.xql}
dbqd.wp-slim.www.serve-presentation.get_slides {dbqd.wp-slim.www.serve-presentation.get_slides {select s.slide_title, '$subsite_name/display/$pres_item_id/' || i.item_id || '.wimpy' as url
from cr_wp_slides s, cr_items i
where i.parent_id = :pres_item_id
and   i.live_revision = s.slide_id
order by s.sort_key

      } {} {} {} F:/temp/openacs-4/packages/wp-slim/www/serve-presentation.xql}
dbqd.wp-slim.www.serve-slide.get_slide_info {dbqd.wp-slim.www.serve-slide.get_slide_info {    select s.slide_title,
    s.sort_key,
    wp_slide.get_preamble(:slide_item_id) as preamble,
    wp_slide.get_postamble(:slide_item_id) as postamble,
    wp_slide.get_bullet_items(:slide_item_id) as bullet_items,
    to_char(ao.creation_date, 'HH24:MI, Mon DD, YYYY') as modified_date
    from cr_wp_slides s, cr_items i, acs_objects ao
    where i.item_id = :slide_item_id
    and   i.live_revision = s.slide_id
    and   ao.object_id = s.slide_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/wp-slim/www/serve-slide-oracle.xql}
dbqd.wp-slim.www.serve-slide.get_attachments {dbqd.wp-slim.www.serve-slide.get_attachments {          select i.live_revision as attach_id, a.display, i.name as file_name
          from cr_items i, cr_wp_image_attachments a
          where i.parent_id = :slide_item_id and
              i.content_type in ('cr_wp_image_attachment', 'cr_wp_file_attachment') and
              i.live_revision = a.attach_id(+)
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/wp-slim/www/serve-slide-oracle.xql}
dbqd.wp-slim.www.serve-slide-revision.get_slide_info {dbqd.wp-slim.www.serve-slide-revision.get_slide_info {    select s.slide_title,
    s.sort_key,
    wp_slide.get_preamble_revision(:slide_revision_id) as preamble,
    wp_slide.get_postamble_revision(:slide_revision_id) as postamble,
    wp_slide.get_bullet_items_revision(:slide_revision_id) as bullet_items,
    to_char(ao.creation_date, 'HH24:MI, Mon DD, YYYY') as modified_date
    from cr_wp_slides s,
         cr_items i,
         acs_objects ao
    where i.item_id    = :slide_item_id
    and   s.slide_id   = :slide_revision_id
    and   ao.object_id = s.slide_id

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/wp-slim/www/serve-slide-revision-oracle.xql}
dbqd.wp-slim.www.serve-slide-revision.get_attachments {dbqd.wp-slim.www.serve-slide-revision.get_attachments {          select i.live_revision as attach_id, a.display, i.name as file_name
          from cr_items i, cr_wp_image_attachments a
          where i.parent_id = :slide_item_id and
              i.content_type in ('cr_wp_image_attachment', 'cr_wp_file_attachment') and
              i.live_revision = a.attach_id(+)
      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/wp-slim/www/serve-slide-revision-oracle.xql}
dbqd.wp-slim.www.serve-slide-revision.get_presentation_page_signature {dbqd.wp-slim.www.serve-slide-revision.get_presentation_page_signature {    select p.page_signature,
    p.show_modified_p
    from cr_wp_presentations p, cr_items i
    where i.item_id = :pres_item_id
    and   i.live_revision = p.presentation_id

      } {} {} {} F:/temp/openacs-4/packages/wp-slim/www/serve-slide-revision.xql}
dbqd.wp-slim.www.serve-slide.get_presentation_page_signature {dbqd.wp-slim.www.serve-slide.get_presentation_page_signature {    select p.page_signature,
    p.show_modified_p
    from cr_wp_presentations p, cr_items i
    where i.item_id = :pres_item_id
    and   i.live_revision = p.presentation_id

      } {} {} {} F:/temp/openacs-4/packages/wp-slim/www/serve-slide.xql}
dbqd.wp-slim.www.serve-slide.get_previous_slide_item_id {dbqd.wp-slim.www.serve-slide.get_previous_slide_item_id {	select i.item_id
	from cr_wp_slides s, cr_items i
	where i.parent_id = :pres_item_id
        and   i.live_revision = s.slide_id
	and   s.sort_key = (:sort_key - 1)
    
      } {} {} {} F:/temp/openacs-4/packages/wp-slim/www/serve-slide.xql}
dbqd.wp-slim.www.serve-slide.get_next_slide {dbqd.wp-slim.www.serve-slide.get_next_slide {    select i.item_id as next_slide_item_id 
    from cr_wp_slides s, cr_items i 
    where i.parent_id = :pres_item_id
    and   i.live_revision = s.slide_id
    and   s.sort_key = :next_sort_key

      } {} {} {} F:/temp/openacs-4/packages/wp-slim/www/serve-slide.xql}
dbqd.wp-slim.www.slide-publish.live_revision_set {dbqd.wp-slim.www.slide-publish.live_revision_set {    declare
      v_revision_id  cr_revisions.revision_id%TYPE;
    begin
      content_item.set_live_revision(:revision_id);

      select id into v_revision_id
      from cr_wp_slides_preamble
      where slide_id = :revision_id;
      content_item.set_live_revision(v_revision_id);

      select id into v_revision_id
      from cr_wp_slides_postamble
      where slide_id = :revision_id;
      content_item.set_live_revision(v_revision_id);

      select id into v_revision_id
      from cr_wp_slides_bullet_items
      where slide_id = :revision_id;
      content_item.set_live_revision(v_revision_id);
    end;

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/wp-slim/www/slide-publish-oracle.xql}
dbqd.wp-slim.www.slide-revisions.revisions_get {dbqd.wp-slim.www.slide-revisions.revisions_get {    select r.revision_id,
           to_char(ao.creation_date, 'HH24:MI:SS Mon DD, YYYY') as creation_date,
           ao.creation_ip,
           i.live_revision,
           p.first_names || ' ' || p.last_name as full_name
    from cr_revisions r,
         cr_items i,
         acs_objects ao,
         persons p
    where r.item_id = :slide_item_id
    and   ao.object_id = r.revision_id
    and   i.item_id = r.item_id
    and   p.person_id = ao.creation_user
    order by creation_date

      } {} {} {oracle 8.1.6} F:/temp/openacs-4/packages/wp-slim/www/slide-revisions-oracle.xql}
dbqd.wp-slim.www.slides-reorder-2.wp_slide_order_update {dbqd.wp-slim.www.slides-reorder-2.wp_slide_order_update {	update cr_wp_slides
        set    sort_key = :counter
        where  exists (select 1 from cr_revisions where cr_wp_slides.slide_id = cr_revisions.revision_id and cr_revisions.item_id = :id)
    
      } {} {} {} F:/temp/openacs-4/packages/wp-slim/www/slides-reorder-2.xql}
dbqd.wp-slim.www.slides-reorder.slides_sel {dbqd.wp-slim.www.slides-reorder.slides_sel {    select s.sort_key, s.slide_title, i.item_id as slide_item_id
    from cr_wp_slides s, cr_items i
    where i.parent_id = :pres_item_id
    and   i.live_revision = s.slide_id
    order by s.sort_key

      } {} {} {} F:/temp/openacs-4/packages/wp-slim/www/slides-reorder.xql}
dbqd.wp-slim.www.users.get_wp_users {dbqd.wp-slim.www.users.get_wp_users {    select p.person_id, p.first_names, p.last_name, parties.email, count(i.item_id) as num_presentations
    from persons p, cr_items i, acs_objects o, parties
    where i.content_type = 'cr_wp_presentation'
    and   o.object_id = i.item_id
    and   p.person_id = o.creation_user
    and   parties.party_id = p.person_id
    and   o.context_id = :package_id
    group by p.person_id, p.first_names, p.last_name, parties.email

      } {} {} {} F:/temp/openacs-4/packages/wp-slim/www/users.xql}
dbqd.www.index.site_nodes {dbqd.www.index.site_nodes {  select site_node.url(node_id) as url, acs_object.name(object_id) as name
      from site_nodes
      where parent_id = site_node.node_id('/')
      and object_id is not null
      and acs_permission.permission_p(
          object_id, 
          nvl(:user_id, acs.magic_object_id('the_public')), 
          'read') = 't'
    } {} {} {oracle 8.1.6} F:/temp/openacs-4/www/index-oracle.xql}
dbqd.www.index.user_name_select {dbqd.www.index.user_name_select {	select first_names || ' ' || last_name as name, email
	from persons, parties
	where person_id = :user_id
	and person_id = party_id

    } {} {} {} F:/temp/openacs-4/www/index.xql}
